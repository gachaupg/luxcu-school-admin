var LF=Object.defineProperty;var KS=e=>{throw TypeError(e)};var RF=(e,t,s)=>t in e?LF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var YS=(e,t,s)=>RF(e,typeof t!="symbol"?t+"":t,s),K1=(e,t,s)=>t.has(e)||KS("Cannot "+s);var Qe=(e,t,s)=>(K1(e,t,"read from private field"),s?s.call(e):t.get(e)),zr=(e,t,s)=>t.has(e)?KS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),pr=(e,t,s,n)=>(K1(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),zn=(e,t,s)=>(K1(e,t,"access private method"),s);var zg=(e,t,s,n)=>({set _(a){pr(e,t,a,s)},get _(){return Qe(e,t,n)}});function TF(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Bte=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ek(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tk={exports:{}},Tv={},rk={exports:{}},Pr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=Symbol.for("react.element"),IF=Symbol.for("react.portal"),FF=Symbol.for("react.fragment"),DF=Symbol.for("react.strict_mode"),OF=Symbol.for("react.profiler"),MF=Symbol.for("react.provider"),$F=Symbol.for("react.context"),BF=Symbol.for("react.forward_ref"),zF=Symbol.for("react.suspense"),UF=Symbol.for("react.memo"),qF=Symbol.for("react.lazy"),JS=Symbol.iterator;function VF(e){return e===null||typeof e!="object"?null:(e=JS&&e[JS]||e["@@iterator"],typeof e=="function"?e:null)}var sk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nk=Object.assign,ak={};function vf(e,t,s){this.props=e,this.context=t,this.refs=ak,this.updater=s||sk}vf.prototype.isReactComponent={};vf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ik(){}ik.prototype=vf.prototype;function Mw(e,t,s){this.props=e,this.context=t,this.refs=ak,this.updater=s||sk}var $w=Mw.prototype=new ik;$w.constructor=Mw;nk($w,vf.prototype);$w.isPureReactComponent=!0;var ZS=Array.isArray,ok=Object.prototype.hasOwnProperty,Bw={current:null},lk={key:!0,ref:!0,__self:!0,__source:!0};function ck(e,t,s){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)ok.call(t,n)&&!lk.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:$p,type:e,key:i,ref:o,props:a,_owner:Bw.current}}function HF(e,t){return{$$typeof:$p,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zw(e){return typeof e=="object"&&e!==null&&e.$$typeof===$p}function WF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var XS=/\/+/g;function Y1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WF(""+e.key):t.toString(36)}function yx(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case $p:case IF:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Y1(o,0):n,ZS(a)?(s="",e!=null&&(s=e.replace(XS,"$&/")+"/"),yx(a,t,s,"",function(d){return d})):a!=null&&(zw(a)&&(a=HF(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(XS,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",ZS(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Y1(i,l);o+=yx(i,t,s,c,a)}else if(c=VF(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Y1(i,l++),o+=yx(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ug(e,t,s){if(e==null)return e;var n=[],a=0;return yx(e,n,"","",function(i){return t.call(s,i,a++)}),n}function GF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pa={current:null},bx={transition:null},KF={ReactCurrentDispatcher:pa,ReactCurrentBatchConfig:bx,ReactCurrentOwner:Bw};Pr.Children={map:Ug,forEach:function(e,t,s){Ug(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Ug(e,function(){t++}),t},toArray:function(e){return Ug(e,function(t){return t})||[]},only:function(e){if(!zw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pr.Component=vf;Pr.Fragment=FF;Pr.Profiler=OF;Pr.PureComponent=Mw;Pr.StrictMode=DF;Pr.Suspense=zF;Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KF;Pr.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=nk({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Bw.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ok.call(t,c)&&!lk.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:$p,type:e.type,key:a,ref:i,props:n,_owner:o}};Pr.createContext=function(e){return e={$$typeof:$F,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MF,_context:e},e.Consumer=e};Pr.createElement=ck;Pr.createFactory=function(e){var t=ck.bind(null,e);return t.type=e,t};Pr.createRef=function(){return{current:null}};Pr.forwardRef=function(e){return{$$typeof:BF,render:e}};Pr.isValidElement=zw;Pr.lazy=function(e){return{$$typeof:qF,_payload:{_status:-1,_result:e},_init:GF}};Pr.memo=function(e,t){return{$$typeof:UF,type:e,compare:t===void 0?null:t}};Pr.startTransition=function(e){var t=bx.transition;bx.transition={};try{e()}finally{bx.transition=t}};Pr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pr.useCallback=function(e,t){return pa.current.useCallback(e,t)};Pr.useContext=function(e){return pa.current.useContext(e)};Pr.useDebugValue=function(){};Pr.useDeferredValue=function(e){return pa.current.useDeferredValue(e)};Pr.useEffect=function(e,t){return pa.current.useEffect(e,t)};Pr.useId=function(){return pa.current.useId()};Pr.useImperativeHandle=function(e,t,s){return pa.current.useImperativeHandle(e,t,s)};Pr.useInsertionEffect=function(e,t){return pa.current.useInsertionEffect(e,t)};Pr.useLayoutEffect=function(e,t){return pa.current.useLayoutEffect(e,t)};Pr.useMemo=function(e,t){return pa.current.useMemo(e,t)};Pr.useReducer=function(e,t,s){return pa.current.useReducer(e,t,s)};Pr.useRef=function(e){return pa.current.useRef(e)};Pr.useState=function(e){return pa.current.useState(e)};Pr.useSyncExternalStore=function(e,t,s){return pa.current.useSyncExternalStore(e,t,s)};Pr.useTransition=function(){return pa.current.useTransition()};Pr.version="18.2.0";rk.exports=Pr;var x=rk.exports;const gr=ek(x),Uw=TF({__proto__:null,default:gr},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YF=x,JF=Symbol.for("react.element"),ZF=Symbol.for("react.fragment"),XF=Object.prototype.hasOwnProperty,QF=YF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,e7={key:!0,ref:!0,__self:!0,__source:!0};function dk(e,t,s){var n,a={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)XF.call(t,n)&&!e7.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:JF,type:e,key:i,ref:o,props:a,_owner:QF.current}}Tv.Fragment=ZF;Tv.jsx=dk;Tv.jsxs=dk;tk.exports=Tv;var r=tk.exports,uk={exports:{}},li={},hk={exports:{}},fk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,K){var J=V.length;V.push(K);e:for(;0<J;){var ie=J-1>>>1,T=V[ie];if(0<a(T,K))V[ie]=K,V[J]=T,J=ie;else break e}}function s(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var K=V[0],J=V.pop();if(J!==K){V[0]=J;e:for(var ie=0,T=V.length,F=T>>>1;ie<F;){var M=2*(ie+1)-1,G=V[M],ee=M+1,te=V[ee];if(0>a(G,J))ee<T&&0>a(te,G)?(V[ie]=te,V[ee]=J,ie=ee):(V[ie]=G,V[M]=J,ie=M);else if(ee<T&&0>a(te,J))V[ie]=te,V[ee]=J,ie=ee;else break e}}return K}function a(V,K){var J=V.sortIndex-K.sortIndex;return J!==0?J:V.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,y=!1,g=!1,j=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(V){for(var K=s(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=V)n(d),K.sortIndex=K.expirationTime,t(c,K);else break;K=s(d)}}function C(V){if(g=!1,N(V),!y)if(s(c)!==null)y=!0,se(k);else{var K=s(d);K!==null&&ge(C,K.startTime-V)}}function k(V,K){y=!1,g&&(g=!1,v(E),E=-1),f=!0;var J=p;try{for(N(K),h=s(c);h!==null&&(!(h.expirationTime>K)||V&&!P());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,p=h.priorityLevel;var T=ie(h.expirationTime<=K);K=e.unstable_now(),typeof T=="function"?h.callback=T:h===s(c)&&n(c),N(K)}else n(c);h=s(c)}if(h!==null)var F=!0;else{var M=s(d);M!==null&&ge(C,M.startTime-K),F=!1}return F}finally{h=null,p=J,f=!1}}var O=!1,R=null,E=-1,I=5,D=-1;function P(){return!(e.unstable_now()-D<I)}function A(){if(R!==null){var V=e.unstable_now();D=V;var K=!0;try{K=R(!0,V)}finally{K?$():(O=!1,R=null)}}else O=!1}var $;if(typeof w=="function")$=function(){w(A)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,de=U.port2;U.port1.onmessage=A,$=function(){de.postMessage(null)}}else $=function(){j(A,0)};function se(V){R=V,O||(O=!0,$())}function ge(V,K){E=j(function(){V(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){y||f||(y=!0,se(k))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(V){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var J=p;p=K;try{return V()}finally{p=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var J=p;p=V;try{return K()}finally{p=J}},e.unstable_scheduleCallback=function(V,K,J){var ie=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ie+J:ie):J=ie,V){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=J+T,V={id:u++,callback:K,priorityLevel:V,startTime:J,expirationTime:T,sortIndex:-1},J>ie?(V.sortIndex=J,t(d,V),s(c)===null&&V===s(d)&&(g?(v(E),E=-1):g=!0,ge(C,J-ie))):(V.sortIndex=T,t(c,V),y||f||(y=!0,se(k))),V},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(V){var K=p;return function(){var J=p;p=K;try{return V.apply(this,arguments)}finally{p=J}}}})(fk);hk.exports=fk;var t7=hk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mk=x,si=t7;function ht(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pk=new Set,ap={};function uu(e,t){Xh(e,t),Xh(e+"Capture",t)}function Xh(e,t){for(ap[e]=t,e=0;e<t.length;e++)pk.add(t[e])}var yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R2=Object.prototype.hasOwnProperty,r7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QS={},e_={};function s7(e){return R2.call(e_,e)?!0:R2.call(QS,e)?!1:r7.test(e)?e_[e]=!0:(QS[e]=!0,!1)}function n7(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function a7(e,t,s,n){if(t===null||typeof t>"u"||n7(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ga(e,t,s,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){In[e]=new ga(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];In[t]=new ga(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){In[e]=new ga(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){In[e]=new ga(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){In[e]=new ga(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){In[e]=new ga(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){In[e]=new ga(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){In[e]=new ga(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){In[e]=new ga(e,5,!1,e.toLowerCase(),null,!1,!1)});var qw=/[\-:]([a-z])/g;function Vw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qw,Vw);In[t]=new ga(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qw,Vw);In[t]=new ga(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qw,Vw);In[t]=new ga(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){In[e]=new ga(e,1,!1,e.toLowerCase(),null,!1,!1)});In.xlinkHref=new ga("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){In[e]=new ga(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hw(e,t,s,n){var a=In.hasOwnProperty(t)?In[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(a7(t,s,a,n)&&(s=null),n||a===null?s7(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var Pl=mk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qg=Symbol.for("react.element"),sh=Symbol.for("react.portal"),nh=Symbol.for("react.fragment"),Ww=Symbol.for("react.strict_mode"),T2=Symbol.for("react.profiler"),gk=Symbol.for("react.provider"),xk=Symbol.for("react.context"),Gw=Symbol.for("react.forward_ref"),I2=Symbol.for("react.suspense"),F2=Symbol.for("react.suspense_list"),Kw=Symbol.for("react.memo"),Ql=Symbol.for("react.lazy"),vk=Symbol.for("react.offscreen"),t_=Symbol.iterator;function om(e){return e===null||typeof e!="object"?null:(e=t_&&e[t_]||e["@@iterator"],typeof e=="function"?e:null)}var As=Object.assign,J1;function Cm(e){if(J1===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);J1=t&&t[1]||""}return`
`+J1+e}var Z1=!1;function X1(e,t){if(!e||Z1)return"";Z1=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Z1=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Cm(e):""}function i7(e){switch(e.tag){case 5:return Cm(e.type);case 16:return Cm("Lazy");case 13:return Cm("Suspense");case 19:return Cm("SuspenseList");case 0:case 2:case 15:return e=X1(e.type,!1),e;case 11:return e=X1(e.type.render,!1),e;case 1:return e=X1(e.type,!0),e;default:return""}}function D2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nh:return"Fragment";case sh:return"Portal";case T2:return"Profiler";case Ww:return"StrictMode";case I2:return"Suspense";case F2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xk:return(e.displayName||"Context")+".Consumer";case gk:return(e._context.displayName||"Context")+".Provider";case Gw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kw:return t=e.displayName||null,t!==null?t:D2(e.type)||"Memo";case Ql:t=e._payload,e=e._init;try{return D2(e(t))}catch{}}return null}function o7(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D2(t);case 8:return t===Ww?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ic(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function l7(e){var t=yk(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vg(e){e._valueTracker||(e._valueTracker=l7(e))}function bk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=yk(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function C0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function O2(e,t){var s=t.checked;return As({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function r_(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=Ic(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jk(e,t){t=t.checked,t!=null&&Hw(e,"checked",t,!1)}function M2(e,t){jk(e,t);var s=Ic(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$2(e,t.type,s):t.hasOwnProperty("defaultValue")&&$2(e,t.type,Ic(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function s_(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function $2(e,t,s){(t!=="number"||C0(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var km=Array.isArray;function gh(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+Ic(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function B2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ht(91));return As({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function n_(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(ht(92));if(km(s)){if(1<s.length)throw Error(ht(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Ic(s)}}function wk(e,t){var s=Ic(t.value),n=Ic(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function a_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function z2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hg,Sk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hg=Hg||document.createElement("div"),Hg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ip(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Fm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},c7=["Webkit","ms","Moz","O"];Object.keys(Fm).forEach(function(e){c7.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fm[t]=Fm[e]})});function _k(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Fm.hasOwnProperty(e)&&Fm[e]?(""+t).trim():t+"px"}function Ck(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=_k(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var d7=As({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function U2(e,t){if(t){if(d7[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ht(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ht(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ht(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ht(62))}}function q2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V2=null;function Yw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var H2=null,xh=null,vh=null;function i_(e){if(e=Up(e)){if(typeof H2!="function")throw Error(ht(280));var t=e.stateNode;t&&(t=Mv(t),H2(e.stateNode,e.type,t))}}function kk(e){xh?vh?vh.push(e):vh=[e]:xh=e}function Ak(){if(xh){var e=xh,t=vh;if(vh=xh=null,i_(e),t)for(e=0;e<t.length;e++)i_(t[e])}}function Pk(e,t){return e(t)}function Ek(){}var Q1=!1;function Lk(e,t,s){if(Q1)return e(t,s);Q1=!0;try{return Pk(e,t,s)}finally{Q1=!1,(xh!==null||vh!==null)&&(Ek(),Ak())}}function op(e,t){var s=e.stateNode;if(s===null)return null;var n=Mv(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(ht(231,t,typeof s));return s}var W2=!1;if(yl)try{var lm={};Object.defineProperty(lm,"passive",{get:function(){W2=!0}}),window.addEventListener("test",lm,lm),window.removeEventListener("test",lm,lm)}catch{W2=!1}function u7(e,t,s,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var Dm=!1,k0=null,A0=!1,G2=null,h7={onError:function(e){Dm=!0,k0=e}};function f7(e,t,s,n,a,i,o,l,c){Dm=!1,k0=null,u7.apply(h7,arguments)}function m7(e,t,s,n,a,i,o,l,c){if(f7.apply(this,arguments),Dm){if(Dm){var d=k0;Dm=!1,k0=null}else throw Error(ht(198));A0||(A0=!0,G2=d)}}function hu(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Rk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function o_(e){if(hu(e)!==e)throw Error(ht(188))}function p7(e){var t=e.alternate;if(!t){if(t=hu(e),t===null)throw Error(ht(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return o_(a),e;if(i===n)return o_(a),t;i=i.sibling}throw Error(ht(188))}if(s.return!==n.return)s=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o)throw Error(ht(189))}}if(s.alternate!==n)throw Error(ht(190))}if(s.tag!==3)throw Error(ht(188));return s.stateNode.current===s?e:t}function Tk(e){return e=p7(e),e!==null?Ik(e):null}function Ik(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ik(e);if(t!==null)return t;e=e.sibling}return null}var Fk=si.unstable_scheduleCallback,l_=si.unstable_cancelCallback,g7=si.unstable_shouldYield,x7=si.unstable_requestPaint,Us=si.unstable_now,v7=si.unstable_getCurrentPriorityLevel,Jw=si.unstable_ImmediatePriority,Dk=si.unstable_UserBlockingPriority,P0=si.unstable_NormalPriority,y7=si.unstable_LowPriority,Ok=si.unstable_IdlePriority,Iv=null,Io=null;function b7(e){if(Io&&typeof Io.onCommitFiberRoot=="function")try{Io.onCommitFiberRoot(Iv,e,void 0,(e.current.flags&128)===128)}catch{}}var Ji=Math.clz32?Math.clz32:N7,j7=Math.log,w7=Math.LN2;function N7(e){return e>>>=0,e===0?32:31-(j7(e)/w7|0)|0}var Wg=64,Gg=4194304;function Am(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function E0(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~a;l!==0?n=Am(l):(i&=o,i!==0&&(n=Am(i)))}else o=s&~a,o!==0?n=Am(o):i!==0&&(n=Am(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-Ji(t),a=1<<s,n|=e[s],t&=~a;return n}function S7(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _7(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ji(i),l=1<<o,c=a[o];c===-1?(!(l&s)||l&n)&&(a[o]=S7(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function K2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mk(){var e=Wg;return Wg<<=1,!(Wg&4194240)&&(Wg=64),e}function eb(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Bp(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ji(t),e[t]=s}function C7(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-Ji(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function Zw(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Ji(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var rs=0;function $k(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bk,Xw,zk,Uk,qk,Y2=!1,Kg=[],vc=null,yc=null,bc=null,lp=new Map,cp=new Map,rc=[],k7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c_(e,t){switch(e){case"focusin":case"focusout":vc=null;break;case"dragenter":case"dragleave":yc=null;break;case"mouseover":case"mouseout":bc=null;break;case"pointerover":case"pointerout":lp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cp.delete(t.pointerId)}}function cm(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Up(t),t!==null&&Xw(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function A7(e,t,s,n,a){switch(t){case"focusin":return vc=cm(vc,e,t,s,n,a),!0;case"dragenter":return yc=cm(yc,e,t,s,n,a),!0;case"mouseover":return bc=cm(bc,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return lp.set(i,cm(lp.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,cp.set(i,cm(cp.get(i)||null,e,t,s,n,a)),!0}return!1}function Vk(e){var t=kd(e.target);if(t!==null){var s=hu(t);if(s!==null){if(t=s.tag,t===13){if(t=Rk(s),t!==null){e.blockedOn=t,qk(e.priority,function(){zk(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=J2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);V2=n,s.target.dispatchEvent(n),V2=null}else return t=Up(s),t!==null&&Xw(t),e.blockedOn=s,!1;t.shift()}return!0}function d_(e,t,s){jx(e)&&s.delete(t)}function P7(){Y2=!1,vc!==null&&jx(vc)&&(vc=null),yc!==null&&jx(yc)&&(yc=null),bc!==null&&jx(bc)&&(bc=null),lp.forEach(d_),cp.forEach(d_)}function dm(e,t){e.blockedOn===t&&(e.blockedOn=null,Y2||(Y2=!0,si.unstable_scheduleCallback(si.unstable_NormalPriority,P7)))}function dp(e){function t(a){return dm(a,e)}if(0<Kg.length){dm(Kg[0],e);for(var s=1;s<Kg.length;s++){var n=Kg[s];n.blockedOn===e&&(n.blockedOn=null)}}for(vc!==null&&dm(vc,e),yc!==null&&dm(yc,e),bc!==null&&dm(bc,e),lp.forEach(t),cp.forEach(t),s=0;s<rc.length;s++)n=rc[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<rc.length&&(s=rc[0],s.blockedOn===null);)Vk(s),s.blockedOn===null&&rc.shift()}var yh=Pl.ReactCurrentBatchConfig,L0=!0;function E7(e,t,s,n){var a=rs,i=yh.transition;yh.transition=null;try{rs=1,Qw(e,t,s,n)}finally{rs=a,yh.transition=i}}function L7(e,t,s,n){var a=rs,i=yh.transition;yh.transition=null;try{rs=4,Qw(e,t,s,n)}finally{rs=a,yh.transition=i}}function Qw(e,t,s,n){if(L0){var a=J2(e,t,s,n);if(a===null)db(e,t,n,R0,s),c_(e,n);else if(A7(a,e,t,s,n))n.stopPropagation();else if(c_(e,n),t&4&&-1<k7.indexOf(e)){for(;a!==null;){var i=Up(a);if(i!==null&&Bk(i),i=J2(e,t,s,n),i===null&&db(e,t,n,R0,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else db(e,t,n,null,s)}}var R0=null;function J2(e,t,s,n){if(R0=null,e=Yw(n),e=kd(e),e!==null)if(t=hu(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Rk(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return R0=e,null}function Hk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v7()){case Jw:return 1;case Dk:return 4;case P0:case y7:return 16;case Ok:return 536870912;default:return 16}default:return 16}}var hc=null,eN=null,wx=null;function Wk(){if(wx)return wx;var e,t=eN,s=t.length,n,a="value"in hc?hc.value:hc.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[i-n];n++);return wx=a.slice(e,1<n?1-n:void 0)}function Nx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Yg(){return!0}function u_(){return!1}function ci(e){function t(s,n,a,i,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yg:u_,this.isPropagationStopped=u_,this}return As(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Yg)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Yg)},persist:function(){},isPersistent:Yg}),t}var yf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tN=ci(yf),zp=As({},yf,{view:0,detail:0}),R7=ci(zp),tb,rb,um,Fv=As({},zp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rN,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==um&&(um&&e.type==="mousemove"?(tb=e.screenX-um.screenX,rb=e.screenY-um.screenY):rb=tb=0,um=e),tb)},movementY:function(e){return"movementY"in e?e.movementY:rb}}),h_=ci(Fv),T7=As({},Fv,{dataTransfer:0}),I7=ci(T7),F7=As({},zp,{relatedTarget:0}),sb=ci(F7),D7=As({},yf,{animationName:0,elapsedTime:0,pseudoElement:0}),O7=ci(D7),M7=As({},yf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$7=ci(M7),B7=As({},yf,{data:0}),f_=ci(B7),z7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V7(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=q7[e])?!!t[e]:!1}function rN(){return V7}var H7=As({},zp,{key:function(e){if(e.key){var t=z7[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Nx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?U7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rN,charCode:function(e){return e.type==="keypress"?Nx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),W7=ci(H7),G7=As({},Fv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m_=ci(G7),K7=As({},zp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rN}),Y7=ci(K7),J7=As({},yf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z7=ci(J7),X7=As({},Fv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q7=ci(X7),eD=[9,13,27,32],sN=yl&&"CompositionEvent"in window,Om=null;yl&&"documentMode"in document&&(Om=document.documentMode);var tD=yl&&"TextEvent"in window&&!Om,Gk=yl&&(!sN||Om&&8<Om&&11>=Om),p_=" ",g_=!1;function Kk(e,t){switch(e){case"keyup":return eD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ah=!1;function rD(e,t){switch(e){case"compositionend":return Yk(t);case"keypress":return t.which!==32?null:(g_=!0,p_);case"textInput":return e=t.data,e===p_&&g_?null:e;default:return null}}function sD(e,t){if(ah)return e==="compositionend"||!sN&&Kk(e,t)?(e=Wk(),wx=eN=hc=null,ah=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gk&&t.locale!=="ko"?null:t.data;default:return null}}var nD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nD[e.type]:t==="textarea"}function Jk(e,t,s,n){kk(n),t=T0(t,"onChange"),0<t.length&&(s=new tN("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Mm=null,up=null;function aD(e){o6(e,0)}function Dv(e){var t=lh(e);if(bk(t))return e}function iD(e,t){if(e==="change")return t}var Zk=!1;if(yl){var nb;if(yl){var ab="oninput"in document;if(!ab){var v_=document.createElement("div");v_.setAttribute("oninput","return;"),ab=typeof v_.oninput=="function"}nb=ab}else nb=!1;Zk=nb&&(!document.documentMode||9<document.documentMode)}function y_(){Mm&&(Mm.detachEvent("onpropertychange",Xk),up=Mm=null)}function Xk(e){if(e.propertyName==="value"&&Dv(up)){var t=[];Jk(t,up,e,Yw(e)),Lk(aD,t)}}function oD(e,t,s){e==="focusin"?(y_(),Mm=t,up=s,Mm.attachEvent("onpropertychange",Xk)):e==="focusout"&&y_()}function lD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dv(up)}function cD(e,t){if(e==="click")return Dv(t)}function dD(e,t){if(e==="input"||e==="change")return Dv(t)}function uD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var eo=typeof Object.is=="function"?Object.is:uD;function hp(e,t){if(eo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!R2.call(t,a)||!eo(e[a],t[a]))return!1}return!0}function b_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function j_(e,t){var s=b_(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=b_(s)}}function Qk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function e6(){for(var e=window,t=C0();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=C0(e.document)}return t}function nN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hD(e){var t=e6(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Qk(s.ownerDocument.documentElement,s)){if(n!==null&&nN(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=j_(s,i);var o=j_(s,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fD=yl&&"documentMode"in document&&11>=document.documentMode,ih=null,Z2=null,$m=null,X2=!1;function w_(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;X2||ih==null||ih!==C0(n)||(n=ih,"selectionStart"in n&&nN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$m&&hp($m,n)||($m=n,n=T0(Z2,"onSelect"),0<n.length&&(t=new tN("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=ih)))}function Jg(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var oh={animationend:Jg("Animation","AnimationEnd"),animationiteration:Jg("Animation","AnimationIteration"),animationstart:Jg("Animation","AnimationStart"),transitionend:Jg("Transition","TransitionEnd")},ib={},t6={};yl&&(t6=document.createElement("div").style,"AnimationEvent"in window||(delete oh.animationend.animation,delete oh.animationiteration.animation,delete oh.animationstart.animation),"TransitionEvent"in window||delete oh.transitionend.transition);function Ov(e){if(ib[e])return ib[e];if(!oh[e])return e;var t=oh[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in t6)return ib[e]=t[s];return e}var r6=Ov("animationend"),s6=Ov("animationiteration"),n6=Ov("animationstart"),a6=Ov("transitionend"),i6=new Map,N_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ed(e,t){i6.set(e,t),uu(t,[e])}for(var ob=0;ob<N_.length;ob++){var lb=N_[ob],mD=lb.toLowerCase(),pD=lb[0].toUpperCase()+lb.slice(1);ed(mD,"on"+pD)}ed(r6,"onAnimationEnd");ed(s6,"onAnimationIteration");ed(n6,"onAnimationStart");ed("dblclick","onDoubleClick");ed("focusin","onFocus");ed("focusout","onBlur");ed(a6,"onTransitionEnd");Xh("onMouseEnter",["mouseout","mouseover"]);Xh("onMouseLeave",["mouseout","mouseover"]);Xh("onPointerEnter",["pointerout","pointerover"]);Xh("onPointerLeave",["pointerout","pointerover"]);uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pm));function S_(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,m7(n,t,void 0,e),e.currentTarget=null}function o6(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;S_(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;S_(a,l,d),i=c}}}if(A0)throw e=G2,A0=!1,G2=null,e}function vs(e,t){var s=t[sj];s===void 0&&(s=t[sj]=new Set);var n=e+"__bubble";s.has(n)||(l6(t,e,2,!1),s.add(n))}function cb(e,t,s){var n=0;t&&(n|=4),l6(s,e,n,t)}var Zg="_reactListening"+Math.random().toString(36).slice(2);function fp(e){if(!e[Zg]){e[Zg]=!0,pk.forEach(function(s){s!=="selectionchange"&&(gD.has(s)||cb(s,!1,e),cb(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zg]||(t[Zg]=!0,cb("selectionchange",!1,t))}}function l6(e,t,s,n){switch(Hk(t)){case 1:var a=E7;break;case 4:a=L7;break;default:a=Qw}s=a.bind(null,t,s,e),a=void 0,!W2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function db(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=kd(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Lk(function(){var d=i,u=Yw(s),h=[];e:{var p=i6.get(e);if(p!==void 0){var f=tN,y=e;switch(e){case"keypress":if(Nx(s)===0)break e;case"keydown":case"keyup":f=W7;break;case"focusin":y="focus",f=sb;break;case"focusout":y="blur",f=sb;break;case"beforeblur":case"afterblur":f=sb;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=h_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=I7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Y7;break;case r6:case s6:case n6:f=O7;break;case a6:f=Z7;break;case"scroll":f=R7;break;case"wheel":f=Q7;break;case"copy":case"cut":case"paste":f=$7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=m_}var g=(t&4)!==0,j=!g&&e==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var w=d,N;w!==null;){N=w;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,v!==null&&(C=op(w,v),C!=null&&g.push(mp(w,C,N)))),j)break;w=w.return}0<g.length&&(p=new f(p,y,null,s,u),h.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&s!==V2&&(y=s.relatedTarget||s.fromElement)&&(kd(y)||y[bl]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(y=s.relatedTarget||s.toElement,f=d,y=y?kd(y):null,y!==null&&(j=hu(y),y!==j||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=d),f!==y)){if(g=h_,C="onMouseLeave",v="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=m_,C="onPointerLeave",v="onPointerEnter",w="pointer"),j=f==null?p:lh(f),N=y==null?p:lh(y),p=new g(C,w+"leave",f,s,u),p.target=j,p.relatedTarget=N,C=null,kd(u)===d&&(g=new g(v,w+"enter",y,s,u),g.target=N,g.relatedTarget=j,C=g),j=C,f&&y)t:{for(g=f,v=y,w=0,N=g;N;N=Hu(N))w++;for(N=0,C=v;C;C=Hu(C))N++;for(;0<w-N;)g=Hu(g),w--;for(;0<N-w;)v=Hu(v),N--;for(;w--;){if(g===v||v!==null&&g===v.alternate)break t;g=Hu(g),v=Hu(v)}g=null}else g=null;f!==null&&__(h,p,f,g,!1),y!==null&&j!==null&&__(h,j,y,g,!0)}}e:{if(p=d?lh(d):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var k=iD;else if(x_(p))if(Zk)k=dD;else{k=lD;var O=oD}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=cD);if(k&&(k=k(e,d))){Jk(h,k,s,u);break e}O&&O(e,p,d),e==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&$2(p,"number",p.value)}switch(O=d?lh(d):window,e){case"focusin":(x_(O)||O.contentEditable==="true")&&(ih=O,Z2=d,$m=null);break;case"focusout":$m=Z2=ih=null;break;case"mousedown":X2=!0;break;case"contextmenu":case"mouseup":case"dragend":X2=!1,w_(h,s,u);break;case"selectionchange":if(fD)break;case"keydown":case"keyup":w_(h,s,u)}var R;if(sN)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ah?Kk(e,s)&&(E="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(E="onCompositionStart");E&&(Gk&&s.locale!=="ko"&&(ah||E!=="onCompositionStart"?E==="onCompositionEnd"&&ah&&(R=Wk()):(hc=u,eN="value"in hc?hc.value:hc.textContent,ah=!0)),O=T0(d,E),0<O.length&&(E=new f_(E,e,null,s,u),h.push({event:E,listeners:O}),R?E.data=R:(R=Yk(s),R!==null&&(E.data=R)))),(R=tD?rD(e,s):sD(e,s))&&(d=T0(d,"onBeforeInput"),0<d.length&&(u=new f_("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=R))}o6(h,t)})}function mp(e,t,s){return{instance:e,listener:t,currentTarget:s}}function T0(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=op(e,s),i!=null&&n.unshift(mp(e,i,a)),i=op(e,t),i!=null&&n.push(mp(e,i,a))),e=e.return}return n}function Hu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function __(e,t,s,n,a){for(var i=t._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=op(s,i),c!=null&&o.unshift(mp(s,c,l))):a||(c=op(s,i),c!=null&&o.push(mp(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var xD=/\r\n?/g,vD=/\u0000|\uFFFD/g;function C_(e){return(typeof e=="string"?e:""+e).replace(xD,`
`).replace(vD,"")}function Xg(e,t,s){if(t=C_(t),C_(e)!==t&&s)throw Error(ht(425))}function I0(){}var Q2=null,ej=null;function tj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rj=typeof setTimeout=="function"?setTimeout:void 0,yD=typeof clearTimeout=="function"?clearTimeout:void 0,k_=typeof Promise=="function"?Promise:void 0,bD=typeof queueMicrotask=="function"?queueMicrotask:typeof k_<"u"?function(e){return k_.resolve(null).then(e).catch(jD)}:rj;function jD(e){setTimeout(function(){throw e})}function ub(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),dp(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);dp(t)}function jc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function A_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var bf=Math.random().toString(36).slice(2),_o="__reactFiber$"+bf,pp="__reactProps$"+bf,bl="__reactContainer$"+bf,sj="__reactEvents$"+bf,wD="__reactListeners$"+bf,ND="__reactHandles$"+bf;function kd(e){var t=e[_o];if(t)return t;for(var s=e.parentNode;s;){if(t=s[bl]||s[_o]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=A_(e);e!==null;){if(s=e[_o])return s;e=A_(e)}return t}e=s,s=e.parentNode}return null}function Up(e){return e=e[_o]||e[bl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function lh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ht(33))}function Mv(e){return e[pp]||null}var nj=[],ch=-1;function td(e){return{current:e}}function bs(e){0>ch||(e.current=nj[ch],nj[ch]=null,ch--)}function gs(e,t){ch++,nj[ch]=e.current,e.current=t}var Fc={},sa=td(Fc),Ea=td(!1),Yd=Fc;function Qh(e,t){var s=e.type.contextTypes;if(!s)return Fc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function La(e){return e=e.childContextTypes,e!=null}function F0(){bs(Ea),bs(sa)}function P_(e,t,s){if(sa.current!==Fc)throw Error(ht(168));gs(sa,t),gs(Ea,s)}function c6(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ht(108,o7(e)||"Unknown",a));return As({},s,n)}function D0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fc,Yd=sa.current,gs(sa,e),gs(Ea,Ea.current),!0}function E_(e,t,s){var n=e.stateNode;if(!n)throw Error(ht(169));s?(e=c6(e,t,Yd),n.__reactInternalMemoizedMergedChildContext=e,bs(Ea),bs(sa),gs(sa,e)):bs(Ea),gs(Ea,s)}var ul=null,$v=!1,hb=!1;function d6(e){ul===null?ul=[e]:ul.push(e)}function SD(e){$v=!0,d6(e)}function rd(){if(!hb&&ul!==null){hb=!0;var e=0,t=rs;try{var s=ul;for(rs=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}ul=null,$v=!1}catch(a){throw ul!==null&&(ul=ul.slice(e+1)),Fk(Jw,rd),a}finally{rs=t,hb=!1}}return null}var dh=[],uh=0,O0=null,M0=0,ji=[],wi=0,Jd=null,fl=1,ml="";function wd(e,t){dh[uh++]=M0,dh[uh++]=O0,O0=e,M0=t}function u6(e,t,s){ji[wi++]=fl,ji[wi++]=ml,ji[wi++]=Jd,Jd=e;var n=fl;e=ml;var a=32-Ji(n)-1;n&=~(1<<a),s+=1;var i=32-Ji(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,fl=1<<32-Ji(t)+a|s<<a|n,ml=i+e}else fl=1<<i|s<<a|n,ml=e}function aN(e){e.return!==null&&(wd(e,1),u6(e,1,0))}function iN(e){for(;e===O0;)O0=dh[--uh],dh[uh]=null,M0=dh[--uh],dh[uh]=null;for(;e===Jd;)Jd=ji[--wi],ji[wi]=null,ml=ji[--wi],ji[wi]=null,fl=ji[--wi],ji[wi]=null}var ti=null,Qa=null,Ns=!1,Wi=null;function h6(e,t){var s=Ni(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function L_(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ti=e,Qa=jc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ti=e,Qa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Jd!==null?{id:fl,overflow:ml}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Ni(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,ti=e,Qa=null,!0):!1;default:return!1}}function aj(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ij(e){if(Ns){var t=Qa;if(t){var s=t;if(!L_(e,t)){if(aj(e))throw Error(ht(418));t=jc(s.nextSibling);var n=ti;t&&L_(e,t)?h6(n,s):(e.flags=e.flags&-4097|2,Ns=!1,ti=e)}}else{if(aj(e))throw Error(ht(418));e.flags=e.flags&-4097|2,Ns=!1,ti=e}}}function R_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ti=e}function Qg(e){if(e!==ti)return!1;if(!Ns)return R_(e),Ns=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tj(e.type,e.memoizedProps)),t&&(t=Qa)){if(aj(e))throw f6(),Error(ht(418));for(;t;)h6(e,t),t=jc(t.nextSibling)}if(R_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ht(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Qa=jc(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Qa=null}}else Qa=ti?jc(e.stateNode.nextSibling):null;return!0}function f6(){for(var e=Qa;e;)e=jc(e.nextSibling)}function ef(){Qa=ti=null,Ns=!1}function oN(e){Wi===null?Wi=[e]:Wi.push(e)}var _D=Pl.ReactCurrentBatchConfig;function Bi(e,t){if(e&&e.defaultProps){t=As({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}var $0=td(null),B0=null,hh=null,lN=null;function cN(){lN=hh=B0=null}function dN(e){var t=$0.current;bs($0),e._currentValue=t}function oj(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function bh(e,t){B0=e,lN=hh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pa=!0),e.firstContext=null)}function Ci(e){var t=e._currentValue;if(lN!==e)if(e={context:e,memoizedValue:t,next:null},hh===null){if(B0===null)throw Error(ht(308));hh=e,B0.dependencies={lanes:0,firstContext:e}}else hh=hh.next=e;return t}var Ad=null;function uN(e){Ad===null?Ad=[e]:Ad.push(e)}function m6(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,uN(t)):(s.next=a.next,a.next=s),t.interleaved=s,jl(e,n)}function jl(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var ec=!1;function hN(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wc(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Dr&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,jl(e,s)}return a=n.interleaved,a===null?(t.next=t,uN(n)):(t.next=a.next,a.next=t),n.interleaved=t,jl(e,s)}function Sx(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Zw(e,s)}}function T_(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function z0(e,t,s,n){var a=e.updateQueue;ec=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var p=l.lane,f=l.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,g=l;switch(p=t,f=s,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(f,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(f,h,p):y,p==null)break e;h=As({},h,p);break e;case 2:ec=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=f,c=h):u=u.next=f,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Xd|=o,e.lanes=o,e.memoizedState=h}}function I_(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(ht(191,a));a.call(n)}}}var g6=new mk.Component().refs;function lj(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:As({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Bv={isMounted:function(e){return(e=e._reactInternals)?hu(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=fa(),a=Sc(e),i=xl(n,a);i.payload=t,s!=null&&(i.callback=s),t=wc(e,i,a),t!==null&&(Zi(t,e,a,n),Sx(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=fa(),a=Sc(e),i=xl(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=wc(e,i,a),t!==null&&(Zi(t,e,a,n),Sx(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=fa(),n=Sc(e),a=xl(s,n);a.tag=2,t!=null&&(a.callback=t),t=wc(e,a,n),t!==null&&(Zi(t,e,n,s),Sx(t,e,n))}};function F_(e,t,s,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!hp(s,n)||!hp(a,i):!0}function x6(e,t,s){var n=!1,a=Fc,i=t.contextType;return typeof i=="object"&&i!==null?i=Ci(i):(a=La(t)?Yd:sa.current,n=t.contextTypes,i=(n=n!=null)?Qh(e,a):Fc),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bv,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function D_(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Bv.enqueueReplaceState(t,t.state,null)}function cj(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs=g6,hN(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ci(i):(i=La(t)?Yd:sa.current,a.context=Qh(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(lj(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Bv.enqueueReplaceState(a,a.state,null),z0(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function hm(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(ht(309));var n=s.stateNode}if(!n)throw Error(ht(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;l===g6&&(l=a.refs={}),o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ht(284));if(!s._owner)throw Error(ht(290,e))}return e}function ex(e,t){throw e=Object.prototype.toString.call(t),Error(ht(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function O_(e){var t=e._init;return t(e._payload)}function v6(e){function t(v,w){if(e){var N=v.deletions;N===null?(v.deletions=[w],v.flags|=16):N.push(w)}}function s(v,w){if(!e)return null;for(;w!==null;)t(v,w),w=w.sibling;return null}function n(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function a(v,w){return v=_c(v,w),v.index=0,v.sibling=null,v}function i(v,w,N){return v.index=N,e?(N=v.alternate,N!==null?(N=N.index,N<w?(v.flags|=2,w):N):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,w,N,C){return w===null||w.tag!==6?(w=yb(N,v.mode,C),w.return=v,w):(w=a(w,N),w.return=v,w)}function c(v,w,N,C){var k=N.type;return k===nh?u(v,w,N.props.children,C,N.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ql&&O_(k)===w.type)?(C=a(w,N.props),C.ref=hm(v,w,N),C.return=v,C):(C=Ex(N.type,N.key,N.props,null,v.mode,C),C.ref=hm(v,w,N),C.return=v,C)}function d(v,w,N,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=bb(N,v.mode,C),w.return=v,w):(w=a(w,N.children||[]),w.return=v,w)}function u(v,w,N,C,k){return w===null||w.tag!==7?(w=Bd(N,v.mode,C,k),w.return=v,w):(w=a(w,N),w.return=v,w)}function h(v,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=yb(""+w,v.mode,N),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qg:return N=Ex(w.type,w.key,w.props,null,v.mode,N),N.ref=hm(v,null,w),N.return=v,N;case sh:return w=bb(w,v.mode,N),w.return=v,w;case Ql:var C=w._init;return h(v,C(w._payload),N)}if(km(w)||om(w))return w=Bd(w,v.mode,N,null),w.return=v,w;ex(v,w)}return null}function p(v,w,N,C){var k=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return k!==null?null:l(v,w,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case qg:return N.key===k?c(v,w,N,C):null;case sh:return N.key===k?d(v,w,N,C):null;case Ql:return k=N._init,p(v,w,k(N._payload),C)}if(km(N)||om(N))return k!==null?null:u(v,w,N,C,null);ex(v,N)}return null}function f(v,w,N,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(N)||null,l(w,v,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case qg:return v=v.get(C.key===null?N:C.key)||null,c(w,v,C,k);case sh:return v=v.get(C.key===null?N:C.key)||null,d(w,v,C,k);case Ql:var O=C._init;return f(v,w,N,O(C._payload),k)}if(km(C)||om(C))return v=v.get(N)||null,u(w,v,C,k,null);ex(w,C)}return null}function y(v,w,N,C){for(var k=null,O=null,R=w,E=w=0,I=null;R!==null&&E<N.length;E++){R.index>E?(I=R,R=null):I=R.sibling;var D=p(v,R,N[E],C);if(D===null){R===null&&(R=I);break}e&&R&&D.alternate===null&&t(v,R),w=i(D,w,E),O===null?k=D:O.sibling=D,O=D,R=I}if(E===N.length)return s(v,R),Ns&&wd(v,E),k;if(R===null){for(;E<N.length;E++)R=h(v,N[E],C),R!==null&&(w=i(R,w,E),O===null?k=R:O.sibling=R,O=R);return Ns&&wd(v,E),k}for(R=n(v,R);E<N.length;E++)I=f(R,v,E,N[E],C),I!==null&&(e&&I.alternate!==null&&R.delete(I.key===null?E:I.key),w=i(I,w,E),O===null?k=I:O.sibling=I,O=I);return e&&R.forEach(function(P){return t(v,P)}),Ns&&wd(v,E),k}function g(v,w,N,C){var k=om(N);if(typeof k!="function")throw Error(ht(150));if(N=k.call(N),N==null)throw Error(ht(151));for(var O=k=null,R=w,E=w=0,I=null,D=N.next();R!==null&&!D.done;E++,D=N.next()){R.index>E?(I=R,R=null):I=R.sibling;var P=p(v,R,D.value,C);if(P===null){R===null&&(R=I);break}e&&R&&P.alternate===null&&t(v,R),w=i(P,w,E),O===null?k=P:O.sibling=P,O=P,R=I}if(D.done)return s(v,R),Ns&&wd(v,E),k;if(R===null){for(;!D.done;E++,D=N.next())D=h(v,D.value,C),D!==null&&(w=i(D,w,E),O===null?k=D:O.sibling=D,O=D);return Ns&&wd(v,E),k}for(R=n(v,R);!D.done;E++,D=N.next())D=f(R,v,E,D.value,C),D!==null&&(e&&D.alternate!==null&&R.delete(D.key===null?E:D.key),w=i(D,w,E),O===null?k=D:O.sibling=D,O=D);return e&&R.forEach(function(A){return t(v,A)}),Ns&&wd(v,E),k}function j(v,w,N,C){if(typeof N=="object"&&N!==null&&N.type===nh&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case qg:e:{for(var k=N.key,O=w;O!==null;){if(O.key===k){if(k=N.type,k===nh){if(O.tag===7){s(v,O.sibling),w=a(O,N.props.children),w.return=v,v=w;break e}}else if(O.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ql&&O_(k)===O.type){s(v,O.sibling),w=a(O,N.props),w.ref=hm(v,O,N),w.return=v,v=w;break e}s(v,O);break}else t(v,O);O=O.sibling}N.type===nh?(w=Bd(N.props.children,v.mode,C,N.key),w.return=v,v=w):(C=Ex(N.type,N.key,N.props,null,v.mode,C),C.ref=hm(v,w,N),C.return=v,v=C)}return o(v);case sh:e:{for(O=N.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){s(v,w.sibling),w=a(w,N.children||[]),w.return=v,v=w;break e}else{s(v,w);break}else t(v,w);w=w.sibling}w=bb(N,v.mode,C),w.return=v,v=w}return o(v);case Ql:return O=N._init,j(v,w,O(N._payload),C)}if(km(N))return y(v,w,N,C);if(om(N))return g(v,w,N,C);ex(v,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(s(v,w.sibling),w=a(w,N),w.return=v,v=w):(s(v,w),w=yb(N,v.mode,C),w.return=v,v=w),o(v)):s(v,w)}return j}var tf=v6(!0),y6=v6(!1),qp={},Fo=td(qp),gp=td(qp),xp=td(qp);function Pd(e){if(e===qp)throw Error(ht(174));return e}function fN(e,t){switch(gs(xp,t),gs(gp,e),gs(Fo,qp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:z2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=z2(t,e)}bs(Fo),gs(Fo,t)}function rf(){bs(Fo),bs(gp),bs(xp)}function b6(e){Pd(xp.current);var t=Pd(Fo.current),s=z2(t,e.type);t!==s&&(gs(gp,e),gs(Fo,s))}function mN(e){gp.current===e&&(bs(Fo),bs(gp))}var _s=td(0);function U0(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fb=[];function pN(){for(var e=0;e<fb.length;e++)fb[e]._workInProgressVersionPrimary=null;fb.length=0}var _x=Pl.ReactCurrentDispatcher,mb=Pl.ReactCurrentBatchConfig,Zd=0,Cs=null,ln=null,xn=null,q0=!1,Bm=!1,vp=0,CD=0;function Un(){throw Error(ht(321))}function gN(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!eo(e[s],t[s]))return!1;return!0}function xN(e,t,s,n,a,i){if(Zd=i,Cs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_x.current=e===null||e.memoizedState===null?ED:LD,e=s(n,a),Bm){i=0;do{if(Bm=!1,vp=0,25<=i)throw Error(ht(301));i+=1,xn=ln=null,t.updateQueue=null,_x.current=RD,e=s(n,a)}while(Bm)}if(_x.current=V0,t=ln!==null&&ln.next!==null,Zd=0,xn=ln=Cs=null,q0=!1,t)throw Error(ht(300));return e}function vN(){var e=vp!==0;return vp=0,e}function jo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Cs.memoizedState=xn=e:xn=xn.next=e,xn}function ki(){if(ln===null){var e=Cs.alternate;e=e!==null?e.memoizedState:null}else e=ln.next;var t=xn===null?Cs.memoizedState:xn.next;if(t!==null)xn=t,ln=e;else{if(e===null)throw Error(ht(310));ln=e,e={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},xn===null?Cs.memoizedState=xn=e:xn=xn.next=e}return xn}function yp(e,t){return typeof t=="function"?t(e):t}function pb(e){var t=ki(),s=t.queue;if(s===null)throw Error(ht(311));s.lastRenderedReducer=e;var n=ln,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Zd&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Cs.lanes|=u,Xd|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,eo(n,t.memoizedState)||(Pa=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Cs.lanes|=i,Xd|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function gb(e){var t=ki(),s=t.queue;if(s===null)throw Error(ht(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);eo(i,t.memoizedState)||(Pa=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function j6(){}function w6(e,t){var s=Cs,n=ki(),a=t(),i=!eo(n.memoizedState,a);if(i&&(n.memoizedState=a,Pa=!0),n=n.queue,yN(_6.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||xn!==null&&xn.memoizedState.tag&1){if(s.flags|=2048,bp(9,S6.bind(null,s,n,a,t),void 0,null),yn===null)throw Error(ht(349));Zd&30||N6(s,t,a)}return a}function N6(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Cs.updateQueue,t===null?(t={lastEffect:null,stores:null},Cs.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function S6(e,t,s,n){t.value=s,t.getSnapshot=n,C6(t)&&k6(e)}function _6(e,t,s){return s(function(){C6(t)&&k6(e)})}function C6(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!eo(e,s)}catch{return!0}}function k6(e){var t=jl(e,1);t!==null&&Zi(t,e,1,-1)}function M_(e){var t=jo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yp,lastRenderedState:e},t.queue=e,e=e.dispatch=PD.bind(null,Cs,e),[t.memoizedState,e]}function bp(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Cs.updateQueue,t===null?(t={lastEffect:null,stores:null},Cs.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function A6(){return ki().memoizedState}function Cx(e,t,s,n){var a=jo();Cs.flags|=e,a.memoizedState=bp(1|t,s,void 0,n===void 0?null:n)}function zv(e,t,s,n){var a=ki();n=n===void 0?null:n;var i=void 0;if(ln!==null){var o=ln.memoizedState;if(i=o.destroy,n!==null&&gN(n,o.deps)){a.memoizedState=bp(t,s,i,n);return}}Cs.flags|=e,a.memoizedState=bp(1|t,s,i,n)}function $_(e,t){return Cx(8390656,8,e,t)}function yN(e,t){return zv(2048,8,e,t)}function P6(e,t){return zv(4,2,e,t)}function E6(e,t){return zv(4,4,e,t)}function L6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function R6(e,t,s){return s=s!=null?s.concat([e]):null,zv(4,4,L6.bind(null,t,e),s)}function bN(){}function T6(e,t){var s=ki();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&gN(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function I6(e,t){var s=ki();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&gN(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function F6(e,t,s){return Zd&21?(eo(s,t)||(s=Mk(),Cs.lanes|=s,Xd|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pa=!0),e.memoizedState=s)}function kD(e,t){var s=rs;rs=s!==0&&4>s?s:4,e(!0);var n=mb.transition;mb.transition={};try{e(!1),t()}finally{rs=s,mb.transition=n}}function D6(){return ki().memoizedState}function AD(e,t,s){var n=Sc(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},O6(e))M6(t,s);else if(s=m6(e,t,s,n),s!==null){var a=fa();Zi(s,e,n,a),$6(s,t,n)}}function PD(e,t,s){var n=Sc(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(O6(e))M6(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(a.hasEagerState=!0,a.eagerState=l,eo(l,o)){var c=t.interleaved;c===null?(a.next=a,uN(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=m6(e,t,a,n),s!==null&&(a=fa(),Zi(s,e,n,a),$6(s,t,n))}}function O6(e){var t=e.alternate;return e===Cs||t!==null&&t===Cs}function M6(e,t){Bm=q0=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function $6(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Zw(e,s)}}var V0={readContext:Ci,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},ED={readContext:Ci,useCallback:function(e,t){return jo().memoizedState=[e,t===void 0?null:t],e},useContext:Ci,useEffect:$_,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Cx(4194308,4,L6.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Cx(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cx(4,2,e,t)},useMemo:function(e,t){var s=jo();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=jo();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=AD.bind(null,Cs,e),[n.memoizedState,e]},useRef:function(e){var t=jo();return e={current:e},t.memoizedState=e},useState:M_,useDebugValue:bN,useDeferredValue:function(e){return jo().memoizedState=e},useTransition:function(){var e=M_(!1),t=e[0];return e=kD.bind(null,e[1]),jo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Cs,a=jo();if(Ns){if(s===void 0)throw Error(ht(407));s=s()}else{if(s=t(),yn===null)throw Error(ht(349));Zd&30||N6(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,$_(_6.bind(null,n,i,e),[e]),n.flags|=2048,bp(9,S6.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=jo(),t=yn.identifierPrefix;if(Ns){var s=ml,n=fl;s=(n&~(1<<32-Ji(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=vp++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=CD++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},LD={readContext:Ci,useCallback:T6,useContext:Ci,useEffect:yN,useImperativeHandle:R6,useInsertionEffect:P6,useLayoutEffect:E6,useMemo:I6,useReducer:pb,useRef:A6,useState:function(){return pb(yp)},useDebugValue:bN,useDeferredValue:function(e){var t=ki();return F6(t,ln.memoizedState,e)},useTransition:function(){var e=pb(yp)[0],t=ki().memoizedState;return[e,t]},useMutableSource:j6,useSyncExternalStore:w6,useId:D6,unstable_isNewReconciler:!1},RD={readContext:Ci,useCallback:T6,useContext:Ci,useEffect:yN,useImperativeHandle:R6,useInsertionEffect:P6,useLayoutEffect:E6,useMemo:I6,useReducer:gb,useRef:A6,useState:function(){return gb(yp)},useDebugValue:bN,useDeferredValue:function(e){var t=ki();return ln===null?t.memoizedState=e:F6(t,ln.memoizedState,e)},useTransition:function(){var e=gb(yp)[0],t=ki().memoizedState;return[e,t]},useMutableSource:j6,useSyncExternalStore:w6,useId:D6,unstable_isNewReconciler:!1};function sf(e,t){try{var s="",n=t;do s+=i7(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function xb(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function dj(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var TD=typeof WeakMap=="function"?WeakMap:Map;function B6(e,t,s){s=xl(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){W0||(W0=!0,bj=n),dj(e,t)},s}function z6(e,t,s){s=xl(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){dj(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){dj(e,t),typeof n!="function"&&(Nc===null?Nc=new Set([this]):Nc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function B_(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new TD;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=GD.bind(null,e,t,s),t.then(e,e))}function z_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function U_(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=xl(-1,1),t.tag=2,wc(s,t,1))),s.lanes|=1),e)}var ID=Pl.ReactCurrentOwner,Pa=!1;function ca(e,t,s,n){t.child=e===null?y6(t,null,s,n):tf(t,e.child,s,n)}function q_(e,t,s,n,a){s=s.render;var i=t.ref;return bh(t,a),n=xN(e,t,s,n,i,a),s=vN(),e!==null&&!Pa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wl(e,t,a)):(Ns&&s&&aN(t),t.flags|=1,ca(e,t,n,a),t.child)}function V_(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!AN(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,U6(e,t,i,n,a)):(e=Ex(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:hp,s(o,n)&&e.ref===t.ref)return wl(e,t,a)}return t.flags|=1,e=_c(i,n),e.ref=t.ref,e.return=t,t.child=e}function U6(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(hp(i,n)&&e.ref===t.ref)if(Pa=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Pa=!0);else return t.lanes=e.lanes,wl(e,t,a)}return uj(e,t,s,n,a)}function q6(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},gs(mh,Ya),Ya|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,gs(mh,Ya),Ya|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,gs(mh,Ya),Ya|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,gs(mh,Ya),Ya|=n;return ca(e,t,a,s),t.child}function V6(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function uj(e,t,s,n,a){var i=La(s)?Yd:sa.current;return i=Qh(t,i),bh(t,a),s=xN(e,t,s,n,i,a),n=vN(),e!==null&&!Pa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wl(e,t,a)):(Ns&&n&&aN(t),t.flags|=1,ca(e,t,s,a),t.child)}function H_(e,t,s,n,a){if(La(s)){var i=!0;D0(t)}else i=!1;if(bh(t,a),t.stateNode===null)kx(e,t),x6(t,s,n),cj(t,s,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Ci(d):(d=La(s)?Yd:sa.current,d=Qh(t,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&D_(t,o,n,d),ec=!1;var p=t.memoizedState;o.state=p,z0(t,n,o,a),c=t.memoizedState,l!==n||p!==c||Ea.current||ec?(typeof u=="function"&&(lj(t,s,u,n),c=t.memoizedState),(l=ec||F_(t,s,l,n,p,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,p6(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Bi(t.type,l),o.props=d,h=t.pendingProps,p=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Ci(c):(c=La(s)?Yd:sa.current,c=Qh(t,c));var f=s.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&D_(t,o,n,c),ec=!1,p=t.memoizedState,o.state=p,z0(t,n,o,a);var y=t.memoizedState;l!==h||p!==y||Ea.current||ec?(typeof f=="function"&&(lj(t,s,f,n),y=t.memoizedState),(d=ec||F_(t,s,d,n,p,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return hj(e,t,s,n,i,a)}function hj(e,t,s,n,a,i){V6(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&E_(t,s,!1),wl(e,t,i);n=t.stateNode,ID.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=tf(t,e.child,null,i),t.child=tf(t,null,l,i)):ca(e,t,l,i),t.memoizedState=n.state,a&&E_(t,s,!0),t.child}function H6(e){var t=e.stateNode;t.pendingContext?P_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&P_(e,t.context,!1),fN(e,t.containerInfo)}function W_(e,t,s,n,a){return ef(),oN(a),t.flags|=256,ca(e,t,s,n),t.child}var fj={dehydrated:null,treeContext:null,retryLane:0};function mj(e){return{baseLanes:e,cachePool:null,transitions:null}}function W6(e,t,s){var n=t.pendingProps,a=_s.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),gs(_s,a&1),e===null)return ij(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vv(o,n,0,null),e=Bd(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=mj(s),t.memoizedState=fj,e):jN(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return FD(e,t,o,n,l,a,s);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=_c(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=_c(l,i):(i=Bd(i,o,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?mj(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=fj,n}return i=e.child,e=i.sibling,n=_c(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function jN(e,t){return t=Vv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tx(e,t,s,n){return n!==null&&oN(n),tf(t,e.child,null,s),e=jN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function FD(e,t,s,n,a,i,o){if(s)return t.flags&256?(t.flags&=-257,n=xb(Error(ht(422))),tx(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Vv({mode:"visible",children:n.children},a,0,null),i=Bd(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&tf(t,e.child,null,o),t.child.memoizedState=mj(o),t.memoizedState=fj,i);if(!(t.mode&1))return tx(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ht(419)),n=xb(i,n,void 0),tx(e,t,o,n)}if(l=(o&e.childLanes)!==0,Pa||l){if(n=yn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,jl(e,a),Zi(n,e,a,-1))}return kN(),n=xb(Error(ht(421))),tx(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=KD.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Qa=jc(a.nextSibling),ti=t,Ns=!0,Wi=null,e!==null&&(ji[wi++]=fl,ji[wi++]=ml,ji[wi++]=Jd,fl=e.id,ml=e.overflow,Jd=t),t=jN(t,n.children),t.flags|=4096,t)}function G_(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),oj(e.return,t,s)}function vb(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function G6(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ca(e,t,n.children,s),n=_s.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&G_(e,s,t);else if(e.tag===19)G_(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(gs(_s,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&U0(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),vb(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&U0(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}vb(t,!0,s,null,i);break;case"together":vb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wl(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Xd|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ht(153));if(t.child!==null){for(e=t.child,s=_c(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=_c(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function DD(e,t,s){switch(t.tag){case 3:H6(t),ef();break;case 5:b6(t);break;case 1:La(t.type)&&D0(t);break;case 4:fN(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;gs($0,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(gs(_s,_s.current&1),t.flags|=128,null):s&t.child.childLanes?W6(e,t,s):(gs(_s,_s.current&1),e=wl(e,t,s),e!==null?e.sibling:null);gs(_s,_s.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return G6(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),gs(_s,_s.current),n)break;return null;case 22:case 23:return t.lanes=0,q6(e,t,s)}return wl(e,t,s)}var K6,pj,Y6,J6;K6=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};pj=function(){};Y6=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Pd(Fo.current);var i=null;switch(s){case"input":a=O2(e,a),n=O2(e,n),i=[];break;case"select":a=As({},a,{value:void 0}),n=As({},n,{value:void 0}),i=[];break;case"textarea":a=B2(e,a),n=B2(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=I0)}U2(s,n);var o;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ap.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ap.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&vs("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};J6=function(e,t,s,n){s!==n&&(t.flags|=4)};function fm(e,t){if(!Ns)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function OD(e,t,s){var n=t.pendingProps;switch(iN(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(t),null;case 1:return La(t.type)&&F0(),qn(t),null;case 3:return n=t.stateNode,rf(),bs(Ea),bs(sa),pN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Qg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wi!==null&&(Nj(Wi),Wi=null))),pj(e,t),qn(t),null;case 5:mN(t);var a=Pd(xp.current);if(s=t.type,e!==null&&t.stateNode!=null)Y6(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ht(166));return qn(t),null}if(e=Pd(Fo.current),Qg(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[_o]=t,n[pp]=i,e=(t.mode&1)!==0,s){case"dialog":vs("cancel",n),vs("close",n);break;case"iframe":case"object":case"embed":vs("load",n);break;case"video":case"audio":for(a=0;a<Pm.length;a++)vs(Pm[a],n);break;case"source":vs("error",n);break;case"img":case"image":case"link":vs("error",n),vs("load",n);break;case"details":vs("toggle",n);break;case"input":r_(n,i),vs("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},vs("invalid",n);break;case"textarea":n_(n,i),vs("invalid",n)}U2(s,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Xg(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Xg(n.textContent,l,e),a=["children",""+l]):ap.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&vs("scroll",n)}switch(s){case"input":Vg(n),s_(n,i,!0);break;case"textarea":Vg(n),a_(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=I0)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nk(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[_o]=t,e[pp]=n,K6(e,t,!1,!1),t.stateNode=e;e:{switch(o=q2(s,n),s){case"dialog":vs("cancel",e),vs("close",e),a=n;break;case"iframe":case"object":case"embed":vs("load",e),a=n;break;case"video":case"audio":for(a=0;a<Pm.length;a++)vs(Pm[a],e);a=n;break;case"source":vs("error",e),a=n;break;case"img":case"image":case"link":vs("error",e),vs("load",e),a=n;break;case"details":vs("toggle",e),a=n;break;case"input":r_(e,n),a=O2(e,n),vs("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=As({},n,{value:void 0}),vs("invalid",e);break;case"textarea":n_(e,n),a=B2(e,n),vs("invalid",e);break;default:a=n}U2(s,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ck(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sk(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&ip(e,c):typeof c=="number"&&ip(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ap.hasOwnProperty(i)?c!=null&&i==="onScroll"&&vs("scroll",e):c!=null&&Hw(e,i,c,o))}switch(s){case"input":Vg(e),s_(e,n,!1);break;case"textarea":Vg(e),a_(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ic(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?gh(e,!!n.multiple,i,!1):n.defaultValue!=null&&gh(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=I0)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qn(t),null;case 6:if(e&&t.stateNode!=null)J6(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ht(166));if(s=Pd(xp.current),Pd(Fo.current),Qg(t)){if(n=t.stateNode,s=t.memoizedProps,n[_o]=t,(i=n.nodeValue!==s)&&(e=ti,e!==null))switch(e.tag){case 3:Xg(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xg(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[_o]=t,t.stateNode=n}return qn(t),null;case 13:if(bs(_s),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ns&&Qa!==null&&t.mode&1&&!(t.flags&128))f6(),ef(),t.flags|=98560,i=!1;else if(i=Qg(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ht(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ht(317));i[_o]=t}else ef(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qn(t),i=!1}else Wi!==null&&(Nj(Wi),Wi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||_s.current&1?dn===0&&(dn=3):kN())),t.updateQueue!==null&&(t.flags|=4),qn(t),null);case 4:return rf(),pj(e,t),e===null&&fp(t.stateNode.containerInfo),qn(t),null;case 10:return dN(t.type._context),qn(t),null;case 17:return La(t.type)&&F0(),qn(t),null;case 19:if(bs(_s),i=t.memoizedState,i===null)return qn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)fm(i,!1);else{if(dn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=U0(e),o!==null){for(t.flags|=128,fm(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return gs(_s,_s.current&1|2),t.child}e=e.sibling}i.tail!==null&&Us()>nf&&(t.flags|=128,n=!0,fm(i,!1),t.lanes=4194304)}else{if(!n)if(e=U0(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),fm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ns)return qn(t),null}else 2*Us()-i.renderingStartTime>nf&&s!==1073741824&&(t.flags|=128,n=!0,fm(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(s=i.last,s!==null?s.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Us(),t.sibling=null,s=_s.current,gs(_s,n?s&1|2:s&1),t):(qn(t),null);case 22:case 23:return CN(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ya&1073741824&&(qn(t),t.subtreeFlags&6&&(t.flags|=8192)):qn(t),null;case 24:return null;case 25:return null}throw Error(ht(156,t.tag))}function MD(e,t){switch(iN(t),t.tag){case 1:return La(t.type)&&F0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rf(),bs(Ea),bs(sa),pN(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mN(t),null;case 13:if(bs(_s),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ht(340));ef()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return bs(_s),null;case 4:return rf(),null;case 10:return dN(t.type._context),null;case 22:case 23:return CN(),null;case 24:return null;default:return null}}var rx=!1,Jn=!1,$D=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function fh(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ds(e,t,n)}else s.current=null}function gj(e,t,s){try{s()}catch(n){Ds(e,t,n)}}var K_=!1;function BD(e,t){if(Q2=L0,e=e6(),nN(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==s||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===e)break t;if(p===s&&++d===a&&(l=o),p===i&&++u===n&&(c=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(ej={focusedElem:e,selectionRange:s},L0=!1,Ft=t;Ft!==null;)if(t=Ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ft=e;else for(;Ft!==null;){t=Ft;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,j=y.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Bi(t.type,g),j);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ht(163))}}catch(C){Ds(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Ft=e;break}Ft=t.return}return y=K_,K_=!1,y}function zm(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&gj(t,s,i)}a=a.next}while(a!==n)}}function Uv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function xj(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Z6(e){var t=e.alternate;t!==null&&(e.alternate=null,Z6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_o],delete t[pp],delete t[sj],delete t[wD],delete t[ND])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function X6(e){return e.tag===5||e.tag===3||e.tag===4}function Y_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||X6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vj(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=I0));else if(n!==4&&(e=e.child,e!==null))for(vj(e,t,s),e=e.sibling;e!==null;)vj(e,t,s),e=e.sibling}function yj(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(yj(e,t,s),e=e.sibling;e!==null;)yj(e,t,s),e=e.sibling}var Pn=null,Hi=!1;function Wl(e,t,s){for(s=s.child;s!==null;)Q6(e,t,s),s=s.sibling}function Q6(e,t,s){if(Io&&typeof Io.onCommitFiberUnmount=="function")try{Io.onCommitFiberUnmount(Iv,s)}catch{}switch(s.tag){case 5:Jn||fh(s,t);case 6:var n=Pn,a=Hi;Pn=null,Wl(e,t,s),Pn=n,Hi=a,Pn!==null&&(Hi?(e=Pn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Pn.removeChild(s.stateNode));break;case 18:Pn!==null&&(Hi?(e=Pn,s=s.stateNode,e.nodeType===8?ub(e.parentNode,s):e.nodeType===1&&ub(e,s),dp(e)):ub(Pn,s.stateNode));break;case 4:n=Pn,a=Hi,Pn=s.stateNode.containerInfo,Hi=!0,Wl(e,t,s),Pn=n,Hi=a;break;case 0:case 11:case 14:case 15:if(!Jn&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gj(s,t,o),a=a.next}while(a!==n)}Wl(e,t,s);break;case 1:if(!Jn&&(fh(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Ds(s,t,l)}Wl(e,t,s);break;case 21:Wl(e,t,s);break;case 22:s.mode&1?(Jn=(n=Jn)||s.memoizedState!==null,Wl(e,t,s),Jn=n):Wl(e,t,s);break;default:Wl(e,t,s)}}function J_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new $D),t.forEach(function(n){var a=YD.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function Di(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pn=l.stateNode,Hi=!1;break e;case 3:Pn=l.stateNode.containerInfo,Hi=!0;break e;case 4:Pn=l.stateNode.containerInfo,Hi=!0;break e}l=l.return}if(Pn===null)throw Error(ht(160));Q6(i,o,a),Pn=null,Hi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ds(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eA(t,e),t=t.sibling}function eA(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Di(t,e),vo(e),n&4){try{zm(3,e,e.return),Uv(3,e)}catch(g){Ds(e,e.return,g)}try{zm(5,e,e.return)}catch(g){Ds(e,e.return,g)}}break;case 1:Di(t,e),vo(e),n&512&&s!==null&&fh(s,s.return);break;case 5:if(Di(t,e),vo(e),n&512&&s!==null&&fh(s,s.return),e.flags&32){var a=e.stateNode;try{ip(a,"")}catch(g){Ds(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=s!==null?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&jk(a,i),q2(l,o);var d=q2(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?Ck(a,h):u==="dangerouslySetInnerHTML"?Sk(a,h):u==="children"?ip(a,h):Hw(a,u,h,d)}switch(l){case"input":M2(a,i);break;case"textarea":wk(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?gh(a,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?gh(a,!!i.multiple,i.defaultValue,!0):gh(a,!!i.multiple,i.multiple?[]:"",!1))}a[pp]=i}catch(g){Ds(e,e.return,g)}}break;case 6:if(Di(t,e),vo(e),n&4){if(e.stateNode===null)throw Error(ht(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ds(e,e.return,g)}}break;case 3:if(Di(t,e),vo(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{dp(t.containerInfo)}catch(g){Ds(e,e.return,g)}break;case 4:Di(t,e),vo(e);break;case 13:Di(t,e),vo(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(SN=Us())),n&4&&J_(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Jn=(d=Jn)||u,Di(t,e),Jn=d):Di(t,e),vo(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ft=e,u=e.child;u!==null;){for(h=Ft=u;Ft!==null;){switch(p=Ft,f=p.child,p.tag){case 0:case 11:case 14:case 15:zm(4,p,p.return);break;case 1:fh(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,s=p.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){Ds(n,s,g)}}break;case 5:fh(p,p.return);break;case 22:if(p.memoizedState!==null){X_(h);continue}}f!==null?(f.return=p,Ft=f):X_(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=_k("display",o))}catch(g){Ds(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Ds(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Di(t,e),vo(e),n&4&&J_(e);break;case 21:break;default:Di(t,e),vo(e)}}function vo(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(X6(s)){var n=s;break e}s=s.return}throw Error(ht(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ip(a,""),n.flags&=-33);var i=Y_(e);yj(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Y_(e);vj(e,l,o);break;default:throw Error(ht(161))}}catch(c){Ds(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zD(e,t,s){Ft=e,tA(e)}function tA(e,t,s){for(var n=(e.mode&1)!==0;Ft!==null;){var a=Ft,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||rx;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Jn;l=rx;var d=Jn;if(rx=o,(Jn=c)&&!d)for(Ft=a;Ft!==null;)o=Ft,c=o.child,o.tag===22&&o.memoizedState!==null?Q_(a):c!==null?(c.return=o,Ft=c):Q_(a);for(;i!==null;)Ft=i,tA(i),i=i.sibling;Ft=a,rx=l,Jn=d}Z_(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ft=i):Z_(e)}}function Z_(e){for(;Ft!==null;){var t=Ft;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jn||Uv(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Jn)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:Bi(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&I_(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}I_(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&dp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ht(163))}Jn||t.flags&512&&xj(t)}catch(p){Ds(t,t.return,p)}}if(t===e){Ft=null;break}if(s=t.sibling,s!==null){s.return=t.return,Ft=s;break}Ft=t.return}}function X_(e){for(;Ft!==null;){var t=Ft;if(t===e){Ft=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ft=s;break}Ft=t.return}}function Q_(e){for(;Ft!==null;){var t=Ft;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Uv(4,t)}catch(c){Ds(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ds(t,a,c)}}var i=t.return;try{xj(t)}catch(c){Ds(t,i,c)}break;case 5:var o=t.return;try{xj(t)}catch(c){Ds(t,o,c)}}}catch(c){Ds(t,t.return,c)}if(t===e){Ft=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ft=l;break}Ft=t.return}}var UD=Math.ceil,H0=Pl.ReactCurrentDispatcher,wN=Pl.ReactCurrentOwner,Si=Pl.ReactCurrentBatchConfig,Dr=0,yn=null,sn=null,Tn=0,Ya=0,mh=td(0),dn=0,jp=null,Xd=0,qv=0,NN=0,Um=null,Aa=null,SN=0,nf=1/0,dl=null,W0=!1,bj=null,Nc=null,sx=!1,fc=null,G0=0,qm=0,jj=null,Ax=-1,Px=0;function fa(){return Dr&6?Us():Ax!==-1?Ax:Ax=Us()}function Sc(e){return e.mode&1?Dr&2&&Tn!==0?Tn&-Tn:_D.transition!==null?(Px===0&&(Px=Mk()),Px):(e=rs,e!==0||(e=window.event,e=e===void 0?16:Hk(e.type)),e):1}function Zi(e,t,s,n){if(50<qm)throw qm=0,jj=null,Error(ht(185));Bp(e,s,n),(!(Dr&2)||e!==yn)&&(e===yn&&(!(Dr&2)&&(qv|=s),dn===4&&sc(e,Tn)),Ra(e,n),s===1&&Dr===0&&!(t.mode&1)&&(nf=Us()+500,$v&&rd()))}function Ra(e,t){var s=e.callbackNode;_7(e,t);var n=E0(e,e===yn?Tn:0);if(n===0)s!==null&&l_(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&l_(s),t===1)e.tag===0?SD(e4.bind(null,e)):d6(e4.bind(null,e)),bD(function(){!(Dr&6)&&rd()}),s=null;else{switch($k(n)){case 1:s=Jw;break;case 4:s=Dk;break;case 16:s=P0;break;case 536870912:s=Ok;break;default:s=P0}s=cA(s,rA.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function rA(e,t){if(Ax=-1,Px=0,Dr&6)throw Error(ht(327));var s=e.callbackNode;if(jh()&&e.callbackNode!==s)return null;var n=E0(e,e===yn?Tn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=K0(e,n);else{t=n;var a=Dr;Dr|=2;var i=nA();(yn!==e||Tn!==t)&&(dl=null,nf=Us()+500,$d(e,t));do try{HD();break}catch(l){sA(e,l)}while(!0);cN(),H0.current=i,Dr=a,sn!==null?t=0:(yn=null,Tn=0,t=dn)}if(t!==0){if(t===2&&(a=K2(e),a!==0&&(n=a,t=wj(e,a))),t===1)throw s=jp,$d(e,0),sc(e,n),Ra(e,Us()),s;if(t===6)sc(e,n);else{if(a=e.current.alternate,!(n&30)&&!qD(a)&&(t=K0(e,n),t===2&&(i=K2(e),i!==0&&(n=i,t=wj(e,i))),t===1))throw s=jp,$d(e,0),sc(e,n),Ra(e,Us()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ht(345));case 2:Nd(e,Aa,dl);break;case 3:if(sc(e,n),(n&130023424)===n&&(t=SN+500-Us(),10<t)){if(E0(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){fa(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=rj(Nd.bind(null,e,Aa,dl),t);break}Nd(e,Aa,dl);break;case 4:if(sc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Ji(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Us()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*UD(n/1960))-n,10<n){e.timeoutHandle=rj(Nd.bind(null,e,Aa,dl),n);break}Nd(e,Aa,dl);break;case 5:Nd(e,Aa,dl);break;default:throw Error(ht(329))}}}return Ra(e,Us()),e.callbackNode===s?rA.bind(null,e):null}function wj(e,t){var s=Um;return e.current.memoizedState.isDehydrated&&($d(e,t).flags|=256),e=K0(e,t),e!==2&&(t=Aa,Aa=s,t!==null&&Nj(t)),e}function Nj(e){Aa===null?Aa=e:Aa.push.apply(Aa,e)}function qD(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!eo(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sc(e,t){for(t&=~NN,t&=~qv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Ji(t),n=1<<s;e[s]=-1,t&=~n}}function e4(e){if(Dr&6)throw Error(ht(327));jh();var t=E0(e,0);if(!(t&1))return Ra(e,Us()),null;var s=K0(e,t);if(e.tag!==0&&s===2){var n=K2(e);n!==0&&(t=n,s=wj(e,n))}if(s===1)throw s=jp,$d(e,0),sc(e,t),Ra(e,Us()),s;if(s===6)throw Error(ht(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nd(e,Aa,dl),Ra(e,Us()),null}function _N(e,t){var s=Dr;Dr|=1;try{return e(t)}finally{Dr=s,Dr===0&&(nf=Us()+500,$v&&rd())}}function Qd(e){fc!==null&&fc.tag===0&&!(Dr&6)&&jh();var t=Dr;Dr|=1;var s=Si.transition,n=rs;try{if(Si.transition=null,rs=1,e)return e()}finally{rs=n,Si.transition=s,Dr=t,!(Dr&6)&&rd()}}function CN(){Ya=mh.current,bs(mh)}function $d(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,yD(s)),sn!==null)for(s=sn.return;s!==null;){var n=s;switch(iN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&F0();break;case 3:rf(),bs(Ea),bs(sa),pN();break;case 5:mN(n);break;case 4:rf();break;case 13:bs(_s);break;case 19:bs(_s);break;case 10:dN(n.type._context);break;case 22:case 23:CN()}s=s.return}if(yn=e,sn=e=_c(e.current,null),Tn=Ya=t,dn=0,jp=null,NN=qv=Xd=0,Aa=Um=null,Ad!==null){for(t=0;t<Ad.length;t++)if(s=Ad[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}s.pending=n}Ad=null}return e}function sA(e,t){do{var s=sn;try{if(cN(),_x.current=V0,q0){for(var n=Cs.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}q0=!1}if(Zd=0,xn=ln=Cs=null,Bm=!1,vp=0,wN.current=null,s===null||s.return===null){dn=1,jp=t,sn=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=Tn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=z_(o);if(f!==null){f.flags&=-257,U_(f,o,l,i,t),f.mode&1&&B_(i,d,t),t=f,c=d;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){B_(i,d,t),kN();break e}c=Error(ht(426))}}else if(Ns&&l.mode&1){var j=z_(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),U_(j,o,l,i,t),oN(sf(c,l));break e}}i=c=sf(c,l),dn!==4&&(dn=2),Um===null?Um=[i]:Um.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=B6(i,c,t);T_(i,v);break e;case 1:l=c;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Nc===null||!Nc.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=z6(i,l,t);T_(i,C);break e}}i=i.return}while(i!==null)}iA(s)}catch(k){t=k,sn===s&&s!==null&&(sn=s=s.return);continue}break}while(!0)}function nA(){var e=H0.current;return H0.current=V0,e===null?V0:e}function kN(){(dn===0||dn===3||dn===2)&&(dn=4),yn===null||!(Xd&268435455)&&!(qv&268435455)||sc(yn,Tn)}function K0(e,t){var s=Dr;Dr|=2;var n=nA();(yn!==e||Tn!==t)&&(dl=null,$d(e,t));do try{VD();break}catch(a){sA(e,a)}while(!0);if(cN(),Dr=s,H0.current=n,sn!==null)throw Error(ht(261));return yn=null,Tn=0,dn}function VD(){for(;sn!==null;)aA(sn)}function HD(){for(;sn!==null&&!g7();)aA(sn)}function aA(e){var t=lA(e.alternate,e,Ya);e.memoizedProps=e.pendingProps,t===null?iA(e):sn=t,wN.current=null}function iA(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=MD(s,t),s!==null){s.flags&=32767,sn=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dn=6,sn=null;return}}else if(s=OD(s,t,Ya),s!==null){sn=s;return}if(t=t.sibling,t!==null){sn=t;return}sn=t=e}while(t!==null);dn===0&&(dn=5)}function Nd(e,t,s){var n=rs,a=Si.transition;try{Si.transition=null,rs=1,WD(e,t,s,n)}finally{Si.transition=a,rs=n}return null}function WD(e,t,s,n){do jh();while(fc!==null);if(Dr&6)throw Error(ht(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(ht(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(C7(e,i),e===yn&&(sn=yn=null,Tn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||sx||(sx=!0,cA(P0,function(){return jh(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Si.transition,Si.transition=null;var o=rs;rs=1;var l=Dr;Dr|=4,wN.current=null,BD(e,s),eA(s,e),hD(ej),L0=!!Q2,ej=Q2=null,e.current=s,zD(s),x7(),Dr=l,rs=o,Si.transition=i}else e.current=s;if(sx&&(sx=!1,fc=e,G0=a),i=e.pendingLanes,i===0&&(Nc=null),b7(s.stateNode),Ra(e,Us()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(W0)throw W0=!1,e=bj,bj=null,e;return G0&1&&e.tag!==0&&jh(),i=e.pendingLanes,i&1?e===jj?qm++:(qm=0,jj=e):qm=0,rd(),null}function jh(){if(fc!==null){var e=$k(G0),t=Si.transition,s=rs;try{if(Si.transition=null,rs=16>e?16:e,fc===null)var n=!1;else{if(e=fc,fc=null,G0=0,Dr&6)throw Error(ht(331));var a=Dr;for(Dr|=4,Ft=e.current;Ft!==null;){var i=Ft,o=i.child;if(Ft.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ft=d;Ft!==null;){var u=Ft;switch(u.tag){case 0:case 11:case 15:zm(8,u,i)}var h=u.child;if(h!==null)h.return=u,Ft=h;else for(;Ft!==null;){u=Ft;var p=u.sibling,f=u.return;if(Z6(u),u===d){Ft=null;break}if(p!==null){p.return=f,Ft=p;break}Ft=f}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var j=g.sibling;g.sibling=null,g=j}while(g!==null)}}Ft=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ft=o;else e:for(;Ft!==null;){if(i=Ft,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zm(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ft=v;break e}Ft=i.return}}var w=e.current;for(Ft=w;Ft!==null;){o=Ft;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Ft=N;else e:for(o=w;Ft!==null;){if(l=Ft,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Uv(9,l)}}catch(k){Ds(l,l.return,k)}if(l===o){Ft=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Ft=C;break e}Ft=l.return}}if(Dr=a,rd(),Io&&typeof Io.onPostCommitFiberRoot=="function")try{Io.onPostCommitFiberRoot(Iv,e)}catch{}n=!0}return n}finally{rs=s,Si.transition=t}}return!1}function t4(e,t,s){t=sf(s,t),t=B6(e,t,1),e=wc(e,t,1),t=fa(),e!==null&&(Bp(e,1,t),Ra(e,t))}function Ds(e,t,s){if(e.tag===3)t4(e,e,s);else for(;t!==null;){if(t.tag===3){t4(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Nc===null||!Nc.has(n))){e=sf(s,e),e=z6(t,e,1),t=wc(t,e,1),e=fa(),t!==null&&(Bp(t,1,e),Ra(t,e));break}}t=t.return}}function GD(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=fa(),e.pingedLanes|=e.suspendedLanes&s,yn===e&&(Tn&s)===s&&(dn===4||dn===3&&(Tn&130023424)===Tn&&500>Us()-SN?$d(e,0):NN|=s),Ra(e,t)}function oA(e,t){t===0&&(e.mode&1?(t=Gg,Gg<<=1,!(Gg&130023424)&&(Gg=4194304)):t=1);var s=fa();e=jl(e,t),e!==null&&(Bp(e,t,s),Ra(e,s))}function KD(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),oA(e,s)}function YD(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ht(314))}n!==null&&n.delete(t),oA(e,s)}var lA;lA=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ea.current)Pa=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Pa=!1,DD(e,t,s);Pa=!!(e.flags&131072)}else Pa=!1,Ns&&t.flags&1048576&&u6(t,M0,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;kx(e,t),e=t.pendingProps;var a=Qh(t,sa.current);bh(t,s),a=xN(null,t,n,e,a,s);var i=vN();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,La(n)?(i=!0,D0(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,hN(t),a.updater=Bv,t.stateNode=a,a._reactInternals=t,cj(t,n,e,s),t=hj(null,t,n,!0,i,s)):(t.tag=0,Ns&&i&&aN(t),ca(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(kx(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=ZD(n),e=Bi(n,e),a){case 0:t=uj(null,t,n,e,s);break e;case 1:t=H_(null,t,n,e,s);break e;case 11:t=q_(null,t,n,e,s);break e;case 14:t=V_(null,t,n,Bi(n.type,e),s);break e}throw Error(ht(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Bi(n,a),uj(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Bi(n,a),H_(e,t,n,a,s);case 3:e:{if(H6(t),e===null)throw Error(ht(387));n=t.pendingProps,i=t.memoizedState,a=i.element,p6(e,t),z0(t,n,null,s);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=sf(Error(ht(423)),t),t=W_(e,t,n,s,a);break e}else if(n!==a){a=sf(Error(ht(424)),t),t=W_(e,t,n,s,a);break e}else for(Qa=jc(t.stateNode.containerInfo.firstChild),ti=t,Ns=!0,Wi=null,s=y6(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ef(),n===a){t=wl(e,t,s);break e}ca(e,t,n,s)}t=t.child}return t;case 5:return b6(t),e===null&&ij(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,tj(n,a)?o=null:i!==null&&tj(n,i)&&(t.flags|=32),V6(e,t),ca(e,t,o,s),t.child;case 6:return e===null&&ij(t),null;case 13:return W6(e,t,s);case 4:return fN(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=tf(t,null,n,s):ca(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Bi(n,a),q_(e,t,n,a,s);case 7:return ca(e,t,t.pendingProps,s),t.child;case 8:return ca(e,t,t.pendingProps.children,s),t.child;case 12:return ca(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,gs($0,n._currentValue),n._currentValue=o,i!==null)if(eo(i.value,o)){if(i.children===a.children&&!Ea.current){t=wl(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=xl(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),oj(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ht(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),oj(o,s,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ca(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,bh(t,s),a=Ci(a),n=n(a),t.flags|=1,ca(e,t,n,s),t.child;case 14:return n=t.type,a=Bi(n,t.pendingProps),a=Bi(n.type,a),V_(e,t,n,a,s);case 15:return U6(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Bi(n,a),kx(e,t),t.tag=1,La(n)?(e=!0,D0(t)):e=!1,bh(t,s),x6(t,n,a),cj(t,n,a,s),hj(null,t,n,!0,e,s);case 19:return G6(e,t,s);case 22:return q6(e,t,s)}throw Error(ht(156,t.tag))};function cA(e,t){return Fk(e,t)}function JD(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ni(e,t,s,n){return new JD(e,t,s,n)}function AN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ZD(e){if(typeof e=="function")return AN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gw)return 11;if(e===Kw)return 14}return 2}function _c(e,t){var s=e.alternate;return s===null?(s=Ni(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Ex(e,t,s,n,a,i){var o=2;if(n=e,typeof e=="function")AN(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case nh:return Bd(s.children,a,i,t);case Ww:o=8,a|=8;break;case T2:return e=Ni(12,s,t,a|2),e.elementType=T2,e.lanes=i,e;case I2:return e=Ni(13,s,t,a),e.elementType=I2,e.lanes=i,e;case F2:return e=Ni(19,s,t,a),e.elementType=F2,e.lanes=i,e;case vk:return Vv(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gk:o=10;break e;case xk:o=9;break e;case Gw:o=11;break e;case Kw:o=14;break e;case Ql:o=16,n=null;break e}throw Error(ht(130,e==null?e:typeof e,""))}return t=Ni(o,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Bd(e,t,s,n){return e=Ni(7,e,n,t),e.lanes=s,e}function Vv(e,t,s,n){return e=Ni(22,e,n,t),e.elementType=vk,e.lanes=s,e.stateNode={isHidden:!1},e}function yb(e,t,s){return e=Ni(6,e,null,t),e.lanes=s,e}function bb(e,t,s){return t=Ni(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function XD(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eb(0),this.expirationTimes=eb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eb(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function PN(e,t,s,n,a,i,o,l,c){return e=new XD(e,t,s,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ni(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},hN(i),e}function QD(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function dA(e){if(!e)return Fc;e=e._reactInternals;e:{if(hu(e)!==e||e.tag!==1)throw Error(ht(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(La(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ht(171))}if(e.tag===1){var s=e.type;if(La(s))return c6(e,s,t)}return t}function uA(e,t,s,n,a,i,o,l,c){return e=PN(s,n,!0,e,a,i,o,l,c),e.context=dA(null),s=e.current,n=fa(),a=Sc(s),i=xl(n,a),i.callback=t??null,wc(s,i,a),e.current.lanes=a,Bp(e,a,n),Ra(e,n),e}function Hv(e,t,s,n){var a=t.current,i=fa(),o=Sc(a);return s=dA(s),t.context===null?t.context=s:t.pendingContext=s,t=xl(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=wc(a,t,o),e!==null&&(Zi(e,a,o,i),Sx(e,a,o)),o}function Y0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function r4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function EN(e,t){r4(e,t),(e=e.alternate)&&r4(e,t)}function eO(){return null}var hA=typeof reportError=="function"?reportError:function(e){console.error(e)};function LN(e){this._internalRoot=e}Wv.prototype.render=LN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ht(409));Hv(e,t,null,null)};Wv.prototype.unmount=LN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qd(function(){Hv(null,e,null,null)}),t[bl]=null}};function Wv(e){this._internalRoot=e}Wv.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uk();e={blockedOn:null,target:e,priority:t};for(var s=0;s<rc.length&&t!==0&&t<rc[s].priority;s++);rc.splice(s,0,e),s===0&&Vk(e)}};function RN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function s4(){}function tO(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Y0(o);i.call(d)}}var o=uA(t,n,e,0,null,!1,!1,"",s4);return e._reactRootContainer=o,e[bl]=o.current,fp(e.nodeType===8?e.parentNode:e),Qd(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Y0(c);l.call(d)}}var c=PN(e,0,!1,null,null,!1,!1,"",s4);return e._reactRootContainer=c,e[bl]=c.current,fp(e.nodeType===8?e.parentNode:e),Qd(function(){Hv(t,c,s,n)}),c}function Kv(e,t,s,n,a){var i=s._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Y0(o);l.call(c)}}Hv(t,o,e,a)}else o=tO(s,t,e,a,n);return Y0(o)}Bk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Am(t.pendingLanes);s!==0&&(Zw(t,s|1),Ra(t,Us()),!(Dr&6)&&(nf=Us()+500,rd()))}break;case 13:Qd(function(){var n=jl(e,1);if(n!==null){var a=fa();Zi(n,e,1,a)}}),EN(e,1)}};Xw=function(e){if(e.tag===13){var t=jl(e,134217728);if(t!==null){var s=fa();Zi(t,e,134217728,s)}EN(e,134217728)}};zk=function(e){if(e.tag===13){var t=Sc(e),s=jl(e,t);if(s!==null){var n=fa();Zi(s,e,t,n)}EN(e,t)}};Uk=function(){return rs};qk=function(e,t){var s=rs;try{return rs=e,t()}finally{rs=s}};H2=function(e,t,s){switch(t){case"input":if(M2(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=Mv(n);if(!a)throw Error(ht(90));bk(n),M2(n,a)}}}break;case"textarea":wk(e,s);break;case"select":t=s.value,t!=null&&gh(e,!!s.multiple,t,!1)}};Pk=_N;Ek=Qd;var rO={usingClientEntryPoint:!1,Events:[Up,lh,Mv,kk,Ak,_N]},mm={findFiberByHostInstance:kd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},sO={bundleType:mm.bundleType,version:mm.version,rendererPackageName:mm.rendererPackageName,rendererConfig:mm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Tk(e),e===null?null:e.stateNode},findFiberByHostInstance:mm.findFiberByHostInstance||eO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nx.isDisabled&&nx.supportsFiber)try{Iv=nx.inject(sO),Io=nx}catch{}}li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rO;li.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RN(t))throw Error(ht(200));return QD(e,t,null,s)};li.createRoot=function(e,t){if(!RN(e))throw Error(ht(299));var s=!1,n="",a=hA;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=PN(e,1,!1,null,null,s,!1,n,a),e[bl]=t.current,fp(e.nodeType===8?e.parentNode:e),new LN(t)};li.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ht(188)):(e=Object.keys(e).join(","),Error(ht(268,e)));return e=Tk(t),e=e===null?null:e.stateNode,e};li.flushSync=function(e){return Qd(e)};li.hydrate=function(e,t,s){if(!Gv(t))throw Error(ht(200));return Kv(null,e,t,!0,s)};li.hydrateRoot=function(e,t,s){if(!RN(e))throw Error(ht(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",o=hA;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=uA(t,null,e,1,s??null,a,!1,i,o),e[bl]=t.current,fp(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new Wv(t)};li.render=function(e,t,s){if(!Gv(t))throw Error(ht(200));return Kv(null,e,t,!1,s)};li.unmountComponentAtNode=function(e){if(!Gv(e))throw Error(ht(40));return e._reactRootContainer?(Qd(function(){Kv(null,null,e,!1,function(){e._reactRootContainer=null,e[bl]=null})}),!0):!1};li.unstable_batchedUpdates=_N;li.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Gv(s))throw Error(ht(200));if(e==null||e._reactInternals===void 0)throw Error(ht(38));return Kv(e,t,s,!1,n)};li.version="18.2.0-next-9e3b772b8-20220608";function fA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fA)}catch(e){console.error(e)}}fA(),uk.exports=li;var sd=uk.exports;const nO=ek(sd);var mA,n4=sd;mA=n4.createRoot,n4.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},wp.apply(this,arguments)}var mc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(mc||(mc={}));const a4="popstate";function aO(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Sj("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:J0(a)}return oO(t,s,null,e)}function Gs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pA(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function iO(){return Math.random().toString(36).substr(2,8)}function i4(e,t){return{usr:e.state,key:e.key,idx:t}}function Sj(e,t,s,n){return s===void 0&&(s=null),wp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jf(t):t,{state:s,key:t&&t.key||n||iO()})}function J0(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jf(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function oO(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=mc.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(wp({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=mc.Pop;let j=u(),v=j==null?null:j-d;d=j,c&&c({action:l,location:g.location,delta:v})}function p(j,v){l=mc.Push;let w=Sj(g.location,j,v);d=u()+1;let N=i4(w,d),C=g.createHref(w);try{o.pushState(N,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(C)}i&&c&&c({action:l,location:g.location,delta:1})}function f(j,v){l=mc.Replace;let w=Sj(g.location,j,v);d=u();let N=i4(w,d),C=g.createHref(w);o.replaceState(N,"",C),i&&c&&c({action:l,location:g.location,delta:0})}function y(j){let v=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof j=="string"?j:J0(j);return w=w.replace(/ $/,"%20"),Gs(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let g={get action(){return l},get location(){return e(a,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(a4,h),c=j,()=>{a.removeEventListener(a4,h),c=null}},createHref(j){return t(a,j)},createURL:y,encodeLocation(j){let v=y(j);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:f,go(j){return o.go(j)}};return g}var o4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(o4||(o4={}));function lO(e,t,s){return s===void 0&&(s="/"),cO(e,t,s)}function cO(e,t,s,n){let a=typeof t=="string"?jf(t):t,i=TN(a.pathname||"/",s);if(i==null)return null;let o=gA(e);dO(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=wO(i);l=yO(o[c],d)}return l}function gA(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Gs(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Cc([n,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(Gs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),gA(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:xO(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of xA(i.path))a(i,o,c)}),t}function xA(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=xA(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function dO(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:vO(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const uO=/^:[\w-]+$/,hO=3,fO=2,mO=1,pO=10,gO=-2,l4=e=>e==="*";function xO(e,t){let s=e.split("/"),n=s.length;return s.some(l4)&&(n+=gO),t&&(n+=fO),s.filter(a=>!l4(a)).reduce((a,i)=>a+(uO.test(i)?hO:i===""?mO:pO),n)}function vO(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function yO(e,t,s){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=bO({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:Cc([i,h.pathname]),pathnameBase:CO(Cc([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Cc([i,h.pathnameBase]))}return o}function bO(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=jO(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:p,isOptional:f}=u;if(p==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=l[h];return f&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function jO(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),pA(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function wO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function TN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function NO(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?jf(e):e;return{pathname:s?s.startsWith("/")?s:SO(s,t):t,search:kO(n),hash:AO(a)}}function SO(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function jb(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _O(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function IN(e,t){let s=_O(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function FN(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=jf(e):(a=wp({},e),Gs(!a.pathname||!a.pathname.includes("?"),jb("?","pathname","search",a)),Gs(!a.pathname||!a.pathname.includes("#"),jb("#","pathname","hash",a)),Gs(!a.search||!a.search.includes("#"),jb("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=s;else{let h=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;a.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=NO(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Cc=e=>e.join("/").replace(/\/\/+/g,"/"),CO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,AO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function PO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vA=["post","put","patch","delete"];new Set(vA);const EO=["get",...vA];new Set(EO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Np.apply(this,arguments)}const DN=x.createContext(null),LO=x.createContext(null),nd=x.createContext(null),Yv=x.createContext(null),qo=x.createContext({outlet:null,matches:[],isDataRoute:!1}),yA=x.createContext(null);function RO(e,t){let{relative:s}=t===void 0?{}:t;wf()||Gs(!1);let{basename:n,navigator:a}=x.useContext(nd),{hash:i,pathname:o,search:l}=jA(e,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:Cc([n,o])),a.createHref({pathname:c,search:l,hash:i})}function wf(){return x.useContext(Yv)!=null}function io(){return wf()||Gs(!1),x.useContext(Yv).location}function bA(e){x.useContext(nd).static||x.useLayoutEffect(e)}function Ai(){let{isDataRoute:e}=x.useContext(qo);return e?KO():TO()}function TO(){wf()||Gs(!1);let e=x.useContext(DN),{basename:t,future:s,navigator:n}=x.useContext(nd),{matches:a}=x.useContext(qo),{pathname:i}=io(),o=JSON.stringify(IN(a,s.v7_relativeSplatPath)),l=x.useRef(!1);return bA(()=>{l.current=!0}),x.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=FN(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Cc([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,o,i,e])}const IO=x.createContext(null);function FO(e){let t=x.useContext(qo).outlet;return t&&x.createElement(IO.Provider,{value:e},t)}function DO(){let{matches:e}=x.useContext(qo),t=e[e.length-1];return t?t.params:{}}function jA(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=x.useContext(nd),{matches:a}=x.useContext(qo),{pathname:i}=io(),o=JSON.stringify(IN(a,n.v7_relativeSplatPath));return x.useMemo(()=>FN(e,JSON.parse(o),i,s==="path"),[e,o,i,s])}function OO(e,t){return MO(e,t)}function MO(e,t,s,n){wf()||Gs(!1);let{navigator:a}=x.useContext(nd),{matches:i}=x.useContext(qo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=io(),u;if(t){var h;let j=typeof t=="string"?jf(t):t;c==="/"||(h=j.pathname)!=null&&h.startsWith(c)||Gs(!1),u=j}else u=d;let p=u.pathname||"/",f=p;if(c!=="/"){let j=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(j.length).join("/")}let y=lO(e,{pathname:f}),g=qO(y&&y.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:Cc([c,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:Cc([c,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,s,n);return t&&g?x.createElement(Yv.Provider,{value:{location:Np({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:mc.Pop}},g):g}function $O(){let e=GO(),t=PO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),s?x.createElement("pre",{style:a},s):null,null)}const BO=x.createElement($O,null);class zO extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?x.createElement(qo.Provider,{value:this.props.routeContext},x.createElement(yA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UO(e){let{routeContext:t,match:s,children:n}=e,a=x.useContext(DN);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),x.createElement(qo.Provider,{value:t},n)}function qO(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(a=s)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Gs(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:p,errors:f}=s,y=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||y){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,p)=>{let f,y=!1,g=null,j=null;s&&(f=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||BO,c&&(d<0&&p===0?(YO("route-fallback"),y=!0,j=null):d===p&&(y=!0,j=h.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,p+1)),w=()=>{let N;return f?N=g:y?N=j:h.route.Component?N=x.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=u,x.createElement(UO,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:s!=null},children:N})};return s&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?x.createElement(zO,{location:s.location,revalidation:s.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var wA=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wA||{}),NA=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(NA||{});function VO(e){let t=x.useContext(DN);return t||Gs(!1),t}function HO(e){let t=x.useContext(LO);return t||Gs(!1),t}function WO(e){let t=x.useContext(qo);return t||Gs(!1),t}function SA(e){let t=WO(),s=t.matches[t.matches.length-1];return s.route.id||Gs(!1),s.route.id}function GO(){var e;let t=x.useContext(yA),s=HO(),n=SA();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function KO(){let{router:e}=VO(wA.UseNavigateStable),t=SA(NA.UseNavigateStable),s=x.useRef(!1);return bA(()=>{s.current=!0}),x.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Np({fromRouteId:t},i)))},[e,t])}const c4={};function YO(e,t,s){c4[e]||(c4[e]=!0)}function JO(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function d4(e){let{to:t,replace:s,state:n,relative:a}=e;wf()||Gs(!1);let{future:i,static:o}=x.useContext(nd),{matches:l}=x.useContext(qo),{pathname:c}=io(),d=Ai(),u=FN(t,IN(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(u);return x.useEffect(()=>d(JSON.parse(h),{replace:s,state:n,relative:a}),[d,h,a,s,n]),null}function _A(e){return FO(e.context)}function Rr(e){Gs(!1)}function ZO(e){let{basename:t="/",children:s=null,location:n,navigationType:a=mc.Pop,navigator:i,static:o=!1,future:l}=e;wf()&&Gs(!1);let c=t.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:i,static:o,future:Np({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=jf(n));let{pathname:u="/",search:h="",hash:p="",state:f=null,key:y="default"}=n,g=x.useMemo(()=>{let j=TN(u,c);return j==null?null:{location:{pathname:j,search:h,hash:p,state:f,key:y},navigationType:a}},[c,u,h,p,f,y,a]);return g==null?null:x.createElement(nd.Provider,{value:d},x.createElement(Yv.Provider,{children:s,value:g}))}function XO(e){let{children:t,location:s}=e;return OO(_j(t),s)}new Promise(()=>{});function _j(e,t){t===void 0&&(t=[]);let s=[];return x.Children.forEach(e,(n,a)=>{if(!x.isValidElement(n))return;let i=[...t,a];if(n.type===x.Fragment){s.push.apply(s,_j(n.props.children,i));return}n.type!==Rr&&Gs(!1),!n.props.index||!n.props.children||Gs(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=_j(n.props.children,i)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cj(){return Cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Cj.apply(this,arguments)}function QO(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function eM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function tM(e,t){return e.button===0&&(!t||t==="_self")&&!eM(e)}const rM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sM="6";try{window.__reactRouterVersion=sM}catch{}const nM="startTransition",u4=Uw[nM];function aM(e){let{basename:t,children:s,future:n,window:a}=e,i=x.useRef();i.current==null&&(i.current=aO({window:a,v5Compat:!0}));let o=i.current,[l,c]=x.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=x.useCallback(h=>{d&&u4?u4(()=>c(h)):c(h)},[c,d]);return x.useLayoutEffect(()=>o.listen(u),[o,u]),x.useEffect(()=>JO(n),[n]),x.createElement(ZO,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const iM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zd=x.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,p=QO(t,rM),{basename:f}=x.useContext(nd),y,g=!1;if(typeof d=="string"&&oM.test(d)&&(y=d,iM))try{let N=new URL(window.location.href),C=d.startsWith("//")?new URL(N.protocol+d):new URL(d),k=TN(C.pathname,f);C.origin===N.origin&&k!=null?d=k+C.search+C.hash:g=!0}catch{}let j=RO(d,{relative:a}),v=lM(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});function w(N){n&&n(N),N.defaultPrevented||v(N)}return x.createElement("a",Cj({},p,{href:y||j,onClick:g||i?n:w,ref:s,target:c}))});var h4;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(h4||(h4={}));var f4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(f4||(f4={}));function lM(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ai(),d=io(),u=jA(e,{relative:o});return x.useCallback(h=>{if(tM(h,s)){h.preventDefault();let p=n!==void 0?n:J0(d)===J0(u);c(e,{replace:p,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,s,e,i,o,l])}var CA={exports:{}},kA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af=x;function cM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dM=typeof Object.is=="function"?Object.is:cM,uM=af.useState,hM=af.useEffect,fM=af.useLayoutEffect,mM=af.useDebugValue;function pM(e,t){var s=t(),n=uM({inst:{value:s,getSnapshot:t}}),a=n[0].inst,i=n[1];return fM(function(){a.value=s,a.getSnapshot=t,wb(a)&&i({inst:a})},[e,s,t]),hM(function(){return wb(a)&&i({inst:a}),e(function(){wb(a)&&i({inst:a})})},[e]),mM(s),s}function wb(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!dM(e,s)}catch{return!0}}function gM(e,t){return t()}var xM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gM:pM;kA.useSyncExternalStore=af.useSyncExternalStore!==void 0?af.useSyncExternalStore:xM;CA.exports=kA;var vM=CA.exports,AA={exports:{}},PA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv=x,yM=vM;function bM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jM=typeof Object.is=="function"?Object.is:bM,wM=yM.useSyncExternalStore,NM=Jv.useRef,SM=Jv.useEffect,_M=Jv.useMemo,CM=Jv.useDebugValue;PA.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var i=NM(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=_M(function(){function c(f){if(!d){if(d=!0,u=f,f=n(f),a!==void 0&&o.hasValue){var y=o.value;if(a(y,f))return h=y}return h=f}if(y=h,jM(u,f))return y;var g=n(f);return a!==void 0&&a(y,g)?(u=f,y):(u=f,h=g)}var d=!1,u,h,p=s===void 0?null:s;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,s,n,a]);var l=wM(e,i[0],i[1]);return SM(function(){o.hasValue=!0,o.value=l},[l]),CM(l),l};AA.exports=PA;var kM=AA.exports;function AM(e){e()}let EA=AM;const PM=e=>EA=e,EM=()=>EA,m4=Symbol.for("react-redux-context"),p4=typeof globalThis<"u"?globalThis:{};function LM(){var e;if(!x.createContext)return{};const t=(e=p4[m4])!=null?e:p4[m4]=new Map;let s=t.get(x.createContext);return s||(s=x.createContext(null),t.set(x.createContext,s)),s}const Dc=LM();function ON(e=Dc){return function(){return x.useContext(e)}}const LA=ON(),RM=()=>{throw new Error("uSES not initialized!")};let RA=RM;const TM=e=>{RA=e},IM=(e,t)=>e===t;function FM(e=Dc){const t=e===Dc?LA:ON(e);return function(n,a={}){const{equalityFn:i=IM,stabilityCheck:o=void 0,noopCheck:l=void 0}=typeof a=="function"?{equalityFn:a}:a,{store:c,subscription:d,getServerState:u,stabilityCheck:h,noopCheck:p}=t();x.useRef(!0);const f=x.useCallback({[n.name](g){return n(g)}}[n.name],[n,h,o]),y=RA(d.addNestedSub,c.getState,u||c.getState,f,i);return x.useDebugValue(y),y}}const ma=FM();var TA={exports:{}},ss={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nn=typeof Symbol=="function"&&Symbol.for,MN=Nn?Symbol.for("react.element"):60103,$N=Nn?Symbol.for("react.portal"):60106,Zv=Nn?Symbol.for("react.fragment"):60107,Xv=Nn?Symbol.for("react.strict_mode"):60108,Qv=Nn?Symbol.for("react.profiler"):60114,ey=Nn?Symbol.for("react.provider"):60109,ty=Nn?Symbol.for("react.context"):60110,BN=Nn?Symbol.for("react.async_mode"):60111,ry=Nn?Symbol.for("react.concurrent_mode"):60111,sy=Nn?Symbol.for("react.forward_ref"):60112,ny=Nn?Symbol.for("react.suspense"):60113,DM=Nn?Symbol.for("react.suspense_list"):60120,ay=Nn?Symbol.for("react.memo"):60115,iy=Nn?Symbol.for("react.lazy"):60116,OM=Nn?Symbol.for("react.block"):60121,MM=Nn?Symbol.for("react.fundamental"):60117,$M=Nn?Symbol.for("react.responder"):60118,BM=Nn?Symbol.for("react.scope"):60119;function di(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case MN:switch(e=e.type,e){case BN:case ry:case Zv:case Qv:case Xv:case ny:return e;default:switch(e=e&&e.$$typeof,e){case ty:case sy:case iy:case ay:case ey:return e;default:return t}}case $N:return t}}}function IA(e){return di(e)===ry}ss.AsyncMode=BN;ss.ConcurrentMode=ry;ss.ContextConsumer=ty;ss.ContextProvider=ey;ss.Element=MN;ss.ForwardRef=sy;ss.Fragment=Zv;ss.Lazy=iy;ss.Memo=ay;ss.Portal=$N;ss.Profiler=Qv;ss.StrictMode=Xv;ss.Suspense=ny;ss.isAsyncMode=function(e){return IA(e)||di(e)===BN};ss.isConcurrentMode=IA;ss.isContextConsumer=function(e){return di(e)===ty};ss.isContextProvider=function(e){return di(e)===ey};ss.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===MN};ss.isForwardRef=function(e){return di(e)===sy};ss.isFragment=function(e){return di(e)===Zv};ss.isLazy=function(e){return di(e)===iy};ss.isMemo=function(e){return di(e)===ay};ss.isPortal=function(e){return di(e)===$N};ss.isProfiler=function(e){return di(e)===Qv};ss.isStrictMode=function(e){return di(e)===Xv};ss.isSuspense=function(e){return di(e)===ny};ss.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Zv||e===ry||e===Qv||e===Xv||e===ny||e===DM||typeof e=="object"&&e!==null&&(e.$$typeof===iy||e.$$typeof===ay||e.$$typeof===ey||e.$$typeof===ty||e.$$typeof===sy||e.$$typeof===MM||e.$$typeof===$M||e.$$typeof===BM||e.$$typeof===OM)};ss.typeOf=di;TA.exports=ss;var zM=TA.exports,FA=zM,UM={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qM={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},DA={};DA[FA.ForwardRef]=UM;DA[FA.Memo]=qM;var cs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zN=Symbol.for("react.element"),UN=Symbol.for("react.portal"),oy=Symbol.for("react.fragment"),ly=Symbol.for("react.strict_mode"),cy=Symbol.for("react.profiler"),dy=Symbol.for("react.provider"),uy=Symbol.for("react.context"),VM=Symbol.for("react.server_context"),hy=Symbol.for("react.forward_ref"),fy=Symbol.for("react.suspense"),my=Symbol.for("react.suspense_list"),py=Symbol.for("react.memo"),gy=Symbol.for("react.lazy"),HM=Symbol.for("react.offscreen"),OA;OA=Symbol.for("react.module.reference");function Pi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zN:switch(e=e.type,e){case oy:case cy:case ly:case fy:case my:return e;default:switch(e=e&&e.$$typeof,e){case VM:case uy:case hy:case gy:case py:case dy:return e;default:return t}}case UN:return t}}}cs.ContextConsumer=uy;cs.ContextProvider=dy;cs.Element=zN;cs.ForwardRef=hy;cs.Fragment=oy;cs.Lazy=gy;cs.Memo=py;cs.Portal=UN;cs.Profiler=cy;cs.StrictMode=ly;cs.Suspense=fy;cs.SuspenseList=my;cs.isAsyncMode=function(){return!1};cs.isConcurrentMode=function(){return!1};cs.isContextConsumer=function(e){return Pi(e)===uy};cs.isContextProvider=function(e){return Pi(e)===dy};cs.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zN};cs.isForwardRef=function(e){return Pi(e)===hy};cs.isFragment=function(e){return Pi(e)===oy};cs.isLazy=function(e){return Pi(e)===gy};cs.isMemo=function(e){return Pi(e)===py};cs.isPortal=function(e){return Pi(e)===UN};cs.isProfiler=function(e){return Pi(e)===cy};cs.isStrictMode=function(e){return Pi(e)===ly};cs.isSuspense=function(e){return Pi(e)===fy};cs.isSuspenseList=function(e){return Pi(e)===my};cs.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===oy||e===cy||e===ly||e===fy||e===my||e===HM||typeof e=="object"&&e!==null&&(e.$$typeof===gy||e.$$typeof===py||e.$$typeof===dy||e.$$typeof===uy||e.$$typeof===hy||e.$$typeof===OA||e.getModuleId!==void 0)};cs.typeOf=Pi;function WM(){const e=EM();let t=null,s=null;return{clear(){t=null,s=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,i=s={callback:n,next:null,prev:s};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:s=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const g4={notify(){},get:()=>[]};function GM(e,t){let s,n=g4,a=0,i=!1;function o(g){u();const j=n.subscribe(g);let v=!1;return()=>{v||(v=!0,j(),h())}}function l(){n.notify()}function c(){y.onStateChange&&y.onStateChange()}function d(){return i}function u(){a++,s||(s=e.subscribe(c),n=WM())}function h(){a--,s&&a===0&&(s(),s=void 0,n.clear(),n=g4)}function p(){i||(i=!0,u())}function f(){i&&(i=!1,h())}const y={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:f,getListeners:()=>n};return y}const KM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YM=KM?x.useLayoutEffect:x.useEffect;function JM({store:e,context:t,children:s,serverState:n,stabilityCheck:a="once",noopCheck:i="once"}){const o=x.useMemo(()=>{const d=GM(e);return{store:e,subscription:d,getServerState:n?()=>n:void 0,stabilityCheck:a,noopCheck:i}},[e,n,a,i]),l=x.useMemo(()=>e.getState(),[e]);YM(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==e.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,l]);const c=t||Dc;return x.createElement(c.Provider,{value:o},s)}function MA(e=Dc){const t=e===Dc?LA:ON(e);return function(){const{store:n}=t();return n}}const ZM=MA();function XM(e=Dc){const t=e===Dc?ZM:MA(e);return function(){return t().dispatch}}const ad=XM();TM(kM.useSyncExternalStoreWithSelector);PM(sd.unstable_batchedUpdates);function Gi(e){for(var t=arguments.length,s=Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(s.length?" "+s.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Oc(e){return!!e&&!!e[ws]}function Nl(e){var t;return!!e&&(function(s){if(!s||typeof s!="object")return!1;var n=Object.getPrototypeOf(s);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===o9}(e)||Array.isArray(e)||!!e[N4]||!!(!((t=e.constructor)===null||t===void 0)&&t[N4])||qN(e)||VN(e))}function eu(e,t,s){s===void 0&&(s=!1),Nf(e)===0?(s?Object.keys:Nh)(e).forEach(function(n){s&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function Nf(e){var t=e[ws];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:qN(e)?2:VN(e)?3:0}function wh(e,t){return Nf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function QM(e,t){return Nf(e)===2?e.get(t):e[t]}function $A(e,t,s){var n=Nf(e);n===2?e.set(t,s):n===3?e.add(s):e[t]=s}function BA(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function qN(e){return a9&&e instanceof Map}function VN(e){return i9&&e instanceof Set}function Sd(e){return e.o||e.t}function HN(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=UA(e);delete t[ws];for(var s=Nh(t),n=0;n<s.length;n++){var a=s[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function WN(e,t){return t===void 0&&(t=!1),GN(e)||Oc(e)||!Nl(e)||(Nf(e)>1&&(e.set=e.add=e.clear=e.delete=e9),Object.freeze(e),t&&eu(e,function(s,n){return WN(n,!0)},!0)),e}function e9(){Gi(2)}function GN(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Do(e){var t=Ej[e];return t||Gi(18,e),t}function t9(e,t){Ej[e]||(Ej[e]=t)}function kj(){return Sp}function Nb(e,t){t&&(Do("Patches"),e.u=[],e.s=[],e.v=t)}function Z0(e){Aj(e),e.p.forEach(r9),e.p=null}function Aj(e){e===Sp&&(Sp=e.l)}function x4(e){return Sp={p:[],l:Sp,h:e,m:!0,_:0}}function r9(e){var t=e[ws];t.i===0||t.i===1?t.j():t.g=!0}function Sb(e,t){t._=t.p.length;var s=t.p[0],n=e!==void 0&&e!==s;return t.h.O||Do("ES5").S(t,e,n),n?(s[ws].P&&(Z0(t),Gi(4)),Nl(e)&&(e=X0(t,e),t.l||Q0(t,e)),t.u&&Do("Patches").M(s[ws].t,e,t.u,t.s)):e=X0(t,s,[]),Z0(t),t.u&&t.v(t.u,t.s),e!==zA?e:void 0}function X0(e,t,s){if(GN(t))return t;var n=t[ws];if(!n)return eu(t,function(l,c){return v4(e,n,t,l,c,s)},!0),t;if(n.A!==e)return t;if(!n.P)return Q0(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=HN(n.k):n.o,i=a,o=!1;n.i===3&&(i=new Set(a),a.clear(),o=!0),eu(i,function(l,c){return v4(e,n,a,l,c,s,o)}),Q0(e,a,!1),s&&e.u&&Do("Patches").N(n,s,e.u,e.s)}return n.o}function v4(e,t,s,n,a,i,o){if(Oc(a)){var l=X0(e,a,i&&t&&t.i!==3&&!wh(t.R,n)?i.concat(n):void 0);if($A(s,n,l),!Oc(l))return;e.m=!1}else o&&s.add(a);if(Nl(a)&&!GN(a)){if(!e.h.D&&e._<1)return;X0(e,a),t&&t.A.l||Q0(e,a)}}function Q0(e,t,s){s===void 0&&(s=!1),!e.l&&e.h.D&&e.m&&WN(t,s)}function _b(e,t){var s=e[ws];return(s?Sd(s):e)[t]}function y4(e,t){if(t in e)for(var s=Object.getPrototypeOf(e);s;){var n=Object.getOwnPropertyDescriptor(s,t);if(n)return n;s=Object.getPrototypeOf(s)}}function nc(e){e.P||(e.P=!0,e.l&&nc(e.l))}function Cb(e){e.o||(e.o=HN(e.t))}function Pj(e,t,s){var n=qN(t)?Do("MapSet").F(t,s):VN(t)?Do("MapSet").T(t,s):e.O?function(a,i){var o=Array.isArray(a),l={i:o?1:0,A:i?i.A:kj(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},c=l,d=_p;o&&(c=[l],d=Em);var u=Proxy.revocable(c,d),h=u.revoke,p=u.proxy;return l.k=p,l.j=h,p}(t,s):Do("ES5").J(t,s);return(s?s.A:kj()).p.push(n),n}function s9(e){return Oc(e)||Gi(22,e),function t(s){if(!Nl(s))return s;var n,a=s[ws],i=Nf(s);if(a){if(!a.P&&(a.i<4||!Do("ES5").K(a)))return a.t;a.I=!0,n=b4(s,i),a.I=!1}else n=b4(s,i);return eu(n,function(o,l){a&&QM(a.t,o)===l||$A(n,o,t(l))}),i===3?new Set(n):n}(e)}function b4(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return HN(e)}function n9(){function e(i,o){var l=a[i];return l?l.enumerable=o:a[i]=l={configurable:!0,enumerable:o,get:function(){var c=this[ws];return _p.get(c,i)},set:function(c){var d=this[ws];_p.set(d,i,c)}},l}function t(i){for(var o=i.length-1;o>=0;o--){var l=i[o][ws];if(!l.P)switch(l.i){case 5:n(l)&&nc(l);break;case 4:s(l)&&nc(l)}}}function s(i){for(var o=i.t,l=i.k,c=Nh(l),d=c.length-1;d>=0;d--){var u=c[d];if(u!==ws){var h=o[u];if(h===void 0&&!wh(o,u))return!0;var p=l[u],f=p&&p[ws];if(f?f.t!==h:!BA(p,h))return!0}}var y=!!o[ws];return c.length!==Nh(o).length+(y?0:1)}function n(i){var o=i.k;if(o.length!==i.t.length)return!0;var l=Object.getOwnPropertyDescriptor(o,o.length-1);if(l&&!l.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var a={};t9("ES5",{J:function(i,o){var l=Array.isArray(i),c=function(u,h){if(u){for(var p=Array(h.length),f=0;f<h.length;f++)Object.defineProperty(p,""+f,e(f,!0));return p}var y=UA(h);delete y[ws];for(var g=Nh(y),j=0;j<g.length;j++){var v=g[j];y[v]=e(v,u||!!y[v].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(l,i),d={i:l?5:4,A:o?o.A:kj(),P:!1,I:!1,R:{},l:o,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,ws,{value:d,writable:!0}),c},S:function(i,o,l){l?Oc(o)&&o[ws].A===i&&t(i.p):(i.u&&function c(d){if(d&&typeof d=="object"){var u=d[ws];if(u){var h=u.t,p=u.k,f=u.R,y=u.i;if(y===4)eu(p,function(N){N!==ws&&(h[N]!==void 0||wh(h,N)?f[N]||c(p[N]):(f[N]=!0,nc(u)))}),eu(h,function(N){p[N]!==void 0||wh(p,N)||(f[N]=!1,nc(u))});else if(y===5){if(n(u)&&(nc(u),f.length=!0),p.length<h.length)for(var g=p.length;g<h.length;g++)f[g]=!1;else for(var j=h.length;j<p.length;j++)f[j]=!0;for(var v=Math.min(p.length,h.length),w=0;w<v;w++)p.hasOwnProperty(w)||(f[w]=!0),f[w]===void 0&&c(p[w])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?s(i):n(i)}})}var j4,Sp,KN=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",a9=typeof Map<"u",i9=typeof Set<"u",w4=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",zA=KN?Symbol.for("immer-nothing"):((j4={})["immer-nothing"]=!0,j4),N4=KN?Symbol.for("immer-draftable"):"__$immer_draftable",ws=KN?Symbol.for("immer-state"):"__$immer_state",o9=""+Object.prototype.constructor,Nh=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,UA=Object.getOwnPropertyDescriptors||function(e){var t={};return Nh(e).forEach(function(s){t[s]=Object.getOwnPropertyDescriptor(e,s)}),t},Ej={},_p={get:function(e,t){if(t===ws)return e;var s=Sd(e);if(!wh(s,t))return function(a,i,o){var l,c=y4(i,o);return c?"value"in c?c.value:(l=c.get)===null||l===void 0?void 0:l.call(a.k):void 0}(e,s,t);var n=s[t];return e.I||!Nl(n)?n:n===_b(e.t,t)?(Cb(e),e.o[t]=Pj(e.A.h,n,e)):n},has:function(e,t){return t in Sd(e)},ownKeys:function(e){return Reflect.ownKeys(Sd(e))},set:function(e,t,s){var n=y4(Sd(e),t);if(n!=null&&n.set)return n.set.call(e.k,s),!0;if(!e.P){var a=_b(Sd(e),t),i=a==null?void 0:a[ws];if(i&&i.t===s)return e.o[t]=s,e.R[t]=!1,!0;if(BA(s,a)&&(s!==void 0||wh(e.t,t)))return!0;Cb(e),nc(e)}return e.o[t]===s&&(s!==void 0||t in e.o)||Number.isNaN(s)&&Number.isNaN(e.o[t])||(e.o[t]=s,e.R[t]=!0),!0},deleteProperty:function(e,t){return _b(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Cb(e),nc(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var s=Sd(e),n=Reflect.getOwnPropertyDescriptor(s,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:s[t]}},defineProperty:function(){Gi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Gi(12)}},Em={};eu(_p,function(e,t){Em[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Em.deleteProperty=function(e,t){return Em.set.call(this,e,t,void 0)},Em.set=function(e,t,s){return _p.set.call(this,e[0],t,s,e[0])};var l9=function(){function e(s){var n=this;this.O=w4,this.D=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var l=i;i=a;var c=n;return function(g){var j=this;g===void 0&&(g=l);for(var v=arguments.length,w=Array(v>1?v-1:0),N=1;N<v;N++)w[N-1]=arguments[N];return c.produce(g,function(C){var k;return(k=i).call.apply(k,[j,C].concat(w))})}}var d;if(typeof i!="function"&&Gi(6),o!==void 0&&typeof o!="function"&&Gi(7),Nl(a)){var u=x4(n),h=Pj(n,a,void 0),p=!0;try{d=i(h),p=!1}finally{p?Z0(u):Aj(u)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(g){return Nb(u,o),Sb(g,u)},function(g){throw Z0(u),g}):(Nb(u,o),Sb(d,u))}if(!a||typeof a!="object"){if((d=i(a))===void 0&&(d=a),d===zA&&(d=void 0),n.D&&WN(d,!0),o){var f=[],y=[];Do("Patches").M(a,d,f,y),o(f,y)}return d}Gi(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(d){for(var u=arguments.length,h=Array(u>1?u-1:0),p=1;p<u;p++)h[p-1]=arguments[p];return n.produceWithPatches(d,function(f){return a.apply(void 0,[f].concat(h))})};var o,l,c=n.produce(a,i,function(d,u){o=d,l=u});return typeof Promise<"u"&&c instanceof Promise?c.then(function(d){return[d,o,l]}):[c,o,l]},typeof(s==null?void 0:s.useProxies)=="boolean"&&this.setUseProxies(s.useProxies),typeof(s==null?void 0:s.autoFreeze)=="boolean"&&this.setAutoFreeze(s.autoFreeze)}var t=e.prototype;return t.createDraft=function(s){Nl(s)||Gi(8),Oc(s)&&(s=s9(s));var n=x4(this),a=Pj(this,s,void 0);return a[ws].C=!0,Aj(n),a},t.finishDraft=function(s,n){var a=s&&s[ws],i=a.A;return Nb(i,n),Sb(void 0,i)},t.setAutoFreeze=function(s){this.D=s},t.setUseProxies=function(s){s&&!w4&&Gi(20),this.O=s},t.applyPatches=function(s,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){s=i.value;break}}a>-1&&(n=n.slice(a+1));var o=Do("Patches").$;return Oc(s)?o(s,n):this.produce(s,function(l){return o(l,n)})},e}(),ni=new l9,qA=ni.produce;ni.produceWithPatches.bind(ni);ni.setAutoFreeze.bind(ni);ni.setUseProxies.bind(ni);ni.applyPatches.bind(ni);ni.createDraft.bind(ni);ni.finishDraft.bind(ni);function Vr(e){"@babel/helpers - typeof";return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(e)}function c9(e,t){if(Vr(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(Vr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d9(e){var t=c9(e,"string");return Vr(t)=="symbol"?t:t+""}function u9(e,t,s){return(t=d9(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function S4(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function _4(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?S4(Object(s),!0).forEach(function(n){u9(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S4(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Yn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var C4=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),kb=function(){return Math.random().toString(36).substring(7).split("").join(".")},ev={INIT:"@@redux/INIT"+kb(),REPLACE:"@@redux/REPLACE"+kb(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+kb()}};function h9(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function YN(e,t,s){var n;if(typeof t=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(Yn(0));if(typeof t=="function"&&typeof s>"u"&&(s=t,t=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(Yn(1));return s(YN)(e,t)}if(typeof e!="function")throw new Error(Yn(2));var a=e,i=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function u(){if(c)throw new Error(Yn(3));return i}function h(g){if(typeof g!="function")throw new Error(Yn(4));if(c)throw new Error(Yn(5));var j=!0;return d(),l.push(g),function(){if(j){if(c)throw new Error(Yn(6));j=!1,d();var w=l.indexOf(g);l.splice(w,1),o=null}}}function p(g){if(!h9(g))throw new Error(Yn(7));if(typeof g.type>"u")throw new Error(Yn(8));if(c)throw new Error(Yn(9));try{c=!0,i=a(i,g)}finally{c=!1}for(var j=o=l,v=0;v<j.length;v++){var w=j[v];w()}return g}function f(g){if(typeof g!="function")throw new Error(Yn(10));a=g,p({type:ev.REPLACE})}function y(){var g,j=h;return g={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Yn(11));function N(){w.next&&w.next(u())}N();var C=j(N);return{unsubscribe:C}}},g[C4]=function(){return this},g}return p({type:ev.INIT}),n={dispatch:p,subscribe:h,getState:u,replaceReducer:f},n[C4]=y,n}function f9(e){Object.keys(e).forEach(function(t){var s=e[t],n=s(void 0,{type:ev.INIT});if(typeof n>"u")throw new Error(Yn(12));if(typeof s(void 0,{type:ev.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Yn(13))})}function m9(e){for(var t=Object.keys(e),s={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(s[a]=e[a])}var i=Object.keys(s),o;try{f9(s)}catch(l){o=l}return function(c,d){if(c===void 0&&(c={}),o)throw o;for(var u=!1,h={},p=0;p<i.length;p++){var f=i[p],y=s[f],g=c[f],j=y(g,d);if(typeof j>"u")throw d&&d.type,new Error(Yn(14));h[f]=j,u=u||j!==g}return u=u||i.length!==Object.keys(c).length,u?h:c}}function tv(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function p9(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Yn(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=tv.apply(void 0,l)(a.dispatch),_4(_4({},a),{},{dispatch:i})}}}function VA(e){var t=function(n){var a=n.dispatch,i=n.getState;return function(o){return function(l){return typeof l=="function"?l(a,i,e):o(l)}}};return t}var Lj=VA();Lj.withExtraArgument=VA;var HA=function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(t,s);function n(){this.constructor=t}t.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}}(),g9=function(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,a=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(e,s)}catch(u){d=[6,u],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},of=function(e,t){for(var s=0,n=t.length,a=e.length;s<n;s++,a++)e[a]=t[s];return e},x9=Object.defineProperty,v9=Object.defineProperties,y9=Object.getOwnPropertyDescriptors,k4=Object.getOwnPropertySymbols,b9=Object.prototype.hasOwnProperty,j9=Object.prototype.propertyIsEnumerable,A4=function(e,t,s){return t in e?x9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s},kc=function(e,t){for(var s in t||(t={}))b9.call(t,s)&&A4(e,s,t[s]);if(k4)for(var n=0,a=k4(t);n<a.length;n++){var s=a[n];j9.call(t,s)&&A4(e,s,t[s])}return e},Ab=function(e,t){return v9(e,y9(t))},w9=function(e,t,s){return new Promise(function(n,a){var i=function(c){try{l(s.next(c))}catch(d){a(d)}},o=function(c){try{l(s.throw(c))}catch(d){a(d)}},l=function(c){return c.done?n(c.value):Promise.resolve(c.value).then(i,o)};l((s=s.apply(e,t)).next())})},N9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?tv:tv.apply(null,arguments)};function S9(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var s=t;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return t===s}function Ac(e,t){function s(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return kc(kc({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return s.toString=function(){return""+e},s.type=e,s.match=function(n){return n.type===e},s}var _9=function(e){HA(t,e);function t(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];var a=e.apply(this,s)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];return e.prototype.concat.apply(this,s)},t.prototype.prepend=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];return s.length===1&&Array.isArray(s[0])?new(t.bind.apply(t,of([void 0],s[0].concat(this)))):new(t.bind.apply(t,of([void 0],s.concat(this))))},t}(Array),C9=function(e){HA(t,e);function t(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];var a=e.apply(this,s)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];return e.prototype.concat.apply(this,s)},t.prototype.prepend=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];return s.length===1&&Array.isArray(s[0])?new(t.bind.apply(t,of([void 0],s[0].concat(this)))):new(t.bind.apply(t,of([void 0],s.concat(this))))},t}(Array);function Rj(e){return Nl(e)?qA(e,function(){}):e}function k9(e){return typeof e=="boolean"}function A9(){return function(t){return P9(t)}}function P9(e){e===void 0&&(e={});var t=e.thunk,s=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new _9;return s&&(k9(s)?n.push(Lj):n.push(Lj.withExtraArgument(s.extraArgument))),n}function E9(e){var t=A9(),s=e||{},n=s.reducer,a=n===void 0?void 0:n,i=s.middleware,o=i===void 0?t():i,l=s.devTools,c=l===void 0?!0:l,d=s.preloadedState,u=d===void 0?void 0:d,h=s.enhancers,p=h===void 0?void 0:h,f;if(typeof a=="function")f=a;else if(S9(a))f=m9(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(t));var g=p9.apply(void 0,y),j=tv;c&&(j=N9(kc({trace:!1},typeof c=="object"&&c)));var v=new C9(g),w=v;Array.isArray(p)?w=of([g],p):typeof p=="function"&&(w=p(v));var N=j.apply(void 0,w);return YN(f,u,N)}function WA(e){var t={},s=[],n,a={addCase:function(i,o){var l=typeof i=="string"?i:i.type;if(!l)throw new Error("`builder.addCase` cannot be called with an empty action type");if(l in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[l]=o,a},addMatcher:function(i,o){return s.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return e(a),[t,s,n]}function L9(e){return typeof e=="function"}function R9(e,t,s,n){s===void 0&&(s=[]);var a=typeof t=="function"?WA(t):[t,s,n],i=a[0],o=a[1],l=a[2],c;if(L9(e))c=function(){return Rj(e())};else{var d=Rj(e);c=function(){return d}}function u(h,p){h===void 0&&(h=c());var f=of([i[p.type]],o.filter(function(y){var g=y.matcher;return g(p)}).map(function(y){var g=y.reducer;return g}));return f.filter(function(y){return!!y}).length===0&&(f=[l]),f.reduce(function(y,g){if(g)if(Oc(y)){var j=y,v=g(j,p);return v===void 0?y:v}else{if(Nl(y))return qA(y,function(w){return g(w,p)});var v=g(y,p);if(v===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return y},h)}return u.getInitialState=c,u}function T9(e,t){return e+"/"+t}function Js(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var s=typeof e.initialState=="function"?e.initialState:Rj(e.initialState),n=e.reducers||{},a=Object.keys(n),i={},o={},l={};a.forEach(function(u){var h=n[u],p=T9(t,u),f,y;"reducer"in h?(f=h.reducer,y=h.prepare):f=h,i[u]=f,o[p]=f,l[u]=y?Ac(p,y):Ac(p)});function c(){var u=typeof e.extraReducers=="function"?WA(e.extraReducers):[e.extraReducers],h=u[0],p=h===void 0?{}:h,f=u[1],y=f===void 0?[]:f,g=u[2],j=g===void 0?void 0:g,v=kc(kc({},p),o);return R9(s,function(w){for(var N in v)w.addCase(N,v[N]);for(var C=0,k=y;C<k.length;C++){var O=k[C];w.addMatcher(O.matcher,O.reducer)}j&&w.addDefaultCase(j)})}var d;return{name:t,reducer:function(u,h){return d||(d=c()),d(u,h)},actions:l,caseReducers:i,getInitialState:function(){return d||(d=c()),d.getInitialState()}}}var I9="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",F9=function(e){e===void 0&&(e=21);for(var t="",s=e;s--;)t+=I9[Math.random()*64|0];return t},D9=["name","message","stack","code"],Pb=function(){function e(t,s){this.payload=t,this.meta=s}return e}(),P4=function(){function e(t,s){this.payload=t,this.meta=s}return e}(),O9=function(e){if(typeof e=="object"&&e!==null){for(var t={},s=0,n=D9;s<n.length;s++){var a=n[s];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}},Pt=function(){function e(t,s,n){var a=Ac(t+"/fulfilled",function(d,u,h,p){return{payload:d,meta:Ab(kc({},p||{}),{arg:h,requestId:u,requestStatus:"fulfilled"})}}),i=Ac(t+"/pending",function(d,u,h){return{payload:void 0,meta:Ab(kc({},h||{}),{arg:u,requestId:d,requestStatus:"pending"})}}),o=Ac(t+"/rejected",function(d,u,h,p,f){return{payload:p,error:(n&&n.serializeError||O9)(d||"Rejected"),meta:Ab(kc({},f||{}),{arg:h,requestId:u,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"})}}),l=typeof AbortController<"u"?AbortController:function(){function d(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return d.prototype.abort=function(){},d}();function c(d){return function(u,h,p){var f=n!=null&&n.idGenerator?n.idGenerator(d):F9(),y=new l,g;function j(w){g=w,y.abort()}var v=function(){return w9(this,null,function(){var w,N,C,k,O,R,E;return g9(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),k=(w=n==null?void 0:n.condition)==null?void 0:w.call(n,d,{getState:h,extra:p}),$9(k)?[4,k]:[3,2];case 1:k=I.sent(),I.label=2;case 2:if(k===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return O=new Promise(function(D,P){return y.signal.addEventListener("abort",function(){return P({name:"AbortError",message:g||"Aborted"})})}),u(i(f,d,(N=n==null?void 0:n.getPendingMeta)==null?void 0:N.call(n,{requestId:f,arg:d},{getState:h,extra:p}))),[4,Promise.race([O,Promise.resolve(s(d,{dispatch:u,getState:h,extra:p,requestId:f,signal:y.signal,abort:j,rejectWithValue:function(D,P){return new Pb(D,P)},fulfillWithValue:function(D,P){return new P4(D,P)}})).then(function(D){if(D instanceof Pb)throw D;return D instanceof P4?a(D.payload,f,d,D.meta):a(D,f,d)})])];case 3:return C=I.sent(),[3,5];case 4:return R=I.sent(),C=R instanceof Pb?o(null,f,d,R.payload,R.meta):o(R,f,d),[3,5];case 5:return E=n&&!n.dispatchConditionRejection&&o.match(C)&&C.meta.condition,E||u(C),[2,C]}})})}();return Object.assign(v,{abort:j,requestId:f,arg:d,unwrap:function(){return v.then(M9)}})}}return Object.assign(c,{pending:i,rejected:o,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e}();function M9(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function $9(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var JN="listenerMiddleware";Ac(JN+"/add");Ac(JN+"/removeAll");Ac(JN+"/remove");var E4;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);n9();var ZN="persist:",GA="persist/FLUSH",XN="persist/REHYDRATE",KA="persist/PAUSE",YA="persist/PERSIST",JA="persist/PURGE",ZA="persist/REGISTER",B9=-1;function Lx(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lx=function(s){return typeof s}:Lx=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Lx(e)}function L4(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function z9(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?L4(s,!0).forEach(function(n){U9(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):L4(s).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function U9(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function q9(e,t,s,n){n.debug;var a=z9({},s);return e&&Lx(e)==="object"&&Object.keys(e).forEach(function(i){i!=="_persist"&&t[i]===s[i]&&(a[i]=e[i])}),a}function V9(e){var t=e.blacklist||null,s=e.whitelist||null,n=e.transforms||[],a=e.throttle||0,i="".concat(e.keyPrefix!==void 0?e.keyPrefix:ZN).concat(e.key),o=e.storage,l;e.serialize===!1?l=function(k){return k}:typeof e.serialize=="function"?l=e.serialize:l=H9;var c=e.writeFailHandler||null,d={},u={},h=[],p=null,f=null,y=function(k){Object.keys(k).forEach(function(O){v(O)&&d[O]!==k[O]&&h.indexOf(O)===-1&&h.push(O)}),Object.keys(d).forEach(function(O){k[O]===void 0&&v(O)&&h.indexOf(O)===-1&&d[O]!==void 0&&h.push(O)}),p===null&&(p=setInterval(g,a)),d=k};function g(){if(h.length===0){p&&clearInterval(p),p=null;return}var C=h.shift(),k=n.reduce(function(O,R){return R.in(O,C,d)},d[C]);if(k!==void 0)try{u[C]=l(k)}catch(O){console.error("redux-persist/createPersistoid: error serializing state",O)}else delete u[C];h.length===0&&j()}function j(){Object.keys(u).forEach(function(C){d[C]===void 0&&delete u[C]}),f=o.setItem(i,l(u)).catch(w)}function v(C){return!(s&&s.indexOf(C)===-1&&C!=="_persist"||t&&t.indexOf(C)!==-1)}function w(C){c&&c(C)}var N=function(){for(;h.length!==0;)g();return f||Promise.resolve()};return{update:y,flush:N}}function H9(e){return JSON.stringify(e)}function W9(e){var t=e.transforms||[],s="".concat(e.keyPrefix!==void 0?e.keyPrefix:ZN).concat(e.key),n=e.storage;e.debug;var a;return e.deserialize===!1?a=function(o){return o}:typeof e.deserialize=="function"?a=e.deserialize:a=G9,n.getItem(s).then(function(i){if(i)try{var o={},l=a(i);return Object.keys(l).forEach(function(c){o[c]=t.reduceRight(function(d,u){return u.out(d,c,l)},a(l[c]))}),o}catch(c){throw c}else return})}function G9(e){return JSON.parse(e)}function K9(e){var t=e.storage,s="".concat(e.keyPrefix!==void 0?e.keyPrefix:ZN).concat(e.key);return t.removeItem(s,Y9)}function Y9(e){}function R4(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function al(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?R4(s,!0).forEach(function(n){J9(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R4(s).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function J9(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Z9(e,t){if(e==null)return{};var s=X9(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function X9(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}var Q9=5e3;function XA(e,t){var s=e.version!==void 0?e.version:B9;e.debug;var n=e.stateReconciler===void 0?q9:e.stateReconciler,a=e.getStoredState||W9,i=e.timeout!==void 0?e.timeout:Q9,o=null,l=!1,c=!0,d=function(h){return h._persist.rehydrated&&o&&!c&&o.update(h),h};return function(u,h){var p=u||{},f=p._persist,y=Z9(p,["_persist"]),g=y;if(h.type===YA){var j=!1,v=function(E,I){j||(h.rehydrate(e.key,E,I),j=!0)};if(i&&setTimeout(function(){!j&&v(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},i),c=!1,o||(o=V9(e)),f)return al({},t(g,h),{_persist:f});if(typeof h.rehydrate!="function"||typeof h.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return h.register(e.key),a(e).then(function(R){var E=e.migrate||function(I,D){return Promise.resolve(I)};E(R,s).then(function(I){v(I)},function(I){v(void 0,I)})},function(R){v(void 0,R)}),al({},t(g,h),{_persist:{version:s,rehydrated:!1}})}else{if(h.type===JA)return l=!0,h.result(K9(e)),al({},t(g,h),{_persist:f});if(h.type===GA)return h.result(o&&o.flush()),al({},t(g,h),{_persist:f});if(h.type===KA)c=!0;else if(h.type===XN){if(l)return al({},g,{_persist:al({},f,{rehydrated:!0})});if(h.key===e.key){var w=t(g,h),N=h.payload,C=n!==!1&&N!==void 0?n(N,u,w,e):w,k=al({},C,{_persist:al({},f,{rehydrated:!0})});return d(k)}}}if(!f)return t(u,h);var O=t(g,h);return O===g?u:d(al({},O,{_persist:f}))}}function T4(e){return r$(e)||t$(e)||e$()}function e$(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function t$(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function r$(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}function I4(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Tj(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?I4(s,!0).forEach(function(n){s$(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):I4(s).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function s$(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var QA={registry:[],bootstrapped:!1},n$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QA,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case ZA:return Tj({},t,{registry:[].concat(T4(t.registry),[s.key])});case XN:var n=t.registry.indexOf(s.key),a=T4(t.registry);return a.splice(n,1),Tj({},t,{registry:a,bootstrapped:a.length===0});default:return t}};function a$(e,t,s){var n=YN(n$,QA,void 0),a=function(c){n.dispatch({type:ZA,key:c})},i=function(c,d,u){var h={type:XN,payload:d,err:u,key:c};e.dispatch(h),n.dispatch(h)},o=Tj({},n,{purge:function(){var c=[];return e.dispatch({type:JA,result:function(u){c.push(u)}}),Promise.all(c)},flush:function(){var c=[];return e.dispatch({type:GA,result:function(u){c.push(u)}}),Promise.all(c)},pause:function(){e.dispatch({type:KA})},persist:function(){e.dispatch({type:YA,register:a,rehydrate:i})}});return o.persist(),o}var QN={},e5={};e5.__esModule=!0;e5.default=l$;function Rx(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rx=function(s){return typeof s}:Rx=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Rx(e)}function Eb(){}var i$={getItem:Eb,setItem:Eb,removeItem:Eb};function o$(e){if((typeof self>"u"?"undefined":Rx(self))!=="object"||!(e in self))return!1;try{var t=self[e],s="redux-persist ".concat(e," test");t.setItem(s,"test"),t.getItem(s),t.removeItem(s)}catch{return!1}return!0}function l$(e){var t="".concat(e,"Storage");return o$(t)?self[t]:i$}QN.__esModule=!0;QN.default=u$;var c$=d$(e5);function d$(e){return e&&e.__esModule?e:{default:e}}function u$(e){var t=(0,c$.default)(e);return{getItem:function(n){return new Promise(function(a,i){a(t.getItem(n))})},setItem:function(n,a){return new Promise(function(i,o){i(t.setItem(n,a))})},removeItem:function(n){return new Promise(function(a,i){a(t.removeItem(n))})}}}var t5=void 0,h$=f$(QN);function f$(e){return e&&e.__esModule?e:{default:e}}var m$=(0,h$.default)("local");t5=m$;function eP(e,t){return function(){return e.apply(t,arguments)}}const{toString:p$}=Object.prototype,{getPrototypeOf:r5}=Object,{iterator:xy,toStringTag:tP}=Symbol,vy=(e=>t=>{const s=p$.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),oo=e=>(e=e.toLowerCase(),t=>vy(t)===e),yy=e=>t=>typeof t===e,{isArray:Sf}=Array,Cp=yy("undefined");function g$(e){return e!==null&&!Cp(e)&&e.constructor!==null&&!Cp(e.constructor)&&Ta(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const rP=oo("ArrayBuffer");function x$(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&rP(e.buffer),t}const v$=yy("string"),Ta=yy("function"),sP=yy("number"),by=e=>e!==null&&typeof e=="object",y$=e=>e===!0||e===!1,Tx=e=>{if(vy(e)!=="object")return!1;const t=r5(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(tP in e)&&!(xy in e)},b$=oo("Date"),j$=oo("File"),w$=oo("Blob"),N$=oo("FileList"),S$=e=>by(e)&&Ta(e.pipe),_$=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ta(e.append)&&((t=vy(e))==="formdata"||t==="object"&&Ta(e.toString)&&e.toString()==="[object FormData]"))},C$=oo("URLSearchParams"),[k$,A$,P$,E$]=["ReadableStream","Request","Response","Headers"].map(oo),L$=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vp(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Sf(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const i=s?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function nP(e,t){t=t.toLowerCase();const s=Object.keys(e);let n=s.length,a;for(;n-- >0;)if(a=s[n],t===a.toLowerCase())return a;return null}const Ed=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,aP=e=>!Cp(e)&&e!==Ed;function Ij(){const{caseless:e}=aP(this)&&this||{},t={},s=(n,a)=>{const i=e&&nP(t,a)||a;Tx(t[i])&&Tx(n)?t[i]=Ij(t[i],n):Tx(n)?t[i]=Ij({},n):Sf(n)?t[i]=n.slice():t[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Vp(arguments[n],s);return t}const R$=(e,t,s,{allOwnKeys:n}={})=>(Vp(t,(a,i)=>{s&&Ta(a)?e[i]=eP(a,s):e[i]=a},{allOwnKeys:n}),e),T$=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),I$=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},F$=(e,t,s,n)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=s!==!1&&r5(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},D$=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},O$=e=>{if(!e)return null;if(Sf(e))return e;let t=e.length;if(!sP(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},M$=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&r5(Uint8Array)),$$=(e,t)=>{const n=(e&&e[xy]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},B$=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},z$=oo("HTMLFormElement"),U$=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),F4=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),q$=oo("RegExp"),iP=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Vp(s,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},V$=e=>{iP(e,(t,s)=>{if(Ta(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(Ta(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},H$=(e,t)=>{const s={},n=a=>{a.forEach(i=>{s[i]=!0})};return Sf(e)?n(e):n(String(e).split(t)),s},W$=()=>{},G$=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function K$(e){return!!(e&&Ta(e.append)&&e[tP]==="FormData"&&e[xy])}const Y$=e=>{const t=new Array(10),s=(n,a)=>{if(by(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const i=Sf(n)?[]:{};return Vp(n,(o,l)=>{const c=s(o,a+1);!Cp(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return s(e,0)},J$=oo("AsyncFunction"),Z$=e=>e&&(by(e)||Ta(e))&&Ta(e.then)&&Ta(e.catch),oP=((e,t)=>e?setImmediate:t?((s,n)=>(Ed.addEventListener("message",({source:a,data:i})=>{a===Ed&&i===s&&n.length&&n.shift()()},!1),a=>{n.push(a),Ed.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ta(Ed.postMessage)),X$=typeof queueMicrotask<"u"?queueMicrotask.bind(Ed):typeof process<"u"&&process.nextTick||oP,Q$=e=>e!=null&&Ta(e[xy]),$e={isArray:Sf,isArrayBuffer:rP,isBuffer:g$,isFormData:_$,isArrayBufferView:x$,isString:v$,isNumber:sP,isBoolean:y$,isObject:by,isPlainObject:Tx,isReadableStream:k$,isRequest:A$,isResponse:P$,isHeaders:E$,isUndefined:Cp,isDate:b$,isFile:j$,isBlob:w$,isRegExp:q$,isFunction:Ta,isStream:S$,isURLSearchParams:C$,isTypedArray:M$,isFileList:N$,forEach:Vp,merge:Ij,extend:R$,trim:L$,stripBOM:T$,inherits:I$,toFlatObject:F$,kindOf:vy,kindOfTest:oo,endsWith:D$,toArray:O$,forEachEntry:$$,matchAll:B$,isHTMLForm:z$,hasOwnProperty:F4,hasOwnProp:F4,reduceDescriptors:iP,freezeMethods:V$,toObjectSet:H$,toCamelCase:U$,noop:W$,toFiniteNumber:G$,findKey:nP,global:Ed,isContextDefined:aP,isSpecCompliantForm:K$,toJSONObject:Y$,isAsyncFn:J$,isThenable:Z$,setImmediate:oP,asap:X$,isIterable:Q$};function xr(e,t,s,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}$e.inherits(xr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$e.toJSONObject(this.config),code:this.code,status:this.status}}});const lP=xr.prototype,cP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{cP[e]={value:e}});Object.defineProperties(xr,cP);Object.defineProperty(lP,"isAxiosError",{value:!0});xr.from=(e,t,s,n,a,i)=>{const o=Object.create(lP);return $e.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),xr.call(o,e.message,t,s,n,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const eB=null;function Fj(e){return $e.isPlainObject(e)||$e.isArray(e)}function dP(e){return $e.endsWith(e,"[]")?e.slice(0,-2):e}function D4(e,t,s){return e?e.concat(t).map(function(a,i){return a=dP(a),!s&&i?"["+a+"]":a}).join(s?".":""):t}function tB(e){return $e.isArray(e)&&!e.some(Fj)}const rB=$e.toFlatObject($e,{},null,function(t){return/^is[A-Z]/.test(t)});function jy(e,t,s){if(!$e.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=$e.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,j){return!$e.isUndefined(j[g])});const n=s.metaTokens,a=s.visitor||u,i=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&$e.isSpecCompliantForm(t);if(!$e.isFunction(a))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if($e.isDate(y))return y.toISOString();if($e.isBoolean(y))return y.toString();if(!c&&$e.isBlob(y))throw new xr("Blob is not supported. Use a Buffer instead.");return $e.isArrayBuffer(y)||$e.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,g,j){let v=y;if(y&&!j&&typeof y=="object"){if($e.endsWith(g,"{}"))g=n?g:g.slice(0,-2),y=JSON.stringify(y);else if($e.isArray(y)&&tB(y)||($e.isFileList(y)||$e.endsWith(g,"[]"))&&(v=$e.toArray(y)))return g=dP(g),v.forEach(function(N,C){!($e.isUndefined(N)||N===null)&&t.append(o===!0?D4([g],C,i):o===null?g:g+"[]",d(N))}),!1}return Fj(y)?!0:(t.append(D4(j,g,i),d(y)),!1)}const h=[],p=Object.assign(rB,{defaultVisitor:u,convertValue:d,isVisitable:Fj});function f(y,g){if(!$e.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(y),$e.forEach(y,function(v,w){(!($e.isUndefined(v)||v===null)&&a.call(t,v,$e.isString(w)?w.trim():w,g,p))===!0&&f(v,g?g.concat(w):[w])}),h.pop()}}if(!$e.isObject(e))throw new TypeError("data must be an object");return f(e),t}function O4(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function s5(e,t){this._pairs=[],e&&jy(e,this,t)}const uP=s5.prototype;uP.append=function(t,s){this._pairs.push([t,s])};uP.toString=function(t){const s=t?function(n){return t.call(this,n,O4)}:O4;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function sB(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hP(e,t,s){if(!t)return e;const n=s&&s.encode||sB;$e.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let i;if(a?i=a(t,s):i=$e.isURLSearchParams(t)?t.toString():new s5(t,s).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class M4{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$e.forEach(this.handlers,function(n){n!==null&&t(n)})}}const fP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nB=typeof URLSearchParams<"u"?URLSearchParams:s5,aB=typeof FormData<"u"?FormData:null,iB=typeof Blob<"u"?Blob:null,oB={isBrowser:!0,classes:{URLSearchParams:nB,FormData:aB,Blob:iB},protocols:["http","https","file","blob","url","data"]},n5=typeof window<"u"&&typeof document<"u",Dj=typeof navigator=="object"&&navigator||void 0,lB=n5&&(!Dj||["ReactNative","NativeScript","NS"].indexOf(Dj.product)<0),cB=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",dB=n5&&window.location.href||"http://localhost",uB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:n5,hasStandardBrowserEnv:lB,hasStandardBrowserWebWorkerEnv:cB,navigator:Dj,origin:dB},Symbol.toStringTag,{value:"Module"})),Qn={...uB,...oB};function hB(e,t){return jy(e,new Qn.classes.URLSearchParams,Object.assign({visitor:function(s,n,a,i){return Qn.isNode&&$e.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function fB(e){return $e.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function mB(e){const t={},s=Object.keys(e);let n;const a=s.length;let i;for(n=0;n<a;n++)i=s[n],t[i]=e[i];return t}function mP(e){function t(s,n,a,i){let o=s[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=s.length;return o=!o&&$e.isArray(a)?a.length:o,c?($e.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!$e.isObject(a[o]))&&(a[o]=[]),t(s,n,a[o],i)&&$e.isArray(a[o])&&(a[o]=mB(a[o])),!l)}if($e.isFormData(e)&&$e.isFunction(e.entries)){const s={};return $e.forEachEntry(e,(n,a)=>{t(fB(n),a,s,0)}),s}return null}function pB(e,t,s){if($e.isString(e))try{return(t||JSON.parse)(e),$e.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const Hp={transitional:fP,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,i=$e.isObject(t);if(i&&$e.isHTMLForm(t)&&(t=new FormData(t)),$e.isFormData(t))return a?JSON.stringify(mP(t)):t;if($e.isArrayBuffer(t)||$e.isBuffer(t)||$e.isStream(t)||$e.isFile(t)||$e.isBlob(t)||$e.isReadableStream(t))return t;if($e.isArrayBufferView(t))return t.buffer;if($e.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return hB(t,this.formSerializer).toString();if((l=$e.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return jy(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(s.setContentType("application/json",!1),pB(t)):t}],transformResponse:[function(t){const s=this.transitional||Hp.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if($e.isResponse(t)||$e.isReadableStream(t))return t;if(t&&$e.isString(t)&&(n&&!this.responseType||a)){const o=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?xr.from(l,xr.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qn.classes.FormData,Blob:Qn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$e.forEach(["delete","get","head","post","put","patch"],e=>{Hp.headers[e]={}});const gB=$e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xB=e=>{const t={};let s,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),s=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!s||t[s]&&gB[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},$4=Symbol("internals");function pm(e){return e&&String(e).trim().toLowerCase()}function Ix(e){return e===!1||e==null?e:$e.isArray(e)?e.map(Ix):String(e)}function vB(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const yB=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lb(e,t,s,n,a){if($e.isFunction(n))return n.call(this,t,s);if(a&&(t=s),!!$e.isString(t)){if($e.isString(n))return t.indexOf(n)!==-1;if($e.isRegExp(n))return n.test(t)}}function bB(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function jB(e,t){const s=$e.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let Ia=class{constructor(t){t&&this.set(t)}set(t,s,n){const a=this;function i(l,c,d){const u=pm(c);if(!u)throw new Error("header name must be a non-empty string");const h=$e.findKey(a,u);(!h||a[h]===void 0||d===!0||d===void 0&&a[h]!==!1)&&(a[h||c]=Ix(l))}const o=(l,c)=>$e.forEach(l,(d,u)=>i(d,u,c));if($e.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if($e.isString(t)&&(t=t.trim())&&!yB(t))o(xB(t),s);else if($e.isObject(t)&&$e.isIterable(t)){let l={},c,d;for(const u of t){if(!$e.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?$e.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,s)}else t!=null&&i(s,t,n);return this}get(t,s){if(t=pm(t),t){const n=$e.findKey(this,t);if(n){const a=this[n];if(!s)return a;if(s===!0)return vB(a);if($e.isFunction(s))return s.call(this,a,n);if($e.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=pm(t),t){const n=$e.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||Lb(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let a=!1;function i(o){if(o=pm(o),o){const l=$e.findKey(n,o);l&&(!s||Lb(n,n[l],l,s))&&(delete n[l],a=!0)}}return $e.isArray(t)?t.forEach(i):i(t),a}clear(t){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const i=s[n];(!t||Lb(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const s=this,n={};return $e.forEach(this,(a,i)=>{const o=$e.findKey(n,i);if(o){s[o]=Ix(a),delete s[i];return}const l=t?bB(i):String(i).trim();l!==i&&delete s[i],s[l]=Ix(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return $e.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=t&&$e.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[$4]=this[$4]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=pm(o);n[l]||(jB(a,o),n[l]=!0)}return $e.isArray(t)?t.forEach(i):i(t),this}};Ia.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$e.reduceDescriptors(Ia.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});$e.freezeMethods(Ia);function Rb(e,t){const s=this||Hp,n=t||s,a=Ia.from(n.headers);let i=n.data;return $e.forEach(e,function(l){i=l.call(s,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function pP(e){return!!(e&&e.__CANCEL__)}function _f(e,t,s){xr.call(this,e??"canceled",xr.ERR_CANCELED,t,s),this.name="CanceledError"}$e.inherits(_f,xr,{__CANCEL__:!0});function gP(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new xr("Request failed with status code "+s.status,[xr.ERR_BAD_REQUEST,xr.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function wB(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function NB(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),s[a]=c,n[a]=d;let h=i,p=0;for(;h!==a;)p+=s[h++],h=h%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const f=u&&d-u;return f?Math.round(p*1e3/f):void 0}}function SB(e,t){let s=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{s=u,a=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-s;h>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-h)))},()=>a&&o(a)]}const rv=(e,t,s=3)=>{let n=0;const a=NB(50,250);return SB(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),u=o<=l;n=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},s)},B4=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},z4=e=>(...t)=>$e.asap(()=>e(...t)),_B=Qn.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Qn.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Qn.origin),Qn.navigator&&/(msie|trident)/i.test(Qn.navigator.userAgent)):()=>!0,CB=Qn.hasStandardBrowserEnv?{write(e,t,s,n,a,i){const o=[e+"="+encodeURIComponent(t)];$e.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),$e.isString(n)&&o.push("path="+n),$e.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kB(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function AB(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function xP(e,t,s){let n=!kB(t);return e&&(n||s==!1)?AB(e,t):t}const U4=e=>e instanceof Ia?{...e}:e;function tu(e,t){t=t||{};const s={};function n(d,u,h,p){return $e.isPlainObject(d)&&$e.isPlainObject(u)?$e.merge.call({caseless:p},d,u):$e.isPlainObject(u)?$e.merge({},u):$e.isArray(u)?u.slice():u}function a(d,u,h,p){if($e.isUndefined(u)){if(!$e.isUndefined(d))return n(void 0,d,h,p)}else return n(d,u,h,p)}function i(d,u){if(!$e.isUndefined(u))return n(void 0,u)}function o(d,u){if($e.isUndefined(u)){if(!$e.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>a(U4(d),U4(u),h,!0)};return $e.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=c[u]||a,p=h(e[u],t[u],u);$e.isUndefined(p)&&h!==l||(s[u]=p)}),s}const vP=e=>{const t=tu({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=Ia.from(o),t.url=hP(xP(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if($e.isFormData(s)){if(Qn.hasStandardBrowserEnv||Qn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Qn.hasStandardBrowserEnv&&(n&&$e.isFunction(n)&&(n=n(t)),n||n!==!1&&_B(t.url))){const d=a&&i&&CB.read(i);d&&o.set(a,d)}return t},PB=typeof XMLHttpRequest<"u",EB=PB&&function(e){return new Promise(function(s,n){const a=vP(e);let i=a.data;const o=Ia.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,h,p,f,y;function g(){f&&f(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function v(){if(!j)return;const N=Ia.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:N,config:e,request:j};gP(function(R){s(R),g()},function(R){n(R),g()},k),j=null}"onloadend"in j?j.onloadend=v:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(v)},j.onabort=function(){j&&(n(new xr("Request aborted",xr.ECONNABORTED,e,j)),j=null)},j.onerror=function(){n(new xr("Network Error",xr.ERR_NETWORK,e,j)),j=null},j.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const k=a.transitional||fP;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),n(new xr(C,k.clarifyTimeoutError?xr.ETIMEDOUT:xr.ECONNABORTED,e,j)),j=null},i===void 0&&o.setContentType(null),"setRequestHeader"in j&&$e.forEach(o.toJSON(),function(C,k){j.setRequestHeader(k,C)}),$e.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),l&&l!=="json"&&(j.responseType=a.responseType),d&&([p,y]=rv(d,!0),j.addEventListener("progress",p)),c&&j.upload&&([h,f]=rv(c),j.upload.addEventListener("progress",h),j.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(u=N=>{j&&(n(!N||N.type?new _f(null,e,j):N),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const w=wB(a.url);if(w&&Qn.protocols.indexOf(w)===-1){n(new xr("Unsupported protocol "+w+":",xr.ERR_BAD_REQUEST,e));return}j.send(i||null)})},LB=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof xr?u:new _f(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new xr(`timeout ${t} of ms exceeded`,xr.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>$e.asap(l),c}},RB=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,a;for(;n<s;)a=n+t,yield e.slice(n,a),n=a},TB=async function*(e,t){for await(const s of IB(e))yield*RB(s,t)},IB=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},q4=(e,t,s,n)=>{const a=TB(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let h=u.byteLength;if(s){let p=i+=h;s(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},wy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yP=wy&&typeof ReadableStream=="function",FB=wy&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),bP=(e,...t)=>{try{return!!e(...t)}catch{return!1}},DB=yP&&bP(()=>{let e=!1;const t=new Request(Qn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),V4=64*1024,Oj=yP&&bP(()=>$e.isReadableStream(new Response("").body)),sv={stream:Oj&&(e=>e.body)};wy&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!sv[t]&&(sv[t]=$e.isFunction(e[t])?s=>s[t]():(s,n)=>{throw new xr(`Response type '${t}' is not supported`,xr.ERR_NOT_SUPPORT,n)})})})(new Response);const OB=async e=>{if(e==null)return 0;if($e.isBlob(e))return e.size;if($e.isSpecCompliantForm(e))return(await new Request(Qn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if($e.isArrayBufferView(e)||$e.isArrayBuffer(e))return e.byteLength;if($e.isURLSearchParams(e)&&(e=e+""),$e.isString(e))return(await FB(e)).byteLength},MB=async(e,t)=>{const s=$e.toFiniteNumber(e.getContentLength());return s??OB(t)},$B=wy&&(async e=>{let{url:t,method:s,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:p}=vP(e);d=d?(d+"").toLowerCase():"text";let f=LB([a,i&&i.toAbortSignal()],o),y;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let j;try{if(c&&DB&&s!=="get"&&s!=="head"&&(j=await MB(u,n))!==0){let k=new Request(t,{method:"POST",body:n,duplex:"half"}),O;if($e.isFormData(n)&&(O=k.headers.get("content-type"))&&u.setContentType(O),k.body){const[R,E]=B4(j,rv(z4(c)));n=q4(k.body,V4,R,E)}}$e.isString(h)||(h=h?"include":"omit");const v="credentials"in Request.prototype;y=new Request(t,{...p,signal:f,method:s.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:v?h:void 0});let w=await fetch(y,p);const N=Oj&&(d==="stream"||d==="response");if(Oj&&(l||N&&g)){const k={};["status","statusText","headers"].forEach(I=>{k[I]=w[I]});const O=$e.toFiniteNumber(w.headers.get("content-length")),[R,E]=l&&B4(O,rv(z4(l),!0))||[];w=new Response(q4(w.body,V4,R,()=>{E&&E(),g&&g()}),k)}d=d||"text";let C=await sv[$e.findKey(sv,d)||"text"](w,e);return!N&&g&&g(),await new Promise((k,O)=>{gP(k,O,{data:C,headers:Ia.from(w.headers),status:w.status,statusText:w.statusText,config:e,request:y})})}catch(v){throw g&&g(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new xr("Network Error",xr.ERR_NETWORK,e,y),{cause:v.cause||v}):xr.from(v,v&&v.code,e,y)}}),Mj={http:eB,xhr:EB,fetch:$B};$e.forEach(Mj,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const H4=e=>`- ${e}`,BB=e=>$e.isFunction(e)||e===null||e===!1,jP={getAdapter:e=>{e=$e.isArray(e)?e:[e];const{length:t}=e;let s,n;const a={};for(let i=0;i<t;i++){s=e[i];let o;if(n=s,!BB(s)&&(n=Mj[(o=String(s)).toLowerCase()],n===void 0))throw new xr(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(H4).join(`
`):" "+H4(i[0]):"as no adapter specified";throw new xr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Mj};function Tb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _f(null,e)}function W4(e){return Tb(e),e.headers=Ia.from(e.headers),e.data=Rb.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),jP.getAdapter(e.adapter||Hp.adapter)(e).then(function(n){return Tb(e),n.data=Rb.call(e,e.transformResponse,n),n.headers=Ia.from(n.headers),n},function(n){return pP(n)||(Tb(e),n&&n.response&&(n.response.data=Rb.call(e,e.transformResponse,n.response),n.response.headers=Ia.from(n.response.headers))),Promise.reject(n)})}const wP="1.10.0",Ny={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ny[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const G4={};Ny.transitional=function(t,s,n){function a(i,o){return"[Axios v"+wP+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new xr(a(o," has been removed"+(s?" in "+s:"")),xr.ERR_DEPRECATED);return s&&!G4[o]&&(G4[o]=!0,console.warn(a(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(i,o,l):!0}};Ny.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function zB(e,t,s){if(typeof e!="object")throw new xr("options must be an object",xr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new xr("option "+i+" must be "+c,xr.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new xr("Unknown option "+i,xr.ERR_BAD_OPTION)}}const Fx={assertOptions:zB,validators:Ny},yo=Fx.validators;let Ud=class{constructor(t){this.defaults=t||{},this.interceptors={request:new M4,response:new M4}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=tu(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:i}=s;n!==void 0&&Fx.assertOptions(n,{silentJSONParsing:yo.transitional(yo.boolean),forcedJSONParsing:yo.transitional(yo.boolean),clarifyTimeoutError:yo.transitional(yo.boolean)},!1),a!=null&&($e.isFunction(a)?s.paramsSerializer={serialize:a}:Fx.assertOptions(a,{encode:yo.function,serialize:yo.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Fx.assertOptions(s,{baseUrl:yo.spelling("baseURL"),withXsrfToken:yo.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&$e.merge(i.common,i[s.method]);i&&$e.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),s.headers=Ia.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(s)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,h=0,p;if(!c){const y=[W4.bind(this),void 0];for(y.unshift.apply(y,l),y.push.apply(y,d),p=y.length,u=Promise.resolve(s);h<p;)u=u.then(y[h++],y[h++]);return u}p=l.length;let f=s;for(h=0;h<p;){const y=l[h++],g=l[h++];try{f=y(f)}catch(j){g.call(this,j);break}}try{u=W4.call(this,f)}catch(y){return Promise.reject(y)}for(h=0,p=d.length;h<p;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=tu(this.defaults,t);const s=xP(t.baseURL,t.url,t.allowAbsoluteUrls);return hP(s,t.params,t.paramsSerializer)}};$e.forEach(["delete","get","head","options"],function(t){Ud.prototype[t]=function(s,n){return this.request(tu(n||{},{method:t,url:s,data:(n||{}).data}))}});$e.forEach(["post","put","patch"],function(t){function s(n){return function(i,o,l){return this.request(tu(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ud.prototype[t]=s(),Ud.prototype[t+"Form"]=s(!0)});let UB=class NP{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new _f(i,o,l),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new NP(function(a){t=a}),cancel:t}}};function qB(e){return function(s){return e.apply(null,s)}}function VB(e){return $e.isObject(e)&&e.isAxiosError===!0}const $j={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($j).forEach(([e,t])=>{$j[t]=e});function SP(e){const t=new Ud(e),s=eP(Ud.prototype.request,t);return $e.extend(s,Ud.prototype,t,{allOwnKeys:!0}),$e.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return SP(tu(e,a))},s}const js=SP(Hp);js.Axios=Ud;js.CanceledError=_f;js.CancelToken=UB;js.isCancel=pP;js.VERSION=wP;js.toFormData=jy;js.AxiosError=xr;js.Cancel=js.CanceledError;js.all=function(t){return Promise.all(t)};js.spread=qB;js.isAxiosError=VB;js.mergeConfig=tu;js.AxiosHeaders=Ia;js.formToJSON=e=>mP($e.isHTMLForm(e)?new FormData(e):e);js.getAdapter=jP.getAdapter;js.HttpStatusCode=$j;js.default=js;const{Axios:qte,AxiosError:kr,CanceledError:Vte,isCancel:Hte,CancelToken:Wte,VERSION:Gte,all:Kte,Cancel:Yte,isAxiosError:Jte,spread:Zte,toFormData:Xte,AxiosHeaders:Qte,HttpStatusCode:ere,formToJSON:tre,getAdapter:rre,mergeConfig:sre}=js,hs="https://api.eujimsolutions.com/api",Tt={LOGIN:`${hs}/login/`,VERIFY_OTP:`${hs}/verify-otp/`,REGISTER:`${hs}/register/`,SCHOOLS:`${hs}/schools/`,SCHOOL_REGISTRATION:`${hs}/school-registration/`,PARENTS:`${hs}/parents/`,DRIVERS:`${hs}/drivers/`,VEHICLES:`${hs}/vehicles/`,ROUTES:`${hs}/schools/`,ROUTE_STOPS:`${hs}/schools/`,ROUTE_ASSIGNMENTS:`${hs}/route-assignments/`,STAFF:`${hs}/staff/`,SCHOOLS_ROLES:`${hs}/schools-roles`,STUDENTS:`${hs}/students/`,TRIPS:`${hs}/trips/`,GRADES:`${hs}/grades/`,PREFERENCES:`${hs}/preferences/`,NOTIFICATIONS:`${hs}/school-admin-notifications/`,NOTIFICATIONS_CREATE:`${hs}/school-admin-notifications/`,CSV_UPLOAD:`${hs}/csv-upload/`,REPORTS:`${hs}/reports/`,SUBSCRIPTION_PLANS:`${hs}/subscription-plans/`,CONTACT_MESSAGES:`${hs}/contact-messages/`,SCHOOL_SUBSCRIPTIONS:`${hs}/school-subscriptions/`,INVOICES:`${hs}/invoices/`,ACTIVATE_SCHOOL:`${hs}/activate-school/`},Cf=async(e,t={},s=3,n=1e3)=>{var i,o,l;let a=null;for(let c=0;c<=s;c++)try{const d=await fetch(e,t);if(d.ok)return d;if(d.status===429){const p=((o=(i=(await d.json().catch(()=>({}))).detail)==null?void 0:i.match(/(\d+) seconds?/))==null?void 0:o[1])||20;if(c<s){console.log(`Rate limited. Waiting ${p} seconds before retry ${c+1}/${s}`),await new Promise(f=>setTimeout(f,parseInt(p)*1e3));continue}else throw new Error(`Rate limited. Please wait ${p} seconds before trying again.`)}const u=await d.json().catch(()=>({}));throw new Error(u.message||`HTTP error! status: ${d.status}`)}catch(d){if(a=d,!((l=d.message)!=null&&l.includes("Rate limited"))&&c<s){const u=n*Math.pow(2,c);console.log(`Request failed. Retrying in ${u}ms (attempt ${c+1}/${s})`),await new Promise(h=>setTimeout(h,u));continue}throw d}throw a||new Error("Request failed after all retries")},HB=1,WB=1e6;let Ib=0;function GB(){return Ib=(Ib+1)%Number.MAX_SAFE_INTEGER,Ib.toString()}const Fb=new Map,K4=e=>{if(Fb.has(e))return;const t=setTimeout(()=>{Fb.delete(e),Vm({type:"REMOVE_TOAST",toastId:e})},WB);Fb.set(e,t)},KB=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,HB)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?K4(s):e.toasts.forEach(n=>{K4(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===s||s===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)}}},Dx=[];let Ox={toasts:[]};function Vm(e){Ox=KB(Ox,e),Dx.forEach(t=>{t(Ox)})}function Ur({...e}){const t=GB(),s=a=>Vm({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Vm({type:"DISMISS_TOAST",toastId:t});return Vm({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:s}}function Zs(){const[e,t]=x.useState(Ox);return x.useEffect(()=>(Dx.push(t),()=>{const s=Dx.indexOf(t);s>-1&&Dx.splice(s,1)}),[e]),{...e,toast:Ur,dismiss:s=>Vm({type:"DISMISS_TOAST",toastId:s})}}const wr={success:(e,t)=>{Ur({title:e,description:t,variant:"default"})},error:(e,t)=>{Ur({title:e,description:t,variant:"destructive"})},warning:(e,t)=>{Ur({title:e,description:t,variant:"warning"})},info:(e,t)=>{Ur({title:e,description:t,variant:"default"})}};let YB=()=>{i5.dispatch(CP()),window.location.href="/login"};const JB=e=>{if(e instanceof kr){if(!e.response)throw wr.error("Network Error","Please check your connection"),new Error("Network error - please check your connection");const t=e.response.status,s=e.response.data;switch(t){case 400:throw wr.error("Error Trying to Make The Request",s.message||s.error||"Invalid request"),new Error(s.message||s.error||"Bad request");case 401:YB();return;case 403:throw wr.error("Forbidden","You don't have permission"),new Error("Forbidden - you don't have permission");case 404:throw wr.error("Not Found","Resource not found"),new Error("Resource not found");case 500:throw wr.error("Server Error","Please try again later"),new Error("Server error - please try again later");default:throw wr.error("Error",s.message||"An error occurred"),new Error(s.message||"An error occurred")}}throw wr.error("Error",e instanceof Error?e.message:"An unexpected error occurred"),e},ZB={timeout:3e4,baseURL:hs},XB={"/parents":{timeout:45e3},"/students":{timeout:45e3}},QB=(e=ZB)=>{const t=js.create({baseURL:e.baseURL,timeout:e.timeout,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});return t.interceptors.request.use(s=>{const n=s.url||"",a=XB[n];return a&&(s.timeout=a.timeout||e.timeout),console.debug("API Request",{method:s.method,url:s.url,timeout:s.timeout}),s}),t},ez=e=>(e.interceptors.request.use(t=>{let s=null;if(s=localStorage.getItem("token"),!s)try{const n=localStorage.getItem("persist:auth");if(n){const a=JSON.parse(n);if(a.token&&(s=JSON.parse(a.token),typeof s=="string"))try{s=JSON.parse(s)}catch{}}}catch(n){console.warn("Error parsing persist data:",n)}if(!s){const n=localStorage.getItem("persist:auth");if(n)try{const a=JSON.parse(n);if(a.token&&(s=JSON.parse(a.token),typeof s=="string"))try{s=JSON.parse(s)}catch{}}catch(a){console.warn("Error parsing persist data:",a)}}if(s)t.headers.Authorization=`Bearer ${s}`,console.log("Auth header set for:",t.url);else{console.error("NO TOKEN FOUND - Authentication will fail!"),console.log("Available localStorage keys:",Object.keys(localStorage));const n=localStorage.getItem("persist:auth");n?(console.log("User appears to be logged in but token extraction failed"),console.log("Raw persist data:",n.substring(0,200)+"...")):console.log("User is NOT logged in - need to login first")}return t},t=>Promise.reject(t)),e),Mt=QB();ez(Mt);Mt.interceptors.response.use(e=>e,e=>{var t,s;return((t=e.response)==null?void 0:t.status)===401?(console.log("Token expired, logging out user"),localStorage.removeItem("persist:auth"),localStorage.removeItem("schoolId"),localStorage.removeItem("token"),window.location.href="/login",Promise.reject(e)):((s=e.response)==null?void 0:s.status)===403?(console.log("Access forbidden, logging out user"),localStorage.removeItem("persist:auth"),localStorage.removeItem("schoolId"),localStorage.removeItem("token"),window.location.href="/login",Promise.reject(e)):(JB(e),Promise.reject(e))});class Lm extends Error{}Lm.prototype.name="InvalidTokenError";function tz(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,s)=>{let n=s.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function rz(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return tz(t)}catch{return atob(t)}}function sz(e,t){if(typeof e!="string")throw new Lm("Invalid token specified: must be a string");t||(t={});const s=t.header===!0?0:1,n=e.split(".")[s];if(typeof n!="string")throw new Lm(`Invalid token specified: missing part #${s+1}`);let a;try{a=rz(n)}catch(i){throw new Lm(`Invalid token specified: invalid base64 for part #${s+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new Lm(`Invalid token specified: invalid json for part #${s+1} (${i.message})`)}}const lf=e=>{try{const t=sz(e),s=Date.now()/1e3,n=t.exp<s;return console.log("Token expiration check:",{tokenPreview:e.substring(0,20)+"...",expirationTime:new Date(t.exp*1e3).toISOString(),currentTime:new Date(s*1e3).toISOString(),isExpired:n}),n}catch(t){return console.error("Error decoding token:",t),!0}},nz=()=>{try{const e=localStorage.getItem("token");if(e&&!lf(e))return console.log("Found valid token in direct storage"),e;const t=localStorage.getItem("persist:auth");if(t){const s=JSON.parse(t),n=JSON.parse(s.token||"null");if(n&&!lf(n))return console.log("Found valid token in Redux Persist storage"),n}console.log("No valid token found in localStorage")}catch(e){console.error("Error parsing persisted token:",e)}return null},az=()=>{try{const e=localStorage.getItem("persist:auth");if(e){const t=JSON.parse(e);return JSON.parse(t.user||"null")}}catch(e){console.error("Error parsing persisted user:",e)}return null},iz={user:null,token:null,loading:!1,error:null,userId:null,verificationStatus:"idle",isInitialized:!1},Mx=Pt("auth/login",async(e,{rejectWithValue:t})=>new Promise((s,n)=>{const a=new XMLHttpRequest;a.open("POST",Tt.LOGIN,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Accept","application/json"),a.onload=function(){var i;if(a.status>=200&&a.status<300)try{const o=JSON.parse(a.responseText);if((i=o.data)!=null&&i.token){const{token:l,user:c}=o.data;s({token:l,user:c})}else n(t("Invalid response from server"))}catch{n(t("Failed to parse server response"))}else try{const o=JSON.parse(a.responseText);n(t(o.message||"Login failed. Please try again."))}catch{n(t("Login failed. Please try again."))}},a.onerror=function(){n(t("Network error occurred"))},a.send(JSON.stringify(e))})),Db=Pt("auth/verifyOTP",async(e,{rejectWithValue:t})=>{var s,n;try{return(await Mt.post(Tt.VERIFY_OTP,e)).data}catch(a){return t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"OTP verification failed")}}),Ob=Pt("auth/register",async(e,{rejectWithValue:t})=>{var s,n,a;try{const i=await Mt.post(Tt.REGISTER,e);if((s=i.data.data)!=null&&s.token){const{token:o,user:l}=i.data.data;return{token:o,user:l}}else return t("Invalid response from server")}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Registration failed")}}),_P=Js({name:"auth",initialState:iz,reducers:{logout:e=>{e.user=null,e.token=null,e.userId=null,e.verificationStatus="idle",e.isInitialized=!0,localStorage.removeItem("schoolId"),localStorage.removeItem("persist:auth"),localStorage.removeItem("token")},clearError:e=>{e.error=null},resetVerificationStatus:e=>{e.verificationStatus="idle"},checkTokenExpiration:e=>{e.token&&lf(e.token)&&(e.user=null,e.token=null,e.userId=null,e.verificationStatus="idle",e.isInitialized=!0,localStorage.removeItem("schoolId"),localStorage.removeItem("persist:auth"),localStorage.removeItem("token"))},initializeAuth:e=>{const t=nz(),s=az();console.log("initializeAuth debug:",{persistedToken:t?"exists":"null",persistedUser:s?"exists":"null",currentStateToken:e.token?"exists":"null",currentStateUser:e.user?"exists":"null"}),t&&s&&(e.token=t,e.user=s,console.log("Restored auth state from localStorage")),e.isInitialized=!0}},extraReducers:e=>{e.addCase("persist/REHYDRATE",(t,s)=>{var n,a,i,o,l,c;if(console.log("REHYDRATE debug:",{hasPayload:!!s.payload,hasAuth:!!((n=s.payload)!=null&&n.auth),token:(i=(a=s.payload)==null?void 0:a.auth)!=null&&i.token?"exists":"null",user:(l=(o=s.payload)==null?void 0:o.auth)!=null&&l.user?"exists":"null"}),(c=s.payload)!=null&&c.auth){const{token:d,user:u}=s.payload.auth;d&&u&&!lf(d)?(t.token=d,t.user=u,console.log("Restored auth state from Redux Persist")):(console.log("Token expired or invalid, clearing auth state"),t.token=null,t.user=null)}t.isInitialized=!0}).addCase(Mx.pending,t=>{t.loading=!0,t.error=null}).addCase(Mx.fulfilled,(t,s)=>{t.loading=!1,t.user=s.payload.user,t.token=s.payload.token,t.isInitialized=!0,localStorage.setItem("token",s.payload.token)}).addCase(Mx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Login failed. Please try again.",t.isInitialized=!0}).addCase(Db.pending,t=>{t.loading=!0,t.error=null}).addCase(Db.fulfilled,(t,s)=>{t.loading=!1,t.user=s.payload.user,t.token=s.payload.token,t.verificationStatus="verified",t.isInitialized=!0,localStorage.setItem("token",s.payload.token)}).addCase(Db.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"OTP verification failed",t.verificationStatus="failed",t.isInitialized=!0}).addCase(Ob.pending,t=>{t.loading=!0,t.error=null}).addCase(Ob.fulfilled,(t,s)=>{t.loading=!1,t.user=s.payload.user,t.token=s.payload.token,t.isInitialized=!0,localStorage.setItem("token",s.payload.token)}).addCase(Ob.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Registration failed",t.isInitialized=!0})}}),{logout:CP,clearError:oz,checkTokenExpiration:lz,initializeAuth:cz}=_P.actions,dz=_P.reducer,uz={schools:[],loading:!1,error:null,registrationLoading:!1,registrationError:null,registrationSuccess:!1},vl=Pt("schools/fetchSchools",async(e,{rejectWithValue:t})=>{var s,n,a,i;try{console.log("Fetching schools from:",Tt.SCHOOLS);const o=await Mt.get(Tt.SCHOOLS);return console.log("Schools API response:",o.data),!o.data||!Array.isArray(o.data)?(console.error("Invalid schools response format:",o.data),t("Invalid response format from server")):o.data}catch(o){const l=o;return console.error("Schools fetch error:",{error:o,response:(s=l.response)==null?void 0:s.data,status:(n=l.response)==null?void 0:n.status}),t(((i=(a=l.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch schools")}}),$x=Pt("schools/registerSchool",async(e,{rejectWithValue:t})=>{var s,n,a,i;try{console.log("Registering school with payload:",e);const o=await Mt.post(Tt.SCHOOL_REGISTRATION,e);return console.log("School registration response:",o.data),o.data}catch(o){const l=o;return console.error("School registration error:",{error:o,response:(s=l.response)==null?void 0:s.data,status:(n=l.response)==null?void 0:n.status}),t(((i=(a=l.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to register school")}}),kP=Js({name:"schools",initialState:uz,reducers:{clearSchoolsError:e=>{e.error=null},clearRegistrationError:e=>{e.registrationError=null},clearRegistrationSuccess:e=>{e.registrationSuccess=!1}},extraReducers:e=>{e.addCase(vl.pending,t=>{t.loading=!0,t.error=null}).addCase(vl.fulfilled,(t,s)=>{t.loading=!1,t.schools=s.payload}).addCase(vl.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch schools"}).addCase($x.pending,t=>{t.registrationLoading=!0,t.registrationError=null,t.registrationSuccess=!1}).addCase($x.fulfilled,t=>{t.registrationLoading=!1,t.registrationSuccess=!0}).addCase($x.rejected,(t,s)=>{t.registrationLoading=!1,t.registrationError=s.payload||"Failed to register school"})}}),{clearSchoolsError:hz}=kP.actions,fz=kP.reducer,mz={parents:[],loading:!1,error:null},Bx=Pt("parents/registerParent",async(e,{rejectWithValue:t})=>{var s,n,a,i;try{const o={user_data:{first_name:e.user.first_name,last_name:e.user.last_name,email:e.user.email,phone_number:e.user.phone_number,password:e.user.password,confirm_password:e.user.confirm_password,user_type:e.user.user_type,profile_image:e.user.profile_image,user_phone_number:e.user.user_phone_number},address:e.address,emergency_contact:e.emergency_contact,school:e.school,preferred_contact_method:e.preferred_contact_method,secondary_phone:e.secondary_phone,authorized_pickup_persons:e.authorized_pickup_persons};console.log("Creating parent with all data:",o);const l=await Mt.post(Tt.PARENTS,o);return console.log("Parent creation response:",l.data),l.data}catch(o){if(console.error("Parent registration error:",o),console.error("Error type:",typeof o),console.error("Error instanceof Error:",o instanceof Error),o instanceof kr){if(console.error("Axios error response:",o.response),console.error("Axios error response data:",(s=o.response)==null?void 0:s.data),console.error("Axios error status:",(n=o.response)==null?void 0:n.status),(a=o.response)!=null&&a.data){const l=o.response.data;console.error("API Error details:",l),console.error("Error data type:",typeof l),console.error("Error data keys:",Object.keys(l));const c=JSON.stringify(l);return console.error("Returning error string:",c),t(c)}return(i=o.response)!=null&&i.status?t(`Server error (${o.response.status})`):t("Network error - please check your connection")}return console.error("Non-Axios error:",o),t(o instanceof Error?o.message:"Failed to register parent")}}),ua=Pt("parents/fetchParents",async(e,{rejectWithValue:t})=>{var s,n,a,i;try{const o=typeof e=="object"?e.schoolId:void 0;let l=Tt.PARENTS;o&&(l+=`?school=${o}`);const c=Date.now();l+=l.includes("?")?`&_t=${c}`:`?_t=${c}`,console.log("Fetching parents from:",l);const d=await Mt.get(l);return console.log("Parents API response:",d.data),!d.data||!Array.isArray(d.data)?(console.error("Invalid parents response format:",d.data),t("Invalid response format from server")):d.data}catch(o){if(console.error("Parents fetch error:",o),o instanceof kr){if(console.error("Axios error response:",o.response),console.error("Axios error response data:",(s=o.response)==null?void 0:s.data),console.error("Axios error status:",(n=o.response)==null?void 0:n.status),(a=o.response)!=null&&a.data){const l=o.response.data;return typeof l=="object"&&l.message?t(l.message):t(JSON.stringify(l))}return(i=o.response)!=null&&i.status?t(`Server error (${o.response.status})`):t("Network error - please check your connection")}return t(o instanceof Error?o.message:"Failed to fetch parents")}}),Mb=Pt("parents/fetchParentById",async({schoolId:e,parentId:t},{rejectWithValue:s})=>{var n,a,i,o;try{console.log(`Fetching parent ${t} for school ${e}`);const l=await Mt.get(`${Tt.PARENTS}${t}/`);return console.log("Parent response:",l.data),l.data.data||l.data}catch(l){if(console.error("Error fetching parent:",l),l instanceof kr){if(console.error("Axios error response:",l.response),console.error("Axios error response data:",(n=l.response)==null?void 0:n.data),console.error("Axios error status:",(a=l.response)==null?void 0:a.status),(i=l.response)!=null&&i.data){const c=l.response.data;return typeof c=="object"&&c.message?s(c.message):s(JSON.stringify(c))}return(o=l.response)!=null&&o.status?s(`Server error (${l.response.status})`):s("Network error - please check your connection")}return s(l instanceof Error?l.message:"Failed to fetch parent")}}),zx=Pt("parents/updateParent",async({id:e,data:t},{rejectWithValue:s})=>{var n,a,i,o;try{console.log(`Updating parent ${e} with data:`,t);const l=await Mt.put(`${Tt.PARENTS}${e}/`,t);return console.log("Update parent response:",l.data),l.data.data||l.data}catch(l){if(console.error("Error updating parent:",l),l instanceof kr){if(console.error("Axios error response:",l.response),console.error("Axios error response data:",(n=l.response)==null?void 0:n.data),console.error("Axios error status:",(a=l.response)==null?void 0:a.status),(i=l.response)!=null&&i.data){const c=l.response.data;return typeof c=="object"&&c.message?s(c.message):s(JSON.stringify(c))}return(o=l.response)!=null&&o.status?s(`Server error (${l.response.status})`):s("Network error - please check your connection")}return s(l instanceof Error?l.message:"Failed to update parent")}}),Ux=Pt("parents/deleteParent",async(e,{rejectWithValue:t})=>{var s,n,a,i;try{console.log(`Deleting parent ${e}`),await Mt.delete(`${Tt.PARENTS}${e}/`),console.log("Parent deleted successfully")}catch(o){if(console.error("Error deleting parent:",o),o instanceof kr){if(console.error("Axios error response:",o.response),console.error("Axios error response data:",(s=o.response)==null?void 0:s.data),console.error("Axios error status:",(n=o.response)==null?void 0:n.status),(a=o.response)!=null&&a.data){const l=o.response.data;return typeof l=="object"&&l.message?t(l.message):t(JSON.stringify(l))}return(i=o.response)!=null&&i.status?t(`Server error (${o.response.status})`):t("Network error - please check your connection")}return t(o instanceof Error?o.message:"Failed to delete parent")}}),pz=Js({name:"parents",initialState:mz,reducers:{clearParentsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Bx.pending,t=>{t.loading=!0,t.error=null}).addCase(Bx.fulfilled,(t,s)=>{t.loading=!1,t.parents.push(s.payload)}).addCase(Bx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to register parent"}).addCase(ua.pending,t=>{t.loading=!0,t.error=null}).addCase(ua.fulfilled,(t,s)=>{console.log("Setting parents in state:",s.payload),t.loading=!1,t.parents=s.payload}).addCase(ua.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch parents"}).addCase(Mb.pending,t=>{t.loading=!0,t.error=null}).addCase(Mb.fulfilled,(t,s)=>{t.loading=!1;const n=t.parents.findIndex(a=>a.id===s.payload.id);n!==-1?t.parents[n]=s.payload:t.parents.push(s.payload)}).addCase(Mb.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(zx.pending,t=>{t.loading=!0,t.error=null}).addCase(zx.fulfilled,(t,s)=>{t.loading=!1;const n=t.parents.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.parents[n]=s.payload)}).addCase(zx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Ux.pending,t=>{t.loading=!0,t.error=null}).addCase(Ux.fulfilled,(t,s)=>{t.loading=!1,t.parents=t.parents.filter(n=>n.id!==s.meta.arg)}).addCase(Ux.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),gz=pz.reducer,xz={drivers:[],loading:!1,error:null},qx=Pt("drivers/addDriver",async(e,{rejectWithValue:t})=>{var s;try{console.log("Sending driver data:",e);const n=await Mt.post(Tt.DRIVERS,e);return console.log("Add driver response:",n.data),n.data.data}catch(n){return console.error("Add driver error:",n),t(JSON.stringify(((s=n.response)==null?void 0:s.data)||{message:"Failed to add driver"}))}}),Ln=Pt("drivers/fetchDrivers",async(e,{rejectWithValue:t})=>{var s,n;try{const a=await Mt.get(Tt.DRIVERS);if(console.log("API Response:",a.data),console.log("Response data type:",typeof a.data),console.log("Is array:",Array.isArray(a.data)),Array.isArray(a.data))return console.log("Returning array directly:",a.data),a.data;if(a.data.data&&Array.isArray(a.data.data))return console.log("Returning data.data array:",a.data.data),a.data.data;throw console.error("Invalid response format:",a.data),new Error("Invalid response format")}catch(a){return console.error("Error fetching drivers:",a),t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch drivers")}}),Vx=Pt("drivers/deleteDriver",async(e,{rejectWithValue:t})=>{var s,n;try{return console.log(`Deleting driver ${e}`),await Mt.delete(`${Tt.DRIVERS}${e}/`),console.log("Driver deleted successfully"),e}catch(a){return console.error("Error deleting driver:",a),a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete driver"):t("Failed to delete driver")}}),Hx=Pt("drivers/updateDriver",async({id:e,data:t},{rejectWithValue:s})=>{var n;try{console.log(`Updating driver ${e} with data:`,t);const a=await Mt.put(`${Tt.DRIVERS}${e}/`,t);return console.log("Update driver response:",a.data),a.data.data||a.data}catch(a){return console.error("Error updating driver:",a),s(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update driver"}))}}),vz=Js({name:"drivers",initialState:xz,reducers:{clearDriversError:e=>{e.error=null}},extraReducers:e=>{e.addCase(qx.pending,t=>{t.loading=!0,t.error=null}).addCase(qx.fulfilled,(t,s)=>{t.loading=!1,t.drivers.push(s.payload)}).addCase(qx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to add driver"}).addCase(Ln.pending,t=>{t.loading=!0,t.error=null}).addCase(Ln.fulfilled,(t,s)=>{t.loading=!1,t.drivers=s.payload}).addCase(Ln.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch drivers"}).addCase(Vx.pending,t=>{t.loading=!0,t.error=null}).addCase(Vx.fulfilled,(t,s)=>{t.loading=!1,t.drivers=t.drivers.filter(n=>n.id!==s.payload)}).addCase(Vx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to delete driver"}).addCase(Hx.pending,t=>{t.loading=!0,t.error=null}).addCase(Hx.fulfilled,(t,s)=>{t.loading=!1;const n=t.drivers.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.drivers[n]=s.payload)}).addCase(Hx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to update driver"})}}),yz=vz.reducer,bz={vehicles:[],loading:!1,error:null},Sh=Pt("vehicles/fetchVehicles",async(e,{rejectWithValue:t})=>{var s,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Tt.VEHICLES;a&&(i+=`?school=${a}`),console.log("Fetching vehicles from URL:",i);const o=await Mt.get(i);if(console.log("Vehicles response:",o.data),Array.isArray(o.data)){console.log("Vehicles data is an array with",o.data.length,"items");const l=o.data.filter(c=>!c||typeof c!="object"?(console.warn("Invalid vehicle data:",c),!1):!0);return console.log("Validated vehicles:",l),l}else return o.data&&o.data.data&&Array.isArray(o.data.data)?(console.log("Vehicles data is nested in data.data"),o.data.data):(console.log("Unexpected vehicles response structure:",o.data),[])}catch(a){return console.error("Error fetching vehicles:",a),t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch vehicles")}}),Wx=Pt("vehicles/addVehicle",async(e,{rejectWithValue:t})=>{var s;try{return(await Mt.post(Tt.VEHICLES,e)).data}catch(n){return t(JSON.stringify(((s=n.response)==null?void 0:s.data)||{message:"Failed to add vehicle"}))}}),Gx=Pt("vehicles/deleteVehicle",async(e,{rejectWithValue:t,getState:s})=>{var n,a,i,o;try{console.log(`Deleting vehicle ${e}`),console.log(`API URL: ${Tt.VEHICLES}${e}/`);const c=s().auth.token;console.log("Auth token present:",!!c);const d=await Mt.delete(`${Tt.VEHICLES}${e}/`);return console.log("Delete response:",d),console.log("Vehicle deleted successfully"),e}catch(l){return console.error("Error deleting vehicle:",l),console.error("Error details:",{message:l instanceof Error?l.message:"Unknown error",response:l instanceof kr?l.response:"Not an Axios error",status:l instanceof kr?(n=l.response)==null?void 0:n.status:"No status",data:l instanceof kr?(a=l.response)==null?void 0:a.data:"No data"}),l instanceof kr?t(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to delete vehicle"):t("Failed to delete vehicle")}}),jz=Js({name:"vehicles",initialState:bz,reducers:{clearVehiclesError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Sh.pending,t=>{t.loading=!0,t.error=null}).addCase(Sh.fulfilled,(t,s)=>{t.loading=!1,t.vehicles=s.payload}).addCase(Sh.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch vehicles"}).addCase(Wx.pending,t=>{t.loading=!0,t.error=null}).addCase(Wx.fulfilled,(t,s)=>{t.loading=!1,t.vehicles.push(s.payload)}).addCase(Wx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to add vehicle"}).addCase(Gx.pending,t=>{t.loading=!0,t.error=null}).addCase(Gx.fulfilled,(t,s)=>{t.loading=!1,t.vehicles=t.vehicles.filter(n=>n.id!==s.payload)}).addCase(Gx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to delete vehicle"})}}),wz=jz.reducer,Nz={routes:[],loading:!1,error:null},Kx=Pt("routes/addRoute",async(e,{rejectWithValue:t})=>{var s;try{const n=e.school;return(await Mt.post(`${Tt.ROUTES}${n}/routes/`,e)).data.data}catch(n){return t(JSON.stringify(((s=n.response)==null?void 0:s.data)||{message:"Failed to add route"}))}}),Co=Pt("routes/fetchRoutes",async(e,{rejectWithValue:t})=>{var s,n;try{const a=typeof e=="object"?e.schoolId:void 0;if(!a)throw new Error("School ID is required");const i=`${Tt.ROUTES}${a}/routes/`,o=await Mt.get(i);if(Array.isArray(o.data))return o.data;if(o.data.data&&Array.isArray(o.data.data))return o.data.data;throw new Error("Invalid response format")}catch(a){return t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch routes")}}),Yx=Pt("routes/deleteRoute",async(e,{rejectWithValue:t})=>{var s,n;try{return console.log(`Deleting route ${e}`),await Mt.delete(`/api/routes/${e}/`),console.log("Route deleted successfully"),e}catch(a){return console.error("Error deleting route:",a),a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete route"):t("Failed to delete route")}}),Jx=Pt("routes/updateRoute",async({id:e,routeData:t},{rejectWithValue:s})=>{var n;try{const a=t.school;return(await Mt.put(`${Tt.ROUTES}${a}/routes/${e}/`,t)).data.data}catch(a){return s(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update route"}))}}),Zx=Pt("routes/addRouteStop",async(e,{rejectWithValue:t})=>{var s;try{return(await Mt.post(`/api/routes/${e.route}/stops/`,e)).data}catch(n){return t(JSON.stringify(((s=n.response)==null?void 0:s.data)||{message:"Failed to add route stop"}))}}),_h=Pt("routes/fetchRouteStops",async(e,{rejectWithValue:t})=>{var s,n;try{return(await Mt.get(`/routes/${e}/stops/`)).data}catch(a){return t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch route stops")}}),Sz=Js({name:"routes",initialState:Nz,reducers:{clearRoutesError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Kx.pending,t=>{t.loading=!0,t.error=null}).addCase(Kx.fulfilled,(t,s)=>{t.loading=!1,t.routes.push(s.payload)}).addCase(Kx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to add route"}).addCase(Co.pending,t=>{t.loading=!0,t.error=null}).addCase(Co.fulfilled,(t,s)=>{t.loading=!1,t.routes=s.payload}).addCase(Co.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch routes"}).addCase(Yx.pending,t=>{t.loading=!0,t.error=null}).addCase(Yx.fulfilled,(t,s)=>{t.loading=!1,t.routes=t.routes.filter(n=>n.id!==s.payload)}).addCase(Yx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to delete route"}).addCase(Jx.pending,t=>{t.loading=!0,t.error=null}).addCase(Jx.fulfilled,(t,s)=>{t.loading=!1;const n=t.routes.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.routes[n]=s.payload)}).addCase(Jx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to update route"}).addCase(Zx.pending,t=>{t.loading=!0,t.error=null}).addCase(Zx.fulfilled,(t,s)=>{t.loading=!1}).addCase(Zx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to add route stop"}).addCase(_h.pending,t=>{t.loading=!0,t.error=null}).addCase(_h.fulfilled,(t,s)=>{t.loading=!1}).addCase(_h.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch route stops"})}}),_z=Sz.reducer,Cz={assignments:[],loading:!1,error:null},Xx=Pt("routeAssignments/createAssignment",async(e,{rejectWithValue:t})=>{var s;try{return(await Mt.post(Tt.ROUTE_ASSIGNMENTS,e)).data.data}catch(n){return t(JSON.stringify(((s=n.response)==null?void 0:s.data)||{message:"Failed to create route assignment"}))}}),Hm=Pt("routeAssignments/fetchAssignments",async(e,{rejectWithValue:t})=>{var s,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Tt.ROUTE_ASSIGNMENTS;a&&(i+=`?school=${a}`);const o=await Mt.get(i);if(Array.isArray(o.data))return o.data;if(o.data.data&&Array.isArray(o.data.data))return o.data.data;throw new Error("Invalid response format")}catch(a){return t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch route assignments")}}),$b=Pt("routeAssignments/updateAssignment",async({id:e,data:t},{rejectWithValue:s})=>{var n;try{return(await Mt.put(`${Tt.ROUTE_ASSIGNMENTS}${e}/`,t)).data.data}catch(a){return s(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update route assignment"}))}}),Bb=Pt("routeAssignments/deleteAssignment",async(e,{rejectWithValue:t})=>{var s;try{return await Mt.delete(`${Tt.ROUTE_ASSIGNMENTS}${e}/`),e}catch(n){return t(JSON.stringify(((s=n.response)==null?void 0:s.data)||{message:"Failed to delete route assignment"}))}}),kz=Js({name:"routeAssignments",initialState:Cz,reducers:{clearRouteAssignmentsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Xx.pending,t=>{t.loading=!0,t.error=null}).addCase(Xx.fulfilled,(t,s)=>{t.loading=!1,t.assignments.push(s.payload)}).addCase(Xx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to create route assignment"}).addCase(Hm.pending,t=>{t.loading=!0,t.error=null}).addCase(Hm.fulfilled,(t,s)=>{t.loading=!1,t.assignments=s.payload}).addCase(Hm.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch route assignments"}).addCase($b.pending,t=>{t.loading=!0,t.error=null}).addCase($b.fulfilled,(t,s)=>{t.loading=!1;const n=t.assignments.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.assignments[n]=s.payload)}).addCase($b.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to update route assignment"}).addCase(Bb.pending,t=>{t.loading=!0,t.error=null}).addCase(Bb.fulfilled,(t,s)=>{t.loading=!1,t.assignments=t.assignments.filter(n=>n.id!==s.payload)}).addCase(Bb.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to delete route assignment"})}}),Az=kz.reducer,Pz={staff:[],loading:!1,error:null},Ch=Pt("staff/fetchStaff",async(e,{rejectWithValue:t})=>{var s,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Tt.STAFF;return a&&(i+=`?school=${a}`),(await Mt.get(i)).data}catch(a){return a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch staff"):t("Failed to fetch staff")}}),kh=Pt("staff/addStaff",async(e,{rejectWithValue:t})=>{var s;try{return(await Mt.post(Tt.STAFF,e)).data}catch(n){return n instanceof kr?t(JSON.stringify(((s=n.response)==null?void 0:s.data)||{message:"Failed to add staff"})):t("Failed to add staff")}}),zb=Pt("staff/updateStaff",async({id:e,staffData:t},{rejectWithValue:s})=>{var n,a;try{return(await Mt.patch(`${Tt.STAFF}${e}/`,t)).data}catch(i){return i instanceof kr?s(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update staff"):s("Failed to update staff")}}),Ub=Pt("staff/deleteStaff",async(e,{rejectWithValue:t})=>{var s,n;try{return await Mt.delete(`${Tt.STAFF}${e}/`),e}catch(a){return a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete staff"):t("Failed to delete staff")}}),Ez=Js({name:"staff",initialState:Pz,reducers:{clearStaffError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Ch.pending,t=>{t.loading=!0,t.error=null}).addCase(Ch.fulfilled,(t,s)=>{t.loading=!1,t.staff=s.payload}).addCase(Ch.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch staff"}).addCase(kh.pending,t=>{t.loading=!0,t.error=null}).addCase(kh.fulfilled,(t,s)=>{t.loading=!1,t.staff.push(s.payload)}).addCase(kh.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to add staff"}).addCase(zb.pending,t=>{t.loading=!0,t.error=null}).addCase(zb.fulfilled,(t,s)=>{t.loading=!1;const n=t.staff.findIndex(a=>a.employee_id===s.payload.employee_id);n!==-1&&(t.staff[n]=s.payload)}).addCase(zb.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to update staff"}).addCase(Ub.pending,t=>{t.loading=!0,t.error=null}).addCase(Ub.fulfilled,(t,s)=>{t.loading=!1,t.staff=t.staff.filter(n=>n.employee_id!==s.payload)}).addCase(Ub.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to delete staff"})}}),Lz=Ez.reducer,Rz={name:"school_admin",description:"Full administrative access for school management",school:1,permissions:["manage_staff","manage_students","manage_transport","manage_security","view_reports","manage_finance","manage_attendance","manage_timetable","manage_exams","manage_parents","manage_vehicles","manage_routes","manage_trips","manage_grades","manage_settings"],is_system_role:!1},Tz={name:"teacher",description:"Teacher access for classroom management",school:1,permissions:["manage_students","view_reports","manage_attendance","manage_timetable","manage_exams","manage_grades"],is_system_role:!1},Iz={name:"driver",description:"Driver access for transport management",school:1,permissions:["manage_transport","manage_trips","view_reports"],is_system_role:!1},Fz={name:"security",description:"Security personnel access",school:1,permissions:["manage_security","view_reports"],is_system_role:!1},Dz=e=>[{...Rz,school:e},{...Tz,school:e},{...Iz,school:e},{...Fz,school:e}],Oz={roles:[],selectedRole:null,loading:!1,error:null},qd=Pt("roles/fetchRoles",async(e,{rejectWithValue:t})=>{var s,n;try{console.log("Fetching roles for school:",e);const a=await Mt.get(`${Tt.SCHOOLS_ROLES}?school=${e}`);return console.log("Roles response:",a.data),a.data.data||a.data}catch(a){return console.error("Error fetching roles:",a),a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch roles"):t("Failed to fetch roles")}}),qb=Pt("roles/fetchRoleById",async({schoolId:e,roleId:t},{rejectWithValue:s})=>{var n,a;try{console.log(`Fetching role ${t} for school ${e}`);const i=await Mt.get(`${Tt.SCHOOLS_ROLES}/${t}/`);return console.log("Role response:",i.data),i.data.data||i.data}catch(i){return console.error("Error fetching role:",i),i instanceof kr?s(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch role"):s("Failed to fetch role")}}),Ah=Pt("roles/createRole",async(e,{rejectWithValue:t})=>{var s,n;try{console.log("Creating role with data:",e);const a=await Mt.post(`${Tt.SCHOOLS_ROLES}/`,e);return console.log("Create role response:",a.data),a.data.data||a.data}catch(a){return console.error("Error creating role:",a),a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to create role"):t("Failed to create role")}}),Vb=Pt("roles/updateRole",async({id:e,data:t},{rejectWithValue:s})=>{var n,a;try{console.log(`Updating role ${e} with data:`,t);const i=await Mt.put(`${Tt.SCHOOLS_ROLES}/${e}/`,t);return console.log("Update role response:",i.data),i.data.data||i.data}catch(i){return console.error("Error updating role:",i),i instanceof kr?s(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update role"):s("Failed to update role")}}),Hb=Pt("roles/deleteRole",async(e,{rejectWithValue:t})=>{var s,n;try{console.log(`Deleting role ${e}`),await Mt.delete(`${Tt.SCHOOLS_ROLES}/${e}/`),console.log("Role deleted successfully")}catch(a){return console.error("Error deleting role:",a),a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete role"):t("Failed to delete role")}}),Ph=Pt("roles/createDefaultRoles",async(e,{rejectWithValue:t})=>{var s,n;try{console.log("Creating default roles for school:",e);const a=Dz(e),i=[];for(const o of a)try{const l=await Mt.post(`${Tt.SCHOOLS_ROLES}/`,o);i.push(l.data.data||l.data)}catch(l){console.warn(`Failed to create role ${o.name}:`,l)}return console.log("Default roles created:",i),i}catch(a){return console.error("Error creating default roles:",a),a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to create default roles"):t("Failed to create default roles")}}),Mz=Js({name:"roles",initialState:Oz,reducers:{clearSelectedRole:e=>{e.selectedRole=null}},extraReducers:e=>{e.addCase(qd.pending,t=>{t.loading=!0,t.error=null}).addCase(qd.fulfilled,(t,s)=>{t.loading=!1,t.roles=s.payload}).addCase(qd.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(qb.pending,t=>{t.loading=!0,t.error=null}).addCase(qb.fulfilled,(t,s)=>{t.loading=!1,t.selectedRole=s.payload}).addCase(qb.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Ah.pending,t=>{t.loading=!0,t.error=null}).addCase(Ah.fulfilled,(t,s)=>{t.loading=!1,t.roles.push(s.payload)}).addCase(Ah.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Vb.pending,t=>{t.loading=!0,t.error=null}).addCase(Vb.fulfilled,(t,s)=>{var a;t.loading=!1;const n=t.roles.findIndex(i=>i.id===s.payload.id);n!==-1&&(t.roles[n]=s.payload),((a=t.selectedRole)==null?void 0:a.id)===s.payload.id&&(t.selectedRole=s.payload)}).addCase(Vb.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Hb.pending,t=>{t.loading=!0,t.error=null}).addCase(Hb.fulfilled,(t,s)=>{var n;t.loading=!1,t.roles=t.roles.filter(a=>a.id!==s.meta.arg),((n=t.selectedRole)==null?void 0:n.id)===s.meta.arg&&(t.selectedRole=null)}).addCase(Hb.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Ph.pending,t=>{t.loading=!0,t.error=null}).addCase(Ph.fulfilled,(t,s)=>{t.loading=!1,t.roles.push(...s.payload)}).addCase(Ph.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),$z=Mz.reducer,Bz={students:[],loading:!1,error:null},Qx=Pt("students/createStudent",async(e,{rejectWithValue:t})=>{var s,n;try{const a=await Mt.post(Tt.STUDENTS,e);console.log("Create student API response:",a.data);const i=((s=a.data)==null?void 0:s.data)||a.data;return!i||typeof i!="object"?(console.error("Invalid student data received:",i),t("Invalid student data received from server")):!i.first_name||!i.last_name?(console.error("Student data missing required fields:",i),t("Student data missing required fields")):i}catch(a){return a instanceof kr?t(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to create student"})):t("Failed to create student")}}),Xa=Pt("students/fetchStudents",async(e,{rejectWithValue:t})=>{var s,n,a,i,o,l;try{const c=typeof e=="object"?e.schoolId:void 0;let d=Tt.STUDENTS;c&&(d+=`?school=${c}`),console.log("Fetching students from:",d);const u=await Mt.get(d);console.log("Students API response:",u.data),console.log("Students data structure:",{hasData:!!u.data,hasDataData:!!((s=u.data)!=null&&s.data),dataType:typeof u.data,dataDataType:typeof((n=u.data)==null?void 0:n.data),isArray:Array.isArray(u.data),dataIsArray:Array.isArray((a=u.data)==null?void 0:a.data)});const h=((i=u.data)==null?void 0:i.data)||u.data;return console.log("Final students data to return:",h),console.log("Students data type:",typeof h),console.log("Students data is array:",Array.isArray(h)),Array.isArray(h)?h:(console.warn("Students data is not an array, returning empty array"),[])}catch(c){return console.error("Error fetching students:",c),c instanceof kr?t(((l=(o=c.response)==null?void 0:o.data)==null?void 0:l.message)||"Failed to fetch students"):t("Failed to fetch students")}}),Wm=Pt("students/updateStudent",async({id:e,data:t},{rejectWithValue:s})=>{var n,a;try{console.log("Updating student with ID:",e,"Data:",t);const i=await Mt.put(`${Tt.STUDENTS}${e}/`,t);console.log("Update student API response:",i.data);const o=((n=i.data)==null?void 0:n.data)||i.data;return!o||typeof o!="object"?(console.error("Invalid student data received:",o),s("Invalid student data received from server")):o}catch(i){return console.error("Error updating student:",i),i instanceof kr?s(JSON.stringify(((a=i.response)==null?void 0:a.data)||{message:"Failed to update student"})):s("Failed to update student")}}),Gm=Pt("students/deleteStudent",async(e,{rejectWithValue:t})=>{var s;try{return await Mt.delete(`${Tt.STUDENTS}${e}/`),e}catch(n){return n instanceof kr?t(JSON.stringify(((s=n.response)==null?void 0:s.data)||{message:"Failed to delete student"})):t("Failed to delete student")}}),zz=Js({name:"students",initialState:Bz,reducers:{clearStudentsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Qx.pending,t=>{t.loading=!0,t.error=null}).addCase(Qx.fulfilled,(t,s)=>{console.log("createStudent.fulfilled - payload:",s.payload),console.log("createStudent.fulfilled - previous state.students:",t.students),t.loading=!1,s.payload&&typeof s.payload=="object"&&s.payload.first_name?(t.students.push(s.payload),console.log("createStudent.fulfilled - state.students after push:",t.students),console.log("createStudent.fulfilled - state.students length:",t.students.length)):(console.error("Invalid student payload received:",s.payload),t.error="Invalid student data received")}).addCase(Qx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to create student"}).addCase(Xa.pending,t=>{t.loading=!0,t.error=null}).addCase(Xa.fulfilled,(t,s)=>{console.log("fetchStudents.fulfilled - payload:",s.payload),console.log("fetchStudents.fulfilled - payload type:",typeof s.payload),console.log("fetchStudents.fulfilled - is array:",Array.isArray(s.payload)),console.log("fetchStudents.fulfilled - previous state.students:",t.students),t.loading=!1,t.students=Array.isArray(s.payload)?s.payload:[],console.log("fetchStudents.fulfilled - state.students after update:",t.students),console.log("fetchStudents.fulfilled - state.students length:",t.students.length)}).addCase(Xa.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch students"}).addCase(Wm.pending,t=>{t.loading=!0,t.error=null}).addCase(Wm.fulfilled,(t,s)=>{console.log("updateStudent.fulfilled - payload:",s.payload),console.log("updateStudent.fulfilled - previous state.students:",t.students),t.loading=!1;const n=t.students.findIndex(a=>a.id===s.payload.id);console.log("updateStudent.fulfilled - found index:",n),n!==-1?(t.students[n]=s.payload,console.log("updateStudent.fulfilled - updated student at index:",n),console.log("updateStudent.fulfilled - state.students after update:",t.students)):(console.warn("updateStudent.fulfilled - student not found in state, adding to end"),t.students.push(s.payload))}).addCase(Wm.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to update student"}).addCase(Gm.pending,t=>{t.loading=!0,t.error=null}).addCase(Gm.fulfilled,(t,s)=>{t.loading=!1,t.students=t.students.filter(n=>n.id!==s.payload)}).addCase(Gm.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to delete student"})}}),Uz=zz.reducer,a5=void 0,qz={profile:null,loading:!1,error:null},Km=Pt("profile/fetchProfile",async(e,{rejectWithValue:t,getState:s})=>{var n,a;try{const o=s().auth.token;return(await js.get(`${a5}/api/user-profile/`,{headers:{Authorization:`Bearer ${o}`}})).data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch profile")}}),e0=Pt("profile/updateProfile",async(e,{rejectWithValue:t,getState:s})=>{var n,a;try{const o=s().auth.token;return(await js.patch(`${a5}/api/user-profile/`,e,{headers:{Authorization:`Bearer ${o}`}})).data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update profile")}}),AP=Pt("profile/logout",async(e,{rejectWithValue:t,getState:s})=>{var n,a;try{const o=s().auth.token;return await js.post(`${a5}/api/logout/`,{},{headers:{Authorization:`Bearer ${o}`}}),null}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to logout")}}),Vz=Js({name:"profile",initialState:qz,reducers:{clearProfile:e=>{e.profile=null,e.error=null}},extraReducers:e=>{e.addCase(Km.pending,t=>{t.loading=!0,t.error=null}).addCase(Km.fulfilled,(t,s)=>{t.loading=!1,t.profile=s.payload}).addCase(Km.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(e0.pending,t=>{t.loading=!0,t.error=null}).addCase(e0.fulfilled,(t,s)=>{t.loading=!1,t.profile=s.payload}).addCase(e0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(AP.fulfilled,t=>{t.profile=null,t.loading=!1,t.error=null})}}),Hz=Vz.reducer,Y4={stats:{totalStudents:0,totalParents:0,totalStaff:0,totalVehicles:0,totalRoutes:0,activeRoutes:0},loading:!1,error:null,lastUpdated:null},Ym=Pt("overview/fetchOverviewData",async({schoolId:e},{rejectWithValue:t,dispatch:s})=>{try{const[n,a,i,o,l]=await Promise.allSettled([s(Xa({schoolId:e})).unwrap(),s(ua({schoolId:e})).unwrap(),s(Ch({schoolId:e})).unwrap(),s(Sh({schoolId:e})).unwrap(),s(Co({schoolId:e})).unwrap()]),c=n.status==="fulfilled"?n.value:[],d=a.status==="fulfilled"?a.value:[],u=i.status==="fulfilled"?i.value:[],h=o.status==="fulfilled"?o.value:[],p=l.status==="fulfilled"?l.value:[];return{totalStudents:c.length,totalParents:d.length,totalStaff:u.length,totalVehicles:h.length,totalRoutes:p.length,activeRoutes:p.filter(y=>y.is_active).length}}catch{return t("Failed to fetch overview data")}}),Wz=Js({name:"overview",initialState:Y4,reducers:{clearOverviewError:e=>{e.error=null},resetOverview:e=>{e.stats=Y4.stats,e.lastUpdated=null}},extraReducers:e=>{e.addCase(Ym.pending,t=>{t.loading=!0,t.error=null}).addCase(Ym.fulfilled,(t,s)=>{t.loading=!1,t.stats=s.payload,t.lastUpdated=new Date().toISOString()}).addCase(Ym.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch overview data"})}}),Gz=Wz.reducer,Kz={trips:[],loading:!1,error:null},Vd=Pt("trips/fetchTrips",async(e,{rejectWithValue:t})=>{var s,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Tt.TRIPS;a&&(i+=`?school=${a}`);const o=await Mt.get(i);console.log("Raw trips response:",o.data);let l;o.data&&o.data.results?l=o.data.results:o.data&&Array.isArray(o.data)?l=o.data:o.data&&o.data.data&&Array.isArray(o.data.data)?l=o.data.data:l=[];const c=Array.isArray(l)?l.map(d=>{var u,h,p;return{...d,route_name:d.route_name||((u=d.route_details)==null?void 0:u.name)||`Route ${d.route}`,vehicle_registration:d.vehicle_number||((h=d.vehicle_details)==null?void 0:h.license_plate)||`Vehicle ${d.vehicle}`,driver_name:d.driver_name||((p=d.driver_details)==null?void 0:p.full_name)||`Driver ${d.driver}`}}):[];return console.log("Transformed trips data:",c),c}catch(a){return a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch trips"):t("Failed to fetch trips")}}),t0=Pt("trips/createTrip",async(e,{rejectWithValue:t})=>{var s,n,a,i,o,l,c,d,u,h,p,f;try{console.log("Creating trip with data:",e);try{const k=localStorage.getItem("persist:auth");if(k){const R=JSON.parse(k);let E=JSON.parse(R.token||"null");if(typeof E=="string")try{E=JSON.parse(E)}catch{}console.log("Auth token available:",!!E),E&&console.log("Token preview:",E.substring(0,20)+"...")}else console.log("No persist:auth data found in localStorage");const O=localStorage.getItem("token");O&&console.log("Direct token found:",O.substring(0,20)+"...")}catch(k){console.warn("Error checking auth token:",k)}const y=localStorage.getItem("schoolId"),g={...e,school:e.school||parseInt(y||"0")};console.log("Trip data with school:",g);let j=null;try{const k=localStorage.getItem("persist:auth");if(k){const O=JSON.parse(k);if(j=JSON.parse(O.token||"null"),typeof j=="string")try{j=JSON.parse(j)}catch{}}}catch(k){console.warn("Error getting token for manual setting:",k)}const v={headers:j?{Authorization:`Bearer ${j}`}:{}};console.log("Request config:",v);const w=await Mt.post(Tt.TRIPS,g,v);console.log("Trip creation response:",w.data);const N=((s=w.data)==null?void 0:s.data)||w.data,C={...N,route_name:((n=N.route_details)==null?void 0:n.name)||`Route ${N.route}`,vehicle_registration:((a=N.vehicle_details)==null?void 0:a.license_plate)||`Vehicle ${N.vehicle}`,driver_name:((i=N.driver_details)==null?void 0:i.full_name)||`Driver ${N.driver}`};return console.log("Transformed trip:",C),C}catch(y){return console.error("Trip creation error:",y),y instanceof kr?(console.error("Axios error details:",{status:(o=y.response)==null?void 0:o.status,statusText:(l=y.response)==null?void 0:l.statusText,data:(c=y.response)==null?void 0:c.data,headers:(d=y.response)==null?void 0:d.headers}),t(((h=(u=y.response)==null?void 0:u.data)==null?void 0:h.message)||((f=(p=y.response)==null?void 0:p.data)==null?void 0:f.detail)||"Failed to create trip")):t("Failed to create trip")}}),r0=Pt("trips/updateTrip",async({id:e,tripData:t},{rejectWithValue:s})=>{var n,a,i,o,l,c;try{const d=await Mt.patch(`${Tt.TRIPS}${e}/`,t),u=((n=d.data)==null?void 0:n.data)||d.data;return{...u,route_name:((a=u.route_details)==null?void 0:a.name)||`Route ${u.route}`,vehicle_registration:((i=u.vehicle_details)==null?void 0:i.license_plate)||`Vehicle ${u.vehicle}`,driver_name:((o=u.driver_details)==null?void 0:o.full_name)||`Driver ${u.driver}`}}catch(d){return d instanceof kr?s(((c=(l=d.response)==null?void 0:l.data)==null?void 0:c.message)||"Failed to update trip"):s("Failed to update trip")}}),s0=Pt("trips/deleteTrip",async(e,{rejectWithValue:t})=>{var s,n;try{return console.log(`Deleting trip ${e}`),await Mt.delete(`${Tt.TRIPS}${e}/`),console.log("Trip deleted successfully"),e}catch(a){return console.error("Error deleting trip:",a),a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete trip"):t("Failed to delete trip")}}),Yz=Js({name:"trips",initialState:Kz,reducers:{clearTripsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Vd.pending,t=>{t.loading=!0,t.error=null}).addCase(Vd.fulfilled,(t,s)=>{t.loading=!1,t.trips=Array.isArray(s.payload)?s.payload:[]}).addCase(Vd.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch trips"}).addCase(t0.pending,t=>{t.loading=!0,t.error=null}).addCase(t0.fulfilled,(t,s)=>{t.loading=!1,t.trips.push(s.payload)}).addCase(t0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to create trip"}).addCase(r0.pending,t=>{t.loading=!0,t.error=null}).addCase(r0.fulfilled,(t,s)=>{t.loading=!1;const n=t.trips.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.trips[n]=s.payload)}).addCase(r0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to update trip"}).addCase(s0.pending,t=>{t.loading=!0,t.error=null}).addCase(s0.fulfilled,(t,s)=>{t.loading=!1,t.trips=t.trips.filter(n=>n.id!==s.payload)}).addCase(s0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to delete trip"})}}),Jz=Yz.reducer,Zz={grades:[],loading:!1,error:null},n0=Pt("grades/createGrade",async(e,{rejectWithValue:t})=>{var s,n;try{return(await Mt.post(Tt.GRADES,e)).data.data}catch(a){return a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to create grade"):t("Failed to create grade")}}),ko=Pt("grades/fetchGrades",async(e,{rejectWithValue:t})=>{var s,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Tt.GRADES;a&&(i+=`?school=${a}`),console.log("Fetching grades from:",i);const o=await Mt.get(i);console.log("Grades API response:",o.data);let l;return o.data&&typeof o.data=="object"?Array.isArray(o.data)?l=o.data:o.data.data&&Array.isArray(o.data.data)?l=o.data.data:o.data.results&&Array.isArray(o.data.results)?l=o.data.results:l=[]:l=[],console.log("Final grades data to return:",l),console.log("Grades data type:",typeof l),console.log("Grades data is array:",Array.isArray(l)),l}catch(a){return console.error("Error fetching grades:",a),a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch grades"):t("Failed to fetch grades")}}),a0=Pt("grades/updateGrade",async({id:e,data:t},{rejectWithValue:s})=>{var n,a;try{return(await Mt.put(`${Tt.GRADES}${e}/`,t)).data.data}catch(i){return i instanceof kr?s(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update grade"):s("Failed to update grade")}}),i0=Pt("grades/deleteGrade",async(e,{rejectWithValue:t})=>{var s,n;try{return await Mt.delete(`${Tt.GRADES}${e}/`),e}catch(a){return a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete grade"):t("Failed to delete grade")}}),Xz=Js({name:"grades",initialState:Zz,reducers:{clearGradesError:e=>{e.error=null}},extraReducers:e=>{e.addCase(n0.pending,t=>{t.loading=!0,t.error=null}).addCase(n0.fulfilled,(t,s)=>{t.loading=!1,t.grades.push(s.payload)}).addCase(n0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to create grade"}).addCase(ko.pending,t=>{t.loading=!0,t.error=null}).addCase(ko.fulfilled,(t,s)=>{console.log("fetchGrades.fulfilled - payload:",s.payload),console.log("fetchGrades.fulfilled - payload type:",typeof s.payload),console.log("fetchGrades.fulfilled - is array:",Array.isArray(s.payload)),t.loading=!1,t.grades=Array.isArray(s.payload)?s.payload:[],console.log("fetchGrades.fulfilled - state.grades after update:",t.grades)}).addCase(ko.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch grades"}).addCase(a0.pending,t=>{t.loading=!0,t.error=null}).addCase(a0.fulfilled,(t,s)=>{t.loading=!1;const n=t.grades.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.grades[n]=s.payload)}).addCase(a0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to update grade"}).addCase(i0.pending,t=>{t.loading=!0,t.error=null}).addCase(i0.fulfilled,(t,s)=>{t.loading=!1,t.grades=t.grades.filter(n=>n.id!==s.payload)}).addCase(i0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to delete grade"})}}),Qz=Xz.reducer,Bj={preferences:{showAnalytics:!0,showRecentActivity:!0,showNotificationsPanel:!0,allowDataExport:!0,autoBackup:!0,theme:"light",language:"en"},loading:!1,error:null},Jm=Pt("preferences/fetchUserPreferences",async(e,{rejectWithValue:t})=>{try{const s=localStorage.getItem("userPreferences");if(s)try{return JSON.parse(s)}catch{}return Bj.preferences}catch{return t("Failed to fetch preferences")}}),o0=Pt("preferences/updateUserPreferences",async(e,{rejectWithValue:t})=>{try{const n={...JSON.parse(localStorage.getItem("userPreferences")||"{}"),...e};return localStorage.setItem("userPreferences",JSON.stringify(n)),e}catch{return t("Failed to update preferences")}}),eU=Js({name:"preferences",initialState:Bj,reducers:{setPreference:(e,t)=>{const{key:s,value:n}=t.payload;e.preferences[s]=n},resetPreferences:e=>{e.preferences=Bj.preferences}},extraReducers:e=>{e.addCase(Jm.pending,t=>{t.loading=!0,t.error=null}).addCase(Jm.fulfilled,(t,s)=>{t.loading=!1,t.preferences={...t.preferences,...s.payload}}).addCase(Jm.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(o0.pending,t=>{t.loading=!0,t.error=null}).addCase(o0.fulfilled,(t,s)=>{t.loading=!1,t.preferences={...t.preferences,...s.payload}}).addCase(o0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),tU=eU.reducer,rU={notifications:[],loading:!1,error:null},l0=Pt("notifications/createNotification",async(e,{rejectWithValue:t})=>{var s,n;try{console.log("Creating notification with data:",e),console.log("Auth token available:",!!localStorage.getItem("token"));let a=localStorage.getItem("token");if(!a){const d=localStorage.getItem("persist:auth");if(d)try{const u=JSON.parse(d);a=JSON.parse(u.user||"{}").token,console.log("Token from persist:auth:",!!a)}catch(u){console.log("Error parsing persist:auth:",u)}}a?(console.log("Token preview:",a.substring(0,20)+"..."),a.startsWith('"')&&a.endsWith('"')&&(a=JSON.parse(a)),Mt.defaults.headers.common.Authorization=`Bearer ${a}`):console.log("No token found, request will be made without auth");const i=localStorage.getItem("schoolId"),o={...e,school:e.school||parseInt(i||"0"),message:e.message||"",notification_type:e.notification_type||"INFO",parents:e.parents||[],drivers:e.drivers||[],is_read:!1};console.log("Notification data with school:",o);const l={headers:a?{Authorization:`Bearer ${a}`}:{}};return(await Mt.post(Tt.NOTIFICATIONS_CREATE,o,l)).data}catch(a){return a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to create notification"):t("Failed to create notification")}}),Eh=Pt("notifications/fetchNotifications",async(e,{rejectWithValue:t})=>{var s,n;try{console.log("Auth token available:",!!localStorage.getItem("token"));let a=localStorage.getItem("token");if(!a){const u=localStorage.getItem("persist:auth");if(u)try{const h=JSON.parse(u);a=JSON.parse(h.user||"{}").token,console.log("Token from persist:auth:",!!a)}catch(h){console.log("Error parsing persist:auth:",h)}}a?(console.log("Token preview:",a.substring(0,20)+"..."),a.startsWith('"')&&a.endsWith('"')&&(a=JSON.parse(a)),Mt.defaults.headers.common.Authorization=`Bearer ${a}`):console.log("No token found, request will be made without auth");const i=typeof e=="object"?e.schoolId:void 0;let o=Tt.NOTIFICATIONS;i&&(o+=`?school=${i}`);const l={headers:a?{Authorization:`Bearer ${a}`}:{}},c=await Mt.get(o,l);console.log("Raw notifications response:",c.data);let d;return c.data&&c.data.results?d=c.data.results:c.data&&Array.isArray(c.data)?d=c.data:c.data&&c.data.data&&Array.isArray(c.data.data)?d=c.data.data:d=[],console.log("Final notifications data to return:",d),d}catch(a){return a instanceof kr?t(((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch notifications"):t("Failed to fetch notifications")}}),sU=Js({name:"notifications",initialState:rU,reducers:{clearNotificationsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(l0.pending,t=>{t.loading=!0,t.error=null}).addCase(l0.fulfilled,(t,s)=>{t.loading=!1,t.notifications.unshift(s.payload)}).addCase(l0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to create notification"}).addCase(Eh.pending,t=>{t.loading=!0,t.error=null}).addCase(Eh.fulfilled,(t,s)=>{console.log("fetchNotifications.fulfilled - payload:",s.payload),t.loading=!1,t.notifications=Array.isArray(s.payload)?s.payload:[]}).addCase(Eh.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch notifications"})}}),nU=sU.reducer,aU={reports:[],metrics:null,pagination:null,filters:{},loading:!1,error:null},ac=Pt("reports/fetchReports",async(e,{rejectWithValue:t})=>{var s,n;try{const a=new URLSearchParams;e.school_id&&a.append("school_id",e.school_id.toString()),e.start_date&&a.append("start_date",e.start_date),e.end_date&&a.append("end_date",e.end_date),e.driver_id&&a.append("driver_id",e.driver_id.toString()),e.route_id&&a.append("route_id",e.route_id.toString()),e.status&&a.append("status",e.status),e.page&&a.append("page",e.page.toString());const i=`${Tt.REPORTS}?${a.toString()}`,o=await Mt.get(i);return console.log("Raw reports response:",o.data),o.data}catch(a){console.error("Error fetching reports:",a);const i=a instanceof kr?((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.message)||a.message:"Failed to fetch reports";return t(i)}}),PP=Js({name:"reports",initialState:aU,reducers:{clearReports:e=>{e.reports=[],e.metrics=null,e.pagination=null,e.error=null},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={}}},extraReducers:e=>{e.addCase(ac.pending,t=>{t.loading=!0,t.error=null}).addCase(ac.fulfilled,(t,s)=>{t.loading=!1,t.reports=s.payload.results,t.metrics=s.payload.metrics,t.pagination=s.payload.pagination,t.error=null}).addCase(ac.rejected,(t,s)=>{t.loading=!1,t.error=s.payload||"Failed to fetch reports"})}}),{clearFilters:iU}=PP.actions,oU=PP.reducer,lU={plans:[],loading:!1,error:null},Xi=Pt("subscription/fetchPlans",async(e,{rejectWithValue:t})=>{var s,n;try{const a=await Mt.get("subscription-plans/");return console.log("Subscription plans response:",a.data),Array.isArray(a.data)?a.data:((s=a.data)==null?void 0:s.results)||((n=a.data)==null?void 0:n.data)||[]}catch(a){console.error("Error fetching subscription plans:",a);const i=a instanceof Error?a.message:"Failed to fetch subscription plans";return t(i)}}),cU=Js({name:"subscription",initialState:lU,reducers:{clearSubscription:e=>{e.plans=[],e.error=null}},extraReducers:e=>{e.addCase(Xi.pending,t=>{t.loading=!0,t.error=null}).addCase(Xi.fulfilled,(t,s)=>{t.loading=!1,t.plans=s.payload}).addCase(Xi.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),dU=cU.reducer,uU={messages:[],loading:!1,error:null,creating:!1,updating:!1},c0=Pt("contactMessages/fetchContactMessages",async(e,{rejectWithValue:t})=>{try{const s=await fetch(`${Tt.CONTACT_MESSAGES}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.json();console.log("Contact messages API response:",n);let a=n.data||n;return Array.isArray(a)?a:(console.error("Invalid contact messages response - not an array:",a),[{id:"1",first_name:"Peter",last_name:"Mwangi",email_address:"p.mwangi@brightfutureschool.co.ke",school_name:"Bright Future Academy",message:"Hello, I'm interested in your Smart Shule platform for our school transport management. We have about 300 students and 5 buses. Could you please provide more information about pricing and implementation timeline? We're particularly interested in the parent notification features and real-time tracking capabilities.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T10:30:00Z"},{id:"2",first_name:"Grace",last_name:"Achieng",email_address:"grace.achieng@educationhub.ac.ke",school_name:"Education Hub International",message:"We would like to schedule a demo of your Smart Shule platform. Our school currently uses manual systems for transport management and we're looking for a comprehensive digital solution. We have 450 students across primary and secondary sections with 8 buses operating daily. Please let us know your availability for a presentation.",message_type:"demo_request",is_read:!0,created_at:"2024-01-14T14:20:00Z",updated_at:"2024-01-15T09:15:00Z"},{id:"3",first_name:"David",last_name:"Ochieng",email_address:"d.ochieng@holyrosaryschool.edu",school_name:"Holy Rosary School",message:"We're experiencing some issues with the GPS tracking on two of our buses. The location updates seem to be delayed by about 10-15 minutes. Could someone from your technical team please assist us? Our subscription is active and this is affecting our parent communication.",message_type:"support_message",is_read:!1,created_at:"2024-01-15T08:15:00Z",updated_at:"2024-01-15T08:15:00Z"},{id:"4",first_name:"Sarah",last_name:"Kamau",email_address:"s.kamau@stmarys.edu",school_name:"St. Mary's Preparatory School",message:"We're considering upgrading to the premium plan. Could you please send us detailed information about the additional features and pricing? We currently have 200 students and 3 buses.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-13T11:45:00Z",updated_at:"2024-01-13T11:45:00Z"},{id:"5",first_name:"Michael",last_name:"Onyango",email_address:"m.onyango@kenyacollege.edu",school_name:"Kenya College",message:"We would like to request a custom integration with our existing student management system. Is this possible with your platform? We need to sync student data automatically.",message_type:"demo_request",is_read:!0,created_at:"2024-01-12T16:30:00Z",updated_at:"2024-01-12T16:30:00Z"}])}catch(s){return console.error("Error fetching contact messages:",s),[{id:"1",first_name:"Peter",last_name:"Mwangi",email_address:"p.mwangi@brightfutureschool.co.ke",school_name:"Bright Future Academy",message:"Hello, I'm interested in your Smart Shule platform for our school transport management. We have about 300 students and 5 buses. Could you please provide more information about pricing and implementation timeline? We're particularly interested in the parent notification features and real-time tracking capabilities.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T10:30:00Z"},{id:"2",first_name:"Grace",last_name:"Achieng",email_address:"grace.achieng@educationhub.ac.ke",school_name:"Education Hub International",message:"We would like to schedule a demo of your Smart Shule platform. Our school currently uses manual systems for transport management and we're looking for a comprehensive digital solution. We have 450 students across primary and secondary sections with 8 buses operating daily. Please let us know your availability for a presentation.",message_type:"demo_request",is_read:!0,created_at:"2024-01-14T14:20:00Z",updated_at:"2024-01-15T09:15:00Z"},{id:"3",first_name:"David",last_name:"Ochieng",email_address:"d.ochieng@holyrosaryschool.edu",school_name:"Holy Rosary School",message:"We're experiencing some issues with the GPS tracking on two of our buses. The location updates seem to be delayed by about 10-15 minutes. Could someone from your technical team please assist us? Our subscription is active and this is affecting our parent communication.",message_type:"support_message",is_read:!1,created_at:"2024-01-15T08:15:00Z",updated_at:"2024-01-15T08:15:00Z"},{id:"4",first_name:"Sarah",last_name:"Kamau",email_address:"s.kamau@stmarys.edu",school_name:"St. Mary's Preparatory School",message:"We're considering upgrading to the premium plan. Could you please send us detailed information about the additional features and pricing? We currently have 200 students and 3 buses.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-13T11:45:00Z",updated_at:"2024-01-13T11:45:00Z"},{id:"5",first_name:"Michael",last_name:"Onyango",email_address:"m.onyango@kenyacollege.edu",school_name:"Kenya College",message:"We would like to request a custom integration with our existing student management system. Is this possible with your platform? We need to sync student data automatically.",message_type:"demo_request",is_read:!0,created_at:"2024-01-12T16:30:00Z",updated_at:"2024-01-12T16:30:00Z"}]}}),Zm=Pt("contactMessages/createContactMessage",async(e,{rejectWithValue:t})=>{try{const n=["first_name","last_name","email_address","school_name","message"].filter(p=>{var f;return!((f=e[p])!=null&&f.trim())});if(n.length>0)return console.error("Missing required fields:",n),t(`Missing required fields: ${n.join(", ")}`);const{message_type:a,...i}=e,o={first_name:i.first_name.trim(),last_name:i.last_name.trim(),email_address:i.email_address.trim(),school_name:i.school_name.trim(),message:i.message.trim()};console.log("Original messageData:",e),console.log("Cleaned data:",o),console.log("Message type:",a);const l=localStorage.getItem("token");console.log("Token available:",!!l);const c=o;console.log("Sending request body:",c),console.log("API Endpoint:",`${Tt.CONTACT_MESSAGES}`);const d={"Content-Type":"application/json"};l&&(d.Authorization=`Bearer ${l}`),console.log("Request headers:",d);const u=await fetch(`${Tt.CONTACT_MESSAGES}`,{method:"POST",headers:d,body:JSON.stringify(c)}),h=await u.json();if(console.log("API Response Status:",u.status),console.log("API Response Data:",h),!u.ok){if(console.error("API Error Response:",h),u.status===401&&l){console.log("Trying without authentication...");const p=await fetch(`${Tt.CONTACT_MESSAGES}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),f=await p.json();return console.log("API Response without auth:",f),p.ok?f.data||f:t(f.message||"Failed to create contact message")}return t(h.message||"Failed to create contact message")}return h.data||h}catch(s){return console.error("Error creating contact message:",s),t("Failed to create contact message")}}),Wb=Pt("contactMessages/updateContactMessage",async({id:e,updateData:t},{rejectWithValue:s})=>{try{const n=await fetch(`${Tt.CONTACT_MESSAGES}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch(n){return console.error("Error updating contact message:",n),s("Failed to update contact message")}}),d0=Pt("contactMessages/markAsRead",async(e,{rejectWithValue:t,getState:s})=>{try{const n=await fetch(`${Tt.CONTACT_MESSAGES}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({is_read:!0})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();if(console.log("Mark as read API response:",a),a.data||a)return a.data||a;const o=s().contactMessages.messages.find(l=>l.id===e);if(o)return{...o,is_read:!0,updated_at:new Date().toISOString()};throw new Error("Message not found")}catch(n){console.error("Error marking contact message as read:",n);const i=s().contactMessages.messages.find(o=>o.id===e);return i?{...i,is_read:!0,updated_at:new Date().toISOString()}:t("Failed to mark message as read")}}),Gb=Pt("contactMessages/fetchContactMessageById",async(e,{rejectWithValue:t})=>{try{const s=await fetch(`${Tt.CONTACT_MESSAGES}/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.json();return n.data||n}catch(s){return console.error("Error fetching contact message:",s),t("Failed to fetch contact message")}}),hU=Js({name:"contactMessages",initialState:uU,reducers:{clearContactMessagesError:e=>{e.error=null},clearContactMessages:e=>{e.messages=[],e.error=null}},extraReducers:e=>{e.addCase(c0.pending,t=>{t.loading=!0,t.error=null}).addCase(c0.fulfilled,(t,s)=>{t.loading=!1,t.messages=s.payload,t.error=null}).addCase(c0.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}),e.addCase(Zm.pending,t=>{t.creating=!0,t.error=null}).addCase(Zm.fulfilled,(t,s)=>{t.creating=!1,t.messages.unshift(s.payload),t.error=null}).addCase(Zm.rejected,(t,s)=>{t.creating=!1,t.error=s.payload}),e.addCase(Wb.pending,t=>{t.updating=!0,t.error=null}).addCase(Wb.fulfilled,(t,s)=>{t.updating=!1;const n=t.messages.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.messages[n]=s.payload),t.error=null}).addCase(Wb.rejected,(t,s)=>{t.updating=!1,t.error=s.payload}),e.addCase(d0.pending,t=>{t.updating=!0,t.error=null}).addCase(d0.fulfilled,(t,s)=>{t.updating=!1;const n=t.messages.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.messages[n]=s.payload),t.error=null}).addCase(d0.rejected,(t,s)=>{t.updating=!1,t.error=s.payload}),e.addCase(Gb.pending,t=>{t.loading=!0,t.error=null}).addCase(Gb.fulfilled,(t,s)=>{t.loading=!1;const n=t.messages.findIndex(a=>a.id===s.payload.id);n!==-1?t.messages[n]=s.payload:t.messages.unshift(s.payload),t.error=null}).addCase(Gb.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),fU=hU.reducer,mU={subscriptions:[],loading:!1,error:null,creating:!1,updating:!1},Pc=Pt("schoolSubscriptions/fetchSchoolSubscriptions",async(e,{rejectWithValue:t})=>{var s,n,a;try{const i=await Cf(`${Tt.SCHOOL_SUBSCRIPTIONS}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!i.ok){const l=await i.json().catch(()=>({}));if(i.status===429||(s=l.detail)!=null&&s.includes("throttled")){const c=((a=(n=l.detail)==null?void 0:n.match(/(\d+) seconds?/))==null?void 0:a[1])||20;throw new Error(`Rate limited. Please wait ${c} seconds before trying again.`)}throw l.message?new Error(l.message):new Error(`HTTP error! status: ${i.status}`)}const o=await i.json();return console.log("School subscriptions API response:",o),o.data||o}catch(i){return console.error("Error fetching school subscriptions:",i),t("Failed to fetch school subscriptions")}}),Kb=Pt("schoolSubscriptions/fetchSchoolSubscriptionById",async(e,{rejectWithValue:t})=>{try{const s=await fetch(`${Tt.SCHOOL_SUBSCRIPTIONS}/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.json();return n.data||n}catch(s){return console.error("Error fetching school subscription:",s),t("Failed to fetch school subscription")}}),u0=Pt("schoolSubscriptions/createSchoolSubscription",async(e,{rejectWithValue:t})=>{try{const s=await fetch(`${Tt.SCHOOL_SUBSCRIPTIONS}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)});if(!s.ok){const a=await s.json();throw new Error(a.message||"Failed to create subscription")}const n=await s.json();return n.data||n}catch(s){return console.error("Error creating school subscription:",s),t("Failed to create school subscription")}}),h0=Pt("schoolSubscriptions/updateSchoolSubscription",async({id:e,updateData:t},{rejectWithValue:s})=>{try{const n=await fetch(`${Tt.SCHOOL_SUBSCRIPTIONS}${e}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!n.ok){const i=await n.json();throw new Error(i.message||"Failed to update subscription")}const a=await n.json();return a.data||a}catch(n){return console.error("Error updating school subscription:",n),s("Failed to update school subscription")}}),pU=Js({name:"schoolSubscriptions",initialState:mU,reducers:{clearSchoolSubscriptionsError:e=>{e.error=null},clearSchoolSubscriptions:e=>{e.subscriptions=[],e.error=null}},extraReducers:e=>{e.addCase(Pc.pending,t=>{t.loading=!0,t.error=null}).addCase(Pc.fulfilled,(t,s)=>{t.loading=!1,t.subscriptions=s.payload,t.error=null}).addCase(Pc.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}),e.addCase(Kb.pending,t=>{t.loading=!0,t.error=null}).addCase(Kb.fulfilled,(t,s)=>{t.loading=!1;const n=t.subscriptions.findIndex(a=>a.id===s.payload.id);n!==-1?t.subscriptions[n]=s.payload:t.subscriptions.unshift(s.payload),t.error=null}).addCase(Kb.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}),e.addCase(u0.pending,t=>{t.creating=!0,t.error=null}).addCase(u0.fulfilled,(t,s)=>{t.creating=!1,t.subscriptions.unshift(s.payload),t.error=null}).addCase(u0.rejected,(t,s)=>{t.creating=!1,t.error=s.payload}),e.addCase(h0.pending,t=>{t.updating=!0,t.error=null}).addCase(h0.fulfilled,(t,s)=>{t.updating=!1;const n=t.subscriptions.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.subscriptions[n]=s.payload),t.error=null}).addCase(h0.rejected,(t,s)=>{t.updating=!1,t.error=s.payload})}}),gU=pU.reducer,xU={invoices:[],loading:!1,error:null,creating:!1,updating:!1},Lh=Pt("invoices/fetchInvoices",async(e,{rejectWithValue:t})=>{try{const n=await(await Cf(`${Tt.INVOICES}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();return console.log("Invoices API response:",n),console.log("Invoices API response type:",typeof n),console.log("Invoices API response keys:",Object.keys(n)),console.log("Invoices data field:",n.data),console.log("Invoices data type:",typeof n.data),n.data||n}catch(s){return console.error("Error fetching invoices:",s),t(s instanceof Error?s.message:"Failed to fetch invoices")}}),Yb=Pt("invoices/fetchInvoiceById",async(e,{rejectWithValue:t})=>{try{const n=await(await Cf(`${Tt.INVOICES}/${e}/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();return n.data||n}catch(s){return console.error("Error fetching invoice:",s),t(s instanceof Error?s.message:"Failed to fetch invoice")}}),f0=Pt("invoices/createInvoice",async(e,{rejectWithValue:t})=>{try{const n=await(await Cf(`${Tt.INVOICES}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)})).json();return n.data||n}catch(s){return console.error("Error creating invoice:",s),t(s instanceof Error?s.message:"Failed to create invoice")}}),Jb=Pt("invoices/processPayment",async(e,{rejectWithValue:t})=>{try{const n=await(await Cf(`${Tt.INVOICES}${e.invoice_id}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)})).json();return n.data||n}catch(s){return console.error("Error processing payment:",s),t(s instanceof Error?s.message:"Failed to process payment")}}),m0=Pt("invoices/updateInvoice",async({id:e,updateData:t},{rejectWithValue:s})=>{try{const a=await(await Cf(`${Tt.INVOICES}/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)})).json();return a.data||a}catch(n){return console.error("Error updating invoice:",n),s(n instanceof Error?n.message:"Failed to update invoice")}}),vU=Js({name:"invoices",initialState:xU,reducers:{clearInvoicesError:e=>{e.error=null},clearInvoices:e=>{e.invoices=[],e.error=null}},extraReducers:e=>{e.addCase(Lh.pending,t=>{t.loading=!0,t.error=null}).addCase(Lh.fulfilled,(t,s)=>{t.loading=!1,t.invoices=s.payload,t.error=null}).addCase(Lh.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}),e.addCase(Yb.pending,t=>{t.loading=!0,t.error=null}).addCase(Yb.fulfilled,(t,s)=>{t.loading=!1;const n=t.invoices.findIndex(a=>a.id===s.payload.id);n!==-1?t.invoices[n]=s.payload:t.invoices.unshift(s.payload),t.error=null}).addCase(Yb.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}),e.addCase(f0.pending,t=>{t.creating=!0,t.error=null}).addCase(f0.fulfilled,(t,s)=>{t.creating=!1,t.invoices.unshift(s.payload),t.error=null}).addCase(f0.rejected,(t,s)=>{t.creating=!1,t.error=s.payload}),e.addCase(Jb.pending,t=>{t.updating=!0,t.error=null}).addCase(Jb.fulfilled,(t,s)=>{t.updating=!1;const n=t.invoices.findIndex(a=>a.id===s.payload.invoice_id);n!==-1&&(t.invoices[n].status="paid"),t.error=null}).addCase(Jb.rejected,(t,s)=>{t.updating=!1,t.error=s.payload}),e.addCase(m0.pending,t=>{t.updating=!0,t.error=null}).addCase(m0.fulfilled,(t,s)=>{t.updating=!1;const n=t.invoices.findIndex(a=>a.id===s.payload.id);n!==-1&&(t.invoices[n]=s.payload),t.error=null}).addCase(m0.rejected,(t,s)=>{t.updating=!1,t.error=s.payload})}}),yU=vU.reducer,bU={key:"auth",storage:t5,whitelist:["user","token","userId"]},jU={key:"routes",storage:t5,whitelist:["routes"]},wU=XA(bU,dz),NU=XA(jU,_z),SU={auth:wU,schools:fz,parents:gz,drivers:yz,vehicles:wz,routes:NU,routeAssignments:Az,staff:Lz,roles:$z,students:Uz,profile:Hz,overview:Gz,trips:Jz,grades:Qz,preferences:tU,notifications:nU,reports:oU,subscription:dU,contactMessages:fU,schoolSubscriptions:gU,invoices:yU},i5=E9({reducer:SU,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]},immutableCheck:!1}),devTools:!1}),_U=a$(i5);function p0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p0=function(s){return typeof s}:p0=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},p0(e)}function CU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kU(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AU(e,t,s){return t&&kU(e.prototype,t),e}function PU(e,t){return t&&(p0(t)==="object"||typeof t=="function")?t:g0(e)}function zj(e){return zj=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},zj(e)}function g0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uj(e,t)}function Uj(e,t){return Uj=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},Uj(e,t)}function x0(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var EP=function(e){EU(t,e);function t(){var s,n;CU(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=PU(this,(s=zj(t)).call.apply(s,[this].concat(i))),x0(g0(n),"state",{bootstrapped:!1}),x0(g0(n),"_unsubscribe",void 0),x0(g0(n),"handlePersistorState",function(){var l=n.props.persistor,c=l.getState(),d=c.bootstrapped;d&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return AU(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(x.PureComponent);x0(EP,"defaultProps",{children:null,loading:null});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LP=(...e)=>e.filter((t,s,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>x.createElement("svg",{ref:c,...RU,width:t,height:t,stroke:e,strokeWidth:n?Number(s)*24/Number(t):s,className:LP("lucide",a),...l},[...o.map(([d,u])=>x.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(e,t)=>{const s=x.forwardRef(({className:n,...a},i)=>x.createElement(TU,{ref:i,iconNode:t,className:LP(`lucide-${LU(e)}`,n),...a}));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=xt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=xt("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=xt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=xt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=xt("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=xt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=xt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=xt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=xt("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=xt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=xt("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=xt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=xt("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=xt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=xt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=xt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=xt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=xt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=xt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=xt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=xt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=xt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=xt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=xt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=xt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=xt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=xt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=xt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=xt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=xt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=xt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=xt("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=xt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=xt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=xt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=xt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=xt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=xt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=xt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=xt("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=xt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=xt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=xt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=xt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=xt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=xt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=xt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=xt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=xt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=xt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=xt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=xt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=xt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=xt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=xt("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=xt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=xt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=xt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=xt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=xt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=xt("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=xt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=xt("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=xt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=xt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=xt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=xt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=xt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=xt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=xt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=xt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=xt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=xt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=xt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=xt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=xt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=xt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=xt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=xt("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=xt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=xt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=xt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),QU=()=>r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ii,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{children:"Loading application..."})]})});function eq({children:e}){return r.jsx(JM,{store:i5,children:r.jsx(EP,{loading:r.jsx(QU,{}),persistor:_U,children:e})})}const ns=()=>ad(),At=ma,zP=x.createContext(void 0),l5=()=>{const e=x.useContext(zP);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},tq=({children:e})=>{const t=ns(),{preferences:s}=At(u=>u.preferences),[n,a]=x.useState(!1),i=()=>s.theme==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":s.theme,o=u=>{const h=document.documentElement;a(u==="dark"),u==="dark"?(h.classList.add("dark"),h.setAttribute("data-theme","dark")):(h.classList.remove("dark"),h.setAttribute("data-theme","light"))},l=async u=>{if(await t(o0({theme:u})),u==="auto"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches;o(h?"dark":"light")}else o(u)},c=()=>{const u=s.theme;let h;u==="auto"?h=window.matchMedia("(prefers-color-scheme: dark)").matches?"light":"dark":u==="light"?h="dark":h="light",l(h)};x.useEffect(()=>{if(s.theme==="auto"){const u=window.matchMedia("(prefers-color-scheme: dark)"),h=()=>{o(i())};return u.addEventListener("change",h),()=>u.removeEventListener("change",h)}},[s.theme]),x.useEffect(()=>{o(i())},[s.theme]),x.useEffect(()=>{o(i())},[]);const d={theme:s.theme,isDark:n,setTheme:l,toggleTheme:c};return r.jsx(zP.Provider,{value:d,children:e})};function Q4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Sl(...e){return t=>{let s=!1;const n=e.map(a=>{const i=Q4(a,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Q4(e[a],null)}}}}function Nr(...e){return x.useCallback(Sl(...e),e)}function Mc(e){const t=rq(e),s=x.forwardRef((n,a)=>{const{children:i,...o}=n,l=x.Children.toArray(i),c=l.find(sq);if(c){const d=c.props.children,u=l.map(h=>h===c?x.Children.count(d)>1?x.Children.only(null):x.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:a,children:x.isValidElement(d)?x.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}var pu=Mc("Slot");function rq(e){const t=x.forwardRef((s,n)=>{const{children:a,...i}=s;if(x.isValidElement(a)){const o=aq(a),l=nq(i,a.props);return a.type!==x.Fragment&&(l.ref=n?Sl(n,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var UP=Symbol("radix.slottable");function qP(e){const t=({children:s})=>r.jsx(r.Fragment,{children:s});return t.displayName=`${e}.Slottable`,t.__radixId=UP,t}function sq(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===UP}function nq(e,t){const s={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function aq(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function VP(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=VP(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function HP(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=VP(e))&&(n&&(n+=" "),n+=t);return n}const eC=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,tC=HP,gu=(e,t)=>s=>{var n;if((t==null?void 0:t.variants)==null)return tC(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=s==null?void 0:s[d],h=i==null?void 0:i[d];if(u===null)return null;const p=eC(u)||eC(h);return a[d][p]}),l=s&&Object.entries(s).reduce((d,u)=>{let[h,p]=u;return p===void 0||(d[h]=p),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:p,...f}=u;return Object.entries(f).every(y=>{let[g,j]=y;return Array.isArray(j)?j.includes({...i,...l}[g]):{...i,...l}[g]===j})?[...d,h,p]:d},[]);return tC(e,o,c,s==null?void 0:s.class,s==null?void 0:s.className)},c5="-",iq=e=>{const t=lq(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(c5);return l[0]===""&&l.length!==1&&l.shift(),WP(l,t)||oq(o)},getConflictingClassGroupIds:(o,l)=>{const c=s[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},WP=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const s=e[0],n=t.nextPart.get(s),a=n?WP(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(c5);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},rC=/^\[(.+)\]$/,oq=e=>{if(rC.test(e)){const t=rC.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},lq=e=>{const{theme:t,prefix:s}=e,n={nextPart:new Map,validators:[]};return dq(Object.entries(e.classGroups),s).forEach(([i,o])=>{Gj(o,n,i,t)}),n},Gj=(e,t,s,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:sC(t,a);i.classGroupId=s;return}if(typeof a=="function"){if(cq(a)){Gj(a(n),t,s,n);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,o])=>{Gj(o,sC(t,i),s,n)})})},sC=(e,t)=>{let s=e;return t.split(c5).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},cq=e=>e.isThemeGetter,dq=(e,t)=>t?e.map(([s,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[s,a]}):e,uq=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const a=(i,o)=>{s.set(i,o),t++,t>e&&(t=0,n=s,s=new Map)};return{get(i){let o=s.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){s.has(i)?s.set(i,o):a(i,o)}}},GP="!",hq=e=>{const{separator:t,experimentalParseClassName:s}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let j=0;j<l.length;j++){let v=l[j];if(d===0){if(v===a&&(n||l.slice(j,j+i)===t)){c.push(l.slice(u,j)),u=j+i;continue}if(v==="/"){h=j;continue}}v==="["?d++:v==="]"&&d--}const p=c.length===0?l:l.substring(u),f=p.startsWith(GP),y=f?p.substring(1):p,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:g}};return s?l=>s({className:l,parseClassName:o}):o},fq=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(n=>{n[0]==="["?(t.push(...s.sort(),n),s=[]):s.push(n)}),t.push(...s.sort()),t},mq=e=>({cache:uq(e.cacheSize),parseClassName:hq(e),...iq(e)}),pq=/\s+/,gq=(e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(pq);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=s(d);let y=!!f,g=n(y?p.substring(0,f):p);if(!g){if(!y){l=d+(l.length>0?" "+l:l);continue}if(g=n(p),!g){l=d+(l.length>0?" "+l:l);continue}y=!1}const j=fq(u).join(":"),v=h?j+GP:j,w=v+g;if(i.includes(w))continue;i.push(w);const N=a(g,y);for(let C=0;C<N.length;++C){const k=N[C];i.push(v+k)}l=d+(l.length>0?" "+l:l)}return l};function xq(){let e=0,t,s,n="";for(;e<arguments.length;)(t=arguments[e++])&&(s=KP(t))&&(n&&(n+=" "),n+=s);return n}const KP=e=>{if(typeof e=="string")return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=KP(e[n]))&&(s&&(s+=" "),s+=t);return s};function vq(e,...t){let s,n,a,i=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return s=mq(d),n=s.cache.get,a=s.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=gq(c,s);return a(c,u),u}return function(){return i(xq.apply(null,arguments))}}const xs=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},YP=/^\[(?:([a-z-]+):)?(.+)\]$/i,yq=/^\d+\/\d+$/,bq=new Set(["px","full","screen"]),jq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Sq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_q=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,il=e=>Th(e)||bq.has(e)||yq.test(e),Gl=e=>Af(e,"length",Tq),Th=e=>!!e&&!Number.isNaN(Number(e)),Qb=e=>Af(e,"number",Th),ym=e=>!!e&&Number.isInteger(Number(e)),Cq=e=>e.endsWith("%")&&Th(e.slice(0,-1)),yr=e=>YP.test(e),Kl=e=>jq.test(e),kq=new Set(["length","size","percentage"]),Aq=e=>Af(e,kq,JP),Pq=e=>Af(e,"position",JP),Eq=new Set(["image","url"]),Lq=e=>Af(e,Eq,Fq),Rq=e=>Af(e,"",Iq),bm=()=>!0,Af=(e,t,s)=>{const n=YP.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):s(n[2]):!1},Tq=e=>wq.test(e)&&!Nq.test(e),JP=()=>!1,Iq=e=>Sq.test(e),Fq=e=>_q.test(e),Dq=()=>{const e=xs("colors"),t=xs("spacing"),s=xs("blur"),n=xs("brightness"),a=xs("borderColor"),i=xs("borderRadius"),o=xs("borderSpacing"),l=xs("borderWidth"),c=xs("contrast"),d=xs("grayscale"),u=xs("hueRotate"),h=xs("invert"),p=xs("gap"),f=xs("gradientColorStops"),y=xs("gradientColorStopPositions"),g=xs("inset"),j=xs("margin"),v=xs("opacity"),w=xs("padding"),N=xs("saturate"),C=xs("scale"),k=xs("sepia"),O=xs("skew"),R=xs("space"),E=xs("translate"),I=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",yr,t],A=()=>[yr,t],$=()=>["",il,Gl],U=()=>["auto",Th,yr],de=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",yr],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[Th,yr];return{cacheSize:500,separator:":",theme:{colors:[bm],spacing:[il,Gl],blur:["none","",Kl,yr],brightness:ie(),borderColor:[e],borderRadius:["none","","full",Kl,yr],borderSpacing:A(),borderWidth:$(),contrast:ie(),grayscale:K(),hueRotate:ie(),invert:K(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[Cq,Gl],inset:P(),margin:P(),opacity:ie(),padding:A(),saturate:ie(),scale:ie(),sepia:K(),skew:ie(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",yr]}],container:["container"],columns:[{columns:[Kl]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...de(),yr]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ym,yr]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yr]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",ym,yr]}],"grid-cols":[{"grid-cols":[bm]}],"col-start-end":[{col:["auto",{span:["full",ym,yr]},yr]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[bm]}],"row-start-end":[{row:["auto",{span:[ym,yr]},yr]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yr]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",yr,t]}],"min-w":[{"min-w":[yr,t,"min","max","fit"]}],"max-w":[{"max-w":[yr,t,"none","full","min","max","fit","prose",{screen:[Kl]},Kl]}],h:[{h:[yr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[yr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[yr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[yr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Kl,Gl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qb]}],"font-family":[{font:[bm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yr]}],"line-clamp":[{"line-clamp":["none",Th,Qb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",il,yr]}],"list-image":[{"list-image":["none",yr]}],"list-style-type":[{list:["none","disc","decimal",yr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",il,Gl]}],"underline-offset":[{"underline-offset":["auto",il,yr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...de(),Pq]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Aq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Lq]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:se()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[il,yr]}],"outline-w":[{outline:[il,Gl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[il,Gl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Kl,Rq]}],"shadow-color":[{shadow:[bm]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...ge(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ge()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Kl,yr]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[N]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yr]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",yr]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",yr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[ym,yr]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[il,Gl,Qb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Oq=vq(Dq);function it(...e){return Oq(HP(e))}const d5=gu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),fe=x.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...a},i)=>{const o=n?pu:"button";return r.jsx(o,{className:it(d5({variant:t,size:s,className:e})),ref:i,...a})});fe.displayName="Button";const Oe=x.forwardRef(({className:e,type:t,...s},n)=>r.jsx("input",{type:t,className:it("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...s}));Oe.displayName="Input";const Me=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:it("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Me.displayName="Card";const Ke=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:it("flex flex-col space-y-1.5 p-6",e),...t}));Ke.displayName="CardHeader";const Je=x.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:it("text-2xl font-semibold leading-none tracking-tight",e),...t}));Je.displayName="CardTitle";const br=x.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:it("text-sm text-muted-foreground",e),...t}));br.displayName="CardDescription";const Ve=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:it("p-6 pt-0",e),...t}));Ve.displayName="CardContent";const u5=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:it("flex items-center p-6 pt-0",e),...t}));u5.displayName="CardFooter";var Mq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ot=Mq.reduce((e,t)=>{const s=Mc(`Primitive.${t}`),n=x.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function h5(e,t){e&&sd.flushSync(()=>e.dispatchEvent(t))}var $q="Label",ZP=x.forwardRef((e,t)=>r.jsx(Ot.label,{...e,ref:t,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));ZP.displayName=$q;var XP=ZP;const Bq=gu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),le=x.forwardRef(({className:e,...t},s)=>r.jsx(XP,{ref:s,className:it(Bq(),e),...t}));le.displayName=XP.displayName;const zq=gu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Hd=x.forwardRef(({className:e,variant:t,...s},n)=>r.jsx("div",{ref:n,role:"alert",className:it(zq({variant:t}),e),...s}));Hd.displayName="Alert";const Uq=x.forwardRef(({className:e,...t},s)=>r.jsx("h5",{ref:s,className:it("mb-1 font-medium leading-none tracking-tight",e),...t}));Uq.displayName="AlertTitle";const Wd=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:it("text-sm [&_p]:leading-relaxed",e),...t}));Wd.displayName="AlertDescription";const qq=()=>{const[e,t]=x.useState(""),[s,n]=x.useState(""),[a,i]=x.useState(!1),o=ns(),l=Ai(),{toast:c}=Zs(),{loading:d,error:u,user:h}=At(g=>g.auth);x.useEffect(()=>{o(oz())},[o]),x.useEffect(()=>{u&&c({variant:"destructive",title:"Error",description:u})},[u,c]),x.useEffect(()=>{h&&l("/")},[h,l]);const p=g=>{const j=g.replace(/\D/g,"");return j?j.startsWith("0757")?"+2527"+j.slice(4):j.startsWith("0")?"+254"+j.slice(1):j.startsWith("254")||j.startsWith("2527")?"+"+j:j.length===9?"+254"+j:g.startsWith("+")?g:"+254"+j:""},f=g=>{const j=g.target.value;t(j)},y=async g=>{g.preventDefault();const j=p(e);if(!j){c({variant:"destructive",title:"Error",description:"Please enter a valid phone number"});return}o(Mx({phone_number:j,password:s}))};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:r.jsxs(Me,{className:"w-full max-w-md shadow-lg",children:[r.jsxs(Ke,{className:"space-y-1",children:[r.jsx(Je,{className:"text-2xl font-bold text-center",children:"Welcome Back"}),r.jsx(br,{className:"text-center",children:"Sign in to access LuxCab Admin Dashboard"})]}),r.jsxs(Ve,{children:[u&&r.jsx(Hd,{variant:"destructive",className:"mb-4",children:r.jsx(Wd,{children:u})}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"phone",children:"Phone Number"}),r.jsx(Oe,{id:"phone",type:"tel",placeholder:"Enter your phone number (e.g., 0757198515 or 0757xxxxxx)",value:e,onChange:f,required:!0,className:"w-full"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter local format (e.g., 0757198515 or 0757xxxxxx) - will be converted automatically when you login"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"password",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Oe,{id:"password",type:a?"text":"password",placeholder:"Enter your password",value:s,onChange:g=>n(g.target.value),required:!0,className:"w-full pr-10"}),r.jsx(fe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?r.jsx(pl,{className:"h-4 w-4 text-muted-foreground"}):r.jsx(ls,{className:"h-4 w-4 text-muted-foreground"})})]})]}),r.jsx(fe,{type:"submit",className:"w-full",disabled:d,children:d?r.jsxs(r.Fragment,{children:[r.jsx(ii,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Login"})]})]}),r.jsx(u5,{className:"flex flex-col space-y-4"})]})})};function pt(e,t,{checkForDefaultPrevented:s=!0}={}){return function(a){if(e==null||e(a),s===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Vq(e,t){const s=x.createContext(t),n=i=>{const{children:o,...l}=i,c=x.useMemo(()=>l,Object.values(l));return r.jsx(s.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=x.useContext(s);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function xa(e,t=[]){let s=[];function n(i,o){const l=x.createContext(o),c=s.length;s=[...s,o];const d=h=>{var v;const{scope:p,children:f,...y}=h,g=((v=p==null?void 0:p[e])==null?void 0:v[c])||l,j=x.useMemo(()=>y,Object.values(y));return r.jsx(g.Provider,{value:j,children:f})};d.displayName=i+"Provider";function u(h,p){var g;const f=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,y=x.useContext(f);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=s.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Hq(a,...t)]}function Hq(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}var Dn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},Wq=Uw[" useId ".trim().toString()]||(()=>{}),Gq=0;function jn(e){const[t,s]=x.useState(Wq());return Dn(()=>{s(n=>n??String(Gq++))},[e]),t?`radix-${t}`:""}var Kq=Uw[" useInsertionEffect ".trim().toString()]||Dn;function so({prop:e,defaultProp:t,onChange:s=()=>{},caller:n}){const[a,i,o]=Yq({defaultProp:t,onChange:s}),l=e!==void 0,c=l?e:a;{const u=x.useRef(e!==void 0);x.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=x.useCallback(u=>{var h;if(l){const p=Jq(u)?u(e):u;p!==e&&((h=o.current)==null||h.call(o,p))}else i(u)},[l,e,i,o]);return[c,d]}function Yq({defaultProp:e,onChange:t}){const[s,n]=x.useState(e),a=x.useRef(s),i=x.useRef(t);return Kq(()=>{i.current=t},[t]),x.useEffect(()=>{var o;a.current!==s&&((o=i.current)==null||o.call(i,s),a.current=s)},[s,a]),[s,n,i]}function Jq(e){return typeof e=="function"}function Oa(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...s)=>{var n;return(n=t.current)==null?void 0:n.call(t,...s)},[])}function Zq(e,t=globalThis==null?void 0:globalThis.document){const s=Oa(e);x.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[s,t])}var Xq="DismissableLayer",Kj="dismissableLayer.update",Qq="dismissableLayer.pointerDownOutside",eV="dismissableLayer.focusOutside",nC,QP=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xu=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=x.useContext(QP),[u,h]=x.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=x.useState({}),y=Nr(t,R=>h(R)),g=Array.from(d.layers),[j]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(j),w=u?g.indexOf(u):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,C=w>=v,k=rV(R=>{const E=R.target,I=[...d.branches].some(D=>D.contains(E));!C||I||(a==null||a(R),o==null||o(R),R.defaultPrevented||l==null||l())},p),O=sV(R=>{const E=R.target;[...d.branches].some(D=>D.contains(E))||(i==null||i(R),o==null||o(R),R.defaultPrevented||l==null||l())},p);return Zq(R=>{w===d.layers.size-1&&(n==null||n(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},p),x.useEffect(()=>{if(u)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(nC=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),aC(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=nC)}},[u,p,s,d]),x.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),aC())},[u,d]),x.useEffect(()=>{const R=()=>f({});return document.addEventListener(Kj,R),()=>document.removeEventListener(Kj,R)},[]),r.jsx(Ot.div,{...c,ref:y,style:{pointerEvents:N?C?"auto":"none":void 0,...e.style},onFocusCapture:pt(e.onFocusCapture,O.onFocusCapture),onBlurCapture:pt(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:pt(e.onPointerDownCapture,k.onPointerDownCapture)})});xu.displayName=Xq;var tV="DismissableLayerBranch",eE=x.forwardRef((e,t)=>{const s=x.useContext(QP),n=x.useRef(null),a=Nr(t,n);return x.useEffect(()=>{const i=n.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),r.jsx(Ot.div,{...e,ref:a})});eE.displayName=tV;function rV(e,t=globalThis==null?void 0:globalThis.document){const s=Oa(e),n=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){tE(Qq,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function sV(e,t=globalThis==null?void 0:globalThis.document){const s=Oa(e),n=x.useRef(!1);return x.useEffect(()=>{const a=i=>{i.target&&!n.current&&tE(eV,s,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function aC(){const e=new CustomEvent(Kj);document.dispatchEvent(e)}function tE(e,t,s,{discrete:n}){const a=s.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),n?h5(a,i):a.dispatchEvent(i)}var nV=xu,aV=eE,e2="focusScope.autoFocusOnMount",t2="focusScope.autoFocusOnUnmount",iC={bubbles:!1,cancelable:!0},iV="FocusScope",Wp=x.forwardRef((e,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=x.useState(null),d=Oa(a),u=Oa(i),h=x.useRef(null),p=Nr(t,g=>c(g)),f=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let g=function(N){if(f.paused||!l)return;const C=N.target;l.contains(C)?h.current=C:Zl(h.current,{select:!0})},j=function(N){if(f.paused||!l)return;const C=N.relatedTarget;C!==null&&(l.contains(C)||Zl(h.current,{select:!0}))},v=function(N){if(document.activeElement===document.body)for(const k of N)k.removedNodes.length>0&&Zl(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",j);const w=new MutationObserver(v);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",j),w.disconnect()}}},[n,l,f.paused]),x.useEffect(()=>{if(l){lC.add(f);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(e2,iC);l.addEventListener(e2,d),l.dispatchEvent(v),v.defaultPrevented||(oV(hV(rE(l)),{select:!0}),document.activeElement===g&&Zl(l))}return()=>{l.removeEventListener(e2,d),setTimeout(()=>{const v=new CustomEvent(t2,iC);l.addEventListener(t2,u),l.dispatchEvent(v),v.defaultPrevented||Zl(g??document.body,{select:!0}),l.removeEventListener(t2,u),lC.remove(f)},0)}}},[l,d,u,f]);const y=x.useCallback(g=>{if(!s&&!n||f.paused)return;const j=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(j&&v){const w=g.currentTarget,[N,C]=lV(w);N&&C?!g.shiftKey&&v===C?(g.preventDefault(),s&&Zl(N,{select:!0})):g.shiftKey&&v===N&&(g.preventDefault(),s&&Zl(C,{select:!0})):v===w&&g.preventDefault()}},[s,n,f.paused]);return r.jsx(Ot.div,{tabIndex:-1,...o,ref:p,onKeyDown:y})});Wp.displayName=iV;function oV(e,{select:t=!1}={}){const s=document.activeElement;for(const n of e)if(Zl(n,{select:t}),document.activeElement!==s)return}function lV(e){const t=rE(e),s=oC(t,e),n=oC(t.reverse(),e);return[s,n]}function rE(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function oC(e,t){for(const s of e)if(!cV(s,{upTo:t}))return s}function cV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function dV(e){return e instanceof HTMLInputElement&&"select"in e}function Zl(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&dV(e)&&t&&e.select()}}var lC=uV();function uV(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=cC(e,t),e.unshift(t)},remove(t){var s;e=cC(e,t),(s=e[0])==null||s.resume()}}}function cC(e,t){const s=[...e],n=s.indexOf(t);return n!==-1&&s.splice(n,1),s}function hV(e){return e.filter(t=>t.tagName!=="A")}var fV="Portal",Pf=x.forwardRef((e,t)=>{var l;const{container:s,...n}=e,[a,i]=x.useState(!1);Dn(()=>i(!0),[]);const o=s||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?nO.createPortal(r.jsx(Ot.div,{...n,ref:t}),o):null});Pf.displayName=fV;function mV(e,t){return x.useReducer((s,n)=>t[s][n]??s,e)}var $a=e=>{const{present:t,children:s}=e,n=pV(t),a=typeof s=="function"?s({present:n.isPresent}):x.Children.only(s),i=Nr(n.ref,gV(a));return typeof s=="function"||n.isPresent?x.cloneElement(a,{ref:i}):null};$a.displayName="Presence";function pV(e){const[t,s]=x.useState(),n=x.useRef(null),a=x.useRef(e),i=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=mV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const d=ax(n.current);i.current=l==="mounted"?d:"none"},[l]),Dn(()=>{const d=n.current,u=a.current;if(u!==e){const p=i.current,f=ax(d);e?c("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&p!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Dn(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=f=>{const g=ax(n.current).includes(f.animationName);if(f.target===t&&g&&(c("ANIMATION_END"),!a.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},p=f=>{f.target===t&&(i.current=ax(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(d=>{n.current=d?getComputedStyle(d):null,s(d)},[])}}function ax(e){return(e==null?void 0:e.animationName)||"none"}function gV(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var r2=0;function ky(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dC()),document.body.insertAdjacentElement("beforeend",e[1]??dC()),r2++,()=>{r2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),r2--}},[])}function dC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Po=function(){return Po=Object.assign||function(t){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},Po.apply(this,arguments)};function sE(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s}function xV(e,t,s){if(s||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var v0="right-scroll-bar-position",y0="width-before-scroll-bar",vV="with-scroll-bars-hidden",yV="--removed-body-scroll-bar-size";function s2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function bV(e,t){var s=x.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(n){var a=s.value;a!==n&&(s.value=n,s.callback(n,a))}}}})[0];return s.callback=t,s.facade}var jV=typeof window<"u"?x.useLayoutEffect:x.useEffect,uC=new WeakMap;function wV(e,t){var s=bV(null,function(n){return e.forEach(function(a){return s2(a,n)})});return jV(function(){var n=uC.get(s);if(n){var a=new Set(n),i=new Set(e),o=s.current;a.forEach(function(l){i.has(l)||s2(l,null)}),i.forEach(function(l){a.has(l)||s2(l,o)})}uC.set(s,e)},[e]),s}function NV(e){return e}function SV(e,t){t===void 0&&(t=NV);var s=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(i){var o=t(i,n);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;s.length;){var o=s;s=[],o.forEach(i)}s={push:function(l){return i(l)},filter:function(){return s}}},assignMedium:function(i){n=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(i),o=s}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),s}}}};return a}function _V(e){e===void 0&&(e={});var t=SV(null);return t.options=Po({async:!0,ssr:!1},e),t}var nE=function(e){var t=e.sideCar,s=sE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,Po({},s))};nE.isSideCarExport=!0;function CV(e,t){return e.useMedium(t),nE}var aE=_V(),n2=function(){},Ay=x.forwardRef(function(e,t){var s=x.useRef(null),n=x.useState({onScrollCapture:n2,onWheelCapture:n2,onTouchMoveCapture:n2}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,p=e.sideCar,f=e.noRelative,y=e.noIsolation,g=e.inert,j=e.allowPinchZoom,v=e.as,w=v===void 0?"div":v,N=e.gapMode,C=sE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=p,O=wV([s,t]),R=Po(Po({},C),a);return x.createElement(x.Fragment,null,u&&x.createElement(k,{sideCar:aE,removeScrollBar:d,shards:h,noRelative:f,noIsolation:y,inert:g,setCallbacks:i,allowPinchZoom:!!j,lockRef:s,gapMode:N}),o?x.cloneElement(x.Children.only(l),Po(Po({},R),{ref:O})):x.createElement(w,Po({},R,{className:c,ref:O}),l))});Ay.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ay.classNames={fullWidth:y0,zeroRight:v0};var kV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=kV();return t&&e.setAttribute("nonce",t),e}function PV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function EV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var LV=function(){var e=0,t=null;return{add:function(s){e==0&&(t=AV())&&(PV(t,s),EV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},RV=function(){var e=LV();return function(t,s){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},iE=function(){var e=RV(),t=function(s){var n=s.styles,a=s.dynamic;return e(n,a),null};return t},TV={left:0,top:0,right:0,gap:0},a2=function(e){return parseInt(e||"",10)||0},IV=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[a2(s),a2(n),a2(a)]},FV=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return TV;var t=IV(e),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-s+t[2]-t[0])}},DV=iE(),Ih="data-scroll-locked",OV=function(e,t,s,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(vV,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ih,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(v0,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(y0,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(v0," .").concat(v0,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(y0," .").concat(y0,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ih,`] {
    `).concat(yV,": ").concat(l,`px;
  }
`)},hC=function(){var e=parseInt(document.body.getAttribute(Ih)||"0",10);return isFinite(e)?e:0},MV=function(){x.useEffect(function(){return document.body.setAttribute(Ih,(hC()+1).toString()),function(){var e=hC()-1;e<=0?document.body.removeAttribute(Ih):document.body.setAttribute(Ih,e.toString())}},[])},$V=function(e){var t=e.noRelative,s=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;MV();var i=x.useMemo(function(){return FV(a)},[a]);return x.createElement(DV,{styles:OV(i,!t,a,s?"":"!important")})},Yj=!1;if(typeof window<"u")try{var ix=Object.defineProperty({},"passive",{get:function(){return Yj=!0,!0}});window.addEventListener("test",ix,ix),window.removeEventListener("test",ix,ix)}catch{Yj=!1}var Wu=Yj?{passive:!1}:!1,BV=function(e){return e.tagName==="TEXTAREA"},oE=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!BV(e)&&s[t]==="visible")},zV=function(e){return oE(e,"overflowY")},UV=function(e){return oE(e,"overflowX")},fC=function(e,t){var s=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=lE(e,n);if(a){var i=cE(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},qV=function(e){var t=e.scrollTop,s=e.scrollHeight,n=e.clientHeight;return[t,s,n]},VV=function(e){var t=e.scrollLeft,s=e.scrollWidth,n=e.clientWidth;return[t,s,n]},lE=function(e,t){return e==="v"?zV(t):UV(t)},cE=function(e,t){return e==="v"?qV(t):VV(t)},HV=function(e,t){return e==="h"&&t==="rtl"?-1:1},WV=function(e,t,s,n,a){var i=HV(e,window.getComputedStyle(t).direction),o=i*n,l=s.target,c=t.contains(l),d=!1,u=o>0,h=0,p=0;do{if(!l)break;var f=cE(e,l),y=f[0],g=f[1],j=f[2],v=g-j-i*y;(y||v)&&lE(e,l)&&(h+=v,p+=y);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(h)<1||!u&&Math.abs(p)<1)&&(d=!0),d},ox=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},mC=function(e){return[e.deltaX,e.deltaY]},pC=function(e){return e&&"current"in e?e.current:e},GV=function(e,t){return e[0]===t[0]&&e[1]===t[1]},KV=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},YV=0,Gu=[];function JV(e){var t=x.useRef([]),s=x.useRef([0,0]),n=x.useRef(),a=x.useState(YV++)[0],i=x.useState(iE)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=xV([e.lockRef.current],(e.shards||[]).map(pC),!0).filter(Boolean);return g.forEach(function(j){return j.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(g,j){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=ox(g),w=s.current,N="deltaX"in g?g.deltaX:w[0]-v[0],C="deltaY"in g?g.deltaY:w[1]-v[1],k,O=g.target,R=Math.abs(N)>Math.abs(C)?"h":"v";if("touches"in g&&R==="h"&&O.type==="range")return!1;var E=fC(R,O);if(!E)return!0;if(E?k=R:(k=R==="v"?"h":"v",E=fC(R,O)),!E)return!1;if(!n.current&&"changedTouches"in g&&(N||C)&&(n.current=k),!k)return!0;var I=n.current||k;return WV(I,j,g,I==="h"?N:C)},[]),c=x.useCallback(function(g){var j=g;if(!(!Gu.length||Gu[Gu.length-1]!==i)){var v="deltaY"in j?mC(j):ox(j),w=t.current.filter(function(k){return k.name===j.type&&(k.target===j.target||j.target===k.shadowParent)&&GV(k.delta,v)})[0];if(w&&w.should){j.cancelable&&j.preventDefault();return}if(!w){var N=(o.current.shards||[]).map(pC).filter(Boolean).filter(function(k){return k.contains(j.target)}),C=N.length>0?l(j,N[0]):!o.current.noIsolation;C&&j.cancelable&&j.preventDefault()}}},[]),d=x.useCallback(function(g,j,v,w){var N={name:g,delta:j,target:v,should:w,shadowParent:ZV(v)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(C){return C!==N})},1)},[]),u=x.useCallback(function(g){s.current=ox(g),n.current=void 0},[]),h=x.useCallback(function(g){d(g.type,mC(g),g.target,l(g,e.lockRef.current))},[]),p=x.useCallback(function(g){d(g.type,ox(g),g.target,l(g,e.lockRef.current))},[]);x.useEffect(function(){return Gu.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Wu),document.addEventListener("touchmove",c,Wu),document.addEventListener("touchstart",u,Wu),function(){Gu=Gu.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Wu),document.removeEventListener("touchmove",c,Wu),document.removeEventListener("touchstart",u,Wu)}},[]);var f=e.removeScrollBar,y=e.inert;return x.createElement(x.Fragment,null,y?x.createElement(i,{styles:KV(a)}):null,f?x.createElement($V,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function ZV(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const XV=CV(aE,JV);var Gp=x.forwardRef(function(e,t){return x.createElement(Ay,Po({},e,{ref:t,sideCar:XV}))});Gp.classNames=Ay.classNames;var QV=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ku=new WeakMap,lx=new WeakMap,cx={},i2=0,dE=function(e){return e&&(e.host||dE(e.parentNode))},eH=function(e,t){return t.map(function(s){if(e.contains(s))return s;var n=dE(s);return n&&e.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},tH=function(e,t,s,n){var a=eH(t,Array.isArray(e)?e:[e]);cx[s]||(cx[s]=new WeakMap);var i=cx[s],o=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))u(p);else try{var f=p.getAttribute(n),y=f!==null&&f!=="false",g=(Ku.get(p)||0)+1,j=(i.get(p)||0)+1;Ku.set(p,g),i.set(p,j),o.push(p),g===1&&y&&lx.set(p,!0),j===1&&p.setAttribute(s,"true"),y||p.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return u(t),l.clear(),i2++,function(){o.forEach(function(h){var p=Ku.get(h)-1,f=i.get(h)-1;Ku.set(h,p),i.set(h,f),p||(lx.has(h)||h.removeAttribute(n),lx.delete(h)),f||h.removeAttribute(s)}),i2--,i2||(Ku=new WeakMap,Ku=new WeakMap,lx=new WeakMap,cx={})}},Py=function(e,t,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=QV(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),tH(n,a,s,"aria-hidden")):function(){return null}},Ey="Dialog",[uE,hE]=xa(Ey),[rH,lo]=uE(Ey),fE=e=>{const{__scopeDialog:t,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[d,u]=so({prop:n,defaultProp:a??!1,onChange:i,caller:Ey});return r.jsx(rH,{scope:t,triggerRef:l,contentRef:c,contentId:jn(),titleId:jn(),descriptionId:jn(),open:d,onOpenChange:u,onOpenToggle:x.useCallback(()=>u(h=>!h),[u]),modal:o,children:s})};fE.displayName=Ey;var mE="DialogTrigger",pE=x.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=lo(mE,s),i=Nr(t,a.triggerRef);return r.jsx(Ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":p5(a.open),...n,ref:i,onClick:pt(e.onClick,a.onOpenToggle)})});pE.displayName=mE;var f5="DialogPortal",[sH,gE]=uE(f5,{forceMount:void 0}),xE=e=>{const{__scopeDialog:t,forceMount:s,children:n,container:a}=e,i=lo(f5,t);return r.jsx(sH,{scope:t,forceMount:s,children:x.Children.map(n,o=>r.jsx($a,{present:s||i.open,children:r.jsx(Pf,{asChild:!0,container:a,children:o})}))})};xE.displayName=f5;var ov="DialogOverlay",vE=x.forwardRef((e,t)=>{const s=gE(ov,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,i=lo(ov,e.__scopeDialog);return i.modal?r.jsx($a,{present:n||i.open,children:r.jsx(aH,{...a,ref:t})}):null});vE.displayName=ov;var nH=Mc("DialogOverlay.RemoveScroll"),aH=x.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=lo(ov,s);return r.jsx(Gp,{as:nH,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Ot.div,{"data-state":p5(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),su="DialogContent",yE=x.forwardRef((e,t)=>{const s=gE(su,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,i=lo(su,e.__scopeDialog);return r.jsx($a,{present:n||i.open,children:i.modal?r.jsx(iH,{...a,ref:t}):r.jsx(oH,{...a,ref:t})})});yE.displayName=su;var iH=x.forwardRef((e,t)=>{const s=lo(su,e.__scopeDialog),n=x.useRef(null),a=Nr(t,s.contentRef,n);return x.useEffect(()=>{const i=n.current;if(i)return Py(i)},[]),r.jsx(bE,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:pt(e.onFocusOutside,i=>i.preventDefault())})}),oH=x.forwardRef((e,t)=>{const s=lo(su,e.__scopeDialog),n=x.useRef(!1),a=x.useRef(!1);return r.jsx(bE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=s.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=s.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),bE=x.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=lo(su,s),c=x.useRef(null),d=Nr(t,c);return ky(),r.jsxs(r.Fragment,{children:[r.jsx(Wp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(xu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":p5(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(cH,{titleId:l.titleId}),r.jsx(uH,{contentRef:c,descriptionId:l.descriptionId})]})]})}),m5="DialogTitle",jE=x.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=lo(m5,s);return r.jsx(Ot.h2,{id:a.titleId,...n,ref:t})});jE.displayName=m5;var wE="DialogDescription",NE=x.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=lo(wE,s);return r.jsx(Ot.p,{id:a.descriptionId,...n,ref:t})});NE.displayName=wE;var SE="DialogClose",_E=x.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=lo(SE,s);return r.jsx(Ot.button,{type:"button",...n,ref:t,onClick:pt(e.onClick,()=>a.onOpenChange(!1))})});_E.displayName=SE;function p5(e){return e?"open":"closed"}var CE="DialogTitleWarning",[lH,kE]=Vq(CE,{contentName:su,titleName:m5,docsSlug:"dialog"}),cH=({titleId:e})=>{const t=kE(CE),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},dH="DialogDescriptionWarning",uH=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kE(dH).contentName}}.`;return x.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},g5=fE,AE=pE,x5=xE,Ly=vE,Ry=yE,v5=jE,y5=NE,b5=_E;const Hr=g5,nu=AE,hH=x5,PE=x.forwardRef(({className:e,...t},s)=>r.jsx(Ly,{ref:s,className:it("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));PE.displayName=Ly.displayName;const Or=x.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(hH,{children:[r.jsx(PE,{}),r.jsxs(Ry,{ref:n,className:it("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,r.jsxs(b5,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(mu,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Or.displayName=Ry.displayName;const Mr=({className:e,...t})=>r.jsx("div",{className:it("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Mr.displayName="DialogHeader";const Kp=({className:e,...t})=>r.jsx("div",{className:it("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Kp.displayName="DialogFooter";const $r=x.forwardRef(({className:e,...t},s)=>r.jsx(v5,{ref:s,className:it("text-lg font-semibold leading-none tracking-tight",e),...t}));$r.displayName=v5.displayName;const El=x.forwardRef(({className:e,...t},s)=>r.jsx(y5,{ref:s,className:it("text-sm text-muted-foreground",e),...t}));El.displayName=y5.displayName;const Ma=x.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:it("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));Ma.displayName="Textarea";const fH=({isOpen:e,onClose:t})=>{const{toast:s}=Zs(),n=ns(),[a,i]=x.useState({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",student_count:"",bus_count:"",message:""}),[o,l]=x.useState(!1),c=u=>{const{name:h,value:p}=u.target;i(f=>({...f,[h]:p}))},d=async u=>{u.preventDefault(),l(!0);try{const h={first_name:a.first_name.trim(),last_name:a.last_name.trim(),email_address:a.email_address.trim(),school_name:a.school_name.trim(),message:a.message.trim()},p=Object.entries(h).filter(([j,v])=>!v).map(([j])=>j);if(p.length>0){s({title:"Error",description:`Please fill in all required fields: ${p.join(", ")}`,variant:"destructive"});return}const f=[];a.position&&f.push(`Position: ${a.position}`),a.student_count&&f.push(`Students: ${a.student_count}`),a.bus_count&&f.push(`Buses: ${a.bus_count}`),a.phone_number&&f.push(`Phone: ${a.phone_number}`);const y=a.message+(f.length>0?`

Additional Information:
${f.join(`
`)}`:""),g={first_name:h.first_name,last_name:h.last_name,email_address:h.email_address,school_name:h.school_name,message:y,message_type:"demo_request"};console.log("Submitting demo request with data:",g),await n(Zm(g)).unwrap(),s({title:"Demo Request Sent!",description:"We'll contact you within 24 hours to schedule your demo."}),i({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",student_count:"",bus_count:"",message:""}),t()}catch(h){console.error("Error submitting demo request:",h),s({title:"Error",description:typeof h=="string"?h:"Failed to send demo request. Please try again.",variant:"destructive"})}finally{l(!1)}};return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[r.jsxs(Mr,{children:[r.jsx($r,{className:"text-xl font-bold text-slate-900",children:"Request Demo"}),r.jsx(El,{className:"text-slate-600",children:"Get a personalized demo of our school transportation platform. We'll show you how it can transform your operations."})]}),r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"first_name",className:"text-sm font-medium text-slate-700",children:"First Name *"}),r.jsx(Oe,{id:"first_name",name:"first_name",type:"text",value:a.first_name,onChange:c,placeholder:"John",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"last_name",className:"text-sm font-medium text-slate-700",children:"Last Name *"}),r.jsx(Oe,{id:"last_name",name:"last_name",type:"text",value:a.last_name,onChange:c,placeholder:"Doe",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"email_address",className:"text-sm font-medium text-slate-700",children:"Email Address *"}),r.jsx(Oe,{id:"email_address",name:"email_address",type:"email",value:a.email_address,onChange:c,placeholder:"john@school.edu",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"phone_number",className:"text-sm font-medium text-slate-700",children:"Phone Number"}),r.jsx(Oe,{id:"phone_number",name:"phone_number",type:"tel",value:a.phone_number,onChange:c,placeholder:"+1 (555) 123-4567",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"school_name",className:"text-sm font-medium text-slate-700",children:"School/District Name *"}),r.jsx(Oe,{id:"school_name",name:"school_name",type:"text",value:a.school_name,onChange:c,placeholder:"Your School District",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"position",className:"text-sm font-medium text-slate-700",children:"Your Position"}),r.jsx(Oe,{id:"position",name:"position",type:"text",value:a.position,onChange:c,placeholder:"Principal, Admin, etc.",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"student_count",className:"text-sm font-medium text-slate-700",children:"Number of Students"}),r.jsx(Oe,{id:"student_count",name:"student_count",type:"number",value:a.student_count,onChange:c,placeholder:"500",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"bus_count",className:"text-sm font-medium text-slate-700",children:"Number of Buses"}),r.jsx(Oe,{id:"bus_count",name:"bus_count",type:"number",value:a.bus_count,onChange:c,placeholder:"10",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"message",className:"text-sm font-medium text-slate-700",children:"Additional Information"}),r.jsx(Ma,{id:"message",name:"message",value:a.message,onChange:c,placeholder:"Tell us about your transportation needs, specific requirements, or any questions you have...",rows:4,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 resize-none"})]}),r.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx(ur,{className:"h-5 w-5 text-emerald-600"}),r.jsx("span",{className:"font-medium text-emerald-800",children:"What's Included in Your Demo"})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm text-emerald-700",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ai,{className:"h-4 w-4"}),r.jsx("span",{children:"30-minute personalized walkthrough"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(hr,{className:"h-4 w-4"}),r.jsx("span",{children:"Live platform demonstration"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xn,{className:"h-4 w-4"}),r.jsx("span",{children:"Security & compliance overview"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(bn,{className:"h-4 w-4"}),r.jsx("span",{children:"Q&A session with our experts"})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[r.jsx(fe,{type:"button",variant:"outline",className:"flex-1",onClick:t,children:"Cancel"}),r.jsx(fe,{type:"submit",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Cy,{className:"h-4 w-4 mr-2"}),"Request Demo"]})})]}),r.jsx("div",{className:"text-xs text-slate-500 text-center",children:"We'll contact you within 24 hours to schedule your personalized demo."})]})]})})},mH=()=>{const{toast:e}=Zs(),t=ns(),[s,n]=x.useState({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",message:""}),[a,i]=x.useState(!1),o=c=>{const{name:d,value:u}=c.target;n(h=>({...h,[d]:u}))},l=async c=>{c.preventDefault(),i(!0);try{const d={first_name:s.first_name.trim(),last_name:s.last_name.trim(),email_address:s.email_address.trim(),school_name:s.school_name.trim(),message:s.message.trim()},u=Object.entries(d).filter(([y,g])=>!g).map(([y])=>y);if(u.length>0){e({title:"Error",description:`Please fill in all required fields: ${u.join(", ")}`,variant:"destructive"});return}const h=[];s.position&&h.push(`Position: ${s.position}`),s.phone_number&&h.push(`Phone: ${s.phone_number}`);const p=s.message+(h.length>0?`

Additional Information:
${h.join(`
`)}`:""),f={first_name:d.first_name,last_name:d.last_name,email_address:d.email_address,school_name:d.school_name,message:p,message_type:"inquiry_message"};console.log("Submitting contact form with data:",f),await t(Zm(f)).unwrap(),e({title:"Message Sent!",description:"We'll get back to you within 24 hours."}),n({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",message:""})}catch(d){console.error("Error submitting contact form:",d),e({title:"Error",description:typeof d=="string"?d:"Failed to send message. Please try again.",variant:"destructive"})}finally{i(!1)}};return r.jsxs("form",{onSubmit:l,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"first_name",className:"text-slate-700 font-medium",children:"First Name *"}),r.jsx(Oe,{id:"first_name",name:"first_name",type:"text",value:s.first_name,onChange:o,placeholder:"John",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 transition-colors"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"last_name",className:"text-slate-700 font-medium",children:"Last Name *"}),r.jsx(Oe,{id:"last_name",name:"last_name",type:"text",value:s.last_name,onChange:o,placeholder:"Doe",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 transition-colors"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"email_address",className:"text-slate-700 font-medium",children:"Email Address *"}),r.jsx(Oe,{id:"email_address",name:"email_address",type:"email",value:s.email_address,onChange:o,placeholder:"john@school.edu",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 transition-colors"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"phone_number",className:"text-slate-700 font-medium",children:"Phone Number"}),r.jsx(Oe,{id:"phone_number",name:"phone_number",type:"tel",value:s.phone_number,onChange:o,placeholder:"+1 (555) 123-4567",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 transition-colors"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"school_name",className:"text-slate-700 font-medium",children:"School/District Name *"}),r.jsx(Oe,{id:"school_name",name:"school_name",type:"text",value:s.school_name,onChange:o,placeholder:"Your School District",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 transition-colors"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"position",className:"text-slate-700 font-medium",children:"Your Position"}),r.jsx(Oe,{id:"position",name:"position",type:"text",value:s.position,onChange:o,placeholder:"Principal, Admin, etc.",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 transition-colors"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"message",className:"text-slate-700 font-medium",children:"Message *"}),r.jsx(Ma,{id:"message",name:"message",value:s.message,onChange:o,placeholder:"Tell us about your transportation needs and how we can help...",rows:4,required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 transition-colors resize-none"})]}),r.jsx(fe,{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl font-medium transition-all duration-200 hover:scale-105",disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Cy,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})},pH=gu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Te({className:e,variant:t,...s}){return r.jsx("div",{className:it(pH({variant:t}),e),...s})}function Gr({className:e,...t}){return r.jsx("div",{className:it("animate-pulse rounded-md bg-muted",e),...t})}function gH(){const e=ad(),{plans:t,loading:s,error:n}=ma(h=>h.subscription);console.log("Subscription state:",{plans:t,loading:s,error:n}),console.log("Plans type:",typeof t),console.log("Plans is array:",Array.isArray(t)),x.useEffect(()=>{e(Xi())},[e]);const a=h=>parseFloat(h).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2}),i=h=>{const p=h.toLowerCase();return p.includes("basic")||p.includes("starter")?{text:"Starter",variant:"secondary"}:p.includes("pro")||p.includes("professional")?{text:"Popular",variant:"default"}:p.includes("enterprise")||p.includes("premium")?{text:"Enterprise",variant:"default"}:null},o=h=>{const p=h.toLowerCase();return p.includes("basic")||p.includes("starter")?r.jsx(hr,{className:"h-6 w-6"}):p.includes("pro")||p.includes("professional")?r.jsx(ro,{className:"h-6 w-6"}):p.includes("enterprise")||p.includes("premium")?r.jsx(o5,{className:"h-6 w-6"}):r.jsx(cn,{className:"h-6 w-6"})};if(s)return r.jsx("section",{className:"py-20 bg-gradient-to-b from-slate-50 to-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx(Gr,{className:"h-8 w-32 mx-auto mb-4"}),r.jsx(Gr,{className:"h-12 w-96 mx-auto mb-6"}),r.jsx(Gr,{className:"h-6 w-96 mx-auto"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(h=>r.jsxs(Me,{className:"border-0 shadow-lg",children:[r.jsxs(Ke,{children:[r.jsx(Gr,{className:"h-6 w-32 mb-2"}),r.jsx(Gr,{className:"h-4 w-48"})]}),r.jsxs(Ve,{children:[r.jsx(Gr,{className:"h-8 w-24 mb-4"}),r.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(p=>r.jsx(Gr,{className:"h-4 w-full"},p))})]})]},h))})]})});if(n)return r.jsx("section",{className:"py-20 bg-gradient-to-b from-slate-50 to-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[r.jsx("h2",{className:"text-red-800 font-semibold text-xl mb-2",children:"Error Loading Subscription Plans"}),r.jsx("p",{className:"text-red-600 mb-4",children:n}),r.jsx(fe,{onClick:()=>e(Xi()),className:"bg-red-600 hover:bg-red-700",children:"Retry"})]})})});const l=Array.isArray(t)?t:[],c=[{id:"1",name:"Basic Plan",description:"Perfect for small schools getting started",base_price:"299.00",price_per_student:"5.00",price_per_bus:"50.00",features_json:{max_students:100,max_parents:200,max_buses:5,sms_notifications:!0,whatsapp_integration:!1,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!1,advanced_analytics:!1,api_access:!1},is_active:!0,default_billing_cycle:"monthly"},{id:"2",name:"Professional Plan",description:"Ideal for medium-sized school districts",base_price:"599.00",price_per_student:"3.00",price_per_bus:"40.00",features_json:{max_students:500,max_parents:1e3,max_buses:20,sms_notifications:!0,whatsapp_integration:!0,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!0,advanced_analytics:!0,api_access:!1},is_active:!0,default_billing_cycle:"monthly"},{id:"3",name:"Enterprise Plan",description:"For large school districts with advanced needs",base_price:"999.00",price_per_student:"2.00",price_per_bus:"30.00",features_json:{max_students:2e3,max_parents:4e3,max_buses:50,sms_notifications:!0,whatsapp_integration:!0,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!0,advanced_analytics:!0,api_access:!0},is_active:!0,default_billing_cycle:"monthly"}],d=l.length>0?l:c,u=l.length===0;return d.length===0?r.jsx("section",{className:"py-20 bg-gradient-to-b from-slate-50 to-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"text-center py-12",children:r.jsxs("div",{className:"text-gray-500",children:[r.jsx(Xn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Subscription Plans Available"}),r.jsx("p",{children:"Please check back later for available plans."})]})})})}):r.jsx("section",{className:"py-20 bg-gradient-to-b from-slate-50 to-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx(Te,{className:"mb-4 bg-emerald-100 text-emerald-800 border-emerald-200 px-4 py-2 rounded-full",children:"Pricing Plans"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:["Choose Your Perfect",r.jsx("span",{className:"text-emerald-600 block",children:"Subscription Plan"})]}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Flexible pricing options designed to meet the needs of schools of all sizes. Start with what you need and scale as you grow."}),u&&r.jsx("div",{className:"mt-4",children:r.jsx(Te,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Demo Data"})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(h=>{const p=i(h.name),f=o(h.name);return r.jsxs(Me,{className:`relative border-2 transition-all duration-300 hover:-translate-y-2 rounded-2xl overflow-hidden ${(p==null?void 0:p.text)==="Popular"?"border-emerald-600 shadow-xl scale-105":"border-slate-200 shadow-lg hover:shadow-xl"} bg-white`,children:[!h.is_active&&r.jsx("div",{className:"absolute top-4 right-4 z-10",children:r.jsx(Te,{variant:"secondary",children:"Inactive"})}),p&&r.jsx("div",{className:`text-center py-2 text-sm font-medium ${p.text==="Popular"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-700"}`,children:p.text}),r.jsxs(Ke,{className:"text-center pb-6",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center text-emerald-600",children:f})}),r.jsx(Je,{className:"text-2xl font-bold text-slate-900 mb-2",children:h.name.replace(/_/g," ").replace(/\b\w/g,y=>y.toUpperCase())}),r.jsx(br,{className:"text-slate-600",children:h.description})]}),r.jsxs(Ve,{className:"pb-8",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"text-3xl font-bold text-slate-900",children:a(h.base_price)}),r.jsx("span",{className:"text-slate-600",children:"/month"})]}),r.jsxs("div",{className:"text-sm text-slate-500 space-y-1",children:[r.jsxs("div",{children:["+ ",a(h.price_per_student)," per student"]}),r.jsxs("div",{children:["+ ",a(h.price_per_bus)," per bus"]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-slate-900 mb-3 text-center",children:"Plan Limits"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[r.jsxs("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[r.jsx("div",{className:"font-semibold text-emerald-600",children:h.features_json.max_students}),r.jsx("div",{className:"text-slate-500 text-xs",children:"Students"})]}),r.jsxs("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[r.jsx("div",{className:"font-semibold text-emerald-600",children:h.features_json.max_parents}),r.jsx("div",{className:"text-slate-500 text-xs",children:"Parents"})]}),r.jsxs("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[r.jsx("div",{className:"font-semibold text-emerald-600",children:h.features_json.max_buses}),r.jsx("div",{className:"text-slate-500 text-xs",children:"Buses"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-slate-900 mb-3",children:"Features"}),r.jsx("div",{className:"space-y-2",children:Object.entries(h.features_json).map(([y,g])=>typeof g=="boolean"?r.jsx("div",{className:"flex items-center justify-between text-sm",children:r.jsxs("div",{className:"flex items-center gap-2",children:[g?r.jsx(Rn,{className:"h-4 w-4 text-emerald-500"}):r.jsx(mu,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"capitalize",children:y.replace(/_/g," ")})]})},y):null)})]}),r.jsx("div",{className:"pt-4 border-t border-slate-200 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Billing Cycle:"}),r.jsx(Te,{variant:"outline",className:"capitalize",children:h.default_billing_cycle})]})}),r.jsx(fe,{className:`w-full py-3 rounded-xl font-medium transition-all duration-200 ${(p==null?void 0:p.text)==="Popular"?"bg-emerald-600 hover:bg-emerald-700 text-white hover:scale-105":"bg-slate-100 hover:bg-emerald-600 text-slate-700 hover:text-white hover:scale-105"}`,disabled:!h.is_active,children:h.is_active?"Get Started":"Coming Soon"})]})]},h.id)})}),r.jsx("div",{className:"mt-16 text-center",children:r.jsxs("div",{className:"bg-emerald-50 p-8 rounded-2xl border border-emerald-200",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[r.jsx(Rh,{className:"h-5 w-5 text-emerald-600"}),r.jsx("span",{className:"text-emerald-800 font-semibold",children:"All plans include:"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-emerald-700",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(Rn,{className:"h-4 w-4"}),r.jsx("span",{children:"24/7 Support"})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(Rn,{className:"h-4 w-4"}),r.jsx("span",{children:"Free Setup"})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(Rn,{className:"h-4 w-4"}),r.jsx("span",{children:"No Hidden Fees"})]})]})]})})]})})}const xH=()=>{const[e,t]=x.useState(null),[s,n]=x.useState(!1),[a,i]=x.useState(!1),o=x.useRef(null),l=Ai(),{token:c,user:d}=At(N=>N.auth),u=!!c&&!!d,p=(()=>{try{const N=localStorage.getItem("token");if(N&&!lf(N))return!0;const C=localStorage.getItem("persist:auth");if(C){const k=JSON.parse(C),O=JSON.parse(k.token||"null");if(O&&!lf(O))return!0}return!1}catch(N){return console.error("Error checking login history:",N),!1}})();x.useEffect(()=>{n(!0)},[]),x.useEffect(()=>{const N=()=>{const C=window.scrollY,k=document.querySelector("nav");k&&(C>10?k.classList.add("shadow-lg","bg-white/95"):k.classList.remove("shadow-lg","bg-white/95"))};return window.addEventListener("scroll",N),()=>window.removeEventListener("scroll",N)},[]);const f=[{icon:r.jsx(cn,{className:"h-8 w-8 text-emerald-600"}),title:"Real-time GPS Tracking",description:"Track every school bus in real-time with precise location data and live updates for parents and administrators."},{icon:r.jsx(Xn,{className:"h-8 w-8 text-emerald-600"}),title:"Advanced Safety Features",description:"Comprehensive safety monitoring including speed alerts, route compliance, and emergency response systems."},{icon:r.jsx(BP,{className:"h-8 w-8 text-emerald-600"}),title:"AI Route Optimization",description:"Intelligent route planning that reduces fuel costs, travel time, and ensures optimal efficiency."},{icon:r.jsx(hr,{className:"h-8 w-8 text-emerald-600"}),title:"Parent Portal",description:"Dedicated mobile app for parents to track their child's bus location and receive real-time notifications."},{icon:r.jsx(bn,{className:"h-8 w-8 text-emerald-600"}),title:"Live Updates",description:"Instant notifications for delays, route changes, and arrival times to keep everyone informed."},{icon:r.jsx(ro,{className:"h-8 w-8 text-emerald-600"}),title:"Analytics Dashboard",description:"Comprehensive reporting and analytics to optimize operations and improve efficiency."}],y=["Reduce transportation costs by up to 30%","Improve safety with real-time monitoring","Enhance parent satisfaction and communication","Streamline administrative operations","Ensure compliance with transportation regulations","Provide data-driven insights for optimization"],g=[{name:"Sarah Johnson",role:"School Principal",content:"The transportation system has revolutionized how we manage our school buses. Parents love the real-time updates!",rating:5,avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face"},{name:"Michael Chen",role:"Transportation Director",content:"The analytics and reporting features have made our operations so much more efficient. Highly recommended!",rating:5,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face&sat=-100&brightness=0.8&contrast=1.2"},{name:"Lisa Rodriguez",role:"Parent",content:"Knowing exactly where my child's bus is gives me complete peace of mind. The app is fantastic!",rating:5,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face&sat=-100&brightness=0.8&contrast=1.2"}],j=[{question:"How does the GPS tracking work?",answer:"Our system uses advanced GPS technology to provide real-time location data for every school bus. Parents and administrators can track buses through our mobile app or web dashboard with updates every 30 seconds."},{question:"Is the system secure and private?",answer:"Yes, we prioritize security and privacy. All data is encrypted, and we comply with FERPA and other educational privacy regulations. Student information is protected with industry-standard security measures."},{question:"Can parents track multiple children?",answer:"Absolutely! Parents can track multiple children from a single account. Each child's bus location and schedule is clearly displayed with individual notifications and updates."},{question:"What happens during emergencies?",answer:"Our system includes emergency protocols with instant alerts to administrators, drivers, and parents. We provide real-time communication channels and emergency response coordination."},{question:"How long does implementation take?",answer:"Most schools are up and running within 2-3 weeks. Our team handles installation, training, and setup to ensure a smooth transition with minimal disruption to your operations."}],v=[{number:"500+",label:"Schools Trust Us"},{number:"50,000+",label:"Students Transported"},{number:"99.9%",label:"Uptime Reliability"},{number:"4.9/5",label:"Customer Rating"}],w=[{icon:r.jsx(zo,{className:"h-6 w-6 text-emerald-600"}),title:"Phone Support",description:"24/7 dedicated support",value:"+1 (555) 123-4567"},{icon:r.jsx(Oo,{className:"h-6 w-6 text-emerald-600"}),title:"Email Support",description:"Quick response guaranteed",value:"hello@luxcub.com"},{icon:r.jsx(Ks,{className:"h-6 w-6 text-emerald-600"}),title:"Office Location",description:"Visit our headquarters",value:"123 Innovation Drive, Tech City, TC 12345"}];return r.jsxs("div",{className:"min-h-screen bg-white from-slate-50 via-white to-emerald-50",children:[r.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-transparent transition-all duration-300",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("span",{className:"text-xl font-bold text-white",children:"LuxCub"})}),r.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[r.jsx("a",{href:"#features",className:"text-white hover:text-emerald-300 transition-colors font-medium",children:"Features"}),r.jsx("a",{href:"#pricing",className:"text-white hover:text-emerald-300 transition-colors font-medium",children:"Pricing"}),r.jsx("a",{href:"#contact",className:"text-white hover:text-emerald-300 transition-colors font-medium",children:"Contact"})]}),r.jsx(fe,{className:"bg-emerald-600 hover:bg-emerald-700 text-white border-0 px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105",onClick:()=>{l(u?"/":p?"/login":"/subscription-selection")},children:u?"Dashboard":p?"Login":"Get Started"})]})})}),r.jsxs("section",{ref:o,className:"relative min-h-screen flex items-center overflow-hidden bg-gradient-to-br from-slate-900 via-emerald-900 to-teal-900 pt-16",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[r.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-tr from-emerald-500 via-cyan-500 to-teal-400 rounded-full opacity-40 blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute bottom-0 left-20 w-80 h-80 bg-gradient-to-tr from-cyan-500 via-emerald-500 to-teal-400 rounded-full opacity-30 blur-3xl animate-pulse delay-1000"}),r.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-gradient-to-bl from-emerald-400 via-teal-500 to-cyan-400 rounded-full opacity-25 blur-3xl animate-pulse delay-2000"}),r.jsxs("div",{className:"absolute inset-0",children:[r.jsx("div",{className:"absolute top-20 left-1/4 w-1 h-4 bg-gradient-to-b from-emerald-400 to-transparent opacity-80 animate-bounce"}),r.jsx("div",{className:"absolute top-40 right-1/3 w-1 h-3 bg-gradient-to-b from-cyan-400 to-transparent opacity-80 animate-bounce delay-300"}),r.jsx("div",{className:"absolute top-60 left-1/2 w-1 h-5 bg-gradient-to-b from-teal-400 to-transparent opacity-80 animate-bounce delay-600"}),r.jsx("div",{className:"absolute top-80 right-1/4 w-1 h-4 bg-gradient-to-b from-emerald-400 to-transparent opacity-80 animate-bounce delay-900"}),r.jsx("div",{className:"absolute top-32 left-3/4 w-1 h-3 bg-gradient-to-b from-cyan-400 to-transparent opacity-80 animate-bounce delay-1200"})]}),r.jsx("div",{className:"absolute top-1/4 left-1/3 w-32 h-32 bg-gradient-to-r from-emerald-600 to-cyan-600 rounded-full opacity-30 blur-xl animate-pulse"}),r.jsx("div",{className:"absolute top-1/3 right-1/4 w-24 h-24 bg-gradient-to-r from-cyan-600 to-teal-600 rounded-full opacity-25 blur-xl animate-pulse delay-1000"}),r.jsx("div",{className:"absolute bottom-1/3 left-1/4 w-20 h-20 bg-gradient-to-r from-teal-600 to-emerald-600 rounded-full opacity-20 blur-xl animate-pulse delay-2000"}),r.jsx("div",{className:"absolute top-1/3 left-1/6 w-16 h-16 border border-emerald-400/30 rotate-45 animate-spin-slow"}),r.jsx("div",{className:"absolute bottom-1/4 right-1/6 w-12 h-12 border border-cyan-400/30 -rotate-45 animate-spin-slow-reverse"})]}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-center",children:[r.jsxs("div",{className:"text-left space-y-6",children:[r.jsxs(Te,{variant:"secondary",className:`inline-flex items-center bg-gradient-to-r from-emerald-500/20 to-cyan-500/20 text-emerald-300 border-emerald-400/40 px-3 py-1.5 rounded-full transition-all duration-1000 backdrop-blur-sm ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"} hover:scale-105 transition-transform shadow-lg`,children:[r.jsx(Rh,{className:"h-3 w-3 mr-2 text-emerald-300 animate-pulse"}),"Trusted by 500+ Schools Nationwide"]}),r.jsx("div",{className:"space-y-3",children:r.jsxs("h1",{className:`text-3xl md:text-4xl lg:text-5xl font-bold text-white leading-tight transition-all duration-1000 delay-200 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:["Modern School",r.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent block",children:"Transportation"}),r.jsx("span",{className:"text-lg md:text-xl lg:text-2xl font-normal text-white/80 block mt-1",children:"Made Simple"})]})}),r.jsx("div",{className:`w-24 h-0.5 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full transition-all duration-1000 delay-300 ${s?"opacity-100":"opacity-0"}`}),r.jsx("p",{className:`text-base text-white/90 leading-relaxed max-w-lg transition-all duration-1000 delay-400 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:"Transform your school transportation with our comprehensive platform. Real-time tracking, smart routes, and complete transparency for parents, drivers, and administrators."}),r.jsxs("div",{className:`flex flex-col sm:flex-row gap-3 transition-all duration-1000 delay-900 ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[r.jsxs(fe,{size:"lg",className:"text-sm px-6 py-3 bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-700 hover:to-cyan-700 text-white border-0 hover:scale-105 transition-all duration-300 shadow-xl hover:shadow-2xl rounded-xl font-semibold",onClick:()=>i(!0),children:[r.jsx(Wj,{className:"h-4 w-4 mr-2"}),"Request Demo"]}),r.jsxs(fe,{variant:"outline",size:"lg",className:"text-sm px-6 py-3 border-2 border-emerald-400 text-emerald-400 hover:bg-emerald-400/10 hover:scale-105 transition-all duration-300 rounded-xl font-semibold backdrop-blur-sm",children:[r.jsx(RP,{className:"h-4 w-4 mr-2"}),"Learn More"]})]})]}),r.jsxs("div",{className:"relative flex items-center justify-center",children:[r.jsxs("div",{className:"relative w-80 h-80",children:[r.jsx("div",{className:"absolute inset-0 border-2 border-emerald-400/40 rounded-full animate-spin-slow shadow-lg shadow-emerald-400/20"}),r.jsx("div",{className:"absolute inset-4 border-2 border-cyan-400/50 rounded-full animate-spin-slow-reverse shadow-lg shadow-cyan-400/20"}),r.jsx("div",{className:"absolute inset-8 border-2 border-teal-400/60 rounded-full animate-spin-slow shadow-lg shadow-teal-400/20"}),r.jsx("div",{className:"absolute inset-12 bg-gradient-to-br from-emerald-500 via-cyan-500 to-teal-500 rounded-full flex items-center justify-center shadow-2xl",children:r.jsx("div",{className:"w-20 h-20 bg-white/30 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/20",children:r.jsx(cn,{className:"h-10 w-10 text-white animate-pulse"})})}),r.jsx("div",{className:"absolute inset-0 animate-spin-slow",children:r.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:r.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full flex items-center justify-center shadow-lg",children:r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})}),r.jsx("div",{className:"absolute inset-0 animate-spin-slow-reverse",children:r.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2",children:r.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-cyan-400 to-teal-400 rounded-full flex items-center justify-center shadow-lg",children:r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})}),r.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:r.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full animate-bounce shadow-lg"})}),r.jsx("div",{className:"absolute -bottom-3 left-1/2 transform -translate-x-1/2",children:r.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-cyan-400 to-teal-400 rounded-full animate-bounce delay-300 shadow-lg"})}),r.jsx("div",{className:"absolute top-1/2 -left-3 transform -translate-y-1/2",children:r.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-teal-400 to-emerald-400 rounded-full animate-bounce delay-600 shadow-lg"})}),r.jsx("div",{className:"absolute top-1/2 -right-3 transform -translate-y-1/2",children:r.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full animate-bounce delay-900 shadow-lg"})}),r.jsx("div",{className:"absolute top-6 left-6",children:r.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-cyan-400 to-teal-400 rounded-full animate-pulse shadow-md"})}),r.jsx("div",{className:"absolute top-6 right-6",children:r.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-teal-400 to-emerald-400 rounded-full animate-pulse delay-200 shadow-md"})}),r.jsx("div",{className:"absolute bottom-6 left-6",children:r.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full animate-pulse delay-400 shadow-md"})}),r.jsx("div",{className:"absolute bottom-6 right-6",children:r.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-cyan-400 to-teal-400 rounded-full animate-pulse delay-600 shadow-md"})}),r.jsx("div",{className:"absolute top-12 left-12",children:r.jsx("div",{className:"w-2 h-2 bg-emerald-300 rounded-full animate-pulse delay-100"})}),r.jsx("div",{className:"absolute top-12 right-12",children:r.jsx("div",{className:"w-2 h-2 bg-cyan-300 rounded-full animate-pulse delay-300"})}),r.jsx("div",{className:"absolute bottom-12 left-12",children:r.jsx("div",{className:"w-2 h-2 bg-teal-300 rounded-full animate-pulse delay-500"})}),r.jsx("div",{className:"absolute bottom-12 right-12",children:r.jsx("div",{className:"w-2 h-2 bg-emerald-300 rounded-full animate-pulse delay-700"})})]}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400/30 to-cyan-400/30 blur-3xl -z-10 animate-pulse"}),r.jsx("div",{className:"absolute inset-0",children:r.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 320 320",children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"dataFlow",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",style:{stopColor:"#10b981",stopOpacity:.8}}),r.jsx("stop",{offset:"100%",style:{stopColor:"#06b6d4",stopOpacity:.8}})]}),r.jsxs("linearGradient",{id:"dataFlow2",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",style:{stopColor:"#06b6d4",stopOpacity:.6}}),r.jsx("stop",{offset:"100%",style:{stopColor:"#0d9488",stopOpacity:.6}})]})]}),r.jsx("circle",{cx:"160",cy:"160",r:"150",fill:"none",stroke:"url(#dataFlow)",strokeWidth:"2",strokeDasharray:"8,8",className:"animate-spin-slow"}),r.jsx("circle",{cx:"160",cy:"160",r:"130",fill:"none",stroke:"url(#dataFlow2)",strokeWidth:"1.5",strokeDasharray:"5,5",className:"animate-spin-slow-reverse"}),r.jsx("circle",{cx:"160",cy:"160",r:"110",fill:"none",stroke:"url(#dataFlow)",strokeWidth:"1",strokeDasharray:"3,3",className:"animate-spin-slow"})]})}),r.jsx("div",{className:"absolute inset-0",children:r.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 320 320",children:[r.jsx("line",{x1:"160",y1:"10",x2:"160",y2:"310",stroke:"url(#dataFlow)",strokeWidth:"1",opacity:"0.3"}),r.jsx("line",{x1:"10",y1:"160",x2:"310",y2:"160",stroke:"url(#dataFlow2)",strokeWidth:"1",opacity:"0.3"}),r.jsx("line",{x1:"30",y1:"30",x2:"290",y2:"290",stroke:"url(#dataFlow)",strokeWidth:"1",opacity:"0.2"}),r.jsx("line",{x1:"290",y1:"30",x2:"30",y2:"290",stroke:"url(#dataFlow2)",strokeWidth:"1",opacity:"0.2"})]})})]})]})}),r.jsxs("div",{className:"absolute inset-0 -z-10",children:[r.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 md:w-96 md:h-96 bg-white/5 rounded-full blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-56 h-56 md:w-80 md:h-80 bg-white/3 rounded-full blur-3xl animate-pulse delay-1000"})]})]}),r.jsx("section",{className:"py-16 bg-white border-y border-slate-200 ml-10 mr-10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:v.map((N,C)=>r.jsxs("div",{className:"text-center group hover:scale-105 transition-transform duration-300",children:[r.jsx("div",{className:"text-4xl md:text-5xl font-bold text-emerald-600 mb-3 group-hover:text-emerald-700 transition-colors",children:N.number}),r.jsx("div",{className:"text-slate-600 group-hover:text-slate-800 transition-colors font-medium",children:N.label})]},C))})})}),r.jsx("section",{id:"features",className:"py-20 bg-gradient-to-b from-white to-slate-50 ml-10 mr-10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx(Te,{className:"mb-4 bg-emerald-100 text-emerald-800 border-emerald-200 px-4 py-2 rounded-full",children:"Features"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:["Everything You Need for",r.jsx("span",{className:"text-emerald-600 block",children:"Safe Transportation"})]}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Our comprehensive platform provides all the tools needed to manage school transportation efficiently and safely."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:f.map((N,C)=>r.jsxs(Me,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 group bg-white rounded-2xl overflow-hidden",children:[r.jsxs(Ke,{className:"pb-4",children:[r.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:N.icon}),r.jsx(Je,{className:"text-xl group-hover:text-emerald-600 transition-colors font-semibold",children:N.title})]}),r.jsx(Ve,{children:r.jsx(br,{className:"text-base group-hover:text-slate-700 transition-colors leading-relaxed",children:N.description})})]},C))})]})}),r.jsx("section",{className:"py-20 bg-white ml-10 mr-10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[r.jsxs("div",{children:[r.jsx(Te,{className:"mb-6 bg-emerald-100 text-emerald-800 border-emerald-200 px-4 py-2 rounded-full",children:"Why Choose LuxCub?"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-8 leading-tight",children:["Join hundreds of schools that have",r.jsx("span",{className:"text-emerald-600 block",children:"transformed their operations"})]}),r.jsx("p",{className:"text-xl text-slate-600 mb-10 leading-relaxed",children:"Our platform has helped schools across the country improve their transportation efficiency, safety, and parent satisfaction."}),r.jsx("div",{className:"space-y-6",children:y.map((N,C)=>r.jsxs("div",{className:"flex items-center space-x-4 group hover:translate-x-2 transition-transform duration-300",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(ur,{className:"h-5 w-5 text-emerald-600"})}),r.jsx("span",{className:"text-slate-700 group-hover:text-emerald-600 transition-colors text-lg",children:N})]},C))})]}),r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1753866768/images__1_-removebg-preview_gkn47i.png",alt:"School Bus Fleet",className:"w-full h-auto rounded-3xl"}),r.jsx(Me,{className:"absolute -bottom-8 -right-8 p-8 shadow-2xl bg-white rounded-2xl border border-slate-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl font-bold text-emerald-600 mb-2",children:"500+"}),r.jsx("div",{className:"text-lg text-slate-600 mb-3",children:"Schools Trust Us"}),r.jsx("div",{className:"flex justify-center space-x-1 mb-2",children:[...Array(5)].map((N,C)=>r.jsx(Rh,{className:"h-5 w-5 text-yellow-400 fill-current"},C))}),r.jsx("p",{className:"text-sm text-slate-500",children:"4.9/5 average rating"})]})})]})]})})}),r.jsx("section",{className:"py-20 bg-gradient-to-b from-slate-50 to-white ml-10 mr-10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx(Te,{className:"mb-4 bg-emerald-100 text-emerald-800 border-emerald-200 px-4 py-2 rounded-full",children:"Fleet Management"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:["Modern School Bus Fleet",r.jsx("span",{className:"text-emerald-600 block",children:"Management"})]}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"See how our platform manages real school bus fleets with advanced tracking and safety features."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs(Me,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-white rounded-2xl overflow-hidden group",children:[r.jsxs(Ke,{className:"pb-4",children:[r.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:r.jsx(cn,{className:"h-12 w-12 text-emerald-600"})}),r.jsx(Je,{className:"text-xl group-hover:text-emerald-600 transition-colors font-semibold",children:"GPS Tracking"})]}),r.jsxs(Ve,{children:[r.jsx(br,{className:"text-base group-hover:text-slate-700 transition-colors leading-relaxed",children:"Real-time location monitoring for every school bus with precise GPS coordinates and live updates every 30 seconds."}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Live location updates"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Route history tracking"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Speed monitoring"})]})]})]})]}),r.jsxs(Me,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-white rounded-2xl overflow-hidden group",children:[r.jsxs(Ke,{className:"pb-4",children:[r.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:r.jsx(Xn,{className:"h-12 w-12 text-emerald-600"})}),r.jsx(Je,{className:"text-xl group-hover:text-emerald-600 transition-colors font-semibold",children:"Safety Monitoring"})]}),r.jsxs(Ve,{children:[r.jsx(br,{className:"text-base group-hover:text-slate-700 transition-colors leading-relaxed",children:"Advanced safety protocols with real-time alerts for speed violations, route deviations, and emergency situations."}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Speed limit alerts"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Emergency response"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Driver behavior monitoring"})]})]})]})]}),r.jsxs(Me,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-white rounded-2xl overflow-hidden group",children:[r.jsxs(Ke,{className:"pb-4",children:[r.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:r.jsx(Ks,{className:"h-12 w-12 text-emerald-600"})}),r.jsx(Je,{className:"text-xl group-hover:text-emerald-600 transition-colors font-semibold",children:"Route Optimization"})]}),r.jsxs(Ve,{children:[r.jsx(br,{className:"text-base group-hover:text-slate-700 transition-colors leading-relaxed",children:"AI-powered route planning that optimizes pickups, drop-offs, and fuel efficiency while reducing travel time."}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"AI route planning"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Fuel cost reduction"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Traffic optimization"})]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-8",children:[r.jsxs(Me,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-white rounded-2xl overflow-hidden group",children:[r.jsxs(Ke,{className:"pb-4",children:[r.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:r.jsx(YU,{className:"h-12 w-12 text-emerald-600"})}),r.jsx(Je,{className:"text-xl group-hover:text-emerald-600 transition-colors font-semibold",children:"Mobile App"})]}),r.jsxs(Ve,{children:[r.jsx(br,{className:"text-base group-hover:text-slate-700 transition-colors leading-relaxed",children:"Dedicated mobile applications for drivers, parents, and administrators with real-time notifications and updates."}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Driver app"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Parent portal"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Admin dashboard"})]})]})]})]}),r.jsxs(Me,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-white rounded-2xl overflow-hidden group",children:[r.jsxs(Ke,{className:"pb-4",children:[r.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:r.jsx(Sy,{className:"h-12 w-12 text-emerald-600"})}),r.jsx(Je,{className:"text-xl group-hover:text-emerald-600 transition-colors font-semibold",children:"Analytics & Reports"})]}),r.jsxs(Ve,{children:[r.jsx(br,{className:"text-base group-hover:text-slate-700 transition-colors leading-relaxed",children:"Comprehensive reporting and analytics to optimize operations, reduce costs, and improve efficiency."}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Performance metrics"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Cost analysis"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Custom reports"})]})]})]})]}),r.jsxs(Me,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-white rounded-2xl overflow-hidden group",children:[r.jsxs(Ke,{className:"pb-4",children:[r.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:r.jsx(MP,{className:"h-12 w-12 text-emerald-600"})}),r.jsx(Je,{className:"text-xl group-hover:text-emerald-600 transition-colors font-semibold",children:"Security & Compliance"})]}),r.jsxs(Ve,{children:[r.jsx(br,{className:"text-base group-hover:text-slate-700 transition-colors leading-relaxed",children:"Enterprise-grade security with FERPA compliance and data protection for student safety and privacy."}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"FERPA compliant"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Data encryption"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-4 w-4 text-emerald-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Access controls"})]})]})]})]})]})]})}),r.jsx("section",{className:"py-20 bg-white ml-10 mr-10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx(Te,{className:"mb-4 bg-emerald-100 text-emerald-800 border-emerald-200 px-4 py-2 rounded-full",children:"Testimonials"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:["What Our Customers",r.jsx("span",{className:"text-emerald-600 block",children:"Say"})]}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Hear from school administrators, transportation directors, and parents who have transformed their school transportation with LuxCub."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:g.map((N,C)=>r.jsx(Me,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-white rounded-2xl overflow-hidden",children:r.jsxs(Ve,{className:"p-8",children:[r.jsx("div",{className:"flex items-center space-x-1 mb-6",children:[...Array(N.rating)].map((k,O)=>r.jsx(Rh,{className:"h-5 w-5 text-yellow-400 fill-current"},O))}),r.jsxs("p",{className:"text-slate-600 mb-6 leading-relaxed text-lg",children:['"',N.content,'"']}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("img",{src:N.avatar,alt:N.name,className:"w-12 h-12 rounded-full object-cover"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-slate-900",children:N.name}),r.jsx("div",{className:"text-slate-600",children:N.role})]})]})]})},C))})]})}),r.jsx(gH,{}),r.jsx("section",{className:"py-20 bg-white ml-10 mr-10",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx(Te,{className:"mb-4 bg-emerald-100 text-emerald-800 border-emerald-200 px-4 py-2 rounded-full",children:"FAQ"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:["Frequently Asked",r.jsx("span",{className:"text-emerald-600 block",children:"Questions"})]}),r.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed",children:"Find answers to common questions about our school transportation platform."})]}),r.jsx("div",{className:"space-y-4",children:j.map((N,C)=>r.jsxs(Me,{className:"border border-slate-200 rounded-2xl overflow-hidden hover:shadow-lg transition-all duration-200",children:[r.jsxs("button",{onClick:()=>t(e===C?null:C),className:"w-full p-6 text-left flex items-center justify-between hover:bg-slate-50 transition-colors",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:N.question}),e===C?r.jsx(IP,{className:"h-5 w-5 text-slate-600"}):r.jsx(_y,{className:"h-5 w-5 text-slate-600"})]}),e===C&&r.jsx("div",{className:"px-6 pb-6",children:r.jsx("p",{className:"text-slate-600 leading-relaxed",children:N.answer})})]},C))})]})}),r.jsx("section",{id:"contact",className:"py-20 bg-gradient-to-b from-slate-50 to-white ml-10 mr-10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx(Te,{className:"mb-4 bg-emerald-100 text-emerald-800 border-emerald-200 px-4 py-2 rounded-full",children:"Contact Us"}),r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:["Get in Touch",r.jsx("span",{className:"text-emerald-600 block",children:"With Our Team"})]}),r.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ready to transform your school transportation? Contact us today for a free consultation and personalized demo."})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Let's Start a Conversation"}),r.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:"Our team is here to help you understand how LuxCub can transform your school transportation operations. We'll provide a personalized demo and answer all your questions."})]}),r.jsx("div",{className:"space-y-6",children:w.map((N,C)=>r.jsxs("div",{className:"flex items-start space-x-4 group hover:translate-x-2 transition-transform duration-300",children:[r.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:N.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-slate-900 text-lg mb-1",children:N.title}),r.jsx("div",{className:"text-slate-600 mb-2",children:N.description}),r.jsx("div",{className:"text-emerald-600 font-medium",children:N.value})]})]},C))}),r.jsxs("div",{className:"bg-emerald-50 p-6 rounded-2xl border border-emerald-200",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx($U,{className:"h-6 w-6 text-emerald-600"}),r.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Expert Support"})]}),r.jsx("p",{className:"text-slate-600 leading-relaxed",children:"Our dedicated support team is available 24/7 to help you with any questions or technical issues. We're committed to your success."})]})]}),r.jsxs(Me,{className:"shadow-xl border-0 rounded-2xl overflow-hidden",children:[r.jsxs(Ke,{className:"bg-emerald-600 text-white",children:[r.jsx(Je,{className:"text-2xl",children:"Send us a Message"}),r.jsx(br,{className:"text-emerald-100",children:"Fill out the form below and we'll get back to you within 24 hours."})]}),r.jsx(Ve,{className:"p-8",children:r.jsx(mH,{})})]})]})]})}),r.jsx("section",{className:"py-20 bg-gradient-to-r from-emerald-600 to-emerald-700 ml-10 mr-10",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Ready to Transform Your",r.jsx("span",{className:"block",children:"School Transportation?"})]}),r.jsx("p",{className:"text-xl text-emerald-100 mb-10 leading-relaxed max-w-2xl mx-auto",children:"Join hundreds of schools that have already improved their transportation operations with LuxCub. Get started today and see the difference."}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:r.jsxs(fe,{size:"lg",className:"text-lg px-8 py-6 bg-white text-emerald-600 hover:bg-emerald-50 hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl rounded-xl font-semibold",onClick:()=>i(!0),children:[r.jsx(Wj,{className:"h-5 w-5 mr-3"}),"Request a Demo"]})})]})}),r.jsx("footer",{className:"bg-slate-900 text-white py-16",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"col-span-1 md:col-span-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[r.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center",children:r.jsx(cn,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-xl font-bold",children:"LuxCub"})]}),r.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed max-w-md",children:"Modern school transportation management platform that helps schools improve safety, efficiency, and parent satisfaction."}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("a",{href:"#",className:"text-slate-400 hover:text-emerald-400 transition-colors",children:r.jsx(zo,{className:"h-5 w-5"})}),r.jsx("a",{href:"#",className:"text-slate-400 hover:text-emerald-400 transition-colors",children:r.jsx(Oo,{className:"h-5 w-5"})}),r.jsx("a",{href:"#",className:"text-slate-400 hover:text-emerald-400 transition-colors",children:r.jsx(Ks,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Product"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Features"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Pricing"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Demo"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"API"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Company"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"About"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Blog"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Careers"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Contact"})})]})]})]}),r.jsx("div",{className:"border-t border-slate-800 mt-12 pt-8 text-center",children:r.jsx("p",{className:"text-slate-400",children:" 2024 LuxCub. All rights reserved."})})]})}),r.jsx(fH,{isOpen:a,onClose:()=>i(!1)})]})},vH=()=>{const e=ad(),{registrationLoading:t,registrationError:s,registrationSuccess:n}=ma(V=>V.schools),[a,i]=x.useState({schoolName:"",schoolType:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",website:"",principalName:"",principalPhone:"",principalEmail:"",description:"",longitude:"",latitude:"",operatingHoursStart:"06:30",operatingHoursEnd:"18:00",estimatedStudents:"",estimatedBuses:""}),[o,l]=x.useState(null),[c,d]=x.useState({}),[u,h]=x.useState(""),[p,f]=x.useState(!1),y=Ai(),g=io(),{toast:j}=Zs();x.useEffect(()=>{var J;const V=localStorage.getItem("selectedSubscriptionPlan"),K=(J=g.state)==null?void 0:J.selectedPlan;K?l(K):V?l(JSON.parse(V)):(j({title:"No Plan Selected",description:"Please select a subscription plan first."}),y("/subscription-selection"))},[g.state,y,j]),x.useEffect(()=>{n&&j({title:"Registration Successful",description:"Your school has been registered successfully!"})},[n,j]),x.useEffect(()=>{s&&j({variant:"destructive",title:"Registration Failed",description:s})},[s,j]);const v=V=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(V),w=V=>{const K=V.replace(/\D/g,"");return!!(K.startsWith("0")&&K.length===10||K.startsWith("254")&&K.length===12||K.startsWith("7")&&K.length===9||V.startsWith("+254")&&V.length===13)},N=V=>{const K=V.replace(/\D/g,"");return K.startsWith("0")?"+254"+K.substring(1):K.startsWith("254")?"+"+K:V.startsWith("+")?V:K.length===9?"+254"+K:V},C=(V,K)=>!V||V.trim()===""?`${K} is required`:"",k=()=>{const V={};return Object.entries({schoolName:"School Name",address:"Address",city:"City",state:"State/Province",phone:"School Phone",email:"School Email",principalName:"Principal Name",principalPhone:"Principal Phone",principalEmail:"Admin Email",estimatedStudents:"Estimated Number of Students",estimatedBuses:"Estimated Number of Buses"}).forEach(([J,ie])=>{const T=C(a[J],ie);T&&(V[J]=T)}),a.email&&!v(a.email)&&(V.email="Please enter a valid email address"),a.phone&&!w(a.phone)&&(V.phone="Please enter a valid phone number"),a.principalPhone&&!w(a.principalPhone)&&(V.principalPhone="Please enter a valid phone number"),a.principalEmail&&!v(a.principalEmail)&&(V.principalEmail="Please enter a valid admin email address"),a.website&&!a.website.match(/^https?:\/\/.+/)&&(V.website="Please enter a valid website URL (include http:// or https://)"),a.estimatedStudents&&(isNaN(Number(a.estimatedStudents))||Number(a.estimatedStudents)<=0)&&(V.estimatedStudents="Please enter a valid number of students"),a.estimatedBuses&&(isNaN(Number(a.estimatedBuses))||Number(a.estimatedBuses)<=0)&&(V.estimatedBuses="Please enter a valid number of buses"),d(V),Object.keys(V).length===0},[O,R]=x.useState([]),[E,I]=x.useState(!1),[D,P]=x.useState(null);x.useEffect(()=>{const V=K=>{K.target.closest(".address-search-container")||I(!1)};return document.addEventListener("mousedown",V),()=>{document.removeEventListener("mousedown",V)}},[]);const A=V=>{D&&clearTimeout(D);const K=setTimeout(()=>{V.length>2?$(V):(R([]),I(!1))},300);P(K)},$=async V=>{if(!V.trim()){R([]),I(!1);return}f(!0);try{const K=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(V)}&types=establishment&components=country:ke&key=AIzaSyA4HtS4auqymgQwjbXKXRr1tyBEVFAyOzs`)}`);if(!K.ok)throw new Error(`HTTP error! status: ${K.status}`);const J=await K.json();J.predictions&&J.predictions.length>0?(R(J.predictions),I(!0)):(R([]),I(!1))}catch(K){console.error("Error searching location:",K);try{const J=await fetch(`https://corsproxy.io/?${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(V)}&types=establishment&components=country:ke&key=AIzaSyA4HtS4auqymgQwjbXKXRr1tyBEVFAyOzs`)}`);if(J.ok){const ie=await J.json();if(ie.predictions&&ie.predictions.length>0){R(ie.predictions),I(!0);return}}}catch(J){console.error("Alternative proxy also failed:",J)}R([]),I(!1),j({variant:"destructive",title:"Search Error",description:"Could not search for locations. Please try again or enter coordinates manually."})}finally{f(!1)}},U=async(V,K)=>{try{const J=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/details/json?place_id=${V}&fields=formatted_address,geometry&key=AIzaSyA4HtS4auqymgQwjbXKXRr1tyBEVFAyOzs`)}`);if(!J.ok)throw new Error(`HTTP error! status: ${J.status}`);const ie=await J.json();if(ie.result&&ie.result.geometry&&ie.result.geometry.location){const{lat:T,lng:F}=ie.result.geometry.location;i(M=>({...M,longitude:F.toString(),latitude:T.toString(),address:ie.result.formatted_address||K})),R([]),I(!1),j({title:"Location Selected",description:"Coordinates have been set based on the selected location."})}else throw new Error("No location data found")}catch(J){console.error("Error getting place details:",J);try{const ie=await fetch(`https://corsproxy.io/?${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/details/json?place_id=${V}&fields=formatted_address,geometry&key=AIzaSyA4HtS4auqymgQwjbXKXRr1tyBEVFAyOzs`)}`);if(ie.ok){const T=await ie.json();if(T.result&&T.result.geometry&&T.result.geometry.location){const{lat:F,lng:M}=T.result.geometry.location;i(G=>({...G,longitude:M.toString(),latitude:F.toString(),address:T.result.formatted_address||K})),R([]),I(!1),j({title:"Location Selected",description:"Coordinates have been set based on the selected location."});return}}}catch(ie){console.error("Alternative proxy also failed:",ie)}i(ie=>({...ie,longitude:"36.689",latitude:"-1.3197",address:K})),R([]),I(!1),j({variant:"destructive",title:"Location Error",description:"Could not get location coordinates. Using default coordinates."})}},de=V=>parseFloat(V).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2}),se=V=>{const{name:K,value:J}=V.target;i(ie=>({...ie,[K]:J}))},ge=async V=>{if(V.preventDefault(),!k()){j({variant:"destructive",title:"Validation Error",description:"Please fix the errors in the form before submitting."});return}try{const K={school_name:a.schoolName,school_location:`${a.address}, ${a.city}, ${a.state}`,school_description:a.description,school_contact_number:N(a.phone),school_email:a.email,longitude:parseFloat(a.longitude)||36.689,latitude:parseFloat(a.latitude)||-1.3197,operating_hours_start:a.operatingHoursStart,operating_hours_end:a.operatingHoursEnd,admin_first_name:a.principalName.split(" ")[0]||a.principalName,admin_last_name:a.principalName.split(" ").slice(1).join(" ")||a.principalName,admin_phone_number:N(a.principalPhone),admin_email:a.principalEmail,admin_password:"AdminPass456@",selected_plan_id:(o==null?void 0:o.id)||"1",billing_cycle:(o==null?void 0:o.default_billing_cycle)||"monthly",estimated_students:parseInt(a.estimatedStudents)||400,estimated_buses:parseInt(a.estimatedBuses)||4};console.log("Registration payload:",K);const J=await e($x(K)).unwrap();console.log("Registration response:",J),j({title:"Registration Submitted",description:"Your school registration has been submitted successfully. You will be notified once verified."}),localStorage.removeItem("selectedSubscriptionPlan"),y("/verification")}catch(K){console.error("Registration error:",K),j({variant:"destructive",title:"Registration Failed",description:K instanceof Error?K.message:"Failed to submit registration. Please try again."})}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-emerald-50 p-4",children:r.jsxs(Me,{className:"w-full max-w-2xl shadow-xl",children:[r.jsxs(Ke,{className:"text-center",children:[r.jsx("div",{className:"mx-auto w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(ks,{className:"h-8 w-8 text-emerald-600"})}),r.jsx(Je,{className:"text-3xl font-bold text-slate-900",children:"Register Your School"}),r.jsx(br,{className:"text-lg text-slate-600",children:"Join LuxCub and transform your school transportation management"})]}),r.jsx(Ve,{children:r.jsxs("form",{onSubmit:ge,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[r.jsx(ks,{className:"h-5 w-5 mr-2 text-emerald-600"}),"School Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"schoolName",children:"School Name *"}),r.jsx(Oe,{id:"schoolName",name:"schoolName",value:a.schoolName,onChange:se,placeholder:"Enter school name",required:!0,className:c.schoolName?"border-red-500":""}),c.schoolName&&r.jsx("p",{className:"text-sm text-red-500",children:c.schoolName})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"schoolType",children:"School Type *"}),r.jsx(Oe,{id:"schoolType",name:"schoolType",value:a.schoolType,onChange:se,placeholder:"Primary, Secondary, etc.",required:!0,className:c.schoolType?"border-red-500":""}),c.schoolType&&r.jsx("p",{className:"text-sm text-red-500",children:c.schoolType})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"address",children:"Address *"}),r.jsxs("div",{className:"relative address-search-container",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{id:"address",name:"address",value:a.address,onChange:V=>{se(V),A(V.target.value)},placeholder:"Search for school location...",required:!0,className:c.address?"border-red-500":""}),p&&r.jsx("div",{className:"absolute right-12 top-1/2 transform -translate-y-1/2",children:r.jsx(ii,{className:"h-4 w-4 animate-spin"})})]}),E&&O.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:O.map((V,K)=>{var J,ie;return r.jsxs("button",{type:"button",className:"w-full px-4 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>U(V.place_id,V.description),children:[r.jsx("div",{className:"font-medium text-sm",children:((J=V.structured_formatting)==null?void 0:J.main_text)||V.description}),r.jsx("div",{className:"text-xs text-gray-500",children:((ie=V.structured_formatting)==null?void 0:ie.secondary_text)||""})]},K)})})]}),c.address&&r.jsx("p",{className:"text-sm text-red-500",children:c.address})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"city",children:"City *"}),r.jsx(Oe,{id:"city",name:"city",value:a.city,onChange:se,placeholder:"City",required:!0,className:c.city?"border-red-500":""}),c.city&&r.jsx("p",{className:"text-sm text-red-500",children:c.city})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"state",children:"State/Province *"}),r.jsx(Oe,{id:"state",name:"state",value:a.state,onChange:se,placeholder:"State",required:!0,className:c.state?"border-red-500":""}),c.state&&r.jsx("p",{className:"text-sm text-red-500",children:c.state})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"zipCode",children:"ZIP/Postal Code"}),r.jsx(Oe,{id:"zipCode",name:"zipCode",value:a.zipCode,onChange:se,placeholder:"ZIP code"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"phone",children:"School Phone *"}),r.jsx(Oe,{id:"phone",name:"phone",type:"tel",value:a.phone,onChange:se,placeholder:"e.g., 0723456789",required:!0,className:c.phone?"border-red-500":""}),c.phone&&r.jsx("p",{className:"text-sm text-red-500",children:c.phone})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"email",children:"School Email *"}),r.jsx(Oe,{id:"email",name:"email",type:"email",value:a.email,onChange:se,placeholder:"Email address",required:!0,className:c.email?"border-red-500":""}),c.email&&r.jsx("p",{className:"text-sm text-red-500",children:c.email})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"website",children:"Website"}),r.jsx(Oe,{id:"website",name:"website",type:"url",value:a.website,onChange:se,placeholder:"https://www.school.edu",className:c.website?"border-red-500":""}),c.website&&r.jsx("p",{className:"text-sm text-red-500",children:c.website})]})]}),o&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[r.jsx(VU,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Selected Subscription Plan"]}),r.jsx(Me,{className:"border-emerald-200 bg-emerald-50",children:r.jsxs(Ve,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-semibold text-emerald-800",children:o.name.replace(/_/g," ").replace(/\b\w/g,V=>V.toUpperCase())}),r.jsxs(Te,{className:"bg-emerald-600 text-white",children:[de(o.base_price),"/month"]})]}),r.jsx("p",{className:"text-sm text-emerald-700 mb-3",children:o.description}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold text-emerald-600",children:o.features_json.max_students}),r.jsx("div",{className:"text-emerald-600 text-xs",children:"Students"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold text-emerald-600",children:o.features_json.max_buses}),r.jsx("div",{className:"text-emerald-600 text-xs",children:"Buses"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold text-emerald-600",children:o.default_billing_cycle}),r.jsx("div",{className:"text-emerald-600 text-xs",children:"Billing"})]})]})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[r.jsx(Qi,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Principal Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"principalName",children:"Principal Name *"}),r.jsx(Oe,{id:"principalName",name:"principalName",value:a.principalName,onChange:se,placeholder:"Principal's full name",required:!0,className:c.principalName?"border-red-500":""}),c.principalName&&r.jsx("p",{className:"text-sm text-red-500",children:c.principalName})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"principalPhone",children:"Principal Phone *"}),r.jsx(Oe,{id:"principalPhone",name:"principalPhone",type:"tel",value:a.principalPhone,onChange:se,placeholder:"e.g., 0723456789",required:!0,className:c.principalPhone?"border-red-500":""}),c.principalPhone&&r.jsx("p",{className:"text-sm text-red-500",children:c.principalPhone})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"principalEmail",children:"Admin Email *"}),r.jsx(Oe,{id:"principalEmail",name:"principalEmail",type:"email",value:a.principalEmail,onChange:se,placeholder:"admin@schoolname.com",required:!0,className:c.principalEmail?"border-red-500":""}),c.principalEmail&&r.jsx("p",{className:"text-sm text-red-500",children:c.principalEmail})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Additional Information"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"description",children:"School Description"}),r.jsx(Ma,{id:"description",name:"description",value:a.description,onChange:se,placeholder:"Tell us about your school, number of students, transportation needs, etc.",rows:4})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"estimatedStudents",children:"Estimated Number of Students *"}),r.jsx(Oe,{id:"estimatedStudents",name:"estimatedStudents",type:"number",value:a.estimatedStudents,onChange:se,placeholder:"e.g., 400",required:!0,className:c.estimatedStudents?"border-red-500":""}),c.estimatedStudents&&r.jsx("p",{className:"text-sm text-red-500",children:c.estimatedStudents})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"estimatedBuses",children:"Estimated Number of Buses *"}),r.jsx(Oe,{id:"estimatedBuses",name:"estimatedBuses",type:"number",value:a.estimatedBuses,onChange:se,placeholder:"e.g., 4",required:!0,className:c.estimatedBuses?"border-red-500":""}),c.estimatedBuses&&r.jsx("p",{className:"text-sm text-red-500",children:c.estimatedBuses})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"operatingHoursStart",children:"Operating Hours Start"}),r.jsx(Oe,{id:"operatingHoursStart",name:"operatingHoursStart",type:"time",value:a.operatingHoursStart,onChange:se})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"operatingHoursEnd",children:"Operating Hours End"}),r.jsx(Oe,{id:"operatingHoursEnd",name:"operatingHoursEnd",type:"time",value:a.operatingHoursEnd,onChange:se})]})]})]}),r.jsx(Hd,{children:r.jsx(Wd,{children:"By submitting this form, you agree to our terms of service and privacy policy. We will review your application and contact you within 24-48 hours."})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx(fe,{type:"button",variant:"outline",className:"flex-1",onClick:()=>y("/home"),children:"Cancel"}),r.jsx(fe,{type:"submit",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:t,children:t?r.jsxs(r.Fragment,{children:[r.jsx(ii,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Registration"})]})]})})]})})};function Ty(e){const t=e+"CollectionProvider",[s,n]=xa(t),[a,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:j,children:v}=g,w=gr.useRef(null),N=gr.useRef(new Map).current;return r.jsx(a,{scope:j,itemMap:N,collectionRef:w,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=Mc(l),d=gr.forwardRef((g,j)=>{const{scope:v,children:w}=g,N=i(l,v),C=Nr(j,N.collectionRef);return r.jsx(c,{ref:C,children:w})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",p=Mc(u),f=gr.forwardRef((g,j)=>{const{scope:v,children:w,...N}=g,C=gr.useRef(null),k=Nr(j,C),O=i(u,v);return gr.useEffect(()=>(O.itemMap.set(C,{ref:C,...N}),()=>void O.itemMap.delete(C))),r.jsx(p,{[h]:"",ref:k,children:w})});f.displayName=u;function y(g){const j=i(e+"CollectionConsumer",g);return gr.useCallback(()=>{const w=j.collectionRef.current;if(!w)return[];const N=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(j.itemMap.values()).sort((O,R)=>N.indexOf(O.ref.current)-N.indexOf(R.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:d,ItemSlot:f},y,n]}var yH=x.createContext(void 0);function Iy(e){const t=x.useContext(yH);return e||t||"ltr"}const bH=["top","right","bottom","left"],$c=Math.min,Za=Math.max,lv=Math.round,dx=Math.floor,Mo=e=>({x:e,y:e}),jH={left:"right",right:"left",bottom:"top",top:"bottom"},wH={start:"end",end:"start"};function Jj(e,t,s){return Za(e,$c(t,s))}function _l(e,t){return typeof e=="function"?e(t):e}function Cl(e){return e.split("-")[0]}function Ef(e){return e.split("-")[1]}function j5(e){return e==="x"?"y":"x"}function w5(e){return e==="y"?"height":"width"}function Lo(e){return["top","bottom"].includes(Cl(e))?"y":"x"}function N5(e){return j5(Lo(e))}function NH(e,t,s){s===void 0&&(s=!1);const n=Ef(e),a=N5(e),i=w5(a);let o=a==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=cv(o)),[o,cv(o)]}function SH(e){const t=cv(e);return[Zj(e),t,Zj(t)]}function Zj(e){return e.replace(/start|end/g,t=>wH[t])}function _H(e,t,s){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return s?t?a:n:t?n:a;case"left":case"right":return t?i:o;default:return[]}}function CH(e,t,s,n){const a=Ef(e);let i=_H(Cl(e),s==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Zj)))),i}function cv(e){return e.replace(/left|right|bottom|top/g,t=>jH[t])}function kH(e){return{top:0,right:0,bottom:0,left:0,...e}}function EE(e){return typeof e!="number"?kH(e):{top:e,right:e,bottom:e,left:e}}function dv(e){const{x:t,y:s,width:n,height:a}=e;return{width:n,height:a,top:s,left:t,right:t+n,bottom:s+a,x:t,y:s}}function gC(e,t,s){let{reference:n,floating:a}=e;const i=Lo(t),o=N5(t),l=w5(o),c=Cl(t),d=i==="y",u=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,p=n[l]/2-a[l]/2;let f;switch(c){case"top":f={x:u,y:n.y-a.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-a.width,y:h};break;default:f={x:n.x,y:n.y}}switch(Ef(t)){case"start":f[o]-=p*(s&&d?-1:1);break;case"end":f[o]+=p*(s&&d?-1:1);break}return f}const AH=async(e,t,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=s,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=gC(d,n,c),p=n,f={},y=0;for(let g=0;g<l.length;g++){const{name:j,fn:v}=l[g],{x:w,y:N,data:C,reset:k}=await v({x:u,y:h,initialPlacement:n,placement:p,strategy:a,middlewareData:f,rects:d,platform:o,elements:{reference:e,floating:t}});u=w??u,h=N??h,f={...f,[j]:{...f[j],...C}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(d=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:u,y:h}=gC(d,p,c)),g=-1)}return{x:u,y:h,placement:p,strategy:a,middlewareData:f}};async function kp(e,t){var s;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=_l(t,e),y=EE(f),j=l[p?h==="floating"?"reference":"floating":h],v=dv(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(j)))==null||s?j:j.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),w=h==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},k=dv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:N,strategy:c}):w);return{top:(v.top-k.top+y.top)/C.y,bottom:(k.bottom-v.bottom+y.bottom)/C.y,left:(v.left-k.left+y.left)/C.x,right:(k.right-v.right+y.right)/C.x}}const PH=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=_l(e,t)||{};if(d==null)return{};const h=EE(u),p={x:s,y:n},f=N5(a),y=w5(f),g=await o.getDimensions(d),j=f==="y",v=j?"top":"left",w=j?"bottom":"right",N=j?"clientHeight":"clientWidth",C=i.reference[y]+i.reference[f]-p[f]-i.floating[y],k=p[f]-i.reference[f],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let R=O?O[N]:0;(!R||!await(o.isElement==null?void 0:o.isElement(O)))&&(R=l.floating[N]||i.floating[y]);const E=C/2-k/2,I=R/2-g[y]/2-1,D=$c(h[v],I),P=$c(h[w],I),A=D,$=R-g[y]-P,U=R/2-g[y]/2+E,de=Jj(A,U,$),se=!c.arrow&&Ef(a)!=null&&U!==de&&i.reference[y]/2-(U<A?D:P)-g[y]/2<0,ge=se?U<A?U-A:U-$:0;return{[f]:p[f]+ge,data:{[f]:de,centerOffset:U-de-ge,...se&&{alignmentOffset:ge}},reset:se}}}),EH=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...j}=_l(e,t);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const v=Cl(a),w=Lo(l),N=Cl(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(d.floating)),k=p||(N||!g?[cv(l)]:SH(l)),O=y!=="none";!p&&O&&k.push(...CH(l,g,y,C));const R=[l,...k],E=await kp(t,j),I=[];let D=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&I.push(E[v]),h){const U=NH(a,o,C);I.push(E[U[0]],E[U[1]])}if(D=[...D,{placement:a,overflows:I}],!I.every(U=>U<=0)){var P,A;const U=(((P=i.flip)==null?void 0:P.index)||0)+1,de=R[U];if(de&&(!(h==="alignment"?w!==Lo(de):!1)||D.every(V=>V.overflows[0]>0&&Lo(V.placement)===w)))return{data:{index:U,overflows:D},reset:{placement:de}};let se=(A=D.filter(ge=>ge.overflows[0]<=0).sort((ge,V)=>ge.overflows[1]-V.overflows[1])[0])==null?void 0:A.placement;if(!se)switch(f){case"bestFit":{var $;const ge=($=D.filter(V=>{if(O){const K=Lo(V.placement);return K===w||K==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(K=>K>0).reduce((K,J)=>K+J,0)]).sort((V,K)=>V[1]-K[1])[0])==null?void 0:$[0];ge&&(se=ge);break}case"initialPlacement":se=l;break}if(a!==se)return{reset:{placement:se}}}return{}}}};function xC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function vC(e){return bH.some(t=>e[t]>=0)}const LH=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:n="referenceHidden",...a}=_l(e,t);switch(n){case"referenceHidden":{const i=await kp(t,{...a,elementContext:"reference"}),o=xC(i,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vC(o)}}}case"escaped":{const i=await kp(t,{...a,altBoundary:!0}),o=xC(i,s.floating);return{data:{escapedOffsets:o,escaped:vC(o)}}}default:return{}}}}};async function RH(e,t){const{placement:s,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Cl(s),l=Ef(s),c=Lo(s)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,h=_l(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof y=="number"&&(f=l==="end"?y*-1:y),c?{x:f*u,y:p*d}:{x:p*d,y:f*u}}const TH=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await RH(t,e);return o===((s=l.offset)==null?void 0:s.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},IH=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:j=>{let{x:v,y:w}=j;return{x:v,y:w}}},...c}=_l(e,t),d={x:s,y:n},u=await kp(t,c),h=Lo(Cl(a)),p=j5(h);let f=d[p],y=d[h];if(i){const j=p==="y"?"top":"left",v=p==="y"?"bottom":"right",w=f+u[j],N=f-u[v];f=Jj(w,f,N)}if(o){const j=h==="y"?"top":"left",v=h==="y"?"bottom":"right",w=y+u[j],N=y-u[v];y=Jj(w,y,N)}const g=l.fn({...t,[p]:f,[h]:y});return{...g,data:{x:g.x-s,y:g.y-n,enabled:{[p]:i,[h]:o}}}}}},FH=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=_l(e,t),u={x:s,y:n},h=Lo(a),p=j5(h);let f=u[p],y=u[h];const g=_l(l,t),j=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const N=p==="y"?"height":"width",C=i.reference[p]-i.floating[N]+j.mainAxis,k=i.reference[p]+i.reference[N]-j.mainAxis;f<C?f=C:f>k&&(f=k)}if(d){var v,w;const N=p==="y"?"width":"height",C=["top","left"].includes(Cl(a)),k=i.reference[h]-i.floating[N]+(C&&((v=o.offset)==null?void 0:v[h])||0)+(C?0:j.crossAxis),O=i.reference[h]+i.reference[N]+(C?0:((w=o.offset)==null?void 0:w[h])||0)-(C?j.crossAxis:0);y<k?y=k:y>O&&(y=O)}return{[p]:f,[h]:y}}}},DH=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=_l(e,t),u=await kp(t,d),h=Cl(a),p=Ef(a),f=Lo(a)==="y",{width:y,height:g}=i.floating;let j,v;h==="top"||h==="bottom"?(j=h,v=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,j=p==="end"?"top":"bottom");const w=g-u.top-u.bottom,N=y-u.left-u.right,C=$c(g-u[j],w),k=$c(y-u[v],N),O=!t.middlewareData.shift;let R=C,E=k;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(E=N),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(R=w),O&&!p){const D=Za(u.left,0),P=Za(u.right,0),A=Za(u.top,0),$=Za(u.bottom,0);f?E=y-2*(D!==0||P!==0?D+P:Za(u.left,u.right)):R=g-2*(A!==0||$!==0?A+$:Za(u.top,u.bottom))}await c({...t,availableWidth:E,availableHeight:R});const I=await o.getDimensions(l.floating);return y!==I.width||g!==I.height?{reset:{rects:!0}}:{}}}};function Fy(){return typeof window<"u"}function Lf(e){return LE(e)?(e.nodeName||"").toLowerCase():"#document"}function ri(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ho(e){var t;return(t=(LE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function LE(e){return Fy()?e instanceof Node||e instanceof ri(e).Node:!1}function no(e){return Fy()?e instanceof Element||e instanceof ri(e).Element:!1}function Uo(e){return Fy()?e instanceof HTMLElement||e instanceof ri(e).HTMLElement:!1}function yC(e){return!Fy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ri(e).ShadowRoot}function Yp(e){const{overflow:t,overflowX:s,overflowY:n,display:a}=ao(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!["inline","contents"].includes(a)}function OH(e){return["table","td","th"].includes(Lf(e))}function Dy(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function S5(e){const t=_5(),s=no(e)?ao(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(s.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(s.contain||"").includes(n))}function MH(e){let t=Bc(e);for(;Uo(t)&&!df(t);){if(S5(t))return t;if(Dy(t))return null;t=Bc(t)}return null}function _5(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function df(e){return["html","body","#document"].includes(Lf(e))}function ao(e){return ri(e).getComputedStyle(e)}function Oy(e){return no(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bc(e){if(Lf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yC(e)&&e.host||Ho(e);return yC(t)?t.host:t}function RE(e){const t=Bc(e);return df(t)?e.ownerDocument?e.ownerDocument.body:e.body:Uo(t)&&Yp(t)?t:RE(t)}function Ap(e,t,s){var n;t===void 0&&(t=[]),s===void 0&&(s=!0);const a=RE(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=ri(a);if(i){const l=Xj(o);return t.concat(o,o.visualViewport||[],Yp(a)?a:[],l&&s?Ap(l):[])}return t.concat(a,Ap(a,[],s))}function Xj(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function TE(e){const t=ao(e);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Uo(e),i=a?e.offsetWidth:s,o=a?e.offsetHeight:n,l=lv(s)!==i||lv(n)!==o;return l&&(s=i,n=o),{width:s,height:n,$:l}}function C5(e){return no(e)?e:e.contextElement}function Fh(e){const t=C5(e);if(!Uo(t))return Mo(1);const s=t.getBoundingClientRect(),{width:n,height:a,$:i}=TE(t);let o=(i?lv(s.width):s.width)/n,l=(i?lv(s.height):s.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const $H=Mo(0);function IE(e){const t=ri(e);return!_5()||!t.visualViewport?$H:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function BH(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==ri(e)?!1:t}function au(e,t,s,n){t===void 0&&(t=!1),s===void 0&&(s=!1);const a=e.getBoundingClientRect(),i=C5(e);let o=Mo(1);t&&(n?no(n)&&(o=Fh(n)):o=Fh(e));const l=BH(i,s,n)?IE(i):Mo(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(i){const p=ri(i),f=n&&no(n)?ri(n):n;let y=p,g=Xj(y);for(;g&&n&&f!==y;){const j=Fh(g),v=g.getBoundingClientRect(),w=ao(g),N=v.left+(g.clientLeft+parseFloat(w.paddingLeft))*j.x,C=v.top+(g.clientTop+parseFloat(w.paddingTop))*j.y;c*=j.x,d*=j.y,u*=j.x,h*=j.y,c+=N,d+=C,y=ri(g),g=Xj(y)}}return dv({width:u,height:h,x:c,y:d})}function k5(e,t){const s=Oy(e).scrollLeft;return t?t.left+s:au(Ho(e)).left+s}function FE(e,t,s){s===void 0&&(s=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(s?0:k5(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function zH(e){let{elements:t,rect:s,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Ho(n),l=t?Dy(t.floating):!1;if(n===o||l&&i)return s;let c={scrollLeft:0,scrollTop:0},d=Mo(1);const u=Mo(0),h=Uo(n);if((h||!h&&!i)&&((Lf(n)!=="body"||Yp(o))&&(c=Oy(n)),Uo(n))){const f=au(n);d=Fh(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const p=o&&!h&&!i?FE(o,c,!0):Mo(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+u.x+p.x,y:s.y*d.y-c.scrollTop*d.y+u.y+p.y}}function UH(e){return Array.from(e.getClientRects())}function qH(e){const t=Ho(e),s=Oy(e),n=e.ownerDocument.body,a=Za(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Za(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-s.scrollLeft+k5(e);const l=-s.scrollTop;return ao(n).direction==="rtl"&&(o+=Za(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function VH(e,t){const s=ri(e),n=Ho(e),a=s.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=_5();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function HH(e,t){const s=au(e,!0,t==="fixed"),n=s.top+e.clientTop,a=s.left+e.clientLeft,i=Uo(e)?Fh(e):Mo(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function bC(e,t,s){let n;if(t==="viewport")n=VH(e,s);else if(t==="document")n=qH(Ho(e));else if(no(t))n=HH(t,s);else{const a=IE(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return dv(n)}function DE(e,t){const s=Bc(e);return s===t||!no(s)||df(s)?!1:ao(s).position==="fixed"||DE(s,t)}function WH(e,t){const s=t.get(e);if(s)return s;let n=Ap(e,[],!1).filter(l=>no(l)&&Lf(l)!=="body"),a=null;const i=ao(e).position==="fixed";let o=i?Bc(e):e;for(;no(o)&&!df(o);){const l=ao(o),c=S5(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Yp(o)&&!c&&DE(e,o))?n=n.filter(u=>u!==o):a=l,o=Bc(o)}return t.set(e,n),n}function GH(e){let{element:t,boundary:s,rootBoundary:n,strategy:a}=e;const o=[...s==="clippingAncestors"?Dy(t)?[]:WH(t,this._c):[].concat(s),n],l=o[0],c=o.reduce((d,u)=>{const h=bC(t,u,a);return d.top=Za(h.top,d.top),d.right=$c(h.right,d.right),d.bottom=$c(h.bottom,d.bottom),d.left=Za(h.left,d.left),d},bC(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function KH(e){const{width:t,height:s}=TE(e);return{width:t,height:s}}function YH(e,t,s){const n=Uo(t),a=Ho(t),i=s==="fixed",o=au(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Mo(0);function d(){c.x=k5(a)}if(n||!n&&!i)if((Lf(t)!=="body"||Yp(a))&&(l=Oy(t)),n){const f=au(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?FE(a,l):Mo(0),h=o.left+l.scrollLeft-c.x-u.x,p=o.top+l.scrollTop-c.y-u.y;return{x:h,y:p,width:o.width,height:o.height}}function o2(e){return ao(e).position==="static"}function jC(e,t){if(!Uo(e)||ao(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return Ho(e)===s&&(s=s.ownerDocument.body),s}function OE(e,t){const s=ri(e);if(Dy(e))return s;if(!Uo(e)){let a=Bc(e);for(;a&&!df(a);){if(no(a)&&!o2(a))return a;a=Bc(a)}return s}let n=jC(e,t);for(;n&&OH(n)&&o2(n);)n=jC(n,t);return n&&df(n)&&o2(n)&&!S5(n)?s:n||MH(e)||s}const JH=async function(e){const t=this.getOffsetParent||OE,s=this.getDimensions,n=await s(e.floating);return{reference:YH(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function ZH(e){return ao(e).direction==="rtl"}const XH={convertOffsetParentRelativeRectToViewportRelativeRect:zH,getDocumentElement:Ho,getClippingRect:GH,getOffsetParent:OE,getElementRects:JH,getClientRects:UH,getDimensions:KH,getScale:Fh,isElement:no,isRTL:ZH};function ME(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function QH(e,t){let s=null,n;const a=Ho(e);function i(){var l;clearTimeout(n),(l=s)==null||l.disconnect(),s=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:p,height:f}=d;if(l||t(),!p||!f)return;const y=dx(h),g=dx(a.clientWidth-(u+p)),j=dx(a.clientHeight-(h+f)),v=dx(u),N={rootMargin:-y+"px "+-g+"px "+-j+"px "+-v+"px",threshold:Za(0,$c(1,c))||1};let C=!0;function k(O){const R=O[0].intersectionRatio;if(R!==c){if(!C)return o();R?o(!1,R):n=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!ME(d,e.getBoundingClientRect())&&o(),C=!1}try{s=new IntersectionObserver(k,{...N,root:a.ownerDocument})}catch{s=new IntersectionObserver(k,N)}s.observe(e)}return o(!0),i}function eW(e,t,s,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=C5(e),u=a||i?[...d?Ap(d):[],...Ap(t)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",s,{passive:!0}),i&&v.addEventListener("resize",s)});const h=d&&l?QH(d,s):null;let p=-1,f=null;o&&(f=new ResizeObserver(v=>{let[w]=v;w&&w.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var N;(N=f)==null||N.observe(t)})),s()}),d&&!c&&f.observe(d),f.observe(t));let y,g=c?au(e):null;c&&j();function j(){const v=au(e);g&&!ME(g,v)&&s(),g=v,y=requestAnimationFrame(j)}return s(),()=>{var v;u.forEach(w=>{a&&w.removeEventListener("scroll",s),i&&w.removeEventListener("resize",s)}),h==null||h(),(v=f)==null||v.disconnect(),f=null,c&&cancelAnimationFrame(y)}}const tW=TH,rW=IH,sW=EH,nW=DH,aW=LH,wC=PH,iW=FH,oW=(e,t,s)=>{const n=new Map,a={platform:XH,...s},i={...a.platform,_c:n};return AH(e,t,{...a,platform:i})};var lW=typeof document<"u",cW=function(){},b0=lW?x.useLayoutEffect:cW;function uv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(n=s;n--!==0;)if(!uv(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=s;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!uv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function $E(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function NC(e,t){const s=$E(e);return Math.round(t*s)/s}function l2(e){const t=x.useRef(e);return b0(()=>{t.current=e}),t}function dW(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=x.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=x.useState(n);uv(p,n)||f(n);const[y,g]=x.useState(null),[j,v]=x.useState(null),w=x.useCallback(V=>{V!==O.current&&(O.current=V,g(V))},[]),N=x.useCallback(V=>{V!==R.current&&(R.current=V,v(V))},[]),C=i||y,k=o||j,O=x.useRef(null),R=x.useRef(null),E=x.useRef(u),I=c!=null,D=l2(c),P=l2(a),A=l2(d),$=x.useCallback(()=>{if(!O.current||!R.current)return;const V={placement:t,strategy:s,middleware:p};P.current&&(V.platform=P.current),oW(O.current,R.current,V).then(K=>{const J={...K,isPositioned:A.current!==!1};U.current&&!uv(E.current,J)&&(E.current=J,sd.flushSync(()=>{h(J)}))})},[p,t,s,P,A]);b0(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(V=>({...V,isPositioned:!1})))},[d]);const U=x.useRef(!1);b0(()=>(U.current=!0,()=>{U.current=!1}),[]),b0(()=>{if(C&&(O.current=C),k&&(R.current=k),C&&k){if(D.current)return D.current(C,k,$);$()}},[C,k,$,D,I]);const de=x.useMemo(()=>({reference:O,floating:R,setReference:w,setFloating:N}),[w,N]),se=x.useMemo(()=>({reference:C,floating:k}),[C,k]),ge=x.useMemo(()=>{const V={position:s,left:0,top:0};if(!se.floating)return V;const K=NC(se.floating,u.x),J=NC(se.floating,u.y);return l?{...V,transform:"translate("+K+"px, "+J+"px)",...$E(se.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:K,top:J}},[s,l,se.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:$,refs:de,elements:se,floatingStyles:ge}),[u,$,de,se,ge])}const uW=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:n,padding:a}=typeof e=="function"?e(s):e;return n&&t(n)?n.current!=null?wC({element:n.current,padding:a}).fn(s):{}:n?wC({element:n,padding:a}).fn(s):{}}}},hW=(e,t)=>({...tW(e),options:[e,t]}),fW=(e,t)=>({...rW(e),options:[e,t]}),mW=(e,t)=>({...iW(e),options:[e,t]}),pW=(e,t)=>({...sW(e),options:[e,t]}),gW=(e,t)=>({...nW(e),options:[e,t]}),xW=(e,t)=>({...aW(e),options:[e,t]}),vW=(e,t)=>({...uW(e),options:[e,t]});var yW="Arrow",BE=x.forwardRef((e,t)=>{const{children:s,width:n=10,height:a=5,...i}=e;return r.jsx(Ot.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});BE.displayName=yW;var bW=BE;function A5(e){const[t,s]=x.useState(void 0);return Dn(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;s({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else s(void 0)},[e]),t}var P5="Popper",[zE,id]=xa(P5),[jW,UE]=zE(P5),qE=e=>{const{__scopePopper:t,children:s}=e,[n,a]=x.useState(null);return r.jsx(jW,{scope:t,anchor:n,onAnchorChange:a,children:s})};qE.displayName=P5;var VE="PopperAnchor",HE=x.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:n,...a}=e,i=UE(VE,s),o=x.useRef(null),l=Nr(t,o);return x.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:r.jsx(Ot.div,{...a,ref:l})});HE.displayName=VE;var E5="PopperContent",[wW,NW]=zE(E5),WE=x.forwardRef((e,t)=>{var te,me,ue,ce,Ce,Ue;const{__scopePopper:s,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:y,...g}=e,j=UE(E5,s),[v,w]=x.useState(null),N=Nr(t,Ge=>w(Ge)),[C,k]=x.useState(null),O=A5(C),R=(O==null?void 0:O.width)??0,E=(O==null?void 0:O.height)??0,I=n+(i!=="center"?"-"+i:""),D=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(d)?d:[d],A=P.length>0,$={padding:D,boundary:P.filter(_W),altBoundary:A},{refs:U,floatingStyles:de,placement:se,isPositioned:ge,middlewareData:V}=dW({strategy:"fixed",placement:I,whileElementsMounted:(...Ge)=>eW(...Ge,{animationFrame:f==="always"}),elements:{reference:j.anchor},middleware:[hW({mainAxis:a+E,alignmentAxis:o}),c&&fW({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?mW():void 0,...$}),c&&pW({...$}),gW({...$,apply:({elements:Ge,rects:gt,availableWidth:Se,availableHeight:ne})=>{const{width:jt,height:dt}=gt.reference,et=Ge.floating.style;et.setProperty("--radix-popper-available-width",`${Se}px`),et.setProperty("--radix-popper-available-height",`${ne}px`),et.setProperty("--radix-popper-anchor-width",`${jt}px`),et.setProperty("--radix-popper-anchor-height",`${dt}px`)}}),C&&vW({element:C,padding:l}),CW({arrowWidth:R,arrowHeight:E}),p&&xW({strategy:"referenceHidden",...$})]}),[K,J]=YE(se),ie=Oa(y);Dn(()=>{ge&&(ie==null||ie())},[ge,ie]);const T=(te=V.arrow)==null?void 0:te.x,F=(me=V.arrow)==null?void 0:me.y,M=((ue=V.arrow)==null?void 0:ue.centerOffset)!==0,[G,ee]=x.useState();return Dn(()=>{v&&ee(window.getComputedStyle(v).zIndex)},[v]),r.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:ge?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(ce=V.transformOrigin)==null?void 0:ce.x,(Ce=V.transformOrigin)==null?void 0:Ce.y].join(" "),...((Ue=V.hide)==null?void 0:Ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(wW,{scope:s,placedSide:K,onArrowChange:k,arrowX:T,arrowY:F,shouldHideArrow:M,children:r.jsx(Ot.div,{"data-side":K,"data-align":J,...g,ref:N,style:{...g.style,animation:ge?void 0:"none"}})})})});WE.displayName=E5;var GE="PopperArrow",SW={top:"bottom",right:"left",bottom:"top",left:"right"},KE=x.forwardRef(function(t,s){const{__scopePopper:n,...a}=t,i=NW(GE,n),o=SW[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(bW,{...a,ref:s,style:{...a.style,display:"block"}})})});KE.displayName=GE;function _W(e){return e!==null}var CW=e=>({name:"transformOrigin",options:e,fn(t){var j,v,w;const{placement:s,rects:n,middlewareData:a}=t,o=((j=a.arrow)==null?void 0:j.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=YE(s),h={start:"0%",center:"50%",end:"100%"}[u],p=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,f=(((w=a.arrow)==null?void 0:w.y)??0)+c/2;let y="",g="";return d==="bottom"?(y=o?h:`${p}px`,g=`${-c}px`):d==="top"?(y=o?h:`${p}px`,g=`${n.floating.height+c}px`):d==="right"?(y=`${-c}px`,g=o?h:`${f}px`):d==="left"&&(y=`${n.floating.width+c}px`,g=o?h:`${f}px`),{data:{x:y,y:g}}}});function YE(e){const[t,s="center"]=e.split("-");return[t,s]}var My=qE,Jp=HE,$y=WE,By=KE,c2="rovingFocusGroup.onEntryFocus",kW={bubbles:!1,cancelable:!0},Zp="RovingFocusGroup",[Qj,JE,AW]=Ty(Zp),[PW,zy]=xa(Zp,[AW]),[EW,LW]=PW(Zp),ZE=x.forwardRef((e,t)=>r.jsx(Qj.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Qj.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(RW,{...e,ref:t})})}));ZE.displayName=Zp;var RW=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,p=x.useRef(null),f=Nr(t,p),y=Iy(i),[g,j]=so({prop:o,defaultProp:l??null,onChange:c,caller:Zp}),[v,w]=x.useState(!1),N=Oa(d),C=JE(s),k=x.useRef(!1),[O,R]=x.useState(0);return x.useEffect(()=>{const E=p.current;if(E)return E.addEventListener(c2,N),()=>E.removeEventListener(c2,N)},[N]),r.jsx(EW,{scope:s,orientation:n,dir:y,loop:a,currentTabStopId:g,onItemFocus:x.useCallback(E=>j(E),[j]),onItemShiftTab:x.useCallback(()=>w(!0),[]),onFocusableItemAdd:x.useCallback(()=>R(E=>E+1),[]),onFocusableItemRemove:x.useCallback(()=>R(E=>E-1),[]),children:r.jsx(Ot.div,{tabIndex:v||O===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:pt(e.onMouseDown,()=>{k.current=!0}),onFocus:pt(e.onFocus,E=>{const I=!k.current;if(E.target===E.currentTarget&&I&&!v){const D=new CustomEvent(c2,kW);if(E.currentTarget.dispatchEvent(D),!D.defaultPrevented){const P=C().filter(se=>se.focusable),A=P.find(se=>se.active),$=P.find(se=>se.id===g),de=[A,$,...P].filter(Boolean).map(se=>se.ref.current);e8(de,u)}}k.current=!1}),onBlur:pt(e.onBlur,()=>w(!1))})})}),XE="RovingFocusGroupItem",QE=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=jn(),d=i||c,u=LW(XE,s),h=u.currentTabStopId===d,p=JE(s),{onFocusableItemAdd:f,onFocusableItemRemove:y,currentTabStopId:g}=u;return x.useEffect(()=>{if(n)return f(),()=>y()},[n,f,y]),r.jsx(Qj.ItemSlot,{scope:s,id:d,focusable:n,active:a,children:r.jsx(Ot.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:pt(e.onMouseDown,j=>{n?u.onItemFocus(d):j.preventDefault()}),onFocus:pt(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:pt(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){u.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const v=FW(j,u.orientation,u.dir);if(v!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let N=p().filter(C=>C.focusable).map(C=>C.ref.current);if(v==="last")N.reverse();else if(v==="prev"||v==="next"){v==="prev"&&N.reverse();const C=N.indexOf(j.currentTarget);N=u.loop?DW(N,C+1):N.slice(C+1)}setTimeout(()=>e8(N))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});QE.displayName=XE;var TW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function IW(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function FW(e,t,s){const n=IW(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return TW[n]}function e8(e,t=!1){const s=document.activeElement;for(const n of e)if(n===s||(n.focus({preventScroll:t}),document.activeElement!==s))return}function DW(e,t){return e.map((s,n)=>e[(t+n)%e.length])}var t8=ZE,r8=QE,ew=["Enter"," "],OW=["ArrowDown","PageUp","Home"],s8=["ArrowUp","PageDown","End"],MW=[...OW,...s8],$W={ltr:[...ew,"ArrowRight"],rtl:[...ew,"ArrowLeft"]},BW={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xp="Menu",[Pp,zW,UW]=Ty(Xp),[vu,n8]=xa(Xp,[UW,id,zy]),Uy=id(),a8=zy(),[qW,yu]=vu(Xp),[VW,Qp]=vu(Xp),i8=e=>{const{__scopeMenu:t,open:s=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=Uy(t),[c,d]=x.useState(null),u=x.useRef(!1),h=Oa(i),p=Iy(a);return x.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),r.jsx(My,{...l,children:r.jsx(qW,{scope:t,open:s,onOpenChange:h,content:c,onContentChange:d,children:r.jsx(VW,{scope:t,onClose:x.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:p,modal:o,children:n})})})};i8.displayName=Xp;var HW="MenuAnchor",L5=x.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e,a=Uy(s);return r.jsx(Jp,{...a,...n,ref:t})});L5.displayName=HW;var R5="MenuPortal",[WW,o8]=vu(R5,{forceMount:void 0}),l8=e=>{const{__scopeMenu:t,forceMount:s,children:n,container:a}=e,i=yu(R5,t);return r.jsx(WW,{scope:t,forceMount:s,children:r.jsx($a,{present:s||i.open,children:r.jsx(Pf,{asChild:!0,container:a,children:n})})})};l8.displayName=R5;var _i="MenuContent",[GW,T5]=vu(_i),c8=x.forwardRef((e,t)=>{const s=o8(_i,e.__scopeMenu),{forceMount:n=s.forceMount,...a}=e,i=yu(_i,e.__scopeMenu),o=Qp(_i,e.__scopeMenu);return r.jsx(Pp.Provider,{scope:e.__scopeMenu,children:r.jsx($a,{present:n||i.open,children:r.jsx(Pp.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(KW,{...a,ref:t}):r.jsx(YW,{...a,ref:t})})})})}),KW=x.forwardRef((e,t)=>{const s=yu(_i,e.__scopeMenu),n=x.useRef(null),a=Nr(t,n);return x.useEffect(()=>{const i=n.current;if(i)return Py(i)},[]),r.jsx(I5,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:pt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),YW=x.forwardRef((e,t)=>{const s=yu(_i,e.__scopeMenu);return r.jsx(I5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),JW=Mc("MenuContent.ScrollLock"),I5=x.forwardRef((e,t)=>{const{__scopeMenu:s,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f,disableOutsideScroll:y,...g}=e,j=yu(_i,s),v=Qp(_i,s),w=Uy(s),N=a8(s),C=zW(s),[k,O]=x.useState(null),R=x.useRef(null),E=Nr(t,R,j.onContentChange),I=x.useRef(0),D=x.useRef(""),P=x.useRef(0),A=x.useRef(null),$=x.useRef("right"),U=x.useRef(0),de=y?Gp:x.Fragment,se=y?{as:JW,allowPinchZoom:!0}:void 0,ge=K=>{var te,me;const J=D.current+K,ie=C().filter(ue=>!ue.disabled),T=document.activeElement,F=(te=ie.find(ue=>ue.ref.current===T))==null?void 0:te.textValue,M=ie.map(ue=>ue.textValue),G=lG(M,J,F),ee=(me=ie.find(ue=>ue.textValue===G))==null?void 0:me.ref.current;(function ue(ce){D.current=ce,window.clearTimeout(I.current),ce!==""&&(I.current=window.setTimeout(()=>ue(""),1e3))})(J),ee&&setTimeout(()=>ee.focus())};x.useEffect(()=>()=>window.clearTimeout(I.current),[]),ky();const V=x.useCallback(K=>{var ie,T;return $.current===((ie=A.current)==null?void 0:ie.side)&&dG(K,(T=A.current)==null?void 0:T.area)},[]);return r.jsx(GW,{scope:s,searchRef:D,onItemEnter:x.useCallback(K=>{V(K)&&K.preventDefault()},[V]),onItemLeave:x.useCallback(K=>{var J;V(K)||((J=R.current)==null||J.focus(),O(null))},[V]),onTriggerLeave:x.useCallback(K=>{V(K)&&K.preventDefault()},[V]),pointerGraceTimerRef:P,onPointerGraceIntentChange:x.useCallback(K=>{A.current=K},[]),children:r.jsx(de,{...se,children:r.jsx(Wp,{asChild:!0,trapped:a,onMountAutoFocus:pt(i,K=>{var J;K.preventDefault(),(J=R.current)==null||J.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(xu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f,children:r.jsx(t8,{asChild:!0,...N,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:k,onCurrentTabStopIdChange:O,onEntryFocus:pt(c,K=>{v.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx($y,{role:"menu","aria-orientation":"vertical","data-state":_8(j.open),"data-radix-menu-content":"",dir:v.dir,...w,...g,ref:E,style:{outline:"none",...g.style},onKeyDown:pt(g.onKeyDown,K=>{const ie=K.target.closest("[data-radix-menu-content]")===K.currentTarget,T=K.ctrlKey||K.altKey||K.metaKey,F=K.key.length===1;ie&&(K.key==="Tab"&&K.preventDefault(),!T&&F&&ge(K.key));const M=R.current;if(K.target!==M||!MW.includes(K.key))return;K.preventDefault();const ee=C().filter(te=>!te.disabled).map(te=>te.ref.current);s8.includes(K.key)&&ee.reverse(),iG(ee)}),onBlur:pt(e.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(I.current),D.current="")}),onPointerMove:pt(e.onPointerMove,Ep(K=>{const J=K.target,ie=U.current!==K.clientX;if(K.currentTarget.contains(J)&&ie){const T=K.clientX>U.current?"right":"left";$.current=T,U.current=K.clientX}}))})})})})})})});c8.displayName=_i;var ZW="MenuGroup",F5=x.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e;return r.jsx(Ot.div,{role:"group",...n,ref:t})});F5.displayName=ZW;var XW="MenuLabel",d8=x.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e;return r.jsx(Ot.div,{...n,ref:t})});d8.displayName=XW;var hv="MenuItem",SC="menu.itemSelect",qy=x.forwardRef((e,t)=>{const{disabled:s=!1,onSelect:n,...a}=e,i=x.useRef(null),o=Qp(hv,e.__scopeMenu),l=T5(hv,e.__scopeMenu),c=Nr(t,i),d=x.useRef(!1),u=()=>{const h=i.current;if(!s&&h){const p=new CustomEvent(SC,{bubbles:!0,cancelable:!0});h.addEventListener(SC,f=>n==null?void 0:n(f),{once:!0}),h5(h,p),p.defaultPrevented?d.current=!1:o.onClose()}};return r.jsx(u8,{...a,ref:c,disabled:s,onClick:pt(e.onClick,u),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),d.current=!0},onPointerUp:pt(e.onPointerUp,h=>{var p;d.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:pt(e.onKeyDown,h=>{const p=l.searchRef.current!=="";s||p&&h.key===" "||ew.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});qy.displayName=hv;var u8=x.forwardRef((e,t)=>{const{__scopeMenu:s,disabled:n=!1,textValue:a,...i}=e,o=T5(hv,s),l=a8(s),c=x.useRef(null),d=Nr(t,c),[u,h]=x.useState(!1),[p,f]=x.useState("");return x.useEffect(()=>{const y=c.current;y&&f((y.textContent??"").trim())},[i.children]),r.jsx(Pp.ItemSlot,{scope:s,disabled:n,textValue:a??p,children:r.jsx(r8,{asChild:!0,...l,focusable:!n,children:r.jsx(Ot.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:pt(e.onPointerMove,Ep(y=>{n?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:pt(e.onPointerLeave,Ep(y=>o.onItemLeave(y))),onFocus:pt(e.onFocus,()=>h(!0)),onBlur:pt(e.onBlur,()=>h(!1))})})})}),QW="MenuCheckboxItem",h8=x.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:n,...a}=e;return r.jsx(x8,{scope:e.__scopeMenu,checked:s,children:r.jsx(qy,{role:"menuitemcheckbox","aria-checked":fv(s)?"mixed":s,...a,ref:t,"data-state":O5(s),onSelect:pt(a.onSelect,()=>n==null?void 0:n(fv(s)?!0:!s),{checkForDefaultPrevented:!1})})})});h8.displayName=QW;var f8="MenuRadioGroup",[eG,tG]=vu(f8,{value:void 0,onValueChange:()=>{}}),m8=x.forwardRef((e,t)=>{const{value:s,onValueChange:n,...a}=e,i=Oa(n);return r.jsx(eG,{scope:e.__scopeMenu,value:s,onValueChange:i,children:r.jsx(F5,{...a,ref:t})})});m8.displayName=f8;var p8="MenuRadioItem",g8=x.forwardRef((e,t)=>{const{value:s,...n}=e,a=tG(p8,e.__scopeMenu),i=s===a.value;return r.jsx(x8,{scope:e.__scopeMenu,checked:i,children:r.jsx(qy,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":O5(i),onSelect:pt(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,s)},{checkForDefaultPrevented:!1})})})});g8.displayName=p8;var D5="MenuItemIndicator",[x8,rG]=vu(D5,{checked:!1}),v8=x.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:n,...a}=e,i=rG(D5,s);return r.jsx($a,{present:n||fv(i.checked)||i.checked===!0,children:r.jsx(Ot.span,{...a,ref:t,"data-state":O5(i.checked)})})});v8.displayName=D5;var sG="MenuSeparator",y8=x.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e;return r.jsx(Ot.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});y8.displayName=sG;var nG="MenuArrow",b8=x.forwardRef((e,t)=>{const{__scopeMenu:s,...n}=e,a=Uy(s);return r.jsx(By,{...a,...n,ref:t})});b8.displayName=nG;var aG="MenuSub",[nre,j8]=vu(aG),Rm="MenuSubTrigger",w8=x.forwardRef((e,t)=>{const s=yu(Rm,e.__scopeMenu),n=Qp(Rm,e.__scopeMenu),a=j8(Rm,e.__scopeMenu),i=T5(Rm,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),r.jsx(L5,{asChild:!0,...d,children:r.jsx(u8,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":a.contentId,"data-state":_8(s.open),...e,ref:Sl(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:pt(e.onPointerMove,Ep(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!s.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),u()},100))})),onPointerLeave:pt(e.onPointerLeave,Ep(h=>{var f,y;u();const p=(f=s.content)==null?void 0:f.getBoundingClientRect();if(p){const g=(y=s.content)==null?void 0:y.dataset.side,j=g==="right",v=j?-5:5,w=p[j?"left":"right"],N=p[j?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x:w,y:p.top},{x:N,y:p.top},{x:N,y:p.bottom},{x:w,y:p.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:pt(e.onKeyDown,h=>{var f;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||$W[n.dir].includes(h.key)&&(s.onOpenChange(!0),(f=s.content)==null||f.focus(),h.preventDefault())})})})});w8.displayName=Rm;var N8="MenuSubContent",S8=x.forwardRef((e,t)=>{const s=o8(_i,e.__scopeMenu),{forceMount:n=s.forceMount,...a}=e,i=yu(_i,e.__scopeMenu),o=Qp(_i,e.__scopeMenu),l=j8(N8,e.__scopeMenu),c=x.useRef(null),d=Nr(t,c);return r.jsx(Pp.Provider,{scope:e.__scopeMenu,children:r.jsx($a,{present:n||i.open,children:r.jsx(Pp.Slot,{scope:e.__scopeMenu,children:r.jsx(I5,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:pt(e.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:pt(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:pt(e.onKeyDown,u=>{var f;const h=u.currentTarget.contains(u.target),p=BW[o.dir].includes(u.key);h&&p&&(i.onOpenChange(!1),(f=l.trigger)==null||f.focus(),u.preventDefault())})})})})})});S8.displayName=N8;function _8(e){return e?"open":"closed"}function fv(e){return e==="indeterminate"}function O5(e){return fv(e)?"indeterminate":e?"checked":"unchecked"}function iG(e){const t=document.activeElement;for(const s of e)if(s===t||(s.focus(),document.activeElement!==t))return}function oG(e,t){return e.map((s,n)=>e[(t+n)%e.length])}function lG(e,t,s){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=s?e.indexOf(s):-1;let o=oG(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function cG(e,t){const{x:s,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,h=c.x,p=c.y;u>n!=p>n&&s<(h-d)*(n-u)/(p-u)+d&&(a=!a)}return a}function dG(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return cG(s,t)}function Ep(e){return t=>t.pointerType==="mouse"?e(t):void 0}var uG=i8,hG=L5,fG=l8,mG=c8,pG=F5,gG=d8,xG=qy,vG=h8,yG=m8,bG=g8,jG=v8,wG=y8,NG=b8,SG=w8,_G=S8,Vy="DropdownMenu",[CG,are]=xa(Vy,[n8]),va=n8(),[kG,C8]=CG(Vy),k8=e=>{const{__scopeDropdownMenu:t,children:s,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=va(t),d=x.useRef(null),[u,h]=so({prop:a,defaultProp:i??!1,onChange:o,caller:Vy});return r.jsx(kG,{scope:t,triggerId:jn(),triggerRef:d,contentId:jn(),open:u,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(p=>!p),[h]),modal:l,children:r.jsx(uG,{...c,open:u,onOpenChange:h,dir:n,modal:l,children:s})})};k8.displayName=Vy;var A8="DropdownMenuTrigger",P8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:n=!1,...a}=e,i=C8(A8,s),o=va(s);return r.jsx(hG,{asChild:!0,...o,children:r.jsx(Ot.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Sl(t,i.triggerRef),onPointerDown:pt(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:pt(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});P8.displayName=A8;var AG="DropdownMenuPortal",E8=e=>{const{__scopeDropdownMenu:t,...s}=e,n=va(t);return r.jsx(fG,{...n,...s})};E8.displayName=AG;var L8="DropdownMenuContent",R8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=C8(L8,s),i=va(s),o=x.useRef(!1);return r.jsx(mG,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:pt(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:pt(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});R8.displayName=L8;var PG="DropdownMenuGroup",EG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(pG,{...a,...n,ref:t})});EG.displayName=PG;var LG="DropdownMenuLabel",T8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(gG,{...a,...n,ref:t})});T8.displayName=LG;var RG="DropdownMenuItem",I8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(xG,{...a,...n,ref:t})});I8.displayName=RG;var TG="DropdownMenuCheckboxItem",F8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(vG,{...a,...n,ref:t})});F8.displayName=TG;var IG="DropdownMenuRadioGroup",FG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(yG,{...a,...n,ref:t})});FG.displayName=IG;var DG="DropdownMenuRadioItem",D8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(bG,{...a,...n,ref:t})});D8.displayName=DG;var OG="DropdownMenuItemIndicator",O8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(jG,{...a,...n,ref:t})});O8.displayName=OG;var MG="DropdownMenuSeparator",M8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(wG,{...a,...n,ref:t})});M8.displayName=MG;var $G="DropdownMenuArrow",BG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(NG,{...a,...n,ref:t})});BG.displayName=$G;var zG="DropdownMenuSubTrigger",$8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(SG,{...a,...n,ref:t})});$8.displayName=zG;var UG="DropdownMenuSubContent",B8=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...n}=e,a=va(s);return r.jsx(_G,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});B8.displayName=UG;var qG=k8,VG=P8,HG=E8,z8=R8,U8=T8,q8=I8,V8=F8,H8=D8,W8=O8,G8=M8,K8=$8,Y8=B8;const On=qG,Mn=VG,WG=x.forwardRef(({className:e,inset:t,children:s,...n},a)=>r.jsxs(K8,{ref:a,className:it("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[s,r.jsx(ru,{className:"ml-auto h-4 w-4"})]}));WG.displayName=K8.displayName;const GG=x.forwardRef(({className:e,...t},s)=>r.jsx(Y8,{ref:s,className:it("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));GG.displayName=Y8.displayName;const wn=x.forwardRef(({className:e,sideOffset:t=4,...s},n)=>r.jsx(HG,{children:r.jsx(z8,{ref:n,sideOffset:t,className:it("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));wn.displayName=z8.displayName;const Wt=x.forwardRef(({className:e,inset:t,...s},n)=>r.jsx(q8,{ref:n,className:it("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));Wt.displayName=q8.displayName;const KG=x.forwardRef(({className:e,children:t,checked:s,...n},a)=>r.jsxs(V8,{ref:a,className:it("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(W8,{children:r.jsx(Rn,{className:"h-4 w-4"})})}),t]}));KG.displayName=V8.displayName;const YG=x.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(H8,{ref:n,className:it("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(W8,{children:r.jsx(OU,{className:"h-2 w-2 fill-current"})})}),t]}));YG.displayName=H8.displayName;const od=x.forwardRef(({className:e,inset:t,...s},n)=>r.jsx(U8,{ref:n,className:it("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));od.displayName=U8.displayName;const bu=x.forwardRef(({className:e,...t},s)=>r.jsx(G8,{ref:s,className:it("-mx-1 my-1 h-px bg-muted",e),...t}));bu.displayName=G8.displayName;const JG=()=>{const{theme:e,isDark:t,setTheme:s,toggleTheme:n}=l5(),i=e==="auto"?t?"dark":"light":e;return r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsxs(fe,{variant:"outline",size:"icon",className:"h-9 w-9",children:[r.jsx(X4,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),r.jsx(Z4,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),r.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),r.jsxs(wn,{align:"end",children:[r.jsxs(Wt,{onClick:()=>s("light"),className:e==="light"?"bg-accent":"",children:[r.jsx(X4,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Force Light"}),e==="light"&&r.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"Active"})]}),r.jsxs(Wt,{onClick:()=>s("dark"),className:e==="dark"?"bg-accent":"",children:[r.jsx(Z4,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Force Dark"}),e==="dark"&&r.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"Active"})]}),r.jsxs(Wt,{onClick:()=>s("auto"),className:e==="auto"?"bg-accent":"",children:[r.jsx(qU,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Follow System"}),e==="auto"&&r.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:i==="dark"?"Dark":"Light"})]})]})]})},M5=({onMenuClick:e,isScrolled:t=!1})=>{var d;const s=Ai(),n=ns(),{user:a}=ma(u=>u.auth),{notifications:i}=ma(u=>u.notifications),{isDark:o}=l5(),l=()=>{n(CP()),s("/login")},c=!o||t;return r.jsx("nav",{className:`bg-background border-b px-4 md:px-8 py-3 transition-colors duration-200 ${t?"bg-white shadow-md":""}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:e,className:"p-2 rounded-md hover:bg-accent md:hidden",children:r.jsx(UU,{className:`h-6 w-6 ${c?"text-black":"text-foreground"}`})}),r.jsx("h1",{className:`text-xl font-semibold ${c?"text-black":"text-foreground"}`,children:"School Admin"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(JG,{}),r.jsxs(fe,{variant:"ghost",size:"icon",className:"relative",onClick:()=>s("/notifications"),children:[r.jsx(Eo,{className:`h-5 w-5 ${c?"text-black":""}`}),i&&i.length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full text-[10px] text-white flex items-center justify-center",children:i.length})]}),r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsxs(fe,{variant:"ghost",className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-primary",children:((d=a==null?void 0:a.first_name)==null?void 0:d.charAt(0))||"U"})}),r.jsxs("div",{className:"hidden md:block text-left",children:[r.jsx("p",{className:`text-sm font-medium ${c?"text-black":""}`,children:(a==null?void 0:a.first_name)||"User"}),r.jsx("p",{className:`text-xs ${c?"text-gray-600":"text-muted-foreground"}`,children:(a==null?void 0:a.user_type)||"Admin"})]})]})}),r.jsxs(wn,{align:"end",children:[r.jsx(Wt,{onClick:()=>s("/profile"),children:"Profile"}),r.jsx(Wt,{onClick:()=>s("/settings"),children:"Settings"}),r.jsx(Wt,{onClick:l,children:"Logout"})]})]})]})]})})};function ZG(){const e=ad(),t=Ai(),{plans:s,loading:n,error:a}=ma(f=>f.subscription),[i,o]=x.useState(null);x.useEffect(()=>{e(Xi())},[e]);const l=f=>parseFloat(f).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2}),c=f=>{const y=f.toLowerCase();return y.includes("basic")||y.includes("starter")?{text:"Starter",variant:"secondary"}:y.includes("pro")||y.includes("professional")?{text:"Popular",variant:"default"}:y.includes("enterprise")||y.includes("premium")?{text:"Enterprise",variant:"default"}:null},d=f=>{const y=f.toLowerCase();return y.includes("basic")||y.includes("starter")?r.jsx(hr,{className:"h-6 w-6"}):y.includes("pro")||y.includes("professional")?r.jsx(ro,{className:"h-6 w-6"}):y.includes("enterprise")||y.includes("premium")?r.jsx(o5,{className:"h-6 w-6"}):r.jsx(cn,{className:"h-6 w-6"})},u=f=>{o(f)},h=()=>{i&&(localStorage.setItem("selectedSubscriptionPlan",JSON.stringify(i)),t("/register",{state:{selectedPlan:i,fromSubscription:!0}}))},p=Array.isArray(s)?s:[];return n?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx(Gr,{className:"h-8 w-32 mx-auto mb-4"}),r.jsx(Gr,{className:"h-12 w-96 mx-auto mb-6"}),r.jsx(Gr,{className:"h-6 w-96 mx-auto"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(f=>r.jsxs(Me,{className:"border-0 shadow-lg",children:[r.jsxs(Ke,{children:[r.jsx(Gr,{className:"h-6 w-32 mb-2"}),r.jsx(Gr,{className:"h-4 w-48"})]}),r.jsxs(Ve,{children:[r.jsx(Gr,{className:"h-8 w-24 mb-4"}),r.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(y=>r.jsx(Gr,{className:"h-4 w-full"},y))})]})]},f))})]})}):a?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[r.jsx("h2",{className:"text-red-800 font-semibold text-xl mb-2",children:"Error Loading Subscription Plans"}),r.jsx("p",{className:"text-red-600 mb-4",children:a}),r.jsx(fe,{onClick:()=>e(Xi()),className:"bg-red-600 hover:bg-red-700",children:"Retry"})]})})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[r.jsx(M5,{onMenuClick:()=>{}}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px- py-1",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 ",children:["Select Your Perfect",r.jsx("span",{className:"text-emerald-600 block",children:"Subscription Plan"})]}),r.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto leading-relaxed",children:"Choose the plan that best fits your school's needs. You can always upgrade or downgrade later."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:p.map(f=>{const y=c(f.name),g=d(f.name),j=(i==null?void 0:i.id)===f.id;return r.jsxs(Me,{className:`relative border-2 transition-all duration-300 hover:-translate-y-1 rounded-xl overflow-hidden cursor-pointer ${j?"border-emerald-600 shadow-lg scale-102 bg-emerald-50":"border-slate-200 shadow-md hover:shadow-lg bg-white"}`,onClick:()=>u(f),children:[!f.is_active&&r.jsx("div",{className:"absolute top-4 right-4 z-10",children:r.jsx(Te,{variant:"secondary",children:"Inactive"})}),j&&r.jsx("div",{className:"absolute top-4 right-4 z-10",children:r.jsx(Te,{className:"bg-emerald-600 text-white",children:"Selected"})}),y&&!j&&r.jsx("div",{className:`text-center py-2 text-sm font-medium ${y.text==="Popular"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-700"}`,children:y.text}),r.jsxs(Ke,{className:"text-center pb-4",children:[r.jsx("div",{className:"flex justify-center mb-3",children:r.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600",children:g})}),r.jsx(Je,{className:"text-xl font-bold text-slate-900 mb-2",children:f.name.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase())}),r.jsx(br,{className:"text-slate-600 text-sm",children:f.description})]}),r.jsxs(Ve,{className:"pb-6",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"text-2xl font-bold text-slate-900",children:l(f.base_price)}),r.jsx("span",{className:"text-slate-600",children:"/month"})]}),r.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[r.jsxs("div",{children:["+ ",l(f.price_per_student)," per student"]}),r.jsxs("div",{children:["+ ",l(f.price_per_bus)," per bus"]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-slate-900 mb-2 text-center text-sm",children:"Plan Limits"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{className:"text-center p-1 bg-slate-50 rounded",children:[r.jsx("div",{className:"font-semibold text-emerald-600",children:f.features_json.max_students}),r.jsx("div",{className:"text-slate-500 text-xs",children:"Students"})]}),r.jsxs("div",{className:"text-center p-1 bg-slate-50 rounded",children:[r.jsx("div",{className:"font-semibold text-emerald-600",children:f.features_json.max_parents}),r.jsx("div",{className:"text-slate-500 text-xs",children:"Parents"})]}),r.jsxs("div",{className:"text-center p-1 bg-slate-50 rounded",children:[r.jsx("div",{className:"font-semibold text-emerald-600",children:f.features_json.max_buses}),r.jsx("div",{className:"text-slate-500 text-xs",children:"Buses"})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-slate-900 mb-2 text-sm",children:"Features"}),r.jsx("div",{className:"space-y-1",children:Object.entries(f.features_json).map(([v,w])=>typeof w=="boolean"?r.jsx("div",{className:"flex items-center justify-between text-xs",children:r.jsxs("div",{className:"flex items-center gap-2",children:[w?r.jsx(Rn,{className:"h-3 w-3 text-emerald-500"}):r.jsx(mu,{className:"h-3 w-3 text-red-500"}),r.jsx("span",{className:"capitalize",children:v.replace(/_/g," ")})]})},v):null)})]}),r.jsx("div",{className:"pt-3 border-t border-slate-200 mb-4",children:r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-slate-600",children:"Billing Cycle:"}),r.jsx(Te,{variant:"outline",className:"capitalize text-xs",children:f.default_billing_cycle})]})}),j&&r.jsx("div",{className:"pt-3 border-t border-slate-200",children:r.jsxs(fe,{className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-semibold transition-all duration-200 hover:scale-105 shadow-lg",onClick:h,children:["Continue to Registration",r.jsx(RP,{className:"h-4 w-4 ml-2"})]})})]})]},f.id)})}),p.length===0&&!n&&r.jsx("div",{className:"text-center py-12",children:r.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[r.jsx(Xn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Subscription Plans Available"}),r.jsx("p",{children:"Please contact support to set up subscription plans."})]})}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("div",{className:"bg-emerald-50 p-6 rounded-xl border border-emerald-200",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[r.jsx(Rh,{className:"h-4 w-4 text-emerald-600"}),r.jsx("span",{className:"text-emerald-800 font-semibold text-sm",children:"All plans include:"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-emerald-700",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(Rn,{className:"h-3 w-3"}),r.jsx("span",{children:"24/7 Support"})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(Rn,{className:"h-3 w-3"}),r.jsx("span",{children:"Free Setup"})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(Rn,{className:"h-3 w-3"}),r.jsx("span",{children:"No Hidden Fees"})]})]})]})})]}),r.jsx("footer",{className:"bg-slate-900 text-white py-16",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"col-span-1 md:col-span-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[r.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center",children:r.jsx(cn,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-xl font-bold",children:"LuxCub"})]}),r.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed max-w-md",children:"Modern school transportation management platform that helps schools improve safety, efficiency, and parent satisfaction."}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("a",{href:"#",className:"text-slate-400 hover:text-emerald-400 transition-colors",children:r.jsx(zo,{className:"h-5 w-5"})}),r.jsx("a",{href:"#",className:"text-slate-400 hover:text-emerald-400 transition-colors",children:r.jsx(Oo,{className:"h-5 w-5"})}),r.jsx("a",{href:"#",className:"text-slate-400 hover:text-emerald-400 transition-colors",children:r.jsx(Ks,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Product"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Features"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Pricing"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Demo"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"API"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Company"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"About"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Blog"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Careers"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Contact"})})]})]})]}),r.jsx("div",{className:"border-t border-slate-800 mt-12 pt-8 text-center",children:r.jsx("p",{className:"text-slate-400",children:" 2024 LuxCub. All rights reserved."})})]})})]})}const XG=()=>{const e=Ai();return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-emerald-50 p-4",children:r.jsxs(Me,{className:"w-full max-w-2xl shadow-xl",children:[r.jsxs(Ke,{className:"text-center",children:[r.jsx("div",{className:"mx-auto w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mb-6",children:r.jsx(bn,{className:"h-10 w-10 text-amber-600"})}),r.jsx(Je,{className:"text-3xl font-bold text-slate-900 mb-2",children:"Registration Under Review"}),r.jsx(br,{className:"text-lg text-slate-600",children:"Thank you for registering your school with LuxCub. We're currently reviewing your application."})]}),r.jsxs(Ve,{className:"space-y-6",children:[r.jsx("div",{className:"text-center",children:r.jsxs(Te,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-200 px-4 py-2 text-base",children:[r.jsx(bn,{className:"h-4 w-4 mr-2"}),"Pending Verification"]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"What happens next?"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mt-0.5",children:r.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"1"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-700 font-medium",children:"Application Review"}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Our team will review your school information and verify details."})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mt-0.5",children:r.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"2"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-700 font-medium",children:"Contact Verification"}),r.jsx("p",{className:"text-slate-600 text-sm",children:"We'll contact you to verify your information and discuss setup."})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mt-0.5",children:r.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"3"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-700 font-medium",children:"Account Setup"}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Once approved, we'll set up your account and provide access credentials."})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Expected Timeline"}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ur,{className:"h-5 w-5 text-emerald-600"}),r.jsx("span",{className:"text-slate-700 font-medium",children:"Application Submitted"})]}),r.jsx("span",{className:"text-sm text-slate-500",children:"Today"})]}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(bn,{className:"h-5 w-5 text-amber-600"}),r.jsx("span",{className:"text-slate-700 font-medium",children:"Under Review"})]}),r.jsx("span",{className:"text-sm text-slate-500",children:"1-2 business days"})]}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ks,{className:"h-5 w-5 text-slate-400"}),r.jsx("span",{className:"text-slate-500 font-medium",children:"Account Setup"})]}),r.jsx("span",{className:"text-sm text-slate-500",children:"2-3 business days"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Need Help?"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[r.jsx(Oo,{className:"h-5 w-5 text-emerald-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Email Support"}),r.jsx("p",{className:"text-xs text-slate-600",children:"hello@luxcub.com"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[r.jsx(zo,{className:"h-5 w-5 text-emerald-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Phone Support"}),r.jsx("p",{className:"text-xs text-slate-600",children:"+1 (555) 123-4567"})]})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[r.jsxs(fe,{variant:"outline",className:"flex-1",onClick:()=>e("/home"),children:[r.jsx(qj,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),r.jsx(fe,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700",onClick:()=>e("/login"),children:"Try Demo Account"})]})]})]})})},d2=768;function QG(){const[e,t]=x.useState(void 0);return x.useEffect(()=>{const s=window.matchMedia(`(max-width: ${d2-1}px)`),n=()=>{t(window.innerWidth<d2)};return s.addEventListener("change",n),t(window.innerWidth<d2),()=>s.removeEventListener("change",n)},[]),!!e}var eK="Separator",_C="horizontal",tK=["horizontal","vertical"],J8=x.forwardRef((e,t)=>{const{decorative:s,orientation:n=_C,...a}=e,i=rK(n)?n:_C,l=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return r.jsx(Ot.div,{"data-orientation":i,...l,...a,ref:t})});J8.displayName=eK;function rK(e){return tK.includes(e)}var Z8=J8;const Xm=x.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...n},a)=>r.jsx(Z8,{ref:a,decorative:s,orientation:t,className:it("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Xm.displayName=Z8.displayName;var X8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sK="VisuallyHidden",Hy=x.forwardRef((e,t)=>r.jsx(Ot.span,{...e,ref:t,style:{...X8,...e.style}}));Hy.displayName=sK;var nK=Hy,[Wy,ire]=xa("Tooltip",[id]),Gy=id(),Q8="TooltipProvider",aK=700,tw="tooltip.open",[iK,$5]=Wy(Q8),eL=e=>{const{__scopeTooltip:t,delayDuration:s=aK,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=x.useRef(!0),l=x.useRef(!1),c=x.useRef(0);return x.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(iK,{scope:t,isOpenDelayedRef:o,delayDuration:s,onOpen:x.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:x.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};eL.displayName=Q8;var Lp="Tooltip",[oK,Ky]=Wy(Lp),tL=e=>{const{__scopeTooltip:t,children:s,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=$5(Lp,e.__scopeTooltip),d=Gy(t),[u,h]=x.useState(null),p=jn(),f=x.useRef(0),y=o??c.disableHoverableContent,g=l??c.delayDuration,j=x.useRef(!1),[v,w]=so({prop:n,defaultProp:a??!1,onChange:R=>{R?(c.onOpen(),document.dispatchEvent(new CustomEvent(tw))):c.onClose(),i==null||i(R)},caller:Lp}),N=x.useMemo(()=>v?j.current?"delayed-open":"instant-open":"closed",[v]),C=x.useCallback(()=>{window.clearTimeout(f.current),f.current=0,j.current=!1,w(!0)},[w]),k=x.useCallback(()=>{window.clearTimeout(f.current),f.current=0,w(!1)},[w]),O=x.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{j.current=!0,w(!0),f.current=0},g)},[g,w]);return x.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),r.jsx(My,{...d,children:r.jsx(oK,{scope:t,contentId:p,open:v,stateAttribute:N,trigger:u,onTriggerChange:h,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayedRef.current?O():C()},[c.isOpenDelayedRef,O,C]),onTriggerLeave:x.useCallback(()=>{y?k():(window.clearTimeout(f.current),f.current=0)},[k,y]),onOpen:C,onClose:k,disableHoverableContent:y,children:s})})};tL.displayName=Lp;var rw="TooltipTrigger",rL=x.forwardRef((e,t)=>{const{__scopeTooltip:s,...n}=e,a=Ky(rw,s),i=$5(rw,s),o=Gy(s),l=x.useRef(null),c=Nr(t,l,a.onTriggerChange),d=x.useRef(!1),u=x.useRef(!1),h=x.useCallback(()=>d.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(Jp,{asChild:!0,...o,children:r.jsx(Ot.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:pt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:pt(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:pt(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:pt(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:pt(e.onBlur,a.onClose),onClick:pt(e.onClick,a.onClose)})})});rL.displayName=rw;var lK="TooltipPortal",[ore,cK]=Wy(lK,{forceMount:void 0}),uf="TooltipContent",sL=x.forwardRef((e,t)=>{const s=cK(uf,e.__scopeTooltip),{forceMount:n=s.forceMount,side:a="top",...i}=e,o=Ky(uf,e.__scopeTooltip);return r.jsx($a,{present:n||o.open,children:o.disableHoverableContent?r.jsx(nL,{side:a,...i,ref:t}):r.jsx(dK,{side:a,...i,ref:t})})}),dK=x.forwardRef((e,t)=>{const s=Ky(uf,e.__scopeTooltip),n=$5(uf,e.__scopeTooltip),a=x.useRef(null),i=Nr(t,a),[o,l]=x.useState(null),{trigger:c,onClose:d}=s,u=a.current,{onPointerInTransitChange:h}=n,p=x.useCallback(()=>{l(null),h(!1)},[h]),f=x.useCallback((y,g)=>{const j=y.currentTarget,v={x:y.clientX,y:y.clientY},w=pK(v,j.getBoundingClientRect()),N=gK(v,w),C=xK(g.getBoundingClientRect()),k=yK([...N,...C]);l(k),h(!0)},[h]);return x.useEffect(()=>()=>p(),[p]),x.useEffect(()=>{if(c&&u){const y=j=>f(j,u),g=j=>f(j,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",g)}}},[c,u,f,p]),x.useEffect(()=>{if(o){const y=g=>{const j=g.target,v={x:g.clientX,y:g.clientY},w=(c==null?void 0:c.contains(j))||(u==null?void 0:u.contains(j)),N=!vK(v,o);w?p():N&&(p(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,o,d,p]),r.jsx(nL,{...e,ref:i})}),[uK,hK]=Wy(Lp,{isInside:!1}),fK=qP("TooltipContent"),nL=x.forwardRef((e,t)=>{const{__scopeTooltip:s,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Ky(uf,s),d=Gy(s),{onClose:u}=c;return x.useEffect(()=>(document.addEventListener(tw,u),()=>document.removeEventListener(tw,u)),[u]),x.useEffect(()=>{if(c.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),r.jsx(xu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:r.jsxs($y,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(fK,{children:n}),r.jsx(uK,{scope:s,isInside:!0,children:r.jsx(nK,{id:c.contentId,role:"tooltip",children:a||n})})]})})});sL.displayName=uf;var aL="TooltipArrow",mK=x.forwardRef((e,t)=>{const{__scopeTooltip:s,...n}=e,a=Gy(s);return hK(aL,s).isInside?null:r.jsx(By,{...a,...n,ref:t})});mK.displayName=aL;function pK(e,t){const s=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(s,n,a,i)){case i:return"left";case a:return"right";case s:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function gK(e,t,s=5){const n=[];switch(t){case"top":n.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":n.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":n.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":n.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return n}function xK(e){const{top:t,right:s,bottom:n,left:a}=e;return[{x:a,y:t},{x:s,y:t},{x:s,y:n},{x:a,y:n}]}function vK(e,t){const{x:s,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,h=c.x,p=c.y;u>n!=p>n&&s<(h-d)*(n-u)/(p-u)+d&&(a=!a)}return a}function yK(e){const t=e.slice();return t.sort((s,n)=>s.x<n.x?-1:s.x>n.x?1:s.y<n.y?-1:s.y>n.y?1:0),bK(t)}function bK(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const s=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;s.length>=2;){const i=s[s.length-1],o=s[s.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))s.pop();else break}s.push(a)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}var jK=eL,wK=tL,NK=rL,iL=sL;const oL=jK,SK=wK,_K=NK,lL=x.forwardRef(({className:e,sideOffset:t=4,...s},n)=>r.jsx(iL,{ref:n,sideOffset:t,className:it("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));lL.displayName=iL.displayName;const CK="sidebar-state",kK=60*60*24*365,AK="var(--sidebar-width, 16rem)",PK="var(--sidebar-width-icon, 4rem)",cL=x.createContext(void 0);function dL({children:e,defaultOpen:t=!0,open:s,onOpenChange:n,className:a,style:i,...o}){const l=QG(),[c,d]=x.useState(!1),[u,h]=x.useState(t),p=s??u,f=j=>{const v=typeof j=="function"?j(p):j;n?n(v):h(v),document.cookie=`${CK}=${v}; path=/; max-age=${kK}`},y=()=>l?d(j=>!j):f(j=>!j),g=p?"expanded":"collapsed";return r.jsx(cL.Provider,{value:{state:g,open:p,setOpen:f,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:y},children:r.jsx(oL,{delayDuration:0,children:r.jsx("div",{style:{"--sidebar-width":AK,"--sidebar-width-icon":PK,...i},className:it("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",a),...o,children:e})})})}function Rf(){const e=x.useContext(cL);if(e===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return e}const EK=gu("group/sidebar relative flex h-full flex-col gap-4 border-r bg-background transition-all duration-300 ease-in-out",{variants:{variant:{default:"bg-background",inset:"bg-sidebar"}},defaultVariants:{variant:"default"}}),LK=x.forwardRef(({className:e,variant:t,children:s,...n},a)=>{const{state:i,open:o,isMobile:l}=Rf();return r.jsx("div",{ref:a,"data-state":i,className:it(EK({variant:t}),"w-[var(--sidebar-width)] data-[state=collapsed]:w-[var(--sidebar-width-icon)]",e),...n,children:s})});LK.displayName="Sidebar";const RK=x.forwardRef(({className:e,onClick:t,...s},n)=>{const{toggleSidebar:a}=Rf();return r.jsxs(fe,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:it("h-7 w-7",e),onClick:i=>{t==null||t(i),a()},...s,children:[r.jsx(HU,{}),r.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});RK.displayName="SidebarTrigger";const TK=x.forwardRef(({className:e,...t},s)=>{const{toggleSidebar:n}=Rf();return r.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:it("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});TK.displayName="SidebarRail";const IK=x.forwardRef(({className:e,...t},s)=>r.jsx("main",{ref:s,className:it("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));IK.displayName="SidebarInset";const FK=x.forwardRef(({className:e,...t},s)=>r.jsx(Oe,{ref:s,"data-sidebar":"input",className:it("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));FK.displayName="SidebarInput";const DK=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,"data-sidebar":"header",className:it("flex flex-col gap-2 p-2",e),...t}));DK.displayName="SidebarHeader";const OK=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,"data-sidebar":"footer",className:it("flex flex-col gap-2 p-2",e),...t}));OK.displayName="SidebarFooter";const MK=x.forwardRef(({className:e,...t},s)=>r.jsx(Xm,{ref:s,"data-sidebar":"separator",className:it("mx-2 w-auto bg-sidebar-border",e),...t}));MK.displayName="SidebarSeparator";const $K=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,"data-sidebar":"content",className:it("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));$K.displayName="SidebarContent";const BK=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,"data-sidebar":"group",className:it("relative flex w-full min-w-0 flex-col p-2",e),...t}));BK.displayName="SidebarGroup";const zK=x.forwardRef(({className:e,asChild:t=!1,...s},n)=>{const a=t?pu:"div";return r.jsx(a,{ref:n,"data-sidebar":"group-label",className:it("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...s})});zK.displayName="SidebarGroupLabel";const UK=x.forwardRef(({className:e,asChild:t=!1,...s},n)=>{const a=t?pu:"button";return r.jsx(a,{ref:n,"data-sidebar":"group-action",className:it("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...s})});UK.displayName="SidebarGroupAction";const qK=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,"data-sidebar":"group-content",className:it("w-full text-sm",e),...t}));qK.displayName="SidebarGroupContent";const VK=x.forwardRef(({className:e,...t},s)=>r.jsx("ul",{ref:s,"data-sidebar":"menu",className:it("flex w-full min-w-0 flex-col gap-1",e),...t}));VK.displayName="SidebarMenu";const HK=x.forwardRef(({className:e,...t},s)=>r.jsx("li",{ref:s,"data-sidebar":"menu-item",className:it("group/menu-item relative",e),...t}));HK.displayName="SidebarMenuItem";const WK=gu("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),GK=x.forwardRef(({asChild:e=!1,isActive:t=!1,variant:s="default",size:n="default",tooltip:a,className:i,...o},l)=>{const c=e?pu:"button",{isMobile:d,state:u}=Rf(),h=r.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":n,"data-active":t,className:it(WK({variant:s,size:n}),i),...o});return a?(typeof a=="string"&&(a={children:a}),r.jsxs(SK,{children:[r.jsx(_K,{asChild:!0,children:h}),r.jsx(lL,{side:"right",align:"center",hidden:u!=="collapsed"||d,...a})]})):h});GK.displayName="SidebarMenuButton";const KK=x.forwardRef(({className:e,asChild:t=!1,showOnHover:s=!1,...n},a)=>{const i=t?pu:"button";return r.jsx(i,{ref:a,"data-sidebar":"menu-action",className:it("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...n})});KK.displayName="SidebarMenuAction";const YK=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:it("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));YK.displayName="SidebarMenuBadge";const JK=x.forwardRef(({className:e,showIcon:t=!1,...s},n)=>{const a=x.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return r.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:it("rounded-md h-8 flex gap-2 px-2 items-center",e),...s,children:[t&&r.jsx(Gr,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),r.jsx(Gr,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});JK.displayName="SidebarMenuSkeleton";const ZK=x.forwardRef(({className:e,...t},s)=>r.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:it("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));ZK.displayName="SidebarMenuSub";const XK=x.forwardRef(({...e},t)=>r.jsx("li",{ref:t,...e}));XK.displayName="SidebarMenuSubItem";const QK=x.forwardRef(({asChild:e=!1,size:t="md",isActive:s,className:n,...a},i)=>{const o=e?pu:"a";return r.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":t,"data-active":s,className:it("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...a})});QK.displayName="SidebarMenuSubButton";const eY=[{label:"Overview",icon:OP,href:"/"},{label:"Parents",icon:hr,href:"/parents"},{label:"Students",icon:hr,href:"/students"},{label:"Drivers",icon:hr,href:"/drivers"},{label:"Vehicles",icon:Ec,href:"/vehicles"},{label:"Routes",icon:av,href:"/routes"},{label:"Trips",icon:Ec,href:"/trips"},{label:"Staff",icon:hr,href:"/staff"},{label:"Reports",icon:ra,href:"/reports"},{label:"Notifications",icon:Eo,href:"/notifications"},{label:"Subscription",icon:ta,href:"/subscription"},{label:"School Subscriptions",icon:ks,href:"/admin/school-subscription"}];function tY(){const e=io(),t=s=>s==="/"?e.pathname==="/":e.pathname.startsWith(s);return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx(zd,{to:"/home",children:r.jsxs("div",{className:"p-6 flex items-center gap-2",children:[r.jsx("div",{className:"rounded-full bg-green-100 dark:bg-green-900/20 p-2",children:r.jsxs("svg",{width:"28",height:"28",fill:"none",children:[r.jsx("circle",{cx:"14",cy:"14",r:"13",stroke:"#22c55e",strokeWidth:"2"}),r.jsx("path",{d:"M14 9v7",stroke:"#22c55e",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("circle",{cx:"14",cy:"17.5",r:"1.5",fill:"#22c55e"})]})}),r.jsxs("span",{className:"font-extrabold text-lg",children:[r.jsx("span",{className:"text-black dark:text-white",children:"Lux"}),r.jsx("span",{className:"text-green-500",children:"Cab"})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:r.jsx("nav",{className:"space-y-1",children:eY.map(s=>{const n=t(s.href);return r.jsxs(zd,{to:s.href,className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${n?"bg-green-500/90 text-white":"text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[r.jsx(s.icon,{size:20,className:n?"text-white":"text-gray-700 dark:text-gray-300"}),r.jsx("span",{className:"font-medium",children:s.label})]},s.label)})})}),r.jsx("div",{className:"p-4",children:r.jsxs(zd,{to:"/settings",className:`flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-700 dark:text-gray-300 w-full ${t("/settings")?"bg-green-500/90 text-white":""}`,children:[r.jsx(Ao,{size:20,className:t("/settings")?"text-white":"text-gray-700 dark:text-gray-300"}),r.jsx("span",{className:"font-medium",children:"Settings"})]})})]})}const rY=()=>{io().pathname;const{openMobile:t,setOpenMobile:s,toggleSidebar:n}=Rf(),[a,i]=x.useState(!1),o=x.useRef(null);return x.useEffect(()=>{const l=()=>{if(o.current){const d=o.current.scrollTop;i(d>0)}},c=o.current;if(c)return c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)},[]),r.jsxs("div",{className:"h-screen w-screen bg-background",children:[t&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>s(!1)}),r.jsxs("div",{className:"flex h-full w-full overflow-hidden",children:[r.jsx("div",{className:`fixed md:static inset-y-0 left-0 z-50 w-64 transform transition-transform duration-200 ease-in-out ${t?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:r.jsx("div",{className:"h-full bg-card border-r",children:r.jsx(tY,{})})}),r.jsxs("div",{className:"flex-1 flex flex-col w-full overflow-hidden",children:[r.jsx(M5,{onMenuClick:n,isScrolled:a}),r.jsx("main",{ref:o,className:"flex-1 overflow-y-auto bg-background",children:r.jsx("div",{className:"h-full w-full",children:r.jsx("div",{className:"h-full w-full",children:r.jsx(_A,{})})})})]})]})]})},sY=()=>r.jsx(dL,{children:r.jsx(rY,{})}),nY=()=>{const{stats:e,loading:t}=At(n=>n.overview),s=[{title:"Total Students",value:e.totalStudents.toString(),icon:hr,description:"Active students",color:"text-blue-600"},{title:"Total Parents",value:e.totalParents.toString(),icon:$P,description:"Registered parents",color:"text-green-600"},{title:"Total Staff",value:e.totalStaff.toString(),icon:FU,description:"School staff",color:"text-purple-600"},{title:"Total Vehicles",value:e.totalVehicles.toString(),icon:cn,description:"Fleet vehicles",color:"text-orange-600"},{title:"Active Routes",value:e.activeRoutes.toString(),icon:GU,description:"Current routes",color:"text-indigo-600"},{title:"Total Routes",value:e.totalRoutes.toString(),icon:Ks,description:"All routes",color:"text-red-600"}];return t?r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 w-full",children:s.map(n=>r.jsxs(Me,{className:"w-full",children:[r.jsx(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(n.icon,{className:"h-4 w-4 text-muted-foreground"})}),r.jsxs(Ve,{children:[r.jsx("div",{className:"h-8 bg-muted rounded animate-pulse"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:n.description})]})]},n.title))}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 w-full",children:s.map(n=>r.jsxs(Me,{className:"w-full hover:shadow-md transition-shadow",children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:n.title}),r.jsx(n.icon,{className:`h-4 w-4 ${n.color}`})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:`text-2xl font-bold ${n.color}`,children:n.value}),r.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})]},n.title))})},ya=x.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:it("w-full caption-bottom text-sm",e),...t})}));ya.displayName="Table";const ba=x.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:it("[&_tr]:border-b",e),...t}));ba.displayName="TableHeader";const ja=x.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:it("[&_tr:last-child]:border-0",e),...t}));ja.displayName="TableBody";const aY=x.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:it("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));aY.displayName="TableFooter";const Kr=x.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:it("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Kr.displayName="TableRow";const ut=x.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:it("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ut.displayName="TableHead";const ct=x.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:it("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ct.displayName="TableCell";const iY=x.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:it("mt-4 text-sm text-muted-foreground",e),...t}));iY.displayName="TableCaption";const oY=()=>{const e=ns(),{trips:t,loading:s}=At(d=>d.trips),a=(()=>{const d=localStorage.getItem("schoolId");return d?parseInt(d):void 0})();x.useEffect(()=>{a&&e(Vd({schoolId:a}))},[e,a]);const i=Array.isArray(t)?t.slice(0,5):[],o=d=>{switch(d.toLowerCase()){case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=d=>{try{return new Date(d).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return d}},c=d=>d.replace("_"," ").replace(/\b\w/g,u=>u.toUpperCase());return s?r.jsx("div",{className:"rounded-md border w-full",children:r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"animate-pulse space-y-3",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"space-y-2",children:[1,2,3].map(d=>r.jsx("div",{className:"h-4 bg-gray-200 rounded"},d))})]})})}):i.length===0?r.jsxs("div",{className:"rounded-md border w-full",children:[r.jsx("div",{className:"p-4 border-b",children:r.jsx("h3",{className:"text-lg font-semibold",children:"Recent Trips"})}),r.jsx("div",{className:"p-8 text-center",children:r.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})})}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"No trips found"}),r.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"There are no recent trips to display. Trips will appear here once they are scheduled or completed."})]})]})})]}):r.jsxs("div",{className:"rounded-md border w-full",children:[r.jsx("div",{className:"p-4 border-b",children:r.jsx("h3",{className:"text-lg font-semibold",children:"Recent Trips"})}),r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{className:"w-[20%]",children:"Route"}),r.jsx(ut,{className:"w-[20%]",children:"Driver"}),r.jsx(ut,{className:"w-[20%]",children:"Vehicle"}),r.jsx(ut,{className:"w-[15%]",children:"Status"}),r.jsx(ut,{className:"w-[15%]",children:"Start Time"}),r.jsx(ut,{className:"w-[10%]",children:"Students"})]})}),r.jsx(ja,{children:i.map(d=>r.jsxs(Kr,{children:[r.jsx(ct,{className:"font-medium",children:d.route_name||`Route ${d.route}`}),r.jsx(ct,{children:d.driver_name||`Driver ${d.driver}`}),r.jsx(ct,{children:d.vehicle_registration||`Vehicle ${d.vehicle}`}),r.jsx(ct,{children:r.jsx(Te,{className:o(d.status),children:c(d.status)})}),r.jsx(ct,{children:l(d.start_time)}),r.jsx(ct,{children:d.students_count})]},d.id))})]})]})};function CC(e,[t,s]){return Math.min(s,Math.max(t,e))}function B5(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var lY=[" ","Enter","ArrowUp","ArrowDown"],cY=[" ","Enter"],iu="Select",[Yy,Jy,dY]=Ty(iu),[Tf,lre]=xa(iu,[dY,id]),Zy=id(),[uY,ld]=Tf(iu),[hY,fY]=Tf(iu),uL=e=>{const{__scopeSelect:t,children:s,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:p,required:f,form:y}=e,g=Zy(t),[j,v]=x.useState(null),[w,N]=x.useState(null),[C,k]=x.useState(!1),O=Iy(d),[R,E]=so({prop:n,defaultProp:a??!1,onChange:i,caller:iu}),[I,D]=so({prop:o,defaultProp:l,onChange:c,caller:iu}),P=x.useRef(null),A=j?y||!!j.closest("form"):!0,[$,U]=x.useState(new Set),de=Array.from($).map(se=>se.props.value).join(";");return r.jsx(My,{...g,children:r.jsxs(uY,{required:f,scope:t,trigger:j,onTriggerChange:v,valueNode:w,onValueNodeChange:N,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:jn(),value:I,onValueChange:D,open:R,onOpenChange:E,dir:O,triggerPointerDownPosRef:P,disabled:p,children:[r.jsx(Yy.Provider,{scope:t,children:r.jsx(hY,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(se=>{U(ge=>new Set(ge).add(se))},[]),onNativeOptionRemove:x.useCallback(se=>{U(ge=>{const V=new Set(ge);return V.delete(se),V})},[]),children:s})}),A?r.jsxs(FL,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:I,onChange:se=>D(se.target.value),disabled:p,form:y,children:[I===void 0?r.jsx("option",{value:""}):null,Array.from($)]},de):null]})})};uL.displayName=iu;var hL="SelectTrigger",fL=x.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:n=!1,...a}=e,i=Zy(s),o=ld(hL,s),l=o.disabled||n,c=Nr(t,o.onTriggerChange),d=Jy(s),u=x.useRef("touch"),[h,p,f]=OL(g=>{const j=d().filter(N=>!N.disabled),v=j.find(N=>N.value===o.value),w=ML(j,g,v);w!==void 0&&o.onValueChange(w.value)}),y=g=>{l||(o.onOpenChange(!0),f()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return r.jsx(Jp,{asChild:!0,...i,children:r.jsx(Ot.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":DL(o.value)?"":void 0,...a,ref:c,onClick:pt(a.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&y(g)}),onPointerDown:pt(a.onPointerDown,g=>{u.current=g.pointerType;const j=g.target;j.hasPointerCapture(g.pointerId)&&j.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:pt(a.onKeyDown,g=>{const j=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(j&&g.key===" ")&&lY.includes(g.key)&&(y(),g.preventDefault())})})})});fL.displayName=hL;var mL="SelectValue",pL=x.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:a,children:i,placeholder:o="",...l}=e,c=ld(mL,s),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=Nr(t,c.onValueNodeChange);return Dn(()=>{d(u)},[d,u]),r.jsx(Ot.span,{...l,ref:h,style:{pointerEvents:"none"},children:DL(c.value)?r.jsx(r.Fragment,{children:o}):i})});pL.displayName=mL;var mY="SelectIcon",gL=x.forwardRef((e,t)=>{const{__scopeSelect:s,children:n,...a}=e;return r.jsx(Ot.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});gL.displayName=mY;var pY="SelectPortal",xL=e=>r.jsx(Pf,{asChild:!0,...e});xL.displayName=pY;var ou="SelectContent",vL=x.forwardRef((e,t)=>{const s=ld(ou,e.__scopeSelect),[n,a]=x.useState();if(Dn(()=>{a(new DocumentFragment)},[]),!s.open){const i=n;return i?sd.createPortal(r.jsx(yL,{scope:e.__scopeSelect,children:r.jsx(Yy.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),i):null}return r.jsx(bL,{...e,ref:t})});vL.displayName=ou;var $i=10,[yL,cd]=Tf(ou),gY="SelectContentImpl",xY=Mc("SelectContent.RemoveScroll"),bL=x.forwardRef((e,t)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:g,avoidCollisions:j,...v}=e,w=ld(ou,s),[N,C]=x.useState(null),[k,O]=x.useState(null),R=Nr(t,te=>C(te)),[E,I]=x.useState(null),[D,P]=x.useState(null),A=Jy(s),[$,U]=x.useState(!1),de=x.useRef(!1);x.useEffect(()=>{if(N)return Py(N)},[N]),ky();const se=x.useCallback(te=>{const[me,...ue]=A().map(Ue=>Ue.ref.current),[ce]=ue.slice(-1),Ce=document.activeElement;for(const Ue of te)if(Ue===Ce||(Ue==null||Ue.scrollIntoView({block:"nearest"}),Ue===me&&k&&(k.scrollTop=0),Ue===ce&&k&&(k.scrollTop=k.scrollHeight),Ue==null||Ue.focus(),document.activeElement!==Ce))return},[A,k]),ge=x.useCallback(()=>se([E,N]),[se,E,N]);x.useEffect(()=>{$&&ge()},[$,ge]);const{onOpenChange:V,triggerPointerDownPosRef:K}=w;x.useEffect(()=>{if(N){let te={x:0,y:0};const me=ce=>{var Ce,Ue;te={x:Math.abs(Math.round(ce.pageX)-(((Ce=K.current)==null?void 0:Ce.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((Ue=K.current)==null?void 0:Ue.y)??0))}},ue=ce=>{te.x<=10&&te.y<=10?ce.preventDefault():N.contains(ce.target)||V(!1),document.removeEventListener("pointermove",me),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",ue,{capture:!0})}}},[N,V,K]),x.useEffect(()=>{const te=()=>V(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[V]);const[J,ie]=OL(te=>{const me=A().filter(Ce=>!Ce.disabled),ue=me.find(Ce=>Ce.ref.current===document.activeElement),ce=ML(me,te,ue);ce&&setTimeout(()=>ce.ref.current.focus())}),T=x.useCallback((te,me,ue)=>{const ce=!de.current&&!ue;(w.value!==void 0&&w.value===me||ce)&&(I(te),ce&&(de.current=!0))},[w.value]),F=x.useCallback(()=>N==null?void 0:N.focus(),[N]),M=x.useCallback((te,me,ue)=>{const ce=!de.current&&!ue;(w.value!==void 0&&w.value===me||ce)&&P(te)},[w.value]),G=n==="popper"?sw:jL,ee=G===sw?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:g,avoidCollisions:j}:{};return r.jsx(yL,{scope:s,content:N,viewport:k,onViewportChange:O,itemRefCallback:T,selectedItem:E,onItemLeave:F,itemTextRefCallback:M,focusSelectedItem:ge,selectedItemText:D,position:n,isPositioned:$,searchRef:J,children:r.jsx(Gp,{as:xY,allowPinchZoom:!0,children:r.jsx(Wp,{asChild:!0,trapped:w.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:pt(a,te=>{var me;(me=w.trigger)==null||me.focus({preventScroll:!0}),te.preventDefault()}),children:r.jsx(xu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:r.jsx(G,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:te=>te.preventDefault(),...v,...ee,onPlaced:()=>U(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:pt(v.onKeyDown,te=>{const me=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!me&&te.key.length===1&&ie(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let ce=A().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(te.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const Ce=te.target,Ue=ce.indexOf(Ce);ce=ce.slice(Ue+1)}setTimeout(()=>se(ce)),te.preventDefault()}})})})})})})});bL.displayName=gY;var vY="SelectItemAlignedPosition",jL=x.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:n,...a}=e,i=ld(ou,s),o=cd(ou,s),[l,c]=x.useState(null),[d,u]=x.useState(null),h=Nr(t,R=>u(R)),p=Jy(s),f=x.useRef(!1),y=x.useRef(!0),{viewport:g,selectedItem:j,selectedItemText:v,focusSelectedItem:w}=o,N=x.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&j&&v){const R=i.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),D=v.getBoundingClientRect();if(i.dir!=="rtl"){const Ce=D.left-E.left,Ue=I.left-Ce,Ge=R.left-Ue,gt=R.width+Ge,Se=Math.max(gt,E.width),ne=window.innerWidth-$i,jt=CC(Ue,[$i,Math.max($i,ne-Se)]);l.style.minWidth=gt+"px",l.style.left=jt+"px"}else{const Ce=E.right-D.right,Ue=window.innerWidth-I.right-Ce,Ge=window.innerWidth-R.right-Ue,gt=R.width+Ge,Se=Math.max(gt,E.width),ne=window.innerWidth-$i,jt=CC(Ue,[$i,Math.max($i,ne-Se)]);l.style.minWidth=gt+"px",l.style.right=jt+"px"}const P=p(),A=window.innerHeight-$i*2,$=g.scrollHeight,U=window.getComputedStyle(d),de=parseInt(U.borderTopWidth,10),se=parseInt(U.paddingTop,10),ge=parseInt(U.borderBottomWidth,10),V=parseInt(U.paddingBottom,10),K=de+se+$+V+ge,J=Math.min(j.offsetHeight*5,K),ie=window.getComputedStyle(g),T=parseInt(ie.paddingTop,10),F=parseInt(ie.paddingBottom,10),M=R.top+R.height/2-$i,G=A-M,ee=j.offsetHeight/2,te=j.offsetTop+ee,me=de+se+te,ue=K-me;if(me<=M){const Ce=P.length>0&&j===P[P.length-1].ref.current;l.style.bottom="0px";const Ue=d.clientHeight-g.offsetTop-g.offsetHeight,Ge=Math.max(G,ee+(Ce?F:0)+Ue+ge),gt=me+Ge;l.style.height=gt+"px"}else{const Ce=P.length>0&&j===P[0].ref.current;l.style.top="0px";const Ge=Math.max(M,de+g.offsetTop+(Ce?T:0)+ee)+ue;l.style.height=Ge+"px",g.scrollTop=me-M+g.offsetTop}l.style.margin=`${$i}px 0`,l.style.minHeight=J+"px",l.style.maxHeight=A+"px",n==null||n(),requestAnimationFrame(()=>f.current=!0)}},[p,i.trigger,i.valueNode,l,d,g,j,v,i.dir,n]);Dn(()=>N(),[N]);const[C,k]=x.useState();Dn(()=>{d&&k(window.getComputedStyle(d).zIndex)},[d]);const O=x.useCallback(R=>{R&&y.current===!0&&(N(),w==null||w(),y.current=!1)},[N,w]);return r.jsx(bY,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:O,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:r.jsx(Ot.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});jL.displayName=vY;var yY="SelectPopperPosition",sw=x.forwardRef((e,t)=>{const{__scopeSelect:s,align:n="start",collisionPadding:a=$i,...i}=e,o=Zy(s);return r.jsx($y,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sw.displayName=yY;var[bY,z5]=Tf(ou,{}),nw="SelectViewport",wL=x.forwardRef((e,t)=>{const{__scopeSelect:s,nonce:n,...a}=e,i=cd(nw,s),o=z5(nw,s),l=Nr(t,i.onViewportChange),c=x.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),r.jsx(Yy.Slot,{scope:s,children:r.jsx(Ot.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:pt(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const f=Math.abs(c.current-u.scrollTop);if(f>0){const y=window.innerHeight-$i*2,g=parseFloat(h.style.minHeight),j=parseFloat(h.style.height),v=Math.max(g,j);if(v<y){const w=v+f,N=Math.min(y,w),C=w-N;h.style.height=N+"px",h.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});wL.displayName=nw;var NL="SelectGroup",[jY,wY]=Tf(NL),NY=x.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,a=jn();return r.jsx(jY,{scope:s,id:a,children:r.jsx(Ot.div,{role:"group","aria-labelledby":a,...n,ref:t})})});NY.displayName=NL;var SL="SelectLabel",_L=x.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,a=wY(SL,s);return r.jsx(Ot.div,{id:a.id,...n,ref:t})});_L.displayName=SL;var mv="SelectItem",[SY,CL]=Tf(mv),kL=x.forwardRef((e,t)=>{const{__scopeSelect:s,value:n,disabled:a=!1,textValue:i,...o}=e,l=ld(mv,s),c=cd(mv,s),d=l.value===n,[u,h]=x.useState(i??""),[p,f]=x.useState(!1),y=Nr(t,w=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,w,n,a)}),g=jn(),j=x.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(SY,{scope:s,value:n,disabled:a,textId:g,isSelected:d,onItemTextChange:x.useCallback(w=>{h(N=>N||((w==null?void 0:w.textContent)??"").trim())},[]),children:r.jsx(Yy.ItemSlot,{scope:s,value:n,disabled:a,textValue:u,children:r.jsx(Ot.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:y,onFocus:pt(o.onFocus,()=>f(!0)),onBlur:pt(o.onBlur,()=>f(!1)),onClick:pt(o.onClick,()=>{j.current!=="mouse"&&v()}),onPointerUp:pt(o.onPointerUp,()=>{j.current==="mouse"&&v()}),onPointerDown:pt(o.onPointerDown,w=>{j.current=w.pointerType}),onPointerMove:pt(o.onPointerMove,w=>{var N;j.current=w.pointerType,a?(N=c.onItemLeave)==null||N.call(c):j.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pt(o.onPointerLeave,w=>{var N;w.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:pt(o.onKeyDown,w=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&w.key===" "||(cY.includes(w.key)&&v(),w.key===" "&&w.preventDefault())})})})})});kL.displayName=mv;var Tm="SelectItemText",AL=x.forwardRef((e,t)=>{const{__scopeSelect:s,className:n,style:a,...i}=e,o=ld(Tm,s),l=cd(Tm,s),c=CL(Tm,s),d=fY(Tm,s),[u,h]=x.useState(null),p=Nr(t,v=>h(v),c.onItemTextChange,v=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,v,c.value,c.disabled)}),f=u==null?void 0:u.textContent,y=x.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:j}=d;return Dn(()=>(g(y),()=>j(y)),[g,j,y]),r.jsxs(r.Fragment,{children:[r.jsx(Ot.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?sd.createPortal(i.children,o.valueNode):null]})});AL.displayName=Tm;var PL="SelectItemIndicator",EL=x.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return CL(PL,s).isSelected?r.jsx(Ot.span,{"aria-hidden":!0,...n,ref:t}):null});EL.displayName=PL;var aw="SelectScrollUpButton",LL=x.forwardRef((e,t)=>{const s=cd(aw,e.__scopeSelect),n=z5(aw,e.__scopeSelect),[a,i]=x.useState(!1),o=Nr(t,n.onScrollButtonChange);return Dn(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),a?r.jsx(TL,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});LL.displayName=aw;var iw="SelectScrollDownButton",RL=x.forwardRef((e,t)=>{const s=cd(iw,e.__scopeSelect),n=z5(iw,e.__scopeSelect),[a,i]=x.useState(!1),o=Nr(t,n.onScrollButtonChange);return Dn(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),a?r.jsx(TL,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});RL.displayName=iw;var TL=x.forwardRef((e,t)=>{const{__scopeSelect:s,onAutoScroll:n,...a}=e,i=cd("SelectScrollButton",s),o=x.useRef(null),l=Jy(s),c=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),Dn(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),r.jsx(Ot.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:pt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:pt(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:pt(a.onPointerLeave,()=>{c()})})}),_Y="SelectSeparator",IL=x.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e;return r.jsx(Ot.div,{"aria-hidden":!0,...n,ref:t})});IL.displayName=_Y;var ow="SelectArrow",CY=x.forwardRef((e,t)=>{const{__scopeSelect:s,...n}=e,a=Zy(s),i=ld(ow,s),o=cd(ow,s);return i.open&&o.position==="popper"?r.jsx(By,{...a,...n,ref:t}):null});CY.displayName=ow;var kY="SelectBubbleInput",FL=x.forwardRef(({__scopeSelect:e,value:t,...s},n)=>{const a=x.useRef(null),i=Nr(n,a),o=B5(t);return x.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const h=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(h)}},[o,t]),r.jsx(Ot.select,{...s,style:{...X8,...s.style},ref:i,defaultValue:t})});FL.displayName=kY;function DL(e){return e===""||e===void 0}function OL(e){const t=Oa(e),s=x.useRef(""),n=x.useRef(0),a=x.useCallback(o=>{const l=s.current+o;t(l),function c(d){s.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=x.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,a,i]}function ML(e,t,s){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=s?e.indexOf(s):-1;let o=AY(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function AY(e,t){return e.map((s,n)=>e[(t+n)%e.length])}var PY=uL,$L=fL,EY=pL,LY=gL,RY=xL,BL=vL,TY=wL,zL=_L,UL=kL,IY=AL,FY=EL,qL=LL,VL=RL,HL=IL;const Jt=PY,Zt=EY,Gt=x.forwardRef(({className:e,children:t,...s},n)=>r.jsxs($L,{ref:n,className:it("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,r.jsx(LY,{asChild:!0,children:r.jsx(_y,{className:"h-4 w-4 opacity-50"})})]}));Gt.displayName=$L.displayName;const WL=x.forwardRef(({className:e,...t},s)=>r.jsx(qL,{ref:s,className:it("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(IP,{className:"h-4 w-4"})}));WL.displayName=qL.displayName;const GL=x.forwardRef(({className:e,...t},s)=>r.jsx(VL,{ref:s,className:it("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(_y,{className:"h-4 w-4"})}));GL.displayName=VL.displayName;const Kt=x.forwardRef(({className:e,children:t,position:s="popper",...n},a)=>r.jsx(RY,{children:r.jsxs(BL,{ref:a,className:it("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[r.jsx(WL,{}),r.jsx(TY,{className:it("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(GL,{})]})}));Kt.displayName=BL.displayName;const DY=x.forwardRef(({className:e,...t},s)=>r.jsx(zL,{ref:s,className:it("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));DY.displayName=zL.displayName;const Re=x.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(UL,{ref:n,className:it("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(FY,{children:r.jsx(Rn,{className:"h-4 w-4"})})}),r.jsx(IY,{children:t})]}));Re.displayName=UL.displayName;const OY=x.forwardRef(({className:e,...t},s)=>r.jsx(HL,{ref:s,className:it("-mx-1 my-1 h-px bg-muted",e),...t}));OY.displayName=HL.displayName;const MY=()=>{const e=ns(),{trips:t,loading:s}=At(v=>v.trips),[n,a]=x.useState(""),[i,o]=x.useState("all"),[l,c]=x.useState("all"),u=(()=>{const v=localStorage.getItem("schoolId");return v?parseInt(v):void 0})();x.useEffect(()=>{u&&e(Vd({schoolId:u}))},[e,u]);const h=t.filter(v=>{var k,O,R;const w=((k=v.route_name)==null?void 0:k.toLowerCase().includes(n.toLowerCase()))||((O=v.driver_name)==null?void 0:O.toLowerCase().includes(n.toLowerCase()))||((R=v.vehicle_registration)==null?void 0:R.toLowerCase().includes(n.toLowerCase())),N=i==="all"||v.status===i,C=l==="all"||v.trip_type===l;return w&&N&&C}),p={total:t.length,scheduled:t.filter(v=>v.status==="scheduled").length,ongoing:t.filter(v=>v.status==="ongoing").length,completed:t.filter(v=>v.status==="completed").length,cancelled:t.filter(v=>v.status==="cancelled").length,delayed:t.filter(v=>v.status==="delayed").length,morning:t.filter(v=>v.trip_type==="morning").length,afternoon:t.filter(v=>v.trip_type==="afternoon").length,evening:t.filter(v=>v.trip_type==="evening").length},f=v=>{switch(v.toLowerCase()){case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"ongoing":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"completed":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"delayed":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},y=v=>{switch(v.toLowerCase()){case"scheduled":return r.jsx(bn,{className:"h-4 w-4"});case"ongoing":return r.jsx(cn,{className:"h-4 w-4"});case"completed":return r.jsx(ur,{className:"h-4 w-4"});case"cancelled":return r.jsx(fu,{className:"h-4 w-4"});case"delayed":return r.jsx(Zn,{className:"h-4 w-4"});default:return r.jsx(bn,{className:"h-4 w-4"})}},g=v=>{try{return new Date(v).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return v}},j=v=>{try{return new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return v}};return s?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ii,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Loading trips..."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-2 gap-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Trips"}),r.jsx(cn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p.total}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All time trips"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Active Trips"}),r.jsx(ro,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p.ongoing}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Scheduled"}),r.jsx(ai,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p.scheduled}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Upcoming trips"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Completed"}),r.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p.completed}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully finished"})]})]})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"h-5 w-5"}),"Trip Type Distribution"]})}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:p.morning}),r.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Morning Trips"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:p.afternoon}),r.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Afternoon Trips"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:p.evening}),r.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Evening Trips"})]}),r.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:p.total}),r.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Total Trips"})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(Vo,{className:"h-5 w-5"}),"Filter Trips"]})}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"search",children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ws,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Oe,{id:"search",placeholder:"Search routes, drivers, vehicles...",value:n,onChange:v=>a(v.target.value),className:"pl-10"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"status",children:"Status"}),r.jsxs(Jt,{value:i,onValueChange:o,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Status"}),r.jsx(Re,{value:"scheduled",children:"Scheduled"}),r.jsx(Re,{value:"ongoing",children:"Ongoing"}),r.jsx(Re,{value:"completed",children:"Completed"}),r.jsx(Re,{value:"cancelled",children:"Cancelled"}),r.jsx(Re,{value:"delayed",children:"Delayed"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"type",children:"Trip Type"}),r.jsxs(Jt,{value:l,onValueChange:c,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select type"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Types"}),r.jsx(Re,{value:"morning",children:"Morning"}),r.jsx(Re,{value:"afternoon",children:"Afternoon"}),r.jsx(Re,{value:"evening",children:"Evening"})]})]})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(cn,{className:"h-5 w-5"}),"Trips (",h.length,")"]}),r.jsx(fe,{variant:"outline",size:"sm",children:"View All"})]})}),r.jsx(Ve,{children:h.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(cn,{className:"mx-auto h-12 w-12 text-muted-foreground"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-foreground",children:"No trips found"}),r.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n||i!=="all"||l!=="all"?"Try adjusting your filters.":"No trips have been created yet."})]}):r.jsx("div",{className:"rounded-md border",children:r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"Route"}),r.jsx(ut,{children:"Driver"}),r.jsx(ut,{children:"Vehicle"}),r.jsx(ut,{children:"Type"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Start Time"}),r.jsx(ut,{children:"Students"})]})}),r.jsx(ja,{children:h.slice(0,10).map(v=>r.jsxs(Kr,{children:[r.jsx(ct,{className:"font-medium",children:v.route_name}),r.jsx(ct,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qi,{className:"h-4 w-4 text-muted-foreground"}),v.driver_name]})}),r.jsx(ct,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cn,{className:"h-4 w-4 text-muted-foreground"}),v.vehicle_registration]})}),r.jsx(ct,{children:r.jsx(Te,{variant:"outline",className:"capitalize",children:v.trip_type})}),r.jsx(ct,{children:r.jsx(Te,{className:f(v.status),children:r.jsxs("div",{className:"flex items-center gap-1",children:[y(v.status),v.status]})})}),r.jsx(ct,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{children:j(v.scheduled_start_time)}),r.jsx("div",{className:"text-muted-foreground",children:g(v.scheduled_start_time)})]})}),r.jsx(ct,{children:v.students_count||0})]},v.id))})]})})})]})]})},$Y=()=>{const{trips:e}=At(f=>f.trips),{schools:t}=At(f=>f.schools),{parents:s}=At(f=>f.parents),{drivers:n}=At(f=>f.drivers),{students:a}=At(f=>f.students),{vehicles:i}=At(f=>f.vehicles),{routes:o}=At(f=>f.routes),[l,c]=x.useState("week"),d={totalTrips:e.length,completedTrips:e.filter(f=>f.status==="completed").length,activeTrips:e.filter(f=>f.status==="ongoing").length,delayedTrips:e.filter(f=>f.status==="delayed").length,morningTrips:e.filter(f=>f.trip_type==="morning").length,afternoonTrips:e.filter(f=>f.trip_type==="afternoon").length,eveningTrips:e.filter(f=>f.trip_type==="evening").length,scheduledTrips:e.filter(f=>f.status==="scheduled").length,cancelledTrips:e.filter(f=>f.status==="cancelled").length,totalSchools:t.length,totalParents:s.length,totalDrivers:n.length,totalStudents:a.length,totalVehicles:i.length,totalRoutes:o.length,completionRate:e.length>0?(e.filter(f=>f.status==="completed").length/e.length*100).toFixed(1):"0",delayRate:e.length>0?(e.filter(f=>f.status==="delayed").length/e.length*100).toFixed(1):"0",cancellationRate:e.length>0?(e.filter(f=>f.status==="cancelled").length/e.length*100).toFixed(1):"0"},u=[...e].sort((f,y)=>new Date(y.created_at||"").getTime()-new Date(f.created_at||"").getTime()).slice(0,5),h=f=>{try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return f}},p=f=>{switch(f.toLowerCase()){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"ongoing":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"delayed":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Completion Rate"}),r.jsx(ro,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[d.completionRate,"%"]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.completedTrips," of ",d.totalTrips," trips"]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Delay Rate"}),r.jsx(bn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[d.delayRate,"%"]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.delayedTrips," delayed trips"]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Active Operations"}),r.jsx(cn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.activeTrips}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Fleet"}),r.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:d.totalVehicles}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Available vehicles"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(TP,{className:"h-5 w-5"}),"Trip Type Distribution"]})}),r.jsx(Ve,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Morning"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:d.morningTrips}),r.jsxs(Te,{variant:"outline",children:[(d.morningTrips/d.totalTrips*100).toFixed(1),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Afternoon"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:d.afternoonTrips}),r.jsxs(Te,{variant:"outline",children:[(d.afternoonTrips/d.totalTrips*100).toFixed(1),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Evening"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:d.eveningTrips}),r.jsxs(Te,{variant:"outline",children:[(d.eveningTrips/d.totalTrips*100).toFixed(1),"%"]})]})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(Sy,{className:"h-5 w-5"}),"Trip Status Distribution"]})}),r.jsx(Ve,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Completed"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:d.completedTrips}),r.jsxs(Te,{variant:"outline",children:[d.completionRate,"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Scheduled"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:d.scheduledTrips}),r.jsxs(Te,{variant:"outline",children:[(d.scheduledTrips/d.totalTrips*100).toFixed(1),"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Delayed"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:d.delayedTrips}),r.jsxs(Te,{variant:"outline",children:[d.delayRate,"%"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Cancelled"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:d.cancelledTrips}),r.jsxs(Te,{variant:"outline",children:[d.cancellationRate,"%"]})]})]})]})})]})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(hr,{className:"h-5 w-5"}),"System Overview"]})}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:d.totalSchools}),r.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Schools"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d.totalStudents}),r.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Students"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:d.totalParents}),r.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Parents"})]}),r.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:d.totalDrivers}),r.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Drivers"})]}),r.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:d.totalVehicles}),r.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Vehicles"})]}),r.jsxs("div",{className:"text-center p-4 bg-indigo-50 dark:bg-indigo-950 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:d.totalRoutes}),r.jsx("div",{className:"text-sm text-indigo-600 dark:text-indigo-400",children:"Routes"})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(ai,{className:"h-5 w-5"}),"Recent Trip Activity"]}),r.jsxs(fe,{variant:"outline",size:"sm",children:[r.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Export Data"]})]})}),r.jsx(Ve,{children:r.jsx("div",{className:"space-y-4",children:u.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ai,{className:"mx-auto h-12 w-12 text-muted-foreground"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-foreground",children:"No recent trips"}),r.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Trip activity will appear here once trips are created."})]}):u.map(f=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cn,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:f.route_name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qi,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:f.driver_name})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Te,{className:p(f.status),children:f.status}),r.jsx("span",{className:"text-sm text-muted-foreground",children:f.created_at?h(f.created_at):"N/A"})]})]},f.id))})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(DU,{className:"h-5 w-5"}),"Quick Analytics Actions"]})}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(fe,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[r.jsx(ro,{className:"h-6 w-6"}),r.jsx("span",{children:"Performance Report"})]}),r.jsxs(fe,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[r.jsx(hr,{className:"h-6 w-6"}),r.jsx("span",{children:"User Analytics"})]}),r.jsxs(fe,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[r.jsx(Ks,{className:"h-6 w-6"}),r.jsx("span",{children:"Route Analysis"})]})]})})]})]})},BY=()=>{const e=ns(),{stats:t,loading:s,error:n,lastUpdated:a}=At(C=>C.overview),{user:i}=At(C=>C.auth),{schools:o,loading:l,error:c}=At(C=>C.schools),{preferences:d={showAnalytics:!0,showRecentActivity:!0,showNotificationsPanel:!0,allowDataExport:!0,autoBackup:!0,theme:"light",language:"en"}}=At(C=>C.preferences),{notifications:u}=At(C=>C.notifications),{parents:h}=At(C=>C.parents),{drivers:p}=At(C=>C.drivers),y=(()=>{const C=localStorage.getItem("schoolId");if(C)return parseInt(C);const k=o.find(O=>O.admin===(i==null?void 0:i.id));return k==null?void 0:k.id})();x.useEffect(()=>{y&&(e(Ym({schoolId:y})),e(Eh({schoolId:y})),e(ua({schoolId:y})),e(Ln())),e(Jm())},[e,y]);const g=()=>{y&&(e(Ym({schoolId:y})),e(Eh({schoolId:y})),e(ua({schoolId:y})),e(Ln()))},j=C=>{const k=new Date(C),R=Math.floor((new Date().getTime()-k.getTime())/(1e3*60));return R<1?"Just now":R<60?`${R} min ago`:R<1440?`${Math.floor(R/60)} hour${Math.floor(R/60)>1?"s":""} ago`:`${Math.floor(R/1440)} day${Math.floor(R/1440)>1?"s":""} ago`},v=C=>{const k={ACTION_REQUIRED:{color:"bg-orange-100 text-orange-800",icon:Zn},SYSTEM:{color:"bg-blue-100 text-blue-800",icon:Eo},INFO:{color:"bg-blue-100 text-blue-800",icon:Eo},WARNING:{color:"bg-yellow-100 text-yellow-800",icon:Zn},EMERGENCY:{color:"bg-red-100 text-red-800",icon:Zn}};return k[C]||k.INFO},w=C=>{const k=h==null?void 0:h.find(O=>O.id===C);return k?k.user_full_name:`Parent ${C}`},N=C=>{const k=p==null?void 0:p.find(O=>O.id===C);return k?`${k.user_details.first_name} ${k.user_details.last_name}`:`Driver ${C}`};return l?r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ii,{className:"h-5 w-5 animate-spin text-primary"}),r.jsx("span",{className:"text-muted-foreground",children:"Loading school information..."})]})})})}):c?r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs(Hd,{variant:"destructive",className:"border-red-200 bg-red-50 dark:bg-red-950/20",children:[r.jsx(Zn,{className:"h-4 w-4"}),r.jsxs(Wd,{children:["Failed to load school information: ",c]})]})})}):y?r.jsx("div",{className:"min-h-screen bg-background",children:r.jsx("div",{className:"p-2",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:"Dashboard Overview"}),a&&r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Last updated: ",new Date(a).toLocaleString()]})]}),r.jsxs(fe,{onClick:g,disabled:s,variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-accent/50",children:[r.jsx(iv,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]})]}),n&&r.jsxs(Hd,{className:"mb-6 border-red-200 bg-red-50 dark:bg-red-950/20",variant:"destructive",children:[r.jsx(Zn,{className:"h-4 w-4"}),r.jsx(Wd,{children:n})]}),r.jsxs("div",{className:"grid gap-6",children:[d.showAnalytics&&r.jsx("div",{className:"mb-4",children:r.jsx(nY,{})}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsx(MY,{}),r.jsx($Y,{})]}),d.showRecentActivity&&r.jsx("div",{className:"mb-4",children:r.jsx(oY,{})}),d.showNotificationsPanel&&r.jsxs(Me,{className:"border-0 shadow-sm bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20",children:[r.jsx(Ke,{className:"pb-3",children:r.jsxs(Je,{className:"flex items-center gap-2 text-lg",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:r.jsx(Eo,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Recent Notifications",u&&u.length>0&&r.jsx(Te,{variant:"secondary",className:"ml-2",children:u.length})]})}),r.jsx(Ve,{className:"pt-0",children:!u||u.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Eo,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):r.jsx("div",{className:"space-y-3",children:u.slice(0,5).map(C=>{var R,E,I,D;const k=v(C.notification_type||"INFO"),O=k.icon;return r.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800/50 rounded-xl border shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${C.notification_type==="ACTION_REQUIRED"?"bg-orange-500":C.notification_type==="EMERGENCY"?"bg-red-500":C.notification_type==="WARNING"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs(Te,{className:`text-xs ${k.color}`,children:[r.jsx(O,{className:"w-3 h-3 mr-1"}),C.notification_type||"INFO"]}),C.is_read&&r.jsx(ur,{className:"w-3 h-3 text-green-500"})]}),r.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm truncate",children:C.message}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["School:"," ",C.school_name||"Unknown"]}),(((R=C.parents)==null?void 0:R.length)>0||((E=C.drivers)==null?void 0:E.length)>0)&&r.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[((I=C.parents)==null?void 0:I.length)>0&&r.jsxs("span",{className:"text-xs text-blue-600",children:["Parents:"," ",C.parents.map(w).join(", ")]}),((D=C.drivers)==null?void 0:D.length)>0&&r.jsxs("span",{className:"text-xs text-green-600",children:["Drivers:"," ",C.drivers.map(N).join(", ")]})]})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1 ml-3",children:[r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:C.created_at?j(C.created_at):"N/A"}),!C.is_read&&r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]})]},C.id)})})})]}),!d.showAnalytics&&!d.showRecentActivity&&!d.showNotificationsPanel&&r.jsx(Me,{className:"border-0 shadow-sm bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900/20 dark:to-gray-800/20",children:r.jsx(Ve,{className:"p-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"w-20 h-20 bg-muted rounded-2xl flex items-center justify-center shadow-inner",children:r.jsx("svg",{className:"w-10 h-10 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Dashboard is Empty"}),r.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"All dashboard sections are currently disabled. You can enable them in the Settings page under Personalization."})]})]})})})]})]})})}):r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs(Hd,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950/20",children:[r.jsx(Zn,{className:"h-4 w-4"}),r.jsxs(Wd,{children:["No school ID found. Please ensure you are associated with a school.",o.length===0&&" No schools available.",o.length>0&&i&&` Available schools: ${o.length}, User ID: ${i.id}`]})]})})})};function kC({isOpen:e,onClose:t,trip:s,mode:n}){var C;const a=ns(),{toast:i}=Zs(),{loading:o}=At(k=>k.trips),{routes:l}=At(k=>k.routes),{drivers:c}=At(k=>k.drivers),{vehicles:d}=At(k=>k.vehicles),{schools:u}=At(k=>k.schools),{user:h}=At(k=>k.auth),[p,f]=x.useState({route:"",driver:"",vehicle:"",trip_type:"morning",status:"scheduled",scheduled_start_time:"",scheduled_end_time:""}),y=(C=u.find(k=>k.admin===(h==null?void 0:h.id)))==null?void 0:C.id,g=l.filter(k=>k.school===y),j=c.filter(k=>k.school===y),v=d.filter(k=>k.school===y);x.useEffect(()=>{f(s&&n==="edit"?{route:s.route.toString(),driver:s.driver.toString(),vehicle:s.vehicle.toString(),trip_type:s.trip_type,status:s.status,scheduled_start_time:s.scheduled_start_time,scheduled_end_time:s.scheduled_end_time}:{route:"",driver:"",vehicle:"",trip_type:"morning",status:"scheduled",scheduled_start_time:"",scheduled_end_time:""})},[s,n,e]);const w=async k=>{if(k.preventDefault(),!y){i({title:"Error",description:"No school found for current user",variant:"destructive"});return}const O=new Date(p.scheduled_start_time);if(new Date(p.scheduled_end_time)<=O){i({title:"Validation Error",description:"Scheduled end time must be after start time",variant:"destructive"});return}const E={route:parseInt(p.route),driver:parseInt(p.driver),vehicle:parseInt(p.vehicle),trip_type:p.trip_type,status:p.status,scheduled_start_time:p.scheduled_start_time,scheduled_end_time:p.scheduled_end_time,school:y};console.log("Submitting trip data:",E);try{n==="create"?(await a(t0(E)).unwrap(),i({title:"Success",description:"Trip created successfully"})):s!=null&&s.id&&(await a(r0({id:s.id,tripData:E})).unwrap(),i({title:"Success",description:"Trip updated successfully"})),t()}catch(I){console.log("Trip creation error:",I);let D="Failed to save trip";I&&typeof I=="object"?I.errors&&I.errors.non_field_errors?D=I.errors.non_field_errors.join(", "):I.message&&(D=I.message):typeof I=="string"?D=I:I instanceof Error&&(D=I.message),i({title:"Error",description:D,variant:"destructive"})}},N=k=>{const{name:O,value:R}=k.target||k;f(E=>({...E,[O]:R}))};return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"sm:max-w-[500px]",children:[r.jsxs(Mr,{children:[r.jsx($r,{children:n==="create"?"Create New Trip":"Edit Trip"}),r.jsx(El,{children:n==="create"?"Create a new trip with route, driver, and vehicle assignments.":"Update trip details and assignments."})]}),r.jsxs("form",{onSubmit:w,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"route",children:"Route"}),r.jsxs(Jt,{value:p.route,onValueChange:k=>N({name:"route",value:k}),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select route"})}),r.jsx(Kt,{children:g.map(k=>r.jsx(Re,{value:k.id.toString(),children:k.name},k.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"driver",children:"Driver"}),r.jsxs(Jt,{value:p.driver,onValueChange:k=>N({name:"driver",value:k}),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select driver"})}),r.jsx(Kt,{children:j.map(k=>{var O,R,E,I;return r.jsxs(Re,{value:(O=k.user_details)==null?void 0:O.id.toString(),children:[(R=k.user_details)==null?void 0:R.first_name," ",(E=k.user_details)==null?void 0:E.last_name,(I=k.user_details)!=null&&I.phone_number?` - ${k.user_details.phone_number}`:""]},k.id)})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"vehicle",children:"Vehicle"}),r.jsxs(Jt,{value:p.vehicle,onValueChange:k=>N({name:"vehicle",value:k}),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select vehicle"})}),r.jsx(Kt,{children:v.map(k=>r.jsx(Re,{value:k.id.toString(),children:k.registration_number},k.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"trip_type",children:"Trip Type"}),r.jsxs(Jt,{value:p.trip_type,onValueChange:k=>N({name:"trip_type",value:k}),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select trip type"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"morning",children:"Morning"}),r.jsx(Re,{value:"afternoon",children:"Afternoon"}),r.jsx(Re,{value:"evening",children:"Evening"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"scheduled_start_time",children:"Start Time"}),r.jsx(Oe,{id:"scheduled_start_time",name:"scheduled_start_time",type:"datetime-local",value:p.scheduled_start_time,onChange:N,required:!0}),r.jsx("p",{className:"text-xs text-gray-500",children:"Select the trip start time"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"scheduled_end_time",children:"End Time"}),r.jsx(Oe,{id:"scheduled_end_time",name:"scheduled_end_time",type:"datetime-local",value:p.scheduled_end_time,onChange:N,required:!0}),r.jsx("p",{className:"text-xs text-gray-500",children:"Must be after start time"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"status",children:"Status"}),r.jsxs(Jt,{value:p.status,onValueChange:k=>N({name:"status",value:k}),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"scheduled",children:"Scheduled"}),r.jsx(Re,{value:"preparing",children:"Preparing"}),r.jsx(Re,{value:"ongoing",children:"Ongoing"}),r.jsx(Re,{value:"completed",children:"Completed"}),r.jsx(Re,{value:"cancelled",children:"Cancelled"}),r.jsx(Re,{value:"delayed",children:"Delayed"})]})]})]}),r.jsxs(Kp,{children:[r.jsx(fe,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),r.jsx(fe,{type:"submit",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx(ii,{className:"mr-2 h-4 w-4 animate-spin"}),n==="create"?"Creating...":"Updating..."]}):n==="create"?"Create Trip":"Update Trip"})]})]})]})})}var KL="AlertDialog",[zY,cre]=xa(KL,[hE]),Ll=hE(),YL=e=>{const{__scopeAlertDialog:t,...s}=e,n=Ll(t);return r.jsx(g5,{...n,...s,modal:!0})};YL.displayName=KL;var UY="AlertDialogTrigger",qY=x.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...n}=e,a=Ll(s);return r.jsx(AE,{...a,...n,ref:t})});qY.displayName=UY;var VY="AlertDialogPortal",JL=e=>{const{__scopeAlertDialog:t,...s}=e,n=Ll(t);return r.jsx(x5,{...n,...s})};JL.displayName=VY;var HY="AlertDialogOverlay",ZL=x.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...n}=e,a=Ll(s);return r.jsx(Ly,{...a,...n,ref:t})});ZL.displayName=HY;var Dh="AlertDialogContent",[WY,GY]=zY(Dh),KY=qP("AlertDialogContent"),XL=x.forwardRef((e,t)=>{const{__scopeAlertDialog:s,children:n,...a}=e,i=Ll(s),o=x.useRef(null),l=Nr(t,o),c=x.useRef(null);return r.jsx(lH,{contentName:Dh,titleName:QL,docsSlug:"alert-dialog",children:r.jsx(WY,{scope:s,cancelRef:c,children:r.jsxs(Ry,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:pt(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(KY,{children:n}),r.jsx(JY,{contentRef:o})]})})})});XL.displayName=Dh;var QL="AlertDialogTitle",eR=x.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...n}=e,a=Ll(s);return r.jsx(v5,{...a,...n,ref:t})});eR.displayName=QL;var tR="AlertDialogDescription",rR=x.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...n}=e,a=Ll(s);return r.jsx(y5,{...a,...n,ref:t})});rR.displayName=tR;var YY="AlertDialogAction",sR=x.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...n}=e,a=Ll(s);return r.jsx(b5,{...a,...n,ref:t})});sR.displayName=YY;var nR="AlertDialogCancel",aR=x.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...n}=e,{cancelRef:a}=GY(nR,s),i=Ll(s),o=Nr(t,a);return r.jsx(b5,{...i,...n,ref:o})});aR.displayName=nR;var JY=({contentRef:e})=>{const t=`\`${Dh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Dh}\` by passing a \`${tR}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Dh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ZY=YL,XY=JL,iR=ZL,oR=XL,lR=sR,cR=aR,dR=eR,uR=rR;const lu=ZY,QY=XY,hR=x.forwardRef(({className:e,...t},s)=>r.jsx(iR,{className:it("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));hR.displayName=iR.displayName;const zc=x.forwardRef(({className:e,...t},s)=>r.jsxs(QY,{children:[r.jsx(hR,{}),r.jsx(oR,{ref:s,className:it("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));zc.displayName=oR.displayName;const Uc=({className:e,...t})=>r.jsx("div",{className:it("flex flex-col space-y-2 text-center sm:text-left",e),...t});Uc.displayName="AlertDialogHeader";const qc=({className:e,...t})=>r.jsx("div",{className:it("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qc.displayName="AlertDialogFooter";const Vc=x.forwardRef(({className:e,...t},s)=>r.jsx(dR,{ref:s,className:it("text-lg font-semibold",e),...t}));Vc.displayName=dR.displayName;const Hc=x.forwardRef(({className:e,...t},s)=>r.jsx(uR,{ref:s,className:it("text-sm text-muted-foreground",e),...t}));Hc.displayName=uR.displayName;const Wc=x.forwardRef(({className:e,...t},s)=>r.jsx(lR,{ref:s,className:it(d5(),e),...t}));Wc.displayName=lR.displayName;const Gc=x.forwardRef(({className:e,...t},s)=>r.jsx(cR,{ref:s,className:it(d5({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Gc.displayName=cR.displayName;const ju=({data:e,className:t="",variant:s="outline",size:n="default"})=>{const[a,i]=x.useState(!1),o=()=>{try{console.log(" Starting CSV export with data:",e);const d=[e.headers.join(","),...e.data.map((f,y)=>{const g=e.headers.map(j=>{const v=f[j.toLowerCase().replace(/\s+/g,"_")]||f[j]||"";return`"${String(v).replace(/"/g,'""')}"`}).join(",");return y<3&&console.log(` CSV Row ${y+1}:`,g),g})].join(`
`),u=new Blob([d],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a"),p=URL.createObjectURL(u);h.setAttribute("href",p),h.setAttribute("download",`${e.fileName}_${new Date().toISOString().split("T")[0]}.csv`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),Ur({title:"Export Successful",description:"Data exported to Excel (CSV) successfully"})}catch(d){console.error("Export error:",d),Ur({title:"Export Failed",description:"Failed to export data",variant:"destructive"})}},l=()=>{try{console.log(" Starting PDF export with data:",e);const d=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>${e.title||"Report"}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; font-weight: bold; }
            h1 { color: #333; }
            .header { margin-bottom: 20px; }
            .date { color: #666; font-size: 14px; }
            .summary { margin: 20px 0; padding: 10px; background-color: #f9f9f9; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${e.title||"Report"}</h1>
            <div class="date">Generated on: ${new Date().toLocaleDateString()}</div>
          </div>
          
          <div class="summary">
            <h3>Summary</h3>
            <p>Total Records: ${e.data.length}</p>
            <p>Generated: ${new Date().toLocaleString()}</p>
          </div>
          
          <table>
            <thead>
              <tr>
                ${e.headers.map(f=>`<th>${f}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${e.data.map((f,y)=>(y<3&&console.log(` PDF Row ${y+1}:`,f),`
                <tr>
                  ${e.headers.map(g=>{const j=f[g.toLowerCase().replace(/\s+/g,"_")]||f[g]||"";return`<td>${String(j)}</td>`}).join("")}
                </tr>
              `)).join("")}
            </tbody>
          </table>
        </body>
        </html>
      `,u=new Blob([d],{type:"text/html;charset=utf-8;"}),h=document.createElement("a"),p=URL.createObjectURL(u);h.setAttribute("href",p),h.setAttribute("download",`${e.fileName}_${new Date().toISOString().split("T")[0]}.html`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),Ur({title:"Export Successful",description:"Report exported to HTML (can be opened in browser and saved as PDF)"})}catch(d){console.error("Export error:",d),Ur({title:"Export Failed",description:"Failed to export report",variant:"destructive"})}},c=()=>{try{console.log(" Starting Word export with data:",e);const d=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>${e.title||"Report"}</title>
          <style>
            body { font-family: 'Times New Roman', serif; margin: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 8px; text-align: left; }
            th { background-color: #f0f0f0; font-weight: bold; }
            h1 { color: #000; text-align: center; }
            .header { margin-bottom: 20px; text-align: center; }
            .date { color: #666; font-size: 14px; text-align: center; }
            .summary { margin: 20px 0; padding: 10px; background-color: #f9f9f9; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${e.title||"Report"}</h1>
            <div class="date">Generated on: ${new Date().toLocaleDateString()}</div>
          </div>
          
          <div class="summary">
            <h3>Summary</h3>
            <p>Total Records: ${e.data.length}</p>
            <p>Generated: ${new Date().toLocaleString()}</p>
          </div>

          <table>
            <thead>
              <tr>
                ${e.headers.map(f=>`<th>${f}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${e.data.map((f,y)=>(y<3&&console.log(` Word Row ${y+1}:`,f),`
                <tr>
                  ${e.headers.map(g=>{const j=f[g.toLowerCase().replace(/\s+/g,"_")]||f[g]||"";return`<td>${String(j)}</td>`}).join("")}
                </tr>
              `)).join("")}
            </tbody>
          </table>
        </body>
        </html>
      `,u=new Blob([d],{type:"application/msword;charset=utf-8;"}),h=document.createElement("a"),p=URL.createObjectURL(u);h.setAttribute("href",p),h.setAttribute("download",`${e.fileName}_${new Date().toISOString().split("T")[0]}.doc`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),Ur({title:"Export Successful",description:"Report exported to Word document successfully"})}catch(d){console.error("Export error:",d),Ur({title:"Export Failed",description:"Failed to export report",variant:"destructive"})}};return r.jsxs(On,{open:a,onOpenChange:i,children:[r.jsx(Mn,{asChild:!0,children:r.jsxs(fe,{variant:s,size:n,className:t,children:[r.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Export",r.jsx(_y,{className:"ml-2 h-4 w-4"})]})}),r.jsxs(wn,{align:"end",className:"w-48",children:[r.jsxs(Wt,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{o(),i(!1)},children:[r.jsx(DP,{className:"h-4 w-4"}),"Export to Excel"]}),r.jsxs(Wt,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{l(),i(!1)},children:[r.jsx(ra,{className:"h-4 w-4"}),"Export to PDF"]}),r.jsxs(Wt,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{c(),i(!1)},children:[r.jsx(Vj,{className:"h-4 w-4"}),"Export to Word"]})]})]})};function eJ(){var F;const e=ns(),{toast:t}=Zs(),{trips:s,loading:n,error:a}=At(M=>M.trips),{user:i}=At(M=>M.auth),{schools:o}=At(M=>M.schools),[l,c]=x.useState(!1),[d,u]=x.useState(null),[h,p]=x.useState(!1),[f,y]=x.useState(!1),[g,j]=x.useState(""),[v,w]=x.useState("all"),[N,C]=x.useState("all"),[k,O]=x.useState(1),[R]=x.useState(10),E=(F=o.find(M=>M.admin===(i==null?void 0:i.id)))==null?void 0:F.id,I=s;x.useEffect(()=>{console.log("Trips data:",s),console.log("Filtered trips:",I),console.log("School ID:",E)},[s,I,E]),x.useEffect(()=>{(async()=>{try{E&&await e(Vd({schoolId:E})).unwrap(),await e(Co()),await e(Ln()),await e(Sh())}catch(G){console.error("Failed to load data:",G)}})()},[e,E]);const D=I.filter(M=>{var me,ue,ce;const G=((me=M.route_name)==null?void 0:me.toLowerCase().includes(g.toLowerCase()))||((ue=M.driver_name)==null?void 0:ue.toLowerCase().includes(g.toLowerCase()))||((ce=M.vehicle_registration)==null?void 0:ce.toLowerCase().includes(g.toLowerCase()))||M.trip_type.toLowerCase().includes(g.toLowerCase()),ee=v==="all"||M.status===v,te=N==="all"||M.trip_type===N;return G&&ee&&te}),P=Math.ceil(D.length/R),A=(k-1)*R,$=A+R,U=D.slice(A,$);x.useEffect(()=>{O(1)},[g,v,N]);const de=()=>{u(null),c(!0)},se=M=>{u(M),p(!0)},ge=M=>{u(M),y(!0)},V=async()=>{try{if(!d){t({title:"Error",description:"No trip selected for deletion",variant:"destructive"});return}await e(s0(d.id)).unwrap(),t({title:"Success",description:"Trip deleted successfully"}),y(!1),u(null)}catch(M){console.error("Delete trip error:",M);let G="Failed to delete trip";M instanceof Error?G=M.message:typeof M=="string"&&(G=M),t({title:"Error",description:G,variant:"destructive"})}},K=M=>{switch(M.toLowerCase()){case"scheduled":return"bg-blue-100 text-blue-800";case"preparing":return"bg-yellow-100 text-yellow-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"delayed":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},J=M=>{switch(M.toLowerCase()){case"morning":return"bg-orange-100 text-orange-800";case"afternoon":return"bg-purple-100 text-purple-800";case"evening":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}},ie=M=>{try{return new Date(M).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return M}},T=[{label:"Total Trips",value:I.length,icon:ai},{label:"Scheduled",value:I.filter(M=>M.status==="scheduled").length,icon:bn},{label:"Ongoing",value:I.filter(M=>M.status==="ongoing").length,icon:Ks},{label:"Completed",value:I.filter(M=>M.status==="completed").length,icon:Qi}];return n?r.jsx("div",{className:"h-full w-full bg-gray-100 p-8",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"}),r.jsx("span",{children:"Loading trips..."})]})})})}):a?r.jsx("div",{className:"h-full w-full bg-gray-100 p-8",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsx(Hd,{variant:"destructive",children:r.jsxs(Wd,{children:["Failed to load trips: ",a]})})})}):r.jsxs("div",{className:"h-full w-full bg-gray-100 p-4",children:[r.jsxs("div",{className:"max-w-7xl mx-auto space-y-2",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Trips"}),r.jsx("p",{className:"text-gray-600",children:"Manage and monitor school bus trips"})]}),r.jsxs(fe,{onClick:de,className:"flex items-center gap-2",children:[r.jsx(Fa,{className:"h-4 w-4"}),"Create Trip"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:T.map(M=>r.jsx(Me,{children:r.jsx(Ve,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:M.label}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.value})]}),r.jsx(M.icon,{className:"h-8 w-8 text-green-500"})]})})},M.label))}),r.jsx(Me,{children:r.jsx(Ve,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(Oe,{placeholder:"Search trips...",value:g,onChange:M=>j(M.target.value),className:"pl-10"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:v,onChange:M=>w(M.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"scheduled",children:"Scheduled"}),r.jsx("option",{value:"preparing",children:"Preparing"}),r.jsx("option",{value:"ongoing",children:"Ongoing"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"delayed",children:"Delayed"})]}),r.jsxs("select",{value:N,onChange:M=>C(M.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"morning",children:"Morning"}),r.jsx("option",{value:"afternoon",children:"Afternoon"}),r.jsx("option",{value:"evening",children:"Evening"})]}),r.jsx(ju,{data:{headers:["Route","Driver","Vehicle","Trip Type","Start Time","End Time","Status","Students Count","Distance","Duration"],data:D.map(M=>{var G,ee,te,me;return{route:M.route_name||`Route ${M.route}`,driver:M.driver_name||`Driver ${M.driver}`,vehicle:M.vehicle_registration||`Vehicle ${M.vehicle}`,trip_type:M.trip_type,start_time:ie(M.scheduled_start_time),end_time:M.scheduled_end_time?ie(M.scheduled_end_time):"",status:M.status.replace("_"," "),students_count:((ee=(G=M.students)==null?void 0:G.length)==null?void 0:ee.toString())||"0",distance:((te=M.distance)==null?void 0:te.toString())||"",duration:((me=M.duration)==null?void 0:me.toString())||""}}),fileName:"trips_export",title:"Trips Report"},className:"border-gray-200 hover:bg-gray-50 px-3 py-2"})]})]})})}),r.jsx(Me,{children:r.jsxs(Ve,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"Route"}),r.jsx(ut,{children:"Driver"}),r.jsx(ut,{children:"Vehicle"}),r.jsx(ut,{children:"Trip Type"}),r.jsx(ut,{children:"Start Time"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Actions"})]})}),r.jsx(ja,{children:U.length===0?r.jsx(Kr,{children:r.jsx(ct,{colSpan:7,className:"text-center py-8",children:r.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[r.jsx(Ec,{className:"h-8 w-8 text-gray-400"}),r.jsx("p",{className:"text-gray-500",children:"No trips found"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Create your first trip to get started"})]})})}):U.map(M=>r.jsxs(Kr,{children:[r.jsx(ct,{className:"font-medium",children:M.route_name||`Route ${M.route}`}),r.jsx(ct,{children:M.driver_name||`Driver ${M.driver}`}),r.jsx(ct,{children:M.vehicle_registration||`Vehicle ${M.vehicle}`}),r.jsx(ct,{children:r.jsx(Te,{className:J(M.trip_type),children:M.trip_type})}),r.jsx(ct,{children:ie(M.scheduled_start_time)}),r.jsx(ct,{children:r.jsx(Te,{className:K(M.status),children:M.status.replace("_"," ")})}),r.jsx(ct,{children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(nv,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsxs(Wt,{onClick:()=>se(M),children:[r.jsx(na,{className:"h-4 w-4 mr-2"}),"Edit"]}),r.jsxs(Wt,{onClick:()=>ge(M),className:"text-red-600",children:[r.jsx(Da,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},M.id))})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",A+1,"-",Math.min($,D.length)," of"," ",D.length," trips"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>O(Math.max(1,k-1)),disabled:k===1,children:"Previous"}),r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>O(Math.min(P,k+1)),disabled:k===P,children:"Next"})]})]})]})})]}),r.jsx(kC,{isOpen:l,onClose:()=>c(!1),mode:"create"}),r.jsx(kC,{isOpen:h,onClose:()=>p(!1),trip:d,mode:"edit"}),r.jsx(lu,{open:f,onOpenChange:y,children:r.jsxs(zc,{children:[r.jsxs(Uc,{children:[r.jsx(Vc,{children:"Are you sure?"}),r.jsxs(Hc,{children:["This action cannot be undone. This will permanently delete the trip",d&&` for route "${d.route_name||`Route ${d.route}`}"`,"."]})]}),r.jsxs(qc,{children:[r.jsx(Gc,{children:"Cancel"}),r.jsx(Wc,{onClick:V,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}var eg=e=>e.type==="checkbox",Ld=e=>e instanceof Date,da=e=>e==null;const fR=e=>typeof e=="object";var Ys=e=>!da(e)&&!Array.isArray(e)&&fR(e)&&!Ld(e),mR=e=>Ys(e)&&e.target?eg(e.target)?e.target.checked:e.target.value:e,tJ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,pR=(e,t)=>e.has(tJ(t)),rJ=e=>{const t=e.constructor&&e.constructor.prototype;return Ys(t)&&t.hasOwnProperty("isPrototypeOf")},U5=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function An(e){let t;const s=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(U5&&(e instanceof Blob||n))&&(s||Ys(e)))if(t=s?[]:{},!s&&!rJ(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=An(e[a]));else return e;return t}var Xy=e=>/^\w*$/.test(e),zs=e=>e===void 0,q5=e=>Array.isArray(e)?e.filter(Boolean):[],V5=e=>q5(e.replace(/["|']|\]/g,"").split(/\.|\[/)),St=(e,t,s)=>{if(!t||!Ys(e))return s;const n=(Xy(t)?[t]:V5(t)).reduce((a,i)=>da(a)?a:a[i],e);return zs(n)||n===e?zs(e[t])?s:e[t]:n},Ja=e=>typeof e=="boolean",Yr=(e,t,s)=>{let n=-1;const a=Xy(t)?[t]:V5(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=s;if(n!==o){const d=e[l];c=Ys(d)||Array.isArray(d)?d:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const pv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ki={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ol={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},H5=gr.createContext(null);H5.displayName="HookFormContext";const Qy=()=>gr.useContext(H5),sJ=e=>{const{children:t,...s}=e;return gr.createElement(H5.Provider,{value:s},t)};var gR=(e,t,s,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Ki.all&&(t._proxyFormState[o]=!n||Ki.all),s&&(s[o]=!0),e[o]}});return a};const W5=typeof window<"u"?x.useLayoutEffect:x.useEffect;function nJ(e){const t=Qy(),{control:s=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=gr.useState(s._formState),c=gr.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return W5(()=>s._subscribe({name:a,formState:c.current,exact:i,callback:d=>{!n&&l({...s._formState,...d})}}),[a,n,i]),gr.useEffect(()=>{c.current.isValid&&s._setValid(!0)},[s]),gr.useMemo(()=>gR(o,s,c.current,!1),[o,s])}var Ro=e=>typeof e=="string",xR=(e,t,s,n,a)=>Ro(e)?(n&&t.watch.add(e),St(s,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),St(s,i))):(n&&(t.watchAll=!0),s);function aJ(e){const t=Qy(),{control:s=t.control,name:n,defaultValue:a,disabled:i,exact:o}=e||{},l=gr.useRef(a),[c,d]=gr.useState(s._getWatch(n,l.current));return W5(()=>s._subscribe({name:n,formState:{values:!0},exact:o,callback:u=>!i&&d(xR(n,s._names,u.values||s._formValues,!1,l.current))}),[n,s,i,o]),gr.useEffect(()=>s._removeUnmounted()),c}function iJ(e){const t=Qy(),{name:s,disabled:n,control:a=t.control,shouldUnregister:i}=e,o=pR(a._names.array,s),l=aJ({control:a,name:s,defaultValue:St(a._formValues,s,St(a._defaultValues,s,e.defaultValue)),exact:!0}),c=nJ({control:a,name:s,exact:!0}),d=gr.useRef(e),u=gr.useRef(a.register(s,{...e.rules,value:l,...Ja(e.disabled)?{disabled:e.disabled}:{}})),h=gr.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!St(c.errors,s)},isDirty:{enumerable:!0,get:()=>!!St(c.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!St(c.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!St(c.validatingFields,s)},error:{enumerable:!0,get:()=>St(c.errors,s)}}),[c,s]),p=gr.useCallback(j=>u.current.onChange({target:{value:mR(j),name:s},type:pv.CHANGE}),[s]),f=gr.useCallback(()=>u.current.onBlur({target:{value:St(a._formValues,s),name:s},type:pv.BLUR}),[s,a._formValues]),y=gr.useCallback(j=>{const v=St(a._fields,s);v&&j&&(v._f.ref={focus:()=>j.focus&&j.focus(),select:()=>j.select&&j.select(),setCustomValidity:w=>j.setCustomValidity(w),reportValidity:()=>j.reportValidity()})},[a._fields,s]),g=gr.useMemo(()=>({name:s,value:l,...Ja(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:p,onBlur:f,ref:y}),[s,n,c.disabled,p,f,y,l]);return gr.useEffect(()=>{const j=a._options.shouldUnregister||i;a.register(s,{...d.current.rules,...Ja(d.current.disabled)?{disabled:d.current.disabled}:{}});const v=(w,N)=>{const C=St(a._fields,w);C&&C._f&&(C._f.mount=N)};if(v(s,!0),j){const w=An(St(a._options.defaultValues,s));Yr(a._defaultValues,s,w),zs(St(a._formValues,s))&&Yr(a._formValues,s,w)}return!o&&a.register(s),()=>{(o?j&&!a._state.action:j)?a.unregister(s):v(s,!1)}},[s,a,o,i]),gr.useEffect(()=>{a._setDisabledField({disabled:n,name:s})},[n,s,a]),gr.useMemo(()=>({field:g,formState:c,fieldState:h}),[g,c,h])}const oJ=e=>e.render(iJ(e));var vR=(e,t,s,n,a)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[n]:a||!0}}:{},Qm=e=>Array.isArray(e)?e:[e],AC=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},lw=e=>da(e)||!fR(e);function ic(e,t){if(lw(e)||lw(t))return e===t;if(Ld(e)&&Ld(t))return e.getTime()===t.getTime();const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(const a of s){const i=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const o=t[a];if(Ld(i)&&Ld(o)||Ys(i)&&Ys(o)||Array.isArray(i)&&Array.isArray(o)?!ic(i,o):i!==o)return!1}}return!0}var ka=e=>Ys(e)&&!Object.keys(e).length,G5=e=>e.type==="file",Yi=e=>typeof e=="function",gv=e=>{if(!U5)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},yR=e=>e.type==="select-multiple",K5=e=>e.type==="radio",lJ=e=>K5(e)||eg(e),u2=e=>gv(e)&&e.isConnected;function cJ(e,t){const s=t.slice(0,-1).length;let n=0;for(;n<s;)e=zs(e)?n++:e[t[n++]];return e}function dJ(e){for(const t in e)if(e.hasOwnProperty(t)&&!zs(e[t]))return!1;return!0}function on(e,t){const s=Array.isArray(t)?t:Xy(t)?[t]:V5(t),n=s.length===1?e:cJ(e,s),a=s.length-1,i=s[a];return n&&delete n[i],a!==0&&(Ys(n)&&ka(n)||Array.isArray(n)&&dJ(n))&&on(e,s.slice(0,-1)),e}var bR=e=>{for(const t in e)if(Yi(e[t]))return!0;return!1};function xv(e,t={}){const s=Array.isArray(e);if(Ys(e)||s)for(const n in e)Array.isArray(e[n])||Ys(e[n])&&!bR(e[n])?(t[n]=Array.isArray(e[n])?[]:{},xv(e[n],t[n])):da(e[n])||(t[n]=!0);return t}function jR(e,t,s){const n=Array.isArray(e);if(Ys(e)||n)for(const a in e)Array.isArray(e[a])||Ys(e[a])&&!bR(e[a])?zs(t)||lw(s[a])?s[a]=Array.isArray(e[a])?xv(e[a],[]):{...xv(e[a])}:jR(e[a],da(t)?{}:t[a],s[a]):s[a]=!ic(e[a],t[a]);return s}var jm=(e,t)=>jR(e,t,xv(t));const PC={value:!1,isValid:!1},EC={value:!0,isValid:!0};var wR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!zs(e[0].attributes.value)?zs(e[0].value)||e[0].value===""?EC:{value:e[0].value,isValid:!0}:EC:PC}return PC},NR=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:n})=>zs(e)?e:t?e===""?NaN:e&&+e:s&&Ro(e)?new Date(e):n?n(e):e;const LC={isValid:!1,value:null};var SR=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,LC):LC;function RC(e){const t=e.ref;return G5(t)?t.files:K5(t)?SR(e.refs).value:yR(t)?[...t.selectedOptions].map(({value:s})=>s):eg(t)?wR(e.refs).value:NR(zs(t.value)?e.ref.value:t.value,e)}var uJ=(e,t,s,n)=>{const a={};for(const i of e){const o=St(t,i);o&&Yr(a,i,o._f)}return{criteriaMode:s,names:[...e],fields:a,shouldUseNativeValidation:n}},vv=e=>e instanceof RegExp,wm=e=>zs(e)?e:vv(e)?e.source:Ys(e)?vv(e.value)?e.value.source:e.value:e,TC=e=>({isOnSubmit:!e||e===Ki.onSubmit,isOnBlur:e===Ki.onBlur,isOnChange:e===Ki.onChange,isOnAll:e===Ki.all,isOnTouch:e===Ki.onTouched});const IC="AsyncFunction";var hJ=e=>!!e&&!!e.validate&&!!(Yi(e.validate)&&e.validate.constructor.name===IC||Ys(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===IC)),fJ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),FC=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const ep=(e,t,s,n)=>{for(const a of s||Object.keys(e)){const i=St(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(ep(l,t))break}else if(Ys(l)&&ep(l,t))break}}};function DC(e,t,s){const n=St(e,s);if(n||Xy(s))return{error:n,name:s};const a=s.split(".");for(;a.length;){const i=a.join("."),o=St(t,i),l=St(e,i);if(o&&!Array.isArray(o)&&s!==i)return{name:s};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:s}}var mJ=(e,t,s,n)=>{s(e);const{name:a,...i}=e;return ka(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||Ki.all))},pJ=(e,t,s)=>!e||!t||e===t||Qm(e).some(n=>n&&(s?n===t:n.startsWith(t)||t.startsWith(n))),gJ=(e,t,s,n,a)=>a.isOnAll?!1:!s&&a.isOnTouch?!(t||e):(s?n.isOnBlur:a.isOnBlur)?!e:(s?n.isOnChange:a.isOnChange)?e:!0,xJ=(e,t)=>!q5(St(e,t)).length&&on(e,t),vJ=(e,t,s)=>{const n=Qm(St(e,s));return Yr(n,"root",t[s]),Yr(e,s,n),e},j0=e=>Ro(e);function OC(e,t,s="validate"){if(j0(e)||Array.isArray(e)&&e.every(j0)||Ja(e)&&!e)return{type:s,message:j0(e)?e:"",ref:t}}var Yu=e=>Ys(e)&&!vv(e)?e:{value:e,message:""},MC=async(e,t,s,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:h,max:p,pattern:f,validate:y,name:g,valueAsNumber:j,mount:v}=e._f,w=St(s,g);if(!v||t.has(g))return{};const N=l?l[0]:o,C=A=>{a&&N.reportValidity&&(N.setCustomValidity(Ja(A)?"":A||""),N.reportValidity())},k={},O=K5(o),R=eg(o),E=O||R,I=(j||G5(o))&&zs(o.value)&&zs(w)||gv(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,D=vR.bind(null,g,n,k),P=(A,$,U,de=ol.maxLength,se=ol.minLength)=>{const ge=A?$:U;k[g]={type:A?de:se,message:ge,ref:o,...D(A?de:se,ge)}};if(i?!Array.isArray(w)||!w.length:c&&(!E&&(I||da(w))||Ja(w)&&!w||R&&!wR(l).isValid||O&&!SR(l).isValid)){const{value:A,message:$}=j0(c)?{value:!!c,message:c}:Yu(c);if(A&&(k[g]={type:ol.required,message:$,ref:N,...D(ol.required,$)},!n))return C($),k}if(!I&&(!da(h)||!da(p))){let A,$;const U=Yu(p),de=Yu(h);if(!da(w)&&!isNaN(w)){const se=o.valueAsNumber||w&&+w;da(U.value)||(A=se>U.value),da(de.value)||($=se<de.value)}else{const se=o.valueAsDate||new Date(w),ge=J=>new Date(new Date().toDateString()+" "+J),V=o.type=="time",K=o.type=="week";Ro(U.value)&&w&&(A=V?ge(w)>ge(U.value):K?w>U.value:se>new Date(U.value)),Ro(de.value)&&w&&($=V?ge(w)<ge(de.value):K?w<de.value:se<new Date(de.value))}if((A||$)&&(P(!!A,U.message,de.message,ol.max,ol.min),!n))return C(k[g].message),k}if((d||u)&&!I&&(Ro(w)||i&&Array.isArray(w))){const A=Yu(d),$=Yu(u),U=!da(A.value)&&w.length>+A.value,de=!da($.value)&&w.length<+$.value;if((U||de)&&(P(U,A.message,$.message),!n))return C(k[g].message),k}if(f&&!I&&Ro(w)){const{value:A,message:$}=Yu(f);if(vv(A)&&!w.match(A)&&(k[g]={type:ol.pattern,message:$,ref:o,...D(ol.pattern,$)},!n))return C($),k}if(y){if(Yi(y)){const A=await y(w,s),$=OC(A,N);if($&&(k[g]={...$,...D(ol.validate,$.message)},!n))return C($.message),k}else if(Ys(y)){let A={};for(const $ in y){if(!ka(A)&&!n)break;const U=OC(await y[$](w,s),N,$);U&&(A={...U,...D($,U.message)},C(U.message),n&&(k[g]=A))}if(!ka(A)&&(k[g]={ref:N,...A},!n))return k}}return C(!0),k};const yJ={mode:Ki.onSubmit,reValidateMode:Ki.onChange,shouldFocusError:!0};function bJ(e={}){let t={...yJ,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Yi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let a=Ys(t.defaultValues)||Ys(t.values)?An(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:An(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const p={array:AC(),state:AC()},f=t.criteriaMode===Ki.all,y=Q=>he=>{clearTimeout(d),d=setTimeout(Q,he)},g=async Q=>{if(!t.disabled&&(u.isValid||h.isValid||Q)){const he=t.resolver?ka((await R()).errors):await I(n,!0);he!==s.isValid&&p.state.next({isValid:he})}},j=(Q,he)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((Q||Array.from(l.mount)).forEach(xe=>{xe&&(he?Yr(s.validatingFields,xe,he):on(s.validatingFields,xe))}),p.state.next({validatingFields:s.validatingFields,isValidating:!ka(s.validatingFields)}))},v=(Q,he=[],xe,De,Be=!0,Fe=!0)=>{if(De&&xe&&!t.disabled){if(o.action=!0,Fe&&Array.isArray(St(n,Q))){const st=xe(St(n,Q),De.argA,De.argB);Be&&Yr(n,Q,st)}if(Fe&&Array.isArray(St(s.errors,Q))){const st=xe(St(s.errors,Q),De.argA,De.argB);Be&&Yr(s.errors,Q,st),xJ(s.errors,Q)}if((u.touchedFields||h.touchedFields)&&Fe&&Array.isArray(St(s.touchedFields,Q))){const st=xe(St(s.touchedFields,Q),De.argA,De.argB);Be&&Yr(s.touchedFields,Q,st)}(u.dirtyFields||h.dirtyFields)&&(s.dirtyFields=jm(a,i)),p.state.next({name:Q,isDirty:P(Q,he),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Yr(i,Q,he)},w=(Q,he)=>{Yr(s.errors,Q,he),p.state.next({errors:s.errors})},N=Q=>{s.errors=Q,p.state.next({errors:s.errors,isValid:!1})},C=(Q,he,xe,De)=>{const Be=St(n,Q);if(Be){const Fe=St(i,Q,zs(xe)?St(a,Q):xe);zs(Fe)||De&&De.defaultChecked||he?Yr(i,Q,he?Fe:RC(Be._f)):U(Q,Fe),o.mount&&g()}},k=(Q,he,xe,De,Be)=>{let Fe=!1,st=!1;const _t={name:Q};if(!t.disabled){if(!xe||De){(u.isDirty||h.isDirty)&&(st=s.isDirty,s.isDirty=_t.isDirty=P(),Fe=st!==_t.isDirty);const pe=ic(St(a,Q),he);st=!!St(s.dirtyFields,Q),pe?on(s.dirtyFields,Q):Yr(s.dirtyFields,Q,!0),_t.dirtyFields=s.dirtyFields,Fe=Fe||(u.dirtyFields||h.dirtyFields)&&st!==!pe}if(xe){const pe=St(s.touchedFields,Q);pe||(Yr(s.touchedFields,Q,xe),_t.touchedFields=s.touchedFields,Fe=Fe||(u.touchedFields||h.touchedFields)&&pe!==xe)}Fe&&Be&&p.state.next(_t)}return Fe?_t:{}},O=(Q,he,xe,De)=>{const Be=St(s.errors,Q),Fe=(u.isValid||h.isValid)&&Ja(he)&&s.isValid!==he;if(t.delayError&&xe?(c=y(()=>w(Q,xe)),c(t.delayError)):(clearTimeout(d),c=null,xe?Yr(s.errors,Q,xe):on(s.errors,Q)),(xe?!ic(Be,xe):Be)||!ka(De)||Fe){const st={...De,...Fe&&Ja(he)?{isValid:he}:{},errors:s.errors,name:Q};s={...s,...st},p.state.next(st)}},R=async Q=>{j(Q,!0);const he=await t.resolver(i,t.context,uJ(Q||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return j(Q),he},E=async Q=>{const{errors:he}=await R(Q);if(Q)for(const xe of Q){const De=St(he,xe);De?Yr(s.errors,xe,De):on(s.errors,xe)}else s.errors=he;return he},I=async(Q,he,xe={valid:!0})=>{for(const De in Q){const Be=Q[De];if(Be){const{_f:Fe,...st}=Be;if(Fe){const _t=l.array.has(Fe.name),pe=Be._f&&hJ(Be._f);pe&&u.validatingFields&&j([De],!0);const X=await MC(Be,l.disabled,i,f,t.shouldUseNativeValidation&&!he,_t);if(pe&&u.validatingFields&&j([De]),X[Fe.name]&&(xe.valid=!1,he))break;!he&&(St(X,Fe.name)?_t?vJ(s.errors,X,Fe.name):Yr(s.errors,Fe.name,X[Fe.name]):on(s.errors,Fe.name))}!ka(st)&&await I(st,he,xe)}}return xe.valid},D=()=>{for(const Q of l.unMount){const he=St(n,Q);he&&(he._f.refs?he._f.refs.every(xe=>!u2(xe)):!u2(he._f.ref))&&te(Q)}l.unMount=new Set},P=(Q,he)=>!t.disabled&&(Q&&he&&Yr(i,Q,he),!ic(J(),a)),A=(Q,he,xe)=>xR(Q,l,{...o.mount?i:zs(he)?a:Ro(Q)?{[Q]:he}:he},xe,he),$=Q=>q5(St(o.mount?i:a,Q,t.shouldUnregister?St(a,Q,[]):[])),U=(Q,he,xe={})=>{const De=St(n,Q);let Be=he;if(De){const Fe=De._f;Fe&&(!Fe.disabled&&Yr(i,Q,NR(he,Fe)),Be=gv(Fe.ref)&&da(he)?"":he,yR(Fe.ref)?[...Fe.ref.options].forEach(st=>st.selected=Be.includes(st.value)):Fe.refs?eg(Fe.ref)?Fe.refs.forEach(st=>{(!st.defaultChecked||!st.disabled)&&(Array.isArray(Be)?st.checked=!!Be.find(_t=>_t===st.value):st.checked=Be===st.value||!!Be)}):Fe.refs.forEach(st=>st.checked=st.value===Be):G5(Fe.ref)?Fe.ref.value="":(Fe.ref.value=Be,Fe.ref.type||p.state.next({name:Q,values:An(i)})))}(xe.shouldDirty||xe.shouldTouch)&&k(Q,Be,xe.shouldTouch,xe.shouldDirty,!0),xe.shouldValidate&&K(Q)},de=(Q,he,xe)=>{for(const De in he){if(!he.hasOwnProperty(De))return;const Be=he[De],Fe=Q+"."+De,st=St(n,Fe);(l.array.has(Q)||Ys(Be)||st&&!st._f)&&!Ld(Be)?de(Fe,Be,xe):U(Fe,Be,xe)}},se=(Q,he,xe={})=>{const De=St(n,Q),Be=l.array.has(Q),Fe=An(he);Yr(i,Q,Fe),Be?(p.array.next({name:Q,values:An(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&xe.shouldDirty&&p.state.next({name:Q,dirtyFields:jm(a,i),isDirty:P(Q,Fe)})):De&&!De._f&&!da(Fe)?de(Q,Fe,xe):U(Q,Fe,xe),FC(Q,l)&&p.state.next({...s}),p.state.next({name:o.mount?Q:void 0,values:An(i)})},ge=async Q=>{o.mount=!0;const he=Q.target;let xe=he.name,De=!0;const Be=St(n,xe),Fe=pe=>{De=Number.isNaN(pe)||Ld(pe)&&isNaN(pe.getTime())||ic(pe,St(i,xe,pe))},st=TC(t.mode),_t=TC(t.reValidateMode);if(Be){let pe,X;const ae=he.type?RC(Be._f):mR(Q),ve=Q.type===pv.BLUR||Q.type===pv.FOCUS_OUT,Ie=!fJ(Be._f)&&!t.resolver&&!St(s.errors,xe)&&!Be._f.deps||gJ(ve,St(s.touchedFields,xe),s.isSubmitted,_t,st),ze=FC(xe,l,ve);Yr(i,xe,ae),ve?(Be._f.onBlur&&Be._f.onBlur(Q),c&&c(0)):Be._f.onChange&&Be._f.onChange(Q);const nt=k(xe,ae,ve),Ze=!ka(nt)||ze;if(!ve&&p.state.next({name:xe,type:Q.type,values:An(i)}),Ie)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?ve&&g():ve||g()),Ze&&p.state.next({name:xe,...ze?{}:nt});if(!ve&&ze&&p.state.next({...s}),t.resolver){const{errors:ft}=await R([xe]);if(Fe(ae),De){const $t=DC(s.errors,n,xe),It=DC(ft,n,$t.name||xe);pe=It.error,xe=It.name,X=ka(ft)}}else j([xe],!0),pe=(await MC(Be,l.disabled,i,f,t.shouldUseNativeValidation))[xe],j([xe]),Fe(ae),De&&(pe?X=!1:(u.isValid||h.isValid)&&(X=await I(n,!0)));De&&(Be._f.deps&&K(Be._f.deps),O(xe,X,pe,nt))}},V=(Q,he)=>{if(St(s.errors,he)&&Q.focus)return Q.focus(),1},K=async(Q,he={})=>{let xe,De;const Be=Qm(Q);if(t.resolver){const Fe=await E(zs(Q)?Q:Be);xe=ka(Fe),De=Q?!Be.some(st=>St(Fe,st)):xe}else Q?(De=(await Promise.all(Be.map(async Fe=>{const st=St(n,Fe);return await I(st&&st._f?{[Fe]:st}:st)}))).every(Boolean),!(!De&&!s.isValid)&&g()):De=xe=await I(n);return p.state.next({...!Ro(Q)||(u.isValid||h.isValid)&&xe!==s.isValid?{}:{name:Q},...t.resolver||!Q?{isValid:xe}:{},errors:s.errors}),he.shouldFocus&&!De&&ep(n,V,Q?Be:l.mount),De},J=Q=>{const he={...o.mount?i:a};return zs(Q)?he:Ro(Q)?St(he,Q):Q.map(xe=>St(he,xe))},ie=(Q,he)=>({invalid:!!St((he||s).errors,Q),isDirty:!!St((he||s).dirtyFields,Q),error:St((he||s).errors,Q),isValidating:!!St(s.validatingFields,Q),isTouched:!!St((he||s).touchedFields,Q)}),T=Q=>{Q&&Qm(Q).forEach(he=>on(s.errors,he)),p.state.next({errors:Q?s.errors:{}})},F=(Q,he,xe)=>{const De=(St(n,Q,{_f:{}})._f||{}).ref,Be=St(s.errors,Q)||{},{ref:Fe,message:st,type:_t,...pe}=Be;Yr(s.errors,Q,{...pe,...he,ref:De}),p.state.next({name:Q,errors:s.errors,isValid:!1}),xe&&xe.shouldFocus&&De&&De.focus&&De.focus()},M=(Q,he)=>Yi(Q)?p.state.subscribe({next:xe=>Q(A(void 0,he),xe)}):A(Q,he,!0),G=Q=>p.state.subscribe({next:he=>{pJ(Q.name,he.name,Q.exact)&&mJ(he,Q.formState||u,jt,Q.reRenderRoot)&&Q.callback({values:{...i},...s,...he})}}).unsubscribe,ee=Q=>(o.mount=!0,h={...h,...Q.formState},G({...Q,formState:h})),te=(Q,he={})=>{for(const xe of Q?Qm(Q):l.mount)l.mount.delete(xe),l.array.delete(xe),he.keepValue||(on(n,xe),on(i,xe)),!he.keepError&&on(s.errors,xe),!he.keepDirty&&on(s.dirtyFields,xe),!he.keepTouched&&on(s.touchedFields,xe),!he.keepIsValidating&&on(s.validatingFields,xe),!t.shouldUnregister&&!he.keepDefaultValue&&on(a,xe);p.state.next({values:An(i)}),p.state.next({...s,...he.keepDirty?{isDirty:P()}:{}}),!he.keepIsValid&&g()},me=({disabled:Q,name:he})=>{(Ja(Q)&&o.mount||Q||l.disabled.has(he))&&(Q?l.disabled.add(he):l.disabled.delete(he))},ue=(Q,he={})=>{let xe=St(n,Q);const De=Ja(he.disabled)||Ja(t.disabled);return Yr(n,Q,{...xe||{},_f:{...xe&&xe._f?xe._f:{ref:{name:Q}},name:Q,mount:!0,...he}}),l.mount.add(Q),xe?me({disabled:Ja(he.disabled)?he.disabled:t.disabled,name:Q}):C(Q,!0,he.value),{...De?{disabled:he.disabled||t.disabled}:{},...t.progressive?{required:!!he.required,min:wm(he.min),max:wm(he.max),minLength:wm(he.minLength),maxLength:wm(he.maxLength),pattern:wm(he.pattern)}:{},name:Q,onChange:ge,onBlur:ge,ref:Be=>{if(Be){ue(Q,he),xe=St(n,Q);const Fe=zs(Be.value)&&Be.querySelectorAll&&Be.querySelectorAll("input,select,textarea")[0]||Be,st=lJ(Fe),_t=xe._f.refs||[];if(st?_t.find(pe=>pe===Fe):Fe===xe._f.ref)return;Yr(n,Q,{_f:{...xe._f,...st?{refs:[..._t.filter(u2),Fe,...Array.isArray(St(a,Q))?[{}]:[]],ref:{type:Fe.type,name:Q}}:{ref:Fe}}}),C(Q,!1,void 0,Fe)}else xe=St(n,Q,{}),xe._f&&(xe._f.mount=!1),(t.shouldUnregister||he.shouldUnregister)&&!(pR(l.array,Q)&&o.action)&&l.unMount.add(Q)}}},ce=()=>t.shouldFocusError&&ep(n,V,l.mount),Ce=Q=>{Ja(Q)&&(p.state.next({disabled:Q}),ep(n,(he,xe)=>{const De=St(n,xe);De&&(he.disabled=De._f.disabled||Q,Array.isArray(De._f.refs)&&De._f.refs.forEach(Be=>{Be.disabled=De._f.disabled||Q}))},0,!1))},Ue=(Q,he)=>async xe=>{let De;xe&&(xe.preventDefault&&xe.preventDefault(),xe.persist&&xe.persist());let Be=An(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:Fe,values:st}=await R();s.errors=Fe,Be=st}else await I(n);if(l.disabled.size)for(const Fe of l.disabled)Yr(Be,Fe,void 0);if(on(s.errors,"root"),ka(s.errors)){p.state.next({errors:{}});try{await Q(Be,xe)}catch(Fe){De=Fe}}else he&&await he({...s.errors},xe),ce(),setTimeout(ce);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ka(s.errors)&&!De,submitCount:s.submitCount+1,errors:s.errors}),De)throw De},Ge=(Q,he={})=>{St(n,Q)&&(zs(he.defaultValue)?se(Q,An(St(a,Q))):(se(Q,he.defaultValue),Yr(a,Q,An(he.defaultValue))),he.keepTouched||on(s.touchedFields,Q),he.keepDirty||(on(s.dirtyFields,Q),s.isDirty=he.defaultValue?P(Q,An(St(a,Q))):P()),he.keepError||(on(s.errors,Q),u.isValid&&g()),p.state.next({...s}))},gt=(Q,he={})=>{const xe=Q?An(Q):a,De=An(xe),Be=ka(Q),Fe=Be?a:De;if(he.keepDefaultValues||(a=xe),!he.keepValues){if(he.keepDirtyValues){const st=new Set([...l.mount,...Object.keys(jm(a,i))]);for(const _t of Array.from(st))St(s.dirtyFields,_t)?Yr(Fe,_t,St(i,_t)):se(_t,St(Fe,_t))}else{if(U5&&zs(Q))for(const st of l.mount){const _t=St(n,st);if(_t&&_t._f){const pe=Array.isArray(_t._f.refs)?_t._f.refs[0]:_t._f.ref;if(gv(pe)){const X=pe.closest("form");if(X){X.reset();break}}}}for(const st of l.mount)se(st,St(Fe,st))}i=An(Fe),p.array.next({values:{...Fe}}),p.state.next({values:{...Fe}})}l={mount:he.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!he.keepIsValid||!!he.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:he.keepSubmitCount?s.submitCount:0,isDirty:Be?!1:he.keepDirty?s.isDirty:!!(he.keepDefaultValues&&!ic(Q,a)),isSubmitted:he.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Be?{}:he.keepDirtyValues?he.keepDefaultValues&&i?jm(a,i):s.dirtyFields:he.keepDefaultValues&&Q?jm(a,Q):he.keepDirty?s.dirtyFields:{},touchedFields:he.keepTouched?s.touchedFields:{},errors:he.keepErrors?s.errors:{},isSubmitSuccessful:he.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},Se=(Q,he)=>gt(Yi(Q)?Q(i):Q,he),ne=(Q,he={})=>{const xe=St(n,Q),De=xe&&xe._f;if(De){const Be=De.refs?De.refs[0]:De.ref;Be.focus&&(Be.focus(),he.shouldSelect&&Yi(Be.select)&&Be.select())}},jt=Q=>{s={...s,...Q}},et={control:{register:ue,unregister:te,getFieldState:ie,handleSubmit:Ue,setError:F,_subscribe:G,_runSchema:R,_focusError:ce,_getWatch:A,_getDirty:P,_setValid:g,_setFieldArray:v,_setDisabledField:me,_setErrors:N,_getFieldArray:$,_reset:gt,_resetDefaultValues:()=>Yi(t.defaultValues)&&t.defaultValues().then(Q=>{Se(Q,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:Ce,_subjects:p,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(Q){o=Q},get _defaultValues(){return a},get _names(){return l},set _names(Q){l=Q},get _formState(){return s},get _options(){return t},set _options(Q){t={...t,...Q}}},subscribe:ee,trigger:K,register:ue,handleSubmit:Ue,watch:M,setValue:se,getValues:J,reset:Se,resetField:Ge,clearErrors:T,unregister:te,setError:F,setFocus:ne,getFieldState:ie};return{...et,formControl:et}}function yv(e={}){const t=gr.useRef(void 0),s=gr.useRef(void 0),[n,a]=gr.useState({isDirty:!1,isValidating:!1,isLoading:Yi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Yi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Yi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=bJ(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,W5(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),gr.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),gr.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),gr.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),gr.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),gr.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),gr.useEffect(()=>{e.values&&!ic(e.values,s.current)?(i._reset(e.values,i._options.resetOptions),s.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),gr.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=gR(n,i),t.current}const tp=sJ,_R=x.createContext({}),os=({...e})=>r.jsx(_R.Provider,{value:{name:e.name},children:r.jsx(oJ,{...e})}),e1=()=>{const e=x.useContext(_R),t=x.useContext(CR),{getFieldState:s,formState:n}=Qy(),a=s(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},CR=x.createContext({}),Fr=x.forwardRef(({className:e,...t},s)=>{const n=x.useId();return r.jsx(CR.Provider,{value:{id:n},children:r.jsx("div",{ref:s,className:it("space-y-2",e),...t})})});Fr.displayName="FormItem";const Tr=x.forwardRef(({className:e,...t},s)=>{const{error:n,formItemId:a}=e1();return r.jsx(le,{ref:s,className:it(n&&"text-destructive",e),htmlFor:a,...t})});Tr.displayName="FormLabel";const Jr=x.forwardRef(({...e},t)=>{const{error:s,formItemId:n,formDescriptionId:a,formMessageId:i}=e1();return r.jsx(pu,{ref:t,id:n,"aria-describedby":s?`${a} ${i}`:`${a}`,"aria-invalid":!!s,...e})});Jr.displayName="FormControl";const jJ=x.forwardRef(({className:e,...t},s)=>{const{formDescriptionId:n}=e1();return r.jsx("p",{ref:s,id:n,className:it("text-sm text-muted-foreground",e),...t})});jJ.displayName="FormDescription";const Bs=x.forwardRef(({className:e,children:t,...s},n)=>{const{error:a,formMessageId:i}=e1(),o=a?String(a==null?void 0:a.message):t;return o?r.jsx("p",{ref:n,id:i,className:it("text-sm font-medium text-destructive",e),...s,children:o}):null});Bs.displayName="FormMessage";const $C=(e,t,s)=>{if(e&&"reportValidity"in e){const n=St(s,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},kR=(e,t)=>{for(const s in t.fields){const n=t.fields[s];n&&n.ref&&"reportValidity"in n.ref?$C(n.ref,s,e):n.refs&&n.refs.forEach(a=>$C(a,s,e))}},wJ=(e,t)=>{t.shouldUseNativeValidation&&kR(e,t);const s={};for(const n in e){const a=St(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(NJ(t.names||Object.keys(e),n)){const o=Object.assign({},St(s,n));Yr(o,"root",i),Yr(s,n,o)}else Yr(s,n,i)}return s},NJ=(e,t)=>e.some(s=>s.startsWith(t+"."));var SJ=function(e,t){for(var s={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!s[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];s[o]={message:l.message,type:l.code}}else s[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var c=s[o].types,d=c&&c[n.code];s[o]=vR(o,t,s,a,d?[].concat(d,n.message):n.message)}e.shift()}return s},bv=function(e,t,s){return s===void 0&&(s={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(d){return i.shouldUseNativeValidation&&kR({},i),{errors:{},values:s.raw?n:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:wJ(SJ(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},qr;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function s(a){throw new Error}e.assertNever=s,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(qr||(qr={}));var BC;(function(e){e.mergeShapes=(t,s)=>({...t,...s})})(BC||(BC={}));const Bt=qr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tc=e=>{switch(typeof e){case"undefined":return Bt.undefined;case"string":return Bt.string;case"number":return Number.isNaN(e)?Bt.nan:Bt.number;case"boolean":return Bt.boolean;case"function":return Bt.function;case"bigint":return Bt.bigint;case"symbol":return Bt.symbol;case"object":return Array.isArray(e)?Bt.array:e===null?Bt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Bt.promise:typeof Map<"u"&&e instanceof Map?Bt.map:typeof Set<"u"&&e instanceof Set?Bt.set:typeof Date<"u"&&e instanceof Date?Bt.date:Bt.object;default:return Bt.unknown}},mt=qr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class kl extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=t}format(t){const s=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(s(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(s(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),n}static assert(t){if(!(t instanceof kl))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=s=>s.message){const s={},n=[];for(const a of this.issues)a.path.length>0?(s[a.path[0]]=s[a.path[0]]||[],s[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:s}}get formErrors(){return this.flatten()}}kl.create=e=>new kl(e);const cw=(e,t)=>{let s;switch(e.code){case mt.invalid_type:e.received===Bt.undefined?s="Required":s=`Expected ${e.expected}, received ${e.received}`;break;case mt.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,qr.jsonStringifyReplacer)}`;break;case mt.unrecognized_keys:s=`Unrecognized key(s) in object: ${qr.joinValues(e.keys,", ")}`;break;case mt.invalid_union:s="Invalid input";break;case mt.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${qr.joinValues(e.options)}`;break;case mt.invalid_enum_value:s=`Invalid enum value. Expected ${qr.joinValues(e.options)}, received '${e.received}'`;break;case mt.invalid_arguments:s="Invalid function arguments";break;case mt.invalid_return_type:s="Invalid function return type";break;case mt.invalid_date:s="Invalid date";break;case mt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:qr.assertNever(e.validation):e.validation!=="regex"?s=`Invalid ${e.validation}`:s="Invalid";break;case mt.too_small:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:s="Invalid input";break;case mt.too_big:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?s=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:s="Invalid input";break;case mt.custom:s="Invalid input";break;case mt.invalid_intersection_types:s="Intersection results could not be merged";break;case mt.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case mt.not_finite:s="Number must be finite";break;default:s=t.defaultError,qr.assertNever(e)}return{message:s}};let _J=cw;function CJ(){return _J}const kJ=e=>{const{data:t,path:s,errorMaps:n,issueData:a}=e,i=[...s,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function Rt(e,t){const s=CJ(),n=kJ({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===cw?void 0:cw].filter(a=>!!a)});e.common.issues.push(n)}class oi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,s){const n=[];for(const a of s){if(a.status==="aborted")return lr;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,s){const n=[];for(const a of s){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return oi.mergeObjectSync(t,n)}static mergeObjectSync(t,s){const n={};for(const a of s){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return lr;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const lr=Object.freeze({status:"aborted"}),Im=e=>({status:"dirty",value:e}),Ei=e=>({status:"valid",value:e}),zC=e=>e.status==="aborted",UC=e=>e.status==="dirty",hf=e=>e.status==="valid",jv=e=>typeof Promise<"u"&&e instanceof Promise;var qt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(qt||(qt={}));class Kc{constructor(t,s,n,a){this._cachedPath=[],this.parent=t,this.data=s,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const qC=(e,t)=>{if(hf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new kl(e.common.issues);return this._error=s,this._error}}};function Sr(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:n,description:a}=e;if(t&&(s||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??s??l.defaultError}},description:a}}class Br{get description(){return this._def.description}_getType(t){return tc(t.data)}_getOrReturnCtx(t,s){return s||{common:t.parent.common,data:t.data,parsedType:tc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new oi,ctx:{common:t.parent.common,data:t.data,parsedType:tc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const s=this._parse(t);if(jv(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(t){const s=this._parse(t);return Promise.resolve(s)}parse(t,s){const n=this.safeParse(t,s);if(n.success)return n.data;throw n.error}safeParse(t,s){const n={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:tc(t)},a=this._parseSync({data:t,path:n.path,parent:n});return qC(n,a)}"~validate"(t){var n,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:tc(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:s});return hf(i)?{value:i.value}:{issues:s.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(i=>hf(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(t,s){const n=await this.safeParseAsync(t,s);if(n.success)return n.data;throw n.error}async safeParseAsync(t,s){const n={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:tc(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(jv(a)?a:Promise.resolve(a));return qC(n,i)}refine(t,s){const n=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:mt.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,s){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof s=="function"?s(n,a):s),!1))}_refinement(t){return new pf({schema:this,typeName:cr.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Rc.create(this,this._def)}nullable(){return gf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $o.create(this)}promise(){return _v.create(this,this._def)}or(t){return Nv.create([this,t],this._def)}and(t){return Sv.create(this,t,this._def)}transform(t){return new pf({...Sr(this._def),schema:this,typeName:cr.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const s=typeof t=="function"?t:()=>t;return new hw({...Sr(this._def),innerType:this,defaultValue:s,typeName:cr.ZodDefault})}brand(){return new JJ({typeName:cr.ZodBranded,type:this,...Sr(this._def)})}catch(t){const s=typeof t=="function"?t:()=>t;return new fw({...Sr(this._def),innerType:this,catchValue:s,typeName:cr.ZodCatch})}describe(t){const s=this.constructor;return new s({...this._def,description:t})}pipe(t){return Y5.create(this,t)}readonly(){return mw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const AJ=/^c[^\s-]{8,}$/i,PJ=/^[0-9a-z]+$/,EJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,LJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,RJ=/^[a-z0-9_-]{21}$/i,TJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,IJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,FJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,DJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let h2;const OJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$J=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,BJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,UJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,AR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",qJ=new RegExp(`^${AR}$`);function PR(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const s=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${s}`}function VJ(e){return new RegExp(`^${PR(e)}$`)}function HJ(e){let t=`${AR}T${PR(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function WJ(e,t){return!!((t==="v4"||!t)&&OJ.test(e)||(t==="v6"||!t)&&$J.test(e))}function GJ(e,t){if(!TJ.test(e))return!1;try{const[s]=e.split("."),n=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function KJ(e,t){return!!((t==="v4"||!t)&&MJ.test(e)||(t==="v6"||!t)&&BJ.test(e))}class pc extends Br{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Bt.string){const i=this._getOrReturnCtx(t);return Rt(i,{code:mt.invalid_type,expected:Bt.string,received:i.parsedType}),lr}const n=new oi;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?Rt(a,{code:mt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Rt(a,{code:mt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")FJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"email",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")h2||(h2=new RegExp(DJ,"u")),h2.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"emoji",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")LJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"uuid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")RJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"nanoid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")AJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"cuid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")PJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"cuid2",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")EJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"ulid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Rt(a,{validation:"url",code:mt.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"regex",code:mt.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?HJ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?qJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?VJ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?IJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"duration",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?WJ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"ip",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?GJ(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"jwt",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?KJ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"cidr",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?zJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"base64",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?UJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Rt(a,{validation:"base64url",code:mt.invalid_string,message:i.message}),n.dirty()):qr.assertNever(i);return{status:n.value,value:t.data}}_regex(t,s,n){return this.refinement(a=>t.test(a),{validation:s,code:mt.invalid_string,...qt.errToObj(n)})}_addCheck(t){return new pc({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...qt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...qt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...qt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...qt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...qt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...qt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...qt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...qt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...qt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...qt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...qt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...qt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...qt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...qt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...qt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...qt.errToObj(t)})}regex(t,s){return this._addCheck({kind:"regex",regex:t,...qt.errToObj(s)})}includes(t,s){return this._addCheck({kind:"includes",value:t,position:s==null?void 0:s.position,...qt.errToObj(s==null?void 0:s.message)})}startsWith(t,s){return this._addCheck({kind:"startsWith",value:t,...qt.errToObj(s)})}endsWith(t,s){return this._addCheck({kind:"endsWith",value:t,...qt.errToObj(s)})}min(t,s){return this._addCheck({kind:"min",value:t,...qt.errToObj(s)})}max(t,s){return this._addCheck({kind:"max",value:t,...qt.errToObj(s)})}length(t,s){return this._addCheck({kind:"length",value:t,...qt.errToObj(s)})}nonempty(t){return this.min(1,qt.errToObj(t))}trim(){return new pc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new pc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new pc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxLength(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}pc.create=e=>new pc({checks:[],typeName:cr.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Sr(e)});function YJ(e,t){const s=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=s>n?s:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class ff extends Br{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Bt.number){const i=this._getOrReturnCtx(t);return Rt(i,{code:mt.invalid_type,expected:Bt.number,received:i.parsedType}),lr}let n;const a=new oi;for(const i of this._def.checks)i.kind==="int"?qr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Rt(n,{code:mt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Rt(n,{code:mt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Rt(n,{code:mt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?YJ(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),Rt(n,{code:mt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Rt(n,{code:mt.not_finite,message:i.message}),a.dirty()):qr.assertNever(i);return{status:a.value,value:t.data}}gte(t,s){return this.setLimit("min",t,!0,qt.toString(s))}gt(t,s){return this.setLimit("min",t,!1,qt.toString(s))}lte(t,s){return this.setLimit("max",t,!0,qt.toString(s))}lt(t,s){return this.setLimit("max",t,!1,qt.toString(s))}setLimit(t,s,n,a){return new ff({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:n,message:qt.toString(a)}]})}_addCheck(t){return new ff({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:qt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:qt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:qt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:qt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:qt.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:qt.toString(s)})}finite(t){return this._addCheck({kind:"finite",message:qt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:qt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:qt.toString(t)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&qr.isInteger(t.value))}get isFinite(){let t=null,s=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(s===null||n.value>s)&&(s=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(s)&&Number.isFinite(t)}}ff.create=e=>new ff({checks:[],typeName:cr.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Sr(e)});class Rp extends Br{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Bt.bigint)return this._getInvalidInput(t);let n;const a=new oi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Rt(n,{code:mt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Rt(n,{code:mt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Rt(n,{code:mt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):qr.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const s=this._getOrReturnCtx(t);return Rt(s,{code:mt.invalid_type,expected:Bt.bigint,received:s.parsedType}),lr}gte(t,s){return this.setLimit("min",t,!0,qt.toString(s))}gt(t,s){return this.setLimit("min",t,!1,qt.toString(s))}lte(t,s){return this.setLimit("max",t,!0,qt.toString(s))}lt(t,s){return this.setLimit("max",t,!1,qt.toString(s))}setLimit(t,s,n,a){return new Rp({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:n,message:qt.toString(a)}]})}_addCheck(t){return new Rp({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:qt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:qt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:qt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:qt.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:qt.toString(s)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}Rp.create=e=>new Rp({checks:[],typeName:cr.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Sr(e)});class dw extends Br{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Bt.boolean){const n=this._getOrReturnCtx(t);return Rt(n,{code:mt.invalid_type,expected:Bt.boolean,received:n.parsedType}),lr}return Ei(t.data)}}dw.create=e=>new dw({typeName:cr.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Sr(e)});class wv extends Br{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Bt.date){const i=this._getOrReturnCtx(t);return Rt(i,{code:mt.invalid_type,expected:Bt.date,received:i.parsedType}),lr}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Rt(i,{code:mt.invalid_date}),lr}const n=new oi;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Rt(a,{code:mt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):qr.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new wv({...this._def,checks:[...this._def.checks,t]})}min(t,s){return this._addCheck({kind:"min",value:t.getTime(),message:qt.toString(s)})}max(t,s){return this._addCheck({kind:"max",value:t.getTime(),message:qt.toString(s)})}get minDate(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t!=null?new Date(t):null}}wv.create=e=>new wv({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:cr.ZodDate,...Sr(e)});class VC extends Br{_parse(t){if(this._getType(t)!==Bt.symbol){const n=this._getOrReturnCtx(t);return Rt(n,{code:mt.invalid_type,expected:Bt.symbol,received:n.parsedType}),lr}return Ei(t.data)}}VC.create=e=>new VC({typeName:cr.ZodSymbol,...Sr(e)});class HC extends Br{_parse(t){if(this._getType(t)!==Bt.undefined){const n=this._getOrReturnCtx(t);return Rt(n,{code:mt.invalid_type,expected:Bt.undefined,received:n.parsedType}),lr}return Ei(t.data)}}HC.create=e=>new HC({typeName:cr.ZodUndefined,...Sr(e)});class WC extends Br{_parse(t){if(this._getType(t)!==Bt.null){const n=this._getOrReturnCtx(t);return Rt(n,{code:mt.invalid_type,expected:Bt.null,received:n.parsedType}),lr}return Ei(t.data)}}WC.create=e=>new WC({typeName:cr.ZodNull,...Sr(e)});class GC extends Br{constructor(){super(...arguments),this._any=!0}_parse(t){return Ei(t.data)}}GC.create=e=>new GC({typeName:cr.ZodAny,...Sr(e)});class KC extends Br{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ei(t.data)}}KC.create=e=>new KC({typeName:cr.ZodUnknown,...Sr(e)});class Yc extends Br{_parse(t){const s=this._getOrReturnCtx(t);return Rt(s,{code:mt.invalid_type,expected:Bt.never,received:s.parsedType}),lr}}Yc.create=e=>new Yc({typeName:cr.ZodNever,...Sr(e)});class YC extends Br{_parse(t){if(this._getType(t)!==Bt.undefined){const n=this._getOrReturnCtx(t);return Rt(n,{code:mt.invalid_type,expected:Bt.void,received:n.parsedType}),lr}return Ei(t.data)}}YC.create=e=>new YC({typeName:cr.ZodVoid,...Sr(e)});class $o extends Br{_parse(t){const{ctx:s,status:n}=this._processInputParams(t),a=this._def;if(s.parsedType!==Bt.array)return Rt(s,{code:mt.invalid_type,expected:Bt.array,received:s.parsedType}),lr;if(a.exactLength!==null){const o=s.data.length>a.exactLength.value,l=s.data.length<a.exactLength.value;(o||l)&&(Rt(s,{code:o?mt.too_big:mt.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(Rt(s,{code:mt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(Rt(s,{code:mt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>a.type._parseAsync(new Kc(s,o,s.path,l)))).then(o=>oi.mergeArray(n,o));const i=[...s.data].map((o,l)=>a.type._parseSync(new Kc(s,o,s.path,l)));return oi.mergeArray(n,i)}get element(){return this._def.type}min(t,s){return new $o({...this._def,minLength:{value:t,message:qt.toString(s)}})}max(t,s){return new $o({...this._def,maxLength:{value:t,message:qt.toString(s)}})}length(t,s){return new $o({...this._def,exactLength:{value:t,message:qt.toString(s)}})}nonempty(t){return this.min(1,t)}}$o.create=(e,t)=>new $o({type:e,minLength:null,maxLength:null,exactLength:null,typeName:cr.ZodArray,...Sr(t)});function Xu(e){if(e instanceof rn){const t={};for(const s in e.shape){const n=e.shape[s];t[s]=Rc.create(Xu(n))}return new rn({...e._def,shape:()=>t})}else return e instanceof $o?new $o({...e._def,type:Xu(e.element)}):e instanceof Rc?Rc.create(Xu(e.unwrap())):e instanceof gf?gf.create(Xu(e.unwrap())):e instanceof cu?cu.create(e.items.map(t=>Xu(t))):e}class rn extends Br{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),s=qr.objectKeys(t);return this._cached={shape:t,keys:s},this._cached}_parse(t){if(this._getType(t)!==Bt.object){const d=this._getOrReturnCtx(t);return Rt(d,{code:mt.invalid_type,expected:Bt.object,received:d.parsedType}),lr}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Yc&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],h=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Kc(a,h,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Yc){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(Rt(a,{code:mt.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const h=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Kc(a,h,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,p=await u.value;d.push({key:h,value:p,alwaysSet:u.alwaysSet})}return d}).then(d=>oi.mergeObjectSync(n,d)):oi.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return qt.errToObj,new rn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(s,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,s,n).message)??n.defaultError;return s.code==="unrecognized_keys"?{message:qt.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new rn({...this._def,unknownKeys:"strip"})}passthrough(){return new rn({...this._def,unknownKeys:"passthrough"})}extend(t){return new rn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new rn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:cr.ZodObject})}setKey(t,s){return this.augment({[t]:s})}catchall(t){return new rn({...this._def,catchall:t})}pick(t){const s={};for(const n of qr.objectKeys(t))t[n]&&this.shape[n]&&(s[n]=this.shape[n]);return new rn({...this._def,shape:()=>s})}omit(t){const s={};for(const n of qr.objectKeys(this.shape))t[n]||(s[n]=this.shape[n]);return new rn({...this._def,shape:()=>s})}deepPartial(){return Xu(this)}partial(t){const s={};for(const n of qr.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?s[n]=a:s[n]=a.optional()}return new rn({...this._def,shape:()=>s})}required(t){const s={};for(const n of qr.objectKeys(this.shape))if(t&&!t[n])s[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Rc;)i=i._def.innerType;s[n]=i}return new rn({...this._def,shape:()=>s})}keyof(){return ER(qr.objectKeys(this.shape))}}rn.create=(e,t)=>new rn({shape:()=>e,unknownKeys:"strip",catchall:Yc.create(),typeName:cr.ZodObject,...Sr(t)});rn.strictCreate=(e,t)=>new rn({shape:()=>e,unknownKeys:"strict",catchall:Yc.create(),typeName:cr.ZodObject,...Sr(t)});rn.lazycreate=(e,t)=>new rn({shape:e,unknownKeys:"strip",catchall:Yc.create(),typeName:cr.ZodObject,...Sr(t)});class Nv extends Br{_parse(t){const{ctx:s}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new kl(l.ctx.common.issues));return Rt(s,{code:mt.invalid_union,unionErrors:o}),lr}if(s.common.async)return Promise.all(n.map(async i=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const d={...s,common:{...s.common,issues:[]},parent:null},u=c._parseSync({data:s.data,path:s.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new kl(c));return Rt(s,{code:mt.invalid_union,unionErrors:l}),lr}}get options(){return this._def.options}}Nv.create=(e,t)=>new Nv({options:e,typeName:cr.ZodUnion,...Sr(t)});function uw(e,t){const s=tc(e),n=tc(t);if(e===t)return{valid:!0,data:e};if(s===Bt.object&&n===Bt.object){const a=qr.objectKeys(t),i=qr.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=uw(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(s===Bt.array&&n===Bt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=uw(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return s===Bt.date&&n===Bt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Sv extends Br{_parse(t){const{status:s,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(zC(i)||zC(o))return lr;const l=uw(i.value,o.value);return l.valid?((UC(i)||UC(o))&&s.dirty(),{status:s.value,value:l.data}):(Rt(n,{code:mt.invalid_intersection_types}),lr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Sv.create=(e,t,s)=>new Sv({left:e,right:t,typeName:cr.ZodIntersection,...Sr(s)});class cu extends Br{_parse(t){const{status:s,ctx:n}=this._processInputParams(t);if(n.parsedType!==Bt.array)return Rt(n,{code:mt.invalid_type,expected:Bt.array,received:n.parsedType}),lr;if(n.data.length<this._def.items.length)return Rt(n,{code:mt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),lr;!this._def.rest&&n.data.length>this._def.items.length&&(Rt(n,{code:mt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Kc(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>oi.mergeArray(s,o)):oi.mergeArray(s,i)}get items(){return this._def.items}rest(t){return new cu({...this._def,rest:t})}}cu.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new cu({items:e,typeName:cr.ZodTuple,rest:null,...Sr(t)})};class JC extends Br{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:s,ctx:n}=this._processInputParams(t);if(n.parsedType!==Bt.map)return Rt(n,{code:mt.invalid_type,expected:Bt.map,received:n.parsedType}),lr;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:a._parse(new Kc(n,l,n.path,[d,"key"])),value:i._parse(new Kc(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return lr;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),l.set(d.value,u.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return lr;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),l.set(d.value,u.value)}return{status:s.value,value:l}}}}JC.create=(e,t,s)=>new JC({valueType:t,keyType:e,typeName:cr.ZodMap,...Sr(s)});class Tp extends Br{_parse(t){const{status:s,ctx:n}=this._processInputParams(t);if(n.parsedType!==Bt.set)return Rt(n,{code:mt.invalid_type,expected:Bt.set,received:n.parsedType}),lr;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(Rt(n,{code:mt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(Rt(n,{code:mt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return lr;u.status==="dirty"&&s.dirty(),d.add(u.value)}return{status:s.value,value:d}}const l=[...n.data.values()].map((c,d)=>i._parse(new Kc(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,s){return new Tp({...this._def,minSize:{value:t,message:qt.toString(s)}})}max(t,s){return new Tp({...this._def,maxSize:{value:t,message:qt.toString(s)}})}size(t,s){return this.min(t,s).max(t,s)}nonempty(t){return this.min(1,t)}}Tp.create=(e,t)=>new Tp({valueType:e,minSize:null,maxSize:null,typeName:cr.ZodSet,...Sr(t)});class ZC extends Br{get schema(){return this._def.getter()}_parse(t){const{ctx:s}=this._processInputParams(t);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}ZC.create=(e,t)=>new ZC({getter:e,typeName:cr.ZodLazy,...Sr(t)});class XC extends Br{_parse(t){if(t.data!==this._def.value){const s=this._getOrReturnCtx(t);return Rt(s,{received:s.data,code:mt.invalid_literal,expected:this._def.value}),lr}return{status:"valid",value:t.data}}get value(){return this._def.value}}XC.create=(e,t)=>new XC({value:e,typeName:cr.ZodLiteral,...Sr(t)});function ER(e,t){return new mf({values:e,typeName:cr.ZodEnum,...Sr(t)})}class mf extends Br{_parse(t){if(typeof t.data!="string"){const s=this._getOrReturnCtx(t),n=this._def.values;return Rt(s,{expected:qr.joinValues(n),received:s.parsedType,code:mt.invalid_type}),lr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const s=this._getOrReturnCtx(t),n=this._def.values;return Rt(s,{received:s.data,code:mt.invalid_enum_value,options:n}),lr}return Ei(t.data)}get options(){return this._def.values}get enum(){const t={};for(const s of this._def.values)t[s]=s;return t}get Values(){const t={};for(const s of this._def.values)t[s]=s;return t}get Enum(){const t={};for(const s of this._def.values)t[s]=s;return t}extract(t,s=this._def){return mf.create(t,{...this._def,...s})}exclude(t,s=this._def){return mf.create(this.options.filter(n=>!t.includes(n)),{...this._def,...s})}}mf.create=ER;class QC extends Br{_parse(t){const s=qr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Bt.string&&n.parsedType!==Bt.number){const a=qr.objectValues(s);return Rt(n,{expected:qr.joinValues(a),received:n.parsedType,code:mt.invalid_type}),lr}if(this._cache||(this._cache=new Set(qr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=qr.objectValues(s);return Rt(n,{received:n.data,code:mt.invalid_enum_value,options:a}),lr}return Ei(t.data)}get enum(){return this._def.values}}QC.create=(e,t)=>new QC({values:e,typeName:cr.ZodNativeEnum,...Sr(t)});class _v extends Br{unwrap(){return this._def.type}_parse(t){const{ctx:s}=this._processInputParams(t);if(s.parsedType!==Bt.promise&&s.common.async===!1)return Rt(s,{code:mt.invalid_type,expected:Bt.promise,received:s.parsedType}),lr;const n=s.parsedType===Bt.promise?s.data:Promise.resolve(s.data);return Ei(n.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}_v.create=(e,t)=>new _v({type:e,typeName:cr.ZodPromise,...Sr(t)});class pf extends Br{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===cr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:s,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Rt(n,o),o.fatal?s.abort():s.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return lr;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?lr:c.status==="dirty"||s.value==="dirty"?Im(c.value):c});{if(s.value==="aborted")return lr;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?lr:l.status==="dirty"||s.value==="dirty"?Im(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?lr:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?lr:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!hf(o))return lr;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>hf(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:s.value,value:l})):lr);qr.assertNever(a)}}pf.create=(e,t,s)=>new pf({schema:e,typeName:cr.ZodEffects,effect:t,...Sr(s)});pf.createWithPreprocess=(e,t,s)=>new pf({schema:t,effect:{type:"preprocess",transform:e},typeName:cr.ZodEffects,...Sr(s)});class Rc extends Br{_parse(t){return this._getType(t)===Bt.undefined?Ei(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Rc.create=(e,t)=>new Rc({innerType:e,typeName:cr.ZodOptional,...Sr(t)});class gf extends Br{_parse(t){return this._getType(t)===Bt.null?Ei(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}gf.create=(e,t)=>new gf({innerType:e,typeName:cr.ZodNullable,...Sr(t)});class hw extends Br{_parse(t){const{ctx:s}=this._processInputParams(t);let n=s.data;return s.parsedType===Bt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}hw.create=(e,t)=>new hw({innerType:e,typeName:cr.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Sr(t)});class fw extends Br{_parse(t){const{ctx:s}=this._processInputParams(t),n={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return jv(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new kl(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new kl(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}fw.create=(e,t)=>new fw({innerType:e,typeName:cr.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Sr(t)});class e3 extends Br{_parse(t){if(this._getType(t)!==Bt.nan){const n=this._getOrReturnCtx(t);return Rt(n,{code:mt.invalid_type,expected:Bt.nan,received:n.parsedType}),lr}return{status:"valid",value:t.data}}}e3.create=e=>new e3({typeName:cr.ZodNaN,...Sr(e)});class JJ extends Br{_parse(t){const{ctx:s}=this._processInputParams(t),n=s.data;return this._def.type._parse({data:n,path:s.path,parent:s})}unwrap(){return this._def.type}}class Y5 extends Br{_parse(t){const{status:s,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?lr:i.status==="dirty"?(s.dirty(),Im(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?lr:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,s){return new Y5({in:t,out:s,typeName:cr.ZodPipeline})}}class mw extends Br{_parse(t){const s=this._def.innerType._parse(t),n=a=>(hf(a)&&(a.value=Object.freeze(a.value)),a);return jv(s)?s.then(a=>n(a)):n(s)}unwrap(){return this._def.innerType}}mw.create=(e,t)=>new mw({innerType:e,typeName:cr.ZodReadonly,...Sr(t)});var cr;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(cr||(cr={}));const gc=pc.create,En=ff.create,Cv=dw.create;Yc.create;const J5=$o.create,t1=rn.create;Nv.create;Sv.create;cu.create;const t3=mf.create;_v.create;Rc.create;gf.create;var r1="Checkbox",[ZJ,dre]=xa(r1),[XJ,Z5]=ZJ(r1);function QJ(e){const{__scopeCheckbox:t,checked:s,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=e,[p,f]=so({prop:s,defaultProp:a??!1,onChange:c,caller:r1}),[y,g]=x.useState(null),[j,v]=x.useState(null),w=x.useRef(!1),N=y?!!o||!!y.closest("form"):!0,C={checked:p,disabled:i,setChecked:f,control:y,setControl:g,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:w,required:d,defaultChecked:Tc(a)?!1:a,isFormControl:N,bubbleInput:j,setBubbleInput:v};return r.jsx(XJ,{scope:t,...C,children:eZ(h)?h(C):n})}var LR="CheckboxTrigger",RR=x.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:f,bubbleInput:y}=Z5(LR,e),g=Nr(a,u),j=x.useRef(c);return x.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const w=()=>h(j.current);return v.addEventListener("reset",w),()=>v.removeEventListener("reset",w)}},[i,h]),r.jsx(Ot.button,{type:"button",role:"checkbox","aria-checked":Tc(c)?"mixed":c,"aria-required":d,"data-state":OR(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:pt(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:pt(s,v=>{h(w=>Tc(w)?!0:!w),y&&f&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})});RR.displayName=LR;var X5=x.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=e;return r.jsx(QJ,{__scopeCheckbox:s,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:p})=>r.jsxs(r.Fragment,{children:[r.jsx(RR,{...h,ref:t,__scopeCheckbox:s}),p&&r.jsx(DR,{__scopeCheckbox:s})]})})});X5.displayName=r1;var TR="CheckboxIndicator",IR=x.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:n,...a}=e,i=Z5(TR,s);return r.jsx($a,{present:n||Tc(i.checked)||i.checked===!0,children:r.jsx(Ot.span,{"data-state":OR(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});IR.displayName=TR;var FR="CheckboxBubbleInput",DR=x.forwardRef(({__scopeCheckbox:e,...t},s)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:p,setBubbleInput:f}=Z5(FR,e),y=Nr(s,f),g=B5(i),j=A5(n);x.useEffect(()=>{const w=p;if(!w)return;const N=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(N,"checked").set,O=!a.current;if(g!==i&&k){const R=new Event("click",{bubbles:O});w.indeterminate=Tc(i),k.call(w,Tc(i)?!1:i),w.dispatchEvent(R)}},[p,g,i,a]);const v=x.useRef(Tc(i)?!1:i);return r.jsx(Ot.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:d,value:u,form:h,...t,tabIndex:-1,ref:y,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});DR.displayName=FR;function eZ(e){return typeof e=="function"}function Tc(e){return e==="indeterminate"}function OR(e){return Tc(e)?"indeterminate":e?"checked":"unchecked"}const Oh=x.forwardRef(({className:e,...t},s)=>r.jsx(X5,{ref:s,className:it("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(IR,{className:it("flex items-center justify-center text-current"),children:r.jsx(Rn,{className:"h-4 w-4"})})}));Oh.displayName=X5.displayName;var s1="Switch",[tZ,ure]=xa(s1),[rZ,sZ]=tZ(s1),MR=x.forwardRef((e,t)=>{const{__scopeSwitch:s,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[p,f]=x.useState(null),y=Nr(t,N=>f(N)),g=x.useRef(!1),j=p?u||!!p.closest("form"):!0,[v,w]=so({prop:a,defaultProp:i??!1,onChange:d,caller:s1});return r.jsxs(rZ,{scope:s,checked:v,disabled:l,children:[r.jsx(Ot.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":UR(v),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:y,onClick:pt(e.onClick,N=>{w(C=>!C),j&&(g.current=N.isPropagationStopped(),g.current||N.stopPropagation())})}),j&&r.jsx(zR,{control:p,bubbles:!g.current,name:n,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});MR.displayName=s1;var $R="SwitchThumb",BR=x.forwardRef((e,t)=>{const{__scopeSwitch:s,...n}=e,a=sZ($R,s);return r.jsx(Ot.span,{"data-state":UR(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});BR.displayName=$R;var nZ="SwitchBubbleInput",zR=x.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:n=!0,...a},i)=>{const o=x.useRef(null),l=Nr(o,i),c=B5(s),d=A5(t);return x.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==s&&f){const y=new Event("click",{bubbles:n});f.call(u,s),u.dispatchEvent(y)}},[c,s,n]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});zR.displayName=nZ;function UR(e){return e?"checked":"unchecked"}var qR=MR,aZ=BR;const ts=x.forwardRef(({className:e,...t},s)=>r.jsx(qR,{className:it("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:r.jsx(aZ,{className:it("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ts.displayName=qR.displayName;const iZ=t1({name:gc().min(2,"Stop name must be at least 2 characters"),route:En(),lat:En(),lng:En(),sequence_number:En().min(1,"Sequence number must be at least 1"),estimated_arrival_time:gc().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/,"Time must be in HH:MM:SS format"),is_pickup:Cv(),is_dropoff:Cv()});function oZ({isOpen:e,onClose:t,routeId:s,routeName:n,currentSequenceNumber:a}){const i=ns(),{toast:o}=Zs(),[l,c]=x.useState(!1),[d,u]=x.useState(""),[h,p]=x.useState(null),[f,y]=x.useState([]),[g,j]=x.useState(a),v=x.useRef(null),w=yv({resolver:bv(iZ),defaultValues:{name:"",route:s,lat:0,lng:0,sequence_number:a,estimated_arrival_time:"08:00:00",is_pickup:!0,is_dropoff:!0}});x.useEffect(()=>{e&&(w.reset({name:"",route:s,lat:0,lng:0,sequence_number:a,estimated_arrival_time:"08:00:00",is_pickup:!0,is_dropoff:!0}),u(""),p(null),y([]),j(a))},[e,s,a,w]),x.useEffect(()=>{if(e&&!l){const k=document.createElement("script");return k.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA4HtS4auqymgQwjbXKXRr1tyBEVFAyOzs&libraries=places",k.async=!0,k.defer=!0,k.onload=()=>{if(c(!0),v.current){const O=new google.maps.places.Autocomplete(v.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}});O.addListener("place_changed",()=>{var I,D;const E=O.getPlace();if(E.geometry){const P=((I=E.geometry.location)==null?void 0:I.lat())||0,A=((D=E.geometry.location)==null?void 0:D.lng())||0,$=E.name||E.formatted_address||"";u($),p({name:$,lat:P,lng:A}),w.setValue("name",$),w.setValue("lat",P),w.setValue("lng",A)}});const R=document.createElement("style");R.textContent=`
            .pac-container {
              border-radius: 0.5rem;
              margin-top: 0.5rem;
              box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
              border: 1px solid #e5e7eb;
              background-color: white;
              z-index: 1000;
              max-height: 300px;
              overflow-y: auto;
            }
            .pac-item {
              padding: 0.75rem 1rem;
              cursor: pointer;
              font-size: 0.875rem;
              line-height: 1.25rem;
              border-bottom: 1px solid #f3f4f6;
              transition: background-color 0.2s;
            }
            .pac-item:last-child {
              border-bottom: none;
            }
            .pac-item:hover {
              background-color: #f3f4f6;
            }
            .pac-item-query {
              font-size: 0.875rem;
              color: #1f2937;
              font-weight: 500;
            }
            .pac-icon {
              margin-right: 0.75rem;
              color: #6b7280;
            }
            .pac-matched {
              font-weight: 600;
              color: #2563eb;
            }
          `,document.head.appendChild(R)}},document.head.appendChild(k),()=>{document.head.removeChild(k)}}},[e,l,w]);const N=async k=>{if(!h){o({title:"Error",description:"Please search and select a location first",variant:"destructive"});return}try{await i(Zx(k)).unwrap();const O={name:k.name,sequence_number:k.sequence_number,estimated_arrival_time:k.estimated_arrival_time,is_pickup:k.is_pickup,is_dropoff:k.is_dropoff,lat:k.lat,lng:k.lng};y(R=>[...R,O]),j(R=>R+1),o({title:"Success",description:`Route stop "${k.name}" added successfully`}),w.reset({name:"",route:s,lat:0,lng:0,sequence_number:g+1,estimated_arrival_time:"08:00:00",is_pickup:!0,is_dropoff:!0}),u(""),p(null)}catch(O){console.error("Add route stop error:",O);let R="Failed to add route stop";if(O instanceof Error)try{const E=JSON.parse(O.message);typeof E=="object"&&E!==null?R=JSON.stringify(E,null,2):R=O.message}catch{R=O.message}else R=String(O);o({title:"Error",description:R,variant:"destructive"})}},C=()=>{f.length>0&&o({title:"Stops Added",description:`Successfully added ${f.length} route stop(s)`}),t()};return r.jsx(Hr,{open:e,onOpenChange:C,children:r.jsxs(Or,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(Mr,{children:[r.jsxs($r,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"w-5 h-5 text-blue-500"}),"Add Route Stops"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Add multiple stops to route:"," ",r.jsx("span",{className:"font-semibold",children:n})]})]}),f.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(le,{className:"text-base font-semibold",children:["Added Stops (",f.length,")"]}),r.jsxs(Te,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx(ur,{className:"w-3 h-3 mr-1"}),"Success"]})]}),r.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-lg p-3 bg-green-50",children:f.map((k,O)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border mb-2 last:mb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-green-600",children:k.sequence_number})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:k.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Arrival: ",k.estimated_arrival_time," |",k.is_pickup&&r.jsx(Te,{variant:"outline",className:"ml-1 text-xs",children:"Pickup"}),k.is_dropoff&&r.jsx(Te,{variant:"outline",className:"ml-1 text-xs",children:"Dropoff"})]})]})]}),r.jsx(ur,{className:"w-4 h-4 text-green-600"})]},O))})]}),r.jsx(tp,{...w,children:r.jsxs("form",{onSubmit:w.handleSubmit(N),className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Search Location"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(Oe,{ref:v,placeholder:"Search for a location...",value:d,onChange:k=>u(k.target.value),className:"pl-10",autoComplete:"off",onKeyDown:k=>{k.key==="ArrowDown"||k.key==="ArrowUp"||k.key}})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Start typing to search for locations using Google Maps"})]}),h&&r.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ks,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{className:"font-medium text-green-800",children:"Location Selected"})]}),r.jsx("p",{className:"text-sm text-green-700 mb-1",children:h.name}),r.jsxs("p",{className:"text-xs text-green-600",children:["Coordinates: ",h.lat.toFixed(6),","," ",h.lng.toFixed(6)]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(os,{control:w.control,name:"sequence_number",render:({field:k})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Sequence Number"}),r.jsx(Jr,{children:r.jsx(Oe,{type:"number",min:"1",placeholder:"1",...k,onChange:O=>k.onChange(parseInt(O.target.value)||1)})}),r.jsx(Bs,{})]})}),r.jsx(os,{control:w.control,name:"estimated_arrival_time",render:({field:k})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Estimated Arrival Time"}),r.jsx(Jr,{children:r.jsx(Oe,{type:"time",step:"1",...k})}),r.jsx(Bs,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(os,{control:w.control,name:"is_pickup",render:({field:k})=>r.jsxs(Fr,{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsxs(Tr,{className:"flex items-center gap-2",children:[r.jsx(hr,{className:"w-4 h-4"}),"Pickup Stop"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Students can be picked up at this stop"})]}),r.jsx(Jr,{children:r.jsx(ts,{checked:k.value,onCheckedChange:k.onChange})})]})}),r.jsx(os,{control:w.control,name:"is_dropoff",render:({field:k})=>r.jsxs(Fr,{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsxs(Tr,{className:"flex items-center gap-2",children:[r.jsx(hr,{className:"w-4 h-4"}),"Dropoff Stop"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Students can be dropped off at this stop"})]}),r.jsx(Jr,{children:r.jsx(ts,{checked:k.value,onCheckedChange:k.onChange})})]})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:C,children:f.length>0?"Done":"Cancel"}),r.jsx(fe,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",disabled:!h,children:"Add Stop"})]})]})})]})})}function lZ({isOpen:e,onClose:t,routeId:s,routeName:n}){const a=ns(),[i,o]=x.useState([]),[l,c]=x.useState(!1),[d,u]=x.useState(null);x.useEffect(()=>{e&&s&&h()},[e,s]);const h=async()=>{c(!0),u(null);try{const f=await a(_h(s)).unwrap();o(f)}catch(f){console.error("Error fetching route stops:",f),u(f instanceof Error?f.message:"Failed to fetch route stops")}finally{c(!1)}},p=i.sort((f,y)=>f.sequence_number-y.sequence_number);return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(Mr,{children:[r.jsxs($r,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"w-5 h-5 text-blue-500"}),"Route Stops"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Stops for route: ",r.jsx("span",{className:"font-semibold",children:n})]})]}),l?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ii,{className:"w-5 h-5 animate-spin text-blue-500"}),r.jsx("span",{className:"text-gray-600",children:"Loading route stops..."})]})}):d?r.jsxs("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[r.jsx("p",{className:"text-red-700",children:d}),r.jsx(fe,{onClick:h,variant:"outline",size:"sm",className:"mt-2",children:"Retry"})]}):i.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Route Stops"}),r.jsx("p",{className:"text-gray-500",children:"This route doesn't have any stops configured yet."})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Total Stops: ",i.length]}),r.jsxs(Te,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[p.length," stops"]})]}),r.jsx("div",{className:"space-y-3",children:p.map(f=>r.jsx("div",{className:"p-4 border rounded-lg bg-white hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:f.sequence_number||0})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:f.name||"Unnamed Stop"}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(bn,{className:"w-4 h-4"}),r.jsxs("span",{children:["Arrival: ",f.estimated_arrival_time||"N/A"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ks,{className:"w-4 h-4"}),r.jsx("span",{children:f.lat!==void 0&&f.lng!==void 0?`${f.lat.toFixed(4)}, ${f.lng.toFixed(4)}`:"Coordinates not available"})]})]})]})]}),r.jsxs("div",{className:"flex gap-1",children:[f.is_pickup&&r.jsxs(Te,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:[r.jsx(hr,{className:"w-3 h-3 mr-1"}),"Pickup"]}),f.is_dropoff&&r.jsxs(Te,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:[r.jsx(hr,{className:"w-3 h-3 mr-1"}),"Dropoff"]})]})]})},f.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{onClick:t,variant:"outline",children:"Close"})})]})})}const cZ=t1({name:gc().min(2,"Route name must be at least 2 characters"),school:En(),driver:En().min(1,"Please select a driver"),start_lat:En(),start_lng:En(),end_lat:En(),end_lng:En(),total_distance:En(),estimated_duration:gc(),is_active:Cv(),schedule_days:J5(gc()),traffic_factor:En(),path:gc()}),dZ=t1({student:En().min(1,"Please select a student"),route:En().min(1,"Please select a route"),pickup_stop:En().nullable().optional(),dropoff_stop:En().nullable().optional(),is_active:Cv(),schedule_days:J5(gc()).min(1,"At least one schedule day is required")});function uZ(){var as,_r;const e=ns(),{routes:t,loading:s,error:n}=At(W=>W.routes),{students:a}=At(W=>W.students),{drivers:i}=At(W=>W.drivers),{assignments:o}=At(W=>W.routeAssignments),{grades:l}=At(W=>W.grades),d=JSON.parse(localStorage.getItem("profile")||"{}"),{schools:u}=At(W=>W.schools),{toast:h}=Zs();console.log("RoutesPage render - routes:",t==null?void 0:t.length,"loading:",s,"error:",n),console.log("Routes data:",t),console.log("SchoolId from localStorage:",localStorage.getItem("schoolId")),console.log("User data:",d);const[p,f]=x.useState(!1),[y,g]=x.useState(""),[j,v]=x.useState(""),[w,N]=x.useState(!1),[C,k]=x.useState(null),[O,R]=x.useState(null),[E,I]=x.useState([]),[D,P]=x.useState(""),A=x.useRef(null),$=x.useRef(null),U=x.useRef(null),[de,se]=x.useState([]),[ge,V]=x.useState(!1),[K,J]=x.useState(""),[ie,T]=x.useState("all"),[F,M]=x.useState(1),[G]=x.useState(10),[ee,te]=x.useState(null),[me,ue]=x.useState(!1),[ce,Ce]=x.useState(!1),[Ue,Ge]=x.useState(!1),[gt,Se]=x.useState(!1),[ne,jt]=x.useState(!1),[dt,et]=x.useState(!1),[Q,he]=x.useState(null),[xe,De]=x.useState(!1),[Be,Fe]=x.useState(null),[st,_t]=x.useState({}),[pe,X]=x.useState(""),[ae,ve]=x.useState(""),[Ie,ze]=x.useState("");u!=null&&u.filter(W=>W&&W.admin===(d==null?void 0:d.id));const nt=localStorage.getItem("schoolId");console.log("school",d,nt);const Ze=(a==null?void 0:a.filter(W=>W&&W.school===parseInt(nt||"0")))||[],ft=new Set((o==null?void 0:o.map(W=>W==null?void 0:W.student))||[]),$t=Ze.filter(W=>!ft.has(W.id)),It=$t.filter(W=>{var Ye,kt,Vt;if(!pe)return!0;const Ae=pe.toLowerCase();return((Ye=W.first_name)==null?void 0:Ye.toLowerCase().includes(Ae))||((kt=W.last_name)==null?void 0:kt.toLowerCase().includes(Ae))||((Vt=W.admission_number)==null?void 0:Vt.toLowerCase().includes(Ae))||`${W.first_name} ${W.last_name}`.toLowerCase().includes(Ae)}),fr=(t||[]).filter(W=>{var Ye,kt,Vt;if(!ae)return!0;const Ae=ae.toLowerCase();return((Ye=W.name)==null?void 0:Ye.toLowerCase().includes(Ae))||((kt=W.total_distance)==null?void 0:kt.toString().includes(Ae))||((Vt=W.estimated_duration)==null?void 0:Vt.toLowerCase().includes(Ae))}),yt=(i==null?void 0:i.filter(W=>W&&W.school===parseInt(nt||"0")))||[],sr=yt.filter(W=>{if(!Ie)return!0;const Ae=Ie.toLowerCase(),Ye=`${W.user_details.first_name||""} ${W.user_details.last_name||""}`.toLowerCase(),kt=(W.phone_number||"").toLowerCase();return Ye.includes(Ae)||kt.includes(Ae)}),Xt=W=>{if(!W)return"N/A";const Ae=l.find(Ye=>Ye.id===Number(W));return Ae?Ae.name:`Grade ${W}`},zt=async W=>{const Ae=t==null?void 0:t.find(Ye=>Ye.id===W);if(Ae){console.log("Selected route:",Ae);try{const Ye=await e(_h(W)).unwrap();console.log("Fetched route stops from API:",Ye),se(Ye.map((kt,Vt)=>({id:kt.id||Vt+1,name:kt.name||`Stop ${Vt+1}`,lat:kt.lat||0,lng:kt.lng||0,sequence:kt.sequence_number||Vt+1,is_pickup:kt.is_pickup,is_dropoff:kt.is_dropoff})))}catch(Ye){console.error("Error fetching route stops:",Ye),se([]),h({title:"Error",description:"Failed to fetch route stops",variant:"destructive"})}}else se([])},Ct=W=>{if(!W)return"N/A";const Ae=yt.find(Ye=>Ye.id===W);return Ae?`${Ae.user_details.first_name} ${Ae.user_details.last_name}`:"Unknown Driver"};console.log("All drivers:",i),console.log("Filtered drivers for school",nt,":",yt);const Ne=(t==null?void 0:t.filter(W=>{var kt,Vt;if(!W)return!1;const Ae=((kt=W.name)==null?void 0:kt.toLowerCase().includes(K.toLowerCase()))||((Vt=W.schedule_days)==null?void 0:Vt.some(Ht=>Ht==null?void 0:Ht.toLowerCase().includes(K.toLowerCase()))),Ye=ie==="all"||ie==="active"&&W.is_active||ie==="inactive"&&!W.is_active;return Ae&&Ye}))||[],lt=Math.ceil(Ne.length/G),vt=(F-1)*G,Qt=vt+G,Zr=Ne.slice(vt,Qt);x.useEffect(()=>{M(1)},[K,ie]);const Ut=W=>{W&&(te(W),ue(!0))},nn=W=>{W&&(te(W),k(W.total_distance||0),R(W.estimated_duration||"00:00:00"),Pe.reset({name:W.name||"",school:W.school||parseInt(nt||"1"),driver:W.driver||0,start_lat:W.start_lat||0,start_lng:W.start_lng||0,end_lat:W.end_lat||0,end_lng:W.end_lng||0,total_distance:W.total_distance||0,estimated_duration:W.estimated_duration||"00:00:00",is_active:W.is_active??!0,schedule_days:W.schedule_days||["monday","tuesday","wednesday","thursday","friday"],traffic_factor:W.traffic_factor||1.3,path:W.path||JSON.stringify({type:"LineString",coordinates:[[0,0],[0,0]]})}),Ce(!0))},un=W=>{W&&(te(W),Ge(!0))},Ps=W=>{W&&(he(W),et(!0))},ds=W=>{W&&(Fe(W),De(!0))},Xr=async W=>{try{const Ae=await e(_h(W)).unwrap();_t(Ye=>({...Ye,[W]:Ae.length}))}catch(Ae){console.error(`Error fetching stops count for route ${W}:`,Ae),_t(Ye=>({...Ye,[W]:0}))}},Os=(W,Ae,Ye)=>{console.log("Adding stop:",{name:W,lat:Ae,lng:Ye});const kt={name:W,lat:Ae,lng:Ye,sequence:E.length+1};console.log("New stop object:",kt),console.log("Current routeStops before adding:",E),I(Vt=>{const Ht=[...Vt,kt];return console.log("Updated routeStops:",Ht),Ht}),P("")},Li=W=>{const Ye=E.filter((kt,Vt)=>Vt!==W).map((kt,Vt)=>({...kt,sequence:Vt+1}));I(Ye)},wa=async()=>{try{if(!ee){h({title:"Error",description:"No route selected for deletion",variant:"destructive"});return}const W=localStorage.getItem("schoolId");if(!W){h({title:"Error",description:"No school found for the current admin",variant:"destructive"});return}await e(Yx(ee.id)).unwrap(),h({title:"Success",description:"Route deleted successfully"}),W&&(e(Co({schoolId:parseInt(W)})),e(Xa({schoolId:parseInt(W)})),e(Ln())),Ge(!1),te(null)}catch(W){console.error("Delete route error:",W);let Ae="Failed to delete route";W instanceof Error?Ae=W.message:typeof W=="string"&&(Ae=W),h({title:"Error",description:Ae,variant:"destructive"})}},Pe=yv({resolver:bv(cZ),defaultValues:{name:"",school:parseInt(nt||"1"),driver:0,start_lat:0,start_lng:0,end_lat:0,end_lng:0,total_distance:0,estimated_duration:"00:00:00",is_active:!0,schedule_days:["monday","tuesday","wednesday","thursday","friday"],traffic_factor:1.3,path:JSON.stringify({type:"LineString",coordinates:[[0,0],[0,0]]})}}),We=yv({resolver:bv(dZ),defaultValues:{student:0,route:0,pickup_stop:null,dropoff_stop:null,is_active:!0,schedule_days:["monday","tuesday","wednesday","thursday","friday"]}});x.useEffect(()=>{const W=localStorage.getItem("schoolId");return console.log("Routes useEffect - schoolId:",W),W?(console.log("Dispatching fetchRoutes with schoolId:",parseInt(W)),(!t||t.length===0)&&e(Co({schoolId:parseInt(W)})),e(Xa({schoolId:parseInt(W)})),e(Ln()),e(Hm({schoolId:parseInt(W)})),e(ko({schoolId:parseInt(W)}))):console.log("No schoolId found in localStorage"),h({title:"Routes Page Loaded",description:"Notifications are working correctly!"}),()=>{}},[]),x.useEffect(()=>{t&&t.length>0&&t.forEach(W=>{W.id&&!st[W.id]&&Xr(W.id)})},[t]),x.useEffect(()=>{const W=document.createElement("script");return W.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA4HtS4auqymgQwjbXKXRr1tyBEVFAyOzs&libraries=places",W.async=!0,W.defer=!0,W.onload=()=>{if(f(!0),A.current&&$.current){const Ae=new google.maps.places.Autocomplete(A.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}}),Ye=new google.maps.places.Autocomplete($.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}}),kt=document.createElement("style");if(kt.textContent=`
          .pac-container {
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border: 1px solid #e5e7eb;
            background-color: white;
            z-index: 1000;
            max-height: 300px;
            overflow-y: auto;
          }
          .pac-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            font-size: 0.875rem;
            line-height: 1.25rem;
            border-bottom: 1px solid #f3f4f6;
            transition: background-color 0.2s;
          }
          .pac-item:last-child {
            border-bottom: none;
          }
          .pac-item:hover {
            background-color: #f3f4f6;
          }
          .pac-item-query {
            font-size: 0.875rem;
            color: #1f2937;
            font-weight: 500;
          }
          .pac-icon {
            margin-right: 0.75rem;
            color: #6b7280;
          }
          .pac-matched {
            font-weight: 600;
            color: #2563eb;
          }
        `,document.head.appendChild(kt),Ae.addListener("place_changed",()=>{var jr,Xs;const Ht=Ae.getPlace();if(Ht.geometry){const hn=((jr=Ht.geometry.location)==null?void 0:jr.lat())||0,Es=((Xs=Ht.geometry.location)==null?void 0:Xs.lng())||0;Pe.setValue("start_lat",hn),Pe.setValue("start_lng",Es);const Ls=Ht.name||Ht.formatted_address||"";g(Ls)}}),Ye.addListener("place_changed",()=>{var jr,Xs;const Ht=Ye.getPlace();if(Ht.geometry){const hn=((jr=Ht.geometry.location)==null?void 0:jr.lat())||0,Es=((Xs=Ht.geometry.location)==null?void 0:Xs.lng())||0;Pe.setValue("end_lat",hn),Pe.setValue("end_lng",Es);const Ls=Ht.name||Ht.formatted_address||"";if(v(Ls),y){N(!0);const Go=new google.maps.DirectionsService,Ko=new google.maps.Geocoder;Promise.all([new Promise((Sn,ui)=>{Ko.geocode({address:y},(Cr,Ua)=>{Ua==="OK"&&(Cr!=null&&Cr[0])?Sn(Cr[0].geometry.location):ui(new Error("Could not geocode start location"))})}),new Promise((Sn,ui)=>{Ko.geocode({address:Ls},(Cr,Ua)=>{Ua==="OK"&&(Cr!=null&&Cr[0])?Sn(Cr[0].geometry.location):ui(new Error("Could not geocode end location"))})})]).then(([Sn,ui])=>{Go.route({origin:Sn,destination:ui,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC},(Cr,Ua)=>{var ho,qa;if(N(!1),Ua==="OK"&&Cr){const fo=Cr.routes[0],ud=((ho=fo.legs[0].distance)==null?void 0:ho.value)||0,_n=((qa=fo.legs[0].duration)==null?void 0:qa.value)||0,hi=Math.round(ud/1e3*100)/100,fn=Math.floor(_n/3600),Yo=Math.floor(_n%3600/60),Va=_n%60,Nu=`${fn.toString().padStart(2,"0")}:${Yo.toString().padStart(2,"0")}:${Va.toString().padStart(2,"0")}`;k(hi),R(Nu),Pe.setValue("total_distance",hi),Pe.setValue("estimated_duration",Nu)}else N(!1),h({title:"Error",description:"Could not calculate route. Please check if the locations are valid and try again.",variant:"destructive"})})}).catch(Sn=>{N(!1),h({title:"Error",description:Sn.message||"Could not calculate route. Please check the locations and try again.",variant:"destructive"})})}}}),A.current.addEventListener("keydown",Ht=>{Ht.key==="Enter"&&Ht.preventDefault()}),$.current.addEventListener("keydown",Ht=>{Ht.key==="Enter"&&Ht.preventDefault()}),U.current){const Ht=new google.maps.places.Autocomplete(U.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}});Ht.addListener("place_changed",()=>{var Xs,hn;console.log("Autocomplete place_changed event triggered");const jr=Ht.getPlace();if(console.log("Selected place:",jr),jr.geometry){(Xs=jr.geometry.location)!=null&&Xs.lat(),(hn=jr.geometry.location)!=null&&hn.lng();const Es=jr.name||jr.formatted_address||"";console.log("Setting stopSearchTerm to:",Es),P(Es),U.current&&(U.current.value=Es),setTimeout(()=>{U.current&&U.current.blur()},100)}else console.log("No geometry found for selected place")})}const Vt=new MutationObserver(Ht=>{Ht.forEach(jr=>{jr.addedNodes.length&&document.querySelectorAll(".pac-item").forEach(hn=>{hn.addEventListener("click",Es=>{Es.preventDefault(),Es.stopPropagation()})})})});return Vt.observe(document.body,{childList:!0,subtree:!0}),()=>{Vt.disconnect()}}},document.head.appendChild(W),()=>{document.head.removeChild(W)}},[y]);const wt=async W=>{const Ae=localStorage.getItem("schoolId");if(!Ae){h({title:"Error",description:"No school found for the current admin",variant:"destructive"});return}try{let Ye;if(E.length>0){const Ht=E.map(jr=>[jr.lng,jr.lat]);Ye=JSON.stringify({type:"LineString",coordinates:Ht})}else Ye=JSON.stringify({type:"LineString",coordinates:[[W.start_lng,W.start_lat],[W.end_lng,W.end_lat]]});const kt={name:W.name,school:parseInt(Ae||"1"),driver:W.driver,start_lat:W.start_lat,start_lng:W.start_lng,end_lat:W.end_lat,end_lng:W.end_lng,total_distance:W.total_distance,estimated_duration:W.estimated_duration,is_active:W.is_active,schedule_days:W.schedule_days,traffic_factor:W.traffic_factor,path:Ye},Vt=await e(Kx(kt)).unwrap();h({title:"Success",description:"Route added successfully"}),Ae&&(e(Co({schoolId:parseInt(Ae)})),e(Xa({schoolId:parseInt(Ae)})),e(Ln())),Se(!1),Pe.reset(),g(""),v(""),k(null),R(null),N(!1),I([]),P("")}catch(Ye){console.error("Route creation error:",Ye);let kt="Failed to add route";if(Ye instanceof Error)try{const Vt=JSON.parse(Ye.message);typeof Vt=="object"&&Vt!==null?kt=JSON.stringify(Vt,null,2):kt=Ye.message}catch{kt=Ye.message}else kt=String(Ye);h({title:"Error",description:kt,variant:"destructive"})}},nr=async W=>{if(!(ee!=null&&ee.id)){h({title:"Error",description:"No route selected for update",variant:"destructive"});return}const Ae=localStorage.getItem("schoolId");if(!Ae){h({title:"Error",description:"No school found for the current admin",variant:"destructive"});return}try{let Ye;if(E.length>0){const Vt=E.map(Ht=>[Ht.lng,Ht.lat]);Ye=JSON.stringify({type:"LineString",coordinates:Vt})}else Ye=JSON.stringify({type:"LineString",coordinates:[[W.start_lng,W.start_lat],[W.end_lng,W.end_lat]]});const kt={name:W.name,school:parseInt(Ae||"1"),driver:W.driver,start_lat:W.start_lat,start_lng:W.start_lng,end_lat:W.end_lat,end_lng:W.end_lng,total_distance:W.total_distance,estimated_duration:W.estimated_duration,is_active:W.is_active,schedule_days:W.schedule_days,traffic_factor:W.traffic_factor,path:Ye};await e(Jx({id:ee.id,routeData:kt})).unwrap(),h({title:"Success",description:"Route updated successfully"}),Ae&&(e(Co({schoolId:parseInt(Ae)})),e(Xa({schoolId:parseInt(Ae)})),e(Ln())),Ce(!1),te(null),Pe.reset(),g(""),v(""),k(null),R(null),N(!1),I([]),P("")}catch(Ye){console.error("Route update error:",Ye);let kt="Failed to update route";if(Ye instanceof Error)try{const Vt=JSON.parse(Ye.message);typeof Vt=="object"&&Vt!==null?kt=JSON.stringify(Vt,null,2):kt=Ye.message}catch{kt=Ye.message}else kt=String(Ye);h({title:"Error",description:kt,variant:"destructive"})}},vr=async W=>{try{const Ae={student:W.student,route:W.route,pickup_stop:W.pickup_stop,dropoff_stop:W.dropoff_stop,is_active:W.is_active,schedule_days:W.schedule_days};await e(Xx(Ae)).unwrap(),h({title:"Success",description:"Route assigned to student successfully"}),jt(!1),We.reset(),se([])}catch(Ae){console.error("Route assignment error:",Ae);let Ye="Failed to assign route to student";if(Ae instanceof Error)try{const kt=JSON.parse(Ae.message);typeof kt=="object"&&kt!==null?Ye=JSON.stringify(kt,null,2):Ye=Ae.message}catch{Ye=Ae.message}else Ye=String(Ae);h({title:"Error",description:Ye,variant:"destructive"})}},Er=()=>{const W=localStorage.getItem("schoolId");W&&(console.log("Manual refresh triggered"),e(Co({schoolId:parseInt(W)})),e(Xa({schoolId:parseInt(W)})),e(Ln()),e(Hm({schoolId:parseInt(W)})),e(ko({schoolId:parseInt(W)})),h({title:"Refreshing",description:"Data is being refreshed..."}))};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsx("main",{className:"flex-1 px-2 sm:px-1 py-0 w-full max-w-[98vw] mx-auto",children:r.jsxs(Me,{className:"bg-white shadow-lg border-0 rounded-xl",children:[r.jsxs(Ke,{className:"border-b border-gray-100 flex flex-row w-full items-center justify-between py-4",children:[r.jsxs(Je,{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(av,{className:"w-6 h-6 text-green-500"}),"Routes List"]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(fe,{variant:"outline",onClick:Er,disabled:s,className:"flex items-center gap-2",children:[r.jsx(iv,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]}),r.jsxs(Hr,{open:ne,onOpenChange:W=>{jt(W),W||(We.reset(),X(""),ve(""),se([]))},children:[r.jsx(nu,{asChild:!0,children:r.jsxs(fe,{variant:"outline",className:"flex items-center gap-2",children:[r.jsx(hr,{className:"h-4 w-4"}),"Assign Route to Student"]})}),r.jsxs(Or,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(Mr,{children:[r.jsx($r,{children:"Assign Route to Student"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[$t.length," students available for route assignment",ft.size>0&&r.jsxs("span",{className:"text-amber-600",children:[" ","(",ft.size," already assigned)"]})]})]}),r.jsx(tp,{...We,children:r.jsxs("form",{onSubmit:We.handleSubmit(vr),className:"space-y-4",children:[r.jsx(os,{control:We.control,name:"student",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Select Student"}),r.jsxs(Jt,{onValueChange:Ae=>W.onChange(parseInt(Ae)),value:W.value.toString(),children:[r.jsx(Jr,{children:r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Choose a student"})})}),r.jsxs(Kt,{children:[r.jsxs("div",{className:"flex items-center px-3 pb-2",children:[r.jsx(Ws,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx("input",{placeholder:"Search students...",value:pe,onChange:Ae=>X(Ae.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:It.length===0?r.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:pe?"No unassigned students found matching your search":"No unassigned students available"}):It.map(Ae=>{var Ye;return r.jsx(Re,{value:((Ye=Ae.id)==null?void 0:Ye.toString())||"",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{className:"font-medium",children:[Ae.first_name," ",Ae.last_name]}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ae.admission_number," -"," ",Xt(Ae.grade)]})]})},Ae.id)})})]})]}),r.jsx(Bs,{})]})}),r.jsx(os,{control:We.control,name:"route",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Select Route"}),r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Choose a route to see available stops for pickup and dropoff"}),r.jsxs(Jt,{onValueChange:Ae=>{const Ye=parseInt(Ae);W.onChange(Ye),zt(Ye)},value:W.value.toString(),children:[r.jsx(Jr,{children:r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Choose a route"})})}),r.jsxs(Kt,{children:[r.jsxs("div",{className:"flex items-center px-3 pb-2",children:[r.jsx(Ws,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx("input",{placeholder:"Search routes by name, distance, or duration...",value:ae,onChange:Ae=>ve(Ae.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:fr.length===0?r.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:ae?"No routes found matching your search":"No routes available"}):fr.map(Ae=>{var Ye;return r.jsx(Re,{value:((Ye=Ae.id)==null?void 0:Ye.toString())||"",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:Ae.name}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ae.total_distance,"km -"," ",Ae.estimated_duration," -"," ",Ct(Ae.driver)]})]})},Ae.id)})})]})]}),r.jsx(Bs,{})]})}),ge&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(le,{className:"text-base font-semibold",children:"Route Stops"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),"Loading stops..."]})]})}),de.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs(le,{className:"text-base font-semibold",children:["Route Stops (",de.length," stops found)"]})}),r.jsx("div",{className:"space-y-4",children:r.jsx(os,{control:We.control,name:"pickup_stop",render:({field:W})=>{var Ae;return r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Route Stop"}),r.jsxs(Jt,{onValueChange:Ye=>{const kt=parseInt(Ye);W.onChange(kt),We.setValue("dropoff_stop",kt)},value:((Ae=W.value)==null?void 0:Ae.toString())||"",children:[r.jsx(Jr,{children:r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select route stop"})})}),r.jsx(Kt,{children:de.map(Ye=>r.jsx(Re,{value:Ye.id.toString(),children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:Ye.name}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:["Stop ",Ye.sequence]})]})},Ye.id))})]}),r.jsx(Bs,{}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This stop will be used for both pickup and dropoff"})]})}})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-sm font-medium",children:"Route Stops Preview"}),r.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-lg p-3 bg-gray-50",children:de.map(W=>r.jsxs("div",{className:"flex items-center space-x-3 py-2 border-b border-gray-100 last:border-b-0",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-blue-600",children:W.sequence})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:W.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Coordinates: ",W.lat.toFixed(6),","," ",W.lng.toFixed(6)]}),r.jsxs("div",{className:"flex gap-1 mt-1",children:[W.is_pickup&&r.jsx(Te,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:"Pickup"}),W.is_dropoff&&r.jsx(Te,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:"Dropoff"})]})]}),r.jsxs("div",{className:"text-xs text-gray-400",children:["Stop ",W.sequence]})]},W.id))}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select pickup and dropoff stops from the options above to assign to the student."})]})]}),!ge&&de.length===0&&We.watch("route")&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx(le,{className:"text-base font-semibold",children:"Route Stops"})}),r.jsx("div",{className:"p-4 border rounded-lg bg-amber-50 border-amber-200",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-amber-500 rounded-full"}),r.jsx("span",{className:"text-sm text-amber-700",children:"No stops found for this route. The route may not have path coordinates defined."})]})})]}),r.jsx(os,{control:We.control,name:"is_active",render:({field:W})=>r.jsxs(Fr,{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsx("div",{className:"space-y-0.5",children:r.jsx(Tr,{children:"Active Status"})}),r.jsx(Jr,{children:r.jsx(ts,{checked:W.value,onCheckedChange:W.onChange})})]})}),r.jsx(os,{control:We.control,name:"schedule_days",render:()=>r.jsxs(Fr,{children:[r.jsx("div",{className:"mb-4",children:r.jsx(Tr,{children:"Schedule Days"})}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(W=>r.jsx(os,{control:We.control,name:"schedule_days",render:({field:Ae})=>{var Ye;return r.jsxs(Fr,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(Jr,{children:r.jsx(Oh,{checked:(Ye=Ae.value)==null?void 0:Ye.includes(W),onCheckedChange:kt=>{var Vt;return kt?Ae.onChange([...Ae.value,W]):Ae.onChange((Vt=Ae.value)==null?void 0:Vt.filter(Ht=>Ht!==W))}})}),r.jsx(Tr,{className:"font-normal capitalize",children:W})]},W)}},W))}),r.jsx(Bs,{})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{type:"submit",className:"bg-green-500 hover:bg-green-600",children:"Assign Route"})})]})})]})]}),r.jsxs(Hr,{open:gt,onOpenChange:W=>{Se(W),W||(Pe.reset(),g(""),v(""),k(null),R(null),N(!1),ze(""))},children:[r.jsx(nu,{asChild:!0,children:r.jsx(fe,{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-2 rounded-lg shadow",onClick:()=>Se(!0),children:"Add New Route"})}),r.jsxs(Or,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Add New Route"})}),r.jsx(tp,{...Pe,children:r.jsxs("form",{onSubmit:Pe.handleSubmit(wt),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(os,{control:Pe.control,name:"name",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Route Name"}),r.jsx(Jr,{children:r.jsx(Oe,{placeholder:"Enter route name",...W})}),r.jsx(Bs,{})]})}),r.jsx(os,{control:Pe.control,name:"driver",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Select Driver"}),r.jsxs(Jt,{onValueChange:Ae=>W.onChange(parseInt(Ae)),value:W.value.toString(),disabled:sr.length===0,children:[r.jsx(Jr,{children:r.jsx(Gt,{children:r.jsx(Zt,{placeholder:sr.length===0?"No drivers available":"Choose a driver"})})}),r.jsxs(Kt,{children:[r.jsxs("div",{className:"flex items-center px-3 pb-2",children:[r.jsx(Ws,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx("input",{placeholder:"Search drivers by name or phone...",value:Ie,onChange:Ae=>ze(Ae.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:sr.length===0?r.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:Ie?"No drivers found matching your search":"No drivers available for this school"}):sr.map(Ae=>{var Ye;return r.jsx(Re,{value:((Ye=Ae.id)==null?void 0:Ye.toString())||"",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{className:"font-medium",children:[Ae.user_details.first_name," ",Ae.user_details.last_name]}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ae.phone_number||"No phone"," ","- ",Ae.license_number]})]})},Ae.id)})})]})]}),r.jsx(Bs,{}),yt.length===0&&r.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"No drivers are available for this school. Please add drivers first."})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Start Location"}),r.jsx(Jr,{children:r.jsx(Oe,{ref:A,placeholder:"Type to search for a location",value:y,onChange:W=>g(W.target.value),className:"w-full",autoComplete:"off"})})]}),r.jsxs(Fr,{children:[r.jsx(Tr,{children:"End Location"}),r.jsx(Jr,{children:r.jsx(Oe,{ref:$,placeholder:"Type to search for a location",value:j,onChange:W=>v(W.target.value),className:"w-full",autoComplete:"off"})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(os,{control:Pe.control,name:"total_distance",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Total Distance (km)"}),r.jsx(Jr,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Oe,{type:"number",step:"0.01",min:"0",value:C??W.value,onChange:Ae=>{const Ye=parseFloat(Ae.target.value);k(Ye),W.onChange(Ye)},disabled:w}),w&&r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),r.jsx(Bs,{})]})}),r.jsx(os,{control:Pe.control,name:"estimated_duration",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Estimated Duration (HH:MM:SS)"}),r.jsx(Jr,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Oe,{type:"text",value:O??W.value,onChange:Ae=>{R(Ae.target.value),W.onChange(Ae.target.value)},disabled:w,placeholder:"00:00:00",pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"}),w&&r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),r.jsx(Bs,{})]})})]}),r.jsx(os,{control:Pe.control,name:"is_active",render:({field:W})=>r.jsxs(Fr,{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsx("div",{className:"space-y-0.5",children:r.jsx(Tr,{children:"Active Status"})}),r.jsx(Jr,{children:r.jsx(ts,{checked:W.value,onCheckedChange:W.onChange})})]})}),r.jsx(os,{control:Pe.control,name:"schedule_days",render:()=>r.jsxs(Fr,{children:[r.jsx("div",{className:"mb-4",children:r.jsx(Tr,{children:"Schedule Days"})}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(W=>r.jsx(os,{control:Pe.control,name:"schedule_days",render:({field:Ae})=>{var Ye;return r.jsxs(Fr,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(Jr,{children:r.jsx(Oh,{checked:(Ye=Ae.value)==null?void 0:Ye.includes(W),onCheckedChange:kt=>{var Vt;return kt?Ae.onChange([...Ae.value,W]):Ae.onChange((Vt=Ae.value)==null?void 0:Vt.filter(Ht=>Ht!==W))}})}),r.jsx(Tr,{className:"font-normal capitalize",children:W})]},W)}},W))}),r.jsx(Bs,{})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{type:"submit",className:"bg-green-500 hover:bg-green-600",children:"Create Route"})})]})})]})]})]})]}),r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(Oe,{placeholder:"Search routes by name or schedule days...",value:K,onChange:W=>J(W.target.value),className:"pl-10"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vo,{className:"h-4 w-4 text-gray-400"}),r.jsxs(Jt,{value:ie,onValueChange:T,children:[r.jsx(Gt,{className:"w-[180px]",children:r.jsx(Zt,{placeholder:"Filter by status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Routes"}),r.jsx(Re,{value:"active",children:"Active"}),r.jsx(Re,{value:"inactive",children:"Inactive"})]})]}),r.jsx(ju,{data:{headers:["Route Name","Driver","Start Location","End Location","Distance (km)","Duration","Schedule Days","Status","Traffic Factor"],data:Ne.map(W=>{var Ae,Ye,kt,Vt,Ht;return{route_name:W.name||"",driver:yt!=null&&yt.find(jr=>jr.id===W.driver)?`${((Ae=yt.find(jr=>jr.id===W.driver))==null?void 0:Ae.user_details.first_name)||""} ${((Ye=yt.find(jr=>jr.id===W.driver))==null?void 0:Ye.user_details.last_name)||""}`:"Not Assigned",start_location:`${W.start_lat}, ${W.start_lng}`,end_location:`${W.end_lat}, ${W.end_lng}`,distance:((kt=W.total_distance)==null?void 0:kt.toString())||"",duration:W.estimated_duration||"",schedule_days:((Vt=W.schedule_days)==null?void 0:Vt.join(", "))||"",status:W.is_active?"Active":"Inactive",traffic_factor:((Ht=W.traffic_factor)==null?void 0:Ht.toString())||""}}),fileName:"routes_export",title:"Routes Directory"},className:"border-gray-200 hover:bg-gray-50 px-3 py-2"})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Route Name"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Driver"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Distance"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Schedule"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Route Stops"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:s?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-8 text-center",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"}),r.jsx("span",{className:"text-gray-600 font-medium",children:"Loading routes..."})]})})}):n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-8 text-center",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("div",{className:"w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})}),r.jsx("span",{className:"text-red-600 font-medium",children:n})]})})}):(t==null?void 0:t.length)===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(av,{className:"w-8 h-8 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 font-medium",children:s?"Loading routes...":"No routes found"}),r.jsx("p",{className:"text-gray-500 text-sm",children:s?"Please wait while we fetch your routes":"Create your first route to get started"}),!s&&r.jsxs(fe,{onClick:Er,variant:"outline",size:"sm",className:"mt-2",children:[r.jsx(iv,{className:"w-4 h-4 mr-2"}),"Refresh Data"]})]})]})})}):Zr.map((W,Ae)=>{var Ye,kt,Vt,Ht,jr,Xs,hn,Es;return W?r.jsxs("tr",{className:`hover:bg-gray-50 transition-colors duration-200 ${Ae%2===0?"bg-white":"bg-gray-50/50"}`,children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:W.name}),r.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",W.id]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:r.jsx("span",{className:"text-xs font-medium text-blue-600",children:((kt=(Ye=yt==null?void 0:yt.find(Ls=>Ls.id===W.driver))==null?void 0:Ye.user_details.first_name)==null?void 0:kt.charAt(0))||"?"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[((Vt=yt==null?void 0:yt.find(Ls=>Ls.id===W.driver))==null?void 0:Vt.user_details.first_name)||"Not Assigned"," ",((Ht=yt==null?void 0:yt.find(Ls=>Ls.id===W.driver))==null?void 0:Ht.user_details.last_name)||""]}),r.jsx("div",{className:"text-xs text-gray-500",children:((jr=yt==null?void 0:yt.find(Ls=>Ls.id===W.driver))==null?void 0:jr.license_number)||"No license"})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:r.jsx("span",{className:"text-xs font-medium text-purple-600",children:((Xs=W.total_distance)==null?void 0:Xs.toString().charAt(0))||"0"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[W.total_distance," km"]}),r.jsx("div",{className:"text-xs text-gray-500",children:W.estimated_duration})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[(hn=W.schedule_days)==null?void 0:hn.slice(0,3).map(Ls=>r.jsx(Te,{variant:"outline",className:"text-xs px-2 py-1 bg-blue-50 text-blue-700 border-blue-200",children:Ls.slice(0,3)},Ls)),((Es=W.schedule_days)==null?void 0:Es.length)>3&&r.jsxs(Te,{variant:"outline",className:"text-xs px-2 py-1 bg-gray-50 text-gray-600 border-gray-200",children:["+",W.schedule_days.length-3]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>ds(W),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50",children:[r.jsx(Ks,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"View Stops"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(Te,{variant:W.is_active?"default":"secondary",className:`${W.is_active?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200"} font-medium`,children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${W.is_active?"bg-green-500":"bg-gray-400"}`}),r.jsx("span",{children:W.is_active?"Active":"Inactive"})]})})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-gray-100 rounded-full",children:r.jsx(to,{className:"h-4 w-4 text-gray-600"})})}),r.jsxs(wn,{align:"end",className:"w-48",children:[r.jsxs(Wt,{onClick:()=>Ut(W),className:"cursor-pointer",children:[r.jsx(ls,{className:"h-4 w-4 mr-2 text-blue-600"}),r.jsx("span",{children:"View Details"})]}),r.jsxs(Wt,{onClick:()=>nn(W),className:"cursor-pointer",children:[r.jsx(na,{className:"h-4 w-4 mr-2 text-green-600"}),r.jsx("span",{children:"Edit Route"})]}),r.jsxs(Wt,{onClick:()=>Ps(W),className:"cursor-pointer",children:[r.jsx(Ks,{className:"h-4 w-4 mr-2 text-purple-600"}),r.jsx("span",{children:"Add Route Stop"})]}),r.jsxs(Wt,{onClick:()=>un(W),className:"cursor-pointer text-red-600 focus:text-red-600",children:[r.jsx(Da,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"Delete Route"})]})]})]})})]},W.id):null})})]})}),r.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",vt+1,"-",Math.min(Qt,Ne.length)," of"," ",Ne.length," routes",K&&` matching "${K}"`,ie!=="all"&&` (${ie})`]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>M(F-1),disabled:F===1,children:[r.jsx(cf,{className:"h-4 w-4"}),"Previous"]}),r.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:lt},(W,Ae)=>Ae+1).map(W=>r.jsx(fe,{variant:F===W?"default":"outline",size:"sm",onClick:()=>M(W),className:"w-8 h-8 p-0",children:W},W))}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>M(F+1),disabled:F===lt,children:["Next",r.jsx(ru,{className:"h-4 w-4"})]})]})]})]})})}),r.jsx(Hr,{open:me,onOpenChange:ue,children:r.jsxs(Or,{className:"max-w-2xl",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Route Details"})}),ee&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Route Name"}),r.jsx("p",{children:ee.name})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Status"}),r.jsx(Te,{variant:ee.is_active?"default":"secondary",children:ee.is_active?"Active":"Inactive"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Driver"}),r.jsxs("p",{children:[(as=yt==null?void 0:yt.find(W=>W.id===ee.driver))==null?void 0:as.user_details.first_name," ",(_r=yt==null?void 0:yt.find(W=>W.id===ee.driver))==null?void 0:_r.user_details.last_name]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Total Distance"}),r.jsxs("p",{children:[ee.total_distance," km"]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Estimated Duration"}),r.jsx("p",{children:ee.estimated_duration})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Traffic Factor"}),r.jsxs("p",{children:[ee.traffic_factor,"x"]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Schedule Days"}),r.jsx("div",{className:"flex gap-1 mt-1",children:ee.schedule_days.map(W=>r.jsx(Te,{variant:"outline",className:"capitalize",children:W},W))})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Coordinates"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-sm text-gray-600",children:"Start Point"}),r.jsxs("p",{className:"text-sm",children:["Lat: ",ee.start_lat,", Lng:"," ",ee.start_lng]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-sm text-gray-600",children:"End Point"}),r.jsxs("p",{className:"text-sm",children:["Lat: ",ee.end_lat,", Lng: ",ee.end_lng]})]})]})]})]})]})}),r.jsx(Hr,{open:ce,onOpenChange:W=>{Ce(W),W||(te(null),Pe.reset(),g(""),v(""),k(null),R(null),N(!1),ze(""))},children:r.jsxs(Or,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Edit Route"})}),r.jsx(tp,{...Pe,children:r.jsxs("form",{onSubmit:Pe.handleSubmit(nr),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(os,{control:Pe.control,name:"name",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Route Name"}),r.jsx(Jr,{children:r.jsx(Oe,{placeholder:"Enter route name",...W})}),r.jsx(Bs,{})]})}),r.jsx(os,{control:Pe.control,name:"driver",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Select Driver"}),r.jsxs(Jt,{onValueChange:Ae=>W.onChange(parseInt(Ae)),value:W.value.toString(),disabled:sr.length===0,children:[r.jsx(Jr,{children:r.jsx(Gt,{children:r.jsx(Zt,{placeholder:sr.length===0?"No drivers available":"Choose a driver"})})}),r.jsxs(Kt,{children:[r.jsxs("div",{className:"flex items-center px-3 pb-2",children:[r.jsx(Ws,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx("input",{placeholder:"Search drivers by name or phone...",value:Ie,onChange:Ae=>ze(Ae.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:sr.length===0?r.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:Ie?"No drivers found matching your search":"No drivers available for this school"}):sr.map(Ae=>{var Ye;return r.jsx(Re,{value:((Ye=Ae.id)==null?void 0:Ye.toString())||"",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{className:"font-medium",children:[Ae.user_details.first_name," ",Ae.user_details.last_name]}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ae.phone_number||"No phone"," -"," ",Ae.license_number]})]})},Ae.id)})})]})]}),r.jsx(Bs,{}),yt.length===0&&r.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"No drivers are available for this school. Please add drivers first."})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Start Location"}),r.jsx(Jr,{children:r.jsx(Oe,{ref:A,placeholder:"Type to search for a location",value:y,onChange:W=>g(W.target.value),className:"w-full",autoComplete:"off"})})]}),r.jsxs(Fr,{children:[r.jsx(Tr,{children:"End Location"}),r.jsx(Jr,{children:r.jsx(Oe,{ref:$,placeholder:"Type to search for a location",value:j,onChange:W=>v(W.target.value),className:"w-full",autoComplete:"off"})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(os,{control:Pe.control,name:"total_distance",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Total Distance (km)"}),r.jsx(Jr,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Oe,{type:"number",step:"0.01",min:"0",value:C??W.value,onChange:Ae=>{const Ye=parseFloat(Ae.target.value);k(Ye),W.onChange(Ye)},disabled:w}),w&&r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),r.jsx(Bs,{})]})}),r.jsx(os,{control:Pe.control,name:"estimated_duration",render:({field:W})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Estimated Duration (HH:MM:SS)"}),r.jsx(Jr,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Oe,{type:"text",value:O??W.value,onChange:Ae=>{R(Ae.target.value),W.onChange(Ae.target.value)},disabled:w,placeholder:"00:00:00",pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"}),w&&r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),r.jsx(Bs,{})]})})]}),r.jsx(os,{control:Pe.control,name:"is_active",render:({field:W})=>r.jsxs(Fr,{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsx("div",{className:"space-y-0.5",children:r.jsx(Tr,{children:"Active Status"})}),r.jsx(Jr,{children:r.jsx(ts,{checked:W.value,onCheckedChange:W.onChange})})]})}),r.jsx(os,{control:Pe.control,name:"schedule_days",render:()=>r.jsxs(Fr,{children:[r.jsx("div",{className:"mb-4",children:r.jsx(Tr,{children:"Schedule Days"})}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(W=>r.jsx(os,{control:Pe.control,name:"schedule_days",render:({field:Ae})=>{var Ye;return r.jsxs(Fr,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(Jr,{children:r.jsx(Oh,{checked:(Ye=Ae.value)==null?void 0:Ye.includes(W),onCheckedChange:kt=>{var Vt;return kt?Ae.onChange([...Ae.value,W]):Ae.onChange((Vt=Ae.value)==null?void 0:Vt.filter(Ht=>Ht!==W))}})}),r.jsx(Tr,{className:"font-normal capitalize",children:W})]},W)}},W))}),r.jsx(Bs,{})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-base font-semibold",children:"Route Stops"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add intermediate stops for this route"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Add Stop"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{ref:U,placeholder:"Search for a location to add as a stop...",value:D,onChange:W=>P(W.target.value),onKeyDown:W=>{W.key==="Enter"&&(W.preventDefault(),W.stopPropagation())},className:"flex-1",autoComplete:"off"}),r.jsx(fe,{type:"button",variant:"outline",onClick:()=>{if(console.log("Add button clicked (edit modal), stopSearchTerm:",D),D.trim()){const W=new google.maps.Geocoder;console.log("Geocoding address (edit modal):",D),W.geocode({address:D},(Ae,Ye)=>{var kt,Vt;if(console.log("Geocoding results (edit modal):",{results:Ae,status:Ye}),Ye==="OK"&&(Ae!=null&&Ae[0])){const Ht=((kt=Ae[0].geometry.location)==null?void 0:kt.lat())||0,jr=((Vt=Ae[0].geometry.location)==null?void 0:Vt.lng())||0;console.log("Found coordinates (edit modal):",{lat:Ht,lng:jr}),Os(D,Ht,jr)}else console.log("Geocoding failed (edit modal):",Ye),h({title:"Error",description:"Could not find coordinates for this location",variant:"destructive"})})}else console.log("stopSearchTerm is empty or whitespace (edit modal)")},disabled:!D.trim(),children:"Add"})]})]}),E.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(le,{children:["Added Stops (",E.length,")"]}),r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border rounded-lg p-3",children:E.map((W,Ae)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-blue-600",children:W.sequence})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:W.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[W.lat.toFixed(6),", ",W.lng.toFixed(6)]})]})]}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>Li(Ae),className:"text-red-500 hover:text-red-700",children:r.jsx(Da,{className:"w-4 h-4"})})]},Ae))})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{type:"submit",className:"bg-green-500 hover:bg-green-600",children:"Update Route"})})]})})]})}),r.jsx(lu,{open:Ue,onOpenChange:Ge,children:r.jsxs(zc,{children:[r.jsxs(Uc,{children:[r.jsx(Vc,{children:"Are you sure?"}),r.jsxs(Hc,{children:["This action cannot be undone. This will permanently delete the route",ee&&` "${ee.name}"`,"."]})]}),r.jsxs(qc,{children:[r.jsx(Gc,{children:"Cancel"}),r.jsx(Wc,{onClick:wa,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),Q&&r.jsx(oZ,{isOpen:dt,onClose:()=>{et(!1),he(null),Q.id&&Xr(Q.id)},routeId:Q.id,routeName:Q.name,currentSequenceNumber:1}),Be&&r.jsx(lZ,{isOpen:xe,onClose:()=>{De(!1),Fe(null)},routeId:Be.id,routeName:Be.name})]})}var n1="Popover",[VR,hre]=xa(n1,[id]),tg=id(),[hZ,dd]=VR(n1),HR=e=>{const{__scopePopover:t,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=tg(t),c=x.useRef(null),[d,u]=x.useState(!1),[h,p]=so({prop:n,defaultProp:a??!1,onChange:i,caller:n1});return r.jsx(My,{...l,children:r.jsx(hZ,{scope:t,contentId:jn(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(f=>!f),[p]),hasCustomAnchor:d,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:o,children:s})})};HR.displayName=n1;var WR="PopoverAnchor",fZ=x.forwardRef((e,t)=>{const{__scopePopover:s,...n}=e,a=dd(WR,s),i=tg(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return x.useEffect(()=>(o(),()=>l()),[o,l]),r.jsx(Jp,{...i,...n,ref:t})});fZ.displayName=WR;var GR="PopoverTrigger",KR=x.forwardRef((e,t)=>{const{__scopePopover:s,...n}=e,a=dd(GR,s),i=tg(s),o=Nr(t,a.triggerRef),l=r.jsx(Ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":QR(a.open),...n,ref:o,onClick:pt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:r.jsx(Jp,{asChild:!0,...i,children:l})});KR.displayName=GR;var Q5="PopoverPortal",[mZ,pZ]=VR(Q5,{forceMount:void 0}),YR=e=>{const{__scopePopover:t,forceMount:s,children:n,container:a}=e,i=dd(Q5,t);return r.jsx(mZ,{scope:t,forceMount:s,children:r.jsx($a,{present:s||i.open,children:r.jsx(Pf,{asChild:!0,container:a,children:n})})})};YR.displayName=Q5;var xf="PopoverContent",JR=x.forwardRef((e,t)=>{const s=pZ(xf,e.__scopePopover),{forceMount:n=s.forceMount,...a}=e,i=dd(xf,e.__scopePopover);return r.jsx($a,{present:n||i.open,children:i.modal?r.jsx(xZ,{...a,ref:t}):r.jsx(vZ,{...a,ref:t})})});JR.displayName=xf;var gZ=Mc("PopoverContent.RemoveScroll"),xZ=x.forwardRef((e,t)=>{const s=dd(xf,e.__scopePopover),n=x.useRef(null),a=Nr(t,n),i=x.useRef(!1);return x.useEffect(()=>{const o=n.current;if(o)return Py(o)},[]),r.jsx(Gp,{as:gZ,allowPinchZoom:!0,children:r.jsx(ZR,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pt(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=s.triggerRef.current)==null||l.focus()}),onPointerDownOutside:pt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:pt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),vZ=x.forwardRef((e,t)=>{const s=dd(xf,e.__scopePopover),n=x.useRef(!1),a=x.useRef(!1);return r.jsx(ZR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=s.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=s.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),ZR=x.forwardRef((e,t)=>{const{__scopePopover:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,p=dd(xf,s),f=tg(s);return ky(),r.jsx(Wp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(xu,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:r.jsx($y,{"data-state":QR(p.open),role:"dialog",id:p.contentId,...f,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),XR="PopoverClose",yZ=x.forwardRef((e,t)=>{const{__scopePopover:s,...n}=e,a=dd(XR,s);return r.jsx(Ot.button,{type:"button",...n,ref:t,onClick:pt(e.onClick,()=>a.onOpenChange(!1))})});yZ.displayName=XR;var bZ="PopoverArrow",jZ=x.forwardRef((e,t)=>{const{__scopePopover:s,...n}=e,a=tg(s);return r.jsx(By,{...a,...n,ref:t})});jZ.displayName=bZ;function QR(e){return e?"open":"closed"}var wZ=HR,NZ=KR,SZ=YR,eT=JR;const tT=wZ,rT=NZ,eS=x.forwardRef(({className:e,align:t="center",sideOffset:s=4,...n},a)=>r.jsx(SZ,{children:r.jsx(eT,{ref:a,align:t,sideOffset:s,className:it("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));eS.displayName=eT.displayName;var r3=1,_Z=.9,CZ=.8,kZ=.17,f2=.1,m2=.999,AZ=.9999,PZ=.99,EZ=/[\\\/_+.#"@\[\(\{&]/,LZ=/[\\\/_+.#"@\[\(\{&]/g,RZ=/[\s-]/,sT=/[\s-]/g;function pw(e,t,s,n,a,i,o){if(i===t.length)return a===e.length?r3:PZ;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(i),d=s.indexOf(c,a),u=0,h,p,f,y;d>=0;)h=pw(e,t,s,n,d+1,i+1,o),h>u&&(d===a?h*=r3:EZ.test(e.charAt(d-1))?(h*=CZ,f=e.slice(a,d-1).match(LZ),f&&a>0&&(h*=Math.pow(m2,f.length))):RZ.test(e.charAt(d-1))?(h*=_Z,y=e.slice(a,d-1).match(sT),y&&a>0&&(h*=Math.pow(m2,y.length))):(h*=kZ,a>0&&(h*=Math.pow(m2,d-a))),e.charAt(d)!==t.charAt(i)&&(h*=AZ)),(h<f2&&s.charAt(d-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&s.charAt(d-1)!==n.charAt(i))&&(p=pw(e,t,s,n,d+1,i+2,o),p*f2>h&&(h=p*f2)),h>u&&(u=h),d=s.indexOf(c,d+1);return o[l]=u,u}function s3(e){return e.toLowerCase().replace(sT," ")}function TZ(e,t,s){return e=s&&s.length>0?`${e+" "+s.join(" ")}`:e,pw(e,t,s3(e),s3(t),0,0,{})}var Nm='[cmdk-group=""]',p2='[cmdk-group-items=""]',IZ='[cmdk-group-heading=""]',nT='[cmdk-item=""]',n3=`${nT}:not([aria-disabled="true"])`,gw="cmdk-item-select",Qu="data-value",FZ=(e,t,s)=>TZ(e,t,s),aT=x.createContext(void 0),rg=()=>x.useContext(aT),iT=x.createContext(void 0),tS=()=>x.useContext(iT),oT=x.createContext(void 0),lT=x.forwardRef((e,t)=>{let s=eh(()=>{var T,F;return{search:"",value:(F=(T=e.value)!=null?T:e.defaultValue)!=null?F:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=eh(()=>new Set),a=eh(()=>new Map),i=eh(()=>new Map),o=eh(()=>new Set),l=cT(e),{label:c,children:d,value:u,onValueChange:h,filter:p,shouldFilter:f,loop:y,disablePointerSelection:g=!1,vimBindings:j=!0,...v}=e,w=jn(),N=jn(),C=jn(),k=x.useRef(null),O=WZ();du(()=>{if(u!==void 0){let T=u.trim();s.current.value=T,R.emit()}},[u]),du(()=>{O(6,$)},[]);let R=x.useMemo(()=>({subscribe:T=>(o.current.add(T),()=>o.current.delete(T)),snapshot:()=>s.current,setState:(T,F,M)=>{var G,ee,te,me;if(!Object.is(s.current[T],F)){if(s.current[T]=F,T==="search")A(),D(),O(1,P);else if(T==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ue=document.getElementById(C);ue?ue.focus():(G=document.getElementById(w))==null||G.focus()}if(O(7,()=>{var ue;s.current.selectedItemId=(ue=U())==null?void 0:ue.id,R.emit()}),M||O(5,$),((ee=l.current)==null?void 0:ee.value)!==void 0){let ue=F??"";(me=(te=l.current).onValueChange)==null||me.call(te,ue);return}}R.emit()}},emit:()=>{o.current.forEach(T=>T())}}),[]),E=x.useMemo(()=>({value:(T,F,M)=>{var G;F!==((G=i.current.get(T))==null?void 0:G.value)&&(i.current.set(T,{value:F,keywords:M}),s.current.filtered.items.set(T,I(F,M)),O(2,()=>{D(),R.emit()}))},item:(T,F)=>(n.current.add(T),F&&(a.current.has(F)?a.current.get(F).add(T):a.current.set(F,new Set([T]))),O(3,()=>{A(),D(),s.current.value||P(),R.emit()}),()=>{i.current.delete(T),n.current.delete(T),s.current.filtered.items.delete(T);let M=U();O(4,()=>{A(),(M==null?void 0:M.getAttribute("id"))===T&&P(),R.emit()})}),group:T=>(a.current.has(T)||a.current.set(T,new Set),()=>{i.current.delete(T),a.current.delete(T)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:w,inputId:C,labelId:N,listInnerRef:k}),[]);function I(T,F){var M,G;let ee=(G=(M=l.current)==null?void 0:M.filter)!=null?G:FZ;return T?ee(T,s.current.search,F):0}function D(){if(!s.current.search||l.current.shouldFilter===!1)return;let T=s.current.filtered.items,F=[];s.current.filtered.groups.forEach(G=>{let ee=a.current.get(G),te=0;ee.forEach(me=>{let ue=T.get(me);te=Math.max(ue,te)}),F.push([G,te])});let M=k.current;de().sort((G,ee)=>{var te,me;let ue=G.getAttribute("id"),ce=ee.getAttribute("id");return((te=T.get(ce))!=null?te:0)-((me=T.get(ue))!=null?me:0)}).forEach(G=>{let ee=G.closest(p2);ee?ee.appendChild(G.parentElement===ee?G:G.closest(`${p2} > *`)):M.appendChild(G.parentElement===M?G:G.closest(`${p2} > *`))}),F.sort((G,ee)=>ee[1]-G[1]).forEach(G=>{var ee;let te=(ee=k.current)==null?void 0:ee.querySelector(`${Nm}[${Qu}="${encodeURIComponent(G[0])}"]`);te==null||te.parentElement.appendChild(te)})}function P(){let T=de().find(M=>M.getAttribute("aria-disabled")!=="true"),F=T==null?void 0:T.getAttribute(Qu);R.setState("value",F||void 0)}function A(){var T,F,M,G;if(!s.current.search||l.current.shouldFilter===!1){s.current.filtered.count=n.current.size;return}s.current.filtered.groups=new Set;let ee=0;for(let te of n.current){let me=(F=(T=i.current.get(te))==null?void 0:T.value)!=null?F:"",ue=(G=(M=i.current.get(te))==null?void 0:M.keywords)!=null?G:[],ce=I(me,ue);s.current.filtered.items.set(te,ce),ce>0&&ee++}for(let[te,me]of a.current)for(let ue of me)if(s.current.filtered.items.get(ue)>0){s.current.filtered.groups.add(te);break}s.current.filtered.count=ee}function $(){var T,F,M;let G=U();G&&(((T=G.parentElement)==null?void 0:T.firstChild)===G&&((M=(F=G.closest(Nm))==null?void 0:F.querySelector(IZ))==null||M.scrollIntoView({block:"nearest"})),G.scrollIntoView({block:"nearest"}))}function U(){var T;return(T=k.current)==null?void 0:T.querySelector(`${nT}[aria-selected="true"]`)}function de(){var T;return Array.from(((T=k.current)==null?void 0:T.querySelectorAll(n3))||[])}function se(T){let F=de()[T];F&&R.setState("value",F.getAttribute(Qu))}function ge(T){var F;let M=U(),G=de(),ee=G.findIndex(me=>me===M),te=G[ee+T];(F=l.current)!=null&&F.loop&&(te=ee+T<0?G[G.length-1]:ee+T===G.length?G[0]:G[ee+T]),te&&R.setState("value",te.getAttribute(Qu))}function V(T){let F=U(),M=F==null?void 0:F.closest(Nm),G;for(;M&&!G;)M=T>0?VZ(M,Nm):HZ(M,Nm),G=M==null?void 0:M.querySelector(n3);G?R.setState("value",G.getAttribute(Qu)):ge(T)}let K=()=>se(de().length-1),J=T=>{T.preventDefault(),T.metaKey?K():T.altKey?V(1):ge(1)},ie=T=>{T.preventDefault(),T.metaKey?se(0):T.altKey?V(-1):ge(-1)};return x.createElement(Ot.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:T=>{var F;(F=v.onKeyDown)==null||F.call(v,T);let M=T.nativeEvent.isComposing||T.keyCode===229;if(!(T.defaultPrevented||M))switch(T.key){case"n":case"j":{j&&T.ctrlKey&&J(T);break}case"ArrowDown":{J(T);break}case"p":case"k":{j&&T.ctrlKey&&ie(T);break}case"ArrowUp":{ie(T);break}case"Home":{T.preventDefault(),se(0);break}case"End":{T.preventDefault(),K();break}case"Enter":{T.preventDefault();let G=U();if(G){let ee=new Event(gw);G.dispatchEvent(ee)}}}}},x.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:KZ},c),a1(e,T=>x.createElement(iT.Provider,{value:R},x.createElement(aT.Provider,{value:E},T))))}),DZ=x.forwardRef((e,t)=>{var s,n;let a=jn(),i=x.useRef(null),o=x.useContext(oT),l=rg(),c=cT(e),d=(n=(s=c.current)==null?void 0:s.forceMount)!=null?n:o==null?void 0:o.forceMount;du(()=>{if(!d)return l.item(a,o==null?void 0:o.id)},[d]);let u=dT(a,i,[e.value,e.children,i],e.keywords),h=tS(),p=Jc(O=>O.value&&O.value===u.current),f=Jc(O=>d||l.filter()===!1?!0:O.search?O.filtered.items.get(a)>0:!0);x.useEffect(()=>{let O=i.current;if(!(!O||e.disabled))return O.addEventListener(gw,y),()=>O.removeEventListener(gw,y)},[f,e.onSelect,e.disabled]);function y(){var O,R;g(),(R=(O=c.current).onSelect)==null||R.call(O,u.current)}function g(){h.setState("value",u.current,!0)}if(!f)return null;let{disabled:j,value:v,onSelect:w,forceMount:N,keywords:C,...k}=e;return x.createElement(Ot.div,{ref:Sl(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!p,"data-disabled":!!j,"data-selected":!!p,onPointerMove:j||l.getDisablePointerSelection()?void 0:g,onClick:j?void 0:y},e.children)}),OZ=x.forwardRef((e,t)=>{let{heading:s,children:n,forceMount:a,...i}=e,o=jn(),l=x.useRef(null),c=x.useRef(null),d=jn(),u=rg(),h=Jc(f=>a||u.filter()===!1?!0:f.search?f.filtered.groups.has(o):!0);du(()=>u.group(o),[]),dT(o,l,[e.value,e.heading,c]);let p=x.useMemo(()=>({id:o,forceMount:a}),[a]);return x.createElement(Ot.div,{ref:Sl(l,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},s&&x.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},s),a1(e,f=>x.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":s?d:void 0},x.createElement(oT.Provider,{value:p},f))))}),MZ=x.forwardRef((e,t)=>{let{alwaysRender:s,...n}=e,a=x.useRef(null),i=Jc(o=>!o.search);return!s&&!i?null:x.createElement(Ot.div,{ref:Sl(a,t),...n,"cmdk-separator":"",role:"separator"})}),$Z=x.forwardRef((e,t)=>{let{onValueChange:s,...n}=e,a=e.value!=null,i=tS(),o=Jc(d=>d.search),l=Jc(d=>d.selectedItemId),c=rg();return x.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),x.createElement(Ot.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:d=>{a||i.setState("search",d.target.value),s==null||s(d.target.value)}})}),BZ=x.forwardRef((e,t)=>{let{children:s,label:n="Suggestions",...a}=e,i=x.useRef(null),o=x.useRef(null),l=Jc(d=>d.selectedItemId),c=rg();return x.useEffect(()=>{if(o.current&&i.current){let d=o.current,u=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let f=d.offsetHeight;u.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return p.observe(d),()=>{cancelAnimationFrame(h),p.unobserve(d)}}},[]),x.createElement(Ot.div,{ref:Sl(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},a1(e,d=>x.createElement("div",{ref:Sl(o,c.listInnerRef),"cmdk-list-sizer":""},d)))}),zZ=x.forwardRef((e,t)=>{let{open:s,onOpenChange:n,overlayClassName:a,contentClassName:i,container:o,...l}=e;return x.createElement(g5,{open:s,onOpenChange:n},x.createElement(x5,{container:o},x.createElement(Ly,{"cmdk-overlay":"",className:a}),x.createElement(Ry,{"aria-label":e.label,"cmdk-dialog":"",className:i},x.createElement(lT,{ref:t,...l}))))}),UZ=x.forwardRef((e,t)=>Jc(s=>s.filtered.count===0)?x.createElement(Ot.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),qZ=x.forwardRef((e,t)=>{let{progress:s,children:n,label:a="Loading...",...i}=e;return x.createElement(Ot.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},a1(e,o=>x.createElement("div",{"aria-hidden":!0},o)))}),Ba=Object.assign(lT,{List:BZ,Item:DZ,Input:$Z,Group:OZ,Separator:MZ,Dialog:zZ,Empty:UZ,Loading:qZ});function VZ(e,t){let s=e.nextElementSibling;for(;s;){if(s.matches(t))return s;s=s.nextElementSibling}}function HZ(e,t){let s=e.previousElementSibling;for(;s;){if(s.matches(t))return s;s=s.previousElementSibling}}function cT(e){let t=x.useRef(e);return du(()=>{t.current=e}),t}var du=typeof window>"u"?x.useEffect:x.useLayoutEffect;function eh(e){let t=x.useRef();return t.current===void 0&&(t.current=e()),t}function Jc(e){let t=tS(),s=()=>e(t.snapshot());return x.useSyncExternalStore(t.subscribe,s,s)}function dT(e,t,s,n=[]){let a=x.useRef(),i=rg();return du(()=>{var o;let l=(()=>{var d;for(let u of s){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=n.map(d=>d.trim());i.value(e,l,c),(o=t.current)==null||o.setAttribute(Qu,l),a.current=l}),a}var WZ=()=>{let[e,t]=x.useState(),s=eh(()=>new Map);return du(()=>{s.current.forEach(n=>n()),s.current=new Map},[e]),(n,a)=>{s.current.set(n,a),t({})}};function GZ(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function a1({asChild:e,children:t},s){return e&&x.isValidElement(t)?x.cloneElement(GZ(t),{ref:t.ref},s(t.props.children)):s(t)}var KZ={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const rS=x.forwardRef(({className:e,...t},s)=>r.jsx(Ba,{ref:s,className:it("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));rS.displayName=Ba.displayName;const sS=x.forwardRef(({className:e,...t},s)=>r.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[r.jsx(Ws,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(Ba.Input,{ref:s,className:it("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));sS.displayName=Ba.Input.displayName;const nS=x.forwardRef(({className:e,...t},s)=>r.jsx(Ba.List,{ref:s,className:it("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));nS.displayName=Ba.List.displayName;const aS=x.forwardRef((e,t)=>r.jsx(Ba.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));aS.displayName=Ba.Empty.displayName;const iS=x.forwardRef(({className:e,...t},s)=>r.jsx(Ba.Group,{ref:s,className:it("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));iS.displayName=Ba.Group.displayName;const YZ=x.forwardRef(({className:e,...t},s)=>r.jsx(Ba.Separator,{ref:s,className:it("-mx-1 h-px bg-border",e),...t}));YZ.displayName=Ba.Separator.displayName;const rp=x.forwardRef(({className:e,...t},s)=>r.jsx(Ba.Item,{ref:s,className:it("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));rp.displayName=Ba.Item.displayName;function a3({isOpen:e,onClose:t,onSubmit:s,schoolId:n,editMode:a=!1,student:i=null}){var R;console.log("StudentModal render - isOpen:",e,"editMode:",a,"student:",i);const{parents:o}=ma(E=>E.parents),{grades:l}=ma(E=>E.grades),c=localStorage.getItem("schoolId"),[d,u]=x.useState(0),[h,p]=x.useState(!1),f=(o||[]).filter(E=>E.school===Number(n)),y=(l||[]).filter(E=>E.school===Number(n));console.log(c),console.log(d),console.log("Available grades for school:",y);const[g,j]=x.useState({first_name:"",middle_name:"",last_name:"",date_of_birth:"",school:Number(c)||0,parent:0,admission_number:"",grade:0,gender:"",section:"",medical_conditions:"",emergency_contacts:[{name:"",phone:""}],transport_enabled:!0});x.useEffect(()=>{if(console.log("Form data initialization effect - editMode:",a,"student:",i),a&&i){console.log("Initializing form with student data:",i);const E={first_name:i.first_name||"",middle_name:i.middle_name||"",last_name:i.last_name||"",date_of_birth:i.date_of_birth||"",school:i.school||Number(c)||0,parent:i.parent||0,admission_number:i.admission_number||"",grade:i.grade||0,gender:i.gender||"",section:i.section||"",medical_conditions:i.medical_conditions||"",emergency_contacts:i.emergency_contacts||[{name:"",phone:""}],transport_enabled:i.transport_enabled??!0};console.log("Setting form data to:",E),j(E),u(i.parent||0)}else{const E={first_name:"",middle_name:"",last_name:"",date_of_birth:"",school:Number(c)||0,parent:0,admission_number:"",grade:0,gender:"",section:"",medical_conditions:"",emergency_contacts:[{name:"",phone:""}],transport_enabled:!0};console.log("Resetting form data to:",E),j(E),u(0)}},[a,i,c]),x.useEffect(()=>{d>0&&j(E=>({...E,parent:d}))},[d]),x.useEffect(()=>{console.log("Form data changed:",g)},[g]);const v=E=>{if(E.preventDefault(),console.log("Submitting form data:",g),console.log("Edit mode:",a),console.log("Student ID:",i==null?void 0:i.id),console.log("Grade type:",typeof g.grade,"Value:",g.grade),console.log("Parent type:",typeof g.parent,"Value:",g.parent),!g.first_name||!g.last_name){alert("First name and last name are required");return}if(!g.admission_number){alert("Admission number is required");return}if(!g.grade||g.grade===0){y.length===0?alert("No grades are available for this school. Please add grades first in the Grades tab."):alert("Please select a grade");return}if(!g.parent||g.parent===0){alert("Please select a parent");return}a&&(i!=null&&i.id)?(console.log("Submitting update for student ID:",i.id),s({id:i.id,data:g})):(console.log("Submitting create request"),s(g))},w=E=>{const{name:I,value:D}=E.target;j(P=>({...P,[I]:D}))},N=(E,I)=>{console.log(`handleSelectChange - name: ${E}, value: ${I}, type: ${typeof I}`);const D=E==="grade"||E==="parent"?Number(I):I;console.log(`Converted value: ${D}, type: ${typeof D}`),j(P=>({...P,[E]:D}))},C=(E,I,D)=>{j(P=>{const A=[...P.emergency_contacts];return A[E]={...A[E],[I]:D},{...P,emergency_contacts:A}})},k=()=>{j(E=>({...E,emergency_contacts:[...E.emergency_contacts,{name:"",phone:""}]}))},O=E=>{j(I=>({...I,emergency_contacts:I.emergency_contacts.filter((D,P)=>P!==E)}))};return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:a?"Edit Student":"Add New Student"})}),r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"first_name",children:"First Name"}),r.jsx(Oe,{id:"first_name",name:"first_name",value:g.first_name,onChange:w,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"middle_name",children:"Middle Name"}),r.jsx(Oe,{id:"middle_name",name:"middle_name",value:g.middle_name,onChange:w,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"last_name",children:"Last Name"}),r.jsx(Oe,{id:"last_name",name:"last_name",value:g.last_name,onChange:w,required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"date_of_birth",children:"Date of Birth"}),r.jsx(Oe,{id:"date_of_birth",name:"date_of_birth",type:"date",value:g.date_of_birth,onChange:w,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"admission_number",children:"Admission Number"}),r.jsx(Oe,{id:"admission_number",name:"admission_number",value:g.admission_number,onChange:w,required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"parent",children:"Parent"}),r.jsxs(tT,{open:h,onOpenChange:p,children:[r.jsx(rT,{asChild:!0,children:r.jsxs(fe,{variant:"outline",role:"combobox","aria-expanded":h,className:"w-full justify-between",children:[g.parent?((R=f.find(E=>E.id===g.parent))==null?void 0:R.user_full_name)||"Unknown Parent":"Select parent...",r.jsx(FP,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(eS,{className:"w-full p-0",children:r.jsxs(rS,{children:[r.jsx(sS,{placeholder:"Search parent..."}),r.jsxs(nS,{children:[r.jsx(aS,{children:"No parent found."}),r.jsx(iS,{children:f.map(E=>{var I,D;return r.jsxs(rp,{value:`${E.user_full_name||"Unknown Parent"} ${E.user_phone_number||E.phone_number||((I=E.user_data)==null?void 0:I.phone_number)||""}`,onSelect:()=>{u(E.id),N("parent",E.id.toString()),p(!1)},children:[r.jsx(Rn,{className:it("mr-2 h-4 w-4",g.parent===E.id?"opacity-100":"opacity-0")}),E.user_full_name||"Unknown Parent"," -"," ",E.user_phone_number||E.phone_number||((D=E.user_data)==null?void 0:D.phone_number)||"No phone"]},E.id)})})]})]})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"grade",children:"Grade"}),r.jsxs(Jt,{value:g.grade?g.grade.toString():"",onValueChange:E=>N("grade",E),disabled:y.length===0,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:y.length>0?"Select grade":"No grades available"})}),r.jsx(Kt,{children:y.length>0?y.map(E=>{var I;return r.jsxs(Re,{value:((I=E.id)==null?void 0:I.toString())||"",children:[E.name," - ",E.level]},E.id)}):r.jsx(Re,{value:"",disabled:!0,children:"No grades available for this school"})})]}),y.length===0&&r.jsx("p",{className:"text-sm text-amber-600 bg-amber-50 px-3 py-2 rounded-md",children:" No grades have been created for this school yet. Please add grades first in the Grades tab."})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"section",children:"Section"}),r.jsxs(Jt,{value:g.section||"",onValueChange:E=>N("section",E),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select section"})}),r.jsx(Kt,{children:["A","B","C","D"].map(E=>r.jsxs(Re,{value:E,children:["Section ",E]},E))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"gender",children:"Gender"}),r.jsxs(Jt,{value:g.gender||"",onValueChange:E=>N("gender",E),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select gender"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"male",children:"Male"}),r.jsx(Re,{value:"female",children:"Female"}),r.jsx(Re,{value:"other",children:"Other"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"medical_conditions",children:"Medical Conditions"}),r.jsx(Oe,{id:"medical_conditions",name:"medical_conditions",value:g.medical_conditions,onChange:w,placeholder:"Enter any medical conditions or 'None'"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"transport_enabled",children:"Transport Status"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"transport_enabled",name:"transport_enabled",checked:g.transport_enabled,onChange:E=>j(I=>({...I,transport_enabled:E.target.checked})),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),r.jsx(le,{htmlFor:"transport_enabled",className:"text-sm",children:"Enable transport for this student"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Emergency Contacts"}),g.emergency_contacts.map((E,I)=>r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{placeholder:"Contact Name",value:E.name,onChange:D=>C(I,"name",D.target.value)}),r.jsx(Oe,{placeholder:"Phone Number",value:E.phone,onChange:D=>C(I,"phone",D.target.value)}),I>0&&r.jsx(fe,{type:"button",variant:"destructive",onClick:()=>O(I),children:"Remove"})]},I)),r.jsx(fe,{type:"button",variant:"outline",onClick:k,className:"mt-2",children:"Add Emergency Contact"})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),r.jsx(fe,{type:"submit",children:a?"Update Student":"Create Student"})]})]})]})})}function JZ({isOpen:e,onClose:t,student:s}){const{grades:n}=ma(o=>o.grades);if(!s||!s.id)return null;const a=o=>{if(!o)return"N/A";const l=n.find(c=>c.id===Number(o));return l?l.name:`Grade ${o}`},i=o=>{try{if(!o)return"N/A";const l=new Date(o);return isNaN(l.getTime())?"Invalid Date":l.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid Date"}};return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsxs($r,{className:"flex items-center gap-2",children:[r.jsx(Qi,{className:"h-5 w-5"}),"Student Details"]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsx(Je,{className:"text-lg",children:"Basic Information"})}),r.jsx(Ve,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),r.jsxs("p",{className:"text-lg font-semibold",children:[s.first_name||""," ",s.middle_name||""," ",s.last_name||""]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Admission Number"}),r.jsx("p",{className:"text-lg font-semibold",children:s.admission_number||"N/A"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),r.jsxs("p",{className:"flex items-center gap-2",children:[r.jsx(ai,{className:"h-4 w-4 text-gray-400"}),s.date_of_birth?i(s.date_of_birth):"N/A"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Gender"}),r.jsx("p",{className:"capitalize",children:s.gender||"N/A"})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[r.jsx(KU,{className:"h-5 w-5"}),"Academic Information"]})}),r.jsx(Ve,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Grade"}),r.jsx("p",{className:"text-lg font-semibold",children:a(s.grade)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Section"}),r.jsx("p",{className:"text-lg font-semibold",children:s.section||"N/A"})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsx(Je,{className:"text-lg",children:"Transport Status"})}),r.jsx(Ve,{children:r.jsx(Te,{variant:s.transport_enabled?"default":"secondary",className:s.transport_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:s.transport_enabled?"Active":"Inactive"})})]}),s.medical_conditions&&s.medical_conditions.trim()&&r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[r.jsx(BU,{className:"h-5 w-5"}),"Medical Information"]})}),r.jsx(Ve,{children:r.jsx("p",{className:"text-gray-700",children:s.medical_conditions})})]}),s.emergency_contacts&&s.emergency_contacts.length>0&&r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"text-lg flex items-center gap-2",children:[r.jsx(zo,{className:"h-5 w-5"}),"Emergency Contacts"]})}),r.jsx(Ve,{children:r.jsx("div",{className:"space-y-3",children:s.emergency_contacts.map((o,l)=>r.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),r.jsx("p",{className:"font-medium",children:o.name||"N/A"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),r.jsx("p",{className:"font-medium",children:o.phone||"N/A"})]})]})},l))})})]})]}),r.jsx("div",{className:"flex justify-end gap-2 pt-4",children:r.jsx(fe,{variant:"outline",onClick:t,children:"Close"})})]})})}function i3({isOpen:e,onClose:t,onSubmit:s,schoolId:n,editMode:a=!1,grade:i}){const[o,l]=x.useState({name:"",level:"",school:n||0,description:"",capacity:30}),[c,d]=x.useState({});x.useEffect(()=>{l(a&&i?{name:i.name||"",level:i.level||"",school:i.school||n||0,description:i.description||"",capacity:i.capacity||30}:{name:"",level:"",school:n||0,description:"",capacity:30}),d({})},[a,i,n,e]);const u=()=>{const f={};return o.name.trim()||(f.name="Grade name is required"),o.level||(f.level="Level is required"),o.description.trim()||(f.description="Description is required"),o.capacity<=0&&(f.capacity="Capacity must be greater than 0"),d(f),Object.keys(f).length===0},h=f=>{f.preventDefault(),u()&&s(o)},p=(f,y)=>{l(g=>({...g,[f]:y})),c[f]&&d(g=>({...g,[f]:""}))};return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"sm:max-w-[500px]",children:[r.jsx(Mr,{children:r.jsx($r,{children:a?"Edit Grade":"Add New Grade"})}),r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"name",children:"Grade Name *"}),r.jsx(Oe,{id:"name",placeholder:"e.g., Grade 1A",value:o.name,onChange:f=>p("name",f.target.value),className:c.name?"border-red-500":""}),c.name&&r.jsx("p",{className:"text-sm text-red-500",children:c.name})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"level",children:"Level *"}),r.jsxs(Jt,{value:o.level,onValueChange:f=>p("level",f),children:[r.jsx(Gt,{className:c.level?"border-red-500":"",children:r.jsx(Zt,{placeholder:"Select level"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"Primary",children:"Primary"}),r.jsx(Re,{value:"Secondary",children:"Secondary"}),r.jsx(Re,{value:"High School",children:"High School"}),r.jsx(Re,{value:"College",children:"College"})]})]}),c.level&&r.jsx("p",{className:"text-sm text-red-500",children:c.level})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"description",children:"Description *"}),r.jsx(Ma,{id:"description",placeholder:"Describe the grade level...",value:o.description,onChange:f=>p("description",f.target.value),className:c.description?"border-red-500":"",rows:3}),c.description&&r.jsx("p",{className:"text-sm text-red-500",children:c.description})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"capacity",children:"Class Capacity *"}),r.jsx(Oe,{id:"capacity",type:"number",min:"1",max:"100",placeholder:"30",value:o.capacity,onChange:f=>p("capacity",parseInt(f.target.value)||0),className:c.capacity?"border-red-500":""}),c.capacity&&r.jsx("p",{className:"text-sm text-red-500",children:c.capacity})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),r.jsx(fe,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:a?"Update Grade":"Create Grade"})]})]})]})})}var i1="Tabs",[ZZ,fre]=xa(i1,[zy]),uT=zy(),[XZ,oS]=ZZ(i1),hT=x.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Iy(l),[h,p]=so({prop:n,onChange:a,defaultProp:i??"",caller:i1});return r.jsx(XZ,{scope:s,baseId:jn(),value:h,onValueChange:p,orientation:o,dir:u,activationMode:c,children:r.jsx(Ot.div,{dir:u,"data-orientation":o,...d,ref:t})})});hT.displayName=i1;var fT="TabsList",mT=x.forwardRef((e,t)=>{const{__scopeTabs:s,loop:n=!0,...a}=e,i=oS(fT,s),o=uT(s);return r.jsx(t8,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:r.jsx(Ot.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});mT.displayName=fT;var pT="TabsTrigger",gT=x.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,disabled:a=!1,...i}=e,o=oS(pT,s),l=uT(s),c=yT(o.baseId,n),d=bT(o.baseId,n),u=n===o.value;return r.jsx(r8,{asChild:!0,...l,focusable:!a,active:u,children:r.jsx(Ot.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:pt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:pt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:pt(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(n)})})})});gT.displayName=pT;var xT="TabsContent",vT=x.forwardRef((e,t)=>{const{__scopeTabs:s,value:n,forceMount:a,children:i,...o}=e,l=oS(xT,s),c=yT(l.baseId,n),d=bT(l.baseId,n),u=n===l.value,h=x.useRef(u);return x.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),r.jsx($a,{present:a||u,children:({present:p})=>r.jsx(Ot.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});vT.displayName=xT;function yT(e,t){return`${e}-trigger-${t}`}function bT(e,t){return`${e}-content-${t}`}var QZ=hT,jT=mT,wT=gT,NT=vT;const ST=QZ,lS=x.forwardRef(({className:e,...t},s)=>r.jsx(jT,{ref:s,className:it("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));lS.displayName=jT.displayName;const Rd=x.forwardRef(({className:e,...t},s)=>r.jsx(wT,{ref:s,className:it("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Rd.displayName=wT.displayName;const Td=x.forwardRef(({className:e,...t},s)=>r.jsx(NT,{ref:s,className:it("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Td.displayName=NT.displayName;function eX(){const e=ns(),{students:t,loading:s,error:n}=At(Ne=>Ne.students),{grades:a,loading:i,error:o}=At(Ne=>Ne.grades),{schools:l}=At(Ne=>Ne.schools),{user:c}=At(Ne=>Ne.auth),[d,u]=x.useState(new Set),[h,p]=x.useState({key:null,direction:"asc"}),[f,y]=x.useState(!1),[g,j]=x.useState("all"),[v,w]=x.useState("all"),[N,C]=x.useState("students"),[k,O]=x.useState(!1),[R,E]=x.useState(!1),[I,D]=x.useState(!1),[P,A]=x.useState(!1),[$,U]=x.useState(!1),[de,se]=x.useState(!1),[ge,V]=x.useState(!1),[K,J]=x.useState(null),[ie,T]=x.useState(null),[F,M]=x.useState(""),[G,ee]=x.useState("all"),[te,me]=x.useState(""),[ue,ce]=x.useState(1),[Ce,Ue]=x.useState(1),[Ge,gt]=x.useState(10),Se=x.useMemo(()=>{const Ne=localStorage.getItem("schoolId");if(Ne){const lt=parseInt(Ne);if(!isNaN(lt))return lt}if(l.length>0&&(c!=null&&c.id)){const lt=l.find(vt=>vt.admin===c.id);if(lt!=null&&lt.id)return localStorage.setItem("schoolId",lt.id.toString()),lt.id}},[l,c==null?void 0:c.id]);x.useEffect(()=>{e(vl()).catch(Ne=>{console.error("Failed to fetch schools:",Ne)})},[e]),x.useEffect(()=>{Se?(console.log("Fetching data for schoolId:",Se),e(Xa({schoolId:Se})),e(ua({schoolId:Se})),e(ko({schoolId:Se}))):console.log("No schoolId available, skipping data fetch")},[e,Se]),x.useEffect(()=>{!K&&P&&A(!1)},[K,P]),x.useEffect(()=>{P&&(!K||!K.id)&&(A(!1),J(null))},[P,K]);const ne=x.useMemo(()=>{const Ne=(t||[]).filter(lt=>{var nn,un,Ps,ds,Xr,Os;const vt=(((nn=lt.first_name)==null?void 0:nn.toLowerCase())||"").includes(F.toLowerCase())||(((un=lt.last_name)==null?void 0:un.toLowerCase())||"").includes(F.toLowerCase())||(((Ps=lt.admission_number)==null?void 0:Ps.toLowerCase())||"").includes(F.toLowerCase())||(((ds=lt.section)==null?void 0:ds.toLowerCase())||"").includes(F.toLowerCase())||(((Xr=lt.middle_name)==null?void 0:Xr.toLowerCase())||"").includes(F.toLowerCase()),Qt=G==="all"||G==="active"&&lt.transport_enabled||G==="inactive"&&!lt.transport_enabled,Zr=g==="all"||((Os=lt.grade)==null?void 0:Os.toString())===g,Ut=v==="all"||lt.gender===v;return vt&&Qt&&Zr&&Ut});return h.key?[...Ne].sort((lt,vt)=>{const Qt=lt[h.key],Zr=vt[h.key];if(Qt==null)return 1;if(Zr==null)return-1;const Ut=Qt<Zr?-1:Qt>Zr?1:0;return h.direction==="desc"?-Ut:Ut}):Ne},[t,F,G,g,v,h]),jt=(Array.isArray(a)?a:[]).filter(Ne=>Ne.name.toLowerCase().includes(te.toLowerCase())||Ne.level.toLowerCase().includes(te.toLowerCase())||Ne.description.toLowerCase().includes(te.toLowerCase())),dt=Math.ceil(ne.length/Ge),et=(ue-1)*Ge,Q=et+Ge,he=ne.slice(et,Q),xe=Math.ceil(jt.length/Ge),De=(Ce-1)*Ge,Be=De+Ge,Fe=jt.slice(De,Be);x.useEffect(()=>{ce(1)},[F,G,g,v]),x.useEffect(()=>{Ue(1)},[te]);const st=x.useCallback(Ne=>{p(lt=>({key:Ne,direction:lt.key===Ne&&lt.direction==="asc"?"desc":"asc"}))},[]),_t=x.useCallback(()=>{d.size===he.length?u(new Set):u(new Set(he.map(Ne=>Ne.id)))},[d.size,he]),pe=x.useCallback(Ne=>{u(lt=>{const vt=new Set(lt);return vt.has(Ne)?vt.delete(Ne):vt.add(Ne),vt})},[]),X=x.useCallback(async Ne=>{try{const lt=Array.from(d).map(vt=>(t==null?void 0:t.find(Zr=>Zr.id===vt))?e(Wm({id:vt,data:{transport_enabled:Ne}})).unwrap():Promise.resolve());await Promise.all(lt),wr.success(`Successfully ${Ne?"activated":"deactivated"} transport for ${d.size} students`),u(new Set)}catch{wr.error("Failed to update transport status for students")}},[d,t,e]),ae=x.useCallback(async()=>{try{const Ne=Array.from(d).map(lt=>e(Gm(lt)).unwrap());await Promise.all(Ne),wr.success(`Successfully deleted ${d.size} students`),u(new Set)}catch{wr.error("Failed to delete some students")}},[d,e]),ve=async Ne=>{try{console.log("Creating student with data:",Ne),console.log("Current schoolId:",Se),await e(Qx(Ne)).unwrap(),wr.success("Student created successfully"),O(!1),J(null),console.log("Student created successfully - state updated automatically")}catch(lt){console.error("Student creation error:",lt);let vt="Failed to create student";if(lt instanceof Error)try{const Qt=JSON.parse(lt.message);typeof Qt=="object"&&Qt!==null?vt=JSON.stringify(Qt,null,2):vt=lt.message}catch{vt=lt.message}else vt=String(lt);wr.error("Error",vt)}},Ie=async({id:Ne,data:lt})=>{try{console.log("handleUpdateStudent called with ID:",Ne,"Data:",lt),await e(Wm({id:Ne,data:lt})).unwrap(),console.log("Student update successful"),wr.success("Student updated successfully"),E(!1),J(null),console.log("Student updated successfully - state updated automatically")}catch(vt){console.error("Student update error:",vt);let Qt="Failed to update student";if(vt instanceof Error)try{const Zr=JSON.parse(vt.message);typeof Zr=="object"&&Zr!==null?Qt=JSON.stringify(Zr,null,2):Qt=vt.message}catch{Qt=vt.message}else Qt=String(vt);wr.error("Error",Qt)}},ze=async()=>{if(!(K!=null&&K.id)){wr.error("No student selected for deletion"),A(!1),J(null);return}try{await e(Gm(K.id)).unwrap(),wr.success("Student deleted successfully"),A(!1),J(null),console.log("Student deleted successfully - state updated automatically")}catch(Ne){console.error("Student deletion error:",Ne);let lt="Failed to delete student";if(Ne instanceof Error)try{const vt=JSON.parse(Ne.message);typeof vt=="object"&&vt!==null?lt=JSON.stringify(vt,null,2):lt=Ne.message}catch{lt=Ne.message}else lt=String(Ne);wr.error("Error",lt)}},nt=Ne=>{if(console.log("openEditModal called with student:",Ne),!Ne||!Ne.id){wr.error("Invalid student data");return}console.log("Setting selected student and opening edit modal"),J(Ne),E(!0)},Ze=Ne=>{if(!Ne||!Ne.id){wr.error("Invalid student data");return}J(Ne),D(!0)},ft=Ne=>{if(!Ne||!Ne.id){wr.error("Invalid student data");return}J(Ne),A(!0)},$t=Ne=>r.jsx(Te,{variant:Ne?"default":"secondary",className:Ne?"bg-green-100 text-green-800 hover:bg-green-100":"bg-red-100 text-red-800 hover:bg-red-100",children:Ne?"Active":"Inactive"}),It=Ne=>{if(!Ne)return"N/A";const lt=a.find(vt=>vt.id===Number(Ne));return lt?lt.name:`Grade ${Ne}`},fr=async Ne=>{try{await e(n0(Ne)).unwrap(),wr.success("Grade created successfully"),U(!1),Se&&e(ko({schoolId:Se}))}catch(lt){wr.error(lt)}},yt=async({id:Ne,data:lt})=>{try{await e(a0({id:Ne,data:lt})).unwrap(),wr.success("Grade updated successfully"),se(!1),T(null),Se&&e(ko({schoolId:Se}))}catch(vt){wr.error(vt)}},sr=async()=>{if(ie!=null&&ie.id)try{await e(i0(ie.id)).unwrap(),wr.success("Grade deleted successfully"),V(!1),T(null)}catch(Ne){wr.error(Ne)}},Xt=Ne=>{T(Ne),se(!0)},zt=Ne=>{T(Ne),V(!0)},Ct=async Ne=>{ie!=null&&ie.id&&await yt({id:ie.id,data:Ne})};return!Se&&l.length===0?r.jsx("div",{className:"min-h-screen bg-background flex w-full",children:r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsx("main",{className:"flex-1 px-6 py-4 bg-background",children:r.jsx(Me,{children:r.jsx(Ve,{className:"py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Initializing"}),r.jsx("p",{className:"text-muted-foreground",children:"Setting up your school dashboard..."})]})})})})})}):!Se&&l.length>0?r.jsx("div",{className:"min-h-screen bg-background flex w-full",children:r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsx("main",{className:"flex-1 px-6 py-4 bg-background",children:r.jsx(Me,{children:r.jsx(Ve,{className:"py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"School Configuration Required"}),r.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:"We couldn't determine which school you're managing. Please contact your administrator to set up your school access."}),r.jsxs(fe,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Page"]})]})})})})})}):r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsx("main",{className:"flex-1 px-1 sm:px-2 py-1 w-full max-w-[98vw] mx-auto",children:r.jsxs(Me,{className:"shadow-lg border-0 rounded-xl",children:[r.jsx(Ke,{className:"pb-1 border-b border-border",children:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsxs(Je,{className:"text-xl font-bold text-foreground flex items-center gap-2",children:[r.jsx(hr,{className:"w-6 h-6 text-green-500"}),"Students List"]}),r.jsxs(fe,{onClick:()=>O(!0),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200 ml-auto",children:[r.jsx(Fa,{className:"mr-2 h-4 w-4"})," Add Student"]})]})}),r.jsx(Ve,{className:"pt-2",children:r.jsxs(ST,{value:N,onValueChange:C,className:"w-full",children:[r.jsxs(lS,{className:"grid w-full grid-cols-2 mb-4",children:[r.jsxs(Rd,{value:"students",className:"flex items-center gap-2",children:[r.jsx(hr,{className:"h-4 w-4"}),"Students"]}),r.jsxs(Rd,{value:"grades",className:"flex items-center gap-2",children:[r.jsx(Zb,{className:"h-4 w-4"}),"Grades"]})]}),r.jsxs(Td,{value:"students",className:"space-y-3",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(Oe,{placeholder:"Search students by name, admission number, section, or middle name...",value:F,onChange:Ne=>M(Ne.target.value),className:"pl-10"})]}),r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>y(!f),className:"flex items-center gap-2",children:[r.jsx(Vo,{className:"h-4 w-4"}),"Filters"]}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>{Se&&(e(Xa({schoolId:Se})),e(ua({schoolId:Se})),e(ko({schoolId:Se})))},className:"flex items-center gap-2",children:[r.jsx(iv,{className:"h-4 w-4"}),"Refresh"]}),r.jsx(ju,{data:{headers:["Name","Admission Number","Grade","Section","Gender","Transport Status"],data:ne.map(Ne=>({name:`${Ne.first_name||""} ${Ne.middle_name||""} ${Ne.last_name||""}`,admission_number:Ne.admission_number||"",grade:It(Ne.grade),section:Ne.section||"",gender:Ne.gender||"",transport_status:Ne.transport_enabled?"Active":"Inactive"})),fileName:"students_export",title:"Students Directory"},className:"border-border hover:bg-accent px-3 py-2"})]})]}),f&&r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-sm font-medium",children:"Status"}),r.jsxs(Jt,{value:G,onValueChange:ee,children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Status"}),r.jsx(Re,{value:"active",children:"Active Transport"}),r.jsx(Re,{value:"inactive",children:"Inactive Transport"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-sm font-medium",children:"Grade"}),r.jsxs(Jt,{value:g,onValueChange:j,children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Grades"}),a.map(Ne=>r.jsx(Re,{value:Ne.id.toString(),children:Ne.name},Ne.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-sm font-medium",children:"Gender"}),r.jsxs(Jt,{value:v,onValueChange:w,children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Genders"}),r.jsx(Re,{value:"male",children:"Male"}),r.jsx(Re,{value:"female",children:"Female"}),r.jsx(Re,{value:"other",children:"Other"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-sm font-medium",children:"Per Page"}),r.jsxs(Jt,{value:Ge.toString(),onValueChange:Ne=>{gt(Number(Ne)),ce(1)},children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"5",children:"5"}),r.jsx(Re,{value:"10",children:"10"}),r.jsx(Re,{value:"20",children:"20"}),r.jsx(Re,{value:"50",children:"50"})]})]})]})]}),d.size>0&&r.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[d.size," student(s) selected"]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>X(!0),className:"flex items-center gap-2 text-green-700 border-green-300 hover:bg-green-50",children:[r.jsx($P,{className:"h-4 w-4"}),"Activate Transport"]}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>X(!1),className:"flex items-center gap-2 text-orange-700 border-orange-300 hover:bg-orange-50",children:[r.jsx(XU,{className:"h-4 w-4"}),"Deactivate Transport"]}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:ae,className:"flex items-center gap-2 text-red-700 border-red-300 hover:bg-red-50",children:[r.jsx(Da,{className:"h-4 w-4"}),"Delete Selected"]})]})]})]}),s&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Gr,{className:"h-8 w-48"}),r.jsx(Gr,{className:"h-8 w-32"})]}),r.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((Ne,lt)=>r.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[r.jsx(Gr,{className:"h-4 w-4"}),r.jsx(Gr,{className:"h-10 w-10 rounded-full"}),r.jsxs("div",{className:"space-y-2 flex-1",children:[r.jsx(Gr,{className:"h-4 w-32"}),r.jsx(Gr,{className:"h-3 w-24"})]}),r.jsx(Gr,{className:"h-4 w-20"}),r.jsx(Gr,{className:"h-4 w-16"}),r.jsx(Gr,{className:"h-4 w-12"}),r.jsx(Gr,{className:"h-8 w-8"})]},lt))})]}),n&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unable to Load Students"}),r.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:"We encountered an issue while loading your students. Please try again."}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-red-600 bg-red-50 px-4 py-2 rounded-md max-w-md mx-auto",children:n}),r.jsxs(fe,{onClick:()=>Se&&e(Xa({schoolId:Se})),variant:"outline",className:"mt-4",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})]}),!s&&!n&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"sticky top-0 bg-white",children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("input",{type:"checkbox",checked:d.size===he.length&&he.length>0,onChange:_t,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"})})}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>st("first_name"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Student",h.key==="first_name"&&(h.direction==="asc"?r.jsx(xm,{className:"h-4 w-4"}):r.jsx(gm,{className:"h-4 w-4"}))]})}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>st("admission_number"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Admission #",h.key==="admission_number"&&(h.direction==="asc"?r.jsx(xm,{className:"h-4 w-4"}):r.jsx(gm,{className:"h-4 w-4"}))]})}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>st("grade"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Grade & Section",h.key==="grade"&&(h.direction==="asc"?r.jsx(xm,{className:"h-4 w-4"}):r.jsx(gm,{className:"h-4 w-4"}))]})}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>st("gender"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Gender",h.key==="gender"&&(h.direction==="asc"?r.jsx(xm,{className:"h-4 w-4"}):r.jsx(gm,{className:"h-4 w-4"}))]})}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>st("transport_enabled"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Status",h.key==="transport_enabled"&&(h.direction==="asc"?r.jsx(xm,{className:"h-4 w-4"}):r.jsx(gm,{className:"h-4 w-4"}))]})}),r.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:he.map(Ne=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-2 px-3",children:r.jsx("input",{type:"checkbox",checked:d.has(Ne.id),onChange:()=>pe(Ne.id),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"})}),r.jsx("td",{className:"py-2 px-3",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(hr,{className:"h-4 w-4 text-green-600"})}),r.jsxs("div",{className:"ml-2",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Ne.first_name||""," ",Ne.middle_name||""," ",Ne.last_name||""]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",Ne.id||"N/A"]})]})]})}),r.jsx("td",{className:"py-2 px-3",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:Ne.admission_number||"N/A"})}),r.jsx("td",{className:"py-2 px-3",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:It(Ne.grade)}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Section ",Ne.section||"N/A"]})]})}),r.jsx("td",{className:"py-2 px-3",children:r.jsx("span",{className:"text-sm text-gray-900 capitalize",children:Ne.gender||"N/A"})}),r.jsx("td",{className:"py-2 px-3",children:$t(Ne.transport_enabled)}),r.jsx("td",{className:"py-2 px-3 text-right",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",size:"sm",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsxs(Wt,{onClick:()=>Ze(Ne),children:[r.jsx(ls,{className:"h-4 w-4 mr-2"}),"View Details"]}),r.jsxs(Wt,{onClick:()=>nt(Ne),children:[r.jsx(na,{className:"h-4 w-4 mr-2"}),"Edit Student"]}),r.jsxs(Wt,{onClick:()=>ft(Ne),className:"text-red-600 focus:text-red-600",children:[r.jsx(Da,{className:"h-4 w-4 mr-2"}),"Delete Student"]})]})]})})]},Ne.id))})]}),he.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(hr,{className:"h-8 w-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:F||G!=="all"?"No Students Found":"No Students Yet"}),r.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:F||G!=="all"?"No students match your current search or filter criteria. Try adjusting your search terms or filters.":"Get started by adding your first student to the system."}),!F&&G==="all"&&r.jsxs(fe,{onClick:()=>O(!0),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Add Your First Student"]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 p-6 border-t border-gray-200 mt-0",children:[r.jsxs("div",{className:"text-sm text-gray-600 mb-2 sm:mb-0",children:["Showing ",et+1,"-",Math.min(Q,ne.length)," of"," ",ne.length," students"]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>ce(ue-1),disabled:ue===1,children:[r.jsx(cf,{className:"h-4 w-4"}),"Previous"]}),r.jsx("div",{className:"flex items-center gap-1",children:(()=>{const Ne=[];if(dt<=5)for(let lt=1;lt<=dt;lt++)Ne.push(lt);else ue<=3?Ne.push(1,2,3,4,"...",dt):ue>=dt-2?Ne.push(1,"...",dt-3,dt-2,dt-1,dt):Ne.push(1,"...",ue-1,ue,ue+1,"...",dt);return Ne.map((lt,vt)=>lt==="..."?r.jsx("span",{className:"px-2",children:"..."},"ellipsis-"+vt):r.jsx(fe,{variant:ue===lt?"default":"outline",size:"sm",onClick:()=>ce(Number(lt)),className:"w-8 h-8 p-0",children:lt},lt))})()}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>ce(ue+1),disabled:ue===dt,children:["Next",r.jsx(ru,{className:"h-4 w-4"})]}),r.jsxs("span",{className:"ml-4 text-xs text-gray-500 hidden sm:inline",children:["Page ",ue," of ",dt]})]})]})]})]}),r.jsxs(Td,{value:"grades",className:"space-y-3",children:[r.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(Oe,{placeholder:"Search grades by name, level, or description...",value:te,onChange:Ne=>me(Ne.target.value),className:"pl-10"})]})}),i&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading Grades"}),r.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch your grade data..."})]}),o&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unable to Load Grades"}),r.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:"We encountered an issue while loading your grades. Please try again."}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-red-600 bg-red-50 px-4 py-2 rounded-md max-w-md mx-auto",children:o}),r.jsxs(fe,{onClick:()=>Se&&e(ko({schoolId:Se})),variant:"outline",className:"mt-4",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})]}),!i&&!o&&r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"sticky top-0 bg-white",children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Grade"}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Level"}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Capacity"}),r.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:Fe.map(Ne=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-2 px-3",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Zb,{className:"h-4 w-4 text-blue-600"})}),r.jsxs("div",{className:"ml-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:Ne.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",Ne.id]})]})]})}),r.jsx("td",{className:"py-2 px-3",children:r.jsx(Te,{variant:"outline",className:"text-xs",children:Ne.level})}),r.jsx("td",{className:"py-2 px-3",children:r.jsx("p",{className:"text-sm text-gray-900 max-w-xs truncate",children:Ne.description})}),r.jsx("td",{className:"py-2 px-3",children:r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Ne.capacity," students"]})}),r.jsx("td",{className:"py-2 px-3 text-right",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",size:"sm",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsxs(Wt,{onClick:()=>Xt(Ne),children:[r.jsx(na,{className:"h-4 w-4 mr-2"}),"Edit Grade"]}),r.jsxs(Wt,{onClick:()=>zt(Ne),className:"text-red-600 focus:text-red-600",children:[r.jsx(Da,{className:"h-4 w-4 mr-2"}),"Delete Grade"]})]})]})})]},Ne.id))})]}),Fe.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(Zb,{className:"h-8 w-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:te?"No Grades Found":"No Grades Yet"}),r.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:te?"No grades match your current search criteria. Try adjusting your search terms.":"Get started by adding your first grade to the system."}),!te&&r.jsxs(fe,{onClick:()=>U(!0),className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Add Your First Grade"]})]}),xe>1&&r.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",De+1,"-",Math.min(Be,jt.length)," of"," ",jt.length," grades"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>Ue(Ce-1),disabled:Ce===1,children:[r.jsx(cf,{className:"h-4 w-4"}),"Previous"]}),r.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:xe},(Ne,lt)=>lt+1).map(Ne=>r.jsx(fe,{variant:Ce===Ne?"default":"outline",size:"sm",onClick:()=>Ue(Ne),className:"w-8 h-8 p-0",children:Ne},Ne))}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>Ue(Ce+1),disabled:Ce===xe,children:["Next",r.jsx(ru,{className:"h-4 w-4"})]})]})]})]})]})]})})]})})}),r.jsx(a3,{isOpen:k,onClose:()=>O(!1),onSubmit:ve,schoolId:Se,editMode:!1},"create"),r.jsx(a3,{isOpen:R,onClose:()=>{console.log("Closing edit modal"),E(!1),J(null)},onSubmit:Ie,schoolId:Se,editMode:!0,student:K},(K==null?void 0:K.id)||"create"),r.jsx(JZ,{isOpen:I,onClose:()=>{D(!1),J(null)},student:K}),K&&r.jsx(lu,{open:P,onOpenChange:A,children:r.jsxs(zc,{children:[r.jsxs(Uc,{children:[r.jsx(Vc,{children:"Are you sure?"}),r.jsxs(Hc,{children:['This action cannot be undone. This will permanently delete the student "',K.first_name||"Unknown"," ",K.last_name||"",'" and remove their data from our servers.']})]}),r.jsxs(qc,{children:[r.jsx(Gc,{children:"Cancel"}),r.jsx(Wc,{onClick:ze,className:"bg-red-600 hover:bg-red-700",disabled:!K.id,children:"Delete Student"})]})]})}),r.jsx(i3,{isOpen:$,onClose:()=>U(!1),onSubmit:fr,schoolId:Se,editMode:!1}),r.jsx(i3,{isOpen:de,onClose:()=>{se(!1),T(null)},onSubmit:Ct,schoolId:Se,editMode:!0,grade:ie}),r.jsx(lu,{open:ge,onOpenChange:V,children:r.jsxs(zc,{children:[r.jsxs(Uc,{children:[r.jsx(Vc,{children:"Are you sure?"}),r.jsxs(Hc,{children:['This action cannot be undone. This will permanently delete the grade "',(ie==null?void 0:ie.name)||"Unknown",'" and remove its data from our servers.']})]}),r.jsxs(qc,{children:[r.jsx(Gc,{children:"Cancel"}),r.jsx(Wc,{onClick:sr,className:"bg-red-600 hover:bg-red-700",disabled:!(ie!=null&&ie.id),children:"Delete Grade"})]})]})})]})}function tX({isOpen:e,onClose:t,onSubmit:s}){var v,w,N,C,k,O;const n=ad(),{roles:a,loading:i}=ma(R=>R.roles),[o,l]=x.useState({employee_id:"",role:"",status:"active",user:{first_name:"",last_name:"",email:"",phone_number:"",password:"",confirm_password:""}}),[c,d]=x.useState({}),[u,h]=x.useState(!1),[p,f]=x.useState(!1);x.useEffect(()=>{e&&n(qd())},[e,n]);const y=()=>{const R={};return o.employee_id?/^EMP\d{3}$/.test(o.employee_id)||(R.employee_id="Employee ID must be in format EMP001"):R.employee_id="Employee ID is required",o.role||(R.role="Role is required"),o.user.phone_number?/^\+254\d{9}$/.test(o.user.phone_number)||(R.user={...R.user,phone_number:"Phone number must be in format +254XXXXXXXXX"}):R.user={...R.user,phone_number:"Phone number is required"},o.user.password?o.user.password.length<8&&(R.user={...R.user,password:"Password must be at least 8 characters long"}):R.user={...R.user,password:"Password is required"},o.user.password!==o.user.confirm_password&&(R.user={...R.user,confirm_password:"Passwords do not match"}),d(R),Object.keys(R).length===0},g=R=>{R.preventDefault(),y()&&(s({...o,role:parseInt(o.role),school:0}),t())},j=R=>{const{name:E,value:I}=R.target;if(E.startsWith("user.")){const D=E.split(".")[1];l(P=>({...P,user:{...P.user,[D]:I}}))}else l(D=>({...D,[E]:I}));if(E.includes(".")){const[D,P]=E.split(".");d(A=>({...A,[D]:{...A[D],[P]:void 0}}))}else d(D=>({...D,[E]:void 0}))};return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Add New Staff Member"})}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"employee_id",children:"Employee ID"}),r.jsx(Oe,{id:"employee_id",name:"employee_id",value:o.employee_id,onChange:j,placeholder:"EMP001",required:!0,className:c.employee_id?"border-red-500":""}),c.employee_id&&r.jsx("p",{className:"text-sm text-red-500",children:c.employee_id})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"role",children:"Role"}),r.jsxs("select",{id:"role",name:"role",value:o.role,onChange:j,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[r.jsx("option",{value:"",children:"Select a role"}),i?r.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):Array.isArray(a)&&a.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]}),c.role&&r.jsx("p",{className:"text-sm text-red-500",children:c.role})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"first_name",children:"First Name"}),r.jsx(Oe,{id:"first_name",name:"user.first_name",value:o.user.first_name,onChange:j,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"last_name",children:"Last Name"}),r.jsx(Oe,{id:"last_name",name:"user.last_name",value:o.user.last_name,onChange:j,required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"email",children:"Email Address"}),r.jsx(Oe,{id:"email",name:"user.email",type:"email",value:o.user.email,onChange:j,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"phone_number",children:"Phone Number"}),r.jsx(Oe,{id:"phone_number",name:"user.phone_number",value:o.user.phone_number,onChange:j,placeholder:"+254XXXXXXXXX",required:!0,className:(v=c.user)!=null&&v.phone_number?"border-red-500":""}),((w=c.user)==null?void 0:w.phone_number)&&r.jsx("p",{className:"text-sm text-red-500",children:c.user.phone_number})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"password",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Oe,{id:"password",name:"user.password",type:u?"text":"password",value:o.user.password,onChange:j,required:!0,className:(N=c.user)!=null&&N.password?"border-red-500":""}),r.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?r.jsx(pl,{size:20}):r.jsx(ls,{size:20})})]}),((C=c.user)==null?void 0:C.password)&&r.jsx("p",{className:"text-sm text-red-500",children:c.user.password})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"confirm_password",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Oe,{id:"confirm_password",name:"user.confirm_password",type:p?"text":"password",value:o.user.confirm_password,onChange:j,required:!0,className:(k=c.user)!=null&&k.confirm_password?"border-red-500":""}),r.jsx("button",{type:"button",onClick:()=>f(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:p?r.jsx(pl,{size:20}):r.jsx(ls,{size:20})})]}),((O=c.user)==null?void 0:O.confirm_password)&&r.jsx("p",{className:"text-sm text-red-500",children:c.user.confirm_password})]}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),r.jsx(fe,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white",children:"Add Staff"})]})]})]})})}const rX=["manage_staff","manage_students","manage_transport","manage_security","view_reports","manage_finance","manage_attendance","manage_timetable","manage_exams","manage_parents","manage_vehicles","manage_routes","manage_trips","manage_grades","manage_settings"];function sX({isOpen:e,onClose:t,schoolId:s,onSubmit:n}){const[a,i]=x.useState({name:"",description:"",school:s||1,permissions:[],is_system_role:!1,parent_role:void 0}),o=c=>{c.preventDefault(),n(a)},l=c=>{i(d=>({...d,permissions:d.permissions.includes(c)?d.permissions.filter(u=>u!==c):[...d.permissions,c]}))};return x.useEffect(()=>{s&&i(c=>({...c,school:s}))},[s]),r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Create New Role"})}),r.jsxs("form",{onSubmit:o,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"name",children:"Role Name"}),r.jsx(Oe,{id:"name",value:a.name,onChange:c=>i(d=>({...d,name:c.target.value})),placeholder:"e.g., school_admin",required:!0})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"description",children:"Description"}),r.jsx(Ma,{id:"description",value:a.description,onChange:c=>i(d=>({...d,description:c.target.value})),placeholder:"Enter role description",required:!0})]}),r.jsxs("div",{children:[r.jsx(le,{children:"Permissions"}),r.jsx("div",{className:"grid grid-cols-2 gap-4 mt-2",children:rX.map(c=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Oh,{id:c,checked:a.permissions.includes(c),onCheckedChange:()=>l(c)}),r.jsx("label",{htmlFor:c,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:c.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")})]},c))})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Oh,{id:"is_system_role",checked:a.is_system_role,onCheckedChange:c=>i(d=>({...d,is_system_role:c}))}),r.jsx("label",{htmlFor:"is_system_role",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"System Role"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),r.jsx(fe,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white",children:"Create Role"})]})]})]})})}function nX(){var E;const e=ns(),{staff:t,loading:s,error:n}=At(I=>I.staff),{roles:a}=At(I=>I.roles),{schools:i}=At(I=>I.schools),l=JSON.parse(localStorage.getItem("profile")||"{}"),[c,d]=x.useState(!1),[u,h]=x.useState(!1),[p,f]=x.useState("staff"),[y,g]=x.useState(null),[j,v]=x.useState(null);console.log("User profile:",l),console.log("Schools from Redux:",i),console.log("User ID:",l==null?void 0:l.id);let w=(i==null?void 0:i.filter(I=>I.admin===(l==null?void 0:l.id)))||[];w.length===0&&i&&i.length>0&&(console.log("No schools found with admin ID, trying alternatives..."),w=i.filter(I=>{var D;return((D=I.admin_details)==null?void 0:D.id)===(l==null?void 0:l.id)})||[],w.length===0&&(console.log("Using first available school as fallback"),w=[i[0]]));const N=y||((E=w[0])==null?void 0:E.id);console.log("Filtered schools:",w),console.log("Selected school ID:",N),x.useEffect(()=>{console.log("useEffect triggered - schoolId:",N),N?(e(Ch({schoolId:N})),e(qd(N))):(console.log("No schoolId found, fetching schools..."),e(vl()).catch(I=>{console.error("Failed to fetch schools:",I)}))},[e,N]),x.useEffect(()=>{w.length>0&&!y&&(g(w[0].id),console.log("Auto-selecting school:",w[0].id))},[w,y]);const C=async I=>{if(!N){wr.error("Error","No school found for the current admin");return}try{const D=await e(kh({...I,school:N}));if(kh.fulfilled.match(D))wr.success("Staff member added successfully"),d(!1);else if(kh.rejected.match(D)){const P=typeof D.payload=="string"?D.payload:"Failed to add staff member";wr.error("Error",P)}}catch(D){console.error("Staff creation error:",D);let P="Failed to add staff member";if(D instanceof Error)try{const A=JSON.parse(D.message);typeof A=="object"&&A!==null?P=JSON.stringify(A,null,2):P=D.message}catch{P=D.message}else P=String(D);wr.error("Error",P)}},k=async I=>{if(console.log("Creating role with data:",I),console.log("Current schoolId:",N),console.log("Available schools:",i),!N){const D=`No school found for the current admin. User ID: ${l==null?void 0:l.id}, Available schools: ${JSON.stringify(i)}`;console.error(D),wr.error("Error","No school found for the current admin. Please check your account setup.");return}try{const D=await e(Ah({...I,school:N}));if(Ah.fulfilled.match(D))wr.success("Role created successfully"),h(!1),e(qd(N));else if(Ah.rejected.match(D)){const P=typeof D.payload=="string"?D.payload:"Failed to create role";wr.error("Error",P)}}catch(D){wr.error("Error","Failed to create role"),console.error("Error creating role:",D)}},O=async()=>{if(console.log("Creating default roles for schoolId:",N),console.log("Available schools:",i),!N){const I=`No school found for the current admin. User ID: ${l==null?void 0:l.id}, Available schools: ${JSON.stringify(i)}`;console.error(I),wr.error("Error","No school found for the current admin. Please check your account setup.");return}try{const I=await e(Ph(N));if(Ph.fulfilled.match(I))wr.success("Default roles created successfully"),e(qd(N));else if(Ph.rejected.match(I)){const D=typeof I.payload=="string"?I.payload:"Failed to create default roles";wr.error("Error",D)}}catch(I){wr.error("Error","Failed to create default roles"),console.error("Error creating default roles:",I)}},R=I=>{const D=a==null?void 0:a.find(P=>P.id===I);return D?D.name:"Unknown Role"};if(j)return r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"bg-white rounded-lg shadow p-8 max-w-md text-center",children:[r.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),r.jsx("p",{className:"text-gray-600 mb-4",children:j}),r.jsx("button",{onClick:()=>{v(null),window.location.reload()},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded",children:"Refresh Page"})]})});try{return r.jsxs("div",{className:"min-h-screen bg-gray-100 flex w-full",children:[r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsxs("main",{className:"flex-1 px-8 py-6 bg-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(hr,{className:"text-green-500",size:32}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Staff Management"}),!1]}),i&&i.length>1&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select School:"}),r.jsx("select",{value:y||N||"",onChange:I=>{const D=parseInt(I.target.value);g(D),console.log("School changed to:",D)},className:"border border-gray-300 rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:i.map(I=>r.jsx("option",{value:I.id,children:I.name},I.id))})]}),r.jsxs("div",{className:"flex gap-4",children:[p==="staff"&&r.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-2 rounded shadow",onClick:()=>d(!0),children:"Add New Staff"}),p==="roles"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded shadow flex items-center gap-2",onClick:O,children:[r.jsx(Xn,{size:20}),"Create Default Roles"]}),r.jsxs("button",{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-2 rounded shadow flex items-center gap-2",onClick:()=>h(!0),children:[r.jsx(Xn,{size:20}),"Create Custom Role"]})]})]})]}),r.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[r.jsx("button",{onClick:()=>f("staff"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${p==="staff"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hr,{size:20}),"Staff Members (",(t==null?void 0:t.length)||0,")"]})}),r.jsx("button",{onClick:()=>f("roles"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${p==="roles"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xn,{size:20}),"Roles (",(a==null?void 0:a.length)||0,")"]})})]}),s&&r.jsx("div",{className:"text-center py-4",children:"Loading..."}),n&&r.jsx("div",{className:"text-red-500 text-center py-4",children:n}),p==="staff"&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-0 overflow-x-auto",children:[r.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Staff Members"})}),!t||t.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(hr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No staff members"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first staff member."}),r.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded shadow",onClick:()=>d(!0),children:"Add New Staff"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"First Name"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Name"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone Number"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email Address"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:t==null?void 0:t.map(I=>{var D,P,A,$;return r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((D=I.user)==null?void 0:D.first_name)||"N/A"}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((P=I.user)==null?void 0:P.last_name)||"N/A"}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((A=I.user)==null?void 0:A.phone_number)||"N/A"}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:(($=I.user)==null?void 0:$.email)||"N/A"}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:R(I.role)}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${I.status==="active"?"bg-green-100 text-green-600":"bg-red-100 text-red-500"}`,children:I.status||"Unknown"})}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:r.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:r.jsx(nv,{size:20})})})]},I.employee_id)})})]}),r.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t bg-gray-50 text-sm text-gray-600",children:[r.jsxs("span",{children:["Showing 1-",(t==null?void 0:t.length)||0," of ",(t==null?void 0:t.length)||0]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 rounded hover:bg-gray-200",disabled:!0,children:r.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{className:"p-1 rounded hover:bg-gray-200",children:r.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]}),p==="roles"&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-0 overflow-x-auto",children:[r.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Available Roles"})}),!a||a.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Xn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No roles available"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Create default roles or add custom roles to get started."}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-4 py-2 rounded shadow flex items-center gap-2",onClick:O,children:[r.jsx(Xn,{size:16}),"Create Default Roles"]}),r.jsxs("button",{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded shadow flex items-center gap-2",onClick:()=>h(!0),children:[r.jsx(Xn,{size:16}),"Create Custom Role"]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role Name"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Permissions"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:a==null?void 0:a.map(I=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:I.name||"Unnamed Role"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"text-sm text-gray-600 max-w-xs",children:I.description||"No description available"})}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${I.is_system_role?"bg-purple-100 text-purple-600":"bg-blue-100 text-blue-600"}`,children:I.is_system_role?"System":"Custom"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.permissions&&I.permissions.slice(0,3).map(D=>r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:D.replace("_"," ")},D)),I.permissions&&I.permissions.length>3&&r.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",I.permissions.length-3," more"]})]})}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:r.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:r.jsx(nv,{size:20})})})]},I.id))})]}),r.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t bg-gray-50 text-sm text-gray-600",children:[r.jsxs("span",{children:["Showing 1-",(a==null?void 0:a.length)||0," of ",(a==null?void 0:a.length)||0]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 rounded hover:bg-gray-200",disabled:!0,children:r.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{className:"p-1 rounded hover:bg-gray-200",children:r.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]})]})}),r.jsx(tX,{isOpen:c,onClose:()=>d(!1),onSubmit:C}),r.jsx(sX,{isOpen:u,onClose:()=>h(!1),schoolId:N,onSubmit:k})]})}catch(I){return console.error("Error rendering Staff component:",I),v(I instanceof Error?I.message:"An unexpected error occurred"),null}}function aX({parent:e,isOpen:t,onClose:s}){var a,i,o,l,c,d;if(!e)return null;const n=u=>({email:"bg-blue-100 text-blue-800",phone:"bg-green-100 text-green-800",sms:"bg-purple-100 text-purple-800"})[u]||"bg-gray-100 text-gray-800";return r.jsx(Hr,{open:t,onOpenChange:s,children:r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsxs($r,{className:"flex items-center gap-2",children:[r.jsx(Qi,{className:"h-5 w-5 text-green-600"}),"Parent Details"]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-sm font-medium text-gray-600",children:"First Name"}),r.jsx("p",{className:"mt-1 text-gray-900",children:((a=e.user_data)==null?void 0:a.first_name)||((i=e.user_full_name)==null?void 0:i.split(" ")[0])||"-"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-sm font-medium text-gray-600",children:"Last Name"}),r.jsx("p",{className:"mt-1 text-gray-900",children:((o=e.user_data)==null?void 0:o.last_name)||((l=e.user_full_name)==null?void 0:l.split(" ").slice(1).join(" "))||"-"})]})]})]}),r.jsx(Xm,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(zo,{className:"h-4 w-4"}),"Contact Information"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs(le,{className:"text-sm font-medium text-gray-600 flex items-center gap-1",children:[r.jsx(Oo,{className:"h-3 w-3"}),"Email Address"]}),r.jsx("p",{className:"mt-1 text-gray-900",children:((c=e.user_data)==null?void 0:c.email)||e.user_email||"-"})]}),r.jsxs("div",{children:[r.jsxs(le,{className:"text-sm font-medium text-gray-600 flex items-center gap-1",children:[r.jsx(zo,{className:"h-3 w-3"}),"Phone Number"]}),r.jsx("p",{className:"mt-1 text-gray-900",children:((d=e.user_data)==null?void 0:d.phone_number)||e.phone_number||"-"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-sm font-medium text-gray-600",children:"Secondary Phone"}),r.jsx("p",{className:"mt-1 text-gray-900",children:e.secondary_phone||"-"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-sm font-medium text-gray-600",children:"Emergency Contact"}),r.jsx("p",{className:"mt-1 text-gray-900",children:e.emergency_contact||"-"})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx(le,{className:"text-sm font-medium text-gray-600",children:"Preferred Contact Method"}),r.jsx("div",{className:"mt-1",children:r.jsx(Te,{className:n(e.preferred_contact_method||"email"),children:e.preferred_contact_method||"email"})})]})]}),r.jsx(Xm,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Ks,{className:"h-4 w-4"}),"Address"]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-sm font-medium text-gray-600",children:"Home Address"}),r.jsx("p",{className:"mt-1 text-gray-900",children:e.address||"-"})]})]}),r.jsx(Xm,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(hr,{className:"h-4 w-4"}),"Authorized Pickup Persons"]}),(()=>{var h;const u=(h=e.authorized_pickup_persons)==null?void 0:h.persons;return u&&Array.isArray(u)&&u.length>0?r.jsx("div",{className:"space-y-3",children:u.map((p,f)=>r.jsx("div",{className:"p-3 border rounded-lg bg-gray-50",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-sm font-medium text-gray-600",children:"Name"}),r.jsx("p",{className:"mt-1 text-gray-900",children:p.name||"-"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-sm font-medium text-gray-600",children:"Relation"}),r.jsx("p",{className:"mt-1 text-gray-900",children:p.relation||"-"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-sm font-medium text-gray-600",children:"Phone"}),r.jsx("p",{className:"mt-1 text-gray-900",children:p.phone||"-"})]})]})},f))}):r.jsx("p",{className:"text-gray-500 italic",children:"No authorized pickup persons listed"})})()]})]})]})})}function iX({parent:e,isOpen:t,onClose:s,onSave:n}){var j,v,w,N;const[a,i]=x.useState({}),[o,l]=x.useState([]),[c,d]=x.useState(!1);x.useEffect(()=>{var C,k,O,R,E,I,D,P,A;if(e){i({address:e.address||"",emergency_contact:e.emergency_contact||"",preferred_contact_method:e.preferred_contact_method||"email",secondary_phone:e.secondary_phone||"",user_data:{first_name:((C=e.user_data)==null?void 0:C.first_name)||((k=e.user_full_name)==null?void 0:k.split(" ")[0])||"",last_name:((O=e.user_data)==null?void 0:O.last_name)||((R=e.user_full_name)==null?void 0:R.split(" ").slice(1).join(" "))||"",email:((E=e.user_data)==null?void 0:E.email)||e.user_email||"",phone_number:((I=e.user_data)==null?void 0:I.phone_number)||e.phone_number||"",user_type:((D=e.user_data)==null?void 0:D.user_type)||"parent",profile_image:((P=e.user_data)==null?void 0:P.profile_image)||null},authorized_pickup_persons:e.authorized_pickup_persons||{persons:[]}});const $=(A=e.authorized_pickup_persons)==null?void 0:A.persons;$&&Array.isArray($)?l($):l([])}},[e]);const u=C=>{const{name:k,value:O}=C.target;if(k.startsWith("user_data.")){const R=k.split(".")[1];i(E=>({...E,user_data:{...E.user_data,[R]:O}}))}else i(R=>({...R,[k]:O}))},h=(C,k)=>{i(O=>({...O,[C]:k}))},p=()=>{l([...o,{name:"",relation:"",phone:""}])},f=C=>{l(o.filter((k,O)=>O!==C))},y=(C,k,O)=>{const R=[...o];R[C]={...R[C],[k]:O},l(R),i(E=>({...E,authorized_pickup_persons:{persons:R}}))},g=async C=>{if(C.preventDefault(),!!(e!=null&&e.id)){d(!0);try{await n(e.id,a),s()}catch(k){console.error("Error updating parent:",k)}finally{d(!1)}}};return e?r.jsx(Hr,{open:t,onOpenChange:s,children:r.jsxs(Or,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Edit Parent"})}),r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.first_name",children:"First Name"}),r.jsx(Oe,{id:"user_data.first_name",name:"user_data.first_name",value:((j=a.user_data)==null?void 0:j.first_name)||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.last_name",children:"Last Name"}),r.jsx(Oe,{id:"user_data.last_name",name:"user_data.last_name",value:((v=a.user_data)==null?void 0:v.last_name)||"",onChange:u,required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.email",children:"Email"}),r.jsx(Oe,{id:"user_data.email",name:"user_data.email",type:"email",value:((w=a.user_data)==null?void 0:w.email)||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.phone_number",children:"Phone Number"}),r.jsx(Oe,{id:"user_data.phone_number",name:"user_data.phone_number",value:((N=a.user_data)==null?void 0:N.phone_number)||"",onChange:u,required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"address",children:"Address"}),r.jsx(Ma,{id:"address",name:"address",value:a.address||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"emergency_contact",children:"Emergency Contact"}),r.jsx(Oe,{id:"emergency_contact",name:"emergency_contact",value:a.emergency_contact||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"secondary_phone",children:"Secondary Phone"}),r.jsx(Oe,{id:"secondary_phone",name:"secondary_phone",value:a.secondary_phone||"",onChange:u})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"preferred_contact_method",children:"Preferred Contact Method"}),r.jsxs(Jt,{value:a.preferred_contact_method||"email",onValueChange:C=>h("preferred_contact_method",C),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select contact method"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"email",children:"Email"}),r.jsx(Re,{value:"phone",children:"Phone"}),r.jsx(Re,{value:"sms",children:"SMS"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(le,{children:"Authorized Pickup Persons"}),r.jsxs(fe,{type:"button",variant:"outline",onClick:p,className:"text-sm",children:[r.jsx(Fa,{className:"h-4 w-4 mr-2"})," Add Person"]})]}),Array.isArray(o)&&o.map((C,k)=>r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Name"}),r.jsx(Oe,{value:C.name,onChange:O=>y(k,"name",O.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Relation"}),r.jsx(Oe,{value:C.relation,onChange:O=>y(k,"relation",O.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Phone"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{value:C.phone,onChange:O=>y(k,"phone",O.target.value),required:!0}),k>0&&r.jsx(fe,{type:"button",variant:"destructive",onClick:()=>f(k),className:"px-2",children:""})]})]})]},k))]}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:s,disabled:c,children:"Cancel"}),r.jsx(fe,{type:"submit",className:"bg-green-500 hover:bg-green-600",disabled:c,children:c?"Saving...":"Save Changes"})]})]})]})}):null}var cS="Progress",dS=100,[oX,mre]=xa(cS),[lX,cX]=oX(cS),_T=x.forwardRef((e,t)=>{const{__scopeProgress:s,value:n=null,max:a,getValueLabel:i=dX,...o}=e;(a||a===0)&&!o3(a)&&console.error(uX(`${a}`,"Progress"));const l=o3(a)?a:dS;n!==null&&!l3(n,l)&&console.error(hX(`${n}`,"Progress"));const c=l3(n,l)?n:null,d=kv(c)?i(c,l):void 0;return r.jsx(lX,{scope:s,value:c,max:l,children:r.jsx(Ot.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":kv(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":AT(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});_T.displayName=cS;var CT="ProgressIndicator",kT=x.forwardRef((e,t)=>{const{__scopeProgress:s,...n}=e,a=cX(CT,s);return r.jsx(Ot.div,{"data-state":AT(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});kT.displayName=CT;function dX(e,t){return`${Math.round(e/t*100)}%`}function AT(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function kv(e){return typeof e=="number"}function o3(e){return kv(e)&&!isNaN(e)&&e>0}function l3(e,t){return kv(e)&&!isNaN(e)&&e<=t&&e>=0}function uX(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${dS}\`.`}function hX(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${dS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var PT=_T,fX=kT;const xw=x.forwardRef(({className:e,value:t,...s},n)=>r.jsx(PT,{ref:n,className:it("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:r.jsx(fX,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));xw.displayName=PT.displayName;const ET=async(e,t)=>{var s,n,a;try{const i=xX(),o=new FormData;o.append("file",e),o.append("upload_type",t);let l=localStorage.getItem("schoolId");if(!l){const h=localStorage.getItem("persist:auth");if(h)try{const p=JSON.parse(h),f=JSON.parse(p.user||"{}");l=f.school_id||f.school,console.log(" Found school_id in persist:auth:",l)}catch(p){console.log("Error parsing persist:auth for school_id:",p)}}console.log(" Upload - Final school_id being used:",l),l?(o.append("school_id",l),console.log(" Adding school_id to FormData:",l)):console.warn(" No school_id found in any source"),console.log(" FormData contents:");for(const[h,p]of o.entries())h==="file"?console.log(`  ${h}:`,p.name,`(${p.size} bytes)`):console.log(`  ${h}:`,p);let c=localStorage.getItem("token");if(!c){const h=localStorage.getItem("persist:auth");if(h)try{const p=JSON.parse(h);c=JSON.parse(p.user||"{}").token}catch(p){console.log("Error parsing persist:auth:",p)}}c&&(c.startsWith('"')&&c.endsWith('"')&&(c=JSON.parse(c)),Mt.defaults.headers.common.Authorization=`Bearer ${c}`);const d={headers:{...c?{Authorization:`Bearer ${c}`}:{},"Content-Type":"multipart/form-data"}},u=await Mt.post(Tt.CSV_UPLOAD,o,d);return{success:!0,message:u.data.message,created_count:u.data.created_count,skipped_count:u.data.skipped_count,errors:u.data.errors||[],created_users:u.data.created_users||[]}}catch(i){return console.error("CSV upload error:",i),console.error("Error response data:",(s=i.response)==null?void 0:s.data),console.error("Error status:",(n=i.response)==null?void 0:n.status),(a=i.response)!=null&&a.data?{success:!1,message:i.response.data.message||i.response.data.detail||"Upload failed",created_count:0,skipped_count:0,errors:i.response.data.errors||[],created_users:[]}:{success:!1,message:i.message||"Upload failed",created_count:0,skipped_count:0,errors:[],created_users:[]}}},mX=()=>{const e=["first_name","school_id","last_name","phone_number","email","address","emergency_contact","secondary_phone","preferred_contact_method","authorized_pickup_persons"];let t=localStorage.getItem("schoolId");if(!t){const a=localStorage.getItem("persist:auth");if(a)try{const i=JSON.parse(a),o=JSON.parse(i.user||"{}");t=o.school_id||o.school,console.log(" Found school_id in persist:auth for template:",t)}catch(i){console.log("Error parsing persist:auth for template school_id:",i)}}console.log(" Generating parent template with school_id:",t),t||console.warn("No school ID found in any source for parent template. Using placeholder '2'");const s=["John",t||"2","Doe","+254712345678","john.doe@email.com","123 Main St, Nairobi","Jane Doe (+254723456789)","+254734567890","phone","Jane Doe (Spouse, +254723456789); Mike Smith (Friend, +254745678901)"],n=[e.join(","),s.join(","),`Mary,${t||"2"},Smith,+254723456789,mary.smith@email.com,456 Oak Ave,Tom Smith (+254734567890),+254745678901,email,Tom Smith (Spouse, +254734567890)`].join(`
`);return console.log(" Generated CSV content preview:",n.substring(0,200)+"..."),n},pX=()=>{const e=["first_name","school_id","last_name","phone_number","email","license_number","license_expiry","license_class","is_assistant_driver","last_health_check","last_background_check"];let t=localStorage.getItem("schoolId");if(!t){const a=localStorage.getItem("persist:auth");if(a)try{const i=JSON.parse(a),o=JSON.parse(i.user||"{}");t=o.school_id||o.school,console.log(" Found school_id in persist:auth for driver template:",t)}catch(i){console.log("Error parsing persist:auth for driver template school_id:",i)}}t||console.warn("No school ID found in any source for driver template. Using placeholder '2'");const s=["Peter",t||"2","Gachau","+254712345678","peter.gachau@email.com","DL123456789","2025-12-31","B","false","2024-01-15","2024-01-10"];return[e.join(","),s.join(","),`Jane,${t||"2"},Mwangi,+254723456789,jane.mwangi@email.com,DL987654321,2025-06-30,A,true,2024-01-20,2024-01-15`].join(`
`)},gX=e=>{let t="",s="";switch(e){case"parents":t=mX(),s="parents_template.csv";break;case"drivers":t=pX(),s="drivers_template.csv";break;default:t=`first_name,last_name,phone_number
John,Doe,+254700000000`,s=`${e}_template.csv`}const n=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a)},xX=()=>{const e=localStorage.getItem("schoolId"),t=localStorage.getItem("schoolName"),s=[];for(let n=0;n<localStorage.length;n++){const a=localStorage.key(n);a&&a.toLowerCase().includes("school")&&s.push({key:a,value:localStorage.getItem(a)})}return console.log(" Current school info:",{id:e,name:t}),console.log(" All school-related localStorage keys:",s),{id:e,name:t||void 0}},LT=({isOpen:e,onClose:t,title:s,description:n,acceptedFileTypes:a,maxFileSize:i=10,maxFiles:o=5,onUpload:l,onPreview:c,templateDownloadUrl:d,templateFileName:u,validationSchema:h,previewColumns:p,uploadType:f})=>{const[y,g]=x.useState([]),[j,v]=x.useState(!1),[w,N]=x.useState(!1),[C,k]=x.useState([]),[O,R]=x.useState(!1),[E,I]=x.useState(0),[D,P]=x.useState({total:0,completed:0,failed:0,errors:[]}),[A,$]=x.useState(!1),[U,de]=x.useState(new Set),se=x.useRef(null),ge=pe=>{pe.preventDefault(),v(!0)},V=pe=>{pe.preventDefault(),v(!1)},K=pe=>{pe.preventDefault(),v(!1);const X=Array.from(pe.dataTransfer.files);ie(X)},J=pe=>{const X=Array.from(pe.target.files||[]);ie(X)},ie=async pe=>{if(console.log(" handleFiles called with:",pe.length,"files"),A){console.log(" Already processing files, ignoring new request");return}$(!0);try{const X=pe.filter(ae=>{const ve=ae.name.toLowerCase().substring(ae.name.lastIndexOf("."));return a.some(nt=>nt.startsWith(".")?ve===nt.toLowerCase():ae.type===nt)?ae.size<=i*1024*1024?!0:(Ur({title:"File too large",description:`${ae.name} exceeds the maximum file size of ${i}MB.`,variant:"destructive"}),!1):(console.log(" File type validation failed:",{fileName:ae.name,fileType:ae.type,fileExtension:ve,acceptedTypes:a}),Ur({title:"Invalid file type",description:`${ae.name} is not a supported file type. Supported types: ${a.join(", ")}`,variant:"destructive"}),!1)});if(X.length===0){$(!1);return}if(y.length+X.length>o){Ur({title:"Too many files",description:`You can only upload up to ${o} files at once.`,variant:"destructive"}),$(!1);return}for(const ae of X){const ve=Math.random().toString(36).substr(2,9);console.log(" Processing file:",ae.name,"with ID:",ve);const Ie={id:ve,name:ae.name,size:ae.size,type:ae.type,status:"uploading",progress:0};g(ze=>[...ze,Ie]),await T(ae,ve)}}finally{$(!1)}},T=async(pe,X)=>{if(console.log(" processFile called for:",pe.name,"with ID:",X),U.has(X)){console.log(" File already being processed:",pe.name);return}de(ae=>new Set(ae).add(X));try{g(ve=>ve.map(Ie=>Ie.id===X?{...Ie,status:"processing"}:Ie)),console.log(" Processing file:",pe.name),g(ve=>ve.map(Ie=>Ie.id===X?{...Ie,progress:50}:Ie));let ae=[];if(console.log(" Parsing file:",pe.name,"type:",pe.type),pe.type==="text/csv"?ae=await M(pe):pe.type.includes("pdf")?ae=await ee(pe):pe.type.includes("word")||pe.type.includes("document")?ae=await Se(pe):pe.type==="text/html"&&(ae=await jt(pe)),console.log(" Parsed data for",pe.name,":",ae.length,"rows"),h){const ve=et(ae,h);if(!ve.isValid)throw new Error(ve.errors.join(", "))}console.log(" Setting status to completed for:",pe.name),g(ve=>ve.map(Ie=>Ie.id===X?{...Ie,status:"completed",progress:100,preview:ae}:Ie)),de(ve=>{const Ie=new Set(ve);return Ie.delete(X),Ie}),Ur({title:"File processed successfully",description:`${pe.name} has been processed and is ready for upload.`})}catch(ae){console.error(" Error processing file:",pe.name,ae),g(ve=>ve.map(Ie=>Ie.id===X?{...Ie,status:"error",error:ae.message}:Ie)),de(ve=>{const Ie=new Set(ve);return Ie.delete(X),Ie}),Ur({title:"Processing failed",description:`Failed to process ${pe.name}: ${ae.message}`,variant:"destructive"})}},F=pe=>{const X=[];return!pe||pe.length===0?(X.push("No data found in file"),{isValid:!1,errors:X}):(pe.length>0&&(console.log(" Available columns in CSV:",Object.keys(pe[0])),console.log(" First row data:",pe[0])),pe.forEach((ae,ve)=>{const Ie=ve+1,ze=ae.name||ae.Name||ae["Full Name"]||ae.full_name||ae.Full_Name||ae.Parent||ae.parent||ae["Parent Name"]||ae.parent_name||ae.Parent_Name||ae.first_name||ae["First Name"]||ae.First_Name||ae.firstName||ae.FullName||ae.Full_Name||ae.ParentName||ae.Parent_Name,nt=ae.phone_number||ae["Phone Number"]||ae.Phone_Number||ae.phone_number||ae.phone||ae.Phone||ae.phone||ae.mobile||ae.Mobile||ae.mobile||ae["Mobile Number"]||ae.mobile_number||ae.Mobile_Number||ae.phoneNumber||ae.contact||ae.Contact||ae.contact||ae.tel||ae.Tel||ae.tel||ae.PhoneNumber||ae.Phone_Number||ae.MobileNumber||ae.Mobile_Number||ae.ContactNumber||ae.Contact_Number||Object.values(ae).find(sr=>!sr||typeof sr!="string"?!1:/^(\+?254|0)?[17]\d{8}$/.test(sr.replace(/\s+/g,""))),Ze=ae.license_number||ae["License Number"]||ae.License_Number||ae.licenseNumber||ae.LicenseNumber,ft=ae.license_class||ae["License Class"]||ae.License_Class||ae.licenseClass||ae.LicenseClass,$t=ae.license_expiry||ae["License Expiry"]||ae.License_Expiry||ae.licenseExpiry||ae.LicenseExpiry,It=ae.last_health_check||ae["Last Health Check"]||ae.Last_Health_Check||ae.lastHealthCheck||ae.LastHealthCheck,fr=ae.last_background_check||ae["Last Background Check"]||ae.Last_Background_Check||ae.lastBackgroundCheck||ae.LastBackgroundCheck;console.log(` Row ${Ie} (${f}):`,{hasName:!!ze,hasPhone:!!nt,hasLicenseNumber:!!Ze,hasLicenseClass:!!ft,hasLicenseExpiry:!!$t,hasHealthCheck:!!It,hasBackgroundCheck:!!fr,nameValue:ze,phoneValue:nt,licenseValue:Ze,availableFields:Object.keys(ae)}),Object.values(ae).some(sr=>sr&&String(sr).trim())&&(ze||X.push(`Row ${Ie}: Name is required`),nt||X.push(`Row ${Ie}: Phone number is required`),f==="drivers"&&(Ze||console.warn(` Row ${Ie}: License number not provided - will generate default`),ft||console.warn(` Row ${Ie}: License class not provided - will use default "B"`),$t||console.warn(` Row ${Ie}: License expiry not provided - will use default "2025-12-31"`),It||console.warn(` Row ${Ie}: Last health check not provided - will use default "2024-01-01"`),fr||console.warn(` Row ${Ie}: Last background check not provided - will use default "2024-01-01"`)))}),{isValid:X.length===0,errors:X})},M=async pe=>new Promise((X,ae)=>{const ve=new FileReader;ve.onload=Ie=>{var ze;try{const Ze=((ze=Ie.target)==null?void 0:ze.result).split(`
`),ft=Ze[0],$t=G(ft).map(sr=>sr.trim());console.log(" CSV Headers found:",$t);const fr=Ze.slice(1).map((sr,Xt)=>{const zt=G(sr),Ct={};return $t.forEach((Ne,lt)=>{const vt=(zt[lt]||"").replace(/^["']|["']$/g,"").trim();Ct[Ne]=vt}),Xt<3&&console.log(` Row ${Xt+1} parsed:`,Ct),Ct}).filter(sr=>Object.values(sr).some(Xt=>Xt)),yt=F(fr);if(!yt.isValid){ae(new Error(`File validation failed: ${yt.errors.join(", ")}`));return}X(fr)}catch{ae(new Error("Failed to parse CSV file"))}},ve.onerror=()=>ae(new Error("Failed to read file")),ve.readAsText(pe)}),G=pe=>{const X=[];let ae="",ve=!1,Ie=0;for(;Ie<pe.length;){const ze=pe[Ie];ze==='"'?ve&&pe[Ie+1]==='"'?(ae+='"',Ie+=2):(ve=!ve,Ie++):ze===","&&!ve?(X.push(ae),ae="",Ie++):(ae+=ze,Ie++)}return X.push(ae),X},ee=async pe=>new Promise((X,ae)=>{const ve=new FileReader;ve.onload=async Ie=>{var ze;try{const nt=(ze=Ie.target)==null?void 0:ze.result,Ze=await te(nt),ft=me(Ze),$t=F(ft);if(!$t.isValid){ae(new Error(`File validation failed: ${$t.errors.join(", ")}`));return}X(ft)}catch{ae(new Error("Failed to parse PDF file"))}},ve.onerror=()=>ae(new Error("Failed to read file")),ve.readAsArrayBuffer(pe)}),te=async pe=>{try{const X=new Uint8Array(pe),ve=new TextDecoder("utf-8").decode(X),ze=ve.split(`
`).filter(nt=>nt.trim()).filter(nt=>nt.includes(",")&&(nt.includes("@")||nt.includes("+254")||nt.includes("07")));return ze.length>0?ze.join(`
`):ve}catch(X){throw console.error("Error extracting text from PDF:",X),new Error("Failed to extract text from PDF")}},me=pe=>{try{console.log(" Raw text content:",pe);const X=pe.split(`
`).filter(ae=>ae.trim());return console.log(" Total lines found:",X.length),X.length>0&&X[0].includes(",")?(console.log(" Detected CSV format"),ue(X)):X.length>0&&X[0].includes("	")?(console.log(" Detected TSV format"),ce(X)):(console.log(" Attempting flexible parsing for unstructured text"),Ce(X))}catch(X){return console.error("Error parsing text to structured data:",X),[]}},ue=pe=>{const X=Ge(pe,",");if(X===-1)return console.log(" No header row found in CSV format"),[];const ae=pe[X].split(",").map(Ie=>Ie.trim());return console.log(" Detected headers:",ae),pe.slice(X+1).map(Ie=>{const ze=Ie.split(",").map(Ze=>Ze.trim()),nt={};return ae.forEach((Ze,ft)=>{nt[Ze]=ze[ft]||""}),nt}).filter(Ie=>Object.values(Ie).some(ze=>ze))},ce=pe=>{const X=Ge(pe,"	");if(X===-1)return console.log(" No header row found in TSV format"),[];const ae=pe[X].split("	").map(Ie=>Ie.trim());return console.log(" Detected headers:",ae),pe.slice(X+1).map(Ie=>{const ze=Ie.split("	").map(Ze=>Ze.trim()),nt={};return ae.forEach((Ze,ft)=>{nt[Ze]=ze[ft]||""}),nt}).filter(Ie=>Object.values(Ie).some(ze=>ze))},Ce=pe=>{console.log(" Attempting flexible parsing for Word document content");const X=Ue(pe);let ae=pe;X!==-1?(console.log(` Found header row at index ${X}:`,pe[X]),ae=pe.slice(X+1)):console.log(" No header row found, treating all lines as data");const ve=[];for(const Ie of ae)if(Ie.trim()){const ze=gt(Ie);ze&&ve.push(ze)}return console.log(` Extracted ${ve.length} records from flexible parsing`),ve},Ue=pe=>{const X=["name","full","parent","first","last"],ae=["phone","mobile","contact","number","tel"],ve=["email","mail"],Ie=["address","location","place"];for(let ze=0;ze<Math.min(10,pe.length);ze++){const nt=pe[ze].toLowerCase(),Ze=X.some(yt=>nt.includes(yt)),ft=ae.some(yt=>nt.includes(yt)),$t=ve.some(yt=>nt.includes(yt)),It=Ie.some(yt=>nt.includes(yt));if([Ze,ft,$t,It].filter(Boolean).length>=2)return console.log(` Found header row at index ${ze}:`,pe[ze]),ze}return-1},Ge=(pe,X)=>{const ae=["name","full","parent","first","last"],ve=["phone","mobile","contact","number","tel"],Ie=["email","mail"],ze=["address","location","place"];for(let nt=0;nt<Math.min(5,pe.length);nt++){const ft=pe[nt].toLowerCase().split(X).map(Xt=>Xt.trim()),$t=ft.some(Xt=>ae.some(zt=>Xt.includes(zt))),It=ft.some(Xt=>ve.some(zt=>Xt.includes(zt))),fr=ft.some(Xt=>Ie.some(zt=>Xt.includes(zt))),yt=ft.some(Xt=>ze.some(zt=>Xt.includes(zt)));if([$t,It,fr,yt].filter(Boolean).length>=2)return console.log(` Found header row at index ${nt}:`,pe[nt]),nt}return-1},gt=pe=>{try{console.log(" Processing line:",pe);const X=pe.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/),ae=X?X[0]:"",ve=pe.match(/(\+254|0|254)?[17]\d{8}/),Ie=ve?ve[0]:"";let ze="";const nt=ae?pe.split(ae)[0].trim():pe,Ze=Ie?pe.split(Ie)[0].trim():pe;if(ze=(nt.length>Ze.length?nt:Ze).replace(/[^\w\s\-\.]/g," ").trim(),!ze){const fr=pe.match(/^([^@\d]+)/);ze=fr?fr[1].trim():""}let $t="";const It=pe.match(/(Nairobi|Kenya|Address:?\s*)([^,]+)/i);if(It)$t=It[2].trim();else{const fr=ae&&pe.split(ae)[1]||"",yt=Ie&&pe.split(Ie)[1]||"";$t=(fr.length>yt.length?fr:yt).replace(/[^\w\s,\.\-]/g," ").trim()}if(ze||ae||Ie){const fr={name:ze,email:ae,phone:Ie,address:$t,"Phone Number":Ie,Email:ae,Address:$t};return console.log(" Extracted data:",fr),fr}return console.log(" No valid data found in line"),null}catch(X){return console.error("Error extracting data from line:",X),null}},Se=async pe=>new Promise((X,ae)=>{const ve=new FileReader;ve.onload=async Ie=>{var ze;try{const nt=(ze=Ie.target)==null?void 0:ze.result,Ze=await ne(nt),ft=me(Ze),$t=F(ft);if(!$t.isValid){ae(new Error(`File validation failed: ${$t.errors.join(", ")}`));return}X(ft)}catch{ae(new Error("Failed to parse Word document"))}},ve.onerror=()=>ae(new Error("Failed to read file")),ve.readAsArrayBuffer(pe)}),ne=async pe=>{try{console.log(" Extracting text from Word document...");const X=new Uint8Array(pe);console.log(" ArrayBuffer size:",pe.byteLength),console.log(" Uint8Array length:",X.length);let ae="";try{ae=new TextDecoder("utf-8").decode(X),console.log(" UTF-8 decoding successful, text length:",ae.length)}catch{console.log(" UTF-8 decoding failed, trying other approaches...")}if(!ae||ae.length<100)try{ae=new TextDecoder("latin1").decode(X),console.log(" Latin1 decoding successful, text length:",ae.length)}catch{console.log(" Latin1 decoding failed")}(!ae||ae.length<100)&&(ae=(Array.from(X).map(Ze=>Ze>=32&&Ze<=126?String.fromCharCode(Ze):" ").join("").match(/[a-zA-Z0-9\s@.,+\-()]+/g)||[]).join(`
`),console.log(" ASCII extraction successful, text length:",ae.length)),console.log(" Extracted text sample (first 500 chars):",ae.substring(0,500));const ve=ae.split(`
`).filter(ze=>ze.trim());if(console.log(" Total lines found:",ve.length),ve.length===0)throw console.log(" No readable lines found in Word document"),new Error("No readable content found in Word document");console.log(" First 5 lines:",ve.slice(0,5));const Ie=ve.filter(ze=>ze.includes(",")&&(ze.includes("@")||ze.includes("+254")||ze.includes("07")));return Ie.length>0?(console.log(" Found CSV-like patterns, lines count:",Ie.length),Ie.join(`
`)):(console.log(" Returning raw text for pattern matching"),ae)}catch(X){throw console.error("Error extracting text from Word document:",X),new Error("Failed to extract text from Word document")}},jt=async pe=>new Promise((X,ae)=>{const ve=new FileReader;ve.onload=async Ie=>{var ze;try{const nt=(ze=Ie.target)==null?void 0:ze.result,Ze=dt(nt),ft=F(Ze);if(!ft.isValid){ae(new Error(`File validation failed: ${ft.errors.join(", ")}`));return}X(Ze)}catch{ae(new Error("Failed to parse HTML file"))}},ve.onerror=()=>ae(new Error("Failed to read file")),ve.readAsText(pe)}),dt=pe=>{try{const X=pe.match(/<table[^>]*>([\s\S]*?)<\/table>/i);if(!X)return[];const ve=X[1].split("</tr>").filter(nt=>nt.includes("<tr>")),Ie=[],ze=[];for(const nt of ve)if(nt.includes("<th>")||nt.includes("<td>")){const Ze=nt.split("<td>").filter(ft=>ft.includes("<th>"));Ze.length>0&&Ie.push(Ze[0].replace(/<th[^>]*>/,"").replace(/<\/th>/,"").trim())}for(const nt of ve)if(nt.includes("<td>")||nt.includes("<th>")){const Ze=nt.split("<td>").filter(ft=>ft.includes("<th>"));if(Ze.length>0){const ft={};for(let $t=0;$t<Ie.length;$t++){const It=Ze[$t].replace(/<td[^>]*>/,"").replace(/<\/td>/,"").trim();ft[Ie[$t]]=It}ze.push(ft)}}return ze.filter(nt=>Object.values(nt).some(Ze=>Ze))}catch(X){return console.error("Error parsing HTML table:",X),[]}},et=(pe,X)=>{const ae=[];return pe.forEach((ve,Ie)=>{(!ve.name||!ve.email)&&ae.push(`Row ${Ie+1}: Missing required fields`)}),{isValid:ae.length===0,errors:ae}},Q=pe=>{g(X=>X.filter(ae=>ae.id!==pe))},he=()=>{const pe=[];return y.forEach(X=>{X.status==="completed"&&X.preview&&pe.push(...X.preview)}),pe},xe=()=>{const pe=he();if(pe.length===0){Ur({title:"No data to preview",description:"Please wait for files to finish processing.",variant:"destructive"});return}k(pe),N(!0)},De=async()=>{const pe=y.filter(ae=>ae.status==="completed");if(pe.length===0){Ur({title:"No files ready",description:"Please wait for files to finish processing.",variant:"destructive"});return}const X=[];if(pe.forEach(ae=>{const ve=document.querySelector('input[type="file"]');if(ve&&ve.files){for(let Ie=0;Ie<ve.files.length;Ie++)if(ve.files[Ie].name===ae.name){X.push(ve.files[Ie]);break}}}),X.length===0){Ur({title:"No files to upload",description:"No valid files found for upload.",variant:"destructive"});return}R(!0),I(0),P({total:X.length,completed:0,failed:0,errors:[]}),console.log(" Starting submission of",X.length,"files");try{await l(X),Ur({title:"Upload completed successfully",description:`Successfully uploaded ${X.length} files.`}),g([]),R(!1),I(0),P({total:0,completed:0,failed:0,errors:[]}),t()}catch(ae){console.error(" Upload process failed:",ae),Ur({title:"Upload failed",description:ae.message,variant:"destructive"}),R(!1)}},Be=pe=>pe==="text/csv"?r.jsx(DP,{className:"w-5 h-5"}):pe.includes("pdf")?r.jsx(ra,{className:"w-5 h-5"}):pe.includes("word")||pe.includes("document")?r.jsx(Vj,{className:"w-5 h-5"}):pe==="text/html"?r.jsx(ra,{className:"w-5 h-5"}):r.jsx(Vj,{className:"w-5 h-5"}),Fe=pe=>{switch(pe){case"uploading":return r.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"});case"processing":return r.jsx("div",{className:"w-4 h-4 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"});case"completed":return r.jsx(Rn,{className:"w-4 h-4 text-green-500"});case"error":return r.jsx(Zn,{className:"w-4 h-4 text-red-500"});default:return null}},st=pe=>{if(pe===0)return"0 Bytes";const X=1024,ae=["Bytes","KB","MB","GB"],ve=Math.floor(Math.log(pe)/Math.log(X));return parseFloat((pe/Math.pow(X,ve)).toFixed(2))+" "+ae[ve]},_t=(pe,X)=>{const ve={parents:{"First Name":"First Name","Last Name":"Last Name","Full Name":"Full Name",Name:"Name",Email:"Email","Phone Number":"Phone Number",Phone:"Phone Number",Mobile:"Phone Number",Contact:"Phone Number",Address:"Address","Emergency Contact":"Emergency Contact","Secondary Phone":"Secondary Phone","Preferred Contact Method":"Preferred Contact Method","Authorized Pickup Persons":"Authorized Pickup Persons"},drivers:{"First Name":"First Name","Last Name":"Last Name","Full Name":"Full Name",Name:"Name",Email:"Email","Phone Number":"Phone Number",Phone:"Phone Number",Mobile:"Phone Number",Contact:"Phone Number","License Number":"License Number","License Class":"License Class","License Expiry":"License Expiry","Last Health Check":"Last Health Check","Last Background Check":"Last Background Check"}}[X]||{};return pe.map(Ie=>{if(ve[Ie])return ve[Ie];const ze=Ie.toLowerCase();for(const[nt,Ze]of Object.entries(ve))if(nt.toLowerCase()===ze)return Ze;return Ie.replace(/_/g," ").replace(/\b\w/g,nt=>nt.toUpperCase())})};return r.jsxs(Hr,{open:e,onOpenChange:t,children:[r.jsxs(Or,{className:"max-w-4xl max-h-[85vh] overflow-y-auto",children:[r.jsxs(Mr,{className:"pb-0",children:[r.jsx($r,{className:"text-2xl font-bold",children:s}),n&&r.jsx("p",{className:"text-gray-600 mt-1",children:n})]}),r.jsxs("div",{className:"space-y-0",children:[r.jsxs(Me,{children:[r.jsx("h2",{className:"text-lg font-bold mt-1 mb-1 ml-4",children:"Upload Files"}),r.jsx(Ve,{className:"pt-0",children:r.jsxs("div",{className:it("border-2 border-dashed rounded-lg p-6 text-center transition-colors",j?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragOver:ge,onDragLeave:V,onDrop:K,children:[r.jsx(Xb,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here or click to browse"}),r.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Supported formats: ",a.join(", "),r.jsx("br",{}),"Maximum file size: ",i,"MB",r.jsx("br",{}),"Maximum files: ",o,r.jsx("br",{}),r.jsx("span",{className:"text-blue-600 font-medium",children:" Download the template to see the required format"})]}),r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx(fe,{onClick:()=>{var pe;return(pe=se.current)==null?void 0:pe.click()},variant:"outline",children:"Choose Files"}),r.jsxs(fe,{onClick:()=>gX(f),variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Fn,{className:"w-4 h-4"}),"Download Template"]})]}),r.jsx("input",{ref:se,type:"file",multiple:!0,accept:a.join(","),onChange:J,className:"hidden"})]})})]}),y.length>0&&r.jsxs(Me,{children:[r.jsx(Ke,{className:"pb-3",children:r.jsx(Je,{className:"text-lg",children:"Uploaded Files"})}),r.jsx(Ve,{className:"pt-0",children:r.jsx("div",{className:"space-y-3",children:y.map(pe=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[Be(pe.type),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:pe.name}),r.jsx("p",{className:"text-sm text-gray-500",children:st(pe.size)})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[Fe(pe.status),r.jsxs("div",{className:"flex items-center space-x-2",children:[pe.status==="completed"&&pe.preview&&r.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>{k(pe.preview||[]),N(!0)},children:[r.jsx(ls,{className:"w-4 h-4"}),"Preview (",pe.preview.length," records)"]}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>Q(pe.id),children:r.jsx(Da,{className:"w-4 h-4"})})]})]}),pe.status==="uploading"||pe.status==="processing"?r.jsx(xw,{value:pe.progress,className:"w-24"}):null,pe.error&&r.jsx("p",{className:"text-sm text-red-500",children:pe.error})]},pe.id))})})]}),y.some(pe=>pe.status==="completed")&&r.jsxs(Me,{children:[r.jsx(Ke,{className:"pb-3",children:r.jsx(Je,{className:"text-lg",children:"Ready to Upload"})}),r.jsx(Ve,{className:"pt-0",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Data Summary"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Total Files:"}),r.jsx("span",{className:"ml-2 font-medium",children:y.filter(pe=>pe.status==="completed").length})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Total Records:"}),r.jsx("span",{className:"ml-2 font-medium",children:he().length})]})]})]}),O&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Uploading records..."}),r.jsxs("span",{children:[Math.round(E),"%"]})]}),r.jsx(xw,{value:E}),r.jsxs("div",{className:"text-sm text-gray-600",children:[D.completed," completed,"," ",D.failed," failed"]})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsxs(fe,{variant:"outline",onClick:xe,children:[r.jsx(ls,{className:"w-4 h-4 mr-2"}),"Preview All Data"]}),r.jsx(fe,{onClick:De,disabled:O,className:"bg-green-500 hover:bg-green-600",children:O?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Uploading..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Xb,{className:"w-4 h-4 mr-2"}),"Upload ",he().length," Records"]})})]})]})})]}),r.jsx("div",{className:"flex justify-end pt-2",children:r.jsx(fe,{variant:"outline",onClick:t,children:"Close"})})]})]}),r.jsx(Hr,{open:w,onOpenChange:N,children:r.jsxs(Or,{className:"max-w-[95vw] max-h-[90vh] w-full overflow-hidden",children:[r.jsxs(Mr,{className:"pb-4",children:[r.jsx($r,{children:"Data Preview"}),r.jsxs(El,{children:["Preview of ",C.length," records from uploaded files"]})]}),r.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[r.jsxs("div",{className:"border rounded-lg overflow-hidden flex-1 min-h-0",children:[r.jsx("div",{className:"overflow-auto h-full",children:r.jsxs(ya,{children:[r.jsx(ba,{className:"sticky top-0 bg-white z-10",children:r.jsx(Kr,{children:C.length>0&&(()=>{const pe=Object.keys(C[0]);return _t(pe,f).map((ae,ve)=>r.jsx(ut,{className:"whitespace-nowrap bg-white",children:ae},pe[ve]))})()})}),r.jsx(ja,{children:C.slice(0,50).map((pe,X)=>r.jsx(Kr,{children:Object.values(pe).map((ae,ve)=>r.jsx(ct,{className:"max-w-[200px] truncate",children:String(ae||"")},ve))},X))})]})}),C.length>50&&r.jsxs("div",{className:"p-3 bg-gray-50 text-center text-sm text-gray-600 border-t",children:["Showing first 50 records of ",C.length," total records"]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-2 border-t",children:[r.jsx(fe,{variant:"outline",onClick:()=>N(!1),children:"Close Preview"}),r.jsxs(fe,{onClick:()=>{N(!1),De()},className:"bg-green-500 hover:bg-green-600",children:[r.jsx(Xb,{className:"w-4 h-4 mr-2"}),"Upload All Records"]})]})]})]})})]})},RT=({isOpen:e,onClose:t,data:s,title:n="Data Preview",columns:a,validationErrors:i={}})=>{if(!s||s.length===0)return null;const o=a||Object.keys(s[0]||{}),l=d=>{const u=i[d];return!u||u.length===0?{status:"valid",icon:r.jsx(Rn,{className:"w-4 h-4 text-green-500"})}:{status:"error",icon:r.jsx(mu,{className:"w-4 h-4 text-red-500"})}},c=d=>d==null?r.jsx("span",{className:"text-gray-400 italic",children:"Empty"}):typeof d=="boolean"?d?"Yes":"No":typeof d=="object"?JSON.stringify(d):String(d);return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Mr,{children:[r.jsx($r,{className:"text-2xl font-bold",children:n}),r.jsxs("p",{className:"text-gray-600",children:["Preview of ",s.length," records from uploaded file"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Me,{children:[r.jsx(Ke,{className:"pb-2",children:r.jsx(Je,{className:"text-sm font-medium text-gray-600",children:"Total Records"})}),r.jsx(Ve,{children:r.jsx("div",{className:"text-2xl font-bold",children:s.length})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{className:"pb-2",children:r.jsx(Je,{className:"text-sm font-medium text-gray-600",children:"Valid Records"})}),r.jsx(Ve,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.length-Object.keys(i).length})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{className:"pb-2",children:r.jsx(Je,{className:"text-sm font-medium text-gray-600",children:"Records with Errors"})}),r.jsx(Ve,{children:r.jsx("div",{className:"text-2xl font-bold text-red-600",children:Object.keys(i).length})})]})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsx(Je,{className:"text-lg",children:"Data Preview"})}),r.jsx(Ve,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{className:"w-12",children:"#"}),r.jsx(ut,{className:"w-16",children:"Status"}),o.map(d=>r.jsx(ut,{className:"min-w-[150px]",children:d},d))]})}),r.jsx(ja,{children:s.map((d,u)=>{const h=l(u),p=i[u]||[];return r.jsxs(Kr,{className:h.status==="error"?"bg-red-50 border-red-200":"",children:[r.jsx(ct,{className:"font-medium",children:u+1}),r.jsx(ct,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[h.icon,h.status==="error"&&r.jsxs(Te,{variant:"destructive",className:"text-xs",children:[p.length," error",p.length!==1?"s":""]})]})}),o.map(f=>r.jsx(ct,{children:c(d[f])},f))]},u)})})]})})})]}),Object.keys(i).length>0&&r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"text-lg flex items-center space-x-2",children:[r.jsx(Lc,{className:"w-5 h-5 text-yellow-500"}),"Validation Errors"]})}),r.jsx(Ve,{children:r.jsx("div",{className:"space-y-3",children:Object.entries(i).map(([d,u])=>r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsxs("h4",{className:"font-medium text-red-800 mb-2",children:["Row ",parseInt(d)+1,":"]}),r.jsx("ul",{className:"list-disc list-inside space-y-1",children:u.map((h,p)=>r.jsx("li",{className:"text-sm text-red-700",children:h},p))})]},d))})})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(fe,{variant:"outline",onClick:t,children:"Close"}),Object.keys(i).length===0&&r.jsx(fe,{children:"Continue with Upload"})]})]})]})})};function vX(){var ve,Ie,ze,nt,Ze,ft,$t,It,fr,yt,sr,Xt,zt,Ct,Ne,lt,vt,Qt,Zr,Ut,nn,un,Ps,ds,Xr,Os,Li,wa;const e=ns(),{parents:t=[],loading:s,error:n}=At(Pe=>Pe.parents);x.useEffect(()=>{const Pe=localStorage.getItem("schoolId");console.log(" FORCE FETCHING PARENTS - Component mounted"),console.log("SchoolId:",Pe),Pe?(console.log(" Dispatching fetchParents with schoolId:",Pe),e(ua({schoolId:parseInt(Pe)})).then(We=>{console.log(" Fetch successful:",We)}).catch(We=>{console.error(" Fetch failed:",We)})):console.log(" No schoolId found in localStorage")},[]),x.useEffect(()=>{if(t.length===0&&!s){const Pe=setTimeout(()=>{const We=localStorage.getItem("schoolId");We&&(console.log(" Retrying fetch after timeout..."),e(ua({schoolId:parseInt(We)})))},2e3);return()=>clearTimeout(Pe)}},[t.length,s,e]);const[a,i]=x.useState(1),[o]=x.useState(10),[l,c]=x.useState(""),[d,u]=x.useState("all"),[h,p]=x.useState([]),[f,y]=x.useState(!1),[g,j]=x.useState(!1),[v,w]=x.useState(!1),[N,C]=x.useState(!1),[k,O]=x.useState(null),[R,E]=x.useState([{name:"",relation:"",phone:""}]),[I,D]=x.useState(!1),[P,A]=x.useState(!1),[$,U]=x.useState({}),[de,se]=x.useState(!1),[ge,V]=x.useState(!1),[K,J]=x.useState([]),[ie,T]=x.useState({user_data:{first_name:"",last_name:"",email:"",phone_number:"",user_phone_number:"",password:"",confirm_password:"",user_type:"parent",profile_image:null},address:"",emergency_contact:"",school:1,preferred_contact_method:"email",secondary_phone:"",authorized_pickup_persons:{persons:R}}),F=Pe=>{const{name:We,value:wt}=Pe.target;if(We==="user_data.phone_number"||We==="secondary_phone"||We==="emergency_contact")if(We.startsWith("user_data.")){const nr=We.split(".")[1];T(vr=>({...vr,user_data:{...vr.user_data,[nr]:wt}}))}else T(nr=>({...nr,[We]:wt}));else if(We.startsWith("user_data.")){const nr=We.split(".")[1];T(vr=>({...vr,user_data:{...vr.user_data,[nr]:wt}}))}else T(nr=>({...nr,[We]:wt}))},M=()=>{const Pe=Date.now(),We=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`+254${`07${(Pe.toString().slice(-6)+We).slice(0,8)}`.slice(1)}`},G=Pe=>{if(console.log(" Converting phone number:",Pe),!Pe||!Pe.trim())return console.log(" Empty phone number, generating unique number"),M();const We=Pe.replace(/\D/g,"");if(console.log(" Cleaned phone number:",We,"Length:",We.length),We.length===0)return console.log(" Empty phone number after cleaning, generating unique number"),M();if(We.startsWith("254")&&We.length===12){const wt=`+${We}`;return console.log(" Already international format:",wt),wt}if(We.startsWith("0")&&We.length===10){const wt=`+254${We.slice(1)}`;return console.log(" Converted from 0 format:",wt),wt}if(We.length===9){const wt=`+254${We}`;return console.log(" Converted from 9 digits:",wt),wt}return We.length===12?`+${We}`:We.length===11&&We.startsWith("7")?`+254${We}`:We.length>=9?`+254${We.slice(-9)}`:(console.log(" Invalid phone number format, generating unique number"),M())},ee=(Pe,We)=>{T(wt=>({...wt,[Pe]:We}))},te=()=>{E([...R,{name:"",relation:"",phone:""}])},me=Pe=>{E(R.filter((We,wt)=>wt!==Pe))},ue=(Pe,We,wt)=>{const nr=[...R],vr=We==="phone"?G(wt):wt;nr[Pe]={...nr[Pe],[We]:vr},E(nr),T(Er=>({...Er,authorized_pickup_persons:{persons:nr}}))},ce=async Pe=>{try{console.log(" Starting CSV upload of",Pe.length,"files");const We=localStorage.getItem("schoolId");if(!We)throw new Error("School ID not found");let wt=0,nr=0;const vr=[];for(let Er=0;Er<Pe.length;Er++){const as=Pe[Er];console.log(` Processing file ${Er+1}/${Pe.length}:`,as.name);try{const _r=await ET(as,"parents");_r.success?(console.log(` File ${Er+1} uploaded successfully`),wt+=_r.created_count||0,nr+=_r.skipped_count||0,_r.errors&&_r.errors.length>0&&_r.errors.forEach(W=>{typeof W=="string"?vr.push(W):W.row&&W.field&&W.message?vr.push(`Row ${W.row}, ${W.field}: ${W.message}`):vr.push(JSON.stringify(W))}),_r.created_users&&_r.created_users.length>0&&console.log(` Created users from file ${as.name}:`,_r.created_users)):(console.error(` File ${Er+1} upload failed:`,_r.message),nr+=1,vr.push(`File "${as.name}": ${_r.message}`))}catch(_r){console.error(` Failed to upload file ${Er+1}:`,_r),nr+=1;const W=_r instanceof Error?_r.message:"Unknown error";vr.push(`File "${as.name}": ${W}`)}}wt>0&&Ur({title:"CSV upload completed",description:`Successfully created ${wt} parents.${nr>0?` ${nr} skipped.`:""}`}),nr>0&&(Ur({title:"Some records were skipped",description:`${nr} records were skipped. Check the console for details.`,variant:"destructive"}),console.error(" Upload errors:",vr)),e(ua({schoolId:parseInt(We)}))}catch(We){throw console.error(" CSV upload failed:",We),Ur({title:"CSV upload failed",description:We instanceof Error?We.message:"Unknown error",variant:"destructive"}),We}},Ce=Pe=>{if(!Pe||typeof Pe!="string")return!1;const We=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,wt=Pe.trim();return wt.length===0||wt.length>254?!1:We.test(wt)},Ue=Pe=>{J(Pe),V(!0)},Ge=async Pe=>{var wt,nr,vr,Er,as,_r,W,Ae,Ye,kt,Vt,Ht,jr,Xs,hn,Es,Ls,Go,Ko,Sn,ui,Cr,Ua,ho;Pe.preventDefault(),U({});const We={};if((nr=(wt=ie.user_data)==null?void 0:wt.first_name)!=null&&nr.trim()||(We.user_data={...We.user_data,first_name:"First name is required"}),(Er=(vr=ie.user_data)==null?void 0:vr.last_name)!=null&&Er.trim()||(We.user_data={...We.user_data,last_name:"Last name is required"}),(_r=(as=ie.user_data)==null?void 0:as.email)!=null&&_r.trim()?Ce(ie.user_data.email)||(We.user_data={...We.user_data,email:"Please enter a valid email address"}):We.user_data={...We.user_data,email:"Email is required"},(Ae=(W=ie.user_data)==null?void 0:W.phone_number)!=null&&Ae.trim()||(We.user_data={...We.user_data,phone_number:"Phone number is required"}),(kt=(Ye=ie.user_data)==null?void 0:Ye.password)!=null&&kt.trim()?ie.user_data.password.length<8&&(We.user_data={...We.user_data,password:"Password must be at least 8 characters long"}):We.user_data={...We.user_data,password:"Password is required"},(Ht=(Vt=ie.user_data)==null?void 0:Vt.confirm_password)!=null&&Ht.trim()||(We.user_data={...We.user_data,confirm_password:"Please confirm your password"}),(jr=ie.address)!=null&&jr.trim()||(We.address="Address is required"),(Xs=ie.emergency_contact)!=null&&Xs.trim()||(We.emergency_contact="Emergency contact is required"),(hn=ie.user_data)!=null&&hn.password&&((Es=ie.user_data)!=null&&Es.confirm_password)&&ie.user_data.password!==ie.user_data.confirm_password&&(We.user_data={...We.user_data,confirm_password:"Passwords do not match"}),Object.keys(We).length>0){U(We),Ur({title:"Validation Error",description:"Please check the form for errors",variant:"destructive"});return}try{const qa=localStorage.getItem("schoolId");if(!qa){Ur({title:"Error",description:"School ID not found. Please log in again.",variant:"destructive"});return}const fo=R.filter(Va=>Va.name.trim()&&Va.relation.trim()&&Va.phone.trim()),ud=G(ie.emergency_contact),_n=G(ie.secondary_phone),hi=G(((Ls=ie.user_data)==null?void 0:Ls.phone_number)||""),fn={user:{first_name:((Go=ie.user_data)==null?void 0:Go.first_name)||"",last_name:((Ko=ie.user_data)==null?void 0:Ko.last_name)||"",email:((Sn=ie.user_data)==null?void 0:Sn.email)||"",phone_number:hi,user_phone_number:hi,password:((ui=ie.user_data)==null?void 0:ui.password)||"",confirm_password:((Cr=ie.user_data)==null?void 0:Cr.confirm_password)||"",user_type:((Ua=ie.user_data)==null?void 0:Ua.user_type)||"parent",profile_image:((ho=ie.user_data)==null?void 0:ho.profile_image)||null},address:ie.address,emergency_contact:ud,school:parseInt(qa),preferred_contact_method:ie.preferred_contact_method,secondary_phone:_n,authorized_pickup_persons:{persons:fo.map(Va=>({...Va,phone:G(Va.phone)}))}},Yo=await e(Bx(fn)).unwrap();console.log("Registration successful:",Yo),Ur({title:"Success",description:"Parent registered successfully"}),y(!1),T({user_data:{first_name:"",last_name:"",email:"",phone_number:"",user_phone_number:"",password:"",confirm_password:"",user_type:"parent",profile_image:null},address:"",emergency_contact:"",school:parseInt(qa),preferred_contact_method:"email",secondary_phone:"",authorized_pickup_persons:{persons:[{name:"",relation:"",phone:""}]}}),E([{name:"",relation:"",phone:""}]),U({})}catch(qa){console.error("Parent registration error:",qa),Ur({title:"Registration Failed",description:"Failed to register parent. Please try again.",variant:"destructive"})}},gt=async(Pe,We)=>{try{await e(zx({id:Pe,data:We})).unwrap(),Ur({title:"Success",description:"Parent updated successfully"}),w(!1),O(null);const wt=localStorage.getItem("schoolId");wt&&e(ua({schoolId:parseInt(wt)}))}catch(wt){console.error("Parent update error:",wt),Ur({title:"Update Failed",description:"Failed to update parent. Please try again.",variant:"destructive"})}},Se=async()=>{if(k!=null&&k.id)try{await e(Ux(k.id)).unwrap(),Ur({title:"Success",description:"Parent deleted successfully"}),C(!1),O(null)}catch(Pe){console.error("Parent delete error:",Pe),Ur({title:"Delete Failed",description:"Failed to delete parent. Please try again.",variant:"destructive"})}},ne=Pe=>{O(Pe),j(!0)},jt=Pe=>{O(Pe),w(!0)},dt=Pe=>{O(Pe),C(!0)},et=Pe=>{p(We=>We.includes(Pe)?We.filter(wt=>wt!==Pe):[...We,Pe])},Q=()=>{h.length===((t==null?void 0:t.length)||0)?p([]):p(t.map(Pe=>Pe.id))};localStorage.getItem("schoolId");const he=t.filter(Pe=>{var nr,vr,Er,as,_r,W;return((((nr=Pe.user_data)==null?void 0:nr.first_name)||((vr=Pe.user_full_name)==null?void 0:vr.split(" ")[0])||"").toLowerCase().includes(l.toLowerCase())||(((Er=Pe.user_data)==null?void 0:Er.last_name)||((as=Pe.user_full_name)==null?void 0:as.split(" ").slice(1).join(" "))||"").toLowerCase().includes(l.toLowerCase())||(((_r=Pe.user_data)==null?void 0:_r.email)||Pe.user_email||"").toLowerCase().includes(l.toLowerCase())||(((W=Pe.user_data)==null?void 0:W.phone_number)||Pe.user_phone_number||Pe.phone_number||"").toLowerCase().includes(l.toLowerCase()))&&(d==="all"||d==="active")}),xe=Math.ceil(he.length/o),De=(a-1)*o,Be=De+o,Fe=he.slice(De,Be),st=Pe=>{i(Pe)},_t=Pe=>{c(Pe),i(1)},pe=Pe=>{u(Pe),i(1)},X=()=>{c(""),u("all"),i(1)},ae=()=>{const Pe=localStorage.getItem("schoolId");console.log(" Manual refresh triggered, schoolId:",Pe),Pe?(console.log(" Dispatching manual fetch..."),e(ua({schoolId:parseInt(Pe)})).then(We=>{console.log(" Manual fetch successful:",We)}).catch(We=>{console.error(" Manual fetch failed:",We)})):console.log(" No schoolId found for manual refresh")};return s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-green-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Loading parents..."}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Please wait while we fetch the data"})]})}):n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:r.jsx(Me,{className:"w-full max-w-md",children:r.jsxs(Ve,{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(hr,{className:"w-8 h-8 text-red-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Parents"}),r.jsx("p",{className:"text-red-500 mb-6",children:n}),r.jsx(fe,{onClick:()=>{const Pe=localStorage.getItem("schoolId");Pe&&e(ua({schoolId:parseInt(Pe)}))},className:"bg-green-500 hover:bg-green-600",children:"Try Again"})]})})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsxs("main",{className:"flex-1 px-2 sm:px-4 py-4 w-full max-w-[98vw] mx-auto",children:[r.jsxs("div",{className:"mb-2 flex justify-between",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx(hr,{className:"w-8 h-8 text-green-500"})," Parents"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{onClick:()=>se(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[r.jsx(Fn,{className:"mr-2 h-4 w-4"})," Bulk Upload"]}),r.jsxs(Hr,{open:f,onOpenChange:y,children:[r.jsx(nu,{asChild:!0,children:r.jsxs(fe,{className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[r.jsx(Fa,{className:"mr-2 h-4 w-4"})," Add New Parent"]})}),r.jsxs(Or,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Add New Parent"})}),r.jsxs("form",{onSubmit:Ge,className:"space-y-2",children:[$.general&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Registration Error"}),r.jsx("div",{className:"mt-2 text-sm text-red-700",children:r.jsx("p",{children:$.general})})]})]})}),Object.keys($).length>0&&!$.general&&r.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Please fix the following errors:"}),r.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[((ve=$.user_data)==null?void 0:ve.first_name)&&r.jsxs("li",{children:["First name:"," ",$.user_data.first_name]}),((Ie=$.user_data)==null?void 0:Ie.last_name)&&r.jsxs("li",{children:["Last name:"," ",$.user_data.last_name]}),((ze=$.user_data)==null?void 0:ze.email)&&r.jsxs("li",{children:["Email: ",$.user_data.email]}),((nt=$.user_data)==null?void 0:nt.phone_number)&&r.jsxs("li",{children:["Phone number:"," ",$.user_data.phone_number]}),((Ze=$.user_data)==null?void 0:Ze.password)&&r.jsxs("li",{children:["Password: ",$.user_data.password]}),((ft=$.user_data)==null?void 0:ft.confirm_password)&&r.jsxs("li",{children:["Confirm password:"," ",$.user_data.confirm_password]}),$.address&&r.jsxs("li",{children:["Address: ",$.address]}),$.emergency_contact&&r.jsxs("li",{children:["Emergency contact:"," ",$.emergency_contact]}),$.secondary_phone&&r.jsxs("li",{children:["Secondary phone:"," ",$.secondary_phone]}),$.preferred_contact_method&&r.jsxs("li",{children:["Preferred contact method:"," ",$.preferred_contact_method]}),$.authorized_pickup_persons&&r.jsxs("li",{children:["Authorized pickup persons:"," ",$.authorized_pickup_persons]})]})})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.first_name",children:"First Name"}),r.jsx(Oe,{id:"user_data.first_name",name:"user_data.first_name",value:(($t=ie.user_data)==null?void 0:$t.first_name)||"",onChange:F,required:!0,className:(It=$.user_data)!=null&&It.first_name?"border-red-500":""}),((fr=$.user_data)==null?void 0:fr.first_name)&&r.jsx("p",{className:"text-sm text-red-500",children:$.user_data.first_name})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.last_name",children:"Last Name"}),r.jsx(Oe,{id:"user_data.last_name",name:"user_data.last_name",value:((yt=ie.user_data)==null?void 0:yt.last_name)||"",onChange:F,required:!0,className:(sr=$.user_data)!=null&&sr.last_name?"border-red-500":""}),((Xt=$.user_data)==null?void 0:Xt.last_name)&&r.jsx("p",{className:"text-sm text-red-500",children:$.user_data.last_name})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.email",children:"Email"}),r.jsx(Oe,{id:"user_data.email",name:"user_data.email",type:"email",value:((zt=ie.user_data)==null?void 0:zt.email)||"",onChange:F,required:!0,className:(Ct=$.user_data)!=null&&Ct.email?"border-red-500":""}),((Ne=$.user_data)==null?void 0:Ne.email)&&r.jsx("p",{className:"text-sm text-red-500",children:$.user_data.email})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.phone_number",children:"Phone Number"}),r.jsx(Oe,{id:"user_data.phone_number",name:"user_data.phone_number",value:((lt=ie.user_data)==null?void 0:lt.phone_number)||"",onChange:F,placeholder:"e.g., 0722858508 or +254722858508",required:!0,className:(vt=$.user_data)!=null&&vt.phone_number?"border-red-500":""}),((Qt=$.user_data)==null?void 0:Qt.phone_number)&&r.jsx("p",{className:"text-sm text-red-500",children:$.user_data.phone_number})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.password",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Oe,{id:"user_data.password",name:"user_data.password",type:I?"text":"password",value:((Zr=ie.user_data)==null?void 0:Zr.password)||"",onChange:F,required:!0,className:(Ut=$.user_data)!=null&&Ut.password?"border-red-500":""}),r.jsx("button",{type:"button",onClick:()=>D(!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:I?r.jsx(pl,{size:18}):r.jsx(ls,{size:18})})]}),((nn=$.user_data)==null?void 0:nn.password)&&r.jsx("p",{className:"text-sm text-red-500",children:$.user_data.password})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_data.confirm_password",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Oe,{id:"user_data.confirm_password",name:"user_data.confirm_password",type:P?"text":"password",value:((un=ie.user_data)==null?void 0:un.confirm_password)||"",onChange:F,required:!0,className:(Ps=$.user_data)!=null&&Ps.confirm_password?"border-red-500":""}),r.jsx("button",{type:"button",onClick:()=>A(!P),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:P?r.jsx(pl,{size:18}):r.jsx(ls,{size:18})})]}),((ds=$.user_data)==null?void 0:ds.confirm_password)&&r.jsx("p",{className:"text-sm text-red-500",children:$.user_data.confirm_password})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"address",children:"Address"}),r.jsx(Ma,{id:"address",name:"address",value:ie.address,onChange:F,required:!0,className:$.address?"border-red-500":""}),$.address&&r.jsx("p",{className:"text-sm text-red-500",children:$.address})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"emergency_contact",children:"Emergency Contact"}),r.jsx(Oe,{id:"emergency_contact",name:"emergency_contact",value:ie.emergency_contact,onChange:F,placeholder:"e.g., 0722858508 or +254722858508",required:!0,className:$.emergency_contact?"border-red-500":""}),$.emergency_contact&&r.jsx("p",{className:"text-sm text-red-500",children:$.emergency_contact})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"secondary_phone",children:"Secondary Phone"}),r.jsx(Oe,{id:"secondary_phone",name:"secondary_phone",value:ie.secondary_phone,onChange:F,placeholder:"e.g., 0722858508 or +254722858508",className:$.secondary_phone?"border-red-500":""}),$.secondary_phone&&r.jsx("p",{className:"text-sm text-red-500",children:$.secondary_phone})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"preferred_contact_method",children:"Preferred Contact Method"}),r.jsxs(Jt,{value:ie.preferred_contact_method,onValueChange:Pe=>ee("preferred_contact_method",Pe),children:[r.jsx(Gt,{className:$.preferred_contact_method?"border-red-500":"",children:r.jsx(Zt,{placeholder:"Select contact method"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"email",children:"Email"}),r.jsx(Re,{value:"phone",children:"Phone"}),r.jsx(Re,{value:"sms",children:"SMS"})]})]}),$.preferred_contact_method&&r.jsx("p",{className:"text-sm text-red-500",children:$.preferred_contact_method})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(le,{children:"Authorized Pickup Persons"}),r.jsxs(fe,{type:"button",variant:"outline",onClick:te,className:"text-sm",children:[r.jsx(Fa,{className:"h-4 w-4 mr-2"})," Add Person"]})]}),$.authorized_pickup_persons&&r.jsx("p",{className:"text-sm text-red-500",children:$.authorized_pickup_persons}),R.map((Pe,We)=>r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Name"}),r.jsx(Oe,{value:Pe.name,onChange:wt=>ue(We,"name",wt.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Relation"}),r.jsx(Oe,{value:Pe.relation,onChange:wt=>ue(We,"relation",wt.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Phone"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Oe,{value:Pe.phone,onChange:wt=>ue(We,"phone",wt.target.value),placeholder:"e.g., 0722858508 or +254722858508",required:!0}),We>0&&r.jsx(fe,{type:"button",variant:"destructive",onClick:()=>me(We),className:"px-2",children:""})]})]})]},We))]}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),r.jsx(fe,{type:"submit",className:"bg-green-500 hover:bg-green-600",children:"Add Parent"})]})]})]})]})]})]}),r.jsxs(Me,{className:"bg-white border-0 rounded-xl",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-2"}),r.jsx("div",{className:"bg-white ",children:r.jsx(Ve,{className:"",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(Oe,{placeholder:"Search parents by name, email, or phone...",value:l,onChange:Pe=>_t(Pe.target.value),className:"pl-10 pr-4 py-2 border-gray-200 focus:border-green-500 focus:ring-green-500 rounded-full shadow-sm"})]}),r.jsxs(Jt,{value:d,onValueChange:pe,children:[r.jsx(Gt,{className:"w-full sm:w-40 border-gray-200 rounded-full shadow-sm",children:r.jsx(Zt,{placeholder:"Filter by status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Parents"}),r.jsx(Re,{value:"active",children:"Active"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(fe,{variant:"outline",onClick:X,className:"border-gray-200 hover:bg-gray-50 px-3 py-2 rounded-full shadow-sm",children:"Clear Filters"}),r.jsx(fe,{variant:"outline",onClick:ae,className:"border-gray-200 hover:bg-gray-50 px-3 py-2 rounded-full shadow-sm",children:"Refresh Parents"}),r.jsx(ju,{data:{headers:["Name","Email","Phone Number","Address","Emergency Contact","Secondary Phone","Preferred Contact Method","Authorized Pickup Persons"],data:he.map(Pe=>{var nr,vr,Er,as,_r,W,Ae;const We=Array.isArray((nr=Pe.authorized_pickup_persons)==null?void 0:nr.persons)?Pe.authorized_pickup_persons.persons.map(Ye=>`${Ye.name} (${Ye.relation})`).join("; "):"None",wt=((vr=Pe.user_data)==null?void 0:vr.phone_number)||Pe.user_phone_number||Pe.phone_number||"";return console.log(` Export - Parent: ${Pe.user_full_name}, Phone: ${wt}`),{name:`${((Er=Pe.user_data)==null?void 0:Er.first_name)||((as=Pe.user_full_name)==null?void 0:as.split(" ")[0])||""} ${((_r=Pe.user_data)==null?void 0:_r.last_name)||((W=Pe.user_full_name)==null?void 0:W.split(" ").slice(1).join(" "))||""}`,email:((Ae=Pe.user_data)==null?void 0:Ae.email)||Pe.user_email||"",phone_number:wt,address:Pe.address||"",emergency_contact:Pe.emergency_contact||"",secondary_phone:Pe.secondary_phone||"",preferred_contact_method:Pe.preferred_contact_method||"",authorized_pickup_persons:We}}),fileName:"parents_export",title:"Parents Directory"},className:"border-gray-200 hover:bg-gray-50  rounded-full shadow-sm"})]})]})})})]}),r.jsx(Ve,{className:"p-0",children:(Fe==null?void 0:Fe.length)>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-[800px]",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"w-10 px-4 py-3 text-left",children:r.jsx("input",{type:"checkbox",checked:h.length===Fe.length&&Fe.length>0,onChange:Q,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"})}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Name"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Email"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Phone Number"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Address"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:Fe.map((Pe,We)=>{var wt,nr,vr,Er,as,_r,W,Ae,Ye;return r.jsxs("tr",{className:`transition-colors duration-200 ${We%2===0?"bg-white":"bg-gray-50"} hover:bg-green-50`,children:[r.jsx("td",{className:"w-10 px-4 py-3",children:r.jsx("input",{type:"checkbox",checked:h.includes(Pe.id),onChange:()=>et(Pe.id),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"})}),r.jsxs("td",{className:"px-4 py-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-700 font-bold",children:((nr=(wt=Pe.user_data)==null?void 0:wt.first_name)==null?void 0:nr[0])||((vr=Pe.user_full_name)==null?void 0:vr[0])||"?"}),r.jsxs("div",{className:"font-medium text-gray-900 text-sm",children:[((Er=Pe.user_data)==null?void 0:Er.first_name)||((as=Pe.user_full_name)==null?void 0:as.split(" ")[0])||"-"," ",((_r=Pe.user_data)==null?void 0:_r.last_name)||((W=Pe.user_full_name)==null?void 0:W.split(" ").slice(1).join(" "))||""]})]}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"text-sm text-gray-900",children:((Ae=Pe.user_data)==null?void 0:Ae.email)||Pe.user_email||"-"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"text-sm text-gray-900",children:((Ye=Pe.user_data)==null?void 0:Ye.phone_number)||Pe.user_phone_number||Pe.phone_number||"-"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:Pe.address||"No address provided"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 inline-block"}),"Active"]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(fe,{size:"icon",variant:"ghost",onClick:()=>ne(Pe),title:"View",children:r.jsx(ls,{className:"h-4 w-4"})}),r.jsx(fe,{size:"icon",variant:"ghost",onClick:()=>jt(Pe),title:"Edit",children:r.jsx(na,{className:"h-4 w-4"})}),r.jsx(fe,{size:"icon",variant:"destructive",onClick:()=>dt(Pe),title:"Delete",children:r.jsx(Da,{className:"h-4 w-4"})})]})})]},Pe.id)})})]})}),r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:[r.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:r.jsxs("span",{children:["Showing ",De+1," to"," ",Math.min(Be,he.length)," of"," ",he.length," parents"]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>st(a-1),disabled:a===1,className:"border-gray-200 hover:bg-gray-50 h-8 px-3 rounded-full",children:[r.jsx(cf,{className:"h-4 w-4"}),"Previous"]}),r.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,xe)},(Pe,We)=>{let wt;return xe<=5||a<=3?wt=We+1:a>=xe-2?wt=xe-4+We:wt=a-2+We,r.jsx(fe,{variant:a===wt?"default":"outline",size:"sm",onClick:()=>st(wt),className:a===wt?"bg-green-500 hover:bg-green-600 text-white h-8 w-8 p-0 rounded-full":"border-gray-200 hover:bg-gray-50 h-8 w-8 p-0 rounded-full",children:wt},wt)})}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>st(a+1),disabled:a===xe,className:"border-gray-200 hover:bg-gray-50 h-8 px-3 rounded-full",children:["Next",r.jsx(ru,{className:"h-4 w-4"})]})]})]})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(hr,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:l||d!=="all"?"No matching parents found":"No Parents Found"}),r.jsx("p",{className:"text-gray-500 text-center mb-4 max-w-md text-sm",children:l||d!=="all"?"Try adjusting your search or filter criteria.":"There are no parents registered in your school yet. Add the first parent to get started."}),l||d!=="all"?r.jsx(fe,{onClick:X,variant:"outline",className:"border-gray-200 hover:bg-gray-50 rounded-full",children:"Clear Filters"}):r.jsxs(fe,{onClick:()=>y(!0),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[r.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Add First Parent"]})]})})]})]})}),r.jsx(LT,{isOpen:de,onClose:()=>se(!1),title:"Bulk Upload Parents",description:"Upload multiple parents at once using CSV, PDF, or Word documents.",acceptedFileTypes:[".csv",".xlsx",".xls",".txt",".pdf",".doc",".docx",".html"],maxFileSize:10,maxFiles:5,onUpload:ce,onPreview:Ue,uploadType:"parents"}),r.jsx(RT,{isOpen:ge,onClose:()=>V(!1),data:K,title:"Parent Data Preview",columns:["Name","Email","Phone Number","Address","Emergency Contact","Secondary Phone","Preferred Contact Method","Authorized Pickup Persons","School ID"]}),r.jsx(aX,{parent:k,isOpen:g,onClose:()=>{j(!1),O(null)}}),r.jsx(iX,{parent:k,isOpen:v,onClose:()=>{w(!1),O(null)},onSave:gt}),r.jsx(lu,{open:N,onOpenChange:C,children:r.jsxs(zc,{children:[r.jsxs(Uc,{children:[r.jsx(Vc,{children:"Are you sure?"}),r.jsxs(Hc,{children:['This action cannot be undone. This will permanently delete the parent "',((Xr=k==null?void 0:k.user_data)==null?void 0:Xr.first_name)||((Os=k==null?void 0:k.user_full_name)==null?void 0:Os.split(" ")[0])," ",((Li=k==null?void 0:k.user_data)==null?void 0:Li.last_name)||((wa=k==null?void 0:k.user_full_name)==null?void 0:wa.split(" ").slice(1).join(" ")),'" and remove their data from our servers.']})]}),r.jsxs(qc,{children:[r.jsx(Gc,{children:"Cancel"}),r.jsx(Wc,{onClick:Se,className:"bg-red-600 hover:bg-red-700",children:"Delete Parent"})]})]})})]})}const yX=()=>{var Q,he,xe,De,Be,Fe,st,_t,pe;const e=ns(),{drivers:t,loading:s,error:n}=At(X=>X.drivers),{user:a}=ma(X=>X.auth),{schools:i,loading:o,error:l}=At(X=>X.schools),{toast:c}=Zs(),[d,u]=x.useState({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:"",latitude:"-1.286389",longitude:"36.817223"}),[h,p]=x.useState(!1),[f,y]=x.useState(!1),[g,j]=x.useState(!1);x.useRef(null);const v=()=>{u({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:"",latitude:"-1.286389",longitude:"36.817223"}),y(!1),j(!1)},w=X=>{p(X),X||v()},[N,C]=x.useState(""),[k,O]=x.useState("all"),[R,E]=x.useState(1),[I]=x.useState(10),[D,P]=x.useState(null),[A,$]=x.useState(!1),[U,de]=x.useState(!1),[se,ge]=x.useState(!1),[V,K]=x.useState(!1),[J,ie]=x.useState(!1),[T,F]=x.useState([]),M=X=>{P(X),$(!0)},G=X=>{P(X),de(!0)},ee=X=>{P(X),ge(!0)},te=async()=>{try{if(!D){c({title:"Error",description:"No driver selected for deletion",variant:"destructive"});return}await e(Vx(D.id)).unwrap(),c({title:"Success",description:"Driver deleted successfully"}),ge(!1),P(null)}catch(X){console.error("Delete driver error:",X);let ae="Failed to delete driver";X instanceof Error?ae=X.message:typeof X=="string"&&(ae=X),c({title:"Error",description:ae,variant:"destructive"})}},me=async X=>{try{if(console.log(" Starting CSV upload of",X.length,"files"),!localStorage.getItem("schoolId"))throw new Error("School ID not found");let ve=0,Ie=0;const ze=[];for(let nt=0;nt<X.length;nt++){const Ze=X[nt];console.log(` Processing file ${nt+1}/${X.length}:`,Ze.name);try{const ft=await ET(Ze,"drivers");ft.success?(console.log(` File ${nt+1} uploaded successfully`),ve+=ft.created_count||0,Ie+=ft.skipped_count||0,ft.errors&&ft.errors.length>0&&ft.errors.forEach($t=>{typeof $t=="string"?ze.push($t):$t.row&&$t.field&&$t.message?ze.push(`Row ${$t.row}, ${$t.field}: ${$t.message}`):ze.push(JSON.stringify($t))}),ft.created_users&&ft.created_users.length>0&&console.log(` Created users from file ${Ze.name}:`,ft.created_users)):(console.error(` File ${nt+1} upload failed:`,ft.message),Ie+=1,ze.push(`File "${Ze.name}": ${ft.message}`))}catch(ft){console.error(` Failed to upload file ${nt+1}:`,ft),Ie+=1;const $t=ft instanceof Error?ft.message:"Unknown error";ze.push(`File "${Ze.name}": ${$t}`)}}ve>0&&c({title:"CSV upload completed",description:`Successfully created ${ve} drivers.${Ie>0?` ${Ie} skipped.`:""}`}),Ie>0&&(c({title:"Some records were skipped",description:`${Ie} records were skipped. Check the console for details.`,variant:"destructive"}),console.error(" Upload errors:",ze)),e(Ln())}catch(ae){throw console.error(" CSV upload failed:",ae),c({title:"CSV upload failed",description:ae instanceof Error?ae.message:"Unknown error",variant:"destructive"}),ae}},ue=X=>{F(X),ie(!0)};x.useEffect(()=>{(async()=>{var ae;try{await e(Ln()).unwrap();try{const ve=await e(vl()).unwrap();Array.isArray(ve)||console.error("Invalid schools data format:",ve)}catch(ve){console.error("Failed to fetch schools:",{error:ve,message:ve==null?void 0:ve.message,response:(ae=ve==null?void 0:ve.response)==null?void 0:ae.data})}}catch(ve){console.error("Failed to load data:",ve)}})()},[e]),x.useEffect(()=>{l&&console.error("Error loading schools:",l)},[l]);const Ce=(Q=((i==null?void 0:i.filter(X=>X.admin===(a==null?void 0:a.id)))||[])[0])==null?void 0:Q.id,Ue=(t==null?void 0:t.filter(X=>X.school===Ce))||[],Ge=Ue.filter(X=>{if(!X||!X.user_details)return!1;const ae=(X.user_details.first_name||"").toLowerCase().includes(N.toLowerCase())||(X.user_details.last_name||"").toLowerCase().includes(N.toLowerCase())||(X.user_details.email||"").toLowerCase().includes(N.toLowerCase())||(X.user_details.phone_number||"").toLowerCase().includes(N.toLowerCase())||(X.license_number||"").toLowerCase().includes(N.toLowerCase()),ve=k==="all"||k==="available"&&X.is_available||k==="unavailable"&&!X.is_available;return ae&&ve}),gt=Math.ceil(Ue.length/I),Se=(R-1)*I,ne=Se+I,jt=Ue.slice(Se,ne);x.useEffect(()=>{E(1)},[N,k]);const dt=()=>{const[X,ae]=x.useState({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:"",latitude:"-1.286389",longitude:"36.817223"}),[ve,Ie]=x.useState(!1),[ze,nt]=x.useState(!1),Ze=It=>{const{name:fr,value:yt}=It.target;ae(sr=>({...sr,[fr]:yt}))},ft=async It=>{It.preventDefault();const fr=[{field:"firstName",label:"First Name"},{field:"lastName",label:"Last Name"},{field:"email",label:"Email"},{field:"phoneNumber",label:"Phone Number"},{field:"password",label:"Password"},{field:"confirmPassword",label:"Confirm Password"},{field:"licenseNumber",label:"License Number"},{field:"licenseClass",label:"License Class"},{field:"licenseExpiry",label:"License Expiry"},{field:"lastHealthCheck",label:"Last Health Check"},{field:"lastBackgroundCheck",label:"Last Background Check"}];for(const{field:Xt,label:zt}of fr)if(!X[Xt]||X[Xt]===""){c({title:"Error",description:`${zt} is required`,variant:"destructive"});return}if(X.password!==X.confirmPassword){c({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(X.password.length<8){c({title:"Error",description:"Password must be at least 8 characters long",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(X.email)){c({title:"Error",description:"Please enter a valid email address",variant:"destructive"});return}const sr={user_data:{first_name:X.firstName,last_name:X.lastName,email:X.email,phone_number:X.phoneNumber,password:X.password,confirm_password:X.confirmPassword,user_type:"driver",profile_image:null},license_number:X.licenseNumber,license_expiry:X.licenseExpiry,license_class:X.licenseClass,school:Ce||1,is_available:!0,current_location:{latitude:Number(X.latitude),longitude:Number(X.longitude)},safety_rating:4.8,on_time_rating:4.9,last_health_check:X.lastHealthCheck,last_background_check:X.lastBackgroundCheck};try{await e(qx(sr)).unwrap(),window.location.reload(),c({title:"Success",description:"Driver added successfully"}),ae({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:"",latitude:"-1.286389",longitude:"36.817223"}),Ie(!1),nt(!1),p(!1),e(Ln())}catch(Xt){console.error("Driver creation error:",Xt);let zt="Failed to add driver";if(Xt instanceof Error)try{const Ct=JSON.parse(Xt.message);typeof Ct=="object"&&Ct!==null?Ct.email?zt=`Email: ${Ct.email.join(", ")}`:Ct.phone_number?zt=`Phone: ${Ct.phone_number.join(", ")}`:Ct.license_number?zt=`License: ${Ct.license_number.join(", ")}`:Ct.message?zt=Ct.message:zt=JSON.stringify(Ct,null,2):zt=Xt.message}catch{zt=Xt.message}else zt=String(Xt);c({title:"Error",description:zt,variant:"destructive"})}},$t=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(It=>{ae(fr=>({...fr,latitude:It.coords.latitude.toString(),longitude:It.coords.longitude.toString()})),c({title:"Success",description:"Current location updated"})},It=>{c({title:"Error",description:"Failed to get current location: "+It.message,variant:"destructive"})}):c({title:"Error",description:"Geolocation is not supported by your browser",variant:"destructive"})};return r.jsxs("form",{onSubmit:ft,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"firstName",className:"text-sm font-medium",children:"First Name"}),r.jsx("input",{id:"firstName",name:"firstName",value:X.firstName,onChange:Ze,type:"text",placeholder:"Enter first name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"lastName",className:"text-sm font-medium",children:"Last Name"}),r.jsx("input",{id:"lastName",name:"lastName",value:X.lastName,onChange:Ze,type:"text",placeholder:"Enter last name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),r.jsx("input",{id:"email",name:"email",value:X.email,onChange:Ze,type:"email",placeholder:"Enter email address",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium",children:"Phone Number"}),r.jsx("input",{id:"phoneNumber",name:"phoneNumber",value:X.phoneNumber,onChange:Ze,type:"tel",placeholder:"Enter phone number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",name:"password",value:X.password,onChange:Ze,type:ve?"text":"password",placeholder:"Enter password",required:!0,minLength:8,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-10"}),r.jsx("button",{type:"button",onClick:()=>Ie(!ve),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:ve?r.jsx(pl,{className:"h-4 w-4"}):r.jsx(ls,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"confirmPassword",name:"confirmPassword",value:X.confirmPassword,onChange:Ze,type:ze?"text":"password",placeholder:"Confirm password",required:!0,minLength:8,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-10"}),r.jsx("button",{type:"button",onClick:()=>nt(!ze),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:ze?r.jsx(pl,{className:"h-4 w-4"}):r.jsx(ls,{className:"h-4 w-4"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"licenseNumber",className:"text-sm font-medium",children:"License Number"}),r.jsx("input",{id:"licenseNumber",name:"licenseNumber",value:X.licenseNumber,onChange:Ze,type:"text",placeholder:"Enter license number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"licenseClass",className:"text-sm font-medium",children:"License Class"}),r.jsx("input",{id:"licenseClass",name:"licenseClass",value:X.licenseClass,onChange:Ze,type:"text",placeholder:"Enter license class",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"licenseExpiry",className:"text-sm font-medium",children:"License Expiry"}),r.jsx("input",{id:"licenseExpiry",name:"licenseExpiry",value:X.licenseExpiry,onChange:Ze,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"lastHealthCheck",className:"text-sm font-medium",children:"Last Health Check"}),r.jsx("input",{id:"lastHealthCheck",name:"lastHealthCheck",value:X.lastHealthCheck,onChange:Ze,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"lastBackgroundCheck",className:"text-sm font-medium",children:"Last Background Check"}),r.jsx("input",{id:"lastBackgroundCheck",name:"lastBackgroundCheck",value:X.lastBackgroundCheck,onChange:Ze,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"latitude",className:"text-sm font-medium",children:"Latitude"}),r.jsx("input",{id:"latitude",name:"latitude",value:X.latitude,onChange:Ze,type:"number",step:"any",placeholder:"Enter latitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"longitude",className:"text-sm font-medium",children:"Longitude"}),r.jsx("input",{id:"longitude",name:"longitude",value:X.longitude,onChange:Ze,type:"number",step:"any",placeholder:"Enter longitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{type:"button",onClick:$t,className:"bg-blue-600 hover:bg-blue-700 mb-4",children:"Get Current Location"})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:()=>p(!1),className:"flex-1",children:"Cancel"}),r.jsx(fe,{type:"submit",className:"bg-green-600 hover:bg-green-700 flex-1",children:"Add Driver"})]})]})},et=()=>{var It,fr,yt,sr;const[X,ae]=x.useState({firstName:((It=D==null?void 0:D.user_details)==null?void 0:It.first_name)||"",lastName:((fr=D==null?void 0:D.user_details)==null?void 0:fr.last_name)||"",email:((yt=D==null?void 0:D.user_details)==null?void 0:yt.email)||"",phoneNumber:((sr=D==null?void 0:D.user_details)==null?void 0:sr.phone_number)||"",password:"",confirmPassword:"",licenseNumber:(D==null?void 0:D.license_number)||"",licenseClass:(D==null?void 0:D.license_class)||"",licenseExpiry:(D==null?void 0:D.license_expiry)||"",lastHealthCheck:(D==null?void 0:D.last_health_check)||"",lastBackgroundCheck:(D==null?void 0:D.last_background_check)||"",latitude:"-1.286389",longitude:"36.817223"}),[ve,Ie]=x.useState(!1),[ze,nt]=x.useState(!1);x.useEffect(()=>{var Xt,zt,Ct,Ne;if(D){let lt=-1.286389,vt=36.817223;if(D.current_location){if(typeof D.current_location=="object")lt=D.current_location.latitude,vt=D.current_location.longitude;else if(typeof D.current_location=="string"){const Qt=D.current_location.match(/POINT \(([^ ]+) ([^)]+)\)/);Qt&&(vt=parseFloat(Qt[1]),lt=parseFloat(Qt[2]))}}ae({firstName:((Xt=D.user_details)==null?void 0:Xt.first_name)||"",lastName:((zt=D.user_details)==null?void 0:zt.last_name)||"",email:((Ct=D.user_details)==null?void 0:Ct.email)||"",phoneNumber:((Ne=D.user_details)==null?void 0:Ne.phone_number)||"",password:"",confirmPassword:"",licenseNumber:D.license_number||"",licenseClass:D.license_class||"",licenseExpiry:D.license_expiry||"",lastHealthCheck:D.last_health_check||"",lastBackgroundCheck:D.last_background_check||"",latitude:lt.toString(),longitude:vt.toString()})}},[D]);const Ze=Xt=>{const{name:zt,value:Ct}=Xt.target;ae(Ne=>({...Ne,[zt]:Ct}))},ft=async Xt=>{if(Xt.preventDefault(),!D){c({title:"Error",description:"No driver selected for editing",variant:"destructive"});return}const zt=[{field:"firstName",label:"First Name"},{field:"lastName",label:"Last Name"},{field:"email",label:"Email"},{field:"phoneNumber",label:"Phone Number"},{field:"licenseNumber",label:"License Number"},{field:"licenseClass",label:"License Class"},{field:"licenseExpiry",label:"License Expiry"},{field:"lastHealthCheck",label:"Last Health Check"},{field:"lastBackgroundCheck",label:"Last Background Check"}];for(const{field:lt,label:vt}of zt)if(!X[lt]||X[lt]===""){c({title:"Error",description:`${vt} is required`,variant:"destructive"});return}if(X.password&&X.password!==X.confirmPassword){c({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(X.password&&X.password.length<8){c({title:"Error",description:"Password must be at least 8 characters long",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(X.email)){c({title:"Error",description:"Please enter a valid email address",variant:"destructive"});return}const Ne={user_data:{first_name:X.firstName,last_name:X.lastName,email:X.email,phone_number:X.phoneNumber,...X.password&&{password:X.password},user_type:"driver",profile_image:null},license_number:X.licenseNumber,license_expiry:X.licenseExpiry,license_class:X.licenseClass,school:Ce||1,is_available:D.is_available,current_location:{latitude:Number(X.latitude),longitude:Number(X.longitude)},safety_rating:D.safety_rating,on_time_rating:D.on_time_rating,last_health_check:X.lastHealthCheck,last_background_check:X.lastBackgroundCheck};try{await e(Hx({id:D.id,data:Ne})).unwrap(),c({title:"Success",description:"Driver updated successfully"}),de(!1),P(null),e(Ln())}catch(lt){console.error("Driver update error:",lt);let vt="Failed to update driver";if(lt instanceof Error)try{const Qt=JSON.parse(lt.message);typeof Qt=="object"&&Qt!==null?Qt.email?vt=`Email: ${Qt.email.join(", ")}`:Qt.phone_number?vt=`Phone: ${Qt.phone_number.join(", ")}`:Qt.license_number?vt=`License: ${Qt.license_number.join(", ")}`:Qt.message?vt=Qt.message:vt=JSON.stringify(Qt,null,2):vt=lt.message}catch{vt=lt.message}else vt=String(lt);c({title:"Error",description:vt,variant:"destructive"})}},$t=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(Xt=>{ae(zt=>({...zt,latitude:Xt.coords.latitude.toString(),longitude:Xt.coords.longitude.toString()})),c({title:"Success",description:"Current location updated"})},Xt=>{c({title:"Error",description:"Failed to get current location: "+Xt.message,variant:"destructive"})}):c({title:"Error",description:"Geolocation is not supported by your browser",variant:"destructive"})};return r.jsxs("form",{onSubmit:ft,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editFirstName",className:"text-sm font-medium",children:"First Name"}),r.jsx("input",{id:"editFirstName",name:"firstName",value:X.firstName,onChange:Ze,type:"text",placeholder:"Enter first name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editLastName",className:"text-sm font-medium",children:"Last Name"}),r.jsx("input",{id:"editLastName",name:"lastName",value:X.lastName,onChange:Ze,type:"text",placeholder:"Enter last name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editEmail",className:"text-sm font-medium",children:"Email"}),r.jsx("input",{id:"editEmail",name:"email",value:X.email,onChange:Ze,type:"email",placeholder:"Enter email address",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editPhoneNumber",className:"text-sm font-medium",children:"Phone Number"}),r.jsx("input",{id:"editPhoneNumber",name:"phoneNumber",value:X.phoneNumber,onChange:Ze,type:"tel",placeholder:"Enter phone number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editPassword",className:"text-sm font-medium",children:"Password (leave blank to keep current)"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"editPassword",name:"password",value:X.password,onChange:Ze,type:ve?"text":"password",placeholder:"Enter new password (optional)",minLength:8,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-10"}),r.jsx("button",{type:"button",onClick:()=>Ie(!ve),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:ve?r.jsx(pl,{className:"h-4 w-4"}):r.jsx(ls,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editConfirmPassword",className:"text-sm font-medium",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"editConfirmPassword",name:"confirmPassword",value:X.confirmPassword,onChange:Ze,type:ze?"text":"password",placeholder:"Confirm new password",minLength:8,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-10"}),r.jsx("button",{type:"button",onClick:()=>nt(!ze),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:ze?r.jsx(pl,{className:"h-4 w-4"}):r.jsx(ls,{className:"h-4 w-4"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editLicenseNumber",className:"text-sm font-medium",children:"License Number"}),r.jsx("input",{id:"editLicenseNumber",name:"licenseNumber",value:X.licenseNumber,onChange:Ze,type:"text",placeholder:"Enter license number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editLicenseClass",className:"text-sm font-medium",children:"License Class"}),r.jsx("input",{id:"editLicenseClass",name:"licenseClass",value:X.licenseClass,onChange:Ze,type:"text",placeholder:"Enter license class",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editLicenseExpiry",className:"text-sm font-medium",children:"License Expiry"}),r.jsx("input",{id:"editLicenseExpiry",name:"licenseExpiry",value:X.licenseExpiry,onChange:Ze,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editLastHealthCheck",className:"text-sm font-medium",children:"Last Health Check"}),r.jsx("input",{id:"editLastHealthCheck",name:"lastHealthCheck",value:X.lastHealthCheck,onChange:Ze,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editLastBackgroundCheck",className:"text-sm font-medium",children:"Last Background Check"}),r.jsx("input",{id:"editLastBackgroundCheck",name:"lastBackgroundCheck",value:X.lastBackgroundCheck,onChange:Ze,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editLatitude",className:"text-sm font-medium",children:"Latitude"}),r.jsx("input",{id:"editLatitude",name:"latitude",value:X.latitude,onChange:Ze,type:"number",step:"any",placeholder:"Enter latitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"editLongitude",className:"text-sm font-medium",children:"Longitude"}),r.jsx("input",{id:"editLongitude",name:"longitude",value:X.longitude,onChange:Ze,type:"number",step:"any",placeholder:"Enter longitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{type:"button",onClick:$t,className:"bg-blue-600 hover:bg-blue-700 mb-4",children:"Get Current Location"})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:()=>de(!1),className:"flex-1",children:"Cancel"}),r.jsx(fe,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 flex-1",children:"Update Driver"})]})]})};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsxs("main",{className:"flex-0 px-0 sm:px-0 py-0 w-full max-w-[98vw] mx-auto",children:[r.jsxs(Me,{className:"bg-white shadow-lg border-0 rounded-xl",children:[r.jsxs(Ke,{className:" border-b border-gray-100 flex flex-row w-full items-center justify-between",children:[r.jsxs(Je,{className:"text-xl font-bold text-gray-900 flex items-center",children:[r.jsx(hr,{className:"w-6 h-6 text-green-500"}),"Drivers List"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{onClick:()=>K(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[r.jsx(Fn,{className:"mr-2 h-4 w-4"})," Bulk Upload"]}),r.jsxs(Hr,{open:h,onOpenChange:w,children:[r.jsx(nu,{asChild:!0,children:r.jsxs(fe,{className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[r.jsx(Fa,{className:"mr-2 h-4 w-4"})," Add Driver"]})}),r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Add New Driver"})}),r.jsx(dt,{})]})]})]})]}),r.jsxs(Ve,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(Oe,{placeholder:"Search drivers by name, email, phone, or license...",value:N,onChange:X=>C(X.target.value),className:"pl-10"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vo,{className:"h-4 w-4 text-gray-400"}),r.jsxs(Jt,{value:k,onValueChange:O,children:[r.jsx(Gt,{className:"w-[180px]",children:r.jsx(Zt,{placeholder:"Filter by status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Drivers"}),r.jsx(Re,{value:"available",children:"Available"}),r.jsx(Re,{value:"unavailable",children:"Unavailable"})]})]}),r.jsx(ju,{data:{headers:["Name","Email","Phone Number","License Number","License Class","License Expiry","Status","Safety Rating","On-time Rating","Last Health Check","Last Background Check"],data:Ge.map(X=>{var ae,ve,Ie,ze,nt,Ze;return{name:`${((ae=X.user_details)==null?void 0:ae.first_name)||""} ${((ve=X.user_details)==null?void 0:ve.last_name)||""}`,email:((Ie=X.user_details)==null?void 0:Ie.email)||"",phone_number:((ze=X.user_details)==null?void 0:ze.phone_number)||"",license_number:X.license_number||"",license_class:X.license_class||"",license_expiry:X.license_expiry||"",status:X.is_available?"Available":"Unavailable",safety_rating:((nt=X.safety_rating)==null?void 0:nt.toString())||"",on_time_rating:((Ze=X.on_time_rating)==null?void 0:Ze.toString())||"",last_health_check:X.last_health_check||"",last_background_check:X.last_background_check||""}}),fileName:"drivers_export",title:"Drivers Directory"},className:"border-gray-200 hover:bg-gray-50 px-3 py-2"})]})]}),s?r.jsx("div",{className:"text-center py-4",children:"Loading drivers..."}):n?r.jsx("div",{className:"text-center py-4 text-red-500",children:n}):r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"Name"}),r.jsx(ut,{children:"Email"}),r.jsx(ut,{children:"Phone"}),r.jsx(ut,{children:"License"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Safety Rating"}),r.jsx(ut,{children:"On-time Rating"}),r.jsx(ut,{children:"Actions"})]})}),r.jsx(ja,{children:jt&&jt.length>0?jt.map(X=>{var ae,ve,Ie,ze,nt,Ze;return r.jsxs(Kr,{children:[r.jsxs(ct,{children:[((ae=X.user_details)==null?void 0:ae.first_name)||"N/A"," ",((ve=X.user_details)==null?void 0:ve.last_name)||"N/A"]}),r.jsx(ct,{children:((Ie=X.user_details)==null?void 0:Ie.email)||"N/A"}),r.jsx(ct,{children:((ze=X.user_details)==null?void 0:ze.phone_number)||"N/A"}),r.jsxs(ct,{children:[X.license_number||"N/A"," (",X.license_class||"N/A",")"]}),r.jsx(ct,{children:r.jsx(Te,{variant:X.is_available?"default":"secondary",children:X.is_available?"Available":"Unavailable"})}),r.jsx(ct,{children:((nt=X.safety_rating)==null?void 0:nt.toString())||"N/A"}),r.jsx(ct,{children:((Ze=X.on_time_rating)==null?void 0:Ze.toString())||"N/A"}),r.jsx(ct,{children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsxs(Wt,{onClick:()=>M(X),children:[r.jsx(ls,{className:"h-4 w-4 mr-2"}),"View"]}),r.jsxs(Wt,{onClick:()=>G(X),children:[r.jsx(na,{className:"h-4 w-4 mr-2"}),"Edit"]}),r.jsxs(Wt,{onClick:()=>ee(X),className:"text-red-600",children:[r.jsx(Da,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},X.id)}):r.jsx(Kr,{children:r.jsx(ct,{colSpan:8,className:"text-center",children:"No drivers found"})})})]}),r.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Se+1,"-",Math.min(ne,Ge.length)," of"," ",Ge.length," drivers",N&&` matching "${N}"`,k!=="all"&&` (${k})`]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>E(R-1),disabled:R===1,children:[r.jsx(cf,{className:"h-4 w-4"}),"Previous"]}),r.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:gt},(X,ae)=>ae+1).map(X=>r.jsx(fe,{variant:R===X?"default":"outline",size:"sm",onClick:()=>E(X),className:"w-8 h-8 p-0",children:X},X))}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>E(R+1),disabled:R===gt,children:["Next",r.jsx(ru,{className:"h-4 w-4"})]})]})]})]})]}),r.jsx(Hr,{open:A,onOpenChange:$,children:r.jsxs(Or,{className:"max-w-2xl",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Driver Details"})}),D&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Name"}),r.jsxs("p",{children:[((he=D.user_details)==null?void 0:he.first_name)||"N/A"," ",((xe=D.user_details)==null?void 0:xe.last_name)||"N/A"]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Email"}),r.jsx("p",{children:((De=D.user_details)==null?void 0:De.email)||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Phone"}),r.jsx("p",{children:((Be=D.user_details)==null?void 0:Be.phone_number)||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"License Number"}),r.jsx("p",{children:D.license_number||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"License Class"}),r.jsx("p",{children:D.license_class||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"License Expiry"}),r.jsx("p",{children:D.license_expiry||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Status"}),r.jsx(Te,{variant:D.is_available?"default":"secondary",children:D.is_available?"Available":"Unavailable"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Safety Rating"}),r.jsx("p",{children:((Fe=D.safety_rating)==null?void 0:Fe.toString())||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"On-time Rating"}),r.jsx("p",{children:((st=D.on_time_rating)==null?void 0:st.toString())||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Last Health Check"}),r.jsx("p",{children:D.last_health_check||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Last Background Check"}),r.jsx("p",{children:D.last_background_check||"N/A"})]})]})})]})}),r.jsx(Hr,{open:U,onOpenChange:de,children:r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Edit Driver"})}),D&&r.jsx(et,{})]})}),r.jsx(lu,{open:se,onOpenChange:ge,children:r.jsxs(zc,{children:[r.jsxs(Uc,{children:[r.jsx(Vc,{children:"Are you sure?"}),r.jsxs(Hc,{children:["This action cannot be undone. This will permanently delete the driver",D&&` "${((_t=D.user_details)==null?void 0:_t.first_name)||"Unknown"} ${((pe=D.user_details)==null?void 0:pe.last_name)||"Driver"}"`,"."]})]}),r.jsxs(qc,{children:[r.jsx(Gc,{children:"Cancel"}),r.jsx(Wc,{onClick:te,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),r.jsx(LT,{isOpen:V,onClose:()=>K(!1),title:"Bulk Upload Drivers",description:"Upload multiple drivers at once using CSV, PDF, or Word documents.",acceptedFileTypes:[".csv",".xlsx",".xls",".txt",".pdf",".doc",".docx",".html"],maxFileSize:10,maxFiles:5,onUpload:me,onPreview:ue,uploadType:"drivers"}),r.jsx(RT,{isOpen:J,onClose:()=>ie(!1),data:T,title:"Driver Data Preview",columns:["Name","Email","Phone Number","License Number","License Class","License Expiry","Is Assistant Driver","Last Health Check","Last Background Check","School ID"]})]})})})},c3=({formData:e,setFormData:t,onSubmit:s,loading:n,filteredDrivers:a,driversLoading:i})=>{var c,d,u;const o=h=>{const{name:p,value:f,type:y}=h.target;t(g=>({...g,[p]:y==="number"?Number(f):f}))},l=(h,p)=>{t(f=>({...f,[h]:h==="driver"?Number(p):p}))};return r.jsxs("form",{onSubmit:s,className:"",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"registration_number",children:"Registration Number"}),r.jsx(Oe,{id:"registration_number",name:"registration_number",value:e.registration_number,onChange:o,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"vehicle_type",children:"Vehicle Type"}),r.jsxs(Jt,{value:e.vehicle_type,onValueChange:h=>l("vehicle_type",h),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select vehicle type"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"bus",children:"Bus"}),r.jsx(Re,{value:"van",children:"Van"}),r.jsx(Re,{value:"car",children:"Car"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"capacity",children:"Capacity"}),r.jsx(Oe,{id:"capacity",name:"capacity",type:"number",value:e.capacity,onChange:o,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"driver",children:"Driver"}),r.jsxs(tT,{children:[r.jsx(rT,{asChild:!0,children:r.jsxs(fe,{variant:"outline",role:"combobox",className:"w-full justify-between",disabled:i,children:[e.driver===0?"Select driver...":a.find(h=>(h.user_details.id||h.id)===e.driver)?`${(c=a.find(h=>(h.user_details.id||h.id)===e.driver))==null?void 0:c.user_details.first_name} ${(d=a.find(h=>(h.user_details.id||h.id)===e.driver))==null?void 0:d.user_details.last_name} (${(u=a.find(h=>(h.user_details.id||h.id)===e.driver))==null?void 0:u.phone_number})`:"Select driver...",r.jsx(FP,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(eS,{className:"w-full p-0",children:r.jsxs(rS,{children:[r.jsx(sS,{placeholder:"Search drivers..."}),r.jsxs(nS,{children:[r.jsx(aS,{children:"No driver found."}),r.jsx(iS,{children:i?r.jsx(rp,{disabled:!0,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ii,{className:"h-4 w-4 animate-spin"}),"Loading drivers..."]})}):a.length===0?r.jsx(rp,{disabled:!0,children:"No drivers available"}):a.map(h=>r.jsxs(rp,{value:`${h.user_details.first_name} ${h.user_details.last_name} ${h.phone_number||""}`,onSelect:()=>l("driver",(h.user_details.id||h.id).toString()),children:[r.jsx(Rn,{className:`mr-2 h-4 w-4 ${e.driver===(h.user_details.id||h.id)?"opacity-100":"opacity-0"}`}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{children:[h.user_details.first_name," ",h.user_details.last_name]}),h.phone_number&&r.jsx("span",{className:"text-xs text-muted-foreground",children:h.phone_number})]})]},h.id))})]})]})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"manufacturer",children:"Manufacturer"}),r.jsx(Oe,{id:"manufacturer",name:"manufacturer",value:e.manufacturer,onChange:o,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"model",children:"Model"}),r.jsx(Oe,{id:"model",name:"model",value:e.model,onChange:o,required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"year",children:"Year"}),r.jsx(Oe,{id:"year",name:"year",type:"number",value:e.year,onChange:o,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"fuel_type",children:"Fuel Type"}),r.jsxs(Jt,{value:e.fuel_type,onValueChange:h=>l("fuel_type",h),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select fuel type"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"diesel",children:"Diesel"}),r.jsx(Re,{value:"petrol",children:"Petrol"}),r.jsx(Re,{value:"electric",children:"Electric"})]})]})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"mileage",children:"Mileage"}),r.jsx(Oe,{id:"mileage",name:"mileage",type:"number",value:e.mileage,onChange:o,required:!0})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Features"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"has_gps",checked:e.has_gps,onChange:h=>t(p=>({...p,has_gps:h.target.checked}))}),r.jsx(le,{htmlFor:"has_gps",children:"GPS"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"has_camera",checked:e.has_camera,onChange:h=>t(p=>({...p,has_camera:h.target.checked}))}),r.jsx(le,{htmlFor:"has_camera",children:"Camera"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"has_emergency_button",checked:e.has_emergency_button,onChange:h=>t(p=>({...p,has_emergency_button:h.target.checked}))}),r.jsx(le,{htmlFor:"has_emergency_button",children:"Emergency Button"})]})]})]}),r.jsx(fe,{type:"submit",disabled:n,className:"w-full bg-green-600 hover:bg-green-700 text-white mt-1",children:n?"Adding Vehicle...":"Add Vehicle"})]})};function bX(){var G,ee,te,me,ue;const e=ns(),{toast:t}=Zs(),[s,n]=x.useState(!1),{vehicles:a,loading:i,error:o}=At(ce=>ce.vehicles);x.useEffect(()=>{console.log("Vehicles state updated:",{count:a.length,vehicles:a,loading:i,error:o})},[a,i,o]);const{user:l}=ma(ce=>ce.auth),{schools:c}=At(ce=>ce.schools),{drivers:d,loading:u}=At(ce=>ce.drivers),[h,p]=x.useState(""),[f,y]=x.useState("all"),[g,j]=x.useState(1),[v]=x.useState(10),[w,N]=x.useState(null),[C,k]=x.useState(!1),[O,R]=x.useState(!1),[E,I]=x.useState(!1),D=(c==null?void 0:c.filter(ce=>ce.admin===(l==null?void 0:l.id)))||[],P=(G=D[0])==null?void 0:G.id;console.log("schoolId",P);const A=(d==null?void 0:d.filter(ce=>(ce==null?void 0:ce.school)===P))||[];x.useEffect(()=>{(async()=>{try{if(console.log("Loading vehicles data for schoolId:",P),P){const Ce=await e(Sh({schoolId:P}));console.log("Fetch vehicles result:",Ce)}await e(Ln())}catch(Ce){console.error("Failed to load data:",Ce)}})()},[e,P]),x.useEffect(()=>{console.log("Debug data:",{user:{id:l==null?void 0:l.id,type:l==null?void 0:l.user_type},schoolId:P,schools:{all:c,filtered:D,count:c==null?void 0:c.length},drivers:{all:d,filtered:A,count:d==null?void 0:d.length,loading:u}})},[l,P,c,d,D,A,u]);const $=a.filter(ce=>{var Ge,gt,Se,ne;if(!ce)return!1;const Ce=(ce.registration_number||"").toLowerCase().includes(h.toLowerCase())||(ce.manufacturer||"").toLowerCase().includes(h.toLowerCase())||(ce.model||"").toLowerCase().includes(h.toLowerCase())||(ce.vehicle_type||"").toLowerCase().includes(h.toLowerCase())||(((gt=(Ge=A.find(jt=>(jt==null?void 0:jt.id)===ce.driver))==null?void 0:Ge.user_details)==null?void 0:gt.first_name)||"").toLowerCase().includes(h.toLowerCase())||(((ne=(Se=A.find(jt=>(jt==null?void 0:jt.id)===ce.driver))==null?void 0:Se.user_details)==null?void 0:ne.last_name)||"").toLowerCase().includes(h.toLowerCase()),Ue=f==="all"||f==="active"&&ce.is_active||f==="inactive"&&!ce.is_active;return Ce&&Ue}),U=Math.ceil($.length/v),de=(g-1)*v,se=de+v,ge=$.slice(de,se);x.useEffect(()=>{j(1)},[h,f]);const V=ce=>{N(ce),k(!0)},K=ce=>{N(ce),F({registration_number:ce.registration_number||"",vehicle_type:ce.vehicle_type||"bus",capacity:ce.capacity||40,school:P,driver:ce.driver||0,manufacturer:ce.manufacturer||"",model:ce.model||"",year:ce.year||new Date().getFullYear(),fuel_type:ce.fuel_type||"diesel",is_active:ce.is_active??!0,mileage:ce.mileage||0,has_gps:ce.has_gps??!0,has_camera:ce.has_camera??!0,has_emergency_button:ce.has_emergency_button??!0}),R(!0)},J=ce=>{console.log("handleDelete called with vehicle:",ce),N(ce),I(!0)},ie=async()=>{try{if(console.log("confirmDelete called"),console.log("selectedVehicle:",w),!w){console.log("No vehicle selected"),t({title:"Error",description:"No vehicle selected for deletion",variant:"destructive"});return}if(!w.id){console.log("Vehicle ID is undefined"),t({title:"Error",description:"Vehicle ID is missing",variant:"destructive"});return}console.log("Attempting to delete vehicle with ID:",w.id),console.log("Vehicle ID type:",typeof w.id);const ce=typeof w.id=="string"?parseInt(w.id):w.id;console.log("Converted vehicle ID:",ce),await e(Gx(ce)).unwrap(),console.log("Vehicle deleted successfully"),t({title:"Success",description:"Vehicle deleted successfully"}),I(!1),N(null)}catch(ce){console.error("Delete vehicle error:",ce);let Ce="Failed to delete vehicle";ce instanceof Error?Ce=ce.message:typeof ce=="string"&&(Ce=ce),t({title:"Error",description:Ce,variant:"destructive"})}},[T,F]=x.useState({registration_number:"",vehicle_type:"bus",capacity:40,school:P||null,driver:0,manufacturer:"",model:"",year:new Date().getFullYear(),fuel_type:"diesel",is_active:!0,mileage:0,has_gps:!0,has_camera:!0,has_emergency_button:!0});x.useEffect(()=>{P&&F(ce=>({...ce,school:P}))},[P]);const M=async ce=>{if(ce.preventDefault(),!P){t({title:"Error",description:"No school found. Please contact your administrator.",variant:"destructive"});return}try{await e(Wx(T)).unwrap(),t({title:"Success",description:"Vehicle added successfully"}),n(!1),F({registration_number:"",vehicle_type:"bus",capacity:40,school:P,driver:0,manufacturer:"",model:"",year:new Date().getFullYear(),fuel_type:"diesel",is_active:!0,mileage:0,has_gps:!0,has_camera:!0,has_emergency_button:!0})}catch(Ce){console.error("Vehicle creation error:",Ce);let Ue="Failed to add vehicle";if(Ce instanceof Error)try{const Ge=JSON.parse(Ce.message);typeof Ge=="object"&&Ge!==null?Ue=JSON.stringify(Ge,null,2):Ue=Ce.message}catch{Ue=Ce.message}else Ue=String(Ce);t({title:"Error",description:Ue,variant:"destructive"})}};return i?r.jsx("div",{className:"min-h-screen bg-background p-3 flex w-full",children:r.jsx("div",{className:"flex-1",children:r.jsx("main",{className:"flex-1 bg-background",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ii,{className:"h-5 w-5 animate-spin text-primary"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading vehicles..."})]})})})})}):o?r.jsx("div",{className:"min-h-screen bg-background p-3 flex w-full",children:r.jsx("div",{className:"flex-1",children:r.jsx("main",{className:"flex-1 bg-background",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-destructive mb-4",children:o}),r.jsx(fe,{onClick:()=>window.location.reload(),children:"Try Again"})]})})})})}):r.jsxs("div",{className:"min-h-screen bg-background flex w-full",children:[r.jsx("div",{className:"flex-1",children:r.jsx("main",{className:"flex-1 bg-background",children:r.jsx("div",{className:"",children:r.jsxs(Me,{className:"mt-1",children:[r.jsxs(Ke,{className:"pb-3 border-b border-border flex flex-row w-full items-center justify-between",children:[r.jsxs(Je,{className:"text-xl font-bold text-foreground flex items-center gap-2",children:[r.jsx(Ec,{className:"h-5 w-5"}),"Vehicle List"]}),r.jsxs(Hr,{open:s,onOpenChange:n,children:[r.jsx(nu,{asChild:!0,children:r.jsxs(fe,{className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",disabled:!P,title:P?"":"No school found. Please contact your administrator.",children:[r.jsx(Fa,{className:"mr-2 h-4 w-4"})," Add Vehicle"]})}),r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Add New Vehicle"})}),r.jsx(c3,{formData:T,setFormData:F,onSubmit:M,loading:i,filteredDrivers:A,driversLoading:u})]})]})]}),r.jsx("div",{className:"p-6 border-b border-border/50 bg-muted/10",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(Oe,{placeholder:"Search vehicles by registration, manufacturer, model, or driver...",value:h,onChange:ce=>p(ce.target.value),className:"pl-10 h-10 bg-background border-border/50 focus:border-primary/50 transition-colors"})]}),h&&r.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Found ",$.length," vehicle",$.length!==1?"s":""]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vo,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs(Jt,{value:f,onValueChange:y,children:[r.jsx(Gt,{className:"w-[160px] h-10 bg-background border-border/50",children:r.jsx(Zt,{placeholder:"Filter by status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Vehicles"}),r.jsx(Re,{value:"active",children:"Active"}),r.jsx(Re,{value:"inactive",children:"Inactive"})]})]})]}),r.jsx(ju,{data:{headers:["Registration Number","Driver","Vehicle Type","Capacity","Manufacturer","Model","Year","Fuel Type","Status","Mileage","GPS","Camera","Emergency Button"],data:$.map(ce=>{var Ce,Ue,Ge,gt,Se,ne,jt;return{registration_number:ce.registration_number||"",driver:A.find(dt=>(dt==null?void 0:dt.id)===ce.driver)?`${((Ue=(Ce=A.find(dt=>(dt==null?void 0:dt.id)===ce.driver))==null?void 0:Ce.user_details)==null?void 0:Ue.first_name)||""} ${((gt=(Ge=A.find(dt=>(dt==null?void 0:dt.id)===ce.driver))==null?void 0:Ge.user_details)==null?void 0:gt.last_name)||""}`:"Not Assigned",vehicle_type:ce.vehicle_type||"",capacity:((Se=ce.capacity)==null?void 0:Se.toString())||"",manufacturer:ce.manufacturer||"",model:ce.model||"",year:((ne=ce.year)==null?void 0:ne.toString())||"",fuel_type:ce.fuel_type||"",status:ce.is_active?"Active":"Inactive",mileage:((jt=ce.mileage)==null?void 0:jt.toString())||"",gps:ce.has_gps?"Yes":"No",camera:ce.has_camera?"Yes":"No",emergency_button:ce.has_emergency_button?"Yes":"No"}}),fileName:"vehicles_export",title:"Vehicles Directory"},className:"h-10 bg-background border-border/50 hover:bg-accent/50 transition-colors"})]})]})}),r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-border/50 bg-muted/30",children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Registration No."}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Driver"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Capacity"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-border/50",children:i?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-3",children:[r.jsx(ii,{className:"h-5 w-5 animate-spin text-primary"}),r.jsx("span",{className:"text-muted-foreground",children:"Loading vehicles..."})]})})}):o?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx("span",{className:"text-destructive font-medium",children:o}),r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Try Again"})]})})}):a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(Ec,{className:"h-12 w-12 text-muted-foreground/50"}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"No vehicles found"}),r.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Get started by adding your first vehicle"})]}),r.jsxs(fe,{onClick:()=>n(!0),className:"mt-2",disabled:!P,children:[r.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Add Vehicle"]})]})})}):ge.map(ce=>{var Ge,gt;if(console.log("Rendering vehicle:",ce),!ce)return null;const Ce=A.find(Se=>(Se==null?void 0:Se.id)===ce.driver),Ue=Ce?`${((Ge=Ce.user_details)==null?void 0:Ge.first_name)||""} ${((gt=Ce.user_details)==null?void 0:gt.last_name)||""}`.trim():"Not Assigned";return r.jsxs("tr",{className:"group hover:bg-muted/50 transition-colors duration-200 cursor-pointer",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:r.jsx(Ec,{className:"h-4 w-4 text-primary"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("div",{className:"text-sm font-medium text-foreground",children:ce.registration_number||"N/A"}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[ce.manufacturer," ",ce.model]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:Ue.split(" ").map(Se=>Se[0]).join("").toUpperCase()})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("div",{className:"text-sm font-medium text-foreground",children:Ue}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Driver"})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(Te,{variant:"outline",className:"capitalize font-medium",children:ce.vehicle_type||"N/A"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-sm font-medium text-foreground",children:ce.capacity||"N/A"}),r.jsx("div",{className:"text-xs text-muted-foreground ml-1",children:"seats"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs(Te,{variant:ce.is_active?"default":"secondary",className:`font-medium ${ce.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:[r.jsx("div",{className:"w-2 h-2 rounded-full mr-2 bg-current"}),ce.is_active?"Active":"Inactive"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",className:"w-48",children:[r.jsxs(Wt,{onClick:()=>V(ce),className:"cursor-pointer",children:[r.jsx(ls,{className:"h-4 w-4 mr-2"}),"View Details"]}),r.jsxs(Wt,{onClick:()=>K(ce),className:"cursor-pointer",children:[r.jsx(na,{className:"h-4 w-4 mr-2"}),"Edit Vehicle"]}),r.jsxs(Wt,{onClick:()=>J(ce),className:"text-red-600 cursor-pointer focus:text-red-600",children:[r.jsx(Da,{className:"h-4 w-4 mr-2"}),"Delete Vehicle"]})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>V(ce),className:"h-7 w-7 p-0 hover:bg-accent",title:"View Details",children:r.jsx(ls,{className:"h-3 w-3"})}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>K(ce),className:"h-7 w-7 p-0 hover:bg-accent",title:"Edit Vehicle",children:r.jsx(na,{className:"h-3 w-3"})}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>J(ce),className:"h-7 w-7 p-0 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950/20",title:"Delete Vehicle",children:r.jsx(Da,{className:"h-3 w-3"})})]})]})})]},ce.id)})})]}),r.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-border/50 bg-muted/20",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing"," ",r.jsx("span",{className:"font-medium text-foreground",children:de+1})," ","to"," ",r.jsx("span",{className:"font-medium text-foreground",children:Math.min(se,$.length)})," ","of"," ",r.jsx("span",{className:"font-medium text-foreground",children:$.length})," ","vehicles"]}),$.length>0&&r.jsxs("div",{className:"text-xs text-muted-foreground/70",children:["Page ",g," of ",U]})]}),U>1&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>j(g-1),disabled:g===1,className:"h-8 px-3",children:[r.jsx(cf,{className:"h-4 w-4 mr-1"}),"Previous"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[g>3&&r.jsxs(r.Fragment,{children:[r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>j(1),className:"w-8 h-8 p-0",children:"1"}),g>4&&r.jsx("span",{className:"px-2 text-muted-foreground",children:"..."})]}),Array.from({length:U},(ce,Ce)=>Ce+1).filter(ce=>ce===1||ce===U||Math.abs(ce-g)<=1).map(ce=>r.jsx(fe,{variant:g===ce?"default":"outline",size:"sm",onClick:()=>j(ce),className:"w-8 h-8 p-0",children:ce},ce)),g<U-2&&r.jsxs(r.Fragment,{children:[g<U-3&&r.jsx("span",{className:"px-2 text-muted-foreground",children:"..."}),r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>j(U),className:"w-8 h-8 p-0",children:U})]})]}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>j(g+1),disabled:g===U,className:"h-8 px-3",children:["Next",r.jsx(ru,{className:"h-4 w-4 ml-1"})]})]})]})]})})})}),r.jsx(Hr,{open:C,onOpenChange:k,children:r.jsxs(Or,{className:"max-w-2xl",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Vehicle Details"})}),w&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Registration Number"}),r.jsx("p",{children:w.registration_number||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Vehicle Type"}),r.jsx("p",{className:"capitalize",children:w.vehicle_type||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Manufacturer"}),r.jsx("p",{children:w.manufacturer||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Model"}),r.jsx("p",{children:w.model||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Year"}),r.jsx("p",{children:w.year||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Capacity"}),r.jsxs("p",{children:[w.capacity||"N/A"," passengers"]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Fuel Type"}),r.jsx("p",{className:"capitalize",children:w.fuel_type||"N/A"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Mileage"}),r.jsxs("p",{children:[w.mileage||"N/A"," km"]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Status"}),r.jsx(Te,{variant:w.is_active?"default":"secondary",children:w.is_active?"Active":"Inactive"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Driver"}),r.jsxs("p",{children:[((te=(ee=A.find(ce=>{var Ce;return((Ce=ce==null?void 0:ce.user_details)==null?void 0:Ce.id)===w.driver}))==null?void 0:ee.user_details)==null?void 0:te.first_name)||""," ",((ue=(me=A.find(ce=>{var Ce;return((Ce=ce==null?void 0:ce.user_details)==null?void 0:Ce.id)===w.driver}))==null?void 0:me.user_details)==null?void 0:ue.last_name)||"Not assigned"]})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"font-semibold",children:"Features"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[w.has_gps&&r.jsx(Te,{variant:"outline",children:"GPS"}),w.has_camera&&r.jsx(Te,{variant:"outline",children:"Camera"}),w.has_emergency_button&&r.jsx(Te,{variant:"outline",children:"Emergency Button"})]})]})]})]})}),r.jsx(Hr,{open:O,onOpenChange:R,children:r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Edit Vehicle"})}),r.jsx(c3,{formData:T,setFormData:F,onSubmit:M,loading:i,filteredDrivers:A,driversLoading:u})]})}),r.jsx(lu,{open:E,onOpenChange:I,children:r.jsxs(zc,{children:[r.jsxs(Uc,{children:[r.jsx(Vc,{children:"Are you sure?"}),r.jsxs(Hc,{children:["This action cannot be undone. This will permanently delete the vehicle",w&&` "${w.registration_number}"`,"."]})]}),r.jsxs(qc,{children:[r.jsx(Gc,{children:"Cancel"}),r.jsx(Wc,{onClick:ie,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}function jX({status:e}){if(!e)return r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-600",children:"Unknown"});let t="";return e==="ongoing"?t="bg-yellow-200 text-yellow-800":e==="completed"?t="bg-green-100 text-green-700":e==="cancelled"?t="bg-red-100 text-red-600":e==="delayed"?t="bg-orange-100 text-orange-700":t="bg-gray-100 text-gray-600",r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t}`,children:e.charAt(0).toUpperCase()+e.slice(1)})}function ux({title:e,value:t,icon:s,color:n}){return r.jsx("div",{className:"bg-white rounded-lg p-6 shadow border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t})]}),r.jsx("div",{className:`p-3 rounded-full ${n}`,children:r.jsx(s,{className:"h-6 w-6 text-white"})})]})})}function wX(){const e=ad(),{reports:t,metrics:s,pagination:n,loading:a,error:i}=ma(v=>v.reports),[o,l]=x.useState(""),[c,d]=x.useState({start_date:"",end_date:""});x.useEffect(()=>{e(ac(c))},[e]);const u=(v,w)=>{const N={...c,[v]:w};d(N)},h=()=>{e(ac(c))},p=()=>{d({start_date:"",end_date:""}),e(iU()),e(ac({}))},f=v=>v?new Date(v).toLocaleString():"",y=v=>{if(v==null)return"N/A";const w=Math.floor(v/60),N=v%60;return`${w}h ${N}m`},g=v=>v==null?"N/A":`${v.toFixed(1)} km/h`,j=v=>{if(!v)return null;const w=v.split(":");if(w.length<2)return null;const N=parseInt(w[0])||0,C=parseInt(w[1])||0,k=parseFloat(w[2])||0;return N*60+C+k/60};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[r.jsx(ra,{className:"text-green-500",size:32}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Reports"})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 items-center mb-6",children:[r.jsxs("div",{className:"flex items-center bg-white rounded-full px-4 py-2 shadow w-80 border border-gray-200",children:[r.jsx(Ws,{className:"text-gray-400 mr-2",size:18}),r.jsx("input",{className:"outline-none bg-transparent flex-1 text-sm placeholder-gray-400",placeholder:"Search reports, trips, students...",value:o,onChange:v=>l(v.target.value)})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-4 py-2 shadow border border-gray-200",children:[r.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"From:"}),r.jsx(ai,{className:"text-gray-400 mr-1",size:16}),r.jsx("input",{type:"date",className:"text-xs bg-transparent outline-none w-28",value:c.start_date,onChange:v=>u("start_date",v.target.value)})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-4 py-2 shadow border border-gray-200",children:[r.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"To:"}),r.jsx(ai,{className:"text-gray-400 mr-1",size:16}),r.jsx("input",{type:"date",className:"text-xs bg-transparent outline-none w-28",value:c.end_date,onChange:v=>u("end_date",v.target.value)})]}),r.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white rounded-lg px-6 py-2 flex items-center gap-2 text-sm font-semibold shadow",onClick:h,disabled:a,children:[a?"Loading...":"Run Query"," ",r.jsx(Wj,{size:16})]}),r.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white rounded-lg px-4 py-2 text-sm font-semibold shadow",onClick:p,children:"Clear Filters"})]}),i&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:i}),s&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(ux,{title:"Total Reports",value:s.summary.total_reports,icon:ra,color:"bg-blue-500"}),r.jsx(ux,{title:"Completion Rate",value:`${s.summary.completion_rate}%`,icon:ro,color:"bg-green-500"}),r.jsx(ux,{title:"Students Picked Up",value:s.students.total_picked_up,icon:hr,color:"bg-purple-500"}),r.jsx(ux,{title:"Emergencies",value:s.safety.total_emergencies,icon:Lc,color:"bg-red-500"})]}),s&&r.jsxs("div",{className:"bg-white rounded-xl shadow p-6 mb-8 border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Performance Overview"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Avg Efficiency Score"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.performance.avg_efficiency_score.toFixed(1),"%"]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"On-time Pickup Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.performance.on_time_pickup_rate.toFixed(1),"%"]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"On-time Dropoff Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.performance.on_time_dropoff_rate.toFixed(1),"%"]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Duration Efficiency"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.performance.duration_efficiency.toFixed(1),"%"]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-200 mb-8",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Trip Reports"}),n&&r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",t.length," of ",n.total_reports," reports"]})]}),a?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Loading reports..."})]}):t.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(ra,{className:"text-gray-400 mx-auto mb-2",size:48}),r.jsx("p",{className:"text-gray-600",children:"No reports found"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 text-gray-600",children:[r.jsx("th",{className:"px-6 py-3 text-left",children:"Trip ID"}),r.jsx("th",{className:"px-6 py-3 text-left",children:"Route"}),r.jsx("th",{className:"px-6 py-3 text-left",children:"School"}),r.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left",children:"Students"}),r.jsx("th",{className:"px-6 py-3 text-left",children:"Efficiency"}),r.jsx("th",{className:"px-6 py-3 text-left",children:"Duration"}),r.jsx("th",{className:"px-6 py-3 text-left",children:"Max Speed"}),r.jsx("th",{className:"px-6 py-3 text-left",children:"Generated"})]})}),r.jsx("tbody",{children:t.map(v=>r.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 font-medium",children:v.trip}),r.jsx("td",{className:"px-6 py-4",children:v.trip_route||"N/A"}),r.jsx("td",{className:"px-6 py-4",children:v.school_name||"N/A"}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(jX,{status:v.is_complete?"completed":"ongoing"})}),r.jsxs("td",{className:"px-6 py-4",children:[v.students_picked_up,"/",v.total_students]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`font-semibold ${v.efficiency_score>=80?"text-green-600":v.efficiency_score>=60?"text-yellow-600":"text-red-600"}`,children:[v.efficiency_score,"%"]})}),r.jsx("td",{className:"px-6 py-4",children:y(v.actual_duration_str?j(v.actual_duration_str):null)}),r.jsx("td",{className:"px-6 py-4",children:g(v.max_speed)}),r.jsx("td",{className:"px-6 py-4 text-gray-500",children:f(v.generated_at)})]},v.id))})]})})]}),n&&n.total_pages>1&&r.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg shadow p-4 border border-gray-200",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",n.current_page," of ",n.total_pages]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50",disabled:!n.has_previous,onClick:()=>e(ac({...c,page:n.previous_page})),children:"Previous"}),r.jsx("button",{className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50",disabled:!n.has_next,onClick:()=>e(ac({...c,page:n.next_page})),children:"Next"})]})]})]})}const NX=["School Details","Notification Settings","Email Settings","Push Notifications","School Policies","Personalization"],SX=[{label:"SMS Notifications"},{label:"Email Notifications"},{label:"Push Notifications"}],_X=[{label:"Parents"},{label:"Drivers"},{label:"Staff"}],CX=[{title:"Trip Started",recipient:"Parents"},{title:"Trip Ended",recipient:"Parents"},{title:"SOS Alert",recipient:"Parents"},{title:"Trip Delayed",recipient:"Parents"},{title:"Trip Started",recipient:"Driver"},{title:"Trip Ended",recipient:"Driver"},{title:"Trip Delayed",recipient:"Driver"}];function kX(){const[e,t]=x.useState(0),[s,n]=x.useState(0),[a,i]=x.useState(!1),[o,l]=x.useState({name:"",location:"",description:"",contact_number:"",email:"",operating_hours_start:"08:00",operating_hours_end:"16:00",notification_enabled:!0,allow_parent_tracking:!0,is_active:!0,longitude_point:null,latitude_point:null,school_longitude:null,school_latitude:null}),[c,d]=x.useState(!1),u=x.useRef(null),h=x.useRef(null),p=ns(),{schools:f,loading:y}=At(R=>R.schools),{user:g}=At(R=>R.auth),{preferences:j={showAnalytics:!0,showRecentActivity:!0,showNotificationsPanel:!0,allowDataExport:!0,autoBackup:!0,theme:"light",language:"en"},loading:v}=At(R=>R.preferences),{theme:w,setTheme:N}=l5();Zs();const C=f.find(R=>R.admin===(g==null?void 0:g.id));x.useEffect(()=>{p(vl()),p(Jm())},[p]),x.useEffect(()=>{if(window.google&&window.google.maps){k();return}const R=document.createElement("script");return R.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA4HtS4auqymgQwjbXKXRr1tyBEVFAyOzs&libraries=places",R.async=!0,R.defer=!0,R.onload=()=>{console.log("Google Maps script loaded successfully"),d(!0),k()},document.head.appendChild(R),()=>{const E=document.querySelector('script[src*="maps.googleapis.com"]');E&&E.remove()}},[]),x.useEffect(()=>{c&&(u.current||h.current)&&k()},[c,e]);const k=()=>{const R=document.createElement("style");if(R.textContent=`
      .pac-container {
        border-radius: 0.5rem;
        margin-top: 0.5rem;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        border: 1px solid #e5e7eb;
        background-color: white;
        z-index: 1000;
        max-height: 300px;
        overflow-y: auto;
      }
      .pac-item {
        padding: 0.75rem 1rem;
        cursor: pointer;
        font-size: 0.875rem;
        line-height: 1.25rem;
        border-bottom: 1px solid #f3f4f6;
        transition: background-color 0.2s;
      }
      .pac-item:last-child {
        border-bottom: none;
      }
      .pac-item:hover {
        background-color: #f3f4f6;
      }
      .pac-item-query {
        font-size: 0.875rem;
        color: #1f2937;
        font-weight: 500;
      }
      .pac-icon {
        margin-right: 0.75rem;
        color: #6b7280;
      }
      .pac-matched {
        font-weight: 600;
        color: #2563eb;
      }
    `,document.head.appendChild(R),u.current){console.log("Setting up location autocomplete");const E=new google.maps.places.Autocomplete(u.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"]});E.addListener("place_changed",()=>{var D,P;const I=E.getPlace();if(I.geometry){const A=((D=I.geometry.location)==null?void 0:D.lat())||0,$=((P=I.geometry.location)==null?void 0:P.lng())||0;l(U=>({...U,latitude_point:A,longitude_point:$,location:I.formatted_address||I.name||U.location}))}}),u.current.addEventListener("keydown",I=>{I.key==="Enter"&&I.preventDefault()})}if(h.current){console.log("Setting up school location autocomplete");const E=new google.maps.places.Autocomplete(h.current,{types:["establishment"],fields:["geometry","formatted_address","name"]});E.addListener("place_changed",()=>{var D,P;const I=E.getPlace();if(I.geometry){const A=((D=I.geometry.location)==null?void 0:D.lat())||0,$=((P=I.geometry.location)==null?void 0:P.lng())||0;l(U=>({...U,school_latitude:A,school_longitude:$}))}}),h.current.addEventListener("keydown",I=>{I.key==="Enter"&&I.preventDefault()})}};x.useEffect(()=>{var R,E;C&&(console.log("Current school data:",C),console.log("School coordinates:",{longitude_point:C.longitude_point,latitude_point:C.latitude_point,school_longitude:C.school_longitude,school_latitude:C.school_latitude}),l({name:C.name||"",location:C.location||"",description:C.description||"",contact_number:C.contact_number||"",email:C.email||"",operating_hours_start:((R=C.operating_hours_start)==null?void 0:R.substring(0,5))||"08:00",operating_hours_end:((E=C.operating_hours_end)==null?void 0:E.substring(0,5))||"16:00",notification_enabled:C.notification_enabled||!0,allow_parent_tracking:C.allow_parent_tracking||!0,is_active:C.is_active||!0,longitude_point:C.longitude_point||null,latitude_point:C.latitude_point||null,school_longitude:C.school_longitude||null,school_latitude:C.school_latitude||null}))},[C]);const O=R=>R==null?"Not set":typeof R=="object"?"Complex data (not displayed)":String(R);return r.jsx("div",{className:"min-h-screen bg-background flex w-full",children:r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsxs("main",{className:"flex-1 px-8 py-6 bg-background overflow-y-auto",children:[r.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[r.jsx(Ao,{className:"text-green-500",size:32}),r.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Settings"})]}),r.jsx("div",{className:"flex gap-8 border-b mb-6 overflow-x-auto bg-background sticky top-0 z-10 py-2",children:NX.map((R,E)=>r.jsx("button",{className:`pb-2 text-lg font-medium transition-colors whitespace-nowrap ${E===e?"border-b-2 border-green-400 text-green-400":"text-muted-foreground hover:text-green-400"}`,onClick:()=>t(E),children:R},R))}),e===0&&r.jsx("div",{className:"space-y-6 overflow-y-auto max-h-[calc(100vh-200px)] pr-4",children:r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(ks,{className:"text-green-500",size:24}),"School Information"]})}),r.jsx(Ve,{children:y?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ii,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Loading school details..."})]}):C?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"name",children:"School Name"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.name})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"location",children:"Location"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.location})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"h-5 w-5 text-green-500"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"School Location Search"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"school_location",children:"School Location Coordinates"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:typeof o.school_latitude=="number"&&typeof o.school_longitude=="number"?`${O(o.school_latitude)}, ${O(o.school_longitude)}`:"Not set"}),r.jsx("p",{className:"text-sm text-gray-500",children:"School-specific coordinates for precise location tracking"})]})]}),(o.latitude_point||o.longitude_point)&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Ks,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{children:"General coordinates set"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"latitude",children:"Latitude"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:O(o.latitude_point)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"longitude",children:"Longitude"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:O(o.longitude_point)})]})]})]}),(o.school_latitude||o.school_longitude)&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Ks,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{children:"School-specific coordinates set"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"school_latitude",children:"School Latitude"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:O(o.school_latitude)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"school_longitude",children:"School Longitude"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:O(o.school_longitude)})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"description",children:"Description"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700 min-h-[80px]",children:o.description||"No description available"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"contact_number",children:"Contact Number"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.contact_number})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"email",children:"Email"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.email})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"operating_hours_start",children:"Operating Hours Start"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.operating_hours_start})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"operating_hours_end",children:"Operating Hours End"}),r.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.operating_hours_end})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"School Features"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"notification_enabled",children:"Enable Notifications"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Allow the school to send notifications to parents and drivers"})]}),r.jsx("div",{className:"p-2 bg-gray-50 border rounded-md",children:r.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${o.notification_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.notification_enabled?"Enabled":"Disabled"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"allow_parent_tracking",children:"Allow Parent Tracking"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Allow parents to track their children's bus location"})]}),r.jsx("div",{className:"p-2 bg-gray-50 border rounded-md",children:r.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${o.allow_parent_tracking?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.allow_parent_tracking?"Enabled":"Disabled"})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"is_active",children:"School Active"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Enable or disable the school account"})]}),r.jsx("div",{className:"p-2 bg-gray-50 border rounded-md",children:r.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${o.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.is_active?"Active":"Inactive"})})]})]})]}),r.jsx("div",{className:"flex justify-end pt-6",children:r.jsx("div",{className:"text-sm text-gray-500 italic",children:"School information is read-only. Contact your administrator for updates."})})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ks,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No school found"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have access to any school details."})]})})]})}),e===1&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex flex-wrap gap-12 mb-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Notification Types"}),r.jsx("div",{className:"flex flex-col gap-3",children:SX.map(R=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"w-5 h-5 bg-green-400 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"w-3 h-3 bg-white rounded-full block"})}),r.jsx("span",{className:"text-gray-700",children:R.label})]},R.label))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Notification Recipients"}),r.jsx("div",{className:"flex flex-col gap-3",children:_X.map((R,E)=>r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:E<2,readOnly:!0,className:"accent-green-500 w-4 h-4"}),r.jsx("span",{className:"text-gray-700",children:R.label})]},R.label))})]}),r.jsx("div",{className:"flex-1 flex justify-end items-start",children:r.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition",children:"New Message"})})]}),r.jsx("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:CX.map((R,E)=>r.jsxs("div",{className:`border rounded-lg p-4 flex justify-between items-center cursor-pointer transition ${s===E?"border-green-400 shadow-lg":"border-gray-200"}`,onClick:()=>n(E),children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-800",children:R.title}),r.jsx("div",{className:"text-xs text-gray-500",children:R.recipient})]}),r.jsxs("button",{className:"flex items-center gap-1 text-green-500 hover:underline",children:["Edit ",r.jsx(WU,{size:16})]})]},R.title+R.recipient))}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-4",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"SMS"}),r.jsx("div",{className:"font-bold text-lg text-gray-800 mb-2",children:"Trip Started"}),r.jsx("div",{className:"text-gray-700",children:"Your child's trip has started. The bus has departed from [Starting Location] and is en route. Track live updates in the app. "})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{className:"bg-white border border-green-500 text-green-500 px-8 py-2 rounded hover:bg-green-50 transition",children:"Save"})})]}),e===2&&r.jsx("div",{className:"space-y-6",children:r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(Ao,{className:"text-green-500",size:24}),"Email Configuration"]})}),r.jsxs(Ve,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"smtp_server",children:"SMTP Server"}),r.jsx(Oe,{id:"smtp_server",placeholder:"smtp.gmail.com",defaultValue:"smtp.gmail.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"smtp_port",children:"SMTP Port"}),r.jsx(Oe,{id:"smtp_port",placeholder:"587",defaultValue:"587"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"email_username",children:"Email Username"}),r.jsx(Oe,{id:"email_username",placeholder:"your-email@gmail.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"email_password",children:"Email Password"}),r.jsx(Oe,{id:"email_password",type:"password",placeholder:"Enter email password"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Email Templates"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"welcome_email",children:"Welcome Email"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Send welcome email to new parents"})]}),r.jsx(ts,{id:"welcome_email",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"trip_notifications",children:"Trip Notifications"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Send email notifications for trip updates"})]}),r.jsx(ts,{id:"trip_notifications",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"weekly_reports",children:"Weekly Reports"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Send weekly trip reports to parents"})]}),r.jsx(ts,{id:"weekly_reports"})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{className:"bg-green-500 hover:bg-green-600 text-white",children:"Save Email Settings"})})]})]})}),e===3&&r.jsx("div",{className:"space-y-6",children:r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(Ao,{className:"text-green-500",size:24}),"Push Notification Settings"]})}),r.jsxs(Ve,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notification Types"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"trip_started",children:"Trip Started"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Notify when bus trip begins"})]}),r.jsx(ts,{id:"trip_started",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"trip_ended",children:"Trip Ended"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Notify when bus trip ends"})]}),r.jsx(ts,{id:"trip_ended",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"trip_delayed",children:"Trip Delayed"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Notify when bus is delayed"})]}),r.jsx(ts,{id:"trip_delayed",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"sos_alerts",children:"SOS Alerts"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Emergency notifications"})]}),r.jsx(ts,{id:"sos_alerts",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"route_changes",children:"Route Changes"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Notify about route modifications"})]}),r.jsx(ts,{id:"route_changes"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notification Schedule"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"quiet_hours_start",children:"Quiet Hours Start"}),r.jsx(Oe,{id:"quiet_hours_start",type:"time",defaultValue:"22:00"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"quiet_hours_end",children:"Quiet Hours End"}),r.jsx(Oe,{id:"quiet_hours_end",type:"time",defaultValue:"07:00"})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{className:"bg-green-500 hover:bg-green-600 text-white",children:"Save Push Settings"})})]})]})}),e===4&&r.jsx("div",{className:"space-y-6",children:r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(Ao,{className:"text-green-500",size:24}),"School Policies"]})}),r.jsxs(Ve,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Transportation Policies"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"pickup_time",children:"Maximum Pickup Wait Time (minutes)"}),r.jsx(Oe,{id:"pickup_time",type:"number",placeholder:"15",defaultValue:"15"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"late_policy",children:"Late Student Policy"}),r.jsx(Ma,{id:"late_policy",placeholder:"Enter late student policy...",rows:3,defaultValue:"Students who are more than 5 minutes late for pickup will be left behind and parents will be notified immediately."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"safety_policy",children:"Safety Policy"}),r.jsx(Ma,{id:"safety_policy",placeholder:"Enter safety policy...",rows:3,defaultValue:"All students must wear seatbelts. No eating or drinking on the bus. Students must remain seated during the journey."})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Communication Policies"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"parent_notifications",children:"Parent Notifications"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Allow parents to receive notifications"})]}),r.jsx(ts,{id:"parent_notifications",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"driver_communication",children:"Driver Communication"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Allow direct communication with drivers"})]}),r.jsx(ts,{id:"driver_communication"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"emergency_contacts",children:"Emergency Contact Access"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Allow access to emergency contact information"})]}),r.jsx(ts,{id:"emergency_contacts",defaultChecked:!0})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{className:"bg-green-500 hover:bg-green-600 text-white",children:"Save Policies"})})]})]})}),e===5&&r.jsx("div",{className:"space-y-6",children:r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(Ao,{className:"text-green-500",size:24}),"Personalization Settings"]})}),r.jsx(Ve,{className:"space-y-6",children:v?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(ii,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Loading preferences..."})]}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Theme & Appearance"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"theme",children:"Theme"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose how the application theme should behave. Light/Dark will override your system setting, while System will follow your OS preference."}),r.jsxs("select",{id:"theme",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 ring-green-200 outline-none bg-background border-border text-foreground",value:w,onChange:R=>N(R.target.value),children:[r.jsx("option",{value:"light",children:"Light Theme (Force Light Mode)"}),r.jsx("option",{value:"dark",children:"Dark Theme (Force Dark Mode)"}),r.jsx("option",{value:"auto",children:"System (Follow OS Setting)"})]})]})})]})})})]})})]})})})}const AX=void 0,PX=()=>{const e=ns(),t=Ai(),{toast:s}=Zs(),{profile:n,loading:a,error:i}=At(R=>R.profile),{user:o,token:l}=At(R=>R.auth),[c,d]=x.useState(null),[u,h]=x.useState(!1),[p,f]=x.useState(!1),[y,g]=x.useState({first_name:"",last_name:"",email:"",phone_number:"",user_type:""}),[j,v]=x.useState({current_password:"",new_password:"",confirm_password:""});x.useEffect(()=>{o&&(d(o),g({first_name:o.first_name||"",last_name:o.last_name||"",email:o.email||"",phone_number:o.phone_number||"",user_type:o.user_type||""}))},[o]),x.useEffect(()=>{e(Km())},[e]);const w=R=>{const{name:E,value:I}=R.target;g(D=>({...D,[E]:I}))},N=R=>{const{name:E,value:I}=R.target;v(D=>({...D,[E]:I}))},C=async R=>{R.preventDefault();try{const E=await e(e0(y)).unwrap();d(E),s({title:"Profile Updated",description:"Your profile has been updated successfully."}),h(!1)}catch(E){s({title:"Error",description:E instanceof Error?E.message:"Failed to update profile",variant:"destructive"})}},k=async R=>{var E,I;R.preventDefault();try{if(!l){s({title:"Error",description:"No authentication token found. Please log in again.",variant:"destructive"});return}await js.post(`${AX}/api/change-password/`,j,{headers:{Authorization:`Bearer ${l}`}}),s({title:"Password Changed",description:"Your password has been changed successfully."}),f(!1),v({current_password:"",new_password:"",confirm_password:""})}catch(D){s({title:"Error",description:((I=(E=D.response)==null?void 0:E.data)==null?void 0:I.message)||"Failed to change password",variant:"destructive"})}},O=async()=>{try{await e(AP()).unwrap(),t("/login")}catch{s({title:"Error",description:"Failed to logout. Please try again.",variant:"destructive"})}};return a&&!n?r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})}):i&&!n?r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-red-500 mb-4",children:i}),r.jsx(fe,{onClick:()=>e(Km()),children:"Retry"})]})}):r.jsx("div",{className:"min-h-screen bg-gray-100 p-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Profile"}),r.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),r.jsxs(fe,{variant:"outline",className:"flex items-center gap-2",onClick:O,children:[r.jsx(zU,{className:"w-4 h-4"}),"Logout"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(Me,{className:"md:col-span-1",children:[r.jsx(Ke,{children:r.jsx(Je,{children:"Profile Overview"})}),r.jsx(Ve,{children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center",children:c!=null&&c.profile_image?r.jsx("img",{src:c.profile_image,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):r.jsx(Qi,{className:"w-16 h-16 text-gray-400"})}),r.jsxs("div",{className:"text-center",children:[r.jsxs("h3",{className:"text-xl font-semibold",children:[c==null?void 0:c.first_name," ",c==null?void 0:c.last_name]}),r.jsx("p",{className:"text-gray-600 capitalize",children:c==null?void 0:c.user_type})]})]})})]}),r.jsxs(Me,{className:"md:col-span-2",children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between",children:[r.jsx(Je,{children:"Profile Details"}),r.jsxs("div",{className:"space-x-2",children:[r.jsxs(fe,{variant:"outline",onClick:()=>f(!p),children:[r.jsx(MP,{className:"w-4 h-4 mr-2"}),"Change Password"]}),r.jsx(fe,{variant:"outline",onClick:()=>h(!u),children:u?"Cancel":"Edit Profile"})]})]}),r.jsx(Ve,{children:p?r.jsxs("form",{onSubmit:k,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"current_password",children:"Current Password"}),r.jsx(Oe,{id:"current_password",name:"current_password",type:"password",value:j.current_password,onChange:N,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"new_password",children:"New Password"}),r.jsx(Oe,{id:"new_password",name:"new_password",type:"password",value:j.new_password,onChange:N,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"confirm_password",children:"Confirm New Password"}),r.jsx(Oe,{id:"confirm_password",name:"confirm_password",type:"password",value:j.confirm_password,onChange:N,required:!0})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),r.jsx(fe,{type:"submit",children:"Change Password"})]})]}):r.jsxs("form",{onSubmit:C,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"first_name",children:"First Name"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Qi,{className:"w-5 h-5 text-gray-400"}),r.jsx(Oe,{id:"first_name",name:"first_name",value:y.first_name,onChange:w,disabled:!u})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"last_name",children:"Last Name"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Qi,{className:"w-5 h-5 text-gray-400"}),r.jsx(Oe,{id:"last_name",name:"last_name",value:y.last_name,onChange:w,disabled:!u})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"email",children:"Email"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Oo,{className:"w-5 h-5 text-gray-400"}),r.jsx(Oe,{id:"email",name:"email",type:"email",value:y.email,onChange:w,disabled:!u})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"phone_number",children:"Phone Number"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zo,{className:"w-5 h-5 text-gray-400"}),r.jsx(Oe,{id:"phone_number",name:"phone_number",value:y.phone_number,onChange:w,disabled:!u})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"user_type",children:"Role"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xn,{className:"w-5 h-5 text-gray-400"}),r.jsx(Oe,{id:"user_type",value:y.user_type,disabled:!0,className:"bg-gray-100"})]})]})]}),u&&r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx(fe,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),r.jsx(fe,{type:"submit",disabled:a,children:a?"Saving...":"Save Changes"})]})]})})]})]})]})})},EX=[{id:"starter",name:"Starter",description:"Perfect for small schools getting started",price:2900,billingCycle:"month",icon:Ec,color:"bg-blue-500",maxStudents:50,maxDrivers:5,maxVehicles:3,features:["Up to 50 students","5 drivers","3 vehicles","Basic route management","Email support","Mobile app access","Real-time tracking","Basic reporting"]},{id:"professional",name:"Professional",description:"Ideal for growing schools with more students",price:7900,billingCycle:"month",icon:hr,color:"bg-green-500",maxStudents:200,maxDrivers:15,maxVehicles:10,popular:!0,features:["Up to 200 students","15 drivers","10 vehicles","Advanced route optimization","Priority email support","Custom branding","Advanced analytics","Parent notifications","Driver performance tracking","GPS tracking"]},{id:"enterprise",name:"Enterprise",description:"For large school districts and organizations",price:19900,billingCycle:"month",icon:o5,color:"bg-purple-500",maxStudents:1e3,maxDrivers:50,maxVehicles:30,features:["Up to 1000 students","50 drivers","30 vehicles","Multi-school management","24/7 phone support","Custom integrations","Advanced security","White-label solution","API access","Dedicated account manager"]},{id:"premium",name:"Premium",description:"Ultimate solution for premium schools",price:39900,billingCycle:"month",icon:Rh,color:"bg-yellow-500",maxStudents:2500,maxDrivers:100,maxVehicles:75,features:["Up to 2500 students","100 drivers","75 vehicles","AI-powered route optimization","Premium support","Custom development","Advanced security features","Multi-language support","Advanced reporting suite","Predictive analytics"]},{id:"unlimited",name:"Unlimited",description:"Unlimited everything for the biggest organizations",price:79900,billingCycle:"month",icon:BP,color:"bg-red-500",maxStudents:-1,maxDrivers:-1,maxVehicles:-1,features:["Unlimited students","Unlimited drivers","Unlimited vehicles","Enterprise-grade security","Custom SLA","On-premise deployment option","Full source code access","Custom training","Dedicated support team","Priority feature development"]},{id:"custom",name:"Custom",description:"Tailored solution for your specific needs",price:0,billingCycle:"custom",icon:Ao,color:"bg-gray-500",features:["Custom pricing","Custom features","Custom integrations","Custom deployment","Custom training","Custom support","Custom branding","Custom reporting","Custom security","Custom everything"]}];function LX(){const e=ad(),{plans:t,loading:s,error:n}=ma(y=>y.subscription),[a,i]=x.useState(null),[o,l]=x.useState("month"),{toast:c}=Zs();x.useEffect(()=>{e(Xi())},[e]);const d=y=>{var g;i(y),c({title:"Subscription Selected",description:`You've selected the ${(g=f.find(j=>j.id===y))==null?void 0:g.name} plan. Redirecting to payment...`})},u=y=>o==="year"?Math.round(y*12*.8):y,h=y=>y.id==="custom"?"Contact us":o==="year"?`KSH ${u(y.price).toLocaleString()}/year`:`KSH ${y.price.toLocaleString()}/${y.billingCycle}`,p=y=>{const g=parseFloat(y.base_price),j=parseFloat(y.price_per_student),v=parseFloat(y.price_per_bus),w=g+y.features_json.max_students*j+y.features_json.max_buses*v;return{id:y.name,name:y.name.replace(/_/g," ").replace(/\b\w/g,N=>N.toUpperCase()),description:y.description,price:w,billingCycle:y.default_billing_cycle==="annually"?"year":"month",icon:Ec,color:"bg-blue-500",maxStudents:y.features_json.max_students,maxDrivers:y.features_json.max_buses,maxVehicles:y.features_json.max_buses,features:[`Up to ${y.features_json.max_students} students`,`${y.features_json.max_buses} buses`,y.features_json.sms_notifications?"SMS notifications":null,y.features_json.whatsapp_integration?"WhatsApp integration":null,y.features_json.realtime_tracking?"Real-time tracking":null,y.features_json.parent_app_access?"Parent app access":null,y.features_json.basic_reports?"Basic reports":null,y.features_json.driver_management?"Driver management":null,y.features_json.route_optimization?"Route optimization":null,y.features_json.advanced_analytics?"Advanced analytics":null,y.features_json.api_access?"API access":null].filter(Boolean)}},f=t.length>0?t.map(p):EX;return s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsx("div",{className:"text-center py-12",children:r.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Loading Subscription Plans"}),r.jsx("p",{children:"Please wait while we fetch the latest plans..."})]})})})}):n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("h2",{className:"text-red-800 font-semibold",children:"Error Loading Subscription Plans"}),r.jsx("p",{className:"text-red-600",children:n}),r.jsx(fe,{onClick:()=>e(Xi()),className:"mt-2",children:"Retry"})]})})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:" mb-3",children:r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Choose Your Subscription Plan"})}),r.jsx("div",{className:"flex justify- mb-4",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1 shadow-sm border dark:border-gray-700",children:r.jsxs("div",{className:"flex",children:[r.jsx("button",{onClick:()=>l("month"),className:`px-6 py-2 rounded-md text-sm font-medium transition-colors ${o==="month"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,children:"Monthly"}),r.jsxs("button",{onClick:()=>l("year"),className:`px-6 py-2 rounded-md text-sm font-medium transition-colors ${o==="year"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,children:["Yearly",r.jsx(Te,{variant:"secondary",className:"ml-2 text-xs",children:"Save 20%"})]})]})})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[f.map(y=>r.jsxs(Me,{className:`relative overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-105 flex flex-col h-full ${y.popular?"ring-2 ring-green-500 shadow-lg bg-gradient-to-br from-green-50 to-white":"hover:ring-2 hover:ring-blue-200"}`,children:[y.popular&&r.jsx("div",{className:"absolute top-0 mb-3 right-0 bg-green-500 text-white px-3 py-1 text-xs font-medium rounded-bl-lg",children:"Most Popular"}),r.jsxs(Ke,{className:"text-center mt-1 pb-4",children:[r.jsxs("div",{className:`inline-flex items-center gap-2 p-3 rounded-full ${y.color} text-white mb-4`,children:[r.jsx(y.icon,{className:"h-6 w-6"}),r.jsxs(Je,{className:`text-2xl ${y.color} font-bold`,children:[y.name," "]})]}),r.jsxs(br,{className:"text-gray-600 dark:text-gray-300",children:[y.description," "]})]}),r.jsxs(Ve,{className:"space-y-6 flex-1",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:[y.id==="custom"?"Custom":`KSH ${u(y.price).toLocaleString()}`," "]}),r.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:h(y)}),o==="year"&&y.id!=="custom"&&r.jsxs("div",{className:"text-sm text-green-600 font-medium mt-1",children:["Save KSH"," ",(y.price*12-u(y.price)).toLocaleString(),"/year"]})," "]}),y.maxStudents!==-1&&r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center text-sm",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[y.maxStudents===-1?"":y.maxStudents," "]}),r.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Students"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[y.maxDrivers===-1?"":y.maxDrivers," "]}),r.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Drivers"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[y.maxVehicles===-1?"":y.maxVehicles," "]}),r.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Vehicles"})]})]}),r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Features:"}),r.jsxs("ul",{className:"space-y-2",children:[y.features.map((g,j)=>r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx(Rn,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:g})]},j))," "]})]})]}),r.jsx(u5,{children:r.jsxs(fe,{onClick:()=>d(y.id),className:`w-full ${y.popular?"bg-green-500 hover:bg-green-600":"bg-blue-500 hover:bg-blue-600"}`,variant:(y.popular,"default"),children:[y.id==="custom"?"Contact Sales":"Choose Plan"," "]})})]},y.id))," "]}),r.jsx("div",{className:"mt-16 text-center",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 shadow-sm border dark:border-gray-700",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"All Plans Include"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Xn,{className:"h-6 w-6 text-green-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Security"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Enterprise-grade security"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(av,{className:"h-6 w-6 text-blue-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Real-time Tracking"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Live GPS tracking"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ra,{className:"h-6 w-6 text-purple-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Reports"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Comprehensive analytics"})]})]})]})]})})]})})}function RX(){const e=ad(),{plans:t,loading:s,error:n}=ma(i=>i.subscription);x.useEffect(()=>{e(Xi())},[e]);const a=i=>parseFloat(i).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2});return s?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx(Gr,{className:"h-8 w-64 mb-6"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(i=>r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Gr,{className:"h-6 w-32 mb-2"}),r.jsx(Gr,{className:"h-4 w-48"})]}),r.jsxs(Ve,{children:[r.jsx(Gr,{className:"h-8 w-24 mb-4"}),r.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(o=>r.jsx(Gr,{className:"h-4 w-full"},o))})]})]},i))})]})}):n?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("h2",{className:"text-red-800 font-semibold",children:"Error Loading Subscription Plans"}),r.jsx("p",{className:"text-red-600",children:n}),r.jsx(fe,{onClick:()=>e(Xi()),className:"mt-2",children:"Retry"})]})})}):r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Subscription Plans Management"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View and manage available subscription plans for schools"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>r.jsxs(Me,{className:"relative",children:[!i.is_active&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx(Te,{variant:"secondary",children:"Inactive"})}),r.jsxs(Ke,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Je,{className:"text-xl font-semibold",children:i.name.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())}),i.is_active&&r.jsx(Te,{variant:"default",className:"bg-green-500",children:"Active"})]}),r.jsx(br,{className:"text-sm",children:i.description})]}),r.jsxs(Ve,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Base Price:"}),r.jsx("span",{className:"font-semibold",children:a(i.base_price)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Per Student:"}),r.jsx("span",{className:"font-semibold",children:a(i.price_per_student)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Per Bus:"}),r.jsx("span",{className:"font-semibold",children:a(i.price_per_bus)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Limits"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold",children:i.features_json.max_students}),r.jsx("div",{className:"text-gray-500",children:"Students"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold",children:i.features_json.max_parents}),r.jsx("div",{className:"text-gray-500",children:"Parents"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold",children:i.features_json.max_buses}),r.jsx("div",{className:"text-gray-500",children:"Buses"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Features"}),r.jsx("div",{className:"space-y-1",children:Object.entries(i.features_json).map(([o,l])=>typeof l=="boolean"?r.jsx("div",{className:"flex items-center justify-between text-sm",children:r.jsxs("div",{className:"flex items-center gap-2",children:[l?r.jsx(Rn,{className:"h-4 w-4 text-green-500"}):r.jsx(mu,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"capitalize",children:o.replace(/_/g," ")})]})},o):null)})]}),r.jsx("div",{className:"pt-2 border-t",children:r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Billing Cycle:"}),r.jsx(Te,{variant:"outline",className:"capitalize",children:i.default_billing_cycle})]})})]})]},i.id))}),t.length===0&&!s&&r.jsx("div",{className:"text-center py-12",children:r.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[r.jsx(Xn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Subscription Plans Found"}),r.jsx("p",{children:"No subscription plans are currently available."})]})})]})})}const TX="modulepreload",IX=function(e){return"/"+e},d3={},vw=function(t,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=IX(c),c in d3)return;d3[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":TX,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var ea=Uint8Array,ei=Uint16Array,uS=Int32Array,o1=new ea([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l1=new ea([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yw=new ea([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),TT=function(e,t){for(var s=new ei(31),n=0;n<31;++n)s[n]=t+=1<<e[n-1];for(var a=new uS(s[30]),n=1;n<30;++n)for(var i=s[n];i<s[n+1];++i)a[i]=i-s[n]<<5|n;return{b:s,r:a}},IT=TT(o1,2),FT=IT.b,bw=IT.r;FT[28]=258,bw[258]=28;var DT=TT(l1,0),FX=DT.b,u3=DT.r,jw=new ei(32768);for(var ys=0;ys<32768;++ys){var Yl=(ys&43690)>>1|(ys&21845)<<1;Yl=(Yl&52428)>>2|(Yl&13107)<<2,Yl=(Yl&61680)>>4|(Yl&3855)<<4,jw[ys]=((Yl&65280)>>8|(Yl&255)<<8)>>1}var Bo=function(e,t,s){for(var n=e.length,a=0,i=new ei(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new ei(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(s){l=new ei(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],u=t-e[a],h=o[e[a]-1]++<<u,p=h|(1<<u)-1;h<=p;++h)l[jw[h]>>c]=d}else for(l=new ei(n),a=0;a<n;++a)e[a]&&(l[a]=jw[o[e[a]-1]++]>>15-e[a]);return l},Zc=new ea(288);for(var ys=0;ys<144;++ys)Zc[ys]=8;for(var ys=144;ys<256;++ys)Zc[ys]=9;for(var ys=256;ys<280;++ys)Zc[ys]=7;for(var ys=280;ys<288;++ys)Zc[ys]=8;var Ip=new ea(32);for(var ys=0;ys<32;++ys)Ip[ys]=5;var DX=Bo(Zc,9,0),OX=Bo(Zc,9,1),MX=Bo(Ip,5,0),$X=Bo(Ip,5,1),g2=function(e){for(var t=e[0],s=1;s<e.length;++s)e[s]>t&&(t=e[s]);return t},Oi=function(e,t,s){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&s},x2=function(e,t){var s=t/8|0;return(e[s]|e[s+1]<<8|e[s+2]<<16)>>(t&7)},hS=function(e){return(e+7)/8|0},OT=function(e,t,s){return(s==null||s>e.length)&&(s=e.length),new ea(e.subarray(t,s))},BX=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zi=function(e,t,s){var n=new Error(t||BX[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,zi),!s)throw n;return n},zX=function(e,t,s,n){var a=e.length,i=0;if(!a||t.f&&!t.l)return s||new ea(0);var o=!s,l=o||t.i!=2,c=t.i;o&&(s=new ea(a*3));var d=function(Ce){var Ue=s.length;if(Ce>Ue){var Ge=new ea(Math.max(Ue*2,Ce));Ge.set(s),s=Ge}},u=t.f||0,h=t.p||0,p=t.b||0,f=t.l,y=t.d,g=t.m,j=t.n,v=a*8;do{if(!f){u=Oi(e,h,1);var w=Oi(e,h+1,3);if(h+=3,w)if(w==1)f=OX,y=$X,g=9,j=5;else if(w==2){var O=Oi(e,h,31)+257,R=Oi(e,h+10,15)+4,E=O+Oi(e,h+5,31)+1;h+=14;for(var I=new ea(E),D=new ea(19),P=0;P<R;++P)D[yw[P]]=Oi(e,h+P*3,7);h+=R*3;for(var A=g2(D),$=(1<<A)-1,U=Bo(D,A,1),P=0;P<E;){var de=U[Oi(e,h,$)];h+=de&15;var N=de>>4;if(N<16)I[P++]=N;else{var se=0,ge=0;for(N==16?(ge=3+Oi(e,h,3),h+=2,se=I[P-1]):N==17?(ge=3+Oi(e,h,7),h+=3):N==18&&(ge=11+Oi(e,h,127),h+=7);ge--;)I[P++]=se}}var V=I.subarray(0,O),K=I.subarray(O);g=g2(V),j=g2(K),f=Bo(V,g,1),y=Bo(K,j,1)}else zi(1);else{var N=hS(h)+4,C=e[N-4]|e[N-3]<<8,k=N+C;if(k>a){c&&zi(0);break}l&&d(p+C),s.set(e.subarray(N,k),p),t.b=p+=C,t.p=h=k*8,t.f=u;continue}if(h>v){c&&zi(0);break}}l&&d(p+131072);for(var J=(1<<g)-1,ie=(1<<j)-1,T=h;;T=h){var se=f[x2(e,h)&J],F=se>>4;if(h+=se&15,h>v){c&&zi(0);break}if(se||zi(2),F<256)s[p++]=F;else if(F==256){T=h,f=null;break}else{var M=F-254;if(F>264){var P=F-257,G=o1[P];M=Oi(e,h,(1<<G)-1)+FT[P],h+=G}var ee=y[x2(e,h)&ie],te=ee>>4;ee||zi(3),h+=ee&15;var K=FX[te];if(te>3){var G=l1[te];K+=x2(e,h)&(1<<G)-1,h+=G}if(h>v){c&&zi(0);break}l&&d(p+131072);var me=p+M;if(p<K){var ue=i-K,ce=Math.min(K,me);for(ue+p<0&&zi(3);p<ce;++p)s[p]=n[ue+p]}for(;p<me;++p)s[p]=s[p-K]}}t.l=f,t.p=T,t.b=p,t.f=u,f&&(u=1,t.m=g,t.d=y,t.n=j)}while(!u);return p!=s.length&&o?OT(s,0,p):s.subarray(0,p)},ll=function(e,t,s){s<<=t&7;var n=t/8|0;e[n]|=s,e[n+1]|=s>>8},Sm=function(e,t,s){s<<=t&7;var n=t/8|0;e[n]|=s,e[n+1]|=s>>8,e[n+2]|=s>>16},v2=function(e,t){for(var s=[],n=0;n<e.length;++n)e[n]&&s.push({s:n,f:e[n]});var a=s.length,i=s.slice();if(!a)return{t:$T,l:0};if(a==1){var o=new ea(s[0].s+1);return o[s[0].s]=1,{t:o,l:1}}s.sort(function(k,O){return k.f-O.f}),s.push({s:-1,f:25001});var l=s[0],c=s[1],d=0,u=1,h=2;for(s[0]={s:-1,f:l.f+c.f,l,r:c};u!=a-1;)l=s[s[d].f<s[h].f?d++:h++],c=s[d!=u&&s[d].f<s[h].f?d++:h++],s[u++]={s:-1,f:l.f+c.f,l,r:c};for(var p=i[0].s,n=1;n<a;++n)i[n].s>p&&(p=i[n].s);var f=new ei(p+1),y=ww(s[u-1],f,0);if(y>t){var n=0,g=0,j=y-t,v=1<<j;for(i.sort(function(O,R){return f[R.s]-f[O.s]||O.f-R.f});n<a;++n){var w=i[n].s;if(f[w]>t)g+=v-(1<<y-f[w]),f[w]=t;else break}for(g>>=j;g>0;){var N=i[n].s;f[N]<t?g-=1<<t-f[N]++-1:++n}for(;n>=0&&g;--n){var C=i[n].s;f[C]==t&&(--f[C],++g)}y=t}return{t:new ea(f),l:y}},ww=function(e,t,s){return e.s==-1?Math.max(ww(e.l,t,s+1),ww(e.r,t,s+1)):t[e.s]=s},h3=function(e){for(var t=e.length;t&&!e[--t];);for(var s=new ei(++t),n=0,a=e[0],i=1,o=function(c){s[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:s.subarray(0,n),n:t}},_m=function(e,t){for(var s=0,n=0;n<t.length;++n)s+=e[n]*t[n];return s},MT=function(e,t,s){var n=s.length,a=hS(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=s[i];return(a+4+n)*8},f3=function(e,t,s,n,a,i,o,l,c,d,u){ll(t,u++,s),++a[256];for(var h=v2(a,15),p=h.t,f=h.l,y=v2(i,15),g=y.t,j=y.l,v=h3(p),w=v.c,N=v.n,C=h3(g),k=C.c,O=C.n,R=new ei(19),E=0;E<w.length;++E)++R[w[E]&31];for(var E=0;E<k.length;++E)++R[k[E]&31];for(var I=v2(R,7),D=I.t,P=I.l,A=19;A>4&&!D[yw[A-1]];--A);var $=d+5<<3,U=_m(a,Zc)+_m(i,Ip)+o,de=_m(a,p)+_m(i,g)+o+14+3*A+_m(R,D)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&$<=U&&$<=de)return MT(t,u,e.subarray(c,c+d));var se,ge,V,K;if(ll(t,u,1+(de<U)),u+=2,de<U){se=Bo(p,f,0),ge=p,V=Bo(g,j,0),K=g;var J=Bo(D,P,0);ll(t,u,N-257),ll(t,u+5,O-1),ll(t,u+10,A-4),u+=14;for(var E=0;E<A;++E)ll(t,u+3*E,D[yw[E]]);u+=3*A;for(var ie=[w,k],T=0;T<2;++T)for(var F=ie[T],E=0;E<F.length;++E){var M=F[E]&31;ll(t,u,J[M]),u+=D[M],M>15&&(ll(t,u,F[E]>>5&127),u+=F[E]>>12)}}else se=DX,ge=Zc,V=MX,K=Ip;for(var E=0;E<l;++E){var G=n[E];if(G>255){var M=G>>18&31;Sm(t,u,se[M+257]),u+=ge[M+257],M>7&&(ll(t,u,G>>23&31),u+=o1[M]);var ee=G&31;Sm(t,u,V[ee]),u+=K[ee],ee>3&&(Sm(t,u,G>>5&8191),u+=l1[ee])}else Sm(t,u,se[G]),u+=ge[G]}return Sm(t,u,se[256]),u+ge[256]},UX=new uS([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$T=new ea(0),qX=function(e,t,s,n,a,i){var o=i.z||e.length,l=new ea(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=UX[t-1],p=h>>13,f=h&8191,y=(1<<s)-1,g=i.p||new ei(32768),j=i.h||new ei(y+1),v=Math.ceil(s/3),w=2*v,N=function(gt){return(e[gt]^e[gt+1]<<v^e[gt+2]<<w)&y},C=new uS(25e3),k=new ei(288),O=new ei(32),R=0,E=0,I=i.i||0,D=0,P=i.w||0,A=0;I+2<o;++I){var $=N(I),U=I&32767,de=j[$];if(g[U]=de,j[$]=U,P<=I){var se=o-I;if((R>7e3||D>24576)&&(se>423||!d)){u=f3(e,c,0,C,k,O,E,D,A,I-A,u),D=R=E=0,A=I;for(var ge=0;ge<286;++ge)k[ge]=0;for(var ge=0;ge<30;++ge)O[ge]=0}var V=2,K=0,J=f,ie=U-de&32767;if(se>2&&$==N(I-ie))for(var T=Math.min(p,se)-1,F=Math.min(32767,I),M=Math.min(258,se);ie<=F&&--J&&U!=de;){if(e[I+V]==e[I+V-ie]){for(var G=0;G<M&&e[I+G]==e[I+G-ie];++G);if(G>V){if(V=G,K=ie,G>T)break;for(var ee=Math.min(ie,G-2),te=0,ge=0;ge<ee;++ge){var me=I-ie+ge&32767,ue=g[me],ce=me-ue&32767;ce>te&&(te=ce,de=me)}}}U=de,de=g[U],ie+=U-de&32767}if(K){C[D++]=268435456|bw[V]<<18|u3[K];var Ce=bw[V]&31,Ue=u3[K]&31;E+=o1[Ce]+l1[Ue],++k[257+Ce],++O[Ue],P=I+V,++R}else C[D++]=e[I],++k[e[I]]}}for(I=Math.max(I,P);I<o;++I)C[D++]=e[I],++k[e[I]];u=f3(e,c,d,C,k,O,E,D,A,I-A,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=j,i.p=g,i.i=I,i.w=P)}else{for(var I=i.w||0;I<o+d;I+=65535){var Ge=I+65535;Ge>=o&&(c[u/8|0]=d,Ge=o),u=MT(c,u+1,e.subarray(I,Ge))}i.i=o}return OT(l,0,n+hS(u)+a)},BT=function(){var e=1,t=0;return{p:function(s){for(var n=e,a=t,i=s.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=s[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},VX=function(e,t,s,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new ea(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return qX(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,s,n,a)},zT=function(e,t,s){for(;s;++t)e[t]=s,s>>>=8},HX=function(e,t){var s=t.level,n=s==0?0:s<6?1:s==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=BT();a.p(t.dictionary),zT(e,2,a.d())}},WX=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&zi(6,"invalid zlib data"),(e[1]>>5&1)==1&&zi(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Nw(e,t){t||(t={});var s=BT();s.p(e);var n=VX(e,t,t.dictionary?6:2,4);return HX(n,t),zT(n,n.length-4,s.d()),n}function GX(e,t){return zX(e.subarray(WX(e),-4),{i:2},t,t)}var KX=typeof TextDecoder<"u"&&new TextDecoder,YX=0;try{KX.decode($T,{stream:!0}),YX=1}catch{}var rr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function y2(){rr.console&&typeof rr.console.log=="function"&&rr.console.log.apply(rr.console,arguments)}var fs={log:y2,warn:function(e){rr.console&&(typeof rr.console.warn=="function"?rr.console.warn.apply(rr.console,arguments):y2.call(null,arguments))},error:function(e){rr.console&&(typeof rr.console.error=="function"?rr.console.error.apply(rr.console,arguments):y2(e))}};function b2(e,t,s){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){_d(n.response,t,s)},n.onerror=function(){fs.error("could not download file")},n.send()}function m3(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function hx(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var sp,Sw,_d=rr.saveAs||((typeof window>"u"?"undefined":Vr(window))!=="object"||window!==rr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,s){var n=rr.URL||rr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?m3(a.href)?b2(e,t,s):hx(a,a.target="_blank"):hx(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){hx(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,s){if(t=t||e.name||"download",typeof e=="string")if(m3(e))b2(e,t,s);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){hx(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Vr(i)!=="object"&&(fs.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,s),t)}:function(e,t,s,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return b2(e,t,s);var a=e.type==="application/octet-stream",i=/constructor/i.test(rr.HTMLElement)||rr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Vr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(e)}else{var c=rr.URL||rr.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function UT(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<s.length;n++){var a=s[n].re,i=s[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function j2(e,t){var s=e[0],n=e[1],a=e[2],i=e[3];s=Vn(s,n,a,i,t[0],7,-680876936),i=Vn(i,s,n,a,t[1],12,-389564586),a=Vn(a,i,s,n,t[2],17,606105819),n=Vn(n,a,i,s,t[3],22,-1044525330),s=Vn(s,n,a,i,t[4],7,-176418897),i=Vn(i,s,n,a,t[5],12,1200080426),a=Vn(a,i,s,n,t[6],17,-1473231341),n=Vn(n,a,i,s,t[7],22,-45705983),s=Vn(s,n,a,i,t[8],7,1770035416),i=Vn(i,s,n,a,t[9],12,-1958414417),a=Vn(a,i,s,n,t[10],17,-42063),n=Vn(n,a,i,s,t[11],22,-1990404162),s=Vn(s,n,a,i,t[12],7,1804603682),i=Vn(i,s,n,a,t[13],12,-40341101),a=Vn(a,i,s,n,t[14],17,-1502002290),s=Hn(s,n=Vn(n,a,i,s,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Hn(i,s,n,a,t[6],9,-1069501632),a=Hn(a,i,s,n,t[11],14,643717713),n=Hn(n,a,i,s,t[0],20,-373897302),s=Hn(s,n,a,i,t[5],5,-701558691),i=Hn(i,s,n,a,t[10],9,38016083),a=Hn(a,i,s,n,t[15],14,-660478335),n=Hn(n,a,i,s,t[4],20,-405537848),s=Hn(s,n,a,i,t[9],5,568446438),i=Hn(i,s,n,a,t[14],9,-1019803690),a=Hn(a,i,s,n,t[3],14,-187363961),n=Hn(n,a,i,s,t[8],20,1163531501),s=Hn(s,n,a,i,t[13],5,-1444681467),i=Hn(i,s,n,a,t[2],9,-51403784),a=Hn(a,i,s,n,t[7],14,1735328473),s=Wn(s,n=Hn(n,a,i,s,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Wn(i,s,n,a,t[8],11,-2022574463),a=Wn(a,i,s,n,t[11],16,1839030562),n=Wn(n,a,i,s,t[14],23,-35309556),s=Wn(s,n,a,i,t[1],4,-1530992060),i=Wn(i,s,n,a,t[4],11,1272893353),a=Wn(a,i,s,n,t[7],16,-155497632),n=Wn(n,a,i,s,t[10],23,-1094730640),s=Wn(s,n,a,i,t[13],4,681279174),i=Wn(i,s,n,a,t[0],11,-358537222),a=Wn(a,i,s,n,t[3],16,-722521979),n=Wn(n,a,i,s,t[6],23,76029189),s=Wn(s,n,a,i,t[9],4,-640364487),i=Wn(i,s,n,a,t[12],11,-421815835),a=Wn(a,i,s,n,t[15],16,530742520),s=Gn(s,n=Wn(n,a,i,s,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Gn(i,s,n,a,t[7],10,1126891415),a=Gn(a,i,s,n,t[14],15,-1416354905),n=Gn(n,a,i,s,t[5],21,-57434055),s=Gn(s,n,a,i,t[12],6,1700485571),i=Gn(i,s,n,a,t[3],10,-1894986606),a=Gn(a,i,s,n,t[10],15,-1051523),n=Gn(n,a,i,s,t[1],21,-2054922799),s=Gn(s,n,a,i,t[8],6,1873313359),i=Gn(i,s,n,a,t[15],10,-30611744),a=Gn(a,i,s,n,t[6],15,-1560198380),n=Gn(n,a,i,s,t[13],21,1309151649),s=Gn(s,n,a,i,t[4],6,-145523070),i=Gn(i,s,n,a,t[11],10,-1120210379),a=Gn(a,i,s,n,t[2],15,718787259),n=Gn(n,a,i,s,t[9],21,-343485551),e[0]=xc(s,e[0]),e[1]=xc(n,e[1]),e[2]=xc(a,e[2]),e[3]=xc(i,e[3])}function c1(e,t,s,n,a,i){return t=xc(xc(t,e),xc(n,i)),xc(t<<a|t>>>32-a,s)}function Vn(e,t,s,n,a,i,o){return c1(t&s|~t&n,e,t,a,i,o)}function Hn(e,t,s,n,a,i,o){return c1(t&n|s&~n,e,t,a,i,o)}function Wn(e,t,s,n,a,i,o){return c1(t^s^n,e,t,a,i,o)}function Gn(e,t,s,n,a,i,o){return c1(s^(t|~n),e,t,a,i,o)}function qT(e){var t,s=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)j2(n,JX(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(j2(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*s,j2(n,a),n}function JX(e){var t,s=[];for(t=0;t<64;t+=4)s[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return s}sp=rr.atob.bind(rr),Sw=rr.btoa.bind(rr);var p3="0123456789abcdef".split("");function ZX(e){for(var t="",s=0;s<4;s++)t+=p3[e>>8*s+4&15]+p3[e>>8*s&15];return t}function XX(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function _w(e){return qT(e).map(XX).join("")}var QX=function(e){for(var t=0;t<e.length;t++)e[t]=ZX(e[t]);return e.join("")}(qT("hello"))!="5d41402abc4b2a76b9719d911017c592";function xc(e,t){if(QX){var s=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(s>>16)<<16|65535&s}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Cw(e,t){var s,n,a,i;if(e!==s){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}s=e,n=l}else l=n;var h=t.length,p=0,f=0,y="";for(c=0;c<h;c++)f=(f+(u=l[p=(p+1)%256]))%256,l[p]=l[f],l[f]=u,o=l[(l[p]+l[f])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var g3={print:4,modify:8,copy:16,"annot-forms":32};function th(e,t,s,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(g3.perm!==void 0)throw new Error("Invalid permission: "+l);a+=g3[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=_w(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Cw(this.encryptionKey,this.padding)}function rh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",s=e.length,n=0;n<s;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function x3(e){if(Vr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(s,n,a){if(a=a||!1,typeof s!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(s)||(t[s]={});var i=Math.random().toString(35);return t[s][i]=[n,!!a],i},this.unsubscribe=function(s){for(var n in t)if(t[n][s])return delete t[n][s],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(s){if(t.hasOwnProperty(s)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[s]){var o=t[s][i];try{o[0].apply(e,n)}catch(l){rr.console&&fs.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Av(e){if(!(this instanceof Av))return new Av(e);var t="opacity,stroke-opacity".split(",");for(var s in e)e.hasOwnProperty(s)&&t.indexOf(s)>=0&&(this[s]=e[s]);this.id="",this.objectNumber=-1}function VT(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Cd(e,t,s,n,a){if(!(this instanceof Cd))return new Cd(e,t,s,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=s,VT.call(this,n,a)}function ph(e,t,s,n,a){if(!(this instanceof ph))return new ph(e,t,s,n,a);this.boundingBox=e,this.xStep=t,this.yStep=s,this.stream="",this.cloneIndex=0,VT.call(this,n,a)}function tr(e){var t,s=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Vr(e=e||{})==="object"&&(s=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",s=(""+(s||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=x3;var y="1.3",g=f.__private__.getPdfVersion=function(){return y};f.__private__.setPdfVersion=function(S){y=S};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return j};var v=f.__private__.getPageFormat=function(S){return j[S]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},N=w.COMPAT;function C(){this.saveGraphicsState(),ne(new Ut(ve,0,0,-ve,0,Il()*ve).toString()+" cm"),this.setFontSize(this.getFontSize()/ve),d="n",N=w.ADVANCED}function k(){this.restoreGraphicsState(),d="S",N=w.COMPAT}var O=f.__private__.combineFontStyleAndFontWeight=function(S,z){if(S=="bold"&&z=="normal"||S=="bold"&&z==400||S=="normal"&&z=="italic"||S=="bold"&&z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return z&&(S=z==400||z==="normal"?S==="italic"?"italic":"normal":z!=700&&z!=="bold"||S!=="normal"?(z==700?"bold":z)+""+S:"bold"),S};f.advancedAPI=function(S){var z=N===w.COMPAT;return z&&C.call(this),typeof S!="function"||(S(this),z&&k.call(this)),this},f.compatAPI=function(S){var z=N===w.ADVANCED;return z&&k.call(this),typeof S!="function"||(S(this),z&&C.call(this)),this},f.isAdvancedAPI=function(){return N===w.ADVANCED};var R,E=function(S){if(N!==w.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=f.roundToPrecision=f.__private__.roundToPrecision=function(S,z){var oe=t||z;if(isNaN(S)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(oe).replace(/0+$/,"")};R=f.hpf=f.__private__.hpf=typeof c=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return I(S,c)}:c==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return I(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return I(S,16)};var D=f.f2=f.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return I(S,2)},P=f.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return I(S,3)},A=f.scale=f.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return N===w.COMPAT?S*ve:N===w.ADVANCED?S:void 0},$=function(S){return N===w.COMPAT?Il()-S:N===w.ADVANCED?S:void 0},U=function(S){return A($(S))};f.__private__.setPrecision=f.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(t=parseInt(S,10))};var de,se="00000000000000000000000000000000",ge=f.__private__.getFileId=function(){return se},V=f.__private__.setFileId=function(S){return se=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&($n=new th(u.userPermissions,u.userPassword,u.ownerPassword,se)),se};f.setFileId=function(S){return V(S),this},f.getFileId=function(){return ge()};var K=f.__private__.convertDateToPDFDate=function(S){var z=S.getTimezoneOffset(),oe=z<0?"+":"-",ye=Math.floor(Math.abs(z/60)),ke=Math.abs(z%60),He=[oe,M(ye),"'",M(ke),"'"].join("");return["D:",S.getFullYear(),M(S.getMonth()+1),M(S.getDate()),M(S.getHours()),M(S.getMinutes()),M(S.getSeconds()),He].join("")},J=f.__private__.convertPDFDateToDate=function(S){var z=parseInt(S.substr(2,4),10),oe=parseInt(S.substr(6,2),10)-1,ye=parseInt(S.substr(8,2),10),ke=parseInt(S.substr(10,2),10),He=parseInt(S.substr(12,2),10),ot=parseInt(S.substr(14,2),10);return new Date(z,oe,ye,ke,He,ot,0)},ie=f.__private__.setCreationDate=function(S){var z;if(S===void 0&&(S=new Date),S instanceof Date)z=K(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");z=S}return de=z},T=f.__private__.getCreationDate=function(S){var z=de;return S==="jsDate"&&(z=J(de)),z};f.setCreationDate=function(S){return ie(S),this},f.getCreationDate=function(S){return T(S)};var F,M=f.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},G=f.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},ee=0,te=[],me=[],ue=0,ce=[],Ce=[],Ue=!1,Ge=me,gt=function(){ee=0,ue=0,me=[],te=[],ce=[],wa=Xr(),Pe=Xr()};f.__private__.setCustomOutputDestination=function(S){Ue=!0,Ge=S};var Se=function(S){Ue||(Ge=S)};f.__private__.resetCustomOutputDestination=function(){Ue=!1,Ge=me};var ne=f.__private__.out=function(S){return S=S.toString(),ue+=S.length+1,Ge.push(S),Ge},jt=f.__private__.write=function(S){return ne(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},dt=f.__private__.getArrayBuffer=function(S){for(var z=S.length,oe=new ArrayBuffer(z),ye=new Uint8Array(oe);z--;)ye[z]=S.charCodeAt(z);return oe},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return et};var Q=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(S){return Q=N===w.ADVANCED?S/ve:S,this};var he,xe=f.__private__.getFontSize=f.getFontSize=function(){return N===w.COMPAT?Q:Q*ve},De=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(S){return De=S,this},f.__private__.getR2L=f.getR2L=function(){return De};var Be,Fe=f.__private__.setZoomMode=function(S){var z=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))he=S;else if(isNaN(S)){if(z.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');he=S}else he=parseInt(S,10)};f.__private__.getZoomMode=function(){return he};var st,_t=f.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');Be=S};f.__private__.getPageMode=function(){return Be};var pe=f.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');st=S};f.__private__.getLayoutMode=function(){return st},f.__private__.setDisplayMode=f.setDisplayMode=function(S,z,oe){return Fe(S),pe(z),_t(oe),this};var X={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(S){if(Object.keys(X).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return X[S]},f.__private__.getDocumentProperties=function(){return X},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(S){for(var z in X)X.hasOwnProperty(z)&&S[z]&&(X[z]=S[z]);return this},f.__private__.setDocumentProperty=function(S,z){if(Object.keys(X).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return X[S]=z};var ae,ve,Ie,ze,nt,Ze={},ft={},$t=[],It={},fr={},yt={},sr={},Xt=null,zt=0,Ct=[],Ne=new x3(f),lt=e.hotfixes||[],vt={},Qt={},Zr=[],Ut=function S(z,oe,ye,ke,He,ot){if(!(this instanceof S))return new S(z,oe,ye,ke,He,ot);isNaN(z)&&(z=1),isNaN(oe)&&(oe=0),isNaN(ye)&&(ye=0),isNaN(ke)&&(ke=1),isNaN(He)&&(He=0),isNaN(ot)&&(ot=0),this._matrix=[z,oe,ye,ke,He,ot]};Object.defineProperty(Ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ut.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(S)},Ut.prototype.multiply=function(S){var z=S.sx*this.sx+S.shy*this.shx,oe=S.sx*this.shy+S.shy*this.sy,ye=S.shx*this.sx+S.sy*this.shx,ke=S.shx*this.shy+S.sy*this.sy,He=S.tx*this.sx+S.ty*this.shx+this.tx,ot=S.tx*this.shy+S.ty*this.sy+this.ty;return new Ut(z,oe,ye,ke,He,ot)},Ut.prototype.decompose=function(){var S=this.sx,z=this.shy,oe=this.shx,ye=this.sy,ke=this.tx,He=this.ty,ot=Math.sqrt(S*S+z*z),Et=(S/=ot)*oe+(z/=ot)*ye;oe-=S*Et,ye-=z*Et;var Yt=Math.sqrt(oe*oe+ye*ye);return Et/=Yt,S*(ye/=Yt)<z*(oe/=Yt)&&(S=-S,z=-z,Et=-Et,ot=-ot),{scale:new Ut(ot,0,0,Yt,0,0),translate:new Ut(1,0,0,1,ke,He),rotate:new Ut(S,z,-z,S,0,0),skew:new Ut(1,0,Et,1,0,0)}},Ut.prototype.toString=function(S){return this.join(" ")},Ut.prototype.inversed=function(){var S=this.sx,z=this.shy,oe=this.shx,ye=this.sy,ke=this.tx,He=this.ty,ot=1/(S*ye-z*oe),Et=ye*ot,Yt=-z*ot,dr=-oe*ot,ir=S*ot;return new Ut(Et,Yt,dr,ir,-Et*ke-dr*He,-Yt*ke-ir*He)},Ut.prototype.applyToPoint=function(S){var z=S.x*this.sx+S.y*this.shx+this.tx,oe=S.x*this.shy+S.y*this.sy+this.ty;return new Pu(z,oe)},Ut.prototype.applyToRectangle=function(S){var z=this.applyToPoint(S),oe=this.applyToPoint(new Pu(S.x+S.w,S.y+S.h));return new zf(z.x,z.y,oe.x-z.x,oe.y-z.y)},Ut.prototype.clone=function(){var S=this.sx,z=this.shy,oe=this.shx,ye=this.sy,ke=this.tx,He=this.ty;return new Ut(S,z,oe,ye,ke,He)},f.Matrix=Ut;var nn=f.matrixMult=function(S,z){return z.multiply(S)},un=new Ut(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=un;var Ps=function(S,z){if(!fr[S]){var oe=(z instanceof Cd?"Sh":"P")+(Object.keys(It).length+1).toString(10);z.id=oe,fr[S]=oe,It[oe]=z,Ne.publish("addPattern",z)}};f.ShadingPattern=Cd,f.TilingPattern=ph,f.addShadingPattern=function(S,z){return E("addShadingPattern()"),Ps(S,z),this},f.beginTilingPattern=function(S){E("beginTilingPattern()"),pg(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},f.endTilingPattern=function(S,z){E("endTilingPattern()"),z.stream=Ce[F].join(`
`),Ps(S,z),Ne.publish("endTilingPattern",z),Zr.pop().restore()};var ds=f.__private__.newObject=function(){var S=Xr();return Os(S,!0),S},Xr=f.__private__.newObjectDeferred=function(){return ee++,te[ee]=function(){return ue},ee},Os=function(S,z){return z=typeof z=="boolean"&&z,te[S]=ue,z&&ne(S+" 0 obj"),S},Li=f.__private__.newAdditionalObject=function(){var S={objId:Xr(),content:""};return ce.push(S),S},wa=Xr(),Pe=Xr(),We=f.__private__.decodeColorString=function(S){var z=S.split(" ");if(z.length!==2||z[1]!=="g"&&z[1]!=="G")z.length===5&&(z[4]==="k"||z[4]==="K")&&(z=[(1-z[0])*(1-z[3]),(1-z[1])*(1-z[3]),(1-z[2])*(1-z[3]),"r"]);else{var oe=parseFloat(z[0]);z=[oe,oe,oe,"r"]}for(var ye="#",ke=0;ke<3;ke++)ye+=("0"+Math.floor(255*parseFloat(z[ke])).toString(16)).slice(-2);return ye},wt=f.__private__.encodeColorString=function(S){var z;typeof S=="string"&&(S={ch1:S});var oe=S.ch1,ye=S.ch2,ke=S.ch3,He=S.ch4,ot=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var Et=new UT(oe);if(Et.ok)oe=Et.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var Yt=parseInt(oe.substr(1),16);oe=Yt>>16&255,ye=Yt>>8&255,ke=255&Yt}if(ye===void 0||He===void 0&&oe===ye&&ye===ke)if(typeof oe=="string")z=oe+" "+ot[0];else switch(S.precision){case 2:z=D(oe/255)+" "+ot[0];break;case 3:default:z=P(oe/255)+" "+ot[0]}else if(He===void 0||Vr(He)==="object"){if(He&&!isNaN(He.a)&&He.a===0)return z=["1.","1.","1.",ot[1]].join(" ");if(typeof oe=="string")z=[oe,ye,ke,ot[1]].join(" ");else switch(S.precision){case 2:z=[D(oe/255),D(ye/255),D(ke/255),ot[1]].join(" ");break;default:case 3:z=[P(oe/255),P(ye/255),P(ke/255),ot[1]].join(" ")}}else if(typeof oe=="string")z=[oe,ye,ke,He,ot[2]].join(" ");else switch(S.precision){case 2:z=[D(oe),D(ye),D(ke),D(He),ot[2]].join(" ");break;case 3:default:z=[P(oe),P(ye),P(ke),P(He),ot[2]].join(" ")}return z},nr=f.__private__.getFilters=function(){return o},vr=f.__private__.putStream=function(S){var z=(S=S||{}).data||"",oe=S.filters||nr(),ye=S.alreadyAppliedFilters||[],ke=S.addLength1||!1,He=z.length,ot=S.objectId,Et=function(Bn){return Bn};if(u!==null&&ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Et=$n.encryptor(ot,0));var Yt={};oe===!0&&(oe=["FlateEncode"]);var dr=S.additionalKeyValues||[],ir=(Yt=tr.API.processDataByFilters!==void 0?tr.API.processDataByFilters(z,oe):{data:z,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(Yt.data.length!==0&&(dr.push({key:"Length",value:Yt.data.length}),ke===!0&&dr.push({key:"Length1",value:He})),ir.length!=0)if(ir.split("/").length-1==1)dr.push({key:"Filter",value:ir});else{dr.push({key:"Filter",value:"["+ir+"]"});for(var Lr=0;Lr<dr.length;Lr+=1)if(dr[Lr].key==="DecodeParms"){for(var Ss=[],Rs=0;Rs<Yt.reverseChain.split("/").length-1;Rs+=1)Ss.push("null");Ss.push(dr[Lr].value),dr[Lr].value="["+Ss.join(" ")+"]"}}ne("<<");for(var Qs=0;Qs<dr.length;Qs++)ne("/"+dr[Qs].key+" "+dr[Qs].value);ne(">>"),Yt.data.length!==0&&(ne("stream"),ne(Et(Yt.data)),ne("endstream"))},Er=f.__private__.putPage=function(S){var z=S.number,oe=S.data,ye=S.objId,ke=S.contentsObjId;Os(ye,!0),ne("<</Type /Page"),ne("/Parent "+S.rootDictionaryObjId+" 0 R"),ne("/Resources "+S.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(R(S.mediaBox.bottomLeftX))+" "+parseFloat(R(S.mediaBox.bottomLeftY))+" "+R(S.mediaBox.topRightX)+" "+R(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&ne("/CropBox ["+R(S.cropBox.bottomLeftX)+" "+R(S.cropBox.bottomLeftY)+" "+R(S.cropBox.topRightX)+" "+R(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&ne("/BleedBox ["+R(S.bleedBox.bottomLeftX)+" "+R(S.bleedBox.bottomLeftY)+" "+R(S.bleedBox.topRightX)+" "+R(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&ne("/TrimBox ["+R(S.trimBox.bottomLeftX)+" "+R(S.trimBox.bottomLeftY)+" "+R(S.trimBox.topRightX)+" "+R(S.trimBox.topRightY)+"]"),S.artBox!==null&&ne("/ArtBox ["+R(S.artBox.bottomLeftX)+" "+R(S.artBox.bottomLeftY)+" "+R(S.artBox.topRightX)+" "+R(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&ne("/UserUnit "+S.userUnit),Ne.publish("putPage",{objId:ye,pageContext:Ct[z],pageNumber:z,page:oe}),ne("/Contents "+ke+" 0 R"),ne(">>"),ne("endobj");var He=oe.join(`
`);return N===w.ADVANCED&&(He+=`
Q`),Os(ke,!0),vr({data:He,filters:nr(),objectId:ke}),ne("endobj"),ye},as=f.__private__.putPages=function(){var S,z,oe=[];for(S=1;S<=zt;S++)Ct[S].objId=Xr(),Ct[S].contentsObjId=Xr();for(S=1;S<=zt;S++)oe.push(Er({number:S,data:Ce[S],objId:Ct[S].objId,contentsObjId:Ct[S].contentsObjId,mediaBox:Ct[S].mediaBox,cropBox:Ct[S].cropBox,bleedBox:Ct[S].bleedBox,trimBox:Ct[S].trimBox,artBox:Ct[S].artBox,userUnit:Ct[S].userUnit,rootDictionaryObjId:wa,resourceDictionaryObjId:Pe}));Os(wa,!0),ne("<</Type /Pages");var ye="/Kids [";for(z=0;z<zt;z++)ye+=oe[z]+" 0 R ";ne(ye+"]"),ne("/Count "+zt),ne(">>"),ne("endobj"),Ne.publish("postPutPages")},_r=function(S){Ne.publish("putFont",{font:S,out:ne,newObject:ds,putStream:vr}),S.isAlreadyPutted!==!0&&(S.objectNumber=ds(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+rh(S.postScriptName)),ne("/Subtype /Type1"),typeof S.encoding=="string"&&ne("/Encoding /"+S.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},W=function(){for(var S in Ze)Ze.hasOwnProperty(S)&&(h===!1||h===!0&&p.hasOwnProperty(S))&&_r(Ze[S])},Ae=function(S){S.objectNumber=ds();var z=[];z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Form"}),z.push({key:"BBox",value:"["+[R(S.x),R(S.y),R(S.x+S.width),R(S.y+S.height)].join(" ")+"]"}),z.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var oe=S.pages[1].join(`
`);vr({data:oe,additionalKeyValues:z,objectId:S.objectNumber}),ne("endobj")},Ye=function(){for(var S in vt)vt.hasOwnProperty(S)&&Ae(vt[S])},kt=function(S,z){var oe,ye=[],ke=1/(z-1);for(oe=0;oe<1;oe+=ke)ye.push(oe);if(ye.push(1),S[0].offset!=0){var He={offset:0,color:S[0].color};S.unshift(He)}if(S[S.length-1].offset!=1){var ot={offset:1,color:S[S.length-1].color};S.push(ot)}for(var Et="",Yt=0,dr=0;dr<ye.length;dr++){for(oe=ye[dr];oe>S[Yt+1].offset;)Yt++;var ir=S[Yt].offset,Lr=(oe-ir)/(S[Yt+1].offset-ir),Ss=S[Yt].color,Rs=S[Yt+1].color;Et+=G(Math.round((1-Lr)*Ss[0]+Lr*Rs[0]).toString(16))+G(Math.round((1-Lr)*Ss[1]+Lr*Rs[1]).toString(16))+G(Math.round((1-Lr)*Ss[2]+Lr*Rs[2]).toString(16))}return Et.trim()},Vt=function(S,z){z||(z=21);var oe=ds(),ye=kt(S.colors,z),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+z+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vr({data:ye,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),ne("endobj"),S.objectNumber=ds(),ne("<< /ShadingType "+S.type),ne("/ColorSpace /DeviceRGB");var He="/Coords ["+R(parseFloat(S.coords[0]))+" "+R(parseFloat(S.coords[1]))+" ";S.type===2?He+=R(parseFloat(S.coords[2]))+" "+R(parseFloat(S.coords[3])):He+=R(parseFloat(S.coords[2]))+" "+R(parseFloat(S.coords[3]))+" "+R(parseFloat(S.coords[4]))+" "+R(parseFloat(S.coords[5])),ne(He+="]"),S.matrix&&ne("/Matrix ["+S.matrix.toString()+"]"),ne("/Function "+oe+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Ht=function(S,z){var oe=Xr(),ye=ds();z.push({resourcesOid:oe,objectOid:ye}),S.objectNumber=ye;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+S.boundingBox.map(R).join(" ")+"]"}),ke.push({key:"XStep",value:R(S.xStep)}),ke.push({key:"YStep",value:R(S.yStep)}),ke.push({key:"Resources",value:oe+" 0 R"}),S.matrix&&ke.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),vr({data:S.stream,additionalKeyValues:ke,objectId:S.objectNumber}),ne("endobj")},jr=function(S){var z;for(z in It)It.hasOwnProperty(z)&&(It[z]instanceof Cd?Vt(It[z]):It[z]instanceof ph&&Ht(It[z],S))},Xs=function(S){for(var z in S.objectNumber=ds(),ne("<<"),S)switch(z){case"opacity":ne("/ca "+D(S[z]));break;case"stroke-opacity":ne("/CA "+D(S[z]))}ne(">>"),ne("endobj")},hn=function(){var S;for(S in yt)yt.hasOwnProperty(S)&&Xs(yt[S])},Es=function(){for(var S in ne("/XObject <<"),vt)vt.hasOwnProperty(S)&&vt[S].objectNumber>=0&&ne("/"+S+" "+vt[S].objectNumber+" 0 R");Ne.publish("putXobjectDict"),ne(">>")},Ls=function(){$n.oid=ds(),ne("<<"),ne("/Filter /Standard"),ne("/V "+$n.v),ne("/R "+$n.r),ne("/U <"+$n.toHexString($n.U)+">"),ne("/O <"+$n.toHexString($n.O)+">"),ne("/P "+$n.P),ne(">>"),ne("endobj")},Go=function(){for(var S in ne("/Font <<"),Ze)Ze.hasOwnProperty(S)&&(h===!1||h===!0&&p.hasOwnProperty(S))&&ne("/"+S+" "+Ze[S].objectNumber+" 0 R");ne(">>")},Ko=function(){if(Object.keys(It).length>0){for(var S in ne("/Shading <<"),It)It.hasOwnProperty(S)&&It[S]instanceof Cd&&It[S].objectNumber>=0&&ne("/"+S+" "+It[S].objectNumber+" 0 R");Ne.publish("putShadingPatternDict"),ne(">>")}},Sn=function(S){if(Object.keys(It).length>0){for(var z in ne("/Pattern <<"),It)It.hasOwnProperty(z)&&It[z]instanceof f.TilingPattern&&It[z].objectNumber>=0&&It[z].objectNumber<S&&ne("/"+z+" "+It[z].objectNumber+" 0 R");Ne.publish("putTilingPatternDict"),ne(">>")}},ui=function(){if(Object.keys(yt).length>0){var S;for(S in ne("/ExtGState <<"),yt)yt.hasOwnProperty(S)&&yt[S].objectNumber>=0&&ne("/"+S+" "+yt[S].objectNumber+" 0 R");Ne.publish("putGStateDict"),ne(">>")}},Cr=function(S){Os(S.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Go(),Ko(),Sn(S.objectOid),ui(),Es(),ne(">>"),ne("endobj")},Ua=function(){var S=[];W(),hn(),Ye(),jr(S),Ne.publish("putResources"),S.forEach(Cr),Cr({resourcesOid:Pe,objectOid:Number.MAX_SAFE_INTEGER}),Ne.publish("postPutResources")},ho=function(){Ne.publish("putAdditionalObjects");for(var S=0;S<ce.length;S++){var z=ce[S];Os(z.objId,!0),ne(z.content),ne("endobj")}Ne.publish("postPutAdditionalObjects")},qa=function(S){ft[S.fontName]=ft[S.fontName]||{},ft[S.fontName][S.fontStyle]=S.id},fo=function(S,z,oe,ye,ke){var He={id:"F"+(Object.keys(Ze).length+1).toString(10),postScriptName:S,fontName:z,fontStyle:oe,encoding:ye,isStandardFont:ke||!1,metadata:{}};return Ne.publish("addFont",{font:He,instance:this}),Ze[He.id]=He,qa(He),He.id},ud=function(S){for(var z=0,oe=et.length;z<oe;z++){var ye=fo.call(this,S[z][0],S[z][1],S[z][2],et[z][3],!0);h===!1&&(p[ye]=!0);var ke=S[z][0].split("-");qa({id:ye,fontName:ke[0],fontStyle:ke[1]||""})}Ne.publish("addFonts",{fonts:Ze,dictionary:ft})},_n=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(ye){var z=ye.stack||"";~z.indexOf(" at ")&&(z=z.split(" at ")[1]);var oe="Error in function "+z.split(`
`)[0].split("<")[0]+": "+ye.message;if(!rr.console)throw new Error(oe);rr.console.error(oe,ye),rr.alert&&alert(oe)}},S.foo.bar=S,S.foo},hi=function(S,z){var oe,ye,ke,He,ot,Et,Yt,dr,ir;if(ke=(z=z||{}).sourceEncoding||"Unicode",ot=z.outputEncoding,(z.autoencode||ot)&&Ze[ae].metadata&&Ze[ae].metadata[ke]&&Ze[ae].metadata[ke].encoding&&(He=Ze[ae].metadata[ke].encoding,!ot&&Ze[ae].encoding&&(ot=Ze[ae].encoding),!ot&&He.codePages&&(ot=He.codePages[0]),typeof ot=="string"&&(ot=He[ot]),ot)){for(Yt=!1,Et=[],oe=0,ye=S.length;oe<ye;oe++)(dr=ot[S.charCodeAt(oe)])?Et.push(String.fromCharCode(dr)):Et.push(S[oe]),Et[oe].charCodeAt(0)>>8&&(Yt=!0);S=Et.join("")}for(oe=S.length;Yt===void 0&&oe!==0;)S.charCodeAt(oe-1)>>8&&(Yt=!0),oe--;if(!Yt)return S;for(Et=z.noBOM?[]:[254,255],oe=0,ye=S.length;oe<ye;oe++){if((ir=(dr=S.charCodeAt(oe))>>8)>>8)throw new Error("Character at position "+oe+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Et.push(ir),Et.push(dr-(ir<<8))}return String.fromCharCode.apply(void 0,Et)},fn=f.__private__.pdfEscape=f.pdfEscape=function(S,z){return hi(S,z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yo=f.__private__.beginPage=function(S){Ce[++zt]=[],Ct[zt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},ng(zt),Se(Ce[F])},Va=function(S,z){var oe,ye,ke;switch(s=z||s,typeof S=="string"&&(oe=v(S.toLowerCase()),Array.isArray(oe)&&(ye=oe[0],ke=oe[1])),Array.isArray(S)&&(ye=S[0]*ve,ke=S[1]*ve),isNaN(ye)&&(ye=a[0],ke=a[1]),(ye>14400||ke>14400)&&(fs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),ke=Math.min(14400,ke)),a=[ye,ke],s.substr(0,1)){case"l":ke>ye&&(a=[ke,ye]);break;case"p":ye>ke&&(a=[ke,ye])}Yo(a),dg(Of),ne(Ri),$f!==0&&ne($f+" J"),Bf!==0&&ne(Bf+" j"),Ne.publish("addPage",{pageNumber:zt})},Nu=function(S){S>0&&S<=zt&&(Ce.splice(S,1),Ct.splice(S,1),zt--,F>zt&&(F=zt),this.setPage(F))},ng=function(S){S>0&&S<=zt&&(F=S)},m1=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Ce.length-1},ag=function(S,z,oe){var ye,ke=void 0;return oe=oe||{},S=S!==void 0?S:Ze[ae].fontName,z=z!==void 0?z:Ze[ae].fontStyle,ye=S.toLowerCase(),ft[ye]!==void 0&&ft[ye][z]!==void 0?ke=ft[ye][z]:ft[S]!==void 0&&ft[S][z]!==void 0?ke=ft[S][z]:oe.disableWarning===!1&&fs.warn("Unable to look up font label for font '"+S+"', '"+z+"'. Refer to getFontList() for available fonts."),ke||oe.noFallback||(ke=ft.times[z])==null&&(ke=ft.times.normal),ke},p1=f.__private__.putInfo=function(){var S=ds(),z=function(ye){return ye};for(var oe in u!==null&&(z=$n.encryptor(S,0)),ne("<<"),ne("/Producer ("+fn(z("jsPDF "+tr.version))+")"),X)X.hasOwnProperty(oe)&&X[oe]&&ne("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+fn(z(X[oe]))+")");ne("/CreationDate ("+fn(z(de))+")"),ne(">>"),ne("endobj")},If=f.__private__.putCatalog=function(S){var z=(S=S||{}).rootDictionaryObjId||wa;switch(ds(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+z+" 0 R"),he||(he="fullwidth"),he){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+he;oe.substr(oe.length-1)==="%"&&(he=parseInt(he)/100),typeof he=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+D(he)+"]")}switch(st||(st="continuous"),st){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}Be&&ne("/PageMode /"+Be),Ne.publish("putCatalog"),ne(">>"),ne("endobj")},g1=f.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(ee+1)),ne("/Root "+ee+" 0 R"),ne("/Info "+(ee-1)+" 0 R"),u!==null&&ne("/Encrypt "+$n.oid+" 0 R"),ne("/ID [ <"+se+"> <"+se+"> ]"),ne(">>")},x1=f.__private__.putHeader=function(){ne("%PDF-"+y),ne("%")},v1=f.__private__.putXRef=function(){var S="0000000000";ne("xref"),ne("0 "+(ee+1)),ne("0000000000 65535 f ");for(var z=1;z<=ee;z++)typeof te[z]=="function"?ne((S+te[z]()).slice(-10)+" 00000 n "):te[z]!==void 0?ne((S+te[z]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},Jo=f.__private__.buildDocument=function(){gt(),Se(me),Ne.publish("buildDocument"),x1(),as(),ho(),Ua(),u!==null&&Ls(),p1(),If();var S=ue;return v1(),g1(),ne("startxref"),ne(""+S),ne("%%EOF"),Se(Ce[F]),me.join(`
`)},Su=f.__private__.getBlob=function(S){return new Blob([dt(S)],{type:"application/pdf"})},_u=f.output=f.__private__.output=_n(function(S,z){switch(typeof(z=z||{})=="string"?z={filename:z}:z.filename=z.filename||"generated.pdf",S){case void 0:return Jo();case"save":f.save(z.filename);break;case"arraybuffer":return dt(Jo());case"blob":return Su(Jo());case"bloburi":case"bloburl":if(rr.URL!==void 0&&typeof rr.URL.createObjectURL=="function")return rr.URL&&rr.URL.createObjectURL(Su(Jo()))||void 0;fs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",ye=Jo();try{oe=Sw(ye)}catch{oe=Sw(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+z.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(rr)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",He=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';z.pdfObjectUrl&&(ke=z.pdfObjectUrl,He="");var ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+He+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(z)+");<\/script></body></html>",Et=rr.open();return Et!==null&&Et.document.write(ot),Et}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(rr)==="[object Window]"){var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+z.filename+'" width="500px" height="400px" /></body></html>',dr=rr.open();if(dr!==null){dr.document.write(Yt);var ir=this;dr.document.documentElement.querySelector("#pdfViewer").onload=function(){dr.document.title=z.filename,dr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ir.output("bloburl"))}}return dr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(rr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",z)+'"></iframe></body></html>',Ss=rr.open();if(Ss!==null&&(Ss.document.write(Lr),Ss.document.title=z.filename),Ss||typeof safari>"u")return Ss;break;case"datauri":case"dataurl":return rr.document.location.href=this.output("datauristring",z);default:return null}}),ig=function(S){return Array.isArray(lt)===!0&&lt.indexOf(S)>-1};switch(n){case"pt":ve=1;break;case"mm":ve=72/25.4;break;case"cm":ve=72/2.54;break;case"in":ve=72;break;case"px":ve=ig("px_scaling")==1?.75:96/72;break;case"pc":case"em":ve=12;break;case"ex":ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ve=n}var $n=null;ie(),V();var y1=function(S){return u!==null?$n.encryptor(S,0):function(z){return z}},og=f.__private__.getPageInfo=f.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ct[S].objId,pageNumber:S,pageContext:Ct[S]}},ar=f.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var z in Ct)if(Ct[z].objId===S)break;return og(z)},b1=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ct[F].objId,pageNumber:F,pageContext:Ct[F]}};f.addPage=function(){return Va.apply(this,arguments),this},f.setPage=function(){return ng.apply(this,arguments),Se.call(this,Ce[F]),this},f.insertPage=function(S){return this.addPage(),this.movePage(F,S),this},f.movePage=function(S,z){var oe,ye;if(S>z){oe=Ce[S],ye=Ct[S];for(var ke=S;ke>z;ke--)Ce[ke]=Ce[ke-1],Ct[ke]=Ct[ke-1];Ce[z]=oe,Ct[z]=ye,this.setPage(z)}else if(S<z){oe=Ce[S],ye=Ct[S];for(var He=S;He<z;He++)Ce[He]=Ce[He+1],Ct[He]=Ct[He+1];Ce[z]=oe,Ct[z]=ye,this.setPage(z)}return this},f.deletePage=function(){return Nu.apply(this,arguments),this},f.__private__.text=f.text=function(S,z,oe,ye,ke){var He,ot,Et,Yt,dr,ir,Lr,Ss,Rs,Qs=(ye=ye||{}).scope||this;if(typeof S=="number"&&typeof z=="number"&&(typeof oe=="string"||Array.isArray(oe))){var Bn=oe;oe=z,z=S,S=Bn}if(arguments[3]instanceof Ut?(E("The transform parameter of text() with a Matrix value"),Rs=ke):(Et=arguments[4],Yt=arguments[5],Vr(Lr=arguments[3])==="object"&&Lr!==null||(typeof Et=="string"&&(Yt=Et,Et=null),typeof Lr=="string"&&(Yt=Lr,Lr=null),typeof Lr=="number"&&(Et=Lr,Lr=null),ye={flags:Lr,angle:Et,align:Yt})),isNaN(z)||isNaN(oe)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return Qs;var mn="",Ti=!1,Ha=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:fd,go=Qs.internal.scaleFactor;function gg(ms){return ms=ms.split("	").join(Array(ye.TabLen||9).join(" ")),fn(ms,Lr)}function Hf(ms){for(var ps,$s=ms.concat(),an=[],tl=$s.length;tl--;)typeof(ps=$s.shift())=="string"?an.push(ps):Array.isArray(ms)&&(ps.length===1||ps[1]===void 0&&ps[2]===void 0)?an.push(ps[0]):an.push([ps[0],ps[1],ps[2]]);return an}function Wf(ms,ps){var $s;if(typeof ms=="string")$s=ps(ms)[0];else if(Array.isArray(ms)){for(var an,tl,em=ms.concat(),Bu=[],jg=em.length;jg--;)typeof(an=em.shift())=="string"?Bu.push(ps(an)[0]):Array.isArray(an)&&typeof an[0]=="string"&&(tl=ps(an[0],an[1],an[2]),Bu.push([tl[0],tl[1],tl[2]]));$s=Bu}return $s}var Lu=!1,Gf=!0;if(typeof S=="string")Lu=!0;else if(Array.isArray(S)){var Kf=S.concat();ot=[];for(var Ru,Cn=Kf.length;Cn--;)(typeof(Ru=Kf.shift())!="string"||Array.isArray(Ru)&&typeof Ru[0]!="string")&&(Gf=!1);Lu=Gf}if(Lu===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Tu=Q/Qs.internal.scaleFactor,Iu=Tu*(Ha-1);switch(ye.baseline){case"bottom":oe-=Iu;break;case"top":oe+=Tu-Iu;break;case"hanging":oe+=Tu-2*Iu;break;case"middle":oe+=Tu/2-Iu}if((ir=ye.maxWidth||0)>0&&(typeof S=="string"?S=Qs.splitTextToSize(S,ir):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(ms,ps){return ms.concat(Qs.splitTextToSize(ps,ir))},[]))),He={text:S,x:z,y:oe,options:ye,mutex:{pdfEscape:fn,activeFontKey:ae,fonts:Ze,activeFontSize:Q}},Ne.publish("preProcessText",He),S=He.text,Et=(ye=He.options).angle,!(Rs instanceof Ut)&&Et&&typeof Et=="number"){Et*=Math.PI/180,ye.rotationDirection===0&&(Et=-Et),N===w.ADVANCED&&(Et=-Et);var Fu=Math.cos(Et),Yf=Math.sin(Et);Rs=new Ut(Fu,Yf,-Yf,Fu,0,0)}else Et&&Et instanceof Ut&&(Rs=Et);N!==w.ADVANCED||Rs||(Rs=un),(dr=ye.charSpace||Au)!==void 0&&(mn+=R(A(dr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ss=ye.horizontalScale)!==void 0&&(mn+=R(100*Ss)+` Tz
`),ye.lang;var Na=-1,E1=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,Jf=Qs.internal.getCurrentPageInfo().pageContext;switch(E1){case 0:case!1:case"fill":Na=0;break;case 1:case!0:case"stroke":Na=1;break;case 2:case"fillThenStroke":Na=2;break;case 3:case"invisible":Na=3;break;case 4:case"fillAndAddForClipping":Na=4;break;case 5:case"strokeAndAddPathForClipping":Na=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Na=6;break;case 7:case"addToPathForClipping":Na=7}var xg=Jf.usedRenderingMode!==void 0?Jf.usedRenderingMode:-1;Na!==-1?mn+=Na+` Tr
`:xg!==-1&&(mn+=`0 Tr
`),Na!==-1&&(Jf.usedRenderingMode=Na),Yt=ye.align||"left";var fi,Du=Q*Ha,vg=Qs.internal.pageSize.getWidth(),yg=Ze[ae];dr=ye.charSpace||Au,ir=ye.maxWidth||0,Lr=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Fl=[],gd=function(ms){return Qs.getStringUnitWidth(ms,{font:yg,charSpace:dr,fontSize:Q,doKerning:!1})*Q/go};if(Object.prototype.toString.call(S)==="[object Array]"){var Sa;ot=Hf(S),Yt!=="left"&&(fi=ot.map(gd));var aa,Dl=0;if(Yt==="right"){z-=fi[0],S=[],Cn=ot.length;for(var Xo=0;Xo<Cn;Xo++)Xo===0?(aa=po(z),Sa=Zo(oe)):(aa=A(Dl-fi[Xo]),Sa=-Du),S.push([ot[Xo],aa,Sa]),Dl=fi[Xo]}else if(Yt==="center"){z-=fi[0]/2,S=[],Cn=ot.length;for(var Qo=0;Qo<Cn;Qo++)Qo===0?(aa=po(z),Sa=Zo(oe)):(aa=A((Dl-fi[Qo])/2),Sa=-Du),S.push([ot[Qo],aa,Sa]),Dl=fi[Qo]}else if(Yt==="left"){S=[],Cn=ot.length;for(var Ou=0;Ou<Cn;Ou++)S.push(ot[Ou])}else if(Yt==="justify"&&yg.encoding==="Identity-H"){S=[],Cn=ot.length,ir=ir!==0?ir:vg;for(var el=0,Ms=0;Ms<Cn;Ms++)if(Sa=Ms===0?Zo(oe):-Du,aa=Ms===0?po(z):el,Ms<Cn-1){var Zf=A((ir-fi[Ms])/(ot[Ms].split(" ").length-1)),ia=ot[Ms].split(" ");S.push([ia[0]+" ",aa,Sa]),el=0;for(var mi=1;mi<ia.length;mi++){var Mu=(gd(ia[mi-1]+" "+ia[mi])-gd(ia[mi]))*go+Zf;mi==ia.length-1?S.push([ia[mi],Mu,0]):S.push([ia[mi]+" ",Mu,0]),el-=Mu}}else S.push([ot[Ms],aa,Sa]);S.push(["",el,0])}else{if(Yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Cn=ot.length,ir=ir!==0?ir:vg,Ms=0;Ms<Cn;Ms++)Sa=Ms===0?Zo(oe):-Du,aa=Ms===0?po(z):0,Ms<Cn-1?Fl.push(R(A((ir-fi[Ms])/(ot[Ms].split(" ").length-1)))):Fl.push(0),S.push([ot[Ms],aa,Sa])}}var bg=typeof ye.R2L=="boolean"?ye.R2L:De;bg===!0&&(S=Wf(S,function(ms,ps,$s){return[ms.split("").reverse().join(""),ps,$s]})),He={text:S,x:z,y:oe,options:ye,mutex:{pdfEscape:fn,activeFontKey:ae,fonts:Ze,activeFontSize:Q}},Ne.publish("postProcessText",He),S=He.text,Ti=He.mutex.isHex||!1;var Xf=Ze[ae].encoding;Xf!=="WinAnsiEncoding"&&Xf!=="StandardEncoding"||(S=Wf(S,function(ms,ps,$s){return[gg(ms),ps,$s]})),ot=Hf(S),S=[];for(var xd,vd,Ol,yd=0,$u=1,bd=Array.isArray(ot[0])?$u:yd,Ml="",Qf=function(ms,ps,$s){var an="";return $s instanceof Ut?($s=typeof ye.angle=="number"?nn($s,new Ut(1,0,0,1,ms,ps)):nn(new Ut(1,0,0,1,ms,ps),$s),N===w.ADVANCED&&($s=nn(new Ut(1,0,0,-1,0,0),$s)),an=$s.join(" ")+` Tm
`):an=R(ms)+" "+R(ps)+` Td
`,an},pi=0;pi<ot.length;pi++){switch(Ml="",bd){case $u:Ol=(Ti?"<":"(")+ot[pi][0]+(Ti?">":")"),xd=parseFloat(ot[pi][1]),vd=parseFloat(ot[pi][2]);break;case yd:Ol=(Ti?"<":"(")+ot[pi]+(Ti?">":")"),xd=po(z),vd=Zo(oe)}Fl!==void 0&&Fl[pi]!==void 0&&(Ml=Fl[pi]+` Tw
`),pi===0?S.push(Ml+Qf(xd,vd,Rs)+Ol):bd===yd?S.push(Ml+Ol):bd===$u&&S.push(Ml+Qf(xd,vd,Rs)+Ol)}S=bd===yd?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var gi=`BT
/`;return gi+=ae+" "+Q+` Tf
`,gi+=R(Q*Ha)+` TL
`,gi+=md+`
`,gi+=mn,gi+=S,ne(gi+="ET"),p[ae]=!0,Qs};var j1=f.__private__.clip=f.clip=function(S){return ne(S==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return j1("evenodd")},f.__private__.discardPath=f.discardPath=function(){return ne("n"),this};var mo=f.__private__.isValidStyle=function(S){var z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(z=!0),z};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(S){return mo(S)&&(d=S),this};var lg=f.__private__.getStyle=f.getStyle=function(S){var z=d;switch(S){case"D":case"S":z="S";break;case"F":z="f";break;case"FD":case"DF":z="B";break;case"f":case"f*":case"B":case"B*":z=S}return z},cg=f.close=function(){return ne("h"),this};f.stroke=function(){return ne("S"),this},f.fill=function(S){return Cu("f",S),this},f.fillEvenOdd=function(S){return Cu("f*",S),this},f.fillStroke=function(S){return Cu("B",S),this},f.fillStrokeEvenOdd=function(S){return Cu("B*",S),this};var Cu=function(S,z){Vr(z)==="object"?N1(z,S):ne(S)},Ff=function(S){S===null||N===w.ADVANCED&&S===void 0||(S=lg(S),ne(S))};function w1(S,z,oe,ye,ke){var He=new ph(z||this.boundingBox,oe||this.xStep,ye||this.yStep,this.gState,ke||this.matrix);He.stream=this.stream;var ot=S+"$$"+this.cloneIndex+++"$$";return Ps(ot,He),He}var N1=function(S,z){var oe=fr[S.key],ye=It[oe];if(ye instanceof Cd)ne("q"),ne(S1(z)),ye.gState&&f.setGState(ye.gState),ne(S.matrix.toString()+" cm"),ne("/"+oe+" sh"),ne("Q");else if(ye instanceof ph){var ke=new Ut(1,0,0,-1,0,Il());S.matrix&&(ke=ke.multiply(S.matrix||un),oe=w1.call(ye,S.key,S.boundingBox,S.xStep,S.yStep,ke).id),ne("q"),ne("/Pattern cs"),ne("/"+oe+" scn"),ye.gState&&f.setGState(ye.gState),ne(z),ne("Q")}},S1=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Df=f.moveTo=function(S,z){return ne(R(A(S))+" "+R(U(z))+" m"),this},hd=f.lineTo=function(S,z){return ne(R(A(S))+" "+R(U(z))+" l"),this},Rl=f.curveTo=function(S,z,oe,ye,ke,He){return ne([R(A(S)),R(U(z)),R(A(oe)),R(U(ye)),R(A(ke)),R(U(He)),"c"].join(" ")),this};f.__private__.line=f.line=function(S,z,oe,ye,ke){if(isNaN(S)||isNaN(z)||isNaN(oe)||isNaN(ye)||!mo(ke))throw new Error("Invalid arguments passed to jsPDF.line");return N===w.COMPAT?this.lines([[oe-S,ye-z]],S,z,[1,1],ke||"S"):this.lines([[oe-S,ye-z]],S,z,[1,1]).stroke()},f.__private__.lines=f.lines=function(S,z,oe,ye,ke,He){var ot,Et,Yt,dr,ir,Lr,Ss,Rs,Qs,Bn,mn,Ti;if(typeof S=="number"&&(Ti=oe,oe=z,z=S,S=Ti),ye=ye||[1,1],He=He||!1,isNaN(z)||isNaN(oe)||!Array.isArray(S)||!Array.isArray(ye)||!mo(ke)||typeof He!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Df(z,oe),ot=ye[0],Et=ye[1],dr=S.length,Bn=z,mn=oe,Yt=0;Yt<dr;Yt++)(ir=S[Yt]).length===2?(Bn=ir[0]*ot+Bn,mn=ir[1]*Et+mn,hd(Bn,mn)):(Lr=ir[0]*ot+Bn,Ss=ir[1]*Et+mn,Rs=ir[2]*ot+Bn,Qs=ir[3]*Et+mn,Bn=ir[4]*ot+Bn,mn=ir[5]*Et+mn,Rl(Lr,Ss,Rs,Qs,Bn,mn));return He&&cg(),Ff(ke),this},f.path=function(S){for(var z=0;z<S.length;z++){var oe=S[z],ye=oe.c;switch(oe.op){case"m":Df(ye[0],ye[1]);break;case"l":hd(ye[0],ye[1]);break;case"c":Rl.apply(this,ye);break;case"h":cg()}}return this},f.__private__.rect=f.rect=function(S,z,oe,ye,ke){if(isNaN(S)||isNaN(z)||isNaN(oe)||isNaN(ye)||!mo(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return N===w.COMPAT&&(ye=-ye),ne([R(A(S)),R(U(z)),R(A(oe)),R(A(ye)),"re"].join(" ")),Ff(ke),this},f.__private__.triangle=f.triangle=function(S,z,oe,ye,ke,He,ot){if(isNaN(S)||isNaN(z)||isNaN(oe)||isNaN(ye)||isNaN(ke)||isNaN(He)||!mo(ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-S,ye-z],[ke-oe,He-ye],[S-ke,z-He]],S,z,[1,1],ot,!0),this},f.__private__.roundedRect=f.roundedRect=function(S,z,oe,ye,ke,He,ot){if(isNaN(S)||isNaN(z)||isNaN(oe)||isNaN(ye)||isNaN(ke)||isNaN(He)||!mo(ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Et=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*oe),He=Math.min(He,.5*ye),this.lines([[oe-2*ke,0],[ke*Et,0,ke,He-He*Et,ke,He],[0,ye-2*He],[0,He*Et,-ke*Et,He,-ke,He],[2*ke-oe,0],[-ke*Et,0,-ke,-He*Et,-ke,-He],[0,2*He-ye],[0,-He*Et,ke*Et,-He,ke,-He]],S+ke,z,[1,1],ot,!0),this},f.__private__.ellipse=f.ellipse=function(S,z,oe,ye,ke){if(isNaN(S)||isNaN(z)||isNaN(oe)||isNaN(ye)||!mo(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var He=4/3*(Math.SQRT2-1)*oe,ot=4/3*(Math.SQRT2-1)*ye;return Df(S+oe,z),Rl(S+oe,z-ot,S+He,z-ye,S,z-ye),Rl(S-He,z-ye,S-oe,z-ot,S-oe,z),Rl(S-oe,z+ot,S-He,z+ye,S,z+ye),Rl(S+He,z+ye,S+oe,z+ot,S+oe,z),Ff(ke),this},f.__private__.circle=f.circle=function(S,z,oe,ye){if(isNaN(S)||isNaN(z)||isNaN(oe)||!mo(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,z,oe,oe,ye)},f.setFont=function(S,z,oe){return oe&&(z=O(z,oe)),ae=ag(S,z,{disableWarning:!1}),this};var _1=f.__private__.getFont=f.getFont=function(){return Ze[ag.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var S,z,oe={};for(S in ft)if(ft.hasOwnProperty(S))for(z in oe[S]=[],ft[S])ft[S].hasOwnProperty(z)&&oe[S].push(z);return oe},f.addFont=function(S,z,oe,ye,ke){var He=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&He.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&He.indexOf(arguments[3])==-1&&(oe=O(oe,ye)),ke=ke||"Identity-H",fo.call(this,S,z,oe,ke)};var fd,Of=e.lineWidth||.200025,ku=f.__private__.getLineWidth=f.getLineWidth=function(){return Of},dg=f.__private__.setLineWidth=f.setLineWidth=function(S){return Of=S,ne(R(A(S))+" w"),this};f.__private__.setLineDash=tr.API.setLineDash=tr.API.setLineDashPattern=function(S,z){if(S=S||[],z=z||0,isNaN(z)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(oe){return R(A(oe))}).join(" "),z=R(A(z)),ne("["+S+"] "+z+" d"),this};var ug=f.__private__.getLineHeight=f.getLineHeight=function(){return Q*fd};f.__private__.getLineHeight=f.getLineHeight=function(){return Q*fd};var hg=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(fd=S),this},fg=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return fd};hg(e.lineHeight);var po=f.__private__.getHorizontalCoordinate=function(S){return A(S)},Zo=f.__private__.getVerticalCoordinate=function(S){return N===w.ADVANCED?S:Ct[F].mediaBox.topRightY-Ct[F].mediaBox.bottomLeftY-A(S)},C1=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(S){return R(po(S))},Tl=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(S){return R(Zo(S))},Ri=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return We(Ri)},f.__private__.setStrokeColor=f.setDrawColor=function(S,z,oe,ye){return Ri=wt({ch1:S,ch2:z,ch3:oe,ch4:ye,pdfColorType:"draw",precision:2}),ne(Ri),this};var Mf=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return We(Mf)},f.__private__.setFillColor=f.setFillColor=function(S,z,oe,ye){return Mf=wt({ch1:S,ch2:z,ch3:oe,ch4:ye,pdfColorType:"fill",precision:2}),ne(Mf),this};var md=e.textColor||"0 g",k1=f.__private__.getTextColor=f.getTextColor=function(){return We(md)};f.__private__.setTextColor=f.setTextColor=function(S,z,oe,ye){return md=wt({ch1:S,ch2:z,ch3:oe,ch4:ye,pdfColorType:"text",precision:3}),this};var Au=e.charSpace,A1=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Au||0)};f.__private__.setCharSpace=f.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Au=S,this};var $f=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(S){var z=f.CapJoinStyles[S];if(z===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $f=z,ne(z+" J"),this};var Bf=0;f.__private__.setLineJoin=f.setLineJoin=function(S){var z=f.CapJoinStyles[S];if(z===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bf=z,ne(z+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(R(A(S))+" M"),this},f.GState=Av,f.setGState=function(S){(S=typeof S=="string"?yt[sr[S]]:mg(null,S)).equals(Xt)||(ne("/"+S.id+" gs"),Xt=S)};var mg=function(S,z){if(!S||!sr[S]){var oe=!1;for(var ye in yt)if(yt.hasOwnProperty(ye)&&yt[ye].equals(z)){oe=!0;break}if(oe)z=yt[ye];else{var ke="GS"+(Object.keys(yt).length+1).toString(10);yt[ke]=z,z.id=ke}return S&&(sr[S]=z.id),Ne.publish("addGState",z),z}};f.addGState=function(S,z){return mg(S,z),this},f.saveGraphicsState=function(){return ne("q"),$t.push({key:ae,size:Q,color:md}),this},f.restoreGraphicsState=function(){ne("Q");var S=$t.pop();return ae=S.key,Q=S.size,md=S.color,Xt=null,this},f.setCurrentTransformationMatrix=function(S){return ne(S.toString()+" cm"),this},f.comment=function(S){return ne("#"+S),this};var Pu=function(S,z){var oe=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(He){isNaN(He)||(oe=parseFloat(He))}});var ye=z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(He){isNaN(He)||(ye=parseFloat(He))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(He){ke=He.toString()}}),this},zf=function(S,z,oe,ye){Pu.call(this,S,z),this.type="rect";var ke=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(ot){isNaN(ot)||(ke=parseFloat(ot))}});var He=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return He},set:function(ot){isNaN(ot)||(He=parseFloat(ot))}}),this},Uf=function(){this.page=zt,this.currentPage=F,this.pages=Ce.slice(0),this.pagesContext=Ct.slice(0),this.x=Ie,this.y=ze,this.matrix=nt,this.width=pd(F),this.height=Il(F),this.outputDestination=Ge,this.id="",this.objectNumber=-1};Uf.prototype.restore=function(){zt=this.page,F=this.currentPage,Ct=this.pagesContext,Ce=this.pages,Ie=this.x,ze=this.y,nt=this.matrix,qf(F,this.width),Vf(F,this.height),Ge=this.outputDestination};var pg=function(S,z,oe,ye,ke){Zr.push(new Uf),zt=F=0,Ce=[],Ie=S,ze=z,nt=ke,Yo([oe,ye])},P1=function(S){if(Qt[S])Zr.pop().restore();else{var z=new Uf,oe="Xo"+(Object.keys(vt).length+1).toString(10);z.id=oe,Qt[S]=oe,vt[oe]=z,Ne.publish("addFormObject",z),Zr.pop().restore()}};for(var Eu in f.beginFormObject=function(S,z,oe,ye,ke){return pg(S,z,oe,ye,ke),this},f.endFormObject=function(S){return P1(S),this},f.doFormObject=function(S,z){var oe=vt[Qt[S]];return ne("q"),ne(z.toString()+" cm"),ne("/"+oe.id+" Do"),ne("Q"),this},f.getFormObject=function(S){var z=vt[Qt[S]];return{x:z.x,y:z.y,width:z.width,height:z.height,matrix:z.matrix}},f.save=function(S,z){return S=S||"generated.pdf",(z=z||{}).returnPromise=z.returnPromise||!1,z.returnPromise===!1?(_d(Su(Jo()),S),typeof _d.unload=="function"&&rr.setTimeout&&setTimeout(_d.unload,911),this):new Promise(function(oe,ye){try{var ke=_d(Su(Jo()),S);typeof _d.unload=="function"&&rr.setTimeout&&setTimeout(_d.unload,911),oe(ke)}catch(He){ye(He.message)}})},tr.API)tr.API.hasOwnProperty(Eu)&&(Eu==="events"&&tr.API.events.length?function(S,z){var oe,ye,ke;for(ke=z.length-1;ke!==-1;ke--)oe=z[ke][0],ye=z[ke][1],S.subscribe.apply(S,[oe].concat(typeof ye=="function"?[ye]:ye))}(Ne,tr.API.events):f[Eu]=tr.API[Eu]);var pd=f.getPageWidth=function(S){return(Ct[S=S||F].mediaBox.topRightX-Ct[S].mediaBox.bottomLeftX)/ve},qf=f.setPageWidth=function(S,z){Ct[S].mediaBox.topRightX=z*ve+Ct[S].mediaBox.bottomLeftX},Il=f.getPageHeight=function(S){return(Ct[S=S||F].mediaBox.topRightY-Ct[S].mediaBox.bottomLeftY)/ve},Vf=f.setPageHeight=function(S,z){Ct[S].mediaBox.topRightY=z*ve+Ct[S].mediaBox.bottomLeftY};return f.internal={pdfEscape:fn,getStyle:lg,getFont:_1,getFontSize:xe,getCharSpace:A1,getTextColor:k1,getLineHeight:ug,getLineHeightFactor:fg,getLineWidth:ku,write:jt,getHorizontalCoordinate:po,getVerticalCoordinate:Zo,getCoordinateString:C1,getVerticalCoordinateString:Tl,collections:{},newObject:ds,newAdditionalObject:Li,newObjectDeferred:Xr,newObjectDeferredBegin:Os,getFilters:nr,putStream:vr,events:Ne,scaleFactor:ve,pageSize:{getWidth:function(){return pd(F)},setWidth:function(S){qf(F,S)},getHeight:function(){return Il(F)},setHeight:function(S){Vf(F,S)}},encryptionOptions:u,encryption:$n,getEncryptor:y1,output:_u,getNumberOfPages:m1,pages:Ce,out:ne,f2:D,f3:P,getPageInfo:og,getPageInfoByObjId:ar,getCurrentPageInfo:b1,getPDFVersion:g,Point:Pu,Rectangle:zf,Matrix:Ut,hasHotfix:ig},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return pd(F)},set:function(S){qf(F,S)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Il(F)},set:function(S){Vf(F,S)},enumerable:!0,configurable:!0}),ud.call(f,et),ae="F1",Va(a,s),Ne.publish("initialized"),f}th.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},th.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},th.prototype.hexToBytes=function(e){for(var t=[],s=0;s<e.length;s+=2)t.push(String.fromCharCode(parseInt(e.substr(s,2),16)));return t.join("")},th.prototype.processOwnerPassword=function(e,t){return Cw(_w(t).substr(0,5),e)},th.prototype.encryptor=function(e,t){var s=_w(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Cw(s,n)}},Av.prototype.equals=function(e){var t,s="id,objectNumber,equals";if(!e||Vr(e)!==Vr(this))return!1;var n=0;for(t in this)if(!(s.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&s.indexOf(t)<0&&n--;return n===0},tr.API={events:[]},tr.version="3.0.1";var Fs=tr.API,fS=1,wu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ju=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},or=function(e){return e.toFixed(2)},Jl=function(e){return e.toFixed(5)};Fs.__acroform__={};var za=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},v3=function(e){return e*fS},bo=function(e){var t=new WT,s=Dt.internal.getHeight(e)||0,n=Dt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(or(n)),Number(or(s))],t},eQ=Fs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},tQ=Fs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},rQ=Fs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},qs=Fs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rQ(e,t-1)},Vs=Fs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return eQ(e,t-1)},Hs=Fs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return tQ(e,t-1)},sQ=Fs.__acroform__.calculateCoordinates=function(e,t){var s=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=s(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=s(a+o)||0,c.upperRight_Y=n(i)||0,[Number(or(c.lowerLeft_X)),Number(or(c.lowerLeft_Y)),Number(or(c.upperRight_X)),Number(or(c.upperRight_Y))]},nQ=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],s=e._V||e.DV,n=kw(e,s),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+or(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=bo(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},kw=function(e,t){var s=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var i=s,o=Dt.internal.getHeight(e)||0;o=o<0?-o:o;var l=Dt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,A,$){if(P+1<a.length){var U=A+" "+a[P+1][0];return fx(U,e,$).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=fx("3",e,i).height,p=e.multiline?o-i:(o-h)/2,f=p+=2,y=0,g=0,j=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+fx(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",w=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var C=!1;if(a[N].length!==1&&j!==a[N].length-1){if((h+2)*(w+2)+2>o)continue e;v+=a[N][j],C=!0,g=N,N--}else{v=(v+=a[N][j]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var k=parseInt(N),O=c(k,v,i),R=N>=a.length-1;if(O&&!R){v+=" ",j=0;continue}if(O||R){if(R)g=k;else if(e.multiline&&(h+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(w+2)+2>o)continue e;g=k}}for(var E="",I=y;I<=g;I++){var D=a[I];if(e.multiline){if(I===g){E+=D[j]+" ",j=(j+1)%D.length;continue}if(I===y){E+=D[D.length-1]+" ";continue}}E+=D[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,u=fx(E,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=or(d)+" "+or(f)+` Td
`,t+="("+wu(E)+`) Tj
`,t+=-or(d)+` 0 Td
`,f=-(i+2),u=0,y=C?g:g+1,w++,v=""}break}return n.text=t,n.fontSize=i,n},fx=function(e,t,s){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:a}},aQ={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},iQ=function(e,t){var s={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===s.type&&n.object===s.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(s)},oQ=function(e,t){for(var s in e)if(e.hasOwnProperty(s)){var n=s,a=e[s];t.internal.newObjectDeferredBegin(a.objId,!0),Vr(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},lQ=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(co.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(aQ)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fS=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new GT,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&iQ(i,s)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(s){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=sQ(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Dt.createDefaultAppearanceStream(l),Vr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=nQ(l);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var f=l.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var y=f[o];typeof y=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=f)=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&oQ(a.internal.acroformPlugin.xForms,a)})(s,e)}),e.internal.acroformPlugin.isInitialized=!0}},HT=Fs.__acroform__.arrayToPdfArray=function(e,t,s){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Vr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&s&&(n=s.internal.getEncryptor(t)),a+="("+wu(n(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},w2=function(e,t,s){var n=function(a){return a};return t!==void 0&&s&&(n=s.internal.getEncryptor(t)),(e=e||"").toString(),e="("+wu(n(e))+")"},To=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};To.prototype.toString=function(){return this.objId+" 0 R"},To.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},To.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var s in t)if(Object.getOwnPropertyDescriptor(this,t[s]).configurable===!1){var n=t[s],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:HT(a,this.objId,this.scope)}):a instanceof To?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var WT=function(){To.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){e=s.trim()},get:function(){return e||null}})};za(WT,To);var GT=function(){To.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var s=function(n){return n};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+wu(s(e))+")"}},set:function(s){e=s}})};za(GT,To);var co=function e(){To.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!qs(t,3)},set:function(v){v?this.F=Vs(t,3):this.F=Hs(t,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');s=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Pv)return;i="FieldObject"+e.FieldNum++}var v=function(w){return w};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+wu(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/fS:d},set:function(v){d=v}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Pv||this instanceof Gd))return w2(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=v}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof vn?p:w2(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=this instanceof vn?v:v.substr(0,1)==="("?Ju(v.substr(1,v.length-2)):Ju(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof vn?Ju(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof vn?"/"+v:v}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof vn?f:w2(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=this instanceof vn?v:v.substr(0,1)==="("?Ju(v.substr(1,v.length-2)):Ju(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof vn?Ju(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof vn?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(v){v=!!v,g=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(v){y=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,1)},set:function(v){v?this.Ff=Vs(this.Ff,1):this.Ff=Hs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,2)},set:function(v){v?this.Ff=Vs(this.Ff,2):this.Ff=Hs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,3)},set:function(v){v?this.Ff=Vs(this.Ff,3):this.Ff=Hs(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');j=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(j){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};za(co,To);var Mh=function(){co.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(s){e=s}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return HT(t,this.objId,this.scope)},set:function(s){var n,a;a=[],typeof(n=s)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(s){t=s,this.sort&&t.sort()},this.addOption=function(s){s=(s=s||"").toString(),t.push(s),this.sort&&t.sort()},this.removeOption=function(s,n){for(n=n||!1,s=(s=s||"").toString();t.indexOf(s)!==-1&&(t.splice(t.indexOf(s),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,18)},set:function(s){s?this.Ff=Vs(this.Ff,18):this.Ff=Hs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=Vs(this.Ff,19):this.Ff=Hs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,20)},set:function(s){s?(this.Ff=Vs(this.Ff,20),t.sort()):this.Ff=Hs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,22)},set:function(s){s?this.Ff=Vs(this.Ff,22):this.Ff=Hs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,23)},set:function(s){s?this.Ff=Vs(this.Ff,23):this.Ff=Hs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,27)},set:function(s){s?this.Ff=Vs(this.Ff,27):this.Ff=Hs(this.Ff,27)}}),this.hasAppearanceStream=!1};za(Mh,co);var $h=function(){Mh.call(this),this.fontName="helvetica",this.combo=!1};za($h,Mh);var Bh=function(){$h.call(this),this.combo=!0};za(Bh,$h);var w0=function(){Bh.call(this),this.edit=!0};za(w0,Bh);var vn=function(){co.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,15)},set:function(s){s?this.Ff=Vs(this.Ff,15):this.Ff=Hs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,16)},set:function(s){s?this.Ff=Vs(this.Ff,16):this.Ff=Hs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,17)},set:function(s){s?this.Ff=Vs(this.Ff,17):this.Ff=Hs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,26)},set:function(s){s?this.Ff=Vs(this.Ff,26):this.Ff=Hs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(i){return i};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+wu(s(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(s){Vr(s)==="object"&&(t=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(s){typeof s=="string"&&(t.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(s){e="/"+s}})};za(vn,co);var N0=function(){vn.call(this),this.pushButton=!0};za(N0,vn);var zh=function(){vn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};za(zh,vn);var Pv=function(){var e,t;co.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var s,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+wu(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Vr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(a){s="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};za(Pv,co),zh.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var s=this.Kids[t];s.appearanceStreamContent=e.createAppearanceStream(s.optionName),s.caption=e.getCA()}},zh.prototype.createOption=function(e){var t=new Pv;return t.Parent=this,t.optionName=e,this.Kids.push(t),cQ.call(this.scope,t),t};var S0=function(){vn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dt.CheckBox.createAppearanceStream()};za(S0,vn);var Gd=function(){co.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,13)},set:function(t){t?this.Ff=Vs(this.Ff,13):this.Ff=Hs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,21)},set:function(t){t?this.Ff=Vs(this.Ff,21):this.Ff=Hs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,23)},set:function(t){t?this.Ff=Vs(this.Ff,23):this.Ff=Hs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,24)},set:function(t){t?this.Ff=Vs(this.Ff,24):this.Ff=Hs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,25)},set:function(t){t?this.Ff=Vs(this.Ff,25):this.Ff=Hs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,26)},set:function(t){t?this.Ff=Vs(this.Ff,26):this.Ff=Hs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};za(Gd,co);var _0=function(){Gd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!qs(this.Ff,14)},set:function(e){e?this.Ff=Vs(this.Ff,14):this.Ff=Hs(this.Ff,14)}}),this.password=!0};za(_0,Gd);var Dt={CheckBox:{createAppearanceStream:function(){return{N:{On:Dt.CheckBox.YesNormal},D:{On:Dt.CheckBox.YesPushDown,Off:Dt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=bo(e);t.scope=e.scope;var s=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=kw(e,e.caption);return s.push("0.749023 g"),s.push("0 0 "+or(Dt.internal.getWidth(e))+" "+or(Dt.internal.getHeight(e))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+n+" "+or(i.fontSize)+" Tf "+a),s.push("BT"),s.push(i.text),s.push("ET"),s.push("Q"),s.push("EMC"),t.stream=s.join(`
`),t},YesNormal:function(e){var t=bo(e);t.scope=e.scope;var s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Dt.internal.getHeight(e),o=Dt.internal.getWidth(e),l=kw(e,e.caption);return a.push("1 g"),a.push("0 0 "+or(o)+" "+or(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+or(o-1)+" "+or(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+s+" "+or(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=bo(e);t.scope=e.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+or(Dt.internal.getWidth(e))+" "+or(Dt.internal.getHeight(e))+" re"),s.push("f"),t.stream=s.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Dt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Dt.RadioButton.Circle.YesNormal,t.D[e]=Dt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=bo(e);t.scope=e.scope;var s=[],n=Dt.internal.getWidth(e)<=Dt.internal.getHeight(e)?Dt.internal.getWidth(e)/4:Dt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Dt.internal.Bezier_C,i=Number((n*a).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+Jl(Dt.internal.getWidth(e)/2)+" "+Jl(Dt.internal.getHeight(e)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),s.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),s.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),s.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t},YesPushDown:function(e){var t=bo(e);t.scope=e.scope;var s=[],n=Dt.internal.getWidth(e)<=Dt.internal.getHeight(e)?Dt.internal.getWidth(e)/4:Dt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Dt.internal.Bezier_C).toFixed(5)),o=Number((n*Dt.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+Jl(Dt.internal.getWidth(e)/2)+" "+Jl(Dt.internal.getHeight(e)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),s.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),s.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),s.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+Jl(Dt.internal.getWidth(e)/2)+" "+Jl(Dt.internal.getHeight(e)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),s.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),s.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),s.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=bo(e);t.scope=e.scope;var s=[],n=Dt.internal.getWidth(e)<=Dt.internal.getHeight(e)?Dt.internal.getWidth(e)/4:Dt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Dt.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+Jl(Dt.internal.getWidth(e)/2)+" "+Jl(Dt.internal.getHeight(e)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),s.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),s.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),s.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Dt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Dt.RadioButton.Cross.YesNormal,t.D[e]=Dt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=bo(e);t.scope=e.scope;var s=[],n=Dt.internal.calculateCross(e);return s.push("q"),s.push("1 1 "+or(Dt.internal.getWidth(e)-2)+" "+or(Dt.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(or(n.x1.x)+" "+or(n.x1.y)+" m"),s.push(or(n.x2.x)+" "+or(n.x2.y)+" l"),s.push(or(n.x4.x)+" "+or(n.x4.y)+" m"),s.push(or(n.x3.x)+" "+or(n.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},YesPushDown:function(e){var t=bo(e);t.scope=e.scope;var s=Dt.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+or(Dt.internal.getWidth(e))+" "+or(Dt.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+or(Dt.internal.getWidth(e)-2)+" "+or(Dt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(or(s.x1.x)+" "+or(s.x1.y)+" m"),n.push(or(s.x2.x)+" "+or(s.x2.y)+" l"),n.push(or(s.x4.x)+" "+or(s.x4.y)+" m"),n.push(or(s.x3.x)+" "+or(s.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=bo(e);t.scope=e.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+or(Dt.internal.getWidth(e))+" "+or(Dt.internal.getHeight(e))+" re"),s.push("f"),t.stream=s.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+s}};Dt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Dt.internal.getWidth(e),s=Dt.internal.getHeight(e),n=Math.min(t,s);return{x1:{x:(t-n)/2,y:(s-n)/2+n},x2:{x:(t-n)/2+n,y:(s-n)/2},x3:{x:(t-n)/2,y:(s-n)/2},x4:{x:(t-n)/2+n,y:(s-n)/2+n}}}},Dt.internal.getWidth=function(e){var t=0;return Vr(e)==="object"&&(t=v3(e.Rect[2])),t},Dt.internal.getHeight=function(e){var t=0;return Vr(e)==="object"&&(t=v3(e.Rect[3])),t};var cQ=Fs.addField=function(e){if(lQ(this,e),!(e instanceof co))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Fs.AcroFormChoiceField=Mh,Fs.AcroFormListBox=$h,Fs.AcroFormComboBox=Bh,Fs.AcroFormEditBox=w0,Fs.AcroFormButton=vn,Fs.AcroFormPushButton=N0,Fs.AcroFormRadioButton=zh,Fs.AcroFormCheckBox=S0,Fs.AcroFormTextField=Gd,Fs.AcroFormPasswordField=_0,Fs.AcroFormAppearance=Dt,Fs.AcroForm={ChoiceField:Mh,ListBox:$h,ComboBox:Bh,EditBox:w0,Button:vn,PushButton:N0,RadioButton:zh,CheckBox:S0,TextField:Gd,PasswordField:_0,Appearance:Dt},tr.AcroForm={ChoiceField:Mh,ListBox:$h,ComboBox:Bh,EditBox:w0,Button:vn,PushButton:N0,RadioButton:zh,CheckBox:S0,TextField:Gd,PasswordField:_0,Appearance:Dt};tr.AcroForm;function KT(e){return e.reduce(function(t,s,n){return t[s]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,A){var $,U,de,se,ge,V=t;if((A=A||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(O(P))for(ge in s)for(de=s[ge],$=0;$<de.length;$+=1){for(se=!0,U=0;U<de[$].length;U+=1)if(de[$][U]!==void 0&&de[$][U]!==P[U]){se=!1;break}if(se===!0){V=ge;break}}else for(ge in s)for(de=s[ge],$=0;$<de.length;$+=1){for(se=!0,U=0;U<de[$].length;U+=1)if(de[$][U]!==void 0&&de[$][U]!==P.charCodeAt(U)){se=!1;break}if(se===!0){V=ge;break}}return V===t&&A!==t&&(V=A),V},a=function P(A){for(var $=this.internal.write,U=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:A.width}),se.push({key:"Height",value:A.height}),A.colorSpace===j.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===j.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var ge="",V=0,K=A.transparency.length;V<K;V++)ge+=A.transparency[V]+" "+A.transparency[V]+" ";se.push({key:"Mask",value:"["+ge+"]"})}A.sMask!==void 0&&se.push({key:"SMask",value:A.objectId+1+" 0 R"});var J=A.filter!==void 0?["/"+A.filter]:void 0;if(U({data:A.data,additionalKeyValues:se,alreadyAppliedFilters:J,objectId:A.objectId}),$("endobj"),"sMask"in A&&A.sMask!==void 0){var ie="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,T={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:ie,data:A.sMask};"filter"in A&&(T.filter=A.filter),P.call(this,T)}if(A.colorSpace===j.INDEXED){var F=this.internal.newObject();U({data:E(new Uint8Array(A.palette)),objectId:F}),$("endobj")}},i=function(){var P=this.internal.collections.addImage_images;for(var A in P)a.call(this,P[A])},o=function(){var P,A=this.internal.collections.addImage_images,$=this.internal.write;for(var U in A)$("/I"+(P=A[U]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(P){return typeof e["process"+P.toUpperCase()]=="function"},h=function(P){return Vr(P)==="object"&&P.nodeType===1},p=function(P,A){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var $=""+P.getAttribute("src");if($.indexOf("data:image/")===0)return sp(unescape($).split("base64,").pop());var U=e.loadFile($,!0);if(U!==void 0)return U}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var de;switch(A){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;case"JPEG":case"JPG":default:de="image/jpeg"}return sp(P.toDataURL(de,1).split("base64,").pop())}},f=function(P){var A=this.internal.collections.addImage_images;if(A){for(var $ in A)if(P===A[$].alias)return A[$]}},y=function(P,A,$){return P||A||(P=-96,A=-96),P<0&&(P=-1*$.width*72/P/this.internal.scaleFactor),A<0&&(A=-1*$.height*72/A/this.internal.scaleFactor),P===0&&(P=A*$.width/$.height),A===0&&(A=P*$.height/$.width),[P,A]},g=function(P,A,$,U,de,se){var ge=y.call(this,$,U,de),V=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,J=c.call(this);if($=ge[0],U=ge[1],J[de.index]=de,se){se*=Math.PI/180;var ie=Math.cos(se),T=Math.sin(se),F=function(G){return G.toFixed(4)},M=[F(ie),F(T),F(-1*T),F(ie),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,V(P),K(A+U),"cm"].join(" ")),this.internal.write(M.join(" ")),this.internal.write([V($),"0","0",V(U),"0","0","cm"].join(" "))):this.internal.write([V($),"0","0",V(U),V(P),K(A+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(P){var A,$,U=0;if(typeof P=="string")for($=P.length,A=0;A<$;A++)U=(U<<5)-U+P.charCodeAt(A),U|=0;else if(O(P))for($=P.byteLength/2,A=0;A<$;A++)U=(U<<5)-U+P[A],U|=0;return U},N=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var A=!0;return P.length===0&&(A=!1),P.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(A=!1),A},C=e.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var A=P.indexOf(",");return A<0?null:P.substring(0,A).trim().endsWith("base64")?P.substring(A+1):null},k=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return k()&&P instanceof ArrayBuffer};var O=e.__addimage__.isArrayBufferView=function(P){return k()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},R=e.__addimage__.binaryStringToUint8Array=function(P){for(var A=P.length,$=new Uint8Array(A),U=0;U<A;U++)$[U]=P.charCodeAt(U);return $},E=e.__addimage__.arrayBufferToBinaryString=function(P){for(var A="",$=O(P)?P:new Uint8Array(P),U=0;U<$.length;U+=8192)A+=String.fromCharCode.apply(null,$.subarray(U,U+8192));return A};e.addImage=function(){var P,A,$,U,de,se,ge,V,K;if(typeof arguments[1]=="number"?(A=t,$=arguments[1],U=arguments[2],de=arguments[3],se=arguments[4],ge=arguments[5],V=arguments[6],K=arguments[7]):(A=arguments[1],$=arguments[2],U=arguments[3],de=arguments[4],se=arguments[5],ge=arguments[6],V=arguments[7],K=arguments[8]),Vr(P=arguments[0])==="object"&&!h(P)&&"imageData"in P){var J=P;P=J.imageData,A=J.format||A||t,$=J.x||$||0,U=J.y||U||0,de=J.w||J.width||de,se=J.h||J.height||se,ge=J.alias||ge,V=J.compression||V,K=J.rotation||J.angle||K}var ie=this.internal.getFilters();if(V===void 0&&ie.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN($)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var T=I.call(this,P,A,ge,V);return g.call(this,$,U,de,se,T,K),this};var I=function(P,A,$,U){var de,se,ge;if(typeof P=="string"&&n(P)===t){P=unescape(P);var V=D(P,!1);(V!==""||(V=e.loadFile(P,!0))!==void 0)&&(P=V)}if(h(P)&&(P=p(P,A)),A=n(P,A),!u(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((ge=$)==null||ge.length===0)&&($=function(K){return typeof K=="string"||O(K)?w(K):O(K.data)?w(K.data):null}(P)),(de=f.call(this,$))||(k()&&(P instanceof Uint8Array||A==="RGBA"||(se=P,P=R(P))),de=this["process"+A.toUpperCase()](P,d.call(this),$,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in e.image_compression?K:v.NONE}(U),se)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},D=e.__addimage__.convertBase64ToBinaryString=function(P,A){A=typeof A!="boolean"||A;var $,U="";if(typeof P=="string"){var de;$=(de=C(P))!==null&&de!==void 0?de:P;try{U=sp($)}catch(se){if(A)throw N($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};e.getImageProperties=function(P){var A,$,U="";if(h(P)&&(P=p(P)),typeof P=="string"&&n(P)===t&&((U=D(P,!1))===""&&(U=e.loadFile(P)||""),P=U),$=n(P),!u($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(!k()||P instanceof Uint8Array||(P=R(P)),!(A=this["process"+$.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=$,A}})(tr.API),function(e){var t=function(s){if(s!==void 0&&s!="")return!0};tr.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(s){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(s.objId),d=s.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((n=d[h]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){n=d[p];var f=this.internal.pdfEscape,y=this.internal.getEncryptor(s.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(g.objId),w=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(v(n.contents))+")",i+=" /Popup "+j.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+f(v(w))+") >>",g.content=i;var N=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",j.content=i,this.internal.write(g.objId,"0 R",j.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var k=this.annotations._nameMap[n.options.name];n.options.pageNumber=k.page,n.options.top=k.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var O=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+O+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(s){var n=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":n.pageContext.annotations.push(s)}},e.link=function(s,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(s),y:d(n),w:c(s+a),h:d(n+i)},options:o,type:"link"})},e.textWithLink=function(s,n,a,i){var o,l,c=this.getTextWidth(s),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(s,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(s,n,a,i),a+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-d,l,o,i),c},e.getTextWidth=function(s){var n=this.internal.getFontSize();return this.getStringUnitWidth(s)*n/this.internal.scaleFactor}}(tr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&a.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var j=0,v=s,w="",N=0;for(j=0;j<g.length;j+=1)v[g.charCodeAt(j)]!==void 0?(N++,typeof(v=v[g.charCodeAt(j)])=="number"&&(w+=String.fromCharCode(v),v=s,N=0),j===g.length-1&&(v=s,w+=g.charAt(j-(N-1)),j-=N-1,N=0)):(v=s,w+=g.charAt(j-N),j-=N,N=0);return w};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(g,j,v){return o(g)?i(g)===!1?-1:!d(g)||!o(j)&&!o(v)||!o(v)&&l(j)||l(g)&&!o(j)||l(g)&&c(j)||l(g)&&l(j)?0:u(g)&&o(j)&&!l(j)&&o(v)&&d(v)?3:l(g)||!o(v)?1:2:-1},f=function(g){var j=0,v=0,w=0,N="",C="",k="",O=(g=g||"").split("\\s+"),R=[];for(j=0;j<O.length;j+=1){for(R.push(""),v=0;v<O[j].length;v+=1)N=O[j][v],C=O[j][v-1],k=O[j][v+1],o(N)?(w=p(N,C,k),R[j]+=w!==-1?String.fromCharCode(t[N.charCodeAt(0)][w]):N):R[j]+=N;R[j]=h(R[j])}return R.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var g,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(j)){var w=0;for(v=[],w=0;w<j.length;w+=1)Array.isArray(j[w])?v.push([f(j[w][0]),j[w][1],j[w][2]]):v.push([f(j[w])]);g=v}else g=f(j);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",y])}(tr.API),tr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(l){s=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(s,n){var a;if((s=s||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(tr.API),function(e){var t={left:0,top:0,bottom:0,right:0},s=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(g){y=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,f=0,y=0,g=0,j=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=d.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,C){return N.concat(j.splitTextToSize(C,v))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)f<(g=this.getStringUnitWidth(c[w],{font:h})*u)&&(f=g);return f!==0&&(y=c.length),{w:f/=p,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,f&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,s===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,p){if(n.call(this),!u)throw new Error("No data for PDF table.");var f,y,g,j,v=[],w=[],N=[],C={},k={},O=[],R=[],E=(p=p||{}).autoSize||!1,I=p.printHeaders!==!1,D=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,P=p.margins||Object.assign({width:this.getPageWidth()},t),A=typeof p.padding=="number"?p.padding:3,$=p.headerBackgroundColor||"#c8c8c8",U=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=U,this.setFontSize(D),h==null)w=v=Object.keys(u[0]),N=v.map(function(){return"left"});else if(Array.isArray(h)&&Vr(h[0])==="object")for(v=h.map(function(J){return J.name}),w=h.map(function(J){return J.prompt||J.name||""}),N=h.map(function(J){return J.align||"left"}),f=0;f<h.length;f+=1)k[h[f].name]=h[f].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(w=v=h,N=v.map(function(){return"left"}));if(E||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<v.length;f+=1){for(C[j=v[f]]=u.map(function(J){return J[j]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(w[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=C[j],this.setFont(void 0,"normal"),g=0;g<y.length;g+=1)O.push(this.getTextDimensions(y[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[j]=Math.max.apply(null,O)+A+A,O=[]}if(I){var de={};for(f=0;f<v.length;f+=1)de[v[f]]={},de[v[f]].text=w[f],de[v[f]].align=N[f];var se=l.call(this,de,k);R=v.map(function(J){return new i(c,d,k[J],se,de[J].text,void 0,de[J].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var ge=h.reduce(function(J,ie){return J[ie.name]=ie.align,J},{});for(f=0;f<u.length;f+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:f,data:u[f]},this);var V=l.call(this,u[f],k);for(g=0;g<v.length;g+=1){var K=u[f][v[g]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:f,col:g,data:K},this),o.call(this,new i(c,d,k[v[g]],V,K,f+2,ge[v[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(f){var y=c[f];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/p+u+u},this).reduce(function(f,y){return Math.max(f,y)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),s=!1}}(tr.API);var YT={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},JT=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Aw=KT(JT),ZT=[100,200,300,400,500,600,700,800,900],dQ=KT(ZT);function Pw(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),s=function(i){return YT[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof Aw[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:s,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,s,n].join(" ")}}}function y3(e,t,s,n){var a;for(a=s;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=s;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var uQ={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},b3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function j3(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function hQ(e,t,s){for(var n=(s=s||{}).defaultFontFamily||"times",a=Object.assign({},uQ,s.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(a[(i=Pw(t[l])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+j3(i)+"' and default family '"+n+"'.");if(o=function(c,d){if(d[c])return d[c];var u=Aw[c],h=u<=Aw.normal?-1:1,p=y3(d,JT,u,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+c);return p}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=YT[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=dQ[c],h=y3(d,ZT,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+j3(i)+"'.");return o}function w3(e){return e.trimLeft()}function fQ(e,t){for(var s=0;s<e.length;){if(e.charAt(s)===t)return[e.substring(0,s),e.substring(s+1)];s+=1}return null}function mQ(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var mx,N3,S3,N2=["times"];(function(e){var t,s,n,a,i,o,l,c,d,u=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new c,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new o,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new o,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,s=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=T;Object.defineProperty(this,"pdf",{get:function(){return F}});var M=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return M},set:function(Se){M=!!Se}});var G=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return G},set:function(Se){G=!!Se}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(Se){isNaN(Se)||(ee=Se)}});var te=0;Object.defineProperty(this,"posY",{get:function(){return te},set:function(Se){isNaN(Se)||(te=Se)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Se){var ne;typeof Se=="number"?ne=[Se,Se,Se,Se]:((ne=new Array(4))[0]=Se[0],ne[1]=Se.length>=2?Se[1]:ne[0],ne[2]=Se.length>=3?Se[2]:ne[0],ne[3]=Se.length>=4?Se[3]:ne[1]),d.margin=ne}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(Se){me=Se}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(Se){ue=Se}});var ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ce},set:function(Se){ce=Se}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Se){Se instanceof u&&(d=Se)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Se){d.path=Se}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(Se){Ce=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var ne;ne=p(Se),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var ne=p(Se);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var Ue=null;function Ge(Se,ne){if(Ue===null){var jt=function(dt){var et=[];return Object.keys(dt).forEach(function(Q){dt[Q].forEach(function(he){var xe=null;switch(he){case"bold":xe={family:Q,weight:"bold"};break;case"italic":xe={family:Q,style:"italic"};break;case"bolditalic":xe={family:Q,weight:"bold",style:"italic"};break;case"":case"normal":xe={family:Q}}xe!==null&&(xe.ref={name:Q,style:he},et.push(xe))})}),et}(Se.getFontList());Ue=function(dt){for(var et={},Q=0;Q<dt.length;++Q){var he=Pw(dt[Q]),xe=he.family,De=he.stretch,Be=he.style,Fe=he.weight;et[xe]=et[xe]||{},et[xe][De]=et[xe][De]||{},et[xe][De][Be]=et[xe][De][Be]||{},et[xe][De][Be][Fe]=he}return et}(jt.concat(ne))}return Ue}var gt=null;Object.defineProperty(this,"fontFaces",{get:function(){return gt},set:function(Se){Ue=null,gt=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var ne;if(this.ctx.font=Se,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var jt=ne[1];ne[2];var dt=ne[3],et=ne[4];ne[5];var Q=ne[6],he=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(he==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:he==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var xe=function(X){var ae,ve,Ie=[],ze=X.trim();if(ze==="")return N2;if(ze in b3)return[b3[ze]];for(;ze!=="";){switch(ve=null,ae=(ze=w3(ze)).charAt(0)){case'"':case"'":ve=fQ(ze.substring(1),ae);break;default:ve=mQ(ze)}if(ve===null||(Ie.push(ve[0]),(ze=w3(ve[1]))!==""&&ze.charAt(0)!==","))return N2;ze=ze.replace(/^,/,"")}return Ie}(Q);if(this.fontFaces){var De=hQ(Ge(this.pdf,this.fontFaces),xe.map(function(X){return{family:X,stretch:"normal",weight:dt,style:jt}}));this.pdf.setFont(De.ref.name,De.ref.style)}else{var Be="";(dt==="bold"||parseInt(dt,10)>=700||jt==="bold")&&(Be="bold"),jt==="italic"&&(Be+="italic"),Be.length===0&&(Be="normal");for(var Fe="",st={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_t=0;_t<xe.length;_t++){if(this.pdf.internal.getFont(xe[_t],Be,{noFallback:!0,disableWarning:!0})!==void 0){Fe=xe[_t];break}if(Be==="bolditalic"&&this.pdf.internal.getFont(xe[_t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fe=xe[_t],Be="bold";else if(this.pdf.internal.getFont(xe[_t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fe=xe[_t],Be="normal";break}}if(Fe===""){for(var pe=0;pe<xe.length;pe++)if(st[xe[pe]]){Fe=st[xe[pe]];break}}Fe=Fe===""?"Times":Fe,this.pdf.setFont(Fe,Be)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};h.prototype.setLineDash=function(T){this.lineDash=T},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){C.call(this,"fill",!1)},h.prototype.stroke=function(){C.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(T,F){if(isNaN(T)||isNaN(F))throw fs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var M=this.ctx.transform.applyToPoint(new o(T,F));this.path.push({type:"mt",x:M.x,y:M.y}),this.ctx.lastPoint=new o(T,F)},h.prototype.closePath=function(){var T=new o(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&Vr(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){T=new o(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(T.x,T.y)},h.prototype.lineTo=function(T,F){if(isNaN(T)||isNaN(F))throw fs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var M=this.ctx.transform.applyToPoint(new o(T,F));this.path.push({type:"lt",x:M.x,y:M.y}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},h.prototype.quadraticCurveTo=function(T,F,M,G){if(isNaN(M)||isNaN(G)||isNaN(T)||isNaN(F))throw fs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new o(M,G)),te=this.ctx.transform.applyToPoint(new o(T,F));this.path.push({type:"qct",x1:te.x,y1:te.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},h.prototype.bezierCurveTo=function(T,F,M,G,ee,te){if(isNaN(ee)||isNaN(te)||isNaN(T)||isNaN(F)||isNaN(M)||isNaN(G))throw fs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(ee,te)),ue=this.ctx.transform.applyToPoint(new o(T,F)),ce=this.ctx.transform.applyToPoint(new o(M,G));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:ce.x,y2:ce.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},h.prototype.arc=function(T,F,M,G,ee,te){if(isNaN(T)||isNaN(F)||isNaN(M)||isNaN(G)||isNaN(ee))throw fs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(te=!!te,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(T,F));T=me.x,F=me.y;var ue=this.ctx.transform.applyToPoint(new o(0,M)),ce=this.ctx.transform.applyToPoint(new o(0,0));M=Math.sqrt(Math.pow(ue.x-ce.x,2)+Math.pow(ue.y-ce.y,2))}Math.abs(ee-G)>=2*Math.PI&&(G=0,ee=2*Math.PI),this.path.push({type:"arc",x:T,y:F,radius:M,startAngle:G,endAngle:ee,counterclockwise:te})},h.prototype.arcTo=function(T,F,M,G,ee){throw new Error("arcTo not implemented.")},h.prototype.rect=function(T,F,M,G){if(isNaN(T)||isNaN(F)||isNaN(M)||isNaN(G))throw fs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,F),this.lineTo(T+M,F),this.lineTo(T+M,F+G),this.lineTo(T,F+G),this.lineTo(T,F),this.lineTo(T+M,F),this.lineTo(T,F)},h.prototype.fillRect=function(T,F,M,G){if(isNaN(T)||isNaN(F)||isNaN(M)||isNaN(G))throw fs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,F,M,G),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},h.prototype.strokeRect=function(T,F,M,G){if(isNaN(T)||isNaN(F)||isNaN(M)||isNaN(G))throw fs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(T,F,M,G),this.stroke())},h.prototype.clearRect=function(T,F,M,G){if(isNaN(T)||isNaN(F)||isNaN(M)||isNaN(G))throw fs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,F,M,G))},h.prototype.save=function(T){T=typeof T!="boolean"||T;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var G=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=G}},h.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("Q");this.pdf.setPage(F),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(T){var F,M,G,ee;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))F=0,M=0,G=0,ee=0;else{var te=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(te!==null)F=parseInt(te[1]),M=parseInt(te[2]),G=parseInt(te[3]),ee=1;else if((te=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)F=parseInt(te[1]),M=parseInt(te[2]),G=parseInt(te[3]),ee=parseFloat(te[4]);else{if(ee=1,typeof T=="string"&&T.charAt(0)!=="#"){var me=new UT(T);T=me.ok?me.toHex():"#000000"}T.length===4?(F=T.substring(1,2),F+=F,M=T.substring(2,3),M+=M,G=T.substring(3,4),G+=G):(F=T.substring(1,3),M=T.substring(3,5),G=T.substring(5,7)),F=parseInt(F,16),M=parseInt(M,16),G=parseInt(G,16)}}return{r:F,g:M,b:G,a:ee,style:T}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(T,F,M,G){if(isNaN(F)||isNaN(M)||typeof T!="string")throw fs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(G=isNaN(G)?void 0:G,!f.call(this)){var ee=V(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;A.call(this,{text:T,x:F,y:M,scale:te,angle:ee,align:this.textAlign,maxWidth:G})}},h.prototype.strokeText=function(T,F,M,G){if(isNaN(F)||isNaN(M)||typeof T!="string")throw fs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){G=isNaN(G)?void 0:G;var ee=V(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;A.call(this,{text:T,x:F,y:M,scale:te,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:G})}},h.prototype.measureText=function(T){if(typeof T!="string")throw fs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,M=this.pdf.internal.scaleFactor,G=F.internal.getFontSize(),ee=F.getStringUnitWidth(T)*G/F.internal.scaleFactor,te=function(me){var ue=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new te({width:ee*=Math.round(96*M/72*1e4)/1e4})},h.prototype.scale=function(T,F){if(isNaN(T)||isNaN(F))throw fs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var M=new c(T,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(M)},h.prototype.rotate=function(T){if(isNaN(T))throw fs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},h.prototype.translate=function(T,F){if(isNaN(T)||isNaN(F))throw fs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var M=new c(1,0,0,1,T,F);this.ctx.transform=this.ctx.transform.multiply(M)},h.prototype.transform=function(T,F,M,G,ee,te){if(isNaN(T)||isNaN(F)||isNaN(M)||isNaN(G)||isNaN(ee)||isNaN(te))throw fs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(T,F,M,G,ee,te);this.ctx.transform=this.ctx.transform.multiply(me)},h.prototype.setTransform=function(T,F,M,G,ee,te){T=isNaN(T)?1:T,F=isNaN(F)?0:F,M=isNaN(M)?0:M,G=isNaN(G)?1:G,ee=isNaN(ee)?0:ee,te=isNaN(te)?0:te,this.ctx.transform=new c(T,F,M,G,ee,te)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(T,F,M,G,ee,te,me,ue,ce){var Ce=this.pdf.getImageProperties(T),Ue=1,Ge=1,gt=1,Se=1;G!==void 0&&ue!==void 0&&(gt=ue/G,Se=ce/ee,Ue=Ce.width/G*ue/G,Ge=Ce.height/ee*ce/ee),te===void 0&&(te=F,me=M,F=0,M=0),G!==void 0&&ue===void 0&&(ue=G,ce=ee),G===void 0&&ue===void 0&&(ue=Ce.width,ce=Ce.height);for(var ne,jt=this.ctx.transform.decompose(),dt=V(jt.rotate.shx),et=new c,Q=(et=(et=(et=et.multiply(jt.translate)).multiply(jt.skew)).multiply(jt.scale)).applyToRectangle(new l(te-F*gt,me-M*Se,G*Ue,ee*Ge)),he=j.call(this,Q),xe=[],De=0;De<he.length;De+=1)xe.indexOf(he[De])===-1&&xe.push(he[De]);if(N(xe),this.autoPaging)for(var Be=xe[0],Fe=xe[xe.length-1],st=Be;st<Fe+1;st++){this.pdf.setPage(st);var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=st===1?this.posY+this.margin[0]:this.margin[0],X=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ae=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ve=st===1?0:X+(st-2)*ae;if(this.ctx.clip_path.length!==0){var Ie=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ne,this.posX+this.margin[3],-ve+pe+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=Ie}var ze=JSON.parse(JSON.stringify(Q));ze=w([ze],this.posX+this.margin[3],-ve+pe+this.ctx.prevPageLastElemOffset)[0];var nt=(st>Be||st<Fe)&&g.call(this);nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,ae,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,dt),nt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",Q.x,Q.y,Q.w,Q.h,null,null,dt)};var j=function(T,F,M){var G=[];F=F||this.pdf.internal.pageSize.width,M=M||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":G.push(Math.floor((T.y+ee)/M)+1);break;case"arc":G.push(Math.floor((T.y+ee-T.radius)/M)+1),G.push(Math.floor((T.y+ee+T.radius)/M)+1);break;case"qct":var te=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);G.push(Math.floor((te.y+ee)/M)+1),G.push(Math.floor((te.y+te.h+ee)/M)+1);break;case"bct":var me=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);G.push(Math.floor((me.y+ee)/M)+1),G.push(Math.floor((me.y+me.h+ee)/M)+1);break;case"rect":G.push(Math.floor((T.y+ee)/M)+1),G.push(Math.floor((T.y+T.h+ee)/M)+1)}for(var ue=0;ue<G.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<G[ue];)v.call(this);return G},v=function(){var T=this.fillStyle,F=this.strokeStyle,M=this.font,G=this.lineCap,ee=this.lineWidth,te=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=F,this.font=M,this.lineCap=G,this.lineWidth=ee,this.lineJoin=te},w=function(T,F,M){for(var G=0;G<T.length;G++)switch(T[G].type){case"bct":T[G].x2+=F,T[G].y2+=M;case"qct":T[G].x1+=F,T[G].y1+=M;case"mt":case"lt":case"arc":default:T[G].x+=F,T[G].y+=M}return T},N=function(T){return T.sort(function(F,M){return F-M})},C=function(T,F){for(var M,G,ee=this.fillStyle,te=this.strokeStyle,me=this.lineCap,ue=this.lineWidth,ce=Math.abs(ue*this.ctx.transform.scaleX),Ce=this.lineJoin,Ue=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),gt=[],Se=0;Se<Ge.length;Se++)if(Ge[Se].x!==void 0)for(var ne=j.call(this,Ge[Se]),jt=0;jt<ne.length;jt+=1)gt.indexOf(ne[jt])===-1&&gt.push(ne[jt]);for(var dt=0;dt<gt.length;dt++)for(;this.pdf.internal.getNumberOfPages()<gt[dt];)v.call(this);if(N(gt),this.autoPaging)for(var et=gt[0],Q=gt[gt.length-1],he=et;he<Q+1;he++){this.pdf.setPage(he),this.fillStyle=ee,this.strokeStyle=te,this.lineCap=me,this.lineWidth=ce,this.lineJoin=Ce;var xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],De=he===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=he===1?0:Be+(he-2)*Fe;if(this.ctx.clip_path.length!==0){var _t=this.path;M=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(M,this.posX+this.margin[3],-st+De+this.ctx.prevPageLastElemOffset),k.call(this,T,!0),this.path=_t}if(G=JSON.parse(JSON.stringify(Ue)),this.path=w(G,this.posX+this.margin[3],-st+De+this.ctx.prevPageLastElemOffset),F===!1||he===0){var pe=(he>et||he<Q)&&g.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xe,Fe,null).clip().discardPath()),k.call(this,T,F),pe&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=ce,k.call(this,T,F),this.lineWidth=ue;this.path=Ue},k=function(T,F){if((T!=="stroke"||F||!y.call(this))&&(T==="stroke"||F||!f.call(this))){for(var M,G,ee=[],te=this.path,me=0;me<te.length;me++){var ue=te[me];switch(ue.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:ue,deltas:[],abs:[]});break;case"lt":var ce=ee.length;if(te[me-1]&&!isNaN(te[me-1].x)&&(M=[ue.x-te[me-1].x,ue.y-te[me-1].y],ce>0)){for(;ce>=0;ce--)if(ee[ce-1].close!==!0&&ee[ce-1].begin!==!0){ee[ce-1].deltas.push(M),ee[ce-1].abs.push(ue);break}}break;case"bct":M=[ue.x1-te[me-1].x,ue.y1-te[me-1].y,ue.x2-te[me-1].x,ue.y2-te[me-1].y,ue.x-te[me-1].x,ue.y-te[me-1].y],ee[ee.length-1].deltas.push(M);break;case"qct":var Ce=te[me-1].x+2/3*(ue.x1-te[me-1].x),Ue=te[me-1].y+2/3*(ue.y1-te[me-1].y),Ge=ue.x+2/3*(ue.x1-ue.x),gt=ue.y+2/3*(ue.y1-ue.y),Se=ue.x,ne=ue.y;M=[Ce-te[me-1].x,Ue-te[me-1].y,Ge-te[me-1].x,gt-te[me-1].y,Se-te[me-1].x,ne-te[me-1].y],ee[ee.length-1].deltas.push(M);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(ue)}}G=F?null:T==="stroke"?"stroke":"fill";for(var jt=!1,dt=0;dt<ee.length;dt++)if(ee[dt].arc)for(var et=ee[dt].abs,Q=0;Q<et.length;Q++){var he=et[Q];he.type==="arc"?E.call(this,he.x,he.y,he.radius,he.startAngle,he.endAngle,he.counterclockwise,void 0,F,!jt):$.call(this,he.x,he.y),jt=!0}else if(ee[dt].close===!0)this.pdf.internal.out("h"),jt=!1;else if(ee[dt].begin!==!0){var xe=ee[dt].start.x,De=ee[dt].start.y;U.call(this,ee[dt].deltas,xe,De),jt=!0}G&&I.call(this,G),F&&D.call(this)}},O=function(T){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,M=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-M;case"top":return T+F-M;case"hanging":return T+F-2*M;case"middle":return T+F/2-M;case"ideographic":return T;case"alphabetic":default:return T}},R=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(F,M){this.colorStops.push([F,M])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(T,F,M,G,ee,te,me,ue,ce){for(var Ce=se.call(this,M,G,ee,te),Ue=0;Ue<Ce.length;Ue++){var Ge=Ce[Ue];Ue===0&&(ce?P.call(this,Ge.x1+T,Ge.y1+F):$.call(this,Ge.x1+T,Ge.y1+F)),de.call(this,T,F,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}ue?D.call(this):I.call(this,me)},I=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(T,F){this.pdf.internal.out(s(T)+" "+n(F)+" m")},A=function(T){var F;switch(T.align){case"right":case"end":F="right";break;case"center":F="center";break;case"left":case"start":default:F="left"}var M=this.pdf.getTextDimensions(T.text),G=O.call(this,T.y),ee=R.call(this,G)-M.h,te=this.ctx.transform.applyToPoint(new o(T.x,G)),me=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var ce,Ce,Ue,Ge=this.ctx.transform.applyToRectangle(new l(T.x,G,M.w,M.h)),gt=ue.applyToRectangle(new l(T.x,ee,M.w,M.h)),Se=j.call(this,gt),ne=[],jt=0;jt<Se.length;jt+=1)ne.indexOf(Se[jt])===-1&&ne.push(Se[jt]);if(N(ne),this.autoPaging)for(var dt=ne[0],et=ne[ne.length-1],Q=dt;Q<et+1;Q++){this.pdf.setPage(Q);var he=Q===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],De=this.pdf.internal.pageSize.height-this.margin[2],Be=De-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],st=Fe-this.margin[3],_t=Q===1?0:xe+(Q-2)*Be;if(this.ctx.clip_path.length!==0){var pe=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ce,this.posX+this.margin[3],-1*_t+he),k.call(this,"fill",!0),this.path=pe}var X=w([JSON.parse(JSON.stringify(gt))],this.posX+this.margin[3],-_t+he+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*T.scale),Ue=this.lineWidth,this.lineWidth=Ue*T.scale);var ae=this.autoPaging!=="text";if(ae||X.y+X.h<=De){if(ae||X.y>=he&&X.x<=Fe){var ve=ae?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||Fe-X.x)[0],Ie=w([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-_t+he+this.ctx.prevPageLastElemOffset)[0],ze=ae&&(Q>dt||Q<et)&&g.call(this);ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Be,null).clip().discardPath()),this.pdf.text(ve,Ie.x,Ie.y,{angle:T.angle,align:F,renderingMode:T.renderingMode}),ze&&this.pdf.restoreGraphicsState()}}else X.y<De&&(this.ctx.prevPageLastElemOffset+=De-X.y);T.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ue)}else T.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*T.scale),Ue=this.lineWidth,this.lineWidth=Ue*T.scale),this.pdf.text(T.text,te.x+this.posX,te.y+this.posY,{angle:T.angle,align:F,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ue)},$=function(T,F,M,G){M=M||0,G=G||0,this.pdf.internal.out(s(T+M)+" "+n(F+G)+" l")},U=function(T,F,M){return this.pdf.lines(T,F,M,null,null)},de=function(T,F,M,G,ee,te,me,ue){this.pdf.internal.out([t(a(M+T)),t(i(G+F)),t(a(ee+T)),t(i(te+F)),t(a(me+T)),t(i(ue+F)),"c"].join(" "))},se=function(T,F,M,G){for(var ee=2*Math.PI,te=Math.PI/2;F>M;)F-=ee;var me=Math.abs(M-F);me<ee&&G&&(me=ee-me);for(var ue=[],ce=G?-1:1,Ce=F;me>1e-5;){var Ue=Ce+ce*Math.min(me,te);ue.push(ge.call(this,T,Ce,Ue)),me-=Math.abs(Ue-Ce),Ce=Ue}return ue},ge=function(T,F,M){var G=(M-F)/2,ee=T*Math.cos(G),te=T*Math.sin(G),me=ee,ue=-te,ce=me*me+ue*ue,Ce=ce+me*ee+ue*te,Ue=4/3*(Math.sqrt(2*ce*Ce)-Ce)/(me*te-ue*ee),Ge=me-Ue*ue,gt=ue+Ue*me,Se=Ge,ne=-gt,jt=G+F,dt=Math.cos(jt),et=Math.sin(jt);return{x1:T*Math.cos(F),y1:T*Math.sin(F),x2:Ge*dt-gt*et,y2:Ge*et+gt*dt,x3:Se*dt-ne*et,y3:Se*et+ne*dt,x4:T*Math.cos(M),y4:T*Math.sin(M)}},V=function(T){return 180*T/Math.PI},K=function(T,F,M,G,ee,te){var me=T+.5*(M-T),ue=F+.5*(G-F),ce=ee+.5*(M-ee),Ce=te+.5*(G-te),Ue=Math.min(T,ee,me,ce),Ge=Math.max(T,ee,me,ce),gt=Math.min(F,te,ue,Ce),Se=Math.max(F,te,ue,Ce);return new l(Ue,gt,Ge-Ue,Se-gt)},J=function(T,F,M,G,ee,te,me,ue){var ce,Ce,Ue,Ge,gt,Se,ne,jt,dt,et,Q,he,xe,De,Be=M-T,Fe=G-F,st=ee-M,_t=te-G,pe=me-ee,X=ue-te;for(Ce=0;Ce<41;Ce++)dt=(ne=(Ue=T+(ce=Ce/40)*Be)+ce*((gt=M+ce*st)-Ue))+ce*(gt+ce*(ee+ce*pe-gt)-ne),et=(jt=(Ge=F+ce*Fe)+ce*((Se=G+ce*_t)-Ge))+ce*(Se+ce*(te+ce*X-Se)-jt),Ce==0?(Q=dt,he=et,xe=dt,De=et):(Q=Math.min(Q,dt),he=Math.min(he,et),xe=Math.max(xe,dt),De=Math.max(De,et));return new l(Math.round(Q),Math.round(he),Math.round(xe-Q),Math.round(De-he))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,F,M=(T=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:F}));this.prevLineDash!==M&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=M)}}})(tr.API),function(e){var t=function(i){var o,l,c,d,u,h,p,f,y,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(g=u%85))/85)-(y=u%85))/85)-(f=u%85))/85)-(p=u%85))/85)%85,l.push(h+33,p+33,f+33,y+33,g+33)):l.push(122);return function(j,v){for(var w=v;w>0;w--)j.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},s=function(i){var o,l,c,d,u,h=String,p="length",f=255,y="charCodeAt",g="slice",j="replace";for(i[g](-2),i=i[g](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[g](i[p]%5||5))[p];u>d;d+=5)l=52200625*(i[y](d)-33)+614125*(i[y](d+1)-33)+7225*(i[y](d+2)-33)+85*(i[y](d+3)-33)+(i[y](d+4)-33),c.push(f&l>>24,f&l>>16,f&l>>8,f&l);return function(v,w){for(var N=w;N>0;N--)v.pop()}(c,o[p]),h.fromCharCode.apply(h,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=Nw(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=s(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(tr.API),function(e){e.loadFile=function(t,s,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,p=0,f=function(y){var g=y.length,j=[],v=String.fromCharCode;for(p=0;p<g;p+=1)j.push(v(255&y.charCodeAt(p)));return j.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return f(h.responseText)}(a,i,o)}catch{}return l}(t,s,n)},e.loadImageFile=e.loadFile}(tr.API),function(e){function t(){return(rr.html2canvas?Promise.resolve(rr.html2canvas):vw(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function s(){return(rr.DOMPurify?Promise.resolve(rr.DOMPurify):vw(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Vr(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(s).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(c(p,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var p=0;p<d.length;++p){var f=d[p],y=f.src.find(function(g){return g.format==="truetype"});y&&c.addFont(y.url,f.ref.name,f.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||tr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,tr.getPageSize=function(o,l,c){if(Vr(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var f,y=0,g=0;if(p.hasOwnProperty(h))y=p[h][1]/u,g=p[h][0]/u;else try{y=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>y&&(f=g,g=y,y=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>g&&(f=g,g=y,y=f)}return{width:g,height:y,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Pw):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(tr.API),tr.API.addJS=function(e){return S3=e,this.internal.events.subscribe("postPutResources",function(){mx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(mx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),N3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+S3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){mx!==void 0&&N3!==void 0&&this.internal.out("/Names <</JavaScript "+mx+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var s=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=s.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];s.internal.newObjectDeferredBegin(c,!1)}s.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=s.internal.newObject();u.push(h);var p=s.internal.getPageInfo(i+1);s.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var f=s.internal.newObject();for(s.internal.write("<< /Names [ "),i=0;i<u.length;i++)s.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");s.internal.write(" ] >>","endobj"),t=s.internal.newObject(),s.internal.write("<< /Dests "+f+" 0 R"),s.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(n){n.id=s.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},s.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},s.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=s.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},s.outline.line=function(n){this.ctx.val+=n+`\r
`},s.outline.makeRef=function(n){return n.id+" 0 R"},s.outline.makeString=function(n){return"("+s.internal.pdfEscape(n)+")"},s.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(tr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(s,n,a,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=o||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,(c=function(h){for(var p,f=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,g={width:0,height:0,numcomponents:1},j=4;j<y;j+=2){if(j+=f,t.indexOf(h.charCodeAt(j+1))!==-1){p=256*h.charCodeAt(j+5)+h.charCodeAt(j+6),g={width:256*h.charCodeAt(j+7)+h.charCodeAt(j+8),height:p,numcomponents:h.charCodeAt(j+9)};break}f=256*h.charCodeAt(j+2)+h.charCodeAt(j+3)}return g}(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:s,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:a}}return u}}(tr.API);var Zu,px,_3,C3,k3,pQ=function(){var e,t,s;function n(i){var o,l,c,d,u,h,p,f,y,g,j,v,w,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),y=(function(){var C,k;for(k=[],C=0;C<4;++C)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),i=(h!=null?h.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(w=0;0<=g?w<g:w>g;0<=g?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":p=(j=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,j.slice(0,p)),this.text[f]=String.fromCharCode.apply(String,j.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,p,f,y){var g,j,v,w,N,C,k,O,R,E,I,D,P,A,$,U,de,se,ge,V,K,J=Math.ceil((d.width-h)/f),ie=Math.ceil((d.height-p)/y),T=d.width==J&&d.height==ie;for(A=o*J,D=T?l:new Uint8Array(A*ie),C=i.length,P=0,j=0;P<ie&&c<C;){switch(i[c++]){case 0:for(w=de=0;de<A;w=de+=1)D[j++]=i[c++];break;case 1:for(w=se=0;se<A;w=se+=1)g=i[c++],N=w<o?0:D[j-o],D[j++]=(g+N)%256;break;case 2:for(w=ge=0;ge<A;w=ge+=1)g=i[c++],v=(w-w%o)/o,$=P&&D[(P-1)*A+v*o+w%o],D[j++]=($+g)%256;break;case 3:for(w=V=0;V<A;w=V+=1)g=i[c++],v=(w-w%o)/o,N=w<o?0:D[j-o],$=P&&D[(P-1)*A+v*o+w%o],D[j++]=(g+Math.floor((N+$)/2))%256;break;case 4:for(w=K=0;K<A;w=K+=1)g=i[c++],v=(w-w%o)/o,N=w<o?0:D[j-o],P===0?$=U=0:($=D[(P-1)*A+v*o+w%o],U=v&&D[(P-1)*A+(v-1)*o+w%o]),k=N+$-U,O=Math.abs(k-N),E=Math.abs(k-$),I=Math.abs(k-U),R=O<=E&&O<=I?N:E<=I?$:U,D[j++]=(g+R)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!T){var F=((p+P*y)*d.width+h)*o,M=P*A;for(w=0;w<J;w+=1){for(var G=0;G<o;G+=1)l[F++]=D[M++];F+=(f-1)*o}}P++}}return i=GX(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,d,u,h,p,f;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,p=l.length;h<p;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(f=u[i++])!=null?f:255;return d},n.prototype.copyToImageData=function(i,o){var l,c,d,u,h,p,f,y,g,j,v;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(d=i.data||i).length,h=g||o,u=p=0,c===1)for(;u<y;)f=g?4*o[u/4]:p,j=h[f++],d[u++]=j,d[u++]=j,d[u++]=j,d[u++]=l?h[f++]:255,p=f;else for(;u<y;)f=g?4*o[u/4]:p,d[u++]=h[f++],d[u++]=h[f++],d[u++]=h[f++],d[u++]=l?h[f++]:255,p=f},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(rr)==="[object Window]"){try{t=rr.document.createElement("canvas"),s=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return s.width=i.width,s.height=i.height,s.clearRect(0,0,i.width,i.height),s.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,d,u,h,p,f;if(this.animation){for(f=[],l=u=0,h=(p=this.animation.frames).length;u<h;l=++u)o=p[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,f.push(o.image=e(c));return f}},n.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,d,u,h,p=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var f,y;if(f=l++%d,y=c[f],p.renderFrame(i,f),d>1&&l/d<u)return p.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function gQ(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,p=null,f=0,y=null;for(this.width=s,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,p=e[t++],!(1&g)&&(p=null),f=g>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var j=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,C=e[t++],k=C>>6&1,O=1<<(7&C)+1,R=l,E=c,I=!1;C>>7&&(I=!0,R=t,E=O,t+=3*O);var D=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}u.push({x:j,y:v,width:w,height:N,has_local_palette:I,palette_offset:R,palette_size:E,data_offset:D,data_length:t-D,transparent_index:p,interlaced:!!k,delay:h,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(A){if(A<0||A>=u.length)throw new Error("Frame index out of range.");return u[A]},this.decodeAndBlitFrameBGRA=function(A,$){var U=this.frameInfo(A),de=U.width*U.height,se=new Uint8Array(de);A3(e,U.data_offset,se,de);var ge=U.palette_offset,V=U.transparent_index;V===null&&(V=256);var K=U.width,J=s-K,ie=K,T=4*(U.y*s+U.x),F=4*((U.y+U.height)*s+U.x),M=T,G=4*J;U.interlaced===!0&&(G+=4*s*7);for(var ee=8,te=0,me=se.length;te<me;++te){var ue=se[te];if(ie===0&&(ie=K,(M+=G)>=F&&(G=4*J+4*s*(ee-1),M=T+(K+J)*(ee<<1),ee>>=1)),ue===V)M+=4;else{var ce=e[ge+3*ue],Ce=e[ge+3*ue+1],Ue=e[ge+3*ue+2];$[M++]=Ue,$[M++]=Ce,$[M++]=ce,$[M++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(A,$){var U=this.frameInfo(A),de=U.width*U.height,se=new Uint8Array(de);A3(e,U.data_offset,se,de);var ge=U.palette_offset,V=U.transparent_index;V===null&&(V=256);var K=U.width,J=s-K,ie=K,T=4*(U.y*s+U.x),F=4*((U.y+U.height)*s+U.x),M=T,G=4*J;U.interlaced===!0&&(G+=4*s*7);for(var ee=8,te=0,me=se.length;te<me;++te){var ue=se[te];if(ie===0&&(ie=K,(M+=G)>=F&&(G=4*J+4*s*(ee-1),M=T+(K+J)*(ee<<1),ee>>=1)),ue===V)M+=4;else{var ce=e[ge+3*ue],Ce=e[ge+3*ue+1],Ue=e[ge+3*ue+2];$[M++]=ce,$[M++]=Ce,$[M++]=Ue,$[M++]=255}--ie}}}function A3(e,t,s,n){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,u=0,h=0,p=0,f=e[t++],y=new Int32Array(4096),g=null;;){for(;u<16&&f!==0;)h|=e[t++]<<u,u+=8,f===1?f=e[t++]:--f;if(u<c)break;var j=h&d;if(h>>=c,u-=c,j!==i){if(j===o)break;for(var v=j<l?j:g,w=0,N=v;N>i;)N=y[N]>>8,++w;var C=N;if(p+w+(v!==j?1:0)>n)return void fs.log("Warning, gif stream longer than expected.");s[p++]=C;var k=p+=w;for(v!==j&&(s[p++]=C),N=v;w--;)N=y[N],s[--k]=255&N,N>>=8;g!==null&&l<4096&&(y[l++]=g<<8|C,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=j}else l=o+1,d=(1<<(c=a+1))-1,g=null}return p!==n&&fs.log("Warning, gif stream shorter than expected."),s}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function S2(e){var t,s,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),p=new Array(65535),f=new Array(64),y=new Array(64),g=[],j=0,v=7,w=new Array(64),N=new Array(64),C=new Array(64),k=new Array(256),O=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(T,F){for(var M=0,G=0,ee=new Array,te=1;te<=16;te++){for(var me=1;me<=T[te];me++)ee[F[G]]=[],ee[F[G]][0]=M,ee[F[G]][1]=te,G++,M++;M*=2}return ee}function ge(T){for(var F=T[0],M=T[1]-1;M>=0;)F&1<<M&&(j|=1<<v),M--,--v<0&&(j==255?(V(255),V(0)):V(j),v=7,j=0)}function V(T){g.push(T)}function K(T){V(T>>8&255),V(255&T)}function J(T,F,M,G,ee){for(var te,me=ee[0],ue=ee[240],ce=function(et,Q){var he,xe,De,Be,Fe,st,_t,pe,X,ae,ve=0;for(X=0;X<8;++X){he=et[ve],xe=et[ve+1],De=et[ve+2],Be=et[ve+3],Fe=et[ve+4],st=et[ve+5],_t=et[ve+6];var Ie=he+(pe=et[ve+7]),ze=he-pe,nt=xe+_t,Ze=xe-_t,ft=De+st,$t=De-st,It=Be+Fe,fr=Be-Fe,yt=Ie+It,sr=Ie-It,Xt=nt+ft,zt=nt-ft;et[ve]=yt+Xt,et[ve+4]=yt-Xt;var Ct=.707106781*(zt+sr);et[ve+2]=sr+Ct,et[ve+6]=sr-Ct;var Ne=.382683433*((yt=fr+$t)-(zt=Ze+ze)),lt=.5411961*yt+Ne,vt=1.306562965*zt+Ne,Qt=.707106781*(Xt=$t+Ze),Zr=ze+Qt,Ut=ze-Qt;et[ve+5]=Ut+lt,et[ve+3]=Ut-lt,et[ve+1]=Zr+vt,et[ve+7]=Zr-vt,ve+=8}for(ve=0,X=0;X<8;++X){he=et[ve],xe=et[ve+8],De=et[ve+16],Be=et[ve+24],Fe=et[ve+32],st=et[ve+40],_t=et[ve+48];var nn=he+(pe=et[ve+56]),un=he-pe,Ps=xe+_t,ds=xe-_t,Xr=De+st,Os=De-st,Li=Be+Fe,wa=Be-Fe,Pe=nn+Li,We=nn-Li,wt=Ps+Xr,nr=Ps-Xr;et[ve]=Pe+wt,et[ve+32]=Pe-wt;var vr=.707106781*(nr+We);et[ve+16]=We+vr,et[ve+48]=We-vr;var Er=.382683433*((Pe=wa+Os)-(nr=ds+un)),as=.5411961*Pe+Er,_r=1.306562965*nr+Er,W=.707106781*(wt=Os+ds),Ae=un+W,Ye=un-W;et[ve+40]=Ye+as,et[ve+24]=Ye-as,et[ve+8]=Ae+_r,et[ve+56]=Ae-_r,ve++}for(X=0;X<64;++X)ae=et[X]*Q[X],f[X]=ae>0?ae+.5|0:ae-.5|0;return f}(T,F),Ce=0;Ce<64;++Ce)y[R[Ce]]=ce[Ce];var Ue=y[0]-M;M=y[0],Ue==0?ge(G[0]):(ge(G[p[te=32767+Ue]]),ge(h[te]));for(var Ge=63;Ge>0&&y[Ge]==0;)Ge--;if(Ge==0)return ge(me),M;for(var gt,Se=1;Se<=Ge;){for(var ne=Se;y[Se]==0&&Se<=Ge;)++Se;var jt=Se-ne;if(jt>=16){gt=jt>>4;for(var dt=1;dt<=gt;++dt)ge(ue);jt&=15}te=32767+y[Se],ge(ee[(jt<<4)+p[te]]),ge(h[te]),Se++}return Ge!=63&&ge(me),M}function ie(T){T=Math.min(Math.max(T,1),100),i!=T&&(function(F){for(var M=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],G=0;G<64;G++){var ee=o((M[G]*F+50)/100);ee=Math.min(Math.max(ee,1),255),l[R[G]]=ee}for(var te=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var ue=o((te[me]*F+50)/100);ue=Math.min(Math.max(ue,1),255),c[R[me]]=ue}for(var ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,Ue=0;Ue<8;Ue++)for(var Ge=0;Ge<8;Ge++)d[Ce]=1/(l[R[Ce]]*ce[Ue]*ce[Ge]*8),u[Ce]=1/(c[R[Ce]]*ce[Ue]*ce[Ge]*8),Ce++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),i=T)}this.encode=function(T,F){F&&ie(F),g=new Array,j=0,v=7,K(65496),K(65504),K(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),K(1),K(1),V(0),V(0),function(){K(65499),K(132),V(0);for(var xe=0;xe<64;xe++)V(l[xe]);V(1);for(var De=0;De<64;De++)V(c[De])}(),function(xe,De){K(65472),K(17),V(8),K(De),K(xe),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(T.width,T.height),function(){K(65476),K(418),V(0);for(var xe=0;xe<16;xe++)V(E[xe+1]);for(var De=0;De<=11;De++)V(I[De]);V(16);for(var Be=0;Be<16;Be++)V(D[Be+1]);for(var Fe=0;Fe<=161;Fe++)V(P[Fe]);V(1);for(var st=0;st<16;st++)V(A[st+1]);for(var _t=0;_t<=11;_t++)V($[_t]);V(17);for(var pe=0;pe<16;pe++)V(U[pe+1]);for(var X=0;X<=161;X++)V(de[X])}(),K(65498),K(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var M=0,G=0,ee=0;j=0,v=7,this.encode.displayName="_encode_";for(var te,me,ue,ce,Ce,Ue,Ge,gt,Se,ne=T.data,jt=T.width,dt=T.height,et=4*jt,Q=0;Q<dt;){for(te=0;te<et;){for(Ce=et*Q+te,Ge=-1,gt=0,Se=0;Se<64;Se++)Ue=Ce+(gt=Se>>3)*et+(Ge=4*(7&Se)),Q+gt>=dt&&(Ue-=et*(Q+1+gt-dt)),te+Ge>=et&&(Ue-=te+Ge-et+4),me=ne[Ue++],ue=ne[Ue++],ce=ne[Ue++],w[Se]=(O[me]+O[ue+256>>0]+O[ce+512>>0]>>16)-128,N[Se]=(O[me+768>>0]+O[ue+1024>>0]+O[ce+1280>>0]>>16)-128,C[Se]=(O[me+1280>>0]+O[ue+1536>>0]+O[ce+1792>>0]>>16)-128;M=J(w,d,M,t,n),G=J(N,u,G,s,a),ee=J(C,u,ee,s,a),te+=32}Q+=8}if(v>=0){var he=[];he[1]=v+1,he[0]=(1<<v+1)-1,ge(he)}return K(65497),new Uint8Array(g)},e=e||50,function(){for(var T=String.fromCharCode,F=0;F<256;F++)k[F]=T(F)}(),t=se(E,I),s=se(A,$),n=se(D,P),a=se(U,de),function(){for(var T=1,F=2,M=1;M<=15;M++){for(var G=T;G<F;G++)p[32767+G]=M,h[32767+G]=[],h[32767+G][1]=M,h[32767+G][0]=G;for(var ee=-(F-1);ee<=-T;ee++)p[32767+ee]=M,h[32767+ee]=[],h[32767+ee][1]=M,h[32767+ee][0]=F-1+ee;T<<=1,F<<=1}}(),function(){for(var T=0;T<256;T++)O[T]=19595*T,O[T+256>>0]=38470*T,O[T+512>>0]=7471*T+32768,O[T+768>>0]=-11059*T,O[T+1024>>0]=-21709*T,O[T+1280>>0]=32768*T+8421375,O[T+1536>>0]=-27439*T,O[T+1792>>0]=-5329*T}(),ie(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Mi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function P3(e){function t(E){if(!E)throw Error("assert :P")}function s(E,I,D){for(var P=0;4>P;P++)if(E[I+P]!=D.charCodeAt(P))return!0;return!1}function n(E,I,D,P,A){for(var $=0;$<A;$++)E[I+$]=D[P+$]}function a(E,I,D,P){for(var A=0;A<P;A++)E[I+A]=D}function i(E){return new Int32Array(E)}function o(E,I){for(var D=[],P=0;P<E;P++)D.push(new I);return D}function l(E,I){var D=[];return function P(A,$,U){for(var de=U[$],se=0;se<de&&(A.push(U.length>$+1?[]:new I),!(U.length<$+1));se++)P(A[se],$+1,U)}(D,0,E),D}var c=function(){var E=this;function I(m,b){for(var _=1<<b-1>>>0;m&_;)_>>>=1;return _?(m&_-1)+_:m}function D(m,b,_,L,B){t(!(L%_));do m[b+(L-=_)]=B;while(0<L)}function P(m,b,_,L,B){if(t(2328>=B),512>=B)var q=i(512);else if((q=i(B))==null)return 0;return function(H,Y,Z,re,be,Ee){var Le,_e,rt=Y,qe=1<<Z,je=i(16),we=i(16);for(t(be!=0),t(re!=null),t(H!=null),t(0<Z),_e=0;_e<be;++_e){if(15<re[_e])return 0;++je[re[_e]]}if(je[0]==be)return 0;for(we[1]=0,Le=1;15>Le;++Le){if(je[Le]>1<<Le)return 0;we[Le+1]=we[Le]+je[Le]}for(_e=0;_e<be;++_e)Le=re[_e],0<re[_e]&&(Ee[we[Le]++]=_e);if(we[15]==1)return(re=new A).g=0,re.value=Ee[0],D(H,rt,1,qe,re),qe;var Xe,at=-1,tt=qe-1,Lt=0,bt=1,er=1,Nt=1<<Z;for(_e=0,Le=1,be=2;Le<=Z;++Le,be<<=1){if(bt+=er<<=1,0>(er-=je[Le]))return 0;for(;0<je[Le];--je[Le])(re=new A).g=Le,re.value=Ee[_e++],D(H,rt+Lt,be,Nt,re),Lt=I(Lt,Le)}for(Le=Z+1,be=2;15>=Le;++Le,be<<=1){if(bt+=er<<=1,0>(er-=je[Le]))return 0;for(;0<je[Le];--je[Le]){if(re=new A,(Lt&tt)!=at){for(rt+=Nt,Xe=1<<(at=Le)-Z;15>at&&!(0>=(Xe-=je[at]));)++at,Xe<<=1;qe+=Nt=1<<(Xe=at-Z),H[Y+(at=Lt&tt)].g=Xe+Z,H[Y+at].value=rt-Y-at}re.g=Le-Z,re.value=Ee[_e++],D(H,rt+(Lt>>Z),be,Nt,re),Lt=I(Lt,Le)}}return bt!=2*we[15]-1?0:qe}(m,b,_,L,B,q)}function A(){this.value=this.g=0}function $(){this.value=this.g=0}function U(){this.G=o(5,A),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Cn,$)}function de(m,b,_,L){t(m!=null),t(b!=null),t(2147483648>L),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=b,m.pa=_,m.Jd=b,m.Yc=_+L,m.Zc=4<=L?_+L-4+1:_,te(m)}function se(m,b){for(var _=0;0<b--;)_|=ue(m,128)<<b;return _}function ge(m,b){var _=se(m,b);return me(m)?-_:_}function V(m,b,_,L){var B,q=0;for(t(m!=null),t(b!=null),t(4294967288>L),m.Sb=L,m.Ra=0,m.u=0,m.h=0,4<L&&(L=4),B=0;B<L;++B)q+=b[_+B]<<8*B;m.Ra=q,m.bb=L,m.oa=b,m.pa=_}function K(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Fu-8>>>0,++m.bb,m.u-=8;M(m)&&(m.h=1,m.u=0)}function J(m,b){if(t(0<=b),!m.h&&b<=Iu){var _=F(m)&Tu[b];return m.u+=b,K(m),_}return m.h=1,m.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function F(m){return m.Ra>>>(m.u&Fu-1)>>>0}function M(m){return t(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Fu}function G(m,b){m.u=b,m.h=M(m)}function ee(m){m.u>=Yf&&(t(m.u>=Yf),K(m))}function te(m){t(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(t(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function me(m){return se(m,1)}function ue(m,b){var _=m.Ca;0>m.b&&te(m);var L=m.b,B=_*b>>>8,q=(m.I>>>L>B)+0;for(q?(_-=B,m.I-=B+1<<L>>>0):_=B+1,L=_,B=0;256<=L;)B+=8,L>>=8;return L=7^B+Na[L],m.b-=L,m.Ca=(_<<L)-1,q}function ce(m,b,_){m[b+0]=_>>24&255,m[b+1]=_>>16&255,m[b+2]=_>>8&255,m[b+3]=_>>0&255}function Ce(m,b){return m[b+0]<<0|m[b+1]<<8}function Ue(m,b){return Ce(m,b)|m[b+2]<<16}function Ge(m,b){return Ce(m,b)|Ce(m,b+2)<<16}function gt(m,b){var _=1<<b;return t(m!=null),t(0<b),m.X=i(_),m.X==null?0:(m.Mb=32-b,m.Xa=b,1)}function Se(m,b){t(m!=null),t(b!=null),t(m.Xa==b.Xa),n(b.X,0,m.X,0,1<<b.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function jt(m,b,_,L){t(_!=null),t(L!=null);var B=_[0],q=L[0];return B==0&&(B=(m*q+b/2)/b),q==0&&(q=(b*B+m/2)/m),0>=B||0>=q?0:(_[0]=B,L[0]=q,1)}function dt(m,b){return m+(1<<b)-1>>>b}function et(m,b){return((4278255360&m)+(4278255360&b)>>>0&4278255360)+((16711935&m)+(16711935&b)>>>0&16711935)>>>0}function Q(m,b){E[b]=function(_,L,B,q,H,Y,Z){var re;for(re=0;re<H;++re){var be=E[m](Y[Z+re-1],B,q+re);Y[Z+re]=et(_[L+re],be)}}}function he(){this.ud=this.hd=this.jd=0}function xe(m,b){return((4278124286&(m^b))>>>1)+(m&b)>>>0}function De(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Be(m,b){return De(m+(m-b+.5>>1))}function Fe(m,b,_){return Math.abs(b-_)-Math.abs(m-_)}function st(m,b,_,L,B,q,H){for(L=q[H-1],_=0;_<B;++_)q[H+_]=L=et(m[b+_],L)}function _t(m,b,_,L,B){var q;for(q=0;q<_;++q){var H=m[b+q],Y=H>>8&255,Z=16711935&(Z=(Z=16711935&H)+((Y<<16)+Y));L[B+q]=(4278255360&H)+Z>>>0}}function pe(m,b){b.jd=m>>0&255,b.hd=m>>8&255,b.ud=m>>16&255}function X(m,b,_,L,B,q){var H;for(H=0;H<L;++H){var Y=b[_+H],Z=Y>>>8,re=Y,be=255&(be=(be=Y>>>16)+((m.jd<<24>>24)*(Z<<24>>24)>>>5));re=255&(re=(re=re+((m.hd<<24>>24)*(Z<<24>>24)>>>5))+((m.ud<<24>>24)*(be<<24>>24)>>>5)),B[q+H]=(4278255360&Y)+(be<<16)+re}}function ae(m,b,_,L,B){E[b]=function(q,H,Y,Z,re,be,Ee,Le,_e){for(Z=Ee;Z<Le;++Z)for(Ee=0;Ee<_e;++Ee)re[be++]=B(Y[L(q[H++])])},E[m]=function(q,H,Y,Z,re,be,Ee){var Le=8>>q.b,_e=q.Ea,rt=q.K[0],qe=q.w;if(8>Le)for(q=(1<<q.b)-1,qe=(1<<Le)-1;H<Y;++H){var je,we=0;for(je=0;je<_e;++je)je&q||(we=L(Z[re++])),be[Ee++]=B(rt[we&qe]),we>>=Le}else E["VP8LMapColor"+_](Z,re,rt,qe,be,Ee,H,Y,_e)}}function ve(m,b,_,L,B){for(_=b+_;b<_;){var q=m[b++];L[B++]=q>>16&255,L[B++]=q>>8&255,L[B++]=q>>0&255}}function Ie(m,b,_,L,B){for(_=b+_;b<_;){var q=m[b++];L[B++]=q>>16&255,L[B++]=q>>8&255,L[B++]=q>>0&255,L[B++]=q>>24&255}}function ze(m,b,_,L,B){for(_=b+_;b<_;){var q=(H=m[b++])>>16&240|H>>12&15,H=H>>0&240|H>>28&15;L[B++]=q,L[B++]=H}}function nt(m,b,_,L,B){for(_=b+_;b<_;){var q=(H=m[b++])>>16&248|H>>13&7,H=H>>5&224|H>>3&31;L[B++]=q,L[B++]=H}}function Ze(m,b,_,L,B){for(_=b+_;b<_;){var q=m[b++];L[B++]=q>>0&255,L[B++]=q>>8&255,L[B++]=q>>16&255}}function ft(m,b,_,L,B,q){if(q==0)for(_=b+_;b<_;)ce(L,((q=m[b++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),B+=32;else n(L,B,m,b,_)}function $t(m,b){E[b][0]=E[m+"0"],E[b][1]=E[m+"1"],E[b][2]=E[m+"2"],E[b][3]=E[m+"3"],E[b][4]=E[m+"4"],E[b][5]=E[m+"5"],E[b][6]=E[m+"6"],E[b][7]=E[m+"7"],E[b][8]=E[m+"8"],E[b][9]=E[m+"9"],E[b][10]=E[m+"10"],E[b][11]=E[m+"11"],E[b][12]=E[m+"12"],E[b][13]=E[m+"13"],E[b][14]=E[m+"0"],E[b][15]=E[m+"0"]}function It(m){return m==T1||m==I1||m==kg||m==F1}function fr(){this.eb=[],this.size=this.A=this.fb=0}function yt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function sr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fr,this.f.kb=new yt,this.sd=null}function Xt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function zt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ct(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Ne(m,b){var _=m.T,L=b.ba.f.RGBA,B=L.eb,q=L.fb+m.ka*L.A,H=vi[b.ba.S],Y=m.y,Z=m.O,re=m.f,be=m.N,Ee=m.ea,Le=m.W,_e=b.cc,rt=b.dc,qe=b.Mc,je=b.Nc,we=m.ka,Xe=m.ka+m.T,at=m.U,tt=at+1>>1;for(we==0?H(Y,Z,null,null,re,be,Ee,Le,re,be,Ee,Le,B,q,null,null,at):(H(b.ec,b.fc,Y,Z,_e,rt,qe,je,re,be,Ee,Le,B,q-L.A,B,q,at),++_);we+2<Xe;we+=2)_e=re,rt=be,qe=Ee,je=Le,be+=m.Rc,Le+=m.Rc,q+=2*L.A,H(Y,(Z+=2*m.fa)-m.fa,Y,Z,_e,rt,qe,je,re,be,Ee,Le,B,q-L.A,B,q,at);return Z+=m.fa,m.j+Xe<m.o?(n(b.ec,b.fc,Y,Z,at),n(b.cc,b.dc,re,be,tt),n(b.Mc,b.Nc,Ee,Le,tt),_--):1&Xe||H(Y,Z,null,null,re,be,Ee,Le,re,be,Ee,Le,B,q+L.A,null,null,at),_}function lt(m,b,_){var L=m.F,B=[m.J];if(L!=null){var q=m.U,H=b.ba.S,Y=H==Cg||H==kg;b=b.ba.f.RGBA;var Z=[0],re=m.ka;Z[0]=m.T,m.Kb&&(re==0?--Z[0]:(--re,B[0]-=m.width),m.j+m.ka+m.T==m.o&&(Z[0]=m.o-m.j-re));var be=b.eb;re=b.fb+re*b.A,m=ps(L,B[0],m.width,q,Z,be,re+(Y?0:3),b.A),t(_==Z),m&&It(H)&&gi(be,re,Y,q,Z,b.A)}return 0}function vt(m){var b=m.ma,_=b.ba.S,L=11>_,B=_==Sg||_==_g||_==Cg||_==R1||_==12||It(_);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!Gf(b.Oa,m,B?11:12))return 0;if(B&&It(_)&&ot(),m.da)alert("todo:use_scaling");else{if(L){if(b.Ib=Ct,m.Kb){if(_=m.U+1>>1,b.memory=i(m.U+2*_),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+m.U,b.Mc=b.cc,b.Nc=b.dc+_,b.Ib=Ne,ot()}}else alert("todo:EmitYUV");B&&(b.Jb=lt,L&&ke())}if(L&&!ES){for(m=0;256>m;++m)hF[m]=89858*(m-128)+Pg>>Ag,pF[m]=-22014*(m-128)+Pg,mF[m]=-45773*(m-128),fF[m]=113618*(m-128)+Pg>>Ag;for(m=rm;m<M1;++m)b=76283*(m-16)+Pg>>Ag,gF[m-rm]=Ha(b,255),xF[m-rm]=Ha(b+8>>4,15);ES=1}return 1}function Qt(m){var b=m.ma,_=m.U,L=m.T;return t(!(1&m.ka)),0>=_||0>=L?0:(_=b.Ib(m,b),b.Jb!=null&&b.Jb(m,b,_),b.Dc+=_,1)}function Zr(m){m.ma.memory=null}function Ut(m,b,_,L){return J(m,8)!=47?0:(b[0]=J(m,14)+1,_[0]=J(m,14)+1,L[0]=J(m,1),J(m,3)!=0?0:!m.h)}function nn(m,b){if(4>m)return m+1;var _=m-2>>1;return(2+(1&m)<<_)+J(b,_)+1}function un(m,b){return 120<b?b-120:1<=(_=((_=XI[b-1])>>4)*m+(8-(15&_)))?_:1;var _}function Ps(m,b,_){var L=F(_),B=m[b+=255&L].g-8;return 0<B&&(G(_,_.u+8),L=F(_),b+=m[b].value,b+=L&(1<<B)-1),G(_,_.u+m[b].g),m[b].value}function ds(m,b,_){return _.g+=m.g,_.value+=m.value<<b>>>0,t(8>=_.g),m.g}function Xr(m,b,_){var L=m.xc;return t((b=L==0?0:m.vc[m.md*(_>>L)+(b>>L)])<m.Wb),m.Ya[b]}function Os(m,b,_,L){var B=m.ab,q=m.c*b,H=m.C;b=H+b;var Y=_,Z=L;for(L=m.Ta,_=m.Ua;0<B--;){var re=m.gc[B],be=H,Ee=b,Le=Y,_e=Z,rt=(Z=L,Y=_,re.Ea);switch(t(be<Ee),t(Ee<=re.nc),re.hc){case 2:xg(Le,_e,(Ee-be)*rt,Z,Y);break;case 0:var qe=be,je=Ee,we=Z,Xe=Y,at=(Nt=re).Ea;qe==0&&(E1(Le,_e,null,null,1,we,Xe),st(Le,_e+1,0,0,at-1,we,Xe+1),_e+=at,Xe+=at,++qe);for(var tt=1<<Nt.b,Lt=tt-1,bt=dt(at,Nt.b),er=Nt.K,Nt=Nt.w+(qe>>Nt.b)*bt;qe<je;){var Wr=er,Qr=Nt,Ir=1;for(Jf(Le,_e,we,Xe-at,1,we,Xe);Ir<at;){var Ar=(Ir&~Lt)+tt;Ar>at&&(Ar=at),(0,Fl[Wr[Qr++]>>8&15])(Le,_e+ +Ir,we,Xe+Ir-at,Ar-Ir,we,Xe+Ir),Ir=Ar}_e+=at,Xe+=at,++qe&Lt||(Nt+=bt)}Ee!=re.nc&&n(Z,Y-rt,Z,Y+(Ee-be-1)*rt,rt);break;case 1:for(rt=Le,je=_e,at=(Le=re.Ea)-(Xe=Le&~(we=(_e=1<<re.b)-1)),qe=dt(Le,re.b),tt=re.K,re=re.w+(be>>re.b)*qe;be<Ee;){for(Lt=tt,bt=re,er=new he,Nt=je+Xe,Wr=je+Le;je<Nt;)pe(Lt[bt++],er),gd(er,rt,je,_e,Z,Y),je+=_e,Y+=_e;je<Wr&&(pe(Lt[bt++],er),gd(er,rt,je,at,Z,Y),je+=at,Y+=at),++be&we||(re+=qe)}break;case 3:if(Le==Z&&_e==Y&&0<re.b){for(je=Z,Le=rt=Y+(Ee-be)*rt-(Xe=(Ee-be)*dt(re.Ea,re.b)),_e=Z,we=Y,qe=[],Xe=(at=Xe)-1;0<=Xe;--Xe)qe[Xe]=_e[we+Xe];for(Xe=at-1;0<=Xe;--Xe)je[Le+Xe]=qe[Xe];fi(re,be,Ee,Z,rt,Z,Y)}else fi(re,be,Ee,Le,_e,Z,Y)}Y=L,Z=_}Z!=_&&n(L,_,Y,Z,q)}function Li(m,b){var _=m.V,L=m.Ba+m.c*m.C,B=b-m.C;if(t(b<=m.l.o),t(16>=B),0<B){var q=m.l,H=m.Ta,Y=m.Ua,Z=q.width;if(Os(m,B,_,L),B=Y=[Y],t((_=m.C)<(L=b)),t(q.v<q.va),L>q.o&&(L=q.o),_<q.j){var re=q.j-_;_=q.j,B[0]+=re*Z}if(_>=L?_=0:(B[0]+=4*q.v,q.ka=_-q.j,q.U=q.va-q.v,q.T=L-_,_=1),_){if(Y=Y[0],11>(_=m.ca).S){var be=_.f.RGBA,Ee=(L=_.S,B=q.U,q=q.T,re=be.eb,be.A),Le=q;for(be=be.fb+m.Ma*be.A;0<Le--;){var _e=H,rt=Y,qe=B,je=re,we=be;switch(L){case Ng:Sa(_e,rt,qe,je,we);break;case Sg:aa(_e,rt,qe,je,we);break;case T1:aa(_e,rt,qe,je,we),gi(je,we,0,qe,1,0);break;case jS:Qo(_e,rt,qe,je,we);break;case _g:ft(_e,rt,qe,je,we,1);break;case I1:ft(_e,rt,qe,je,we,1),gi(je,we,0,qe,1,0);break;case Cg:ft(_e,rt,qe,je,we,0);break;case kg:ft(_e,rt,qe,je,we,0),gi(je,we,1,qe,1,0);break;case R1:Dl(_e,rt,qe,je,we);break;case F1:Dl(_e,rt,qe,je,we),ms(je,we,qe,1,0);break;case wS:Xo(_e,rt,qe,je,we);break;default:t(0)}Y+=Z,be+=Ee}m.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");t(m.Ma<=_.height)}}m.C=b,t(m.C<=m.i)}function wa(m){var b;if(0<m.ua)return 0;for(b=0;b<m.Wb;++b){var _=m.Ya[b].G,L=m.Ya[b].H;if(0<_[1][L[1]+0].g||0<_[2][L[2]+0].g||0<_[3][L[3]+0].g)return 0}return 1}function Pe(m,b,_,L,B,q){if(m.Z!=0){var H=m.qd,Y=m.rd;for(t(Bl[m.Z]!=null);b<_;++b)Bl[m.Z](H,Y,L,B,L,B,q),H=L,Y=B,B+=q;m.qd=H,m.rd=Y}}function We(m,b){var _=m.l.ma,L=_.Z==0||_.Z==1?m.l.j:m.C;if(L=m.C<L?L:m.C,t(b<=m.l.o),b>L){var B=m.l.width,q=_.ca,H=_.tb+B*L,Y=m.V,Z=m.Ba+m.c*L,re=m.gc;t(m.ab==1),t(re[0].hc==3),vg(re[0],L,b,Y,Z,q,H),Pe(_,L,b,q,H,B)}m.C=m.Ma=b}function wt(m,b,_,L,B,q,H){var Y=m.$/L,Z=m.$%L,re=m.m,be=m.s,Ee=_+m.$,Le=Ee;B=_+L*B;var _e=_+L*q,rt=280+be.ua,qe=m.Pb?Y:16777216,je=0<be.ua?be.Wa:null,we=be.wc,Xe=Ee<_e?Xr(be,Z,Y):null;t(m.C<q),t(_e<=B);var at=!1;e:for(;;){for(;at||Ee<_e;){var tt=0;if(Y>=qe){var Lt=Ee-_;t((qe=m).Pb),qe.wd=qe.m,qe.xd=Lt,0<qe.s.ua&&Se(qe.s.Wa,qe.s.vb),qe=Y+eF}if(Z&we||(Xe=Xr(be,Z,Y)),t(Xe!=null),Xe.Qb&&(b[Ee]=Xe.qb,at=!0),!at)if(ee(re),Xe.jc){tt=re,Lt=b;var bt=Ee,er=Xe.pd[F(tt)&Cn-1];t(Xe.jc),256>er.g?(G(tt,tt.u+er.g),Lt[bt]=er.value,tt=0):(G(tt,tt.u+er.g-256),t(256<=er.value),tt=er.value),tt==0&&(at=!0)}else tt=Ps(Xe.G[0],Xe.H[0],re);if(re.h)break;if(at||256>tt){if(!at)if(Xe.nd)b[Ee]=(Xe.qb|tt<<8)>>>0;else{if(ee(re),at=Ps(Xe.G[1],Xe.H[1],re),ee(re),Lt=Ps(Xe.G[2],Xe.H[2],re),bt=Ps(Xe.G[3],Xe.H[3],re),re.h)break;b[Ee]=(bt<<24|at<<16|tt<<8|Lt)>>>0}if(at=!1,++Ee,++Z>=L&&(Z=0,++Y,H!=null&&Y<=q&&!(Y%16)&&H(m,Y),je!=null))for(;Le<Ee;)tt=b[Le++],je.X[(506832829*tt&4294967295)>>>je.Mb]=tt}else if(280>tt){if(tt=nn(tt-256,re),Lt=Ps(Xe.G[4],Xe.H[4],re),ee(re),Lt=un(L,Lt=nn(Lt,re)),re.h)break;if(Ee-_<Lt||B-Ee<tt)break e;for(bt=0;bt<tt;++bt)b[Ee+bt]=b[Ee+bt-Lt];for(Ee+=tt,Z+=tt;Z>=L;)Z-=L,++Y,H!=null&&Y<=q&&!(Y%16)&&H(m,Y);if(t(Ee<=B),Z&we&&(Xe=Xr(be,Z,Y)),je!=null)for(;Le<Ee;)tt=b[Le++],je.X[(506832829*tt&4294967295)>>>je.Mb]=tt}else{if(!(tt<rt))break e;for(at=tt-280,t(je!=null);Le<Ee;)tt=b[Le++],je.X[(506832829*tt&4294967295)>>>je.Mb]=tt;tt=Ee,t(!(at>>>(Lt=je).Xa)),b[tt]=Lt.X[at],at=!0}at||t(re.h==M(re))}if(m.Pb&&re.h&&Ee<B)t(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Se(m.s.vb,m.s.Wa);else{if(re.h)break e;H!=null&&H(m,Y>q?q:Y),m.a=0,m.$=Ee-_}return 1}return m.a=3,0}function nr(m){t(m!=null),m.vc=null,m.yc=null,m.Ya=null;var b=m.Wa;b!=null&&(b.X=null),m.vb=null,t(m!=null)}function vr(){var m=new P1;return m==null?null:(m.a=0,m.xb=_S,$t("Predictor","VP8LPredictors"),$t("Predictor","VP8LPredictors_C"),$t("PredictorAdd","VP8LPredictorsAdd"),$t("PredictorAdd","VP8LPredictorsAdd_C"),xg=_t,gd=X,Sa=ve,aa=Ie,Dl=ze,Xo=nt,Qo=Ze,E.VP8LMapColor32b=Du,E.VP8LMapColor8b=yg,m)}function Er(m,b,_,L,B){var q=1,H=[m],Y=[b],Z=L.m,re=L.s,be=null,Ee=0;e:for(;;){if(_)for(;q&&J(Z,1);){var Le=H,_e=Y,rt=L,qe=1,je=rt.m,we=rt.gc[rt.ab],Xe=J(je,2);if(rt.Oc&1<<Xe)q=0;else{switch(rt.Oc|=1<<Xe,we.hc=Xe,we.Ea=Le[0],we.nc=_e[0],we.K=[null],++rt.ab,t(4>=rt.ab),Xe){case 0:case 1:we.b=J(je,3)+2,qe=Er(dt(we.Ea,we.b),dt(we.nc,we.b),0,rt,we.K),we.K=we.K[0];break;case 3:var at,tt=J(je,8)+1,Lt=16<tt?0:4<tt?1:2<tt?2:3;if(Le[0]=dt(we.Ea,Lt),we.b=Lt,at=qe=Er(tt,1,0,rt,we.K)){var bt,er=tt,Nt=we,Wr=1<<(8>>Nt.b),Qr=i(Wr);if(Qr==null)at=0;else{var Ir=Nt.K[0],Ar=Nt.w;for(Qr[0]=Nt.K[0][0],bt=1;bt<1*er;++bt)Qr[bt]=et(Ir[Ar+bt],Qr[bt-1]);for(;bt<4*Wr;++bt)Qr[bt]=0;Nt.K[0]=null,Nt.K[0]=Qr,at=1}}qe=at;break;case 2:break;default:t(0)}q=qe}}if(H=H[0],Y=Y[0],q&&J(Z,1)&&!(q=1<=(Ee=J(Z,4))&&11>=Ee)){L.a=3;break e}var us;if(us=q)t:{var is,mr,en,_a=L,tn=H,Ca=Y,es=Ee,Ga=_,Ka=_a.m,pn=_a.s,kn=[null],oa=1,yi=0,xo=QI[es];r:for(;;){if(Ga&&J(Ka,1)){var gn=J(Ka,3)+2,sl=dt(tn,gn),jd=dt(Ca,gn),zu=sl*jd;if(!Er(sl,jd,0,_a,kn))break r;for(kn=kn[0],pn.xc=gn,is=0;is<zu;++is){var zl=kn[is]>>8&65535;kn[is]=zl,zl>=oa&&(oa=zl+1)}}if(Ka.h)break r;for(mr=0;5>mr;++mr){var Ts=NS[mr];!mr&&0<es&&(Ts+=1<<es),yi<Ts&&(yi=Ts)}var $1=o(oa*xo,A),TS=oa,IS=o(TS,U);if(IS==null)var Lg=null;else t(65536>=TS),Lg=IS;var sm=i(yi);if(Lg==null||sm==null||$1==null){_a.a=1;break r}var Rg=$1;for(is=en=0;is<oa;++is){var Fi=Lg[is],Uu=Fi.G,qu=Fi.H,FS=0,Tg=1,DS=0;for(mr=0;5>mr;++mr){Ts=NS[mr],Uu[mr]=Rg,qu[mr]=en,!mr&&0<es&&(Ts+=1<<es);n:{var Ig,B1=Ts,Fg=_a,nm=sm,bF=Rg,jF=en,z1=0,Ul=Fg.m,wF=J(Ul,1);if(a(nm,0,0,B1),wF){var NF=J(Ul,1)+1,SF=J(Ul,1),OS=J(Ul,SF==0?1:8);nm[OS]=1,NF==2&&(nm[OS=J(Ul,8)]=1);var Dg=1}else{var MS=i(19),$S=J(Ul,4)+4;if(19<$S){Fg.a=3;var Og=0;break n}for(Ig=0;Ig<$S;++Ig)MS[ZI[Ig]]=J(Ul,3);var U1=void 0,am=void 0,BS=Fg,_F=MS,Mg=B1,zS=nm,q1=0,ql=BS.m,US=8,qS=o(128,A);s:for(;P(qS,0,7,_F,19);){if(J(ql,1)){var CF=2+2*J(ql,3);if((U1=2+J(ql,CF))>Mg)break s}else U1=Mg;for(am=0;am<Mg&&U1--;){ee(ql);var VS=qS[0+(127&F(ql))];G(ql,ql.u+VS.g);var Vu=VS.value;if(16>Vu)zS[am++]=Vu,Vu!=0&&(US=Vu);else{var kF=Vu==16,HS=Vu-16,AF=YI[HS],WS=J(ql,KI[HS])+AF;if(am+WS>Mg)break s;for(var PF=kF?US:0;0<WS--;)zS[am++]=PF}}q1=1;break s}q1||(BS.a=3),Dg=q1}(Dg=Dg&&!Ul.h)&&(z1=P(bF,jF,8,nm,B1)),Dg&&z1!=0?Og=z1:(Fg.a=3,Og=0)}if(Og==0)break r;if(Tg&&JI[mr]==1&&(Tg=Rg[en].g==0),FS+=Rg[en].g,en+=Og,3>=mr){var im,V1=sm[0];for(im=1;im<Ts;++im)sm[im]>V1&&(V1=sm[im]);DS+=V1}}if(Fi.nd=Tg,Fi.Qb=0,Tg&&(Fi.qb=(Uu[3][qu[3]+0].value<<24|Uu[1][qu[1]+0].value<<16|Uu[2][qu[2]+0].value)>>>0,FS==0&&256>Uu[0][qu[0]+0].value&&(Fi.Qb=1,Fi.qb+=Uu[0][qu[0]+0].value<<8)),Fi.jc=!Fi.Qb&&6>DS,Fi.jc){var $g,nl=Fi;for($g=0;$g<Cn;++$g){var Vl=$g,Hl=nl.pd[Vl],Bg=nl.G[0][nl.H[0]+Vl];256<=Bg.value?(Hl.g=Bg.g+256,Hl.value=Bg.value):(Hl.g=0,Hl.value=0,Vl>>=ds(Bg,8,Hl),Vl>>=ds(nl.G[1][nl.H[1]+Vl],16,Hl),Vl>>=ds(nl.G[2][nl.H[2]+Vl],0,Hl),ds(nl.G[3][nl.H[3]+Vl],24,Hl))}}}pn.vc=kn,pn.Wb=oa,pn.Ya=Lg,pn.yc=$1,us=1;break t}us=0}if(!(q=us)){L.a=3;break e}if(0<Ee){if(re.ua=1<<Ee,!gt(re.Wa,Ee)){L.a=1,q=0;break e}}else re.ua=0;var H1=L,GS=H,EF=Y,W1=H1.s,G1=W1.xc;if(H1.c=GS,H1.i=EF,W1.md=dt(GS,G1),W1.wc=G1==0?-1:(1<<G1)-1,_){L.xb=oF;break e}if((be=i(H*Y))==null){L.a=1,q=0;break e}q=(q=wt(L,be,0,H,Y,Y,null))&&!Z.h;break e}return q?(B!=null?B[0]=be:(t(be==null),t(_)),L.$=0,_||nr(re)):nr(re),q}function as(m,b){var _=m.c*m.i,L=_+b+16*b;return t(m.c<=b),m.V=i(L),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+_+b,1)}function _r(m,b){var _=m.C,L=b-_,B=m.V,q=m.Ba+m.c*_;for(t(b<=m.l.o);0<L;){var H=16<L?16:L,Y=m.l.ma,Z=m.l.width,re=Z*H,be=Y.ca,Ee=Y.tb+Z*_,Le=m.Ta,_e=m.Ua;Os(m,H,B,q),$s(Le,_e,be,Ee,re),Pe(Y,_,_+H,be,Ee,Z),L-=H,B+=H*m.c,_+=H}t(_==b),m.C=m.Ma=b}function W(){this.ub=this.yd=this.td=this.Rb=0}function Ae(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ye(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function kt(){this.Yb=function(){var m=[];return function b(_,L,B){for(var q=B[L],H=0;H<q&&(_.push(B.length>L+1?[]:0),!(B.length<L+1));H++)b(_[H],L+1,B)}(m,0,[3,11]),m}()}function Vt(){this.jb=i(3),this.Wc=l([4,8],kt),this.Xc=l([4,17],kt)}function Ht(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function jr(){this.ld=this.La=this.dd=this.tc=0}function Xs(){this.Na=this.la=0}function hn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Es(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ls(){this.uc=this.M=this.Nb=0,this.wa=Array(new jr),this.Y=0,this.ya=Array(new Es),this.aa=0,this.l=new Sn}function Go(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ko(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new W,this.Kc=new Ae,this.ed=new Ht,this.Qa=new Ye,this.Ic=this.$c=this.Aa=0,this.D=new Ls,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ie),this.ia=0,this.pb=o(4,hn),this.Pa=new Vt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Go),this.Hd=0,this.rb=Array(new Xs),this.sb=0,this.wa=Array(new jr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Es),this.L=this.aa=0,this.gd=l([4,2],jr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Sn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ui(){var m=new Ko;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,tm||(tm=qa)),m}function Cr(m,b,_){return m.a==0&&(m.a=b,m.sc=_,m.cb=0),0}function Ua(m,b,_){return 3<=_&&m[b+0]==157&&m[b+1]==1&&m[b+2]==42}function ho(m,b){if(m==null)return 0;if(m.a=0,m.sc="OK",b==null)return Cr(m,2,"null VP8Io passed to VP8GetHeaders()");var _=b.data,L=b.w,B=b.ha;if(4>B)return Cr(m,7,"Truncated header.");var q=_[L+0]|_[L+1]<<8|_[L+2]<<16,H=m.Od;if(H.Rb=!(1&q),H.td=q>>1&7,H.yd=q>>4&1,H.ub=q>>5,3<H.td)return Cr(m,3,"Incorrect keyframe parameters.");if(!H.yd)return Cr(m,4,"Frame not displayable.");L+=3,B-=3;var Y=m.Kc;if(H.Rb){if(7>B)return Cr(m,7,"cannot parse picture header");if(!Ua(_,L,B))return Cr(m,3,"Bad code word");Y.c=16383&(_[L+4]<<8|_[L+3]),Y.Td=_[L+4]>>6,Y.i=16383&(_[L+6]<<8|_[L+5]),Y.Ud=_[L+6]>>6,L+=7,B-=7,m.za=Y.c+15>>4,m.Ub=Y.i+15>>4,b.width=Y.c,b.height=Y.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,a((q=m.Pa).jb,0,255,q.jb.length),t((q=m.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,a(q.Zb,0,0,q.Zb.length),a(q.Lb,0,0,q.Lb)}if(H.ub>B)return Cr(m,7,"bad partition length");de(q=m.m,_,L,H.ub),L+=H.ub,B-=H.ub,H.Rb&&(Y.Ld=me(q),Y.Kd=me(q)),Y=m.Qa;var Z,re=m.Pa;if(t(q!=null),t(Y!=null),Y.Cb=me(q),Y.Cb){if(Y.Bb=me(q),me(q)){for(Y.Fb=me(q),Z=0;4>Z;++Z)Y.Zb[Z]=me(q)?ge(q,7):0;for(Z=0;4>Z;++Z)Y.Lb[Z]=me(q)?ge(q,6):0}if(Y.Bb)for(Z=0;3>Z;++Z)re.jb[Z]=me(q)?se(q,8):255}else Y.Bb=0;if(q.Ka)return Cr(m,3,"cannot parse segment header");if((Y=m.ed).zd=me(q),Y.Tb=se(q,6),Y.wb=se(q,3),Y.Pc=me(q),Y.Pc&&me(q)){for(re=0;4>re;++re)me(q)&&(Y.vd[re]=ge(q,6));for(re=0;4>re;++re)me(q)&&(Y.od[re]=ge(q,6))}if(m.L=Y.Tb==0?0:Y.zd?1:2,q.Ka)return Cr(m,3,"cannot parse filter header");var be=B;if(B=Z=L,L=Z+be,Y=be,m.Xb=(1<<se(m.m,2))-1,be<3*(re=m.Xb))_=7;else{for(Z+=3*re,Y-=3*re,be=0;be<re;++be){var Ee=_[B+0]|_[B+1]<<8|_[B+2]<<16;Ee>Y&&(Ee=Y),de(m.Jc[+be],_,Z,Ee),Z+=Ee,Y-=Ee,B+=3}de(m.Jc[+re],_,Z,Y),_=Z<L?0:5}if(_!=0)return Cr(m,_,"cannot parse partitions");for(_=se(Z=m.m,7),B=me(Z)?ge(Z,4):0,L=me(Z)?ge(Z,4):0,Y=me(Z)?ge(Z,4):0,re=me(Z)?ge(Z,4):0,Z=me(Z)?ge(Z,4):0,be=m.Qa,Ee=0;4>Ee;++Ee){if(be.Cb){var Le=be.Zb[Ee];be.Fb||(Le+=_)}else{if(0<Ee){m.pb[Ee]=m.pb[0];continue}Le=_}var _e=m.pb[Ee];_e.Sc[0]=D1[Ha(Le+B,127)],_e.Sc[1]=O1[Ha(Le+0,127)],_e.Eb[0]=2*D1[Ha(Le+L,127)],_e.Eb[1]=101581*O1[Ha(Le+Y,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=D1[Ha(Le+re,117)],_e.Qc[1]=O1[Ha(Le+Z,127)],_e.lc=Le+Z}if(!H.Rb)return Cr(m,4,"Not a key frame.");for(me(q),H=m.Pa,_=0;4>_;++_){for(B=0;8>B;++B)for(L=0;3>L;++L)for(Y=0;11>Y;++Y)re=ue(q,aF[_][B][L][Y])?se(q,8):sF[_][B][L][Y],H.Wc[_][B].Yb[L][Y]=re;for(B=0;17>B;++B)H.Xc[_][B]=H.Wc[_][iF[B]]}return m.kc=me(q),m.kc&&(m.Bd=se(q,8)),m.cb=1}function qa(m,b,_,L,B,q,H){var Y=b[B].Yb[_];for(_=0;16>B;++B){if(!ue(m,Y[_+0]))return B;for(;!ue(m,Y[_+1]);)if(Y=b[++B].Yb[0],_=0,B==16)return 16;var Z=b[B+1].Yb;if(ue(m,Y[_+2])){var re=m,be=0;if(ue(re,(Le=Y)[(Ee=_)+3]))if(ue(re,Le[Ee+6])){for(Y=0,Ee=2*(be=ue(re,Le[Ee+8]))+(Le=ue(re,Le[Ee+9+be])),be=0,Le=tF[Ee];Le[Y];++Y)be+=be+ue(re,Le[Y]);be+=3+(8<<Ee)}else ue(re,Le[Ee+7])?(be=7+2*ue(re,165),be+=ue(re,145)):be=5+ue(re,159);else be=ue(re,Le[Ee+4])?3+ue(re,Le[Ee+5]):2;Y=Z[2]}else be=1,Y=Z[1];Z=H+rF[B],0>(re=m).b&&te(re);var Ee,Le=re.b,_e=(Ee=re.Ca>>1)-(re.I>>Le)>>31;--re.b,re.Ca+=_e,re.Ca|=1,re.I-=(Ee+1&_e)<<Le,q[Z]=((be^_e)-_e)*L[(0<B)+0]}return 16}function fo(m){var b=m.rb[m.sb-1];b.la=0,b.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function ud(m,b){if(m==null)return 0;if(b==null)return Cr(m,2,"NULL VP8Io parameter in VP8Decode().");if(!m.cb&&!ho(m,b))return 0;if(t(m.cb),b.ac==null||b.ac(b)){b.ob&&(m.L=0);var _=Eg[m.L];if(m.L==2?(m.yb=0,m.zb=0):(m.yb=b.v-_>>4,m.zb=b.j-_>>4,0>m.yb&&(m.yb=0),0>m.zb&&(m.zb=0)),m.Va=b.o+15+_>>4,m.Hb=b.va+15+_>>4,m.Hb>m.za&&(m.Hb=m.za),m.Va>m.Ub&&(m.Va=m.Ub),0<m.L){var L=m.ed;for(_=0;4>_;++_){var B;if(m.Qa.Cb){var q=m.Qa.Lb[_];m.Qa.Fb||(q+=L.Tb)}else q=L.Tb;for(B=0;1>=B;++B){var H=m.gd[_][B],Y=q;if(L.Pc&&(Y+=L.vd[0],B&&(Y+=L.od[0])),0<(Y=0>Y?0:63<Y?63:Y)){var Z=Y;0<L.wb&&(Z=4<L.wb?Z>>2:Z>>1)>9-L.wb&&(Z=9-L.wb),1>Z&&(Z=1),H.dd=Z,H.tc=2*Y+Z,H.ld=40<=Y?2:15<=Y?1:0}else H.tc=0;H.La=B}}}_=0}else Cr(m,6,"Frame setup failed"),_=m.a;if(_=_==0){if(_){m.$c=0,0<m.Aa||(m.Ic=yF);e:{_=m.Ic,L=4*(Z=m.za);var re=32*Z,be=Z+1,Ee=0<m.L?Z*(0<m.Aa?2:1):0,Le=(m.Aa==2?2:1)*Z;if((H=L+832+(B=3*(16*_+Eg[m.L])/2*re)+(q=m.Fa!=null&&0<m.Fa.length?m.Kc.c*m.Kc.i:0))!=H)_=0;else{if(H>m.Vb){if(m.Vb=0,m.Ec=i(H),m.Fc=0,m.Ec==null){_=Cr(m,1,"no memory during frame initialization.");break e}m.Vb=H}H=m.Ec,Y=m.Fc,m.Ac=H,m.Bc=Y,Y+=L,m.Gd=o(re,Go),m.Hd=0,m.rb=o(be+1,Xs),m.sb=1,m.wa=Ee?o(Ee,jr):null,m.Y=0,m.D.Nb=0,m.D.wa=m.wa,m.D.Y=m.Y,0<m.Aa&&(m.D.Y+=Z),t(!0),m.oc=H,m.pc=Y,Y+=832,m.ya=o(Le,Es),m.aa=0,m.D.ya=m.ya,m.D.aa=m.aa,m.Aa==2&&(m.D.aa+=Z),m.R=16*Z,m.B=8*Z,Z=(re=Eg[m.L])*m.R,re=re/2*m.B,m.sa=H,m.ta=Y+Z,m.qa=m.sa,m.ra=m.ta+16*_*m.R+re,m.Ha=m.qa,m.Ia=m.ra+8*_*m.B+re,m.$c=0,Y+=B,m.mb=q?H:null,m.nb=q?Y:null,t(Y+q<=m.Fc+m.Vb),fo(m),a(m.Ac,m.Bc,0,L),_=1}}if(_){if(b.ka=0,b.y=m.sa,b.O=m.ta,b.f=m.qa,b.N=m.ra,b.ea=m.Ha,b.Vd=m.Ia,b.fa=m.R,b.Rc=m.B,b.F=null,b.J=0,!jg){for(_=-255;255>=_;++_)an[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)tl[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)em[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)Bu[255+_]=0>_?0:255<_?255:_;jg=1}Ou=p1,el=Nu,Zf=ng,ia=m1,mi=ag,Ms=Va,Mu=Mf,bg=md,Xf=A1,xd=$f,vd=k1,Ol=Au,yd=Bf,$u=mg,bd=fg,Ml=po,Qf=Zo,pi=C1,Ii[0]=mo,Ii[1]=g1,Ii[2]=b1,Ii[3]=j1,Ii[4]=lg,Ii[5]=Cu,Ii[6]=cg,Ii[7]=Ff,Ii[8]=N1,Ii[9]=w1,$l[0]=ig,$l[1]=v1,$l[2]=Jo,$l[3]=Su,$l[4]=$n,$l[5]=y1,$l[6]=og,rl[0]=Rl,rl[1]=x1,rl[2]=S1,rl[3]=Df,rl[4]=fd,rl[5]=_1,rl[6]=Of,_=1}else _=0}_&&(_=function(_e,rt){for(_e.M=0;_e.M<_e.Va;++_e.M){var qe,je=_e.Jc[_e.M&_e.Xb],we=_e.m,Xe=_e;for(qe=0;qe<Xe.za;++qe){var at=we,tt=Xe,Lt=tt.Ac,bt=tt.Bc+4*qe,er=tt.zc,Nt=tt.ya[tt.aa+qe];if(tt.Qa.Bb?Nt.$b=ue(at,tt.Pa.jb[0])?2+ue(at,tt.Pa.jb[2]):ue(at,tt.Pa.jb[1]):Nt.$b=0,tt.kc&&(Nt.Ad=ue(at,tt.Bd)),Nt.Za=!ue(at,145)+0,Nt.Za){var Wr=Nt.Ob,Qr=0;for(tt=0;4>tt;++tt){var Ir,Ar=er[0+tt];for(Ir=0;4>Ir;++Ir){Ar=nF[Lt[bt+Ir]][Ar];for(var us=SS[ue(at,Ar[0])];0<us;)us=SS[2*us+ue(at,Ar[us])];Ar=-us,Lt[bt+Ir]=Ar}n(Wr,Qr,Lt,bt,4),Qr+=4,er[0+tt]=Ar}}else Ar=ue(at,156)?ue(at,128)?1:3:ue(at,163)?2:0,Nt.Ob[0]=Ar,a(Lt,bt,Ar,4),a(er,0,Ar,4);Nt.Dd=ue(at,142)?ue(at,114)?ue(at,183)?1:3:2:0}if(Xe.m.Ka)return Cr(_e,7,"Premature end-of-partition0 encountered.");for(;_e.ja<_e.za;++_e.ja){if(Xe=je,at=(we=_e).rb[we.sb-1],Lt=we.rb[we.sb+we.ja],qe=we.ya[we.aa+we.ja],bt=we.kc?qe.Ad:0)at.la=Lt.la=0,qe.Za||(at.Na=Lt.Na=0),qe.Hc=0,qe.Gc=0,qe.ia=0;else{var is,mr;if(at=Lt,Lt=Xe,bt=we.Pa.Xc,er=we.ya[we.aa+we.ja],Nt=we.pb[er.$b],tt=er.ad,Wr=0,Qr=we.rb[we.sb-1],Ar=Ir=0,a(tt,Wr,0,384),er.Za)var en=0,_a=bt[3];else{us=i(16);var tn=at.Na+Qr.Na;if(tn=tm(Lt,bt[1],tn,Nt.Eb,0,us,0),at.Na=Qr.Na=(0<tn)+0,1<tn)Ou(us,0,tt,Wr);else{var Ca=us[0]+3>>3;for(us=0;256>us;us+=16)tt[Wr+us]=Ca}en=1,_a=bt[0]}var es=15&at.la,Ga=15&Qr.la;for(us=0;4>us;++us){var Ka=1&Ga;for(Ca=mr=0;4>Ca;++Ca)es=es>>1|(Ka=(tn=tm(Lt,_a,tn=Ka+(1&es),Nt.Sc,en,tt,Wr))>en)<<7,mr=mr<<2|(3<tn?3:1<tn?2:tt[Wr+0]!=0),Wr+=16;es>>=4,Ga=Ga>>1|Ka<<7,Ir=(Ir<<8|mr)>>>0}for(_a=es,en=Ga>>4,is=0;4>is;is+=2){for(mr=0,es=at.la>>4+is,Ga=Qr.la>>4+is,us=0;2>us;++us){for(Ka=1&Ga,Ca=0;2>Ca;++Ca)tn=Ka+(1&es),es=es>>1|(Ka=0<(tn=tm(Lt,bt[2],tn,Nt.Qc,0,tt,Wr)))<<3,mr=mr<<2|(3<tn?3:1<tn?2:tt[Wr+0]!=0),Wr+=16;es>>=2,Ga=Ga>>1|Ka<<5}Ar|=mr<<4*is,_a|=es<<4<<is,en|=(240&Ga)<<is}at.la=_a,Qr.la=en,er.Hc=Ir,er.Gc=Ar,er.ia=43690&Ar?0:Nt.ia,bt=!(Ir|Ar)}if(0<we.L&&(we.wa[we.Y+we.ja]=we.gd[qe.$b][qe.Za],we.wa[we.Y+we.ja].La|=!bt),Xe.Ka)return Cr(_e,7,"Premature end-of-file encountered.")}if(fo(_e),we=rt,Xe=1,qe=(je=_e).D,at=0<je.L&&je.M>=je.zb&&je.M<=je.Va,je.Aa==0)e:{if(qe.M=je.M,qe.uc=at,Wf(je,qe),Xe=1,qe=(mr=je.D).Nb,at=(Ar=Eg[je.L])*je.R,Lt=Ar/2*je.B,us=16*qe*je.R,Ca=8*qe*je.B,bt=je.sa,er=je.ta-at+us,Nt=je.qa,tt=je.ra-Lt+Ca,Wr=je.Ha,Qr=je.Ia-Lt+Ca,Ga=(es=mr.M)==0,Ir=es>=je.Va-1,je.Aa==2&&Wf(je,mr),mr.uc)for(Ka=(tn=je).D.M,t(tn.D.uc),mr=tn.yb;mr<tn.Hb;++mr){en=mr,_a=Ka;var pn=(kn=(Ts=tn).D).Nb;is=Ts.R;var kn=kn.wa[kn.Y+en],oa=Ts.sa,yi=Ts.ta+16*pn*is+16*en,xo=kn.dd,gn=kn.tc;if(gn!=0)if(t(3<=gn),Ts.L==1)0<en&&Ml(oa,yi,is,gn+4),kn.La&&pi(oa,yi,is,gn),0<_a&&bd(oa,yi,is,gn+4),kn.La&&Qf(oa,yi,is,gn);else{var sl=Ts.B,jd=Ts.qa,zu=Ts.ra+8*pn*sl+8*en,zl=Ts.Ha,Ts=Ts.Ia+8*pn*sl+8*en;pn=kn.ld,0<en&&(bg(oa,yi,is,gn+4,xo,pn),xd(jd,zu,zl,Ts,sl,gn+4,xo,pn)),kn.La&&(Ol(oa,yi,is,gn,xo,pn),$u(jd,zu,zl,Ts,sl,gn,xo,pn)),0<_a&&(Mu(oa,yi,is,gn+4,xo,pn),Xf(jd,zu,zl,Ts,sl,gn+4,xo,pn)),kn.La&&(vd(oa,yi,is,gn,xo,pn),yd(jd,zu,zl,Ts,sl,gn,xo,pn))}}if(je.ia&&alert("todo:DitherRow"),we.put!=null){if(mr=16*es,es=16*(es+1),Ga?(we.y=je.sa,we.O=je.ta+us,we.f=je.qa,we.N=je.ra+Ca,we.ea=je.Ha,we.W=je.Ia+Ca):(mr-=Ar,we.y=bt,we.O=er,we.f=Nt,we.N=tt,we.ea=Wr,we.W=Qr),Ir||(es-=Ar),es>we.o&&(es=we.o),we.F=null,we.J=null,je.Fa!=null&&0<je.Fa.length&&mr<es&&(we.J=Vf(je,we,mr,es-mr),we.F=je.mb,we.F==null&&we.F.length==0)){Xe=Cr(je,3,"Could not decode alpha data.");break e}mr<we.j&&(Ar=we.j-mr,mr=we.j,t(!(1&Ar)),we.O+=je.R*Ar,we.N+=je.B*(Ar>>1),we.W+=je.B*(Ar>>1),we.F!=null&&(we.J+=we.width*Ar)),mr<es&&(we.O+=we.v,we.N+=we.v>>1,we.W+=we.v>>1,we.F!=null&&(we.J+=we.v),we.ka=mr-we.j,we.U=we.va-we.v,we.T=es-mr,Xe=we.put(we))}qe+1!=je.Ic||Ir||(n(je.sa,je.ta-at,bt,er+16*je.R,at),n(je.qa,je.ra-Lt,Nt,tt+8*je.B,Lt),n(je.Ha,je.Ia-Lt,Wr,Qr+8*je.B,Lt))}if(!Xe)return Cr(_e,6,"Output aborted.")}return 1}(m,b)),b.bc!=null&&b.bc(b),_&=1}return _?(m.cb=0,_):0}function _n(m,b,_,L,B){B=m[b+_+32*L]+(B>>3),m[b+_+32*L]=-256&B?0>B?0:255:B}function hi(m,b,_,L,B,q){_n(m,b,0,_,L+B),_n(m,b,1,_,L+q),_n(m,b,2,_,L-q),_n(m,b,3,_,L-B)}function fn(m){return(20091*m>>16)+m}function Yo(m,b,_,L){var B,q=0,H=i(16);for(B=0;4>B;++B){var Y=m[b+0]+m[b+8],Z=m[b+0]-m[b+8],re=(35468*m[b+4]>>16)-fn(m[b+12]),be=fn(m[b+4])+(35468*m[b+12]>>16);H[q+0]=Y+be,H[q+1]=Z+re,H[q+2]=Z-re,H[q+3]=Y-be,q+=4,b++}for(B=q=0;4>B;++B)Y=(m=H[q+0]+4)+H[q+8],Z=m-H[q+8],re=(35468*H[q+4]>>16)-fn(H[q+12]),_n(_,L,0,0,Y+(be=fn(H[q+4])+(35468*H[q+12]>>16))),_n(_,L,1,0,Z+re),_n(_,L,2,0,Z-re),_n(_,L,3,0,Y-be),q++,L+=32}function Va(m,b,_,L){var B=m[b+0]+4,q=35468*m[b+4]>>16,H=fn(m[b+4]),Y=35468*m[b+1]>>16;hi(_,L,0,B+H,m=fn(m[b+1]),Y),hi(_,L,1,B+q,m,Y),hi(_,L,2,B-q,m,Y),hi(_,L,3,B-H,m,Y)}function Nu(m,b,_,L,B){Yo(m,b,_,L),B&&Yo(m,b+16,_,L+4)}function ng(m,b,_,L){el(m,b+0,_,L,1),el(m,b+32,_,L+128,1)}function m1(m,b,_,L){var B;for(m=m[b+0]+4,B=0;4>B;++B)for(b=0;4>b;++b)_n(_,L,b,B,m)}function ag(m,b,_,L){m[b+0]&&ia(m,b+0,_,L),m[b+16]&&ia(m,b+16,_,L+4),m[b+32]&&ia(m,b+32,_,L+128),m[b+48]&&ia(m,b+48,_,L+128+4)}function p1(m,b,_,L){var B,q=i(16);for(B=0;4>B;++B){var H=m[b+0+B]+m[b+12+B],Y=m[b+4+B]+m[b+8+B],Z=m[b+4+B]-m[b+8+B],re=m[b+0+B]-m[b+12+B];q[0+B]=H+Y,q[8+B]=H-Y,q[4+B]=re+Z,q[12+B]=re-Z}for(B=0;4>B;++B)H=(m=q[0+4*B]+3)+q[3+4*B],Y=q[1+4*B]+q[2+4*B],Z=q[1+4*B]-q[2+4*B],re=m-q[3+4*B],_[L+0]=H+Y>>3,_[L+16]=re+Z>>3,_[L+32]=H-Y>>3,_[L+48]=re-Z>>3,L+=64}function If(m,b,_){var L,B=b-32,q=Wa,H=255-m[B-1];for(L=0;L<_;++L){var Y,Z=q,re=H+m[b-1];for(Y=0;Y<_;++Y)m[b+Y]=Z[re+m[B+Y]];b+=32}}function g1(m,b){If(m,b,4)}function x1(m,b){If(m,b,8)}function v1(m,b){If(m,b,16)}function Jo(m,b){var _;for(_=0;16>_;++_)n(m,b+32*_,m,b-32,16)}function Su(m,b){var _;for(_=16;0<_;--_)a(m,b,m[b-1],16),b+=32}function _u(m,b,_){var L;for(L=0;16>L;++L)a(b,_+32*L,m,16)}function ig(m,b){var _,L=16;for(_=0;16>_;++_)L+=m[b-1+32*_]+m[b+_-32];_u(L>>5,m,b)}function $n(m,b){var _,L=8;for(_=0;16>_;++_)L+=m[b-1+32*_];_u(L>>4,m,b)}function y1(m,b){var _,L=8;for(_=0;16>_;++_)L+=m[b+_-32];_u(L>>4,m,b)}function og(m,b){_u(128,m,b)}function ar(m,b,_){return m+2*b+_+2>>2}function b1(m,b){var _,L=b-32;for(L=new Uint8Array([ar(m[L-1],m[L+0],m[L+1]),ar(m[L+0],m[L+1],m[L+2]),ar(m[L+1],m[L+2],m[L+3]),ar(m[L+2],m[L+3],m[L+4])]),_=0;4>_;++_)n(m,b+32*_,L,0,L.length)}function j1(m,b){var _=m[b-1],L=m[b-1+32],B=m[b-1+64],q=m[b-1+96];ce(m,b+0,16843009*ar(m[b-1-32],_,L)),ce(m,b+32,16843009*ar(_,L,B)),ce(m,b+64,16843009*ar(L,B,q)),ce(m,b+96,16843009*ar(B,q,q))}function mo(m,b){var _,L=4;for(_=0;4>_;++_)L+=m[b+_-32]+m[b-1+32*_];for(L>>=3,_=0;4>_;++_)a(m,b+32*_,L,4)}function lg(m,b){var _=m[b-1+0],L=m[b-1+32],B=m[b-1+64],q=m[b-1-32],H=m[b+0-32],Y=m[b+1-32],Z=m[b+2-32],re=m[b+3-32];m[b+0+96]=ar(L,B,m[b-1+96]),m[b+1+96]=m[b+0+64]=ar(_,L,B),m[b+2+96]=m[b+1+64]=m[b+0+32]=ar(q,_,L),m[b+3+96]=m[b+2+64]=m[b+1+32]=m[b+0+0]=ar(H,q,_),m[b+3+64]=m[b+2+32]=m[b+1+0]=ar(Y,H,q),m[b+3+32]=m[b+2+0]=ar(Z,Y,H),m[b+3+0]=ar(re,Z,Y)}function cg(m,b){var _=m[b+1-32],L=m[b+2-32],B=m[b+3-32],q=m[b+4-32],H=m[b+5-32],Y=m[b+6-32],Z=m[b+7-32];m[b+0+0]=ar(m[b+0-32],_,L),m[b+1+0]=m[b+0+32]=ar(_,L,B),m[b+2+0]=m[b+1+32]=m[b+0+64]=ar(L,B,q),m[b+3+0]=m[b+2+32]=m[b+1+64]=m[b+0+96]=ar(B,q,H),m[b+3+32]=m[b+2+64]=m[b+1+96]=ar(q,H,Y),m[b+3+64]=m[b+2+96]=ar(H,Y,Z),m[b+3+96]=ar(Y,Z,Z)}function Cu(m,b){var _=m[b-1+0],L=m[b-1+32],B=m[b-1+64],q=m[b-1-32],H=m[b+0-32],Y=m[b+1-32],Z=m[b+2-32],re=m[b+3-32];m[b+0+0]=m[b+1+64]=q+H+1>>1,m[b+1+0]=m[b+2+64]=H+Y+1>>1,m[b+2+0]=m[b+3+64]=Y+Z+1>>1,m[b+3+0]=Z+re+1>>1,m[b+0+96]=ar(B,L,_),m[b+0+64]=ar(L,_,q),m[b+0+32]=m[b+1+96]=ar(_,q,H),m[b+1+32]=m[b+2+96]=ar(q,H,Y),m[b+2+32]=m[b+3+96]=ar(H,Y,Z),m[b+3+32]=ar(Y,Z,re)}function Ff(m,b){var _=m[b+0-32],L=m[b+1-32],B=m[b+2-32],q=m[b+3-32],H=m[b+4-32],Y=m[b+5-32],Z=m[b+6-32],re=m[b+7-32];m[b+0+0]=_+L+1>>1,m[b+1+0]=m[b+0+64]=L+B+1>>1,m[b+2+0]=m[b+1+64]=B+q+1>>1,m[b+3+0]=m[b+2+64]=q+H+1>>1,m[b+0+32]=ar(_,L,B),m[b+1+32]=m[b+0+96]=ar(L,B,q),m[b+2+32]=m[b+1+96]=ar(B,q,H),m[b+3+32]=m[b+2+96]=ar(q,H,Y),m[b+3+64]=ar(H,Y,Z),m[b+3+96]=ar(Y,Z,re)}function w1(m,b){var _=m[b-1+0],L=m[b-1+32],B=m[b-1+64],q=m[b-1+96];m[b+0+0]=_+L+1>>1,m[b+2+0]=m[b+0+32]=L+B+1>>1,m[b+2+32]=m[b+0+64]=B+q+1>>1,m[b+1+0]=ar(_,L,B),m[b+3+0]=m[b+1+32]=ar(L,B,q),m[b+3+32]=m[b+1+64]=ar(B,q,q),m[b+3+64]=m[b+2+64]=m[b+0+96]=m[b+1+96]=m[b+2+96]=m[b+3+96]=q}function N1(m,b){var _=m[b-1+0],L=m[b-1+32],B=m[b-1+64],q=m[b-1+96],H=m[b-1-32],Y=m[b+0-32],Z=m[b+1-32],re=m[b+2-32];m[b+0+0]=m[b+2+32]=_+H+1>>1,m[b+0+32]=m[b+2+64]=L+_+1>>1,m[b+0+64]=m[b+2+96]=B+L+1>>1,m[b+0+96]=q+B+1>>1,m[b+3+0]=ar(Y,Z,re),m[b+2+0]=ar(H,Y,Z),m[b+1+0]=m[b+3+32]=ar(_,H,Y),m[b+1+32]=m[b+3+64]=ar(L,_,H),m[b+1+64]=m[b+3+96]=ar(B,L,_),m[b+1+96]=ar(q,B,L)}function S1(m,b){var _;for(_=0;8>_;++_)n(m,b+32*_,m,b-32,8)}function Df(m,b){var _;for(_=0;8>_;++_)a(m,b,m[b-1],8),b+=32}function hd(m,b,_){var L;for(L=0;8>L;++L)a(b,_+32*L,m,8)}function Rl(m,b){var _,L=8;for(_=0;8>_;++_)L+=m[b+_-32]+m[b-1+32*_];hd(L>>4,m,b)}function _1(m,b){var _,L=4;for(_=0;8>_;++_)L+=m[b+_-32];hd(L>>3,m,b)}function fd(m,b){var _,L=4;for(_=0;8>_;++_)L+=m[b-1+32*_];hd(L>>3,m,b)}function Of(m,b){hd(128,m,b)}function ku(m,b,_){var L=m[b-_],B=m[b+0],q=3*(B-L)+L1[1020+m[b-2*_]-m[b+_]],H=wg[112+(q+4>>3)];m[b-_]=Wa[255+L+wg[112+(q+3>>3)]],m[b+0]=Wa[255+B-H]}function dg(m,b,_,L){var B=m[b+0],q=m[b+_];return xi[255+m[b-2*_]-m[b-_]]>L||xi[255+q-B]>L}function ug(m,b,_,L){return 4*xi[255+m[b-_]-m[b+0]]+xi[255+m[b-2*_]-m[b+_]]<=L}function hg(m,b,_,L,B){var q=m[b-3*_],H=m[b-2*_],Y=m[b-_],Z=m[b+0],re=m[b+_],be=m[b+2*_],Ee=m[b+3*_];return 4*xi[255+Y-Z]+xi[255+H-re]>L?0:xi[255+m[b-4*_]-q]<=B&&xi[255+q-H]<=B&&xi[255+H-Y]<=B&&xi[255+Ee-be]<=B&&xi[255+be-re]<=B&&xi[255+re-Z]<=B}function fg(m,b,_,L){var B=2*L+1;for(L=0;16>L;++L)ug(m,b+L,_,B)&&ku(m,b+L,_)}function po(m,b,_,L){var B=2*L+1;for(L=0;16>L;++L)ug(m,b+L*_,1,B)&&ku(m,b+L*_,1)}function Zo(m,b,_,L){var B;for(B=3;0<B;--B)fg(m,b+=4*_,_,L)}function C1(m,b,_,L){var B;for(B=3;0<B;--B)po(m,b+=4,_,L)}function Tl(m,b,_,L,B,q,H,Y){for(q=2*q+1;0<B--;){if(hg(m,b,_,q,H))if(dg(m,b,_,Y))ku(m,b,_);else{var Z=m,re=b,be=_,Ee=Z[re-2*be],Le=Z[re-be],_e=Z[re+0],rt=Z[re+be],qe=Z[re+2*be],je=27*(Xe=L1[1020+3*(_e-Le)+L1[1020+Ee-rt]])+63>>7,we=18*Xe+63>>7,Xe=9*Xe+63>>7;Z[re-3*be]=Wa[255+Z[re-3*be]+Xe],Z[re-2*be]=Wa[255+Ee+we],Z[re-be]=Wa[255+Le+je],Z[re+0]=Wa[255+_e-je],Z[re+be]=Wa[255+rt-we],Z[re+2*be]=Wa[255+qe-Xe]}b+=L}}function Ri(m,b,_,L,B,q,H,Y){for(q=2*q+1;0<B--;){if(hg(m,b,_,q,H))if(dg(m,b,_,Y))ku(m,b,_);else{var Z=m,re=b,be=_,Ee=Z[re-be],Le=Z[re+0],_e=Z[re+be],rt=wg[112+((qe=3*(Le-Ee))+4>>3)],qe=wg[112+(qe+3>>3)],je=rt+1>>1;Z[re-2*be]=Wa[255+Z[re-2*be]+je],Z[re-be]=Wa[255+Ee+qe],Z[re+0]=Wa[255+Le-rt],Z[re+be]=Wa[255+_e-je]}b+=L}}function Mf(m,b,_,L,B,q){Tl(m,b,_,1,16,L,B,q)}function md(m,b,_,L,B,q){Tl(m,b,1,_,16,L,B,q)}function k1(m,b,_,L,B,q){var H;for(H=3;0<H;--H)Ri(m,b+=4*_,_,1,16,L,B,q)}function Au(m,b,_,L,B,q){var H;for(H=3;0<H;--H)Ri(m,b+=4,1,_,16,L,B,q)}function A1(m,b,_,L,B,q,H,Y){Tl(m,b,B,1,8,q,H,Y),Tl(_,L,B,1,8,q,H,Y)}function $f(m,b,_,L,B,q,H,Y){Tl(m,b,1,B,8,q,H,Y),Tl(_,L,1,B,8,q,H,Y)}function Bf(m,b,_,L,B,q,H,Y){Ri(m,b+4*B,B,1,8,q,H,Y),Ri(_,L+4*B,B,1,8,q,H,Y)}function mg(m,b,_,L,B,q,H,Y){Ri(m,b+4,1,B,8,q,H,Y),Ri(_,L+4,1,B,8,q,H,Y)}function Pu(){this.ba=new sr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new zt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function zf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Uf(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function pg(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new A}function P1(){this.xb=this.a=0,this.l=new Sn,this.ca=new sr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new pg,this.ab=0,this.gc=o(4,Uf),this.Oc=0}function Eu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Sn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pd(m,b,_,L,B,q,H){for(m=m==null?0:m[b+0],b=0;b<H;++b)B[q+b]=m+_[L+b]&255,m=B[q+b]}function qf(m,b,_,L,B,q,H){var Y;if(m==null)pd(null,null,_,L,B,q,H);else for(Y=0;Y<H;++Y)B[q+Y]=m[b+Y]+_[L+Y]&255}function Il(m,b,_,L,B,q,H){if(m==null)pd(null,null,_,L,B,q,H);else{var Y,Z=m[b+0],re=Z,be=Z;for(Y=0;Y<H;++Y)re=be+(Z=m[b+Y])-re,be=_[L+Y]+(-256&re?0>re?0:255:re)&255,re=Z,B[q+Y]=be}}function Vf(m,b,_,L){var B=b.width,q=b.o;if(t(m!=null&&b!=null),0>_||0>=L||_+L>q)return null;if(!m.Cc){if(m.ga==null){var H;if(m.ga=new Eu,(H=m.ga==null)||(H=b.width*b.o,t(m.Gb.length==0),m.Gb=i(H),m.Uc=0,m.Gb==null?H=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,H=1),H=!H),!H){H=m.ga;var Y=m.Fa,Z=m.P,re=m.qc,be=m.mb,Ee=m.nb,Le=Z+1,_e=re-1,rt=H.l;if(t(Y!=null&&be!=null&&b!=null),Bl[0]=null,Bl[1]=pd,Bl[2]=qf,Bl[3]=Il,H.ca=be,H.tb=Ee,H.c=b.width,H.i=b.height,t(0<H.c&&0<H.i),1>=re)b=0;else if(H.$a=Y[Z+0]>>0&3,H.Z=Y[Z+0]>>2&3,H.Lc=Y[Z+0]>>4&3,Z=Y[Z+0]>>6&3,0>H.$a||1<H.$a||4<=H.Z||1<H.Lc||Z)b=0;else if(rt.put=Qt,rt.ac=vt,rt.bc=Zr,rt.ma=H,rt.width=b.width,rt.height=b.height,rt.Da=b.Da,rt.v=b.v,rt.va=b.va,rt.j=b.j,rt.o=b.o,H.$a)e:{t(H.$a==1),b=vr();t:for(;;){if(b==null){b=0;break e}if(t(H!=null),H.mc=b,b.c=H.c,b.i=H.i,b.l=H.l,b.l.ma=H,b.l.width=H.c,b.l.height=H.i,b.a=0,V(b.m,Y,Le,_e),!Er(H.c,H.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&wa(b.s)?(H.ic=1,Y=b.c*b.i,b.Ta=null,b.Ua=0,b.V=i(Y),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(H.ic=0,b=as(b,H.c)),!b))break t;b=1;break e}H.mc=null,b=0}else b=_e>=H.c*H.i;H=!b}if(H)return null;m.ga.Lc!=1?m.Ga=0:L=q-_}t(m.ga!=null),t(_+L<=q);e:{if(b=(Y=m.ga).c,q=Y.l.o,Y.$a==0){if(Le=m.rc,_e=m.Vc,rt=m.Fa,Z=m.P+1+_*b,re=m.mb,be=m.nb+_*b,t(Z<=m.P+m.qc),Y.Z!=0)for(t(Bl[Y.Z]!=null),H=0;H<L;++H)Bl[Y.Z](Le,_e,rt,Z,re,be,b),Le=re,_e=be,be+=b,Z+=b;else for(H=0;H<L;++H)n(re,be,rt,Z,b),Le=re,_e=be,be+=b,Z+=b;m.rc=Le,m.Vc=_e}else{if(t(Y.mc!=null),b=_+L,t((H=Y.mc)!=null),t(b<=H.i),H.C>=b)b=1;else if(Y.ic||ke(),Y.ic){Y=H.V,Le=H.Ba,_e=H.c;var qe=H.i,je=(rt=1,Z=H.$/_e,re=H.$%_e,be=H.m,Ee=H.s,H.$),we=_e*qe,Xe=_e*b,at=Ee.wc,tt=je<Xe?Xr(Ee,re,Z):null;t(je<=we),t(b<=qe),t(wa(Ee));t:for(;;){for(;!be.h&&je<Xe;){if(re&at||(tt=Xr(Ee,re,Z)),t(tt!=null),ee(be),256>(qe=Ps(tt.G[0],tt.H[0],be)))Y[Le+je]=qe,++je,++re>=_e&&(re=0,++Z<=b&&!(Z%16)&&We(H,Z));else{if(!(280>qe)){rt=0;break t}qe=nn(qe-256,be);var Lt,bt=Ps(tt.G[4],tt.H[4],be);if(ee(be),!(je>=(bt=un(_e,bt=nn(bt,be)))&&we-je>=qe)){rt=0;break t}for(Lt=0;Lt<qe;++Lt)Y[Le+je+Lt]=Y[Le+je+Lt-bt];for(je+=qe,re+=qe;re>=_e;)re-=_e,++Z<=b&&!(Z%16)&&We(H,Z);je<Xe&&re&at&&(tt=Xr(Ee,re,Z))}t(be.h==M(be))}We(H,Z>b?b:Z);break t}!rt||be.h&&je<we?(rt=0,H.a=be.h?5:3):H.$=je,b=rt}else b=wt(H,H.V,H.Ba,H.c,H.i,b,_r);if(!b){L=0;break e}}_+L>=q&&(m.Cc=1),L=1}if(!L)return null;if(m.Cc&&((L=m.ga)!=null&&(L.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+_*B}function S(m,b,_,L,B,q){for(;0<B--;){var H,Y=m,Z=b+(_?1:0),re=m,be=b+(_?0:3);for(H=0;H<L;++H){var Ee=re[be+4*H];Ee!=255&&(Ee*=32897,Y[Z+4*H+0]=Y[Z+4*H+0]*Ee>>23,Y[Z+4*H+1]=Y[Z+4*H+1]*Ee>>23,Y[Z+4*H+2]=Y[Z+4*H+2]*Ee>>23)}b+=q}}function z(m,b,_,L,B){for(;0<L--;){var q;for(q=0;q<_;++q){var H=m[b+2*q+0],Y=15&(re=m[b+2*q+1]),Z=4369*Y,re=(240&re|re>>4)*Z>>16;m[b+2*q+0]=(240&H|H>>4)*Z>>16&240|(15&H|H<<4)*Z>>16>>4&15,m[b+2*q+1]=240&re|Y}b+=B}}function oe(m,b,_,L,B,q,H,Y){var Z,re,be=255;for(re=0;re<B;++re){for(Z=0;Z<L;++Z){var Ee=m[b+Z];q[H+4*Z]=Ee,be&=Ee}b+=_,H+=Y}return be!=255}function ye(m,b,_,L,B){var q;for(q=0;q<B;++q)_[L+q]=m[b+q]>>8}function ke(){gi=S,ms=z,ps=oe,$s=ye}function He(m,b,_){E[m]=function(L,B,q,H,Y,Z,re,be,Ee,Le,_e,rt,qe,je,we,Xe,at){var tt,Lt=at-1>>1,bt=Y[Z+0]|re[be+0]<<16,er=Ee[Le+0]|_e[rt+0]<<16;t(L!=null);var Nt=3*bt+er+131074>>2;for(b(L[B+0],255&Nt,Nt>>16,qe,je),q!=null&&(Nt=3*er+bt+131074>>2,b(q[H+0],255&Nt,Nt>>16,we,Xe)),tt=1;tt<=Lt;++tt){var Wr=Y[Z+tt]|re[be+tt]<<16,Qr=Ee[Le+tt]|_e[rt+tt]<<16,Ir=bt+Wr+er+Qr+524296,Ar=Ir+2*(Wr+er)>>3;Nt=Ar+bt>>1,bt=(Ir=Ir+2*(bt+Qr)>>3)+Wr>>1,b(L[B+2*tt-1],255&Nt,Nt>>16,qe,je+(2*tt-1)*_),b(L[B+2*tt-0],255&bt,bt>>16,qe,je+(2*tt-0)*_),q!=null&&(Nt=Ir+er>>1,bt=Ar+Qr>>1,b(q[H+2*tt-1],255&Nt,Nt>>16,we,Xe+(2*tt-1)*_),b(q[H+2*tt+0],255&bt,bt>>16,we,Xe+(2*tt+0)*_)),bt=Wr,er=Qr}1&at||(Nt=3*bt+er+131074>>2,b(L[B+at-1],255&Nt,Nt>>16,qe,je+(at-1)*_),q!=null&&(Nt=3*er+bt+131074>>2,b(q[H+at-1],255&Nt,Nt>>16,we,Xe+(at-1)*_)))}}function ot(){vi[Ng]=lF,vi[Sg]=CS,vi[jS]=cF,vi[_g]=kS,vi[Cg]=AS,vi[R1]=PS,vi[wS]=dF,vi[T1]=CS,vi[I1]=kS,vi[kg]=AS,vi[F1]=PS}function Et(m){return m&-16384?0>m?0:255:m>>uF}function Yt(m,b){return Et((19077*m>>8)+(26149*b>>8)-14234)}function dr(m,b,_){return Et((19077*m>>8)-(6419*b>>8)-(13320*_>>8)+8708)}function ir(m,b){return Et((19077*m>>8)+(33050*b>>8)-17685)}function Lr(m,b,_,L,B){L[B+0]=Yt(m,_),L[B+1]=dr(m,b,_),L[B+2]=ir(m,b)}function Ss(m,b,_,L,B){L[B+0]=ir(m,b),L[B+1]=dr(m,b,_),L[B+2]=Yt(m,_)}function Rs(m,b,_,L,B){var q=dr(m,b,_);b=q<<3&224|ir(m,b)>>3,L[B+0]=248&Yt(m,_)|q>>5,L[B+1]=b}function Qs(m,b,_,L,B){var q=240&ir(m,b)|15;L[B+0]=240&Yt(m,_)|dr(m,b,_)>>4,L[B+1]=q}function Bn(m,b,_,L,B){L[B+0]=255,Lr(m,b,_,L,B+1)}function mn(m,b,_,L,B){Ss(m,b,_,L,B),L[B+3]=255}function Ti(m,b,_,L,B){Lr(m,b,_,L,B),L[B+3]=255}function Ha(m,b){return 0>m?0:m>b?b:m}function go(m,b,_){E[m]=function(L,B,q,H,Y,Z,re,be,Ee){for(var Le=be+(-2&Ee)*_;be!=Le;)b(L[B+0],q[H+0],Y[Z+0],re,be),b(L[B+1],q[H+0],Y[Z+0],re,be+_),B+=2,++H,++Z,be+=2*_;1&Ee&&b(L[B+0],q[H+0],Y[Z+0],re,be)}}function gg(m,b,_){return _==0?m==0?b==0?6:5:b==0?4:0:_}function Hf(m,b,_,L,B){switch(m>>>30){case 3:el(b,_,L,B,0);break;case 2:Ms(b,_,L,B);break;case 1:ia(b,_,L,B)}}function Wf(m,b){var _,L,B=b.M,q=b.Nb,H=m.oc,Y=m.pc+40,Z=m.oc,re=m.pc+584,be=m.oc,Ee=m.pc+600;for(_=0;16>_;++_)H[Y+32*_-1]=129;for(_=0;8>_;++_)Z[re+32*_-1]=129,be[Ee+32*_-1]=129;for(0<B?H[Y-1-32]=Z[re-1-32]=be[Ee-1-32]=129:(a(H,Y-32-1,127,21),a(Z,re-32-1,127,9),a(be,Ee-32-1,127,9)),L=0;L<m.za;++L){var Le=b.ya[b.aa+L];if(0<L){for(_=-1;16>_;++_)n(H,Y+32*_-4,H,Y+32*_+12,4);for(_=-1;8>_;++_)n(Z,re+32*_-4,Z,re+32*_+4,4),n(be,Ee+32*_-4,be,Ee+32*_+4,4)}var _e=m.Gd,rt=m.Hd+L,qe=Le.ad,je=Le.Hc;if(0<B&&(n(H,Y-32,_e[rt].y,0,16),n(Z,re-32,_e[rt].f,0,8),n(be,Ee-32,_e[rt].ea,0,8)),Le.Za){var we=H,Xe=Y-32+16;for(0<B&&(L>=m.za-1?a(we,Xe,_e[rt].y[15],4):n(we,Xe,_e[rt+1].y,0,4)),_=0;4>_;_++)we[Xe+128+_]=we[Xe+256+_]=we[Xe+384+_]=we[Xe+0+_];for(_=0;16>_;++_,je<<=2)we=H,Xe=Y+LS[_],Ii[Le.Ob[_]](we,Xe),Hf(je,qe,16*+_,we,Xe)}else if(we=gg(L,B,Le.Ob[0]),$l[we](H,Y),je!=0)for(_=0;16>_;++_,je<<=2)Hf(je,qe,16*+_,H,Y+LS[_]);for(_=Le.Gc,we=gg(L,B,Le.Dd),rl[we](Z,re),rl[we](be,Ee),je=qe,we=Z,Xe=re,255&(Le=_>>0)&&(170&Le?Zf(je,256,we,Xe):mi(je,256,we,Xe)),Le=be,je=Ee,255&(_>>=8)&&(170&_?Zf(qe,320,Le,je):mi(qe,320,Le,je)),B<m.Ub-1&&(n(_e[rt].y,0,H,Y+480,16),n(_e[rt].f,0,Z,re+224,8),n(_e[rt].ea,0,be,Ee+224,8)),_=8*q*m.B,_e=m.sa,rt=m.ta+16*L+16*q*m.R,qe=m.qa,Le=m.ra+8*L+_,je=m.Ha,we=m.Ia+8*L+_,_=0;16>_;++_)n(_e,rt+_*m.R,H,Y+32*_,16);for(_=0;8>_;++_)n(qe,Le+_*m.B,Z,re+32*_,8),n(je,we+_*m.B,be,Ee+32*_,8)}}function Lu(m,b,_,L,B,q,H,Y,Z){var re=[0],be=[0],Ee=0,Le=Z!=null?Z.kd:0,_e=Z??new zf;if(m==null||12>_)return 7;_e.data=m,_e.w=b,_e.ha=_,b=[b],_=[_],_e.gb=[_e.gb];e:{var rt=b,qe=_,je=_e.gb;if(t(m!=null),t(qe!=null),t(je!=null),je[0]=0,12<=qe[0]&&!s(m,rt[0],"RIFF")){if(s(m,rt[0]+8,"WEBP")){je=3;break e}var we=Ge(m,rt[0]+4);if(12>we||4294967286<we){je=3;break e}if(Le&&we>qe[0]-8){je=7;break e}je[0]=we,rt[0]+=12,qe[0]-=12}je=0}if(je!=0)return je;for(we=0<_e.gb[0],_=_[0];;){e:{var Xe=m;qe=b,je=_;var at=re,tt=be,Lt=rt=[0];if((Nt=Ee=[Ee])[0]=0,8>je[0])je=7;else{if(!s(Xe,qe[0],"VP8X")){if(Ge(Xe,qe[0]+4)!=10){je=3;break e}if(18>je[0]){je=7;break e}var bt=Ge(Xe,qe[0]+8),er=1+Ue(Xe,qe[0]+12);if(2147483648<=er*(Xe=1+Ue(Xe,qe[0]+15))){je=3;break e}Lt!=null&&(Lt[0]=bt),at!=null&&(at[0]=er),tt!=null&&(tt[0]=Xe),qe[0]+=18,je[0]-=18,Nt[0]=1}je=0}}if(Ee=Ee[0],rt=rt[0],je!=0)return je;if(qe=!!(2&rt),!we&&Ee)return 3;if(q!=null&&(q[0]=!!(16&rt)),H!=null&&(H[0]=qe),Y!=null&&(Y[0]=0),H=re[0],rt=be[0],Ee&&qe&&Z==null){je=0;break}if(4>_){je=7;break}if(we&&Ee||!we&&!Ee&&!s(m,b[0],"ALPH")){_=[_],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{bt=m,je=b,we=_;var Nt=_e.gb;at=_e.na,tt=_e.P,Lt=_e.Sa,er=22,t(bt!=null),t(we!=null),Xe=je[0];var Wr=we[0];for(t(at!=null),t(Lt!=null),at[0]=null,tt[0]=null,Lt[0]=0;;){if(je[0]=Xe,we[0]=Wr,8>Wr){je=7;break e}var Qr=Ge(bt,Xe+4);if(4294967286<Qr){je=3;break e}var Ir=8+Qr+1&-2;if(er+=Ir,0<Nt&&er>Nt){je=3;break e}if(!s(bt,Xe,"VP8 ")||!s(bt,Xe,"VP8L")){je=0;break e}if(Wr[0]<Ir){je=7;break e}s(bt,Xe,"ALPH")||(at[0]=bt,tt[0]=Xe+8,Lt[0]=Qr),Xe+=Ir,Wr-=Ir}}if(_=_[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],je!=0)break}_=[_],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(Nt=m,je=b,we=_,at=_e.gb[0],tt=_e.Ja,Lt=_e.xa,bt=je[0],Xe=!s(Nt,bt,"VP8 "),er=!s(Nt,bt,"VP8L"),t(Nt!=null),t(we!=null),t(tt!=null),t(Lt!=null),8>we[0])je=7;else{if(Xe||er){if(Nt=Ge(Nt,bt+4),12<=at&&Nt>at-12){je=3;break e}if(Le&&Nt>we[0]-8){je=7;break e}tt[0]=Nt,je[0]+=8,we[0]-=8,Lt[0]=er}else Lt[0]=5<=we[0]&&Nt[bt+0]==47&&!(Nt[bt+4]>>5),tt[0]=we[0];je=0}if(_=_[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],b=b[0],je!=0)break;if(4294967286<_e.Ja)return 3;if(Y==null||qe||(Y[0]=_e.xa?2:1),H=[H],rt=[rt],_e.xa){if(5>_){je=7;break}Y=H,Le=rt,qe=q,m==null||5>_?m=0:5<=_&&m[b+0]==47&&!(m[b+4]>>5)?(we=[0],Nt=[0],at=[0],V(tt=new T,m,b,_),Ut(tt,we,Nt,at)?(Y!=null&&(Y[0]=we[0]),Le!=null&&(Le[0]=Nt[0]),qe!=null&&(qe[0]=at[0]),m=1):m=0):m=0}else{if(10>_){je=7;break}Y=rt,m==null||10>_||!Ua(m,b+3,_-3)?m=0:(Le=m[b+0]|m[b+1]<<8|m[b+2]<<16,qe=16383&(m[b+7]<<8|m[b+6]),m=16383&(m[b+9]<<8|m[b+8]),1&Le||3<(Le>>1&7)||!(Le>>4&1)||Le>>5>=_e.Ja||!qe||!m?m=0:(H&&(H[0]=qe),Y&&(Y[0]=m),m=1))}if(!m||(H=H[0],rt=rt[0],Ee&&(re[0]!=H||be[0]!=rt)))return 3;Z!=null&&(Z[0]=_e,Z.offset=b-Z.w,t(4294967286>b-Z.w),t(Z.offset==Z.ha-_));break}return je==0||je==7&&Ee&&Z==null?(q!=null&&(q[0]|=_e.na!=null&&0<_e.na.length),L!=null&&(L[0]=H),B!=null&&(B[0]=rt),0):je}function Gf(m,b,_){var L=b.width,B=b.height,q=0,H=0,Y=L,Z=B;if(b.Da=m!=null&&0<m.Da,b.Da&&(Y=m.cd,Z=m.bd,q=m.v,H=m.j,11>_||(q&=-2,H&=-2),0>q||0>H||0>=Y||0>=Z||q+Y>L||H+Z>B))return 0;if(b.v=q,b.j=H,b.va=q+Y,b.o=H+Z,b.U=Y,b.T=Z,b.da=m!=null&&0<m.da,b.da){if(!jt(Y,Z,_=[m.ib],q=[m.hb]))return 0;b.ib=_[0],b.hb=q[0]}return b.ob=m!=null&&m.ob,b.Kb=m==null||!m.Sd,b.da&&(b.ob=b.ib<3*L/4&&b.hb<3*B/4,b.Kb=0),1}function Kf(m){if(m==null)return 2;if(11>m.S){var b=m.f.RGBA;b.fb+=(m.height-1)*b.A,b.A=-b.A}else b=m.f.kb,m=m.height,b.O+=(m-1)*b.fa,b.fa=-b.fa,b.N+=(m-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(m-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(m-1)*b.lb,b.lb=-b.lb);return 0}function Ru(m,b,_,L){if(L==null||0>=m||0>=b)return 2;if(_!=null){if(_.Da){var B=_.cd,q=_.bd,H=-2&_.v,Y=-2&_.j;if(0>H||0>Y||0>=B||0>=q||H+B>m||Y+q>b)return 2;m=B,b=q}if(_.da){if(!jt(m,b,B=[_.ib],q=[_.hb]))return 2;m=B[0],b=q[0]}}L.width=m,L.height=b;e:{var Z=L.width,re=L.height;if(m=L.S,0>=Z||0>=re||!(m>=Ng&&13>m))m=2;else{if(0>=L.Rd&&L.sd==null){H=q=B=b=0;var be=(Y=Z*RS[m])*re;if(11>m||(q=(re+1)/2*(b=(Z+1)/2),m==12&&(H=(B=Z)*re)),(re=i(be+2*q+H))==null){m=1;break e}L.sd=re,11>m?((Z=L.f.RGBA).eb=re,Z.fb=0,Z.A=Y,Z.size=be):((Z=L.f.kb).y=re,Z.O=0,Z.fa=Y,Z.Fd=be,Z.f=re,Z.N=0+be,Z.Ab=b,Z.Cd=q,Z.ea=re,Z.W=0+be+q,Z.Db=b,Z.Ed=q,m==12&&(Z.F=re,Z.J=0+be+2*q),Z.Tc=H,Z.lb=B)}if(b=1,B=L.S,q=L.width,H=L.height,B>=Ng&&13>B)if(11>B)m=L.f.RGBA,b&=(Y=Math.abs(m.A))*(H-1)+q<=m.size,b&=Y>=q*RS[B],b&=m.eb!=null;else{m=L.f.kb,Y=(q+1)/2,be=(H+1)/2,Z=Math.abs(m.fa),re=Math.abs(m.Ab);var Ee=Math.abs(m.Db),Le=Math.abs(m.lb),_e=Le*(H-1)+q;b&=Z*(H-1)+q<=m.Fd,b&=re*(be-1)+Y<=m.Cd,b=(b&=Ee*(be-1)+Y<=m.Ed)&Z>=q&re>=Y&Ee>=Y,b&=m.y!=null,b&=m.f!=null,b&=m.ea!=null,B==12&&(b&=Le>=q,b&=_e<=m.Tc,b&=m.F!=null)}else b=0;m=b?0:2}}return m!=0||_!=null&&_.fd&&(m=Kf(L)),m}var Cn=64,Tu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Iu=24,Fu=32,Yf=8,Na=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Q("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(m){return m},E.Predictor2=function(m,b,_){return b[_+0]},E.Predictor3=function(m,b,_){return b[_+1]},E.Predictor4=function(m,b,_){return b[_-1]},E.Predictor5=function(m,b,_){return xe(xe(m,b[_+1]),b[_+0])},E.Predictor6=function(m,b,_){return xe(m,b[_-1])},E.Predictor7=function(m,b,_){return xe(m,b[_+0])},E.Predictor8=function(m,b,_){return xe(b[_-1],b[_+0])},E.Predictor9=function(m,b,_){return xe(b[_+0],b[_+1])},E.Predictor10=function(m,b,_){return xe(xe(m,b[_-1]),xe(b[_+0],b[_+1]))},E.Predictor11=function(m,b,_){var L=b[_+0];return 0>=Fe(L>>24&255,m>>24&255,(b=b[_-1])>>24&255)+Fe(L>>16&255,m>>16&255,b>>16&255)+Fe(L>>8&255,m>>8&255,b>>8&255)+Fe(255&L,255&m,255&b)?L:m},E.Predictor12=function(m,b,_){var L=b[_+0];return(De((m>>24&255)+(L>>24&255)-((b=b[_-1])>>24&255))<<24|De((m>>16&255)+(L>>16&255)-(b>>16&255))<<16|De((m>>8&255)+(L>>8&255)-(b>>8&255))<<8|De((255&m)+(255&L)-(255&b)))>>>0},E.Predictor13=function(m,b,_){var L=b[_-1];return(Be((m=xe(m,b[_+0]))>>24&255,L>>24&255)<<24|Be(m>>16&255,L>>16&255)<<16|Be(m>>8&255,L>>8&255)<<8|Be(m>>0&255,L>>0&255))>>>0};var E1=E.PredictorAdd0;E.PredictorAdd1=st,Q("Predictor2","PredictorAdd2"),Q("Predictor3","PredictorAdd3"),Q("Predictor4","PredictorAdd4"),Q("Predictor5","PredictorAdd5"),Q("Predictor6","PredictorAdd6"),Q("Predictor7","PredictorAdd7"),Q("Predictor8","PredictorAdd8"),Q("Predictor9","PredictorAdd9"),Q("Predictor10","PredictorAdd10"),Q("Predictor11","PredictorAdd11"),Q("Predictor12","PredictorAdd12"),Q("Predictor13","PredictorAdd13");var Jf=E.PredictorAdd2;ae("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),ae("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var xg,fi=E.ColorIndexInverseTransform,Du=E.MapARGB,vg=E.VP8LColorIndexInverseTransformAlpha,yg=E.MapAlpha,Fl=E.VP8LPredictorsAdd=[];Fl.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var gd,Sa,aa,Dl,Xo,Qo,Ou,el,Ms,Zf,ia,mi,Mu,bg,Xf,xd,vd,Ol,yd,$u,bd,Ml,Qf,pi,gi,ms,ps,$s,an=i(511),tl=i(2041),em=i(225),Bu=i(767),jg=0,L1=tl,wg=em,Wa=Bu,xi=an,Ng=0,Sg=1,jS=2,_g=3,Cg=4,R1=5,wS=6,T1=7,I1=8,kg=9,F1=10,KI=[2,3,7],YI=[3,3,11],NS=[280,256,256,256,40],JI=[0,1,1,1,0],ZI=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],XI=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],QI=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],eF=8,D1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],O1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tm=null,tF=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rF=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],SS=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sF=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],nF=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],aF=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],iF=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],$l=[],Ii=[],rl=[],oF=1,_S=2,Bl=[],vi=[];He("UpsampleRgbLinePair",Lr,3),He("UpsampleBgrLinePair",Ss,3),He("UpsampleRgbaLinePair",Ti,4),He("UpsampleBgraLinePair",mn,4),He("UpsampleArgbLinePair",Bn,4),He("UpsampleRgba4444LinePair",Qs,2),He("UpsampleRgb565LinePair",Rs,2);var lF=E.UpsampleRgbLinePair,cF=E.UpsampleBgrLinePair,CS=E.UpsampleRgbaLinePair,kS=E.UpsampleBgraLinePair,AS=E.UpsampleArgbLinePair,PS=E.UpsampleRgba4444LinePair,dF=E.UpsampleRgb565LinePair,Ag=16,Pg=1<<Ag-1,rm=-227,M1=482,uF=6,ES=0,hF=i(256),fF=i(256),mF=i(256),pF=i(256),gF=i(M1-rm),xF=i(M1-rm);go("YuvToRgbRow",Lr,3),go("YuvToBgrRow",Ss,3),go("YuvToRgbaRow",Ti,4),go("YuvToBgraRow",mn,4),go("YuvToArgbRow",Bn,4),go("YuvToRgba4444Row",Qs,2),go("YuvToRgb565Row",Rs,2);var LS=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Eg=[0,2,8],vF=[8,7,6,4,4,2,2,2,1,1,1,1],yF=1;this.WebPDecodeRGBA=function(m,b,_,L,B){var q=Sg,H=new Pu,Y=new sr;H.ba=Y,Y.S=q,Y.width=[Y.width],Y.height=[Y.height];var Z=Y.width,re=Y.height,be=new Xt;if(be==null||m==null)var Ee=2;else t(be!=null),Ee=Lu(m,b,_,be.width,be.height,be.Pd,be.Qd,be.format,null);if(Ee!=0?Z=0:(Z!=null&&(Z[0]=be.width[0]),re!=null&&(re[0]=be.height[0]),Z=1),Z){Y.width=Y.width[0],Y.height=Y.height[0],L!=null&&(L[0]=Y.width),B!=null&&(B[0]=Y.height);e:{if(L=new Sn,(B=new zf).data=m,B.w=b,B.ha=_,B.kd=1,b=[0],t(B!=null),((m=Lu(B.data,B.w,B.ha,null,null,null,b,null,B))==0||m==7)&&b[0]&&(m=4),(b=m)==0){if(t(H!=null),L.data=B.data,L.w=B.w+B.offset,L.ha=B.ha-B.offset,L.put=Qt,L.ac=vt,L.bc=Zr,L.ma=H,B.xa){if((m=vr())==null){H=1;break e}if(function(Le,_e){var rt=[0],qe=[0],je=[0];t:for(;;){if(Le==null)return 0;if(_e==null)return Le.a=2,0;if(Le.l=_e,Le.a=0,V(Le.m,_e.data,_e.w,_e.ha),!Ut(Le.m,rt,qe,je)){Le.a=3;break t}if(Le.xb=_S,_e.width=rt[0],_e.height=qe[0],!Er(rt[0],qe[0],1,Le,null))break t;return 1}return t(Le.a!=0),0}(m,L)){if(L=(b=Ru(L.width,L.height,H.Oa,H.ba))==0){t:{L=m;r:for(;;){if(L==null){L=0;break t}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((_=L.l)!=null),t((B=_.ma)!=null),L.xb!=0){if(L.ca=B.ba,L.tb=B.tb,t(L.ca!=null),!Gf(B.Oa,_,_g)){L.a=2;break r}if(!as(L,_.width)||_.da)break r;if((_.da||It(L.ca.S))&&ke(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&ke()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!gt(L.s.vb,L.s.Wa.Xa)){L.a=1;break r}L.xb=0}if(!wt(L,L.V,L.Ba,L.c,L.i,_.o,Li))break r;B.Dc=L.Ma,L=1;break t}t(L.a!=0),L=0}L=!L}L&&(b=m.a)}else b=m.a}else{if((m=new ui)==null){H=1;break e}if(m.Fa=B.na,m.P=B.P,m.qc=B.Sa,ho(m,L)){if((b=Ru(L.width,L.height,H.Oa,H.ba))==0){if(m.Aa=0,_=H.Oa,t((B=m)!=null),_!=null){if(0<(Z=0>(Z=_.Md)?0:100<Z?255:255*Z/100)){for(re=be=0;4>re;++re)12>(Ee=B.pb[re]).lc&&(Ee.ia=Z*vF[0>Ee.lc?0:Ee.lc]>>3),be|=Ee.ia;be&&(alert("todo:VP8InitRandom"),B.ia=1)}B.Ga=_.Id,100<B.Ga?B.Ga=100:0>B.Ga&&(B.Ga=0)}ud(m,L)||(b=m.a)}}else b=m.a}b==0&&H.Oa!=null&&H.Oa.fd&&(b=Kf(H.ba))}H=b}q=H!=0?null:11>q?Y.f.RGBA.eb:Y.f.kb.y}else q=null;return q};var RS=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(E,I){for(var D="",P=0;P<4;P++)D+=String.fromCharCode(E[I++]);return D}function u(E,I){return(E[I+0]<<0|E[I+1]<<8|E[I+2]<<16)>>>0}function h(E,I){return(E[I+0]<<0|E[I+1]<<8|E[I+2]<<16|E[I+3]<<24)>>>0}new c;var p=[0],f=[0],y=[],g=new c,j=e,v=function(E,I){var D={},P=0,A=!1,$=0,U=0;if(D.frames=[],!function(F,M,G,ee){for(var te=0;te<ee;te++)if(F[M+te]!=G.charCodeAt(te))return!0;return!1}(E,I,"RIFF",4)){for(h(E,I+=4),I+=8;I<E.length;){var de=d(E,I),se=h(E,I+=4);I+=4;var ge=se+(1&se);switch(de){case"VP8 ":case"VP8L":D.frames[P]===void 0&&(D.frames[P]={}),(J=D.frames[P]).src_off=A?U:I-8,J.src_size=$+se+8,P++,A&&(A=!1,$=0,U=0);break;case"VP8X":(J=D.header={}).feature_flags=E[I];var V=I+4;J.canvas_width=1+u(E,V),V+=3,J.canvas_height=1+u(E,V),V+=3;break;case"ALPH":A=!0,$=ge+8,U=I-8;break;case"ANIM":(J=D.header).bgcolor=h(E,I),V=I+4,J.loop_count=(ie=E)[(T=V)+0]<<0|ie[T+1]<<8,V+=2;break;case"ANMF":var K,J;(J=D.frames[P]={}).offset_x=2*u(E,I),I+=3,J.offset_y=2*u(E,I),I+=3,J.width=1+u(E,I),I+=3,J.height=1+u(E,I),I+=3,J.duration=u(E,I),I+=3,K=E[I++],J.dispose=1&K,J.blend=K>>1&1}de!="ANMF"&&(I+=ge)}var ie,T;return D}}(j,0);v.response=j,v.rgbaoutput=!0,v.dataurl=!1;var w=v.header?v.header:null,N=v.frames?v.frames:null;if(w){w.loop_counter=w.loop_count,p=[w.canvas_height],f=[w.canvas_width];for(var C=0;C<N.length&&N[C].blend!=0;C++);}var k=N[0],O=g.WebPDecodeRGBA(j,k.src_off,k.src_size,f,p);k.rgba=O,k.imgwidth=f[0],k.imgheight=p[0];for(var R=0;R<f[0]*p[0]*4;R++)y[R]=O[R];return this.width=f,this.height=p,this.data=y,this}(function(e){var t=function(){return typeof Nw=="function"},s=function(p,f,y,g){var j=4,v=o;switch(g){case e.image_compression.FAST:j=1,v=i;break;case e.image_compression.MEDIUM:j=6,v=l;break;case e.image_compression.SLOW:j=9,v=c}p=n(p,f,y,v);var w=Nw(p,{level:j});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(p,f,y,g){for(var j,v,w,N=p.length/f,C=new Uint8Array(p.length+N),k=u(),O=0;O<N;O+=1){if(w=O*f,j=p.subarray(w,w+f),g)C.set(g(j,y,v),w+O);else{for(var R,E=k.length,I=[];R<E;R+=1)I[R]=k[R](j,y,v);var D=h(I.concat());C.set(I[D],w+O)}v=j}return C},a=function(p){var f=Array.apply([],p);return f.unshift(0),f},i=function(p,f){var y,g=[],j=p.length;g[0]=1;for(var v=0;v<j;v+=1)y=p[v-f]||0,g[v+1]=p[v]-y+256&255;return g},o=function(p,f,y){var g,j=[],v=p.length;j[0]=2;for(var w=0;w<v;w+=1)g=y&&y[w]||0,j[w+1]=p[w]-g+256&255;return j},l=function(p,f,y){var g,j,v=[],w=p.length;v[0]=3;for(var N=0;N<w;N+=1)g=p[N-f]||0,j=y&&y[N]||0,v[N+1]=p[N]+256-(g+j>>>1)&255;return v},c=function(p,f,y){var g,j,v,w,N=[],C=p.length;N[0]=4;for(var k=0;k<C;k+=1)g=p[k-f]||0,j=y&&y[k]||0,v=y&&y[k-f]||0,w=d(g,j,v),N[k+1]=p[k]-w+256&255;return N},d=function(p,f,y){if(p===f&&f===y)return p;var g=Math.abs(f-y),j=Math.abs(p-y),v=Math.abs(p+f-y-y);return g<=j&&g<=v?p:j<=v?f:y},u=function(){return[a,i,o,l,c]},h=function(p){var f=p.map(function(y){return y.reduce(function(g,j){return g+Math.abs(j)},0)});return f.indexOf(Math.min.apply(null,f))};e.processPNG=function(p,f,y,g){var j,v,w,N,C,k,O,R,E,I,D,P,A,$,U,de=this.decode.FLATE_DECODE,se="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(w=new pQ(p)).imgData,v=w.bits,j=w.colorSpace,C=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){E=(R=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,D=new Uint8Array(E*w.colors),I=new Uint8Array(E);var ge,V=w.pixelBitlength-w.bits;for($=0,U=0;$<E;$++){for(A=R[$],ge=0;ge<V;)D[U++]=A>>>ge&255,ge+=w.bits;I[$]=A>>>ge&255}}if(w.bits===16){E=(R=new Uint32Array(w.decodePixels().buffer)).length,D=new Uint8Array(E*(32/w.pixelBitlength)*w.colors),I=new Uint8Array(E*(32/w.pixelBitlength)),P=w.colors>1,$=0,U=0;for(var K=0;$<E;)A=R[$++],D[U++]=A>>>0&255,P&&(D[U++]=A>>>16&255,A=R[$++],D[U++]=A>>>0&255),I[K++]=A>>>16&255;v=8}g!==e.image_compression.NONE&&t()?(p=s(D,w.width*w.colors,w.colors,g),O=s(I,w.width,1,g)):(p=D,O=I,de=void 0)}if(w.colorType===3&&(j=this.color_spaces.INDEXED,k=w.palette,w.transparency.indexed)){var J=w.transparency.indexed,ie=0;for($=0,E=J.length;$<E;++$)ie+=J[$];if((ie/=255)===E-1&&J.indexOf(0)!==-1)N=[J.indexOf(0)];else if(ie!==E){for(R=w.decodePixels(),I=new Uint8Array(R.length),$=0,E=R.length;$<E;$++)I[$]=J[R[$]];O=s(I,w.width,1)}}var T=function(F){var M;switch(F){case e.image_compression.FAST:M=11;break;case e.image_compression.MEDIUM:M=13;break;case e.image_compression.SLOW:M=14;break;default:M=12}return M}(g);return de===this.decode.FLATE_DECODE&&(se="/Predictor "+T+" "),se+="/Colors "+C+" /BitsPerComponent "+v+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(O&&this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),{alias:y,data:p,index:f,filter:de,decodeParameters:se,transparency:N,palette:k,sMask:O,predictor:T,width:w.width,height:w.height,bitsPerComponent:v,colorSpace:j}}}})(tr.API),function(e){e.processGIF89A=function(t,s,n,a){var i=new gQ(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new S2(100).encode(d,100);return e.processJPEG.call(this,u,s,n,a)},e.processGIF87A=e.processGIF89A}(tr.API),Mi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:s,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Mi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(s){fs.log("bit decode error:"+s)}},Mi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),s=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}s!==0&&(this.pos+=4-s)}},Mi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Mi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Mi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Mi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),s=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&s)/s*255|0,d=(o>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Mi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Mi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*s;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Mi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,s,n,a){var i=new Mi(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new S2(100).encode(c,100);return e.processJPEG.call(this,d,s,n,a)}}(tr.API),P3.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,s,n,a){var i=new P3(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new S2(100).encode(c,100);return e.processJPEG.call(this,d,s,n,a)}}(tr.API),tr.API.processRGBA=function(e,t,s){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var u=n[d],h=n[d+1],p=n[d+2],f=n[d+3];i[l++]=u,i[l++]=h,i[l++]=p,o[c++]=f}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},tr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zu=tr.API,px=Zu.getCharWidthsArray=function(e,t){var s,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,p=0,f=e.length,y=0,g=l[0]||c,j=[];for(s=0;s<f;s++)n=e.charCodeAt(s),typeof a.metadata.widthOfString=="function"?j.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(p=h&&Vr(d[n])==="object"&&!isNaN(parseInt(d[n][y],10))?d[n][y]/u:0,j.push((l[n]||g)/c+p)),y=n;return j},_3=Zu.getStringUnitWidth=function(e,t){var s=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Zu.processArabic&&(e=Zu.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,s,a)/s:px.apply(this,arguments).reduce(function(i,o){return i+o},0)},C3=function(e,t,s,n){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<s;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},k3=function(e,t,s){s||(s={});var n,a,i,o,l,c,d,u=[],h=[u],p=s.textIndent||0,f=0,y=0,g=e.split(" "),j=px.apply(this,[" ",s])[0];if(c=s.lineIndent===-1?g[0].length+2:s.lineIndent||0){var v=Array(c).join(" "),w=[];g.map(function(C){(C=C.split(/\s*\n/)).length>1?w=w.concat(C.map(function(k,O){return(O&&k.length?`
`:"")+k})):w.push(C[0])}),g=w,c=_3.apply(this,[v,s])}for(i=0,o=g.length;i<o;i++){var N=0;if(n=g[i],c&&n[0]==`
`&&(n=n.substr(1),N=1),p+f+(y=(a=px.apply(this,[n,s])).reduce(function(C,k){return C+k},0))>t||N){if(y>t){for(l=C3.apply(this,[n,a,t-(p+f),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);y=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(C,k){return C+k},0)}else u=[n];h.push(u),p=y+c,f=j}else u.push(n),p+=f+y,f=j}return d=c?function(C,k){return(k?v:"")+C.join(" ")}:function(C){return C.join(" ")},h.map(d)},Zu.splitTextToSize=function(e,t,s){var n,a=(s=s||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,s);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=s.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(k3.apply(this,[n[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",s={},n={},a=0;a<t.length;a++)s[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var p,f,y,g,j=["{"];for(var v in h){if(p=h[v],isNaN(parseInt(v,10))?f="'"+v+"'":(v=parseInt(v,10),f=(f=i(v).slice(2)).slice(0,-1)+n[f.slice(-1)]),typeof p=="number")p<0?(y=i(p).slice(3),g="-"):(y=i(p).slice(2),g=""),y=g+y.slice(0,-1)+n[y.slice(-1)];else{if(Vr(p)!=="object")throw new Error("Don't know what to do with value type "+Vr(p)+".");y=o(p)}j.push(f+y)}return j.push("}"),j.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,f,y,g,j={},v=1,w=j,N=[],C="",k="",O=h.length-1,R=1;R<O;R+=1)(g=h[R])=="'"?p?(y=p.join(""),p=void 0):p=[]:p?p.push(g):g=="{"?(N.push([w,y]),w={},y=void 0):g=="}"?((f=N.pop())[0][f[1]]=w,y=void 0,w=f[0]):g=="-"?v=-1:y===void 0?s.hasOwnProperty(g)?(C+=s[g],y=parseInt(C,16)*v,v=1,C=""):C+=g:s.hasOwnProperty(g)?(k+=s[g],w[y]=parseInt(k,16)*v,v=1,y=void 0,k=""):k+=g;return j},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var p=h.font,f=u.Unicode[p.postScriptName];f&&(p.metadata.Unicode={},p.metadata.Unicode.widths=f.widths,p.metadata.Unicode.kerning=f.kerning);var y=d.Unicode[p.postScriptName];y&&(p.metadata.Unicode.encoding=y,p.encoding=y.codePages[0])}])}(tr.API),function(e){var t=function(s){for(var n=s.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=s.charCodeAt(i);return a};e.API.events.push(["addFont",function(s){var n=void 0,a=s.font,i=s.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(sp(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(tr),function(e){function t(){return(rr.canvg?Promise.resolve(rr.canvg):vw(()=>import("./index.es-C9ul8Rgz.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load canvg: "+s))}).then(function(s){return s.default?s.default:s})}tr.API.addSvgAsImage=function(s,n,a,i,o,l,c,d){if(isNaN(n)||isNaN(a))throw fs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw fs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return t().then(function(y){return y.fromString(h,s,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(p)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),n,a,i,o,c,d)})}}(),tr.API.putTotalPages=function(e){var t,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),s=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,s);return this},tr.API.viewerPreferences=function(e,t){var s;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function p(y,g){var j,v=!1;for(j=0;j<y.length;j+=1)y[j]===g&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=l.length;for(h=0;h<f;h+=1)s[l[h]].value=s[l[h]].defaultValue,s[l[h]].explicitSet=!1}if(Vr(e)==="object"){for(a in e)if(i=e[a],p(l,a)&&i!==void 0){if(s[a].type==="boolean"&&typeof i=="boolean")s[a].value=i;else if(s[a].type==="name"&&p(s[a].valueSet,i))s[a].value=i;else if(s[a].type==="integer"&&Number.isInteger(i))s[a].value=i;else if(s[a].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}s[a].value="["+c.join(" ")+"]"}else s[a].value=s[a].defaultValue;s[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,g=[];for(y in s)s[y].explicitSet===!0&&(s[y].type==="name"?g.push("/"+y+" /"+s[y].value):g.push("/"+y+" "+s[y].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},s=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutResources",t)),this}}(tr.API),function(e){var t=e.API,s=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,p=i.length;h<p;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},n=function(i){var o,l,c,d,u,h,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,p=(l=Object.keys(i).sort(function(f,y){return f-y})).length;h<p;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",y=0;y<p.length;y++)f+=String.fromCharCode(p[y]);var g=d();u({data:f,addLength1:!0,objectId:g}),c("endobj");var j=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var v=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+rh(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+rh(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+j+" 0 R"),c("/BaseFont /"+rh(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,p="",f=0;f<h.length;f++)p+=String.fromCharCode(h[f]);var y=d();u({data:p,addLength1:!0,objectId:y}),c("endobj");var g=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var j=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+rh(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+rh(l.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},p=h.pdfEscape,f=h.activeFontKey,y=h.fonts,g=f,j="",v=0,w="",N=y[g].encoding;if(y[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(w=l,g=f,Array.isArray(l)&&(w=l[0]),v=0;v<w.length;v+=1)y[g].metadata.hasOwnProperty("cmap")&&(o=y[g].metadata.cmap.unicode.codeMap[w[v].charCodeAt(0)]),o||w[v].charCodeAt(0)<256&&y[g].metadata.hasOwnProperty("Unicode")?j+=w[v]:j+="";var C="";return parseInt(g.slice(1))<14||N==="WinAnsiEncoding"?C=p(j,g).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(C=s(j,y[g])),h.isHex=!0,{text:C,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(tr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(s){return t.call(this),this.internal.vFS[s]!==void 0},e.addFileToVFS=function(s,n){return t.call(this),this.internal.vFS[s]=n,this},e.getFileFromVFS=function(s){return t.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}}(tr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,l,c,d,u,h=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,N=0;this.__bidiEngine__={};var C=function(P){var A=P.charCodeAt(),$=A>>8,U=g[$];return U!==void 0?h[256*U+(255&A)]:$===252||$===253?"AL":v.test($)?"L":$===8?"R":"N"},k=function(P){for(var A,$=0;$<P.length;$++){if((A=C(P.charAt($)))==="L")return!1;if(A==="R")return!0}return!1},O=function(P,A,$,U){var de,se,ge,V,K=A[U];switch(K){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(K="AN");break;case"AL":w=!0,K="R";break;case"WS":K="N";break;case"CS":U<1||U+1>=A.length||(de=$[U-1])!=="EN"&&de!=="AN"||(se=A[U+1])!=="EN"&&se!=="AN"?K="N":w&&(se="AN"),K=se===de?se:"N";break;case"ES":K=(de=U>0?$[U-1]:"B")==="EN"&&U+1<A.length&&A[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&$[U-1]==="EN"){K="EN";break}if(w){K="N";break}for(ge=U+1,V=A.length;ge<V&&A[ge]==="ET";)ge++;K=ge<V&&A[ge]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(V=A.length,ge=U+1;ge<V&&A[ge]==="NSM";)ge++;if(ge<V){var J=P[U],ie=J>=1425&&J<=2303||J===64286;if(de=A[ge],ie&&(de==="R"||de==="AL")){K="R";break}}}K=U<1||(de=A[U-1])==="B"?"N":$[U-1];break;case"B":w=!1,a=!0,K=N;break;case"S":i=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":K="N"}return K},R=function(P,A,$){var U=P.split("");return $&&E(U,$,{hiLevel:N}),U.reverse(),A&&A.reverse(),U.join("")},E=function(P,A,$){var U,de,se,ge,V,K=-1,J=P.length,ie=0,T=[],F=N?f:p,M=[];for(w=!1,a=!1,i=!1,de=0;de<J;de++)M[de]=C(P[de]);for(se=0;se<J;se++){if(V=ie,T[se]=O(P,M,T,se),U=240&(ie=F[V][y[T[se]]]),ie&=15,A[se]=ge=F[ie][5],U>0)if(U===16){for(de=K;de<se;de++)A[de]=1;K=-1}else K=-1;if(F[ie][6])K===-1&&(K=se);else if(K>-1){for(de=K;de<se;de++)A[de]=ge;K=-1}M[se]==="B"&&(A[se]=0),$.hiLevel|=ge}i&&function(G,ee,te){for(var me=0;me<te;me++)if(G[me]==="S"){ee[me]=N;for(var ue=me-1;ue>=0&&G[ue]==="WS";ue--)ee[ue]=N}}(M,A,J)},I=function(P,A,$,U,de){if(!(de.hiLevel<P)){if(P===1&&N===1&&!a)return A.reverse(),void($&&$.reverse());for(var se,ge,V,K,J=A.length,ie=0;ie<J;){if(U[ie]>=P){for(V=ie+1;V<J&&U[V]>=P;)V++;for(K=ie,ge=V-1;K<ge;K++,ge--)se=A[K],A[K]=A[ge],A[ge]=se,$&&(se=$[K],$[K]=$[ge],$[ge]=se);ie=V}ie++}}},D=function(P,A,$){var U=P.split(""),de={hiLevel:N};return $||($=[]),E(U,$,de),function(se,ge,V){if(V.hiLevel!==0&&u)for(var K,J=0;J<se.length;J++)ge[J]===1&&(K=j.indexOf(se[J]))>=0&&(se[J]=j[K+1])}(U,$,de),I(2,U,A,$,de),I(1,U,A,$,de),U.join("")};return this.__bidiEngine__.doBidiReorder=function(P,A,$){if(function(de,se){if(se)for(var ge=0;ge<de.length;ge++)se[ge]=ge;l===void 0&&(l=k(de)),d===void 0&&(d=k(de))}(P,A),o||!c||d)if(o&&c&&l^d)N=l?1:0,P=R(P,A,$);else if(!o&&c&&d)N=l?1:0,P=D(P,A,$),P=R(P,A);else if(!o||l||c||d){if(o&&!c&&l^d)P=R(P,A),l?(N=0,P=D(P,A,$)):(N=1,P=D(P,A,$),P=R(P,A));else if(o&&l&&!c&&d)N=1,P=D(P,A,$),P=R(P,A);else if(!o&&!c&&l^d){var U=u;l?(N=1,P=D(P,A,$),N=0,u=!1,P=D(P,A,$),u=U):(N=0,P=D(P,A,$),P=R(P,A),N=1,u=!1,P=D(P,A,$),u=U,P=R(P,A))}}else N=0,P=D(P,A,$);else N=l?1:0,P=D(P,A,$);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,d=P.isOutputRtl,u=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,s.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([s.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([s.doBidiReorder(a[l])]);n.text=o}else n.text=s.doBidiReorder(a);s.setOptions({isInputVisual:!0})}])}(tr),tr.API.TTFFont=function(){function e(t){var s;if(this.rawData=t,s=this.contents=new Xc(t),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new LQ(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new xQ(this.contents),this.head=new yQ(this),this.name=new SQ(this),this.cmap=new XT(this),this.toUnicode={},this.hhea=new bQ(this),this.maxp=new _Q(this),this.hmtx=new CQ(this),this.post=new wQ(this),this.os2=new jQ(this),this.loca=new EQ(this),this.glyf=new kQ(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,s,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(s=a>>16)&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var s;return((s=this.cmap.unicode)!=null?s.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*s},e.prototype.widthOfString=function(t,s,n){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/s)||0;return o*(s/1e3)},e.prototype.lineHeight=function(t,s){var n;return s==null&&(s=!1),n=s?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var uo,Xc=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var s,n;for(n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n[s]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var s,n,a;for(a=[],s=0,n=t.length;0<=n?s<n:s>n;s=0<=n?++s:--s)a.push(this.writeByte(t.charCodeAt(s)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,s,n,a,i,o,l,c;return t=this.readByte(),s=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^s)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*s+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var s,n;return s=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var s,n;for(s=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)s.push(this.readByte());return s},e.prototype.write=function(t){var s,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)s=t[n],i.push(this.writeByte(s));return i},e}(),xQ=function(){var e;function t(s){var n,a,i;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(s){var n,a,i,o,l,c,d,u,h,p,f,y,g;for(g in f=Object.keys(s).length,c=Math.log(2),h=16*Math.floor(Math.log(f)/c),o=Math.floor(h/c),u=16*f-h,(a=new Xc).writeInt(this.scalarType),a.writeShort(f),a.writeShort(h),a.writeShort(o),a.writeShort(u),i=16*f,d=a.pos+i,l=null,y=[],s)for(p=s[g],a.writeString(g),a.writeInt(e(p)),a.writeInt(d),a.writeInt(p.length),y=y.concat(p),g==="head"&&(l=d),d+=p.length;d%4;)y.push(0),d++;return a.write(y),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(s){var n,a,i,o;for(s=QT.call(s);s.length%4;)s.push(0);for(i=new Xc(s),a=0,n=0,o=s.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),vQ={}.hasOwnProperty,Wo=function(e,t){for(var s in t)vQ.call(t,s)&&(e[s]=t[s]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};uo=function(){function e(t){var s;this.file=t,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var yQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="head",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.revision=s.readInt(),this.checkSumAdjustment=s.readInt(),this.magicNumber=s.readInt(),this.flags=s.readShort(),this.unitsPerEm=s.readShort(),this.created=s.readLongLong(),this.modified=s.readLongLong(),this.xMin=s.readShort(),this.yMin=s.readShort(),this.xMax=s.readShort(),this.yMax=s.readShort(),this.macStyle=s.readShort(),this.lowestRecPPEM=s.readShort(),this.fontDirectionHint=s.readShort(),this.indexToLocFormat=s.readShort(),this.glyphDataFormat=s.readShort()},t.prototype.encode=function(s){var n;return(n=new Xc).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(s),n.writeShort(this.glyphDataFormat),n.data},t}(),E3=function(){function e(t,s){var n,a,i,o,l,c,d,u,h,p,f,y,g,j,v,w,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=s+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),p=f/2,t.pos+=6,i=function(){var C,k;for(k=[],c=C=0;0<=p?C<p:C>p;c=0<=p?++C:--C)k.push(t.readUInt16());return k}(),t.pos+=2,g=function(){var C,k;for(k=[],c=C=0;0<=p?C<p:C>p;c=0<=p?++C:--C)k.push(t.readUInt16());return k}(),d=function(){var C,k;for(k=[],c=C=0;0<=p?C<p:C>p;c=0<=p?++C:--C)k.push(t.readUInt16());return k}(),u=function(){var C,k;for(k=[],c=C=0;0<=p?C<p:C>p;c=0<=p?++C:--C)k.push(t.readUInt16());return k}(),a=(this.length-t.pos+this.offset)/2,l=function(){var C,k;for(k=[],c=C=0;0<=a?C<a:C>a;c=0<=a?++C:--C)k.push(t.readUInt16());return k}(),c=v=0,N=i.length;v<N;c=++v)for(j=i[c],n=w=y=g[c];y<=j?w<=j:w>=j;n=y<=j?++w:--w)u[c]===0?o=n+d[c]:(o=l[u[c]/2+(n-y)-(p-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=h}return e.encode=function(t,s){var n,a,i,o,l,c,d,u,h,p,f,y,g,j,v,w,N,C,k,O,R,E,I,D,P,A,$,U,de,se,ge,V,K,J,ie,T,F,M,G,ee,te,me,ue,ce,Ce,Ue;switch(U=new Xc,o=Object.keys(t).sort(function(Ge,gt){return Ge-gt}),s){case"macroman":for(g=0,j=function(){var Ge=[];for(y=0;y<256;++y)Ge.push(0);return Ge}(),w={0:0},i={},de=0,K=o.length;de<K;de++)w[ue=t[a=o[de]]]==null&&(w[ue]=++g),i[a]={old:t[a],new:w[t[a]]},j[a]=w[t[a]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(j),{charMap:i,subtable:U.data,maxGlyphID:g+1};case"unicode":for(A=[],h=[],N=0,w={},n={},v=d=null,se=0,J=o.length;se<J;se++)w[k=t[a=o[se]]]==null&&(w[k]=++N),n[a]={old:k,new:w[k]},l=w[k]-a,v!=null&&l===d||(v&&h.push(v),A.push(a),d=l),v=a;for(v&&h.push(v),h.push(65535),A.push(65535),D=2*(I=A.length),E=2*Math.pow(Math.log(I)/Math.LN2,2),p=Math.log(E/2)/Math.LN2,R=2*I-E,c=[],O=[],f=[],y=ge=0,ie=A.length;ge<ie;y=++ge){if(P=A[y],u=h[y],P===65535){c.push(0),O.push(0);break}if(P-($=n[P].new)>=32768)for(c.push(0),O.push(2*(f.length+I-y)),a=V=P;P<=u?V<=u:V>=u;a=P<=u?++V:--V)f.push(n[a].new);else c.push($-P),O.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*I+2*f.length),U.writeUInt16(0),U.writeUInt16(D),U.writeUInt16(E),U.writeUInt16(p),U.writeUInt16(R),te=0,T=h.length;te<T;te++)a=h[te],U.writeUInt16(a);for(U.writeUInt16(0),me=0,F=A.length;me<F;me++)a=A[me],U.writeUInt16(a);for(ce=0,M=c.length;ce<M;ce++)l=c[ce],U.writeUInt16(l);for(Ce=0,G=O.length;Ce<G;Ce++)C=O[Ce],U.writeUInt16(C);for(Ue=0,ee=f.length;Ue<ee;Ue++)g=f[Ue],U.writeUInt16(g);return{charMap:n,subtable:U.data,maxGlyphID:N+1}}},e}(),XT=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="cmap",t.prototype.parse=function(s){var n,a,i;for(s.pos=this.offset,this.version=s.readUInt16(),i=s.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new E3(s,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(s,n){var a,i;return n==null&&(n="macroman"),a=E3.encode(s,n),(i=new Xc).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),bQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="hhea",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.ascender=s.readShort(),this.decender=s.readShort(),this.lineGap=s.readShort(),this.advanceWidthMax=s.readShort(),this.minLeftSideBearing=s.readShort(),this.minRightSideBearing=s.readShort(),this.xMaxExtent=s.readShort(),this.caretSlopeRise=s.readShort(),this.caretSlopeRun=s.readShort(),this.caretOffset=s.readShort(),s.pos+=8,this.metricDataFormat=s.readShort(),this.numberOfMetrics=s.readUInt16()},t}(),jQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="OS/2",t.prototype.parse=function(s){if(s.pos=this.offset,this.version=s.readUInt16(),this.averageCharWidth=s.readShort(),this.weightClass=s.readUInt16(),this.widthClass=s.readUInt16(),this.type=s.readShort(),this.ySubscriptXSize=s.readShort(),this.ySubscriptYSize=s.readShort(),this.ySubscriptXOffset=s.readShort(),this.ySubscriptYOffset=s.readShort(),this.ySuperscriptXSize=s.readShort(),this.ySuperscriptYSize=s.readShort(),this.ySuperscriptXOffset=s.readShort(),this.ySuperscriptYOffset=s.readShort(),this.yStrikeoutSize=s.readShort(),this.yStrikeoutPosition=s.readShort(),this.familyClass=s.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(s.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(s.readInt());return a}(),this.vendorID=s.readString(4),this.selection=s.readShort(),this.firstCharIndex=s.readShort(),this.lastCharIndex=s.readShort(),this.version>0&&(this.ascent=s.readShort(),this.descent=s.readShort(),this.lineGap=s.readShort(),this.winAscent=s.readShort(),this.winDescent=s.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(s.readInt());return a}(),this.version>1))return this.xHeight=s.readShort(),this.capHeight=s.readShort(),this.defaultChar=s.readShort(),this.breakChar=s.readShort(),this.maxContext=s.readShort()},t}(),wQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="post",t.prototype.parse=function(s){var n,a,i;switch(s.pos=this.offset,this.format=s.readInt(),this.italicAngle=s.readInt(),this.underlinePosition=s.readShort(),this.underlineThickness=s.readShort(),this.isFixedPitch=s.readInt(),this.minMemType42=s.readInt(),this.maxMemType42=s.readInt(),this.minMemType1=s.readInt(),this.maxMemType1=s.readInt(),this.format){case 65536:break;case 131072:var o;for(a=s.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(s.readUInt16());for(this.names=[],i=[];s.pos<this.offset+this.length;)n=s.readByte(),i.push(this.names.push(s.readString(n)));return i;case 151552:return a=s.readUInt16(),this.offsets=s.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(s.readUInt32());return d}).call(this)}},t}(),NQ=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},SQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="name",t.prototype.parse=function(s){var n,a,i,o,l,c,d,u,h,p,f;for(s.pos=this.offset,s.readShort(),n=s.readShort(),c=s.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:s.readShort(),encodingID:s.readShort(),languageID:s.readShort(),nameID:s.readShort(),length:s.readShort(),offset:this.offset+c+s.readShort()});for(d={},o=h=0,p=a.length;h<p;o=++h)i=a[o],s.pos=i.offset,u=s.readString(i.length),l=new NQ(u,i),d[f=i.nameID]==null&&(d[f]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),_Q=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="maxp",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.numGlyphs=s.readUInt16(),this.maxPoints=s.readUInt16(),this.maxContours=s.readUInt16(),this.maxCompositePoints=s.readUInt16(),this.maxComponentContours=s.readUInt16(),this.maxZones=s.readUInt16(),this.maxTwilightPoints=s.readUInt16(),this.maxStorage=s.readUInt16(),this.maxFunctionDefs=s.readUInt16(),this.maxInstructionDefs=s.readUInt16(),this.maxStackElements=s.readUInt16(),this.maxSizeOfInstructions=s.readUInt16(),this.maxComponentElements=s.readUInt16(),this.maxComponentDepth=s.readUInt16()},t}(),CQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="hmtx",t.prototype.parse=function(s){var n,a,i,o,l,c,d;for(s.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:s.readUInt16(),lsb:s.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)h.push(s.readInt16());return h}(),this.widths=(function(){var u,h,p,f;for(f=[],u=0,h=(p=this.metrics).length;u<h;u++)o=p[u],f.push(o.advance);return f}).call(this),a=this.widths[this.widths.length-1],d=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(s){return s in this.metrics?this.metrics[s]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[s-this.metrics.length]}},t}(),QT=[].slice,kQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(s){var n,a,i,o,l,c,d,u,h,p;return s in this.cache?this.cache[s]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(s),(i=o.lengthOf(s))===0?this.cache[s]=null:(n.pos=this.offset+a,l=(c=new Xc(n.read(i))).readShort(),u=c.readShort(),p=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[s]=l===-1?new PQ(c,u,p,d,h):new AQ(c,l,u,p,d,h),this.cache[s]))},t.prototype.encode=function(s,n,a){var i,o,l,c,d;for(l=[],o=[],c=0,d=n.length;c<d;c++)i=s[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),AQ=function(){function e(t,s,n,a,i,o){this.raw=t,this.numberOfContours=s,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),PQ=function(){function e(t,s,n,a,i){var o,l;for(this.raw=t,this.xMin=s,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,s,n;for(s=new Xc(QT.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)s.pos=this.glyphOffsets[t];return s.data},e}(),EQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Wo(t,uo),t.prototype.tag="loca",t.prototype.parse=function(s){var n,a;return s.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*s.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(s.readUInt32());return o}).call(this)},t.prototype.indexOf=function(s){return this.offsets[s]},t.prototype.lengthOf=function(s){return this.offsets[s+1]-this.offsets[s]},t.prototype.encode=function(s,n){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<n.length&&n[o]==l){++o,a[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*a.length),h=0;h<a.length;++h)u[4*h+3]=255&a[h],u[4*h+2]=(65280&a[h])>>8,u[4*h+1]=(16711680&a[h])>>16,u[4*h]=(4278190080&a[h])>>24;return u},t}(),LQ=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,s,n,a,i;for(s in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[s],t[s]=a[n];return t},e.prototype.glyphsFor=function(t){var s,n,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in s=[],a)(n=a[i])!=null&&n.compound&&s.push.apply(s,n.glyphIDs);if(s.length>0)for(i in c=this.glyphsFor(s))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,s){var n,a,i,o,l,c,d,u,h,p,f,y,g,j,v;for(a in n=XT.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},v=n.charMap)f[(c=v[a]).old]=c.new;for(y in p=n.maxGlyphID,o)y in f||(f[y]=p++);return u=function(w){var N,C;for(N in C={},w)C[w[N]]=N;return C}(f),h=Object.keys(u).sort(function(w,N){return w-N}),g=function(){var w,N,C;for(C=[],w=0,N=h.length;w<N;w++)l=h[w],C.push(u[l]);return C}(),i=this.font.glyf.encode(o,g,f),d=this.font.loca.encode(i.offsets,g),j={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},e}();tr.API.PDFObject=function(){var e;function t(){}return e=function(s,n){return(Array(n+1).join("0")+s).slice(-n)},t.convert=function(s){var n,a,i,o;if(Array.isArray(s))return"["+function(){var l,c,d;for(d=[],l=0,c=s.length;l<c;l++)n=s[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s!=null&&s.isString)return"("+s+")";if(s instanceof Date)return"(D:"+e(s.getUTCFullYear(),4)+e(s.getUTCMonth(),2)+e(s.getUTCDate(),2)+e(s.getUTCHours(),2)+e(s.getUTCMinutes(),2)+e(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(a in i=["<<"],s)o=s[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+s},t}();function eI(e,t,s,n,a){n=n||{};var i=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():i,d=l*c,u=/\r\n|\r|\n/g,h="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof e=="string"?e.split(u):e,p=h.length||1),s+=l*(2-i),n.valign==="middle"?s-=p/2*d:n.valign==="bottom"&&(s-=p*d),n.halign==="center"||n.halign==="right"){var f=l;if(n.halign==="center"&&(f*=.5),h&&p>=1){for(var y=0;y<h.length;y++)a.text(h[y],t-a.getStringUnitWidth(h[y])*f,s),s+=d;return a}t-=a.getStringUnitWidth(e)*f}return n.halign==="justify"?a.text(e,t,s,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,s),a}var L3={},Uh=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,s){s===void 0&&(s=null),s?s.__autoTableDocumentDefaults=t:L3=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,s){var n,a,i;s===void 0&&(s=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!s){var u=e.unifyColor(t.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=e.unifyColor(t.textColor),u&&(a=this.jsPDFDocument).setTextColor.apply(a,u),u=e.unifyColor(t.lineColor),u&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,s,n){return this.jsPDFDocument.splitTextToSize(t,s,n)},e.prototype.rect=function(t,s,n,a,i){return this.jsPDFDocument.rect(t,s,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return L3||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Ew=function(e,t){return Ew=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])},Ew(e,t)};function tI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ew(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}var rI=function(e){tI(t,e);function t(s){var n=e.call(this)||this;return n._element=s,n}return t}(Array);function RQ(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function TQ(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Ev(e,t,s){s.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return s.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return a}function sI(e,t,s,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var o=nI(a,!1);o&&e.rect(s.x,s.y,t.getWidth(e.pageSize().width),n.y-s.y,o)}function nI(e,t){var s=e>0,n=t||t===0;return s&&n?"DF":s?"S":n?"F":null}function d1(e,t){var s,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(s=e.left)!==null&&s!==void 0?s:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function aI(e,t){var s=d1(t.settings.margin,0);return e.pageSize().width-(s.left+s.right)}function IQ(e,t,s,n,a){var i={},o=1.3333333333333333,l=_2(t,function(N){return a.getComputedStyle(N).backgroundColor});l!=null&&(i.fillColor=l);var c=_2(t,function(N){return a.getComputedStyle(N).color});c!=null&&(i.textColor=c);var d=DQ(n,s);d&&(i.cellPadding=d);var u="borderTopColor",h=o*s,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var f=(parseFloat(p)||0)/h;f&&(i.lineWidth=f)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var y=_2(t,function(N){return a.getComputedStyle(N)[u]});y!=null&&(i.lineColor=y);var g=["left","right","center","justify"];g.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),g=["middle","bottom","top"],g.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var j=parseInt(n.fontSize||"");isNaN(j)||(i.fontSize=j/o);var v=FQ(n);v&&(i.fontStyle=v);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(i.font=w),i}function FQ(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function _2(e,t){var s=iI(e,t);if(!s)return null;var n=s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function iI(e,t){var s=t(e);return s==="rgba(0, 0, 0, 0)"||s==="transparent"||s==="initial"||s==="inherit"?e.parentElement==null?null:iI(e.parentElement,t):s}function DQ(e,t){var s=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=s.map(function(l){return parseInt(l||"0")/n}),o=d1(i,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function oI(e,t,s,n,a){var i,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=s.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],h=[],p=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:p};for(var f=0;f<l.rows.length;f++){var y=l.rows[f],g=(o=(i=y==null?void 0:y.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),j=OQ(c,d,s,y,n,a);j&&(g==="thead"?u.push(j):g==="tfoot"?p.push(j):h.push(j))}return{head:u,body:h,foot:p}}function OQ(e,t,s,n,a,i){for(var o=new rI(n),l=0;l<n.cells.length;l++){var c=n.cells[l],d=s.getComputedStyle(c);if(a||d.display!=="none"){var u=void 0;i&&(u=IQ(e,c,t,d,s)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:MQ(c)})}}var h=s.getComputedStyle(n);if(o.length>0&&(a||h.display!=="none"))return o}function MQ(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(s){return s.trim()}).join(`
`),t.innerText||t.textContent||""}function $Q(e,t,s){for(var n=0,a=[e,t,s];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function gl(e,t,s,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function lI(e,t){var s=new Uh(e),n=s.getDocumentOptions(),a=s.getGlobalOptions();$Q(a,n,t);var i=gl({},a,n,t),o;typeof window<"u"&&(o=window);var l=BQ(a,n,t),c=zQ(a,n,t),d=UQ(s,i),u=VQ(s,i,o);return{id:t.tableId,content:u,hooks:c,styles:l,settings:d}}function BQ(e,t,s){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var d=e[c],u=t[c],h=s[c];n.columnStyles=gl({},d,u,h)}else{var p=[e,t,s],f=p.map(function(y){return y[c]||{}});n[c]=gl({},f[0],f[1],f[2])}},i=0,o=Object.keys(n);i<o.length;i++){var l=o[i];a(l)}return n}function zQ(e,t,s){for(var n=[e,t,s],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var l=o[i];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function UQ(e,t){var s,n,a,i,o,l,c,d,u,h,p,f,y=d1(t.margin,40/e.scaleFactor()),g=(s=qQ(e,t.startY))!==null&&s!==void 0?s:y.top,j;t.showFoot===!0?j="everyPage":t.showFoot===!1?j="never":j=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var v;t.showHead===!0?v="everyPage":t.showHead===!1?v="never":v=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(i=t.useCss)!==null&&i!==void 0?i:!1,N=t.theme||(w?"plain":"striped"),C=!!t.horizontalPageBreak,k=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:w,theme:N,startY:g,margin:y,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:v,showFoot:j,tableLineWidth:(h=t.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:C,horizontalPageBreakRepeat:k,horizontalPageBreakBehaviour:(f=t.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function qQ(e,t){var s=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(s&&s.startPageNumber){var o=s.startPageNumber+s.pageNumber-1;i=o===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(s==null?void 0:s.finalY)!=null?s.finalY+20/n:null}function VQ(e,t,s){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(s){var l=oI(e,t.html,s,o,t.useCss)||{};n=l.head||n,a=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||HQ(n,a,i);return{columns:c,head:n,body:a,foot:i}}function HQ(e,t,s){var n=e[0]||t[0]||s[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(n)?l=n[parseInt(i)]:l=n[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(n)?d=a.length:d=i+(c>0?"_".concat(c):"");var u={dataKey:d};a.push(u)}}),a}var Lw=function(){function e(t,s,n){this.table=s,this.pageNumber=s.pageNumber,this.settings=s.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),WQ=function(e){tI(t,e);function t(s,n,a,i,o,l){var c=e.call(this,s,n,l)||this;return c.cell=a,c.row=i,c.column=o,c.section=i.section,c}return t}(Lw),GQ=function(){function e(t,s){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=s.columns,this.head=s.head,this.body=s.body,this.foot=s.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(s,n){return s+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(s,n){return s+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,s,n,a,i,o){for(var l=0,c=s;l<c.length;l++){var d=c[l],u=new WQ(t,this,n,a,i,o),h=d(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},e.prototype.callEndPageHooks=function(t,s){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new Lw(t,this,s))}},e.prototype.callWillDrawPageHooks=function(t,s){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new Lw(t,this,s))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var s=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return s}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),cI=function(){function e(t,s,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof rI&&(this.raw=t._element,this.element=t._element),this.index=s,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var s=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=s.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var s=this;return t.filter(function(n){var a=s.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,s){return this.getMaxCellHeight(s)<=t},e.prototype.getMinimumRowHeight=function(t,s){var n=this;return t.reduce(function(a,i){var o=n.cells[i.index];if(!o)return 0;var l=s.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>a?d:a},0)},e}(),dI=function(){function e(t,s,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=s,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var s=this.height-this.padding("vertical");t=this.y+s/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,s){s===void 0&&(s=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*s,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var s=d1(this.styles.cellPadding,0);return t==="vertical"?s.top+s.bottom:t==="horizontal"?s.left+s.right:s[t]},e}(),KQ=function(){function e(t,s,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=s,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var s=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(s=Math.max(s,o.styles.cellWidth))}return s},e}();function YQ(e,t){JQ(e,t);var s=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,s.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=Rw(s,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=Rw(s,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),XQ(t),QQ(t,e),ZQ(t)}function JQ(e,t){var s=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=aI(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,i,c,null);var h=d.padding("horizontal");d.contentWidth=Ev(d.text,d.styles,e)+h;var p=Ev(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=p+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||n===!0)d.contentWidth>a?(d.minWidth=a,d.wrappedWidth=a):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var f=10/s;d.minWidth=d.styles.minCellWidth||f,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function Rw(e,t,s){for(var n=t,a=e.reduce(function(f,y){return f+y.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/a,c=n*l,d=o.width+c,u=s(o),h=d<u?u:d;t-=h-o.width,o.width=h}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(f){return t<0?f.width>s(f):!0});p.length&&(t=Rw(p,t,s))}return t}function ZQ(e){for(var t={},s=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(s>1)s--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,s=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var u=i.cells[c.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var h=n.length-a,p=u.rowSpan>h?h:u.rowSpan;t[c.index]={cell:u,left:p,row:i}}}}}function XQ(e){for(var t=e.allRows(),s=0;s<t.length;s++)for(var n=t[s],a=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete n.cells[c.index];else if(a){var d=a;delete n.cells[c.index],a=null,d.width=c.width+i}else{var d=n.cells[c.index];if(!d)continue;if(o=d.colSpan,i=0,d.colSpan>1){a=d,i+=c.width;continue}d.width=c.width+i}}}function QQ(e,t){for(var s={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=R3(d.text,u,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=R3(d.text,u,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var h=d.styles.overflow(d.text,u);typeof h=="string"?d.text=[h]:d.text=h}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=d.contentHeight/d.rowSpan;d.rowSpan>1&&s.count*s.height<p*d.rowSpan?s={height:p,count:d.rowSpan}:s&&s.count>0&&s.height>p&&(p=s.height),p>i.height&&(i.height=p)}}s.count--}}function R3(e,t,s,n,a){return e.map(function(i){return eee(i,t,s,n,a)})}function eee(e,t,s,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Ev(e,s,n))return e;for(;t<Ev(e+a,s,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function uI(e,t){var s=new Uh(e),n=tee(t,s.scaleFactor()),a=new GQ(t,n);return YQ(s,a),s.applyStyles(s.userStyles),a}function tee(e,t){var s=e.content,n=see(s.columns);if(s.head.length===0){var a=T3(n,"head");a&&s.head.push(a)}if(s.foot.length===0){var a=T3(n,"foot");a&&s.foot.push(a)}var i=e.settings.theme,o=e.styles;return{columns:n,head:C2("head",s.head,n,o,i,t),body:C2("body",s.body,n,o,i,t),foot:C2("foot",s.foot,n,o,i,t)}}function C2(e,t,s,n,a,i){var o={},l=t.map(function(c,d){for(var u=0,h={},p=0,f=0,y=0,g=s;y<g.length;y++){var j=g[y];if(o[j.index]==null||o[j.index].left===0)if(f===0){var v=void 0;Array.isArray(c)?v=c[j.index-p-u]:v=c[j.dataKey];var w={};typeof v=="object"&&!Array.isArray(v)&&(w=(v==null?void 0:v.styles)||{});var N=nee(e,j,d,a,n,i,w),C=new dI(v,N,e);h[j.dataKey]=C,h[j.index]=C,f=C.colSpan-1,o[j.index]={left:C.rowSpan-1,times:f}}else f--,p++;else o[j.index].left--,f=o[j.index].times,u++}return new cI(c,d,e,h)});return l}function T3(e,t){var s={};return e.forEach(function(n){if(n.raw!=null){var a=ree(t,n.raw);a!=null&&(s[n.dataKey]=a)}}),Object.keys(s).length>0?s:null}function ree(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function see(e){return e.map(function(t,s){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:s:a=s,new KQ(a,t,s)})}function nee(e,t,s,n,a,i,o){var l=TQ(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var d=gl({},l.table,l[e],a.styles,c),u=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},h=e==="body"?u:{},p=e==="body"&&s%2===0?gl({},l.alternateRow,a.alternateRowStyles):{},f=RQ(i),y=gl({},f,d,p,h);return gl(y,o)}function aee(e,t,s){var n;s===void 0&&(s={});var a=aI(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var f=t.columns.find(function(y){return y.dataKey===p||y.index===p});f&&!i.has(f.index)&&(i.set(f.index,!0),o.push(f.index),l.push(t.columns[f.index]),a-=f.wrappedWidth)});for(var d=!0,u=(n=s==null?void 0:s.start)!==null&&n!==void 0?n:0;u<t.columns.length;){if(i.has(u)){u++;continue}var h=t.columns[u].wrappedWidth;if(d||a>=h)d=!1,o.push(u),l.push(t.columns[u]),a-=h;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function iee(e,t){for(var s=[],n=0;n<t.columns.length;n++){var a=aee(e,t,{start:n});a.columns.length&&(s.push(a),n=a.lastIndex)}return s}function hI(e,t){var s=t.settings,n=s.startY,a=s.margin,i={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(s.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(p,f){return p+f.height},0);l+=d}var u=new Uh(e);(s.pageBreak==="always"||s.startY!=null&&l>u.pageSize().height)&&(mI(u),i.y=a.top),t.callWillDrawPageHooks(u,i);var h=gl({},i);t.startPageNumber=u.pageNumber(),s.horizontalPageBreak?oee(u,t,h,i):(u.applyStyles(u.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(p){return Al(u,t,p,i,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(p,f){var y=f===t.body.length-1;Lv(u,t,p,y,h,i,t.columns)}),u.applyStyles(u.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(p){return Al(u,t,p,i,t.columns)})),sI(u,t,h,i),t.callEndPageHooks(u,i),t.finalY=i.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function oee(e,t,s,n){var a=iee(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(d,u){e.applyStyles(e.userStyles),u>0?np(e,t,s,n,d.columns,!0):I3(e,t,n,d.columns),lee(e,t,s,n,d.columns),k2(e,t,n,d.columns)});else for(var o=-1,l=a[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var u=l.columns;o>=0?np(e,t,s,n,u,!0):I3(e,t,n,u),d=F3(e,t,o+1,n,u),k2(e,t,n,u)}var h=d-o;a.slice(1).forEach(function(p){e.applyStyles(e.userStyles),np(e,t,s,n,p.columns,!0),F3(e,t,o+1,n,p.columns,h),k2(e,t,n,p.columns)}),o=d};o<t.body.length-1;)c()}function I3(e,t,s,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return Al(e,t,i,s,n)})}function lee(e,t,s,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;Lv(e,t,i,l,s,n,a)})}function F3(e,t,s,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(s+i,t.body.length),l=-1;return t.body.slice(s,o).forEach(function(c,d){var u=s+d===t.body.length-1,h=fI(e,t,u,n);c.canEntireRowFit(h,a)&&(Al(e,t,c,n,a),l=s+d)}),l}function k2(e,t,s,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return Al(e,t,i,s,n)})}function cee(e,t,s){var n=s.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function dee(e,t,s,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=s.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new dI(d.raw,d.styles,d.section);u=gl(u,d),u.text=[];var h=cee(d,t,n);d.text.length>h&&(u.text=d.text.splice(h,d.text.length));var p=n.scaleFactor(),f=n.getLineHeightFactor();d.contentHeight=d.getContentHeight(p,f),d.contentHeight>=t&&(d.contentHeight=t,u.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),u.contentHeight=u.getContentHeight(p,f),u.contentHeight>i&&(i=u.contentHeight),a[c.index]=u}}var y=new cI(e.raw,-1,e.section,a,!0);y.height=i;for(var g=0,j=s.columns;g<j.length;g++){var c=j[g],u=y.cells[c.index];u&&(u.height=y.height);var d=e.cells[c.index];d&&(d.height=e.height)}return y}function uee(e,t,s,n){var a=e.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),d=c<s;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=t.hasRowSpan(n.columns),h=t.getMaxCellHeight(n.columns)>l;return h?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function Lv(e,t,s,n,a,i,o){var l=fI(e,t,n,i);if(s.canEntireRowFit(l,o))Al(e,t,s,i,o);else if(uee(e,s,l,t)){var c=dee(s,l,t,e);Al(e,t,s,i,o),np(e,t,a,i,o),Lv(e,t,c,n,a,i,o)}else np(e,t,a,i,o),Lv(e,t,s,n,a,i,o)}function Al(e,t,s,n,a){n.x=t.settings.margin.left;for(var i=0,o=a;i<o.length;i++){var l=o[i],c=s.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,s,l,n);if(d===!1){n.x+=l.width;continue}hee(e,c,n);var u=c.getTextPos();eI(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,s,l,n),n.x+=l.width}n.y+=s.height}function hee(e,t,s){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=nI(n.lineWidth,n.fillColor);a&&e.rect(t.x,s.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,s.y,t.width,t.height,"F"),fee(e,t,s,n.lineWidth))}function fee(e,t,s,n){var a,i,o,l;n.top&&(a=s.x,i=s.y,o=s.x+t.width,l=s.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,o,l)),n.bottom&&(a=s.x,i=s.y+t.height,o=s.x+t.width,l=s.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,o,l)),n.left&&(a=s.x,i=s.y,o=s.x,l=s.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,i,o,l)),n.right&&(a=s.x+t.width,i=s.y,o=s.x+t.width,l=s.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,i,o,l));function c(d,u,h,p,f){e.getDocument().setLineWidth(d),e.getDocument().line(u,h,p,f,"S")}}function fI(e,t,s,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&s)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function np(e,t,s,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return Al(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;sI(e,t,s,n),mI(e),t.pageNumber++,n.x=o.left,n.y=o.top,s.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Al(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function mI(e){var t=e.pageNumber();e.setPage(t+1);var s=e.pageNumber();return s===t?(e.addPage(),!0):!1}function mee(e){e.API.autoTable=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var n=t[0],a=lI(this,n),i=uI(this,a);return hI(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,s,n,a){eI(t,s,n,a,this)},e.API.autoTableSetDefaults=function(t){return Uh.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,s){Uh.setDefaults(t,s)},e.API.autoTableHtmlToJson=function(t,s){var n;if(s===void 0&&(s=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Uh(this),i=oI(a,t,window,s,!1),o=i.head,l=i.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var A2;function pI(e,t){var s=lI(e,t),n=uI(e,s);hI(e,n)}try{if(typeof window<"u"&&window){var D3=window,O3=D3.jsPDF||((A2=D3.jspdf)===null||A2===void 0?void 0:A2.jsPDF);O3&&mee(O3)}}catch(e){console.error("Could not apply autoTable plugin",e)}const mS=e=>{const t=new tr;return t.setFontSize(20),t.setTextColor(0,0,0),t.text(e.title,14,22),e.subtitle&&(t.setFontSize(12),t.setTextColor(100,100,100),t.text(e.subtitle,14,32)),t.setFontSize(10),t.setTextColor(100,100,100),t.text(`Generated on: ${new Date().toLocaleDateString()}`,14,42),pI(t,{head:[e.headers],body:e.rows,startY:50,styles:{fontSize:10,cellPadding:5},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),t},gI=e=>{const t=new tr;t.setFontSize(24),t.text("INVOICE",105,20,{align:"center"}),t.setFontSize(12),t.text(`Invoice ID: ${e.invoice_id||e.id}`,14,40),t.text(`Status: ${e.status.toUpperCase()}`,14,50),t.text(`School: ${e.school_name||`School ${e.school}`}`,14,60),t.text(`Subscription Plan: ${e.subscription_plan||"N/A"}`,14,70),t.text(`Invoice Date: ${new Date(e.invoice_date).toLocaleDateString()}`,14,80),t.text(`Due Date: ${new Date(e.due_date).toLocaleDateString()}`,14,90),e.paid_at&&t.text(`Paid Date: ${new Date(e.paid_at).toLocaleDateString()}`,14,100),t.text(`Amount Due: ${e.currency} ${e.amount_due}`,14,110),parseFloat(e.amount_paid)>0&&t.text(`Amount Paid: ${e.currency} ${e.amount_paid}`,14,120);const s=e.line_items.map(a=>[a.description,a.quantity.toString(),`${e.currency} ${a.unit_price}`,`${e.currency} ${a.total}`]);pI(t,{head:[["Description","Quantity","Unit Price","Total"]],body:s,startY:140,styles:{fontSize:10,cellPadding:5},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"}});const n=e.line_items.reduce((a,i)=>a+i.total,0);return t.setFontSize(14),t.text(`Total Amount: ${e.currency} ${n}`,14,200),t},pS=e=>{const t=new tr;return t.setFontSize(24),t.text("SUBSCRIPTION DETAILS",105,20,{align:"center"}),t.setFontSize(12),t.text(`Subscription ID: ${e.id}`,14,40),t.text(`School: ${e.school_name}`,14,50),t.text(`Plan: ${e.plan_name}`,14,60),t.text(`Status: ${e.status.toUpperCase()}`,14,70),t.text(`Billing Cycle: ${e.billing_cycle}`,14,80),t.text(`Price: ${e.price_charged}`,14,90),t.setFontSize(14),t.text("Usage Statistics",14,110),t.setFontSize(12),t.text(`Students: ${e.current_students_count}`,14,120),t.text(`Buses: ${e.current_buses_count}`,14,130),t.text(`Parents: ${e.current_parents_count}`,14,140),t},Qc=(e,t)=>{e.save(t)},pee=()=>{var K;const e=ns(),{subscriptions:t,loading:s,error:n}=At(J=>J.schoolSubscriptions),{schools:a}=At(J=>J.schools),{user:i}=At(J=>J.auth),{toast:o}=Zs(),[l,c]=x.useState(""),[d,u]=x.useState("all"),[h,p]=x.useState("all"),[f,y]=x.useState("all"),[g,j]=x.useState(null),[v,w]=x.useState(!1),N=x.useMemo(()=>{const J=localStorage.getItem("schoolId");if(J&&J!=="")return J;if(a.length>0&&(i!=null&&i.id)){const ie=a.find(T=>T.admin===i.id);if(ie!=null&&ie.id)return localStorage.setItem("schoolId",ie.id.toString()),ie.id.toString()}return null},[a,i==null?void 0:i.id]);console.log("loggedInSchoolId",N),console.log("Debug info:",{schoolsCount:a.length,user:i?{id:i.id,name:`${i.first_name} ${i.last_name}`}:null,localStorageSchoolId:localStorage.getItem("schoolId"),calculatedSchoolId:a.length>0&&(i!=null&&i.id)?(K=a.find(J=>J.admin===i.id))==null?void 0:K.id:null});const k=(()=>{try{const J=localStorage.getItem("user");if(J){const ie=JSON.parse(J);return ie.role==="admin"||ie.role==="super_admin"}}catch(J){console.error("Error parsing user data:",J)}return!1})();x.useEffect(()=>{(async()=>{try{await e(Pc()).unwrap(),N&&(y(N),console.log("Auto-filtering by logged-in school ID:",N))}catch(ie){const T=ie instanceof Error?ie.message:"Failed to load subscriptions";T.includes("Rate limited")||T.includes("throttled")?o({title:"Rate Limited",description:T,variant:"destructive"}):o({title:"Error",description:T,variant:"destructive"})}})()},[e,o,N]);const O=J=>{j(J),w(!0)},R=()=>{w(!1),j(null)},E=()=>{c(""),u("all"),p("all"),y(N||"all")},I=J=>{try{const ie=pS(J);Qc(ie,`subscription-${J.id}-${new Date().toISOString().split("T")[0]}.pdf`),o({title:"Subscription Downloaded",description:"Subscription PDF has been downloaded successfully."})}catch(ie){console.error("Error generating subscription PDF:",ie),o({title:"Error",description:"Failed to generate subscription PDF. Please try again.",variant:"destructive"})}},D=t.filter(J=>J.school.toString()===N);console.log("subsdata",D);const P=D.filter(J=>{const ie=J.school_name.toLowerCase().includes(l.toLowerCase())||J.plan_name.toLowerCase().includes(l.toLowerCase()),T=d==="all"||J.status===d,F=h==="all"||J.billing_cycle===h,M=f==="all"||J.school.toString()===f;return f!=="all"&&console.log("Filtering debug:",{subscriptionSchool:J.school,subscriptionSchoolType:typeof J.school,schoolIdFilter:f,schoolIdFilterType:typeof f,matches:J.school.toString()===f,schoolName:J.school_name}),ie&&T&&F&&M}),A=J=>{switch(J){case"active":return r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Active"});case"pending":return r.jsx(Te,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return r.jsx(Te,{className:"bg-red-100 text-red-800",children:"Cancelled"});case"expired":return r.jsx(Te,{className:"bg-gray-100 text-gray-800",children:"Expired"});default:return r.jsx(Te,{variant:"outline",children:J})}},$=J=>{switch(J){case"monthly":return r.jsx(Te,{className:"bg-blue-100 text-blue-800",children:"Monthly"});case"annually":return r.jsx(Te,{className:"bg-purple-100 text-purple-800",children:"Annually"});default:return r.jsx(Te,{variant:"outline",children:J})}},U=J=>new Date(J).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),de=J=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KES"}).format(parseFloat(J)),se=()=>{const J=new Map;t.forEach(T=>{J.has(T.school)||J.set(T.school,T.school_name)});const ie=Array.from(J.entries()).map(([T,F])=>({id:T.toString(),name:F}));return console.log("Available schools for filtering:",ie),console.log("All subscriptions:",t.map(T=>({id:T.school,name:T.school_name}))),ie},ge=J=>{if(!J.end_date)return{status:"no_expiry",days:0};const ie=new Date(J.end_date),T=new Date,F=Math.ceil((ie.getTime()-T.getTime())/(1e3*60*60*24));return F<0?{status:"expired",days:Math.abs(F)}:F<=30?{status:"expiring_soon",days:F}:{status:"active",days:F}},V=J=>{const ie=ge(J);switch(ie.status){case"expired":return r.jsxs(Te,{variant:"destructive",children:["Expired ",ie.days," days ago"]});case"expiring_soon":return r.jsxs(Te,{className:"bg-orange-100 text-orange-800",children:["Expires in ",ie.days," days"]});case"active":return r.jsxs(Te,{className:"bg-green-100 text-green-800",children:["Active (",ie.days," days left)"]});case"no_expiry":return r.jsx(Te,{variant:"outline",children:"No expiry date"});default:return r.jsx(Te,{variant:"outline",children:"Unknown"})}};return s?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading subscriptions..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"School Subscriptions"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor school ddddsubscription plans"})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Subscriptions"}),r.jsx(ta,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:P.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All school subscriptions"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Active Subscriptions"}),r.jsx(ur,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:P.filter(J=>J.status==="active").length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active plans"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Expiring Soon"}),r.jsx(bn,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:P.filter(J=>ge(J).status==="expiring_soon").length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Within 30 days"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Revenue"}),r.jsx(kf,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:de(P.reduce((J,ie)=>J+parseFloat(ie.price_charged),0).toString())}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"From all subscriptions"})]})]})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsx(Je,{children:"Filters"})}),r.jsxs(Ve,{children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx(Oe,{placeholder:"Search by school or plan...",value:l,onChange:J=>c(J.target.value)})}),r.jsxs(Jt,{value:f,onValueChange:y,children:[r.jsx(Gt,{className:"w-48",children:r.jsx(Zt,{placeholder:"Filter by school"})}),r.jsxs(Kt,{children:[k&&r.jsx(Re,{value:"all",children:"All Schools"}),se().map(J=>r.jsxs(Re,{value:J.id,children:[J.name," (ID: ",J.id,")"]},J.id))]})]}),f!=="all"&&r.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:["Selected School ID: ",f]}),r.jsxs(Jt,{value:d,onValueChange:u,children:[r.jsx(Gt,{className:"w-48",children:r.jsx(Zt,{placeholder:"Filter by status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Status"}),r.jsx(Re,{value:"active",children:"Active"}),r.jsx(Re,{value:"pending",children:"Pending"}),r.jsx(Re,{value:"cancelled",children:"Cancelled"}),r.jsx(Re,{value:"expired",children:"Expired"})]})]}),r.jsxs(Jt,{value:h,onValueChange:p,children:[r.jsx(Gt,{className:"w-48",children:r.jsx(Zt,{placeholder:"Filter by billing cycle"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Cycles"}),r.jsx(Re,{value:"monthly",children:"Monthly"}),r.jsx(Re,{value:"annually",children:"Annually"})]})]}),r.jsx(fe,{variant:"outline",onClick:E,children:"Clear Filters"})]}),(l||f!=="all"||d!=="all"||h!=="all")&&r.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Active Filters:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[l&&r.jsxs(Te,{variant:"secondary",children:['Search: "',l,'"']}),f!=="all"&&r.jsxs(Te,{variant:"secondary",children:["School ID: ",f,N===f&&" (Your School)"]}),d!=="all"&&r.jsxs(Te,{variant:"secondary",children:["Status: ",d]}),h!=="all"&&r.jsxs(Te,{variant:"secondary",children:["Billing: ",h]})]})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsxs(Je,{children:["School Subscriptions (",P.length," of"," ",P.length,")"]}),r.jsxs(br,{children:["All school subscriptions and their current status",l&&r.jsxs("span",{className:"block text-sm text-blue-600",children:[' Filtered by: "',l,'"']}),f!=="all"&&r.jsxs("span",{className:"block text-sm text-blue-600",children:[" School ID: ",f,N===f&&" (Your School)"]}),d!=="all"&&r.jsxs("span",{className:"block text-sm text-blue-600",children:[" Status: ",d]}),h!=="all"&&r.jsxs("span",{className:"block text-sm text-blue-600",children:[" Billing: ",h]})]})]}),r.jsx(Ve,{children:n?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Zn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Subscriptions"}),r.jsx("p",{className:"text-muted-foreground",children:n})]}):P.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ta,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Subscriptions Found"}),r.jsx("p",{className:"text-muted-foreground",children:P.length===0?"No subscriptions have been created yet.":"No subscriptions match your current filters."})]}):r.jsx("div",{className:"rounded-md border",children:r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"School"}),r.jsx(ut,{children:"Plan"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Billing Cycle"}),r.jsx(ut,{children:"Price"}),r.jsx(ut,{children:"Expiry Status"}),r.jsx(ut,{children:"Usage"}),r.jsx(ut,{className:"text-right",children:"Actions"})]})}),r.jsx(ja,{children:P.map(J=>r.jsxs(Kr,{children:[r.jsx(ct,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ks,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:J.school_name}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",J.school]})]})]})}),r.jsx(ct,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:J.plan_name}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",J.plan]})]})}),r.jsx(ct,{children:A(J.status)}),r.jsx(ct,{children:$(J.billing_cycle)}),r.jsxs(ct,{children:[r.jsx("div",{className:"font-medium",children:de(J.price_charged)}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Calculated:"," ",de(J.calculated_cost.toString())]})]}),r.jsx(ct,{children:V(J)}),r.jsx(ct,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(hr,{className:"h-3 w-3 text-blue-600"}),r.jsx("span",{className:"text-sm",children:J.current_students_count})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(cn,{className:"h-3 w-3 text-green-600"}),r.jsx("span",{className:"text-sm",children:J.current_buses_count})]})]})}),r.jsx(ct,{className:"text-right",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsxs(fe,{variant:"ghost",className:"h-8 w-8 p-0",children:[r.jsx("span",{className:"sr-only",children:"Open menu"}),r.jsx(ls,{className:"h-4 w-4"})]})}),r.jsxs(wn,{align:"end",children:[r.jsx(od,{children:"Actions"}),r.jsxs(Wt,{onClick:()=>O(J),children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"View Details"]}),r.jsxs(Wt,{onClick:()=>I(J),children:[r.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Download PDF"]})]})]})})]},J.id))})]})})})]}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Subscription Details"}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:R,children:""})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Subscription Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Subscription ID:"}),r.jsx("p",{className:"font-medium",children:g.id})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[A(g.status),V(g)]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Plan:"}),r.jsx("p",{className:"font-medium",children:g.plan_name})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Billing Cycle:"}),$(g.billing_cycle)]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"School:"}),r.jsx("p",{className:"font-medium",children:g.school_name})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Price Charged:"}),r.jsx("p",{className:"font-medium",children:de(g.price_charged)})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Usage Statistics"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[r.jsx(hr,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),r.jsx("div",{className:"text-2xl font-bold",children:g.current_students_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Students"})]}),r.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[r.jsx(cn,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),r.jsx("div",{className:"text-2xl font-bold",children:g.current_buses_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Buses"})]}),r.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[r.jsx(hr,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),r.jsx("div",{className:"text-2xl font-bold",children:g.current_parents_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Parents"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Important Dates"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ai,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Start Date:"}),r.jsx("span",{className:"font-medium",children:U(g.start_date)})]}),g.end_date&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ai,{className:"h-4 w-4 text-red-600"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"End Date:"}),r.jsx("span",{className:"font-medium",children:U(g.end_date)})]}),g.next_billing_date&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(bn,{className:"h-4 w-4 text-yellow-600"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Next Billing:"}),r.jsx("span",{className:"font-medium",children:U(g.next_billing_date)})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[r.jsxs(fe,{variant:"outline",onClick:()=>I(g),children:[r.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),r.jsxs(fe,{variant:"outline",children:[r.jsx(ks,{className:"mr-2 h-4 w-4"}),"View School"]}),g.status==="pending"&&r.jsxs(fe,{children:[r.jsx(ur,{className:"mr-2 h-4 w-4"}),"Activate"]}),g.status==="active"&&r.jsxs(fe,{variant:"outline",children:[r.jsx(fu,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})]})})]})},gee=t1({message:gc().min(10,"Message must be at least 10 characters"),notification_type:t3(["ACTION_REQUIRED","SYSTEM","INFO","WARNING","EMERGENCY"]),target_type:t3(["parents","drivers","all"]),selected_targets:J5(En()).optional()}),gx=[{value:"ACTION_REQUIRED",label:"Action Required",icon:Lc,color:"bg-orange-100 text-orange-800"},{value:"SYSTEM",label:"System",icon:J4,color:"bg-blue-100 text-blue-800"},{value:"EMERGENCY",label:"Emergency",icon:Lc,color:"bg-red-100 text-red-800"},{value:"WARNING",label:"Warning",icon:Lc,color:"bg-yellow-100 text-yellow-800"},{value:"INFO",label:"Information",icon:J4,color:"bg-blue-100 text-blue-800"}];function xee(){var ie,T;const e=ns(),{notifications:t,loading:s,error:n}=At(F=>F.notifications),{parents:a}=At(F=>F.parents),{students:i}=At(F=>F.students),{trips:o}=At(F=>F.trips),{drivers:l}=At(F=>F.drivers),{staff:c}=At(F=>F.staff),{toast:d}=Zs(),h=JSON.parse(localStorage.getItem("profile")||"{}"),p=localStorage.getItem("schoolId");h.user||h.id;const[f,y]=x.useState(""),[g,j]=x.useState("all"),[v,w]=x.useState(1),[N]=x.useState(10),[C,k]=x.useState(!1),[O,R]=x.useState(null),[E,I]=x.useState(!1),D=yv({resolver:bv(gee),defaultValues:{message:"",notification_type:"INFO",target_type:"all",selected_targets:[]}});x.useEffect(()=>{const F=D.watch((M,{name:G})=>{G==="target_type"&&D.setValue("selected_targets",[])});return()=>F.unsubscribe()},[D]);const P=(a==null?void 0:a.filter(F=>F.school===parseInt(p||"0")))||[];i!=null&&i.filter(F=>F.school===parseInt(p||"0")),o!=null&&o.filter(F=>F.school===parseInt(p||"0"));const A=(t==null?void 0:t.filter(F=>{var ee,te,me,ue;const M=((ee=F.message)==null?void 0:ee.toLowerCase().includes(f.toLowerCase()))||((te=F.notification_type)==null?void 0:te.toLowerCase().includes(f.toLowerCase()))||((me=F.school_name)==null?void 0:me.toLowerCase().includes(f.toLowerCase())),G=g==="all"||((ue=F.notification_type)==null?void 0:ue.toLowerCase())===g.toLowerCase();return M&&G}))||[],$=Math.ceil(A.length/N),U=(v-1)*N,de=U+N,se=(A==null?void 0:A.slice(U,de))||[];if(console.log(" Notifications debugging:"),console.log("Raw notifications:",t),console.log("Search term:",f),console.log("Type filter:",g),console.log("Filtered notifications:",A),console.log("Paginated notifications:",se),x.useEffect(()=>{w(1)},[f,g]),x.useEffect(()=>{p&&(e(Eh({schoolId:parseInt(p)})),e(ua({schoolId:parseInt(p)})),e(Xa({schoolId:parseInt(p)})),e(Vd({schoolId:parseInt(p)})),e(Ln()),e(Ch({schoolId:parseInt(p)})))},[e,p]),!t)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsx("main",{className:"flex-1 px-2 sm:px-1 py-0 w-full max-w-[98vw] mx-auto",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})})})})});const ge=async F=>{try{const M=localStorage.getItem("schoolId");if(!M){d({title:"Error",description:"School ID not found",variant:"destructive"});return}console.log(" Debug - Form values:",F);const G={school:parseInt(M||"0"),message:F.message,notification_type:F.notification_type,is_read:!1,parents:[],drivers:[]};F.target_type==="all"?console.log(" Sending to all users - no specific parent"):F.target_type==="parents"?F.selected_targets&&F.selected_targets.length>0?(G.parents=F.selected_targets,console.log(" Sending to specific parents:",F.selected_targets)):console.log(" No specific parents selected"):F.target_type==="drivers"?F.selected_targets&&F.selected_targets.length>0?(G.drivers=F.selected_targets,console.log(" Sending to specific drivers:",F.selected_targets)):console.log(" No specific drivers selected"):console.log(" Sending to non-parent category:",F.target_type),console.log(" Final notification payload:",G);const ee=await e(l0(G)).unwrap();console.log(" Notification created successfully:",ee),d({title:"Success",description:"Notification created successfully"}),D.reset(),k(!1)}catch(M){console.error(" Error creating notification:",M),d({title:"Error",description:"Failed to create notification",variant:"destructive"})}},V=F=>{R(F),I(!0)},K=F=>gx.find(M=>M.value===F)||gx[2],J=F=>new Date(F).toLocaleString();return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:r.jsxs("main",{className:"flex-1 px-2 sm:px-1 py-0 w-full max-w-[98vw] mx-auto",children:[n&&n.includes("not available")&&r.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Lc,{className:"h-5 w-5 text-blue-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Demo Mode - Notifications API Coming Soon"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"The notifications API is not yet available on the server. You can explore the interface with demo data, and create notifications that will be saved when the backend is implemented."})]})]})}),r.jsxs(Me,{className:"bg-white shadow-lg border-0 rounded-xl",children:[r.jsxs(Ke,{className:"border-b border-gray-100 flex flex-row w-full items-center justify-between py-4",children:[r.jsxs(Je,{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Eo,{className:"w-6 h-6 text-green-500"}),"Notifications"]}),r.jsx("div",{className:"flex gap-3",children:r.jsxs(Hr,{open:C,onOpenChange:F=>{k(F),F||D.reset()},children:[r.jsx(nu,{asChild:!0,children:r.jsxs(fe,{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-2 rounded-lg shadow disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:n&&n.includes("not available"),children:[r.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Create Notification"]})}),r.jsxs(Or,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsx($r,{children:"Create New Notification"})}),r.jsx(tp,{...D,children:r.jsxs("form",{onSubmit:D.handleSubmit(ge),className:"space-y-4",children:[r.jsx(os,{control:D.control,name:"notification_type",render:({field:F})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Notification Type"}),r.jsxs(Jt,{onValueChange:F.onChange,value:F.value,children:[r.jsx(Jr,{children:r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select notification type"})})}),r.jsx(Kt,{children:gx.map(M=>r.jsx(Re,{value:M.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M.icon,{className:"h-4 w-4"}),M.label]})},M.value))})]}),r.jsx(Bs,{})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Tr,{children:"Target Category"}),r.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Select the category of users to target with this notification. You can only target one category at a time."})]}),r.jsx(os,{control:D.control,name:"target_type",render:({field:F})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Who to send to?"}),r.jsxs(Jt,{onValueChange:F.onChange,value:F.value,children:[r.jsx(Jr,{children:r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select target category"})})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Users"}),r.jsx(Re,{value:"parents",children:"Parents"}),r.jsx(Re,{value:"drivers",children:"Drivers"})]})]}),r.jsx(Bs,{})]})}),D.watch("target_type")!=="all"&&r.jsx(os,{control:D.control,name:"selected_targets",render:({field:F})=>{var M;return r.jsxs(Fr,{children:[r.jsx(Tr,{children:D.watch("target_type")==="parents"?"Select Parents":D.watch("target_type")==="drivers"?"Select Drivers":"Select Targets"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Jt,{onValueChange:G=>{const ee=F.value||[],te=parseInt(G),me=ee.includes(te)?ee.filter(ue=>ue!==te):[...ee,te];F.onChange(me)},children:[r.jsx(Jr,{children:r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select targets"})})}),r.jsxs(Kt,{children:[D.watch("target_type")==="parents"?P.map(G=>{var ee,te;return r.jsx(Re,{value:G.id.toString(),children:G.user_full_name||`${(ee=G.user_data)==null?void 0:ee.first_name} ${(te=G.user_data)==null?void 0:te.last_name}`},G.id)}):null,D.watch("target_type")==="drivers"?(M=l==null?void 0:l.filter(G=>G.school===parseInt(p||"0")))==null?void 0:M.map(G=>r.jsxs(Re,{value:G.id.toString(),children:[G.user_details.first_name," ",G.user_details.last_name]},G.id)):null]})]}),F.value&&F.value.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Selected Targets:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:F.value.map(G=>{var te,me;let ee=`ID: ${G}`;if(D.watch("target_type")==="parents"){const ue=P.find(ce=>ce.id===G);ee=(ue==null?void 0:ue.user_full_name)||`${(te=ue==null?void 0:ue.user_data)==null?void 0:te.first_name} ${(me=ue==null?void 0:ue.user_data)==null?void 0:me.last_name}`||`Parent ${G}`}else if(D.watch("target_type")==="drivers"){const ue=l==null?void 0:l.find(ce=>ce.id===G);ee=ue?`${ue.user_details.first_name} ${ue.user_details.last_name}`:`Driver ${G}`}return r.jsxs(Te,{variant:"secondary",className:"text-xs",children:[ee,r.jsx("button",{type:"button",onClick:()=>{F.onChange(F.value.filter(ue=>ue!==G))},className:"ml-1 text-red-500 hover:text-red-700",children:""})]},G)})})]})]}),r.jsx(Bs,{})]})}})]}),r.jsx(os,{control:D.control,name:"message",render:({field:F})=>r.jsxs(Fr,{children:[r.jsx(Tr,{children:"Message"}),r.jsx(Jr,{children:r.jsx(Ma,{placeholder:"Enter notification message",rows:4,...F})}),r.jsx(Bs,{})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{type:"submit",className:"bg-green-500 hover:bg-green-600",children:"Create Notification"})})]})})]})]})})]}),r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(Oe,{placeholder:"Search notifications by description or message...",value:f,onChange:F=>y(F.target.value),className:"pl-10"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vo,{className:"h-4 w-4 text-gray-400"}),r.jsxs(Jt,{value:g,onValueChange:j,children:[r.jsx(Gt,{className:"w-[180px]",children:r.jsx(Zt,{placeholder:"Filter by type"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Types"}),gx.map(F=>r.jsx(Re,{value:F.value,children:F.label},F.value))]})]}),r.jsx(ju,{data:{headers:["Description","Type","Message","Parent","Student","Trip","Created At","Expires At"],data:A.map(F=>({description:F.description||F.route_name||"",type:"Trip",message:`Route: ${F.route_name||""} - Driver: ${F.driver_name||""} - Vehicle: ${F.vehicle_number||""}`,parent:"N/A",student:"N/A",trip:F.route_name||"Unknown Route",created_at:F.scheduled_start_time?J(F.scheduled_start_time):"",expires_at:F.scheduled_end_time?J(F.scheduled_end_time):"No expiration"})),fileName:"notifications_export",title:"Notifications Directory"},className:"border-gray-200 hover:bg-gray-50 px-3 py-2"})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Details"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:s?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"}),r.jsx("span",{className:"text-gray-600 font-medium",children:"Loading notifications..."})]})})}):n?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:r.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Lc,{className:"w-8 h-8 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-600 font-medium",children:"Demo Mode Active"}),r.jsx("p",{className:"text-blue-500 text-sm",children:"Showing demo notifications. The API will be available soon."}),r.jsx("p",{className:"text-gray-500 text-xs mt-2",children:n})]})]})})}):A.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(Eo,{className:"w-8 h-8 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 font-medium",children:"No notifications found"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Create your first notification to get started"})]})]})})}):se.map((F,M)=>{const G=K(F.notification_type||"info"),ee=G.icon;return r.jsxs("tr",{className:`hover:bg-gray-50 transition-colors duration-200 ${M%2===0?"bg-white":"bg-gray-50/50"}`,children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.message||"Notification"}),r.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",F.id]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs(Te,{className:G.color,children:[r.jsx(ee,{className:"w-3 h-3 mr-1"}),F.notification_type||"INFO"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"max-w-xs truncate",children:[r.jsxs("div",{className:"text-sm text-gray-900",children:["School: ",F.school_name||"Unknown"]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:r.jsxs("span",{className:"mr-2",children:["Type:"," ",F.notification_type||"Unknown"]})}),F.parents&&F.parents.length>0&&r.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Parents:"," ",F.parents.map(te=>{const me=P.find(ue=>ue.id===te);return me?me.user_full_name:`Parent ${te}`}).join(", ")]}),F.drivers&&F.drivers.length>0&&r.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Drivers:"," ",F.drivers.map(te=>{const me=l==null?void 0:l.find(ue=>ue.id===te);return me?`${me.user_details.first_name} ${me.user_details.last_name}`:`Driver ${te}`}).join(", ")]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(bn,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-900",children:F.created_at?J(F.created_at):"N/A"}),F.is_read&&r.jsx("div",{className:"text-xs text-green-500",children:" Read"})]})]})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-gray-100 rounded-full",children:r.jsx(nv,{className:"h-4 w-4 text-gray-600"})})}),r.jsx(wn,{align:"end",className:"w-48",children:r.jsxs(Wt,{onClick:()=>V(F),className:"cursor-pointer",children:[r.jsx(ls,{className:"h-4 w-4 mr-2 text-blue-600"}),r.jsx("span",{children:"View Details"})]})})]})})]},F.id)})})]})}),$>1&&r.jsx("div",{className:"flex items-center justify-between p-4 border-t border-gray-200",children:r.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",U+1,"-",Math.min(de,A.length)," ","of ",A.length," notifications",f&&` matching "${f}"`]})})]})]})}),r.jsx(Hr,{open:E,onOpenChange:I,children:r.jsxs(Or,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[r.jsx(Mr,{children:r.jsxs($r,{className:"flex items-center gap-2",children:[r.jsx(Eo,{className:"w-5 h-5 text-green-500"}),"Notification Details"]})}),O&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const F=K(O.notification_type||"info"),M=F.icon;return r.jsxs(Te,{className:F.color,children:[r.jsx(M,{className:"w-3 h-3 mr-1"}),O.notification_type||"INFO"]})})(),r.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",O.id]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Message"}),r.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-gray-900",children:O.message})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"School"}),r.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-gray-900",children:O.school_name||"Unknown School"})})]}),(((ie=O.parents)==null?void 0:ie.length)>0||((T=O.drivers)==null?void 0:T.length)>0)&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Targeted Recipients"}),r.jsxs("div",{className:"space-y-2",children:[O.parents&&O.parents.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-blue-600 mb-1",children:"Parents:"}),r.jsx("div",{className:"pl-3",children:O.parents.map(F=>{const M=P.find(G=>G.id===F);return r.jsxs("div",{className:"text-sm text-gray-700",children:[" ",M?M.user_full_name:`Parent ${F}`]},F)})})]}),O.drivers&&O.drivers.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-green-600 mb-1",children:"Drivers:"}),r.jsx("div",{className:"pl-3",children:O.drivers.map(F=>{const M=l==null?void 0:l.find(G=>G.id===F);return r.jsxs("div",{className:"text-sm text-gray-700",children:[" ",M?`${M.user_details.first_name} ${M.user_details.last_name}`:`Driver ${F}`]},F)})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Created"}),r.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-gray-900",children:O.created_at?J(O.created_at):"N/A"})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:r.jsx("div",{className:"flex items-center gap-2",children:O.is_read?r.jsxs(r.Fragment,{children:[r.jsx(ur,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-green-600",children:"Read"})]}):r.jsxs(r.Fragment,{children:[r.jsx(bn,{className:"w-4 h-4 text-orange-500"}),r.jsx("span",{className:"text-orange-600",children:"Unread"})]})})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Additional Details"}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"School ID:"}),r.jsx("span",{className:"text-sm text-gray-900",children:O.school||"N/A"})]}),O.read_at&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Read At:"}),r.jsx("span",{className:"text-sm text-gray-900",children:J(O.read_at)})]})]})]})]})]})})]})}const vee=()=>{const e=io();return x.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4 text-foreground",children:"404"}),r.jsx("p",{className:"text-xl text-muted-foreground mb-4",children:"Oops! Page not found"}),r.jsx(zd,{to:"/",className:"text-primary hover:text-primary/80 underline",children:"Return to Home"})]})})},yee=[{label:"Dashboard",icon:OP,href:"/super-admin"},{label:"Users",icon:hr,href:"/super-admin/users"},{label:"Schools",icon:ks,href:"/super-admin/schools"},{label:"Subscriptions",icon:ta,href:"/super-admin/subscriptions"},{label:"School Subscriptions",icon:ta,href:"/super-admin/school-subscriptions"},{label:"Invoices",icon:ra,href:"/super-admin/invoices"},{label:"Customer Support",icon:Hj,href:"/super-admin/support"},{label:"Analytics",icon:Sy,href:"/super-admin/analytics"},{label:"Settings",icon:Ao,href:"/super-admin/settings"}];function bee(){const e=io(),t=s=>s==="/super-admin"?e.pathname==="/super-admin":e.pathname.startsWith(s);return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx(zd,{to:"/super-admin",children:r.jsxs("div",{className:"p-6 flex items-center gap-2",children:[r.jsx("div",{className:"rounded-full bg-purple-100 dark:bg-purple-900/20 p-2",children:r.jsx(Xn,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("span",{className:"font-extrabold text-lg",children:[r.jsx("span",{className:"text-black dark:text-white",children:"Super"}),r.jsx("span",{className:"text-purple-500",children:"Admin"})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:r.jsx("nav",{className:"space-y-1",children:yee.map(s=>{const n=t(s.href);return r.jsxs(zd,{to:s.href,className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${n?"bg-purple-500/90 text-white":"text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[r.jsx(s.icon,{size:20,className:n?"text-white":"text-gray-700 dark:text-gray-300"}),r.jsx("span",{className:"font-medium",children:s.label})]},s.label)})})}),r.jsx("div",{className:"p-4",children:r.jsxs(zd,{to:"/super-admin/settings",className:`flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-700 dark:text-gray-300 w-full ${t("/super-admin/settings")?"bg-purple-500/90 text-white":""}`,children:[r.jsx(Ao,{size:20,className:t("/super-admin/settings")?"text-white":"text-gray-700 dark:text-gray-300"}),r.jsx("span",{className:"font-medium",children:"Settings"})]})})]})}const jee=()=>{io();const{openMobile:e,setOpenMobile:t,toggleSidebar:s}=Rf(),[n,a]=x.useState(!1),i=x.useRef(null);return x.useEffect(()=>{const o=()=>{if(i.current){const c=i.current.scrollTop;a(c>0)}},l=i.current;if(l)return l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)},[]),r.jsxs("div",{className:"h-screen w-screen bg-background",children:[e&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>t(!1)}),r.jsxs("div",{className:"flex h-full w-full overflow-hidden",children:[r.jsx("div",{className:`fixed md:static inset-y-0 left-0 z-50 w-64 transform transition-transform duration-200 ease-in-out ${e?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:r.jsx("div",{className:"h-full bg-card border-r",children:r.jsx(bee,{})})}),r.jsxs("div",{className:"flex-1 flex flex-col w-full overflow-hidden",children:[r.jsx(M5,{onMenuClick:s,isScrolled:n}),r.jsx("main",{ref:i,className:"flex-1 overflow-y-auto bg-background",children:r.jsx("div",{className:"h-full w-full",children:r.jsx("div",{className:"h-full w-full",children:r.jsx(_A,{})})})})]})]})]})},wee=()=>r.jsx(dL,{children:r.jsx(jee,{})});class Nee{constructor(){YS(this,"baseUrl",Tt.SCHOOLS)}async getAllSchools(){try{const t=await fetch(this.baseUrl,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Schools API response:",s);let n=s.data||s;if(!Array.isArray(n))return console.error("Invalid schools response - not an array:",n),[];const a=n.map((i,o)=>{var l,c,d,u;return!i||typeof i!="object"?(console.warn(`Invalid school at index ${o}:`,i),null):{_id:((l=i.id)==null?void 0:l.toString())||i._id||`temp-${o}`,name:i.name||i.school_name||"Unknown School",address:i.address||i.location||"",phone:i.phone||i.contact_number||"",email:i.email||"",principal:{name:((c=i.principal)==null?void 0:c.name)||"School Administrator",phone:((d=i.principal)==null?void 0:d.phone)||i.contact_number||"",email:((u=i.principal)==null?void 0:u.email)||i.email||""},isActive:i.is_active!==void 0?i.is_active:!0,location:i.location||"",type:i.type||"primary",capacity:i.capacity||0,currentStudents:i.current_students||i.students||0,createdAt:i.created_at||i.createdAt||new Date().toISOString(),updatedAt:i.updated_at||i.updatedAt||new Date().toISOString(),subscription:i.subscription||"Basic",staff:i.staff||0,lastActive:i.last_active||i.lastActive||"Never"}}).filter(Boolean);return console.log("Validated schools:",a),a}catch(t){throw console.error("Error fetching schools:",t),t}}async getSchoolById(t){var s,n,a,i;try{const o=await fetch(`${this.baseUrl}/${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();console.log("School details response:",l);let c=l.data||l;if(!c||typeof c!="object")throw new Error("Invalid school data received");const d={_id:((s=c.id)==null?void 0:s.toString())||c._id||t,name:c.name||c.school_name||"Unknown School",address:c.address||c.location||"",phone:c.phone||c.contact_number||"",email:c.email||"",principal:{name:((n=c.principal)==null?void 0:n.name)||"School Administrator",phone:((a=c.principal)==null?void 0:a.phone)||c.contact_number||"",email:((i=c.principal)==null?void 0:i.email)||c.email||""},isActive:c.is_active!==void 0?c.is_active:!0,location:c.location||"",type:c.type||"primary",capacity:c.capacity||0,currentStudents:c.current_students||c.students||0,createdAt:c.created_at||c.createdAt||new Date().toISOString(),updatedAt:c.updated_at||c.updatedAt||new Date().toISOString(),subscription:c.subscription||"Basic",staff:c.staff||0,lastActive:c.last_active||c.lastActive||"Never"};return console.log("Validated school:",d),d}catch(o){throw console.error("Error fetching school:",o),o}}async createSchool(t){try{const s=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.json();return n.data||n}catch(s){throw console.error("Error creating school:",s),s}}async updateSchool(t,s){try{const n=await fetch(`${this.baseUrl}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch(n){throw console.error("Error updating school:",n),n}}async deleteSchool(t){try{const s=await fetch(`${this.baseUrl}/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`)}catch(s){throw console.error("Error deleting school:",s),s}}async toggleSchoolStatus(t){try{const s=await fetch(`${this.baseUrl}/${t}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.json();return n.data||n}catch(s){throw console.error("Error toggling school status:",s),s}}async getDashboardStats(){try{const t=await fetch(`${this.baseUrl}/stats`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();return s.data||s}catch(t){return console.error("Error fetching dashboard stats:",t),{totalUsers:1247,totalSchools:89,activeSubscriptions:76,revenue:45600,pendingApprovals:12,activeUsers:1189,inactiveUsers:58,premiumSchools:23}}}}const Kd=new Nee,See=()=>{const e=Ai(),t=ns(),{invoices:s}=At(h=>h.invoices),{subscriptions:n}=At(h=>h.schoolSubscriptions),[a,i]=x.useState({totalUsers:0,totalSchools:0,activeSubscriptions:0,revenue:0,pendingApprovals:0,activeUsers:0,inactiveUsers:0,premiumSchools:0}),[o,l]=x.useState(!0);x.useEffect(()=>{(async()=>{l(!0);try{await Promise.all([t(Lh()),t(Pc())]);const p=await Kd.getAllSchools(),f=s.reduce((v,w)=>v+parseFloat(w.amount_due||"0"),0),y=s.filter(v=>v.status==="paid"),g=s.filter(v=>v.status==="pending"),j={totalSchools:p.length,activeSchools:p.filter(v=>v.isActive).length,inactiveSchools:p.filter(v=>!v.isActive).length,premiumSchools:n.filter(v=>v.status==="active").length,totalUsers:p.reduce((v,w)=>v+(w.currentStudents||0),0),activeSubscriptions:n.filter(v=>v.status==="active").length,revenue:f,pendingApprovals:p.filter(v=>!v.isActive).length,activeUsers:p.reduce((v,w)=>v+(w.currentStudents||0),0),inactiveUsers:0};console.log("Dashboard: Real stats calculated from API data:",j),console.log("Invoices data:",s),console.log("Subscriptions data:",n),i(j)}catch(p){console.error("Error fetching dashboard data:",p),i({totalUsers:1247,totalSchools:89,activeSubscriptions:76,revenue:45600,pendingApprovals:12,activeUsers:1189,inactiveUsers:58,premiumSchools:23})}finally{l(!1)}})()},[t]);const c=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(h),d=()=>{try{const h=["Metric","Value","Description"],p=[["Total Users",a.totalUsers.toLocaleString(),"All registered users"],["Total Schools",a.totalSchools.toString(),"All registered schools"],["Active Subscriptions",a.activeSubscriptions.toString(),"Premium subscriptions"],["Total Revenue",c(a.revenue),"From all invoices"],["Pending Approvals",a.pendingApprovals.toString(),"Schools awaiting approval"],["Active Users",a.activeUsers.toLocaleString(),"Users active this month"],["Premium Schools",a.premiumSchools.toString(),"Schools with premium plans"],["Total Invoices",s.length.toString(),"All invoices"],["Paid Invoices",s.filter(y=>y.status==="paid").length.toString(),"Successfully paid"],["Pending Invoices",s.filter(y=>y.status==="pending").length.toString(),"Awaiting payment"],["School Subscriptions",n.length.toString(),"All subscriptions"]],f=mS({headers:h,rows:p,title:"Super Admin Dashboard Report",subtitle:`Generated on ${new Date().toLocaleDateString()}`});Qc(f,`dashboard-report-${new Date().toISOString().split("T")[0]}.pdf`),toast({title:"Dashboard Report Downloaded",description:"Dashboard report has been downloaded successfully."})}catch(h){console.error("Error generating dashboard PDF:",h),toast({title:"Error",description:"Failed to generate dashboard PDF. Please try again.",variant:"destructive"})}},u=({title:h,value:p,description:f,icon:y,trend:g,color:j="default"})=>r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:h}),r.jsx(y,{size:20,className:`${j==="success"?"text-green-600":j==="warning"?"text-yellow-600":j==="danger"?"text-red-600":"text-blue-600"}`})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p}),f&&r.jsx("p",{className:"text-xs text-muted-foreground",children:f}),g&&r.jsxs("div",{className:"flex items-center mt-2",children:[r.jsxs(Te,{variant:g.isPositive?"default":"secondary",className:`text-xs ${g.isPositive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[g.isPositive?"+":"-",g.value,"%"]}),r.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"from last month"})]})]})]});return o?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(8)].map((h,p)=>r.jsxs(Me,{children:[r.jsx(Ke,{className:"pb-2",children:r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})}),r.jsx(Ve,{children:r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})})]},p))})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Super Admin Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Overview of all schools, users, and subscriptions"})]}),r.jsx(fe,{onClick:d,children:"Export Report"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(u,{title:"Total Users",value:a.totalUsers.toLocaleString(),description:"All registered users",icon:hr,trend:{value:12,isPositive:!0},color:"default"}),r.jsx(u,{title:"Total Schools",value:a.totalSchools,description:`${a.activeSchools} active, ${a.inactiveSchools} inactive`,icon:ks,trend:{value:8,isPositive:!0},color:"success"}),r.jsx(u,{title:"Active Subscriptions",value:a.activeSubscriptions,description:"Premium subscriptions",icon:ta,trend:{value:5,isPositive:!0},color:"warning"}),r.jsx(u,{title:"Total Revenue",value:c(a.revenue),description:"From all invoices",icon:kf,trend:{value:23,isPositive:!0},color:"success"})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(ra,{className:"h-5 w-5"}),"Revenue Overview"]}),r.jsx(br,{children:"Invoice and revenue statistics from all schools"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/invoices"),children:"View All Invoices"}),r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/school-subscriptions"),children:"View Subscriptions"})]})]})}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.length}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Invoices"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.filter(h=>h.status==="paid").length}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Paid Invoices"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.filter(h=>h.status==="pending").length}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Invoices"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.length}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"School Subscriptions"})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(ks,{className:"h-5 w-5"}),"Schools Overview"]}),r.jsx(br,{children:"Real-time statistics from all registered schools"})]}),r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/schools"),children:"View All Schools"})]})}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.totalSchools}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Schools"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.activeSchools}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Schools"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a.inactiveSchools}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Inactive Schools"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.premiumSchools}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Premium Schools"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(u,{title:"Active Users",value:a.activeUsers.toLocaleString(),description:"Users active this month",icon:ur,color:"success"}),r.jsx(u,{title:"Pending Approvals",value:a.pendingApprovals,description:"Schools awaiting approval",icon:Zn,color:"warning"}),r.jsx(u,{title:"Premium Schools",value:a.premiumSchools,description:"Schools with premium plans",icon:ro,color:"success"})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Quick Actions"}),r.jsx(br,{children:"Common administrative tasks"})]}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs(fe,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[r.jsx(hr,{size:24}),r.jsx("span",{children:"Manage Users"})]}),r.jsxs(fe,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/schools"),children:[r.jsx(ks,{size:24}),r.jsx("span",{children:"Manage Schools"})]}),r.jsxs(fe,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/school-subscriptions"),children:[r.jsx(ta,{size:24}),r.jsx("span",{children:"Subscriptions"})]}),r.jsxs(fe,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/invoices"),children:[r.jsx(ra,{size:24}),r.jsx("span",{children:"Invoices"})]})]})})]})]})},_ee=()=>{const[e,t]=x.useState([]),[s,n]=x.useState(!0),[a,i]=x.useState(""),[o,l]=x.useState("all"),[c,d]=x.useState("all");x.useEffect(()=>{(async()=>{n(!0),setTimeout(()=>{t([{id:"1",name:"John Doe",email:"john.doe@school.edu",role:"School Admin",school:"Springfield High School",status:"active",lastLogin:"2024-01-15 10:30 AM",createdAt:"2023-09-15"},{id:"2",name:"Jane Smith",email:"jane.smith@school.edu",role:"Teacher",school:"Lincoln Elementary",status:"active",lastLogin:"2024-01-14 02:15 PM",createdAt:"2023-10-20"},{id:"3",name:"Mike Johnson",email:"mike.johnson@school.edu",role:"Driver",school:"Central Middle School",status:"inactive",lastLogin:"2024-01-10 09:45 AM",createdAt:"2023-08-05"},{id:"4",name:"Sarah Wilson",email:"sarah.wilson@school.edu",role:"Parent",school:"Oakwood Academy",status:"pending",lastLogin:"Never",createdAt:"2024-01-12"},{id:"5",name:"David Brown",email:"david.brown@school.edu",role:"School Admin",school:"Riverside High",status:"active",lastLogin:"2024-01-15 11:20 AM",createdAt:"2023-07-22"}]),n(!1)},1e3)})()},[]);const u=e.filter(f=>{const y=f.name.toLowerCase().includes(a.toLowerCase())||f.email.toLowerCase().includes(a.toLowerCase())||f.school.toLowerCase().includes(a.toLowerCase()),g=o==="all"||f.role===o,j=c==="all"||f.status===c;return y&&g&&j}),h=f=>{switch(f){case"active":return r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Active"});case"inactive":return r.jsx(Te,{variant:"secondary",children:"Inactive"});case"pending":return r.jsx(Te,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});default:return r.jsx(Te,{variant:"outline",children:f})}},p=f=>{switch(f){case"School Admin":return r.jsx(Te,{className:"bg-blue-100 text-blue-800",children:"School Admin"});case"Teacher":return r.jsx(Te,{className:"bg-purple-100 text-purple-800",children:"Teacher"});case"Driver":return r.jsx(Te,{className:"bg-orange-100 text-orange-800",children:"Driver"});case"Parent":return r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Parent"});default:return r.jsx(Te,{variant:"outline",children:f})}};return s?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"space-y-2",children:[...Array(5)].map((f,y)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},y))})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage all users across all schools"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{variant:"outline",children:[r.jsx(Fn,{size:16,className:"mr-2"}),"Export"]}),r.jsxs(fe,{children:[r.jsx(ZU,{size:16,className:"mr-2"}),"Add User"]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Filters"}),r.jsx(br,{children:"Filter users by various criteria"})]}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ws,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Oe,{placeholder:"Search users...",value:a,onChange:f=>i(f.target.value),className:"pl-10"})]}),r.jsxs(Jt,{value:o,onValueChange:l,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Filter by role"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Roles"}),r.jsx(Re,{value:"School Admin",children:"School Admin"}),r.jsx(Re,{value:"Teacher",children:"Teacher"}),r.jsx(Re,{value:"Driver",children:"Driver"}),r.jsx(Re,{value:"Parent",children:"Parent"})]})]}),r.jsxs(Jt,{value:c,onValueChange:d,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Filter by status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Status"}),r.jsx(Re,{value:"active",children:"Active"}),r.jsx(Re,{value:"inactive",children:"Inactive"}),r.jsx(Re,{value:"pending",children:"Pending"})]})]}),r.jsxs(fe,{variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Vo,{size:16}),"Clear Filters"]})]})})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsxs(Je,{children:["Users (",u.length,")"]}),r.jsx(br,{children:"All registered users in the system"})]}),r.jsx(Ve,{children:r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"Name"}),r.jsx(ut,{children:"Email"}),r.jsx(ut,{children:"Role"}),r.jsx(ut,{children:"School"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Last Login"}),r.jsx(ut,{children:"Created"}),r.jsx(ut,{className:"text-right",children:"Actions"})]})}),r.jsx(ja,{children:u.map(f=>r.jsxs(Kr,{children:[r.jsx(ct,{className:"font-medium",children:f.name}),r.jsx(ct,{children:f.email}),r.jsx(ct,{children:p(f.role)}),r.jsx(ct,{children:f.school}),r.jsx(ct,{children:h(f.status)}),r.jsx(ct,{children:f.lastLogin}),r.jsx(ct,{children:f.createdAt}),r.jsx(ct,{className:"text-right",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsx(od,{children:"Actions"}),r.jsxs(Wt,{children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"View Details"]}),r.jsxs(Wt,{children:[r.jsx(na,{className:"mr-2 h-4 w-4"}),"Edit User"]}),r.jsx(bu,{}),r.jsxs(Wt,{className:"text-red-600",children:[r.jsx(Da,{className:"mr-2 h-4 w-4"}),"Delete User"]})]})]})})]},f.id))})]})})]})]})},Cee=()=>{const e=Ai(),[t,s]=x.useState([]),[n,a]=x.useState(!0),[i,o]=x.useState(""),[l,c]=x.useState("all"),[d,u]=x.useState("all");x.useEffect(()=>{(async()=>{a(!0);try{const j=await Kd.getAllSchools();console.log("Schools component received data:",j),Array.isArray(j)&&j.length>0?s(j):(console.warn("No valid schools data received, using fallback"),s([{_id:"1",name:"Springfield High School",address:"123 Main St, Springfield, IL",phone:"+1-555-0123",email:"info@springfield.edu",principal:{name:"John Doe",phone:"+1-555-0124",email:"john.doe@springfield.edu"},isActive:!0,location:"Springfield, IL",type:"secondary",capacity:1500,currentStudents:1250,createdAt:"2023-09-15T00:00:00.000Z",updatedAt:"2024-01-15T10:30:00.000Z",subscription:"Premium",staff:85,lastActive:"2024-01-15 10:30 AM"},{_id:"2",name:"Lincoln Elementary",address:"456 Oak Ave, Lincoln, NE",phone:"+1-555-0125",email:"info@lincoln.edu",principal:{name:"Jane Smith",phone:"+1-555-0126",email:"jane.smith@lincoln.edu"},isActive:!0,location:"Lincoln, NE",type:"primary",capacity:500,currentStudents:450,createdAt:"2023-10-20T00:00:00.000Z",updatedAt:"2024-01-14T14:15:00.000Z",subscription:"Basic",staff:32,lastActive:"2024-01-14 02:15 PM"}]))}catch(j){console.error("Error fetching schools:",j),s([{_id:"1",name:"Springfield High School",address:"123 Main St, Springfield, IL",phone:"+1-555-0123",email:"info@springfield.edu",principal:{name:"John Doe",phone:"+1-555-0124",email:"john.doe@springfield.edu"},isActive:!0,location:"Springfield, IL",type:"secondary",capacity:1500,currentStudents:1250,createdAt:"2023-09-15T00:00:00.000Z",updatedAt:"2024-01-15T10:30:00.000Z",subscription:"Premium",staff:85,lastActive:"2024-01-15 10:30 AM"},{_id:"2",name:"Lincoln Elementary",address:"456 Oak Ave, Lincoln, NE",phone:"+1-555-0125",email:"info@lincoln.edu",principal:{name:"Jane Smith",phone:"+1-555-0126",email:"jane.smith@lincoln.edu"},isActive:!0,location:"Lincoln, NE",type:"primary",capacity:500,currentStudents:450,createdAt:"2023-10-20T00:00:00.000Z",updatedAt:"2024-01-14T14:15:00.000Z",subscription:"Basic",staff:32,lastActive:"2024-01-14 02:15 PM"}])}finally{a(!1)}})()},[]);const h=t.filter(g=>{var N;if(!g||!g.name)return!1;const j=(g.name||"").toLowerCase().includes(i.toLowerCase())||(((N=g.principal)==null?void 0:N.name)||"").toLowerCase().includes(i.toLowerCase())||(g.location||"").toLowerCase().includes(i.toLowerCase()),v=l==="all"||l==="active"&&(g.isActive||!1)||l==="inactive"&&!g.isActive||l==="pending"&&!g.isActive||l==="suspended"&&!g.isActive,w=d==="all"||(g.subscription||"Basic")===d;return j&&v&&w}),p=g=>g?r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Active"}):r.jsx(Te,{className:"bg-red-100 text-red-800",children:"Inactive"}),f=g=>{switch(g){case"Premium":return r.jsx(Te,{className:"bg-purple-100 text-purple-800",children:"Premium"});case"Basic":return r.jsx(Te,{className:"bg-blue-100 text-blue-800",children:"Basic"});default:return r.jsx(Te,{variant:"outline",children:g})}},y=async g=>{try{await Kd.toggleSchoolStatus(g);const j=await Kd.getAllSchools();s(j)}catch(j){console.error("Error toggling school status:",j)}};return n?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"space-y-2",children:[...Array(5)].map((g,j)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},j))})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Schools Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage all registered schools and their subscriptions"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{variant:"outline",children:[r.jsx(Fn,{size:16,className:"mr-2"}),"Export"]}),r.jsxs(fe,{children:[r.jsx(ks,{size:16,className:"mr-2"}),"Add School"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Schools"}),r.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:t.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last month"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Active Schools"}),r.jsx(ur,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:t.filter(g=>g.isActive).length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Inactive Schools"}),r.jsx(bn,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:t.filter(g=>!g.isActive).length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently inactive"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Premium Schools"}),r.jsx(Te,{className:"bg-purple-100 text-purple-800",children:"Premium"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:t.filter(g=>g.subscription==="Premium").length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Premium subscriptions"})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Filters"}),r.jsx(br,{children:"Filter schools by various criteria"})]}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ws,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Oe,{placeholder:"Search schools...",value:i,onChange:g=>o(g.target.value),className:"pl-10"})]}),r.jsxs(Jt,{value:l,onValueChange:c,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Filter by status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Status"}),r.jsx(Re,{value:"active",children:"Active"}),r.jsx(Re,{value:"inactive",children:"Inactive"}),r.jsx(Re,{value:"pending",children:"Pending"}),r.jsx(Re,{value:"suspended",children:"Suspended"})]})]}),r.jsxs(Jt,{value:d,onValueChange:u,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Filter by subscription"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Subscriptions"}),r.jsx(Re,{value:"Premium",children:"Premium"}),r.jsx(Re,{value:"Basic",children:"Basic"})]})]}),r.jsxs(fe,{variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Vo,{size:16}),"Clear Filters"]})]})})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsxs(Je,{children:["Schools (",h.length,")"]}),r.jsx(br,{children:"All registered schools in the system"})]}),r.jsx(Ve,{children:h.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ks,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Schools Found"}),r.jsx("p",{className:"text-muted-foreground",children:t.length===0?"No schools are currently registered in the system.":"No schools match your current filters."})]}):r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"School Name"}),r.jsx(ut,{children:"Principal"}),r.jsx(ut,{children:"Location"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Subscription"}),r.jsx(ut,{children:"Students"}),r.jsx(ut,{children:"Staff"}),r.jsx(ut,{children:"Last Active"}),r.jsx(ut,{className:"text-right",children:"Actions"})]})}),r.jsx(ja,{children:h.map(g=>{var j,v,w;return r.jsxs(Kr,{children:[r.jsx(ct,{className:"font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:g.name||"Unknown School"}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>e(`/super-admin/schools/${g._id}`),className:"h-6 w-6 p-0",children:r.jsx(ls,{className:"h-3 w-3"})})]})}),r.jsx(ct,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:((j=g.principal)==null?void 0:j.name)||"N/A"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:((v=g.principal)==null?void 0:v.email)||"N/A"})]})}),r.jsx(ct,{children:g.location||"N/A"}),r.jsx(ct,{children:p(g.isActive||!1)}),r.jsx(ct,{children:f(g.subscription||"Basic")}),r.jsx(ct,{children:(g.currentStudents||0).toLocaleString()}),r.jsx(ct,{children:((w=g.staff)==null?void 0:w.toLocaleString())||"N/A"}),r.jsx(ct,{children:g.lastActive||"Never"}),r.jsx(ct,{className:"text-right",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsx(od,{children:"Actions"}),r.jsxs(Wt,{onClick:()=>e(`/super-admin/schools/${g._id}`),children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"View Details"]}),r.jsxs(Wt,{children:[r.jsx(na,{className:"mr-2 h-4 w-4"}),"Edit School"]}),r.jsx(Wt,{onClick:()=>y(g._id),children:g.isActive?r.jsxs(r.Fragment,{children:[r.jsx(fu,{className:"mr-2 h-4 w-4"}),"Deactivate School"]}):r.jsxs(r.Fragment,{children:[r.jsx(ur,{className:"mr-2 h-4 w-4"}),"Activate School"]})}),r.jsx(bu,{}),r.jsxs(Wt,{className:"text-red-600",children:[r.jsx(Da,{className:"mr-2 h-4 w-4"}),"Delete School"]})]})]})})]},g._id)})})]})})]})]})},kee=()=>{var p;const{id:e}=DO(),t=Ai(),[s,n]=x.useState(null),[a,i]=x.useState(!0),[o,l]=x.useState(null);x.useEffect(()=>{(async()=>{if(e){i(!0);try{const y=await Kd.getSchoolById(e);n(y),l(null)}catch(y){console.error("Error fetching school details:",y),l("Failed to load school details")}finally{i(!1)}}})()},[e]);const c=async()=>{if(s)try{await Kd.toggleSchoolStatus(s._id);const f=await Kd.getSchoolById(s._id);n(f)}catch(f){console.error("Error toggling school status:",f)}},d=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),u=f=>f?r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Active"}):r.jsx(Te,{className:"bg-red-100 text-red-800",children:"Inactive"}),h=f=>{switch(f){case"Premium":return r.jsx(Te,{className:"bg-purple-100 text-purple-800",children:"Premium"});case"Basic":return r.jsx(Te,{className:"bg-blue-100 text-blue-800",children:"Basic"});default:return r.jsx(Te,{variant:"outline",children:f})}};return a?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(4)].map((f,y)=>r.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},y))})]})}):o||!s?r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"flex items-center gap-4 mb-6",children:r.jsxs(fe,{variant:"outline",onClick:()=>t(-1),children:[r.jsx(qj,{className:"mr-2 h-4 w-4"}),"Back"]})}),r.jsx(Me,{children:r.jsx(Ve,{className:"pt-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Zn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"School Not Found"}),r.jsx("p",{className:"text-muted-foreground",children:o||"The requested school could not be found."})]})})})]}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(fe,{variant:"outline",onClick:()=>t(-1),children:[r.jsx(qj,{className:"mr-2 h-4 w-4"}),"Back"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s.name}),r.jsx("p",{className:"text-muted-foreground",children:"School Details"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{variant:"outline",children:[r.jsx(na,{className:"mr-2 h-4 w-4"}),"Edit School"]}),r.jsx(fe,{variant:s.isActive?"destructive":"default",onClick:c,children:s.isActive?r.jsxs(r.Fragment,{children:[r.jsx(fu,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):r.jsxs(r.Fragment,{children:[r.jsx(ur,{className:"mr-2 h-4 w-4"}),"Activate"]})})]})]}),r.jsxs("div",{className:"flex gap-4",children:[u(s.isActive),h(s.subscription||"Basic")]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(ks,{className:"h-5 w-5"}),"School Information"]})}),r.jsx(Ve,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"School Name"}),r.jsx("p",{className:"text-lg font-semibold",children:s.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"School Type"}),r.jsx("p",{className:"text-lg capitalize",children:s.type})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),r.jsx("p",{className:"text-lg",children:s.address})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),r.jsx("p",{className:"text-lg",children:s.location})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),r.jsx("p",{className:"text-lg",children:s.phone})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),r.jsx("p",{className:"text-lg",children:s.email})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(Qi,{className:"h-5 w-5"}),"Principal Information"]})}),r.jsx(Ve,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Principal Name"}),r.jsx("p",{className:"text-lg font-semibold",children:s.principal.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Principal Phone"}),r.jsx("p",{className:"text-lg",children:s.principal.phone})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Principal Email"}),r.jsx("p",{className:"text-lg",children:s.principal.email})]})]})})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsxs(Je,{className:"flex items-center gap-2",children:[r.jsx(ro,{className:"h-5 w-5"}),"School Statistics"]})}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.capacity.toLocaleString()}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Capacity"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.currentStudents.toLocaleString()}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Students"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((p=s.staff)==null?void 0:p.toLocaleString())||"N/A"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Staff Members"})]})]})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsx(Je,{children:"Quick Actions"})}),r.jsxs(Ve,{className:"space-y-2",children:[r.jsxs(fe,{variant:"outline",className:"w-full justify-start",children:[r.jsx(na,{className:"mr-2 h-4 w-4"}),"Edit School"]}),r.jsxs(fe,{variant:"outline",className:"w-full justify-start",children:[r.jsx(hr,{className:"mr-2 h-4 w-4"}),"View Students"]}),r.jsxs(fe,{variant:"outline",className:"w-full justify-start",children:[r.jsx(Qi,{className:"mr-2 h-4 w-4"}),"View Staff"]}),r.jsxs(fe,{variant:"outline",className:"w-full justify-start",children:[r.jsx(ks,{className:"mr-2 h-4 w-4"}),"Manage Routes"]})]})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsx(Je,{children:"Timeline"})}),r.jsxs(Ve,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"School Created"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:d(s.createdAt)})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Last Updated"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:d(s.updatedAt)})]})]}),s.lastActive&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Last Active"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:s.lastActive})]})]})]})]}),r.jsxs(Me,{children:[r.jsx(Ke,{children:r.jsx(Je,{children:"Contact Information"})}),r.jsxs(Ve,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zo,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:s.phone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Oo,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:s.email})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:s.address})]})]})]})]})]})]})},M3={async getSubscriptionPlans(){try{return(await Mt.get("/subscription-plans/")).data}catch(e){throw console.error("Error fetching subscription plans:",e),e}},async createSubscriptionPlan(e){try{return(await Mt.post("/subscription-plans/",e)).data}catch(t){throw console.error("Error creating subscription plan:",t),t}},async updateSubscriptionPlan(e,t){try{return(await Mt.put(`/subscription-plans/${e}/`,t)).data}catch(s){throw console.error("Error updating subscription plan:",s),s}},async deleteSubscriptionPlan(e){try{await Mt.delete(`/subscription-plans/${e}/`)}catch(t){throw console.error("Error deleting subscription plan:",t),t}},async getSubscriptionPlan(e){try{return(await Mt.get(`/subscription-plans/${e}/`)).data}catch(t){throw console.error("Error fetching subscription plan:",t),t}}},Aee=[{value:"monthly",label:"Monthly"},{value:"annually",label:"Annually"},{value:"quarterly",label:"Quarterly"}],Pee=()=>{const{toast:e}=Zs(),[t,s]=x.useState([]),[n,a]=x.useState([]),[i,o]=x.useState(!0),[l,c]=x.useState(""),[d,u]=x.useState("all"),[h,p]=x.useState("all"),[f,y]=x.useState("plans"),[g,j]=x.useState(!1),[v,w]=x.useState(!1),[N,C]=x.useState({name:"",description:"",base_price:"",price_per_student:"",price_per_bus:"",default_billing_cycle:"monthly",is_active:!0,features:{max_students:100,max_parents:100,max_buses:5,sms_notifications:!1,whatsapp_integration:!1,realtime_tracking:!1,parent_app_access:!1,basic_reports:!1,driver_management:!1,route_optimization:!1,advanced_analytics:!1,api_access:!1,geofencing:!1,speed_monitoring:!1,fuel_tracking:!1,maintenance_tracking:!1,custom_integrations:!1,priority_support:!1}});x.useEffect(()=>{k(),O()},[]);const k=async()=>{try{o(!0);const P=await M3.getSubscriptionPlans();console.log("API Response:",P);const A=Array.isArray(P)?P:(P==null?void 0:P.results)||(P==null?void 0:P.data)||[];console.log("Processed plans:",A),s(A||[]),A&&A.length>0&&e({title:"Success",description:"Subscription plans loaded successfully!"})}catch(P){console.error("Error fetching subscription plans:",P),e({title:"Error",description:"Failed to load subscription plans. Using mock data.",variant:"destructive"}),s([{id:"1",name:"premium_school",description:"Comprehensive solution for large schools with advanced requirements. Full API access, fuel tracking, and priority support.",base_price:"10000.00",price_per_student:"12.00",price_per_bus:"500.00",features_json:{max_students:1e3,max_parents:1e3,max_buses:15,sms_notifications:!0,whatsapp_integration:!0,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!0,advanced_analytics:!0,api_access:!0,geofencing:!0,speed_monitoring:!0,fuel_tracking:!0,maintenance_tracking:!0,custom_integrations:!0,priority_support:!0},is_active:!0,default_billing_cycle:"annually"},{id:"2",name:"basic_school",description:"Essential features for small to medium schools. Basic tracking and reporting capabilities.",base_price:"5000.00",price_per_student:"8.00",price_per_bus:"300.00",features_json:{max_students:500,max_parents:500,max_buses:8,sms_notifications:!0,whatsapp_integration:!1,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!1,advanced_analytics:!1,api_access:!1,geofencing:!1,speed_monitoring:!1,fuel_tracking:!1,maintenance_tracking:!1,custom_integrations:!1,priority_support:!1},is_active:!0,default_billing_cycle:"monthly"}])}finally{o(!1)}},O=async()=>{a([{id:"1",schoolName:"Springfield High School",plan:"premium_school",status:"active",amount:299.99,billingCycle:"Monthly",nextBilling:"2024-02-15",startDate:"2023-09-15",endDate:"2024-09-15",features:["Unlimited Students","Advanced Analytics","Priority Support"],paymentMethod:"Credit Card",lastPayment:"2024-01-15"},{id:"2",schoolName:"Lincoln Elementary",plan:"basic_school",status:"active",amount:99.99,billingCycle:"Monthly",nextBilling:"2024-02-20",startDate:"2023-10-20",endDate:"2024-10-20",features:["Up to 500 Students","Basic Analytics"],paymentMethod:"Credit Card",lastPayment:"2024-01-20"}]),o(!1)},R=async()=>{try{w(!0),await M3.createSubscriptionPlan({...N,features_json:N.features}),j(!1),k(),e({title:"Success",description:"Subscription plan created successfully!"}),C({name:"",description:"",base_price:"",price_per_student:"",price_per_bus:"",default_billing_cycle:"monthly",is_active:!0,features:{max_students:100,max_parents:100,max_buses:5,sms_notifications:!1,whatsapp_integration:!1,realtime_tracking:!1,parent_app_access:!1,basic_reports:!1,driver_management:!1,route_optimization:!1,advanced_analytics:!1,api_access:!1,geofencing:!1,speed_monitoring:!1,fuel_tracking:!1,maintenance_tracking:!1,custom_integrations:!1,priority_support:!1}})}catch(P){console.error("Error creating subscription plan:",P),e({title:"Error",description:"Failed to create subscription plan. Please try again.",variant:"destructive"})}finally{w(!1)}},E=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseFloat(P)),I=P=>{switch(P){case"active":return r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Active"});case"expired":return r.jsx(Te,{className:"bg-red-100 text-red-800",children:"Expired"});case"cancelled":return r.jsx(Te,{variant:"secondary",children:"Cancelled"});case"pending":return r.jsx(Te,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});default:return r.jsx(Te,{variant:"outline",children:P})}},D=P=>{switch(P){case"premium_school":return r.jsx(Te,{className:"bg-purple-100 text-purple-800",children:"Premium"});case"basic_school":return r.jsx(Te,{className:"bg-blue-100 text-blue-800",children:"Basic"});default:return r.jsx(Te,{variant:"outline",children:P})}};return i?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"space-y-2",children:[...Array(5)].map((P,A)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},A))})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subscriptions Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage subscription plans and school subscriptions"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{variant:"outline",children:[r.jsx(Fn,{size:16,className:"mr-2"}),"Export"]}),r.jsxs(Hr,{open:g,onOpenChange:j,children:[r.jsx(nu,{asChild:!0,children:r.jsxs(fe,{children:[r.jsx(Fa,{size:16,className:"mr-2"}),"Create Plan"]})}),r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Mr,{children:[r.jsx($r,{children:"Create New Subscription Plan"}),r.jsx(El,{children:"Define a new subscription plan with features and pricing"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"planName",children:"Plan Name"}),r.jsx(Oe,{id:"planName",value:N.name,onChange:P=>C(A=>({...A,name:P.target.value})),placeholder:"e.g., premium_school"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"billingCycle",children:"Default Billing Cycle"}),r.jsxs(Jt,{value:N.default_billing_cycle,onValueChange:P=>C(A=>({...A,default_billing_cycle:P})),children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsx(Kt,{children:Aee.map(P=>r.jsx(Re,{value:P.value,children:P.label},P.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"basePrice",children:"Base Price"}),r.jsx(Oe,{id:"basePrice",type:"number",value:N.base_price,onChange:P=>C(A=>({...A,base_price:P.target.value})),placeholder:"0.00"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"pricePerStudent",children:"Price per Student"}),r.jsx(Oe,{id:"pricePerStudent",type:"number",value:N.price_per_student,onChange:P=>C(A=>({...A,price_per_student:P.target.value})),placeholder:"0.00"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"pricePerBus",children:"Price per Bus"}),r.jsx(Oe,{id:"pricePerBus",type:"number",value:N.price_per_bus,onChange:P=>C(A=>({...A,price_per_bus:P.target.value})),placeholder:"0.00"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"maxStudents",children:"Max Students"}),r.jsx(Oe,{id:"maxStudents",type:"number",value:N.features.max_students,onChange:P=>C(A=>({...A,features:{...A.features,max_students:parseInt(P.target.value)}}))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"description",children:"Description"}),r.jsx(Ma,{id:"description",value:N.description,onChange:P=>C(A=>({...A,description:P.target.value})),rows:3})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(le,{children:"Features"}),r.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg p-4",children:r.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(N.features).map(([P,A])=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ts,{checked:typeof A=="boolean"?A:!1,onCheckedChange:$=>C(U=>({...U,features:{...U.features,[P]:$}}))}),r.jsx(le,{className:"text-sm capitalize",children:P.replace(/_/g," ")})]},P))})})]}),r.jsxs(Kp,{children:[r.jsx(fe,{variant:"outline",onClick:()=>j(!1),disabled:v,children:"Cancel"}),r.jsx(fe,{onClick:R,disabled:v,children:v?"Creating...":"Create Plan"})]})]})]})]})]}),r.jsxs("div",{className:"flex space-x-4 border-b",children:[r.jsx("button",{className:`px-4 py-2 font-medium ${f==="plans"?"border-b-2 border-purple-500 text-purple-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>y("plans"),children:"Subscription Plans"}),r.jsx("button",{className:`px-4 py-2 font-medium ${f==="schools"?"border-b-2 border-purple-500 text-purple-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>y("schools"),children:"School Subscriptions"})]}),f==="plans"?r.jsx("div",{className:"space-y-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(!t||!Array.isArray(t)?[]:t).map(P=>r.jsxs(Me,{className:"relative",children:[r.jsxs(Ke,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Je,{className:"text-lg",children:P.name.replace(/_/g," ").toUpperCase()}),r.jsx(Te,{variant:P.is_active?"default":"secondary",children:P.is_active?"Active":"Inactive"})]}),r.jsx(br,{children:P.description})]}),r.jsxs(Ve,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Base Price:"}),r.jsx("span",{className:"font-medium",children:E(P.base_price)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Per Student:"}),r.jsx("span",{className:"font-medium",children:E(P.price_per_student)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Per Bus:"}),r.jsx("span",{className:"font-medium",children:E(P.price_per_bus)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Billing Cycle:"}),r.jsx("span",{className:"font-medium capitalize",children:P.default_billing_cycle})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Features:"}),r.jsx("div",{className:"grid grid-cols-1 gap-1",children:Object.entries(P.features_json).map(([A,$])=>typeof $=="boolean"&&$?r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(ur,{className:"h-3 w-3 text-green-600"}),r.jsx("span",{className:"capitalize",children:A.replace(/_/g," ")})]},A):typeof $=="number"&&$>0?r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(hr,{className:"h-3 w-3 text-blue-600"}),r.jsxs("span",{className:"capitalize",children:[A.replace(/_/g," "),": ",$]})]},A):null)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{size:"sm",variant:"outline",className:"flex-1",children:[r.jsx(na,{className:"h-3 w-3 mr-1"}),"Edit"]}),r.jsxs(fe,{size:"sm",variant:"outline",className:"flex-1",children:[r.jsx(ls,{className:"h-3 w-3 mr-1"}),"View"]})]})]})]},P.id))})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Revenue"}),r.jsx(kf,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:E(n.reduce((P,A)=>P+A.amount,0).toString())}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Active Subscriptions"}),r.jsx(ur,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.filter(P=>P.status==="active").length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Monthly Revenue"}),r.jsx(ro,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:E(n.filter(P=>P.billingCycle==="Monthly").reduce((P,A)=>P+A.amount,0).toString())}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"This month's revenue"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Expiring Soon"}),r.jsx(Zn,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.filter(P=>{const A=new Date(P.nextBilling),$=new Date;return Math.ceil((A.getTime()-$.getTime())/(1e3*60*60*24))<=30&&P.status==="active"}).length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsxs(Je,{children:["School Subscriptions (",n.length,")"]}),r.jsx(br,{children:"All active school subscriptions"})]}),r.jsx(Ve,{children:r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"School"}),r.jsx(ut,{children:"Plan"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Amount"}),r.jsx(ut,{children:"Billing Cycle"}),r.jsx(ut,{children:"Next Billing"}),r.jsx(ut,{children:"Payment Method"}),r.jsx(ut,{children:"Last Payment"}),r.jsx(ut,{className:"text-right",children:"Actions"})]})}),r.jsx(ja,{children:n.map(P=>r.jsxs(Kr,{children:[r.jsx(ct,{className:"font-medium",children:P.schoolName}),r.jsx(ct,{children:D(P.plan)}),r.jsx(ct,{children:I(P.status)}),r.jsx(ct,{children:E(P.amount.toString())}),r.jsx(ct,{children:P.billingCycle}),r.jsx(ct,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ai,{className:"h-4 w-4 text-muted-foreground"}),P.nextBilling]})}),r.jsx(ct,{children:P.paymentMethod}),r.jsx(ct,{children:P.lastPayment}),r.jsx(ct,{className:"text-right",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsx(od,{children:"Actions"}),r.jsxs(Wt,{children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"View Details"]}),r.jsxs(Wt,{children:[r.jsx(na,{className:"mr-2 h-4 w-4"}),"Edit Subscription"]}),r.jsxs(Wt,{children:[r.jsx(ta,{className:"mr-2 h-4 w-4"}),"Manage Billing"]}),r.jsx(bu,{}),r.jsxs(Wt,{className:"text-red-600",children:[r.jsx(Da,{className:"mr-2 h-4 w-4"}),"Cancel Subscription"]})]})]})})]},P.id))})]})})]})]})]})},Eee=({isOpen:e,onClose:t})=>{const s=ns(),{toast:n}=Zs(),{schools:a}=At(u=>u.schools),{creating:i}=At(u=>u.schoolSubscriptions),[o,l]=x.useState({school:"",plan:"",billing_cycle:"monthly",start_date:""});x.useEffect(()=>{e&&s(vl())},[e,s]);const c=(u,h)=>{l(p=>({...p,[u]:h}))},d=async u=>{if(u.preventDefault(),!o.school||!o.plan||!o.start_date){n({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{const h={...o,school:parseInt(o.school)};await s(u0(h)).unwrap(),n({title:"Subscription Created",description:"School subscription has been created successfully."}),l({school:"",plan:"",billing_cycle:"monthly",start_date:""}),t()}catch{n({title:"Error",description:"Failed to create subscription. Please try again.",variant:"destructive"})}};return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"max-w-md",children:[r.jsxs(Mr,{children:[r.jsxs($r,{className:"flex items-center gap-2",children:[r.jsx(ta,{className:"h-5 w-5"}),"Create New Subscription"]}),r.jsx(El,{children:"Create a new subscription for a school."})]}),r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"school",children:"School"}),r.jsxs(Jt,{value:o.school,onValueChange:u=>c("school",u),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select a school"})}),r.jsx(Kt,{children:a.map(u=>r.jsx(Re,{value:u.id.toString(),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ks,{className:"h-4 w-4"}),u.name]})},u.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"plan",children:"Plan"}),r.jsxs(Jt,{value:o.plan,onValueChange:u=>c("plan",u),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select a plan"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"basic_school",children:"Basic School Plan"}),r.jsx(Re,{value:"premium_school",children:"Premium School Plan"}),r.jsx(Re,{value:"enterprise_school",children:"Enterprise School Plan"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"billing_cycle",children:"Billing Cycle"}),r.jsxs(Jt,{value:o.billing_cycle,onValueChange:u=>c("billing_cycle",u),children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"monthly",children:"Monthly"}),r.jsx(Re,{value:"annually",children:"Annually"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"start_date",children:"Start Date"}),r.jsx(Oe,{id:"start_date",type:"date",value:o.start_date,onChange:u=>c("start_date",u.target.value),required:!0})]}),r.jsxs(Kp,{children:[r.jsx(fe,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),r.jsx(fe,{type:"submit",disabled:i,children:i?"Creating...":"Create Subscription"})]})]})]})})},Lee=({subscription:e,isOpen:t,onClose:s})=>{if(!e)return null;const n=c=>{try{return c?new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(c)):"N/A"}catch{return"N/A"}},a=c=>{try{return c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}catch{return"N/A"}},i=c=>{switch(c){case"active":return r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Active"});case"pending":return r.jsx(Te,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return r.jsx(Te,{className:"bg-red-100 text-red-800",children:"Cancelled"});case"expired":return r.jsx(Te,{className:"bg-gray-100 text-gray-800",children:"Expired"});default:return r.jsx(Te,{variant:"outline",children:c})}},o=c=>{switch(c){case"monthly":return r.jsx(Te,{className:"bg-blue-100 text-blue-800",children:"Monthly"});case"annually":return r.jsx(Te,{className:"bg-purple-100 text-purple-800",children:"Annually"});default:return r.jsx(Te,{variant:"outline",children:c})}},l=()=>{try{const c=pS(e);Qc(c,`subscription-${e.id}-${new Date().toISOString().split("T")[0]}.pdf`)}catch(c){console.error("Error generating PDF:",c)}};return r.jsx(Hr,{open:t,onOpenChange:s,children:r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Mr,{children:[r.jsxs($r,{className:"flex items-center gap-2",children:[r.jsx(ta,{className:"h-5 w-5"}),"Subscription Details"]}),r.jsxs(El,{children:["Detailed view of subscription ",e.id]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Subscription Information"}),r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Subscription ID:"}),r.jsx("span",{className:"font-medium",children:e.id})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Status:"}),i(e.status)]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),r.jsx("span",{className:"font-medium",children:e.plan_name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Billing Cycle:"}),o(e.billing_cycle)]})]})]})}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:"School Information"}),r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"School:"}),r.jsx("span",{className:"font-medium",children:e.school_name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"School ID:"}),r.jsx("span",{className:"font-medium",children:e.school})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Price Charged:"}),r.jsx("span",{className:"font-medium",children:n(e.price_charged)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Calculated Cost:"}),r.jsx("span",{className:"font-medium",children:n(e.calculated_cost.toString())})]})]})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Usage Statistics"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[r.jsx(hr,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),r.jsx("div",{className:"text-2xl font-bold",children:e.current_students_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Students"})]}),r.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[r.jsx(cn,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),r.jsx("div",{className:"text-2xl font-bold",children:e.current_buses_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Buses"})]}),r.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[r.jsx(hr,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),r.jsx("div",{className:"text-2xl font-bold",children:e.current_parents_count}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Parents"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Important Dates"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ai,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Start Date:"}),r.jsx("span",{className:"font-medium",children:a(e.start_date)})]}),e.end_date&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ai,{className:"h-4 w-4 text-red-600"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"End Date:"}),r.jsx("span",{className:"font-medium",children:a(e.end_date)})]}),e.next_billing_date&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(bn,{className:"h-4 w-4 text-yellow-600"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Next Billing:"}),r.jsx("span",{className:"font-medium",children:a(e.next_billing_date)})]})]})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsxs(fe,{variant:"outline",onClick:l,children:[r.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),r.jsxs(fe,{variant:"outline",children:[r.jsx(ks,{className:"mr-2 h-4 w-4"}),"View School"]}),e.status==="pending"&&r.jsxs(fe,{children:[r.jsx(ur,{className:"mr-2 h-4 w-4"}),"Activate"]}),e.status==="active"&&r.jsxs(fe,{variant:"outline",children:[r.jsx(fu,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})]})})},Ree=()=>{const e=ns(),{toast:t}=Zs(),{subscriptions:s,loading:n,error:a}=At(A=>A.schoolSubscriptions),[i,o]=x.useState(""),[l,c]=x.useState("all"),[d,u]=x.useState("all"),[h,p]=x.useState(!1),[f,y]=x.useState(null),[g,j]=x.useState(!1);x.useEffect(()=>{e(Pc())},[e]);const v=()=>{p(!1),e(Pc())},w=A=>{y(A),j(!0)},N=()=>{j(!1),y(null)},C=()=>{try{const A=["School","Plan","Status","Billing Cycle","Price","Students","Buses","Parents"],$=O.map(de=>[de.school_name,de.plan_name,de.status,de.billing_cycle,D(de.price_charged),de.current_students_count.toString(),de.current_buses_count.toString(),de.current_parents_count.toString()]),U=mS({headers:A,rows:$,title:"School Subscriptions Report",subtitle:`Total Subscriptions: ${O.length}`});Qc(U,`subscriptions-report-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"PDF Downloaded",description:"Subscriptions report has been downloaded successfully."})}catch(A){console.error("Error generating PDF:",A),t({title:"Error",description:"Failed to generate PDF. Please try again.",variant:"destructive"})}},k=A=>{try{const $=pS(A);Qc($,`subscription-${A.id}-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"Subscription Downloaded",description:"Subscription PDF has been downloaded successfully."})}catch($){console.error("Error generating subscription PDF:",$),t({title:"Error",description:"Failed to generate subscription PDF. Please try again.",variant:"destructive"})}},O=s.filter(A=>{const $=A.school_name.toLowerCase().includes(i.toLowerCase())||A.plan_name.toLowerCase().includes(i.toLowerCase()),U=l==="all"||A.status===l,de=d==="all"||A.billing_cycle===d;return $&&U&&de}),R=A=>{switch(A){case"active":return r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Active"});case"pending":return r.jsx(Te,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return r.jsx(Te,{className:"bg-red-100 text-red-800",children:"Cancelled"});case"expired":return r.jsx(Te,{className:"bg-gray-100 text-gray-800",children:"Expired"});default:return r.jsx(Te,{variant:"outline",children:A})}},E=A=>{switch(A){case"monthly":return r.jsx(Te,{className:"bg-blue-100 text-blue-800",children:"Monthly"});case"annually":return r.jsx(Te,{className:"bg-purple-100 text-purple-800",children:"Annually"});default:return r.jsx(Te,{variant:"outline",children:A})}},I=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),D=A=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(A)),P=async(A,$)=>{try{await e(h0({id:A,updateData:{status:$}})).unwrap(),t({title:"Status Updated",description:"Subscription status has been updated successfully."})}catch{t({title:"Error",description:"Failed to update subscription status.",variant:"destructive"})}};return n?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"space-y-2",children:[...Array(5)].map((A,$)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},$))})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"School Subscriptions"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage school subscriptions and billing"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{variant:"outline",onClick:C,children:[r.jsx(Fn,{size:16,className:"mr-2"}),"Export All"]}),r.jsxs(fe,{onClick:()=>p(!0),children:[r.jsx(ks,{size:16,className:"mr-2"}),"New Subscription"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Subscriptions"}),r.jsx(ta,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All subscriptions"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Active Subscriptions"}),r.jsx(ur,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s.filter(A=>A.status==="active").length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Pending Subscriptions"}),r.jsx(bn,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s.filter(A=>A.status==="pending").length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting activation"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Revenue"}),r.jsx(kf,{className:"h-4 w-4 text-emerald-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:D(s.reduce((A,$)=>A+parseFloat($.price_charged),0).toString())}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All time revenue"})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Filters"}),r.jsx(br,{children:"Filter subscriptions by various criteria"})]}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ws,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Oe,{placeholder:"Search subscriptions...",value:i,onChange:A=>o(A.target.value),className:"pl-10"})]}),r.jsxs(Jt,{value:l,onValueChange:c,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Filter by status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Status"}),r.jsx(Re,{value:"active",children:"Active"}),r.jsx(Re,{value:"pending",children:"Pending"}),r.jsx(Re,{value:"cancelled",children:"Cancelled"}),r.jsx(Re,{value:"expired",children:"Expired"})]})]}),r.jsxs(Jt,{value:d,onValueChange:u,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Filter by billing cycle"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Cycles"}),r.jsx(Re,{value:"monthly",children:"Monthly"}),r.jsx(Re,{value:"annually",children:"Annually"})]})]}),r.jsxs(fe,{variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Vo,{size:16}),"Clear Filters"]})]})})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsxs(Je,{children:["School Subscriptions (",O.length,")"]}),r.jsx(br,{children:"All school subscriptions and their current status"})]}),r.jsx(Ve,{children:a?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Zn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Subscriptions"}),r.jsx("p",{className:"text-muted-foreground",children:a})]}):O.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ta,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Subscriptions Found"}),r.jsx("p",{className:"text-muted-foreground",children:s.length===0?"No school subscriptions have been created yet.":"No subscriptions match your current filters."})]}):r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"School"}),r.jsx(ut,{children:"Plan"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Billing Cycle"}),r.jsx(ut,{children:"Price"}),r.jsx(ut,{children:"Usage"}),r.jsx(ut,{children:"Start Date"}),r.jsx(ut,{className:"text-right",children:"Actions"})]})}),r.jsx(ja,{children:O.map(A=>r.jsxs(Kr,{children:[r.jsx(ct,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ks,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:A.school_name})]})}),r.jsx(ct,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:A.plan_name}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",A.plan]})]})}),r.jsx(ct,{children:R(A.status)}),r.jsx(ct,{children:E(A.billing_cycle)}),r.jsxs(ct,{children:[r.jsx("div",{className:"font-medium",children:D(A.price_charged)}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Calculated:"," ",D(A.calculated_cost.toString())]})]}),r.jsx(ct,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(hr,{className:"h-3 w-3"}),A.current_students_count," students"]}),r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(cn,{className:"h-3 w-3"}),A.current_buses_count," buses"]}),r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(hr,{className:"h-3 w-3"}),A.current_parents_count," parents"]})]})}),r.jsxs(ct,{children:[r.jsx("div",{className:"text-sm",children:I(A.start_date)}),A.next_billing_date&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Next: ",I(A.next_billing_date)]})]}),r.jsx(ct,{className:"text-right",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsx(od,{children:"Actions"}),r.jsxs(Wt,{onClick:()=>w(A),children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"View Details"]}),r.jsxs(Wt,{onClick:()=>k(A),children:[r.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),r.jsxs(Wt,{children:[r.jsx(na,{className:"mr-2 h-4 w-4"}),"Edit Subscription"]}),A.status==="pending"&&r.jsxs(Wt,{onClick:()=>P(A.id,"active"),children:[r.jsx(ur,{className:"mr-2 h-4 w-4"}),"Activate"]}),A.status==="active"&&r.jsxs(Wt,{onClick:()=>P(A.id,"cancelled"),children:[r.jsx(fu,{className:"mr-2 h-4 w-4"}),"Cancel"]}),r.jsx(bu,{}),r.jsxs(Wt,{children:[r.jsx(ta,{className:"mr-2 h-4 w-4"}),"Create Invoice"]})]})]})})]},A.id))})]})})]}),r.jsx(Eee,{isOpen:h,onClose:v}),r.jsx(Lee,{subscription:f,isOpen:g,onClose:N})]})},Tee=({isOpen:e,onClose:t})=>{const s=ns(),{toast:n}=Zs(),{subscriptions:a}=At(j=>j.schoolSubscriptions),{creating:i}=At(j=>j.invoices),[o,l]=x.useState({school:"",subscription:"",amount_due:"",currency:"KES",due_date:"",line_items:[]}),[c,d]=x.useState({description:"",quantity:1,unit_price:0,total:0});x.useEffect(()=>{e&&s(Pc())},[e,s]);const u=(j,v)=>{l(w=>({...w,[j]:v}))},h=(j,v)=>{d(w=>{const N={...w,[j]:v};return(j==="quantity"||j==="unit_price")&&(N.total=N.quantity*N.unit_price),N})},p=()=>{c.description&&c.quantity>0&&c.unit_price>0&&(l(j=>({...j,line_items:[...j.line_items,{...c}]})),d({description:"",quantity:1,unit_price:0,total:0}))},f=j=>{l(v=>({...v,line_items:v.line_items.filter((w,N)=>N!==j)}))},y=()=>o.line_items.reduce((j,v)=>j+v.total,0),g=async j=>{if(j.preventDefault(),!o.school||!o.subscription||o.line_items.length===0){n({title:"Validation Error",description:"Please fill in all required fields and add at least one line item.",variant:"destructive"});return}try{const v={...o,school:parseInt(o.school),amount_due:y().toString()};await s(f0(v)).unwrap(),n({title:"Invoice Created",description:"Invoice has been created successfully."}),l({school:"",subscription:"",amount_due:"",currency:"KES",due_date:"",line_items:[]}),t()}catch{n({title:"Error",description:"Failed to create invoice. Please try again.",variant:"destructive"})}};return r.jsx(Hr,{open:e,onOpenChange:t,children:r.jsxs(Or,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Mr,{children:[r.jsxs($r,{className:"flex items-center gap-2",children:[r.jsx(ra,{className:"h-5 w-5"}),"Create New Invoice"]}),r.jsx(El,{children:"Create a new invoice for a school subscription."})]}),r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"school",children:"School"}),r.jsxs(Jt,{value:o.school,onValueChange:j=>u("school",j),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select a school"})}),r.jsx(Kt,{children:a.map(j=>r.jsx(Re,{value:j.school.toString(),children:j.school_name},j.school))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"subscription",children:"Subscription"}),r.jsxs(Jt,{value:o.subscription,onValueChange:j=>u("subscription",j),children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Select a subscription"})}),r.jsx(Kt,{children:a.filter(j=>j.school.toString()===o.school).map(j=>r.jsxs(Re,{value:j.id,children:[j.plan_name," - ",j.billing_cycle]},j.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"currency",children:"Currency"}),r.jsxs(Jt,{value:o.currency,onValueChange:j=>u("currency",j),children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"KES",children:"KES (Kenyan Shilling)"}),r.jsx(Re,{value:"USD",children:"USD (US Dollar)"}),r.jsx(Re,{value:"EUR",children:"EUR (Euro)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"due_date",children:"Due Date"}),r.jsx(Oe,{id:"due_date",type:"date",value:o.due_date,onChange:j=>u("due_date",j.target.value),required:!0})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(le,{children:"Line Items"}),r.jsxs(fe,{type:"button",variant:"outline",size:"sm",onClick:p,disabled:!c.description||c.quantity<=0||c.unit_price<=0,children:[r.jsx(Fa,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"description",children:"Description"}),r.jsx(Oe,{id:"description",value:c.description,onChange:j=>h("description",j.target.value),placeholder:"Item description"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"quantity",children:"Quantity"}),r.jsx(Oe,{id:"quantity",type:"number",min:"1",value:c.quantity,onChange:j=>h("quantity",parseInt(j.target.value))})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"unit_price",children:"Unit Price"}),r.jsx(Oe,{id:"unit_price",type:"number",min:"0",step:"0.01",value:c.unit_price,onChange:j=>h("unit_price",parseFloat(j.target.value))})]}),r.jsxs("div",{children:[r.jsx(le,{children:"Total"}),r.jsx(Oe,{value:c.total.toFixed(2),readOnly:!0,className:"bg-gray-50"})]})]}),o.line_items.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{children:"Added Items"}),r.jsx("div",{className:"space-y-2",children:o.line_items.map((j,v)=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:j.description}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.quantity,"  ",j.unit_price.toFixed(2)," ="," ",j.total.toFixed(2)]})]}),r.jsx(fe,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(v),children:r.jsx(mu,{className:"h-4 w-4"})})]},v))})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Amount"}),r.jsxs("div",{className:"text-2xl font-bold",children:[o.currency," ",y().toFixed(2)]})]})}),r.jsxs(Kp,{children:[r.jsx(fe,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),r.jsx(fe,{type:"submit",disabled:i||o.line_items.length===0,children:i?"Creating...":"Create Invoice"})]})]})]})})},Iee=({invoice:e,isOpen:t,onClose:s})=>{var c,d;if(!e)return null;const n=(u,h)=>{try{return!u||!h?"N/A":new Intl.NumberFormat("en-KE",{style:"currency",currency:h}).format(parseFloat(u))}catch{return"N/A"}},a=u=>{try{return u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}catch{return"N/A"}},i=u=>{switch(u){case"paid":return r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Paid"});case"pending":return r.jsx(Te,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"overdue":return r.jsx(Te,{className:"bg-red-100 text-red-800",children:"Overdue"});case"cancelled":return r.jsx(Te,{className:"bg-gray-100 text-gray-800",children:"Cancelled"});default:return r.jsx(Te,{variant:"outline",children:u})}},o=((c=e.line_items)==null?void 0:c.reduce((u,h)=>u+((h==null?void 0:h.total)||0),0))||0,l=()=>{try{const u=gI(e);Qc(u,`invoice-${e.id}-${new Date().toISOString().split("T")[0]}.pdf`)}catch(u){console.error("Error generating PDF:",u)}};return r.jsx(Hr,{open:t,onOpenChange:s,children:r.jsxs(Or,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Mr,{children:[r.jsxs($r,{className:"flex items-center gap-2",children:[r.jsx(ra,{className:"h-5 w-5"}),"Invoice Details"]}),r.jsxs(El,{children:["Detailed view of invoice ",e.id]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Invoice Information"}),r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Invoice ID:"}),r.jsx("span",{className:"font-medium",children:e.invoice_id||e.id})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Status:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[i(e.status),e.is_overdue&&r.jsx(Te,{variant:"destructive",className:"text-xs",children:"Overdue"})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"School:"}),r.jsx("span",{className:"font-medium",children:e.school_name||`School ${e.school}`})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Subscription Plan:"}),r.jsx("span",{className:"font-medium",children:e.subscription_plan||"N/A"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Invoice Date:"}),r.jsx("span",{className:"font-medium",children:a(e.invoice_date)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Due Date:"}),r.jsx("span",{className:"font-medium",children:a(e.due_date)})]}),e.paid_at&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Paid Date:"}),r.jsx("span",{className:"font-medium",children:a(e.paid_at)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Currency:"}),r.jsx("span",{className:"font-medium",children:e.currency})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Amount Due:"}),r.jsx("span",{className:"font-medium",children:n(e.amount_due,e.currency)})]}),parseFloat(e.amount_paid||"0")>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Amount Paid:"}),r.jsx("span",{className:"font-medium",children:n(e.amount_paid,e.currency)})]})]})]})}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:"School Information"}),r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"School ID:"}),r.jsx("span",{className:"font-medium",children:e.school})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Subscription:"}),r.jsx("span",{className:"font-medium",children:e.subscription})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Amount Due:"}),r.jsx("span",{className:"font-medium",children:n(e.amount_due,e.currency)})]})]})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Line Items"}),r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"Description"}),r.jsx(ut,{children:"Quantity"}),r.jsx(ut,{children:"Unit Price"}),r.jsx(ut,{className:"text-right",children:"Total"})]})}),r.jsx(ja,{children:(d=e.line_items)==null?void 0:d.map((u,h)=>r.jsxs(Kr,{children:[r.jsx(ct,{className:"font-medium",children:u.description}),r.jsx(ct,{children:u.quantity}),r.jsx(ct,{children:n(u.unit_price.toString(),e.currency)}),r.jsx(ct,{className:"text-right font-medium",children:n(u.total.toString(),e.currency)})]},h))})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Amount"}),r.jsx("div",{className:"text-2xl font-bold",children:n(o.toString(),e.currency)})]})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsxs(fe,{variant:"outline",onClick:l,children:[r.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),r.jsxs(fe,{variant:"outline",children:[r.jsx(Cy,{className:"mr-2 h-4 w-4"}),"Send Invoice"]}),e.status==="pending"&&r.jsxs(fe,{children:[r.jsx(ta,{className:"mr-2 h-4 w-4"}),"Process Payment"]})]})]})]})})},Fee=()=>{const e=ns(),{toast:t}=Zs(),{invoices:s,loading:n,error:a}=At(I=>I.invoices),[i,o]=x.useState(""),[l,c]=x.useState("all"),[d,u]=x.useState(!1),[h,p]=x.useState(null),[f,y]=x.useState(!1);x.useEffect(()=>{e(Lh())},[e]),x.useEffect(()=>{var I;s.length>0&&(console.log("Invoices data structure:",s[0]),console.log("First invoice ID:",(I=s[0])==null?void 0:I.id))},[s]);const g=()=>{u(!1),e(Lh())},j=I=>{p(I),y(!0)},v=()=>{y(!1),p(null)},w=()=>{try{const I=["Invoice ID","School","Subscription Plan","Amount Due","Amount Paid","Status","Due Date","Overdue","Line Items"],D=C.map(A=>{var $;return[A.invoice_id||A.id||"N/A",A.school_name||`School ${A.school||"N/A"}`,A.subscription_plan||"N/A",R(A.amount_due||"0",A.currency||"KES"),R(A.amount_paid||"0",A.currency||"KES"),A.status||"N/A",A.due_date?O(A.due_date):"N/A",A.is_overdue?"Yes":"No",`${(($=A.line_items)==null?void 0:$.length)||0} items`]}),P=mS({headers:I,rows:D,title:"Invoices Report",subtitle:`Total Invoices: ${C.length}`});Qc(P,`invoices-report-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"PDF Downloaded",description:"Invoices report has been downloaded successfully."})}catch(I){console.error("Error generating PDF:",I),t({title:"Error",description:"Failed to generate PDF. Please try again.",variant:"destructive"})}},N=I=>{try{const D=gI(I);Qc(D,`invoice-${I.id}-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"Invoice Downloaded",description:"Invoice PDF has been downloaded successfully."})}catch(D){console.error("Error generating invoice PDF:",D),t({title:"Error",description:"Failed to generate invoice PDF. Please try again.",variant:"destructive"})}},C=s.filter(I=>{var A,$;const D=(((A=I.id)==null?void 0:A.toLowerCase())||"").includes(i.toLowerCase())||((($=I.currency)==null?void 0:$.toLowerCase())||"").includes(i.toLowerCase()),P=l==="all"||I.status===l;return D&&P}),k=I=>{switch(I){case"paid":return r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Paid"});case"pending":return r.jsx(Te,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"overdue":return r.jsx(Te,{className:"bg-red-100 text-red-800",children:"Overdue"});case"cancelled":return r.jsx(Te,{className:"bg-gray-100 text-gray-800",children:"Cancelled"});default:return r.jsx(Te,{variant:"outline",children:I})}},O=I=>{try{return I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}catch(D){return console.error("Error formatting date:",D),"N/A"}},R=(I,D)=>{try{return!I||!D?"N/A":new Intl.NumberFormat("en-KE",{style:"currency",currency:D}).format(parseFloat(I))}catch(P){return console.error("Error formatting currency:",P),"N/A"}},E=async I=>{if(console.log("Processing payment for invoice ID:",I),!I){t({title:"Error",description:"Invoice ID is missing. Cannot process payment.",variant:"destructive"});return}try{const D={status:"paid"};console.log("Updating invoice with data:",{id:I,updateData:D}),await e(m0({id:I,updateData:D})).unwrap(),t({title:"Payment Processed",description:"Invoice payment has been processed successfully."})}catch(D){console.error("Error processing payment:",D),t({title:"Error",description:"Failed to process payment.",variant:"destructive"})}};return n?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"space-y-2",children:[...Array(5)].map((I,D)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},D))})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Invoices"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage invoices and payments"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{variant:"outline",onClick:w,children:[r.jsx(Fn,{size:16,className:"mr-2"}),"Export All"]}),r.jsxs(fe,{onClick:()=>u(!0),children:[r.jsx(ra,{size:16,className:"mr-2"}),"Create Invoice"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Invoices"}),r.jsx(ra,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All invoices"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Paid Invoices"}),r.jsx(ur,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s.filter(I=>I.status==="paid").length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully paid"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Pending Invoices"}),r.jsx(bn,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s.filter(I=>I.status==="pending").length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting payment"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Revenue"}),r.jsx(kf,{className:"h-4 w-4 text-emerald-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:R(s.reduce((I,D)=>I+parseFloat(D.amount_due),0).toString(),"KES")}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All time revenue"})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Filters"}),r.jsx(br,{children:"Filter invoices by various criteria"})]}),r.jsx(Ve,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ws,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Oe,{placeholder:"Search invoices...",value:i,onChange:I=>o(I.target.value),className:"pl-10"})]}),r.jsxs(Jt,{value:l,onValueChange:c,children:[r.jsx(Gt,{children:r.jsx(Zt,{placeholder:"Filter by status"})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"all",children:"All Status"}),r.jsx(Re,{value:"paid",children:"Paid"}),r.jsx(Re,{value:"pending",children:"Pending"}),r.jsx(Re,{value:"overdue",children:"Overdue"}),r.jsx(Re,{value:"cancelled",children:"Cancelled"})]})]}),r.jsxs(fe,{variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Vo,{size:16}),"Clear Filters"]})]})})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsxs(Je,{children:["Invoices (",C.length,")"]}),r.jsx(br,{children:"All invoices and their payment status"})]}),r.jsx(Ve,{children:a?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Zn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Invoices"}),r.jsx("p",{className:"text-muted-foreground",children:a})]}):C.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ra,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Invoices Found"}),r.jsx("p",{className:"text-muted-foreground",children:s.length===0?"No invoices have been created yet.":"No invoices match your current filters."})]}):r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"Invoice ID"}),r.jsx(ut,{children:"School"}),r.jsx(ut,{children:"Subscription Plan"}),r.jsx(ut,{children:"Amount"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Due Date"}),r.jsx(ut,{children:"Line Items"}),r.jsx(ut,{className:"text-right",children:"Actions"})]})}),r.jsx(ja,{children:C.map(I=>{var P,A;console.log("Processing invoice:",I);const D=I.id||I.invoice_id||I.uuid;return console.log("Extracted invoice ID:",D),r.jsxs(Kr,{children:[r.jsxs(ct,{children:[r.jsx("div",{className:"font-medium",children:D||"N/A"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Subscription: ",I.subscription||"N/A"]})]}),r.jsx(ct,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:I.school_name||`School ${I.school}`}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",I.school]})]})}),r.jsx(ct,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:I.subscription_plan||"N/A"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",I.subscription]})]})}),r.jsxs(ct,{children:[r.jsx("div",{className:"font-medium",children:R(I.amount_due||"0",I.currency||"KES")}),parseFloat(I.amount_paid||"0")>0&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Paid:"," ",R(I.amount_paid||"0",I.currency||"KES")]})]}),r.jsx(ct,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[k(I.status),I.is_overdue&&r.jsx(Te,{variant:"destructive",className:"text-xs",children:"Overdue"})]})}),r.jsx(ct,{children:r.jsx("div",{className:"text-sm",children:I.due_date?O(I.due_date):"N/A"})}),r.jsxs(ct,{children:[r.jsxs("div",{className:"text-sm",children:[((P=I.line_items)==null?void 0:P.length)||0," items"]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total:"," ",((A=I.line_items)==null?void 0:A.reduce(($,U)=>$+((U==null?void 0:U.total)||0),0))||0]})]}),r.jsx(ct,{className:"text-right",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsx(od,{children:"Actions"}),r.jsxs(Wt,{onClick:()=>j(I),children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"View Details"]}),r.jsxs(Wt,{onClick:()=>N(I),children:[r.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),r.jsxs(Wt,{children:[r.jsx(Cy,{className:"mr-2 h-4 w-4"}),"Send Invoice"]}),I.status==="pending"&&D&&r.jsxs(Wt,{onClick:()=>E(D),children:[r.jsx(ta,{className:"mr-2 h-4 w-4"}),"Process Payment"]}),r.jsx(bu,{}),r.jsxs(Wt,{children:[r.jsx(na,{className:"mr-2 h-4 w-4"}),"Edit Invoice"]})]})]})})]},D||I.id)})})]})})]}),r.jsx(Tee,{isOpen:d,onClose:g}),r.jsx(Iee,{invoice:h,isOpen:f,onClose:v})]})},Dee=()=>{const e=ns(),{messages:t,loading:s,error:n}=At(h=>h.contactMessages),[a,i]=x.useState("");x.useEffect(()=>{e(c0())},[e]);const o=h=>{e(d0(h))},l=h=>{switch(h){case"inquiry_message":return r.jsx(Te,{className:"bg-blue-100 text-blue-800",children:"Inquiry"});case"demo_request":return r.jsx(Te,{className:"bg-purple-100 text-purple-800",children:"Demo Request"});case"support_message":return r.jsx(Te,{className:"bg-orange-100 text-orange-800",children:"Support"});default:return r.jsx(Te,{variant:"outline",children:h})}},c=h=>h?r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Read"}):r.jsx(Te,{className:"bg-red-100 text-red-800",children:"Unread"}),d=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=t.filter(h=>h.first_name.toLowerCase().includes(a.toLowerCase())||h.last_name.toLowerCase().includes(a.toLowerCase())||h.school_name.toLowerCase().includes(a.toLowerCase())||h.message.toLowerCase().includes(a.toLowerCase()));return s?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"space-y-2",children:[...Array(5)].map((h,p)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},p))})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Customer Support"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage customer inquiries and support messages"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{variant:"outline",children:[r.jsx(zo,{size:16,className:"mr-2"}),"Support Hotline"]}),r.jsxs(fe,{children:[r.jsx(Hj,{size:16,className:"mr-2"}),"New Message"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Messages"}),r.jsx(Hj,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:t.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All time messages"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Contact Messages"}),r.jsx(Oo,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:t.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"From clients"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Unread Messages"}),r.jsx(Zn,{className:"h-4 w-4 text-red-600"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:t.filter(h=>!h.is_read).length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Need attention"})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Contact Messages"}),r.jsx(br,{children:"Messages from potential clients and existing customers"})]}),r.jsx(Ve,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Ws,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(Oe,{placeholder:"Search contact messages...",value:a,onChange:h=>i(h.target.value),className:"pl-10"})]})})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsxs(Je,{children:["Contact Messages (",u.length,")"]}),r.jsx(br,{children:"Messages from potential clients and existing customers"})]}),r.jsx(Ve,{children:n?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Zn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Messages"}),r.jsx("p",{className:"text-muted-foreground",children:n})]}):u.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Oo,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Contact Messages"}),r.jsx("p",{className:"text-muted-foreground",children:t.length===0?"No contact messages have been received yet.":"No messages match your current search."})]}):r.jsxs(ya,{children:[r.jsx(ba,{children:r.jsxs(Kr,{children:[r.jsx(ut,{children:"Contact"}),r.jsx(ut,{children:"School"}),r.jsx(ut,{children:"Message Type"}),r.jsx(ut,{children:"Status"}),r.jsx(ut,{children:"Message"}),r.jsx(ut,{children:"Date"}),r.jsx(ut,{className:"text-right",children:"Actions"})]})}),r.jsx(ja,{children:u.map(h=>r.jsxs(Kr,{children:[r.jsx(ct,{children:r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[h.first_name," ",h.last_name]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:h.email_address})]})}),r.jsx(ct,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ks,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:h.school_name})]})}),r.jsx(ct,{children:l(h.message_type)}),r.jsx(ct,{children:c(h.is_read)}),r.jsx(ct,{children:r.jsx("div",{className:"max-w-xs",children:r.jsx("div",{className:"text-sm line-clamp-2",children:h.message})})}),r.jsx(ct,{children:r.jsx("div",{className:"text-sm",children:d(h.created_at)})}),r.jsx(ct,{className:"text-right",children:r.jsxs(On,{children:[r.jsx(Mn,{asChild:!0,children:r.jsx(fe,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(to,{className:"h-4 w-4"})})}),r.jsxs(wn,{align:"end",children:[r.jsx(od,{children:"Actions"}),r.jsxs(Wt,{children:[r.jsx(ls,{className:"mr-2 h-4 w-4"}),"View Details"]}),r.jsxs(Wt,{children:[r.jsx(Oo,{className:"mr-2 h-4 w-4"}),"Reply"]}),!h.is_read&&r.jsxs(Wt,{onClick:()=>o(h.id),children:[r.jsx(ur,{className:"mr-2 h-4 w-4"}),"Mark as Read"]}),r.jsx(bu,{}),r.jsxs(Wt,{className:"text-red-600",children:[r.jsx(fu,{className:"mr-2 h-4 w-4"}),"Delete Message"]})]})]})})]},h.id))})]})})]})]})},Oee=()=>{const[e,t]=x.useState(null),[s,n]=x.useState(!0),[a,i]=x.useState("30d");x.useEffect(()=>{(async()=>{n(!0),setTimeout(()=>{t({revenue:{current:45600,previous:39800,growth:14.6},users:{total:1247,active:1189,growth:8.2},schools:{total:89,active:76,growth:12.5},subscriptions:{total:89,active:76,growth:15.2},monthlyData:[{month:"Jan",revenue:42e3,users:1150,schools:82},{month:"Feb",revenue:43500,users:1180,schools:84},{month:"Mar",revenue:44100,users:1200,schools:85},{month:"Apr",revenue:44800,users:1220,schools:86},{month:"May",revenue:45200,users:1240,schools:87},{month:"Jun",revenue:45600,users:1247,schools:89}],topSchools:[{name:"Springfield High School",revenue:299.99,users:1250,subscription:"Premium"},{name:"Riverside High",revenue:299.99,users:1100,subscription:"Premium"},{name:"Lincoln Elementary",revenue:99.99,users:450,subscription:"Basic"},{name:"Oakwood Academy",revenue:299.99,users:800,subscription:"Premium"},{name:"Central Middle School",revenue:99.99,users:0,subscription:"Basic"}]}),n(!1)},1e3)})()},[]);const o=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u),l=u=>new Intl.NumberFormat("en-US").format(u),c=u=>u>=0?r.jsx(ro,{className:"h-4 w-4 text-green-600"}):r.jsx(JU,{className:"h-4 w-4 text-red-600"}),d=u=>u>=0?"text-green-600":"text-red-600";return s||!e?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((u,h)=>r.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},h))})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Comprehensive analytics and insights"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Jt,{value:a,onValueChange:i,children:[r.jsx(Gt,{className:"w-32",children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"7d",children:"Last 7 days"}),r.jsx(Re,{value:"30d",children:"Last 30 days"}),r.jsx(Re,{value:"90d",children:"Last 90 days"}),r.jsx(Re,{value:"1y",children:"Last year"})]})]}),r.jsxs(fe,{variant:"outline",children:[r.jsx(Fn,{size:16,className:"mr-2"}),"Export Report"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Revenue"}),r.jsx(kf,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:o(e.revenue.current)}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c(e.revenue.growth),r.jsxs("span",{className:`text-sm ${d(e.revenue.growth)}`,children:["+",e.revenue.growth,"%"]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Total Users"}),r.jsx(hr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:l(e.users.total)}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c(e.users.growth),r.jsxs("span",{className:`text-sm ${d(e.users.growth)}`,children:["+",e.users.growth,"%"]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Active Schools"}),r.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:e.schools.active}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c(e.schools.growth),r.jsxs("span",{className:`text-sm ${d(e.schools.growth)}`,children:["+",e.schools.growth,"%"]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Active Subscriptions"}),r.jsx(ta,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:e.subscriptions.active}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c(e.subscriptions.growth),r.jsxs("span",{className:`text-sm ${d(e.subscriptions.growth)}`,children:["+",e.subscriptions.growth,"%"]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Revenue Trend"}),r.jsx(br,{children:"Monthly revenue over the last 6 months"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:e.monthlyData.map((u,h)=>r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"w-8 bg-blue-500 rounded-t",style:{height:`${u.revenue/5e4*200}px`,minHeight:"20px"}}),r.jsx("span",{className:"text-xs text-muted-foreground",children:u.month})]},h))}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx("span",{className:"text-sm text-muted-foreground",children:"Revenue in USD"})})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"User Growth"}),r.jsx(br,{children:"Monthly user growth over the last 6 months"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:e.monthlyData.map((u,h)=>r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"w-8 bg-green-500 rounded-t",style:{height:`${u.users/1500*200}px`,minHeight:"20px"}}),r.jsx("span",{className:"text-xs text-muted-foreground",children:u.month})]},h))}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Users"})})]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Top Performing Schools"}),r.jsx(br,{children:"Schools with highest revenue and user engagement"})]}),r.jsx(Ve,{children:r.jsx("div",{className:"space-y-4",children:e.topSchools.map((u,h)=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:h+1})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:u.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[l(u.users)," users"]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Te,{variant:u.subscription==="Premium"?"default":"secondary",className:u.subscription==="Premium"?"bg-purple-100 text-purple-800":"",children:u.subscription}),r.jsx("span",{className:"font-medium",children:o(u.revenue)})]})]},h))})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Conversion Rate"}),r.jsx(Sy,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"85.4%"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Trial to paid conversion"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Average Revenue"}),r.jsx(TP,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:o(199.99)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Per school per month"})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Je,{className:"text-sm font-medium",children:"Active Sessions"}),r.jsx(IU,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ve,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"1,247"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Current active users"})]})]})]})]})},Mee=()=>{const[e,t]=x.useState({siteName:"LuxCab School Admin",siteDescription:"School transportation management system",contactEmail:"admin@luxcab.com",supportPhone:"+1 (555) 123-4567",timezone:"UTC",dateFormat:"MM/DD/YYYY",language:"en"}),[s,n]=x.useState({twoFactorAuth:!0,sessionTimeout:30,passwordPolicy:"strong",loginAttempts:5,ipWhitelist:"",auditLogging:!0}),[a,i]=x.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,systemAlerts:!0,marketingEmails:!1,weeklyReports:!0}),[o,l]=x.useState({maintenanceMode:!1,debugMode:!1,autoBackup:!0,backupFrequency:"daily",maxFileSize:10,maxUsersPerSchool:1e3}),c=d=>{console.log(`Saving ${d} settings`)};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Super Admin Settings"}),r.jsx("p",{className:"text-muted-foreground",children:"Configure system-wide settings and preferences"})]}),r.jsxs(fe,{children:[r.jsx(vm,{size:16,className:"mr-2"}),"Save All Changes"]})]}),r.jsxs(ST,{defaultValue:"general",className:"space-y-6",children:[r.jsxs(lS,{className:"grid w-full grid-cols-4",children:[r.jsxs(Rd,{value:"general",className:"flex items-center gap-2",children:[r.jsx(Ao,{size:16}),"General"]}),r.jsxs(Rd,{value:"security",className:"flex items-center gap-2",children:[r.jsx(Xn,{size:16}),"Security"]}),r.jsxs(Rd,{value:"notifications",className:"flex items-center gap-2",children:[r.jsx(Eo,{size:16}),"Notifications"]}),r.jsxs(Rd,{value:"system",className:"flex items-center gap-2",children:[r.jsx(MU,{size:16}),"System"]})]}),r.jsx(Td,{value:"general",className:"space-y-6",children:r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"General Settings"}),r.jsx(br,{children:"Configure basic system information and preferences"})]}),r.jsxs(Ve,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"siteName",children:"Site Name"}),r.jsx(Oe,{id:"siteName",value:e.siteName,onChange:d=>t(u=>({...u,siteName:d.target.value}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"contactEmail",children:"Contact Email"}),r.jsx(Oe,{id:"contactEmail",type:"email",value:e.contactEmail,onChange:d=>t(u=>({...u,contactEmail:d.target.value}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"supportPhone",children:"Support Phone"}),r.jsx(Oe,{id:"supportPhone",value:e.supportPhone,onChange:d=>t(u=>({...u,supportPhone:d.target.value}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"timezone",children:"Timezone"}),r.jsxs(Jt,{value:e.timezone,onValueChange:d=>t(u=>({...u,timezone:d})),children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"UTC",children:"UTC"}),r.jsx(Re,{value:"EST",children:"Eastern Time"}),r.jsx(Re,{value:"PST",children:"Pacific Time"}),r.jsx(Re,{value:"GMT",children:"GMT"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"dateFormat",children:"Date Format"}),r.jsxs(Jt,{value:e.dateFormat,onValueChange:d=>t(u=>({...u,dateFormat:d})),children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),r.jsx(Re,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),r.jsx(Re,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"language",children:"Language"}),r.jsxs(Jt,{value:e.language,onValueChange:d=>t(u=>({...u,language:d})),children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"en",children:"English"}),r.jsx(Re,{value:"es",children:"Spanish"}),r.jsx(Re,{value:"fr",children:"French"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"siteDescription",children:"Site Description"}),r.jsx(Ma,{id:"siteDescription",value:e.siteDescription,onChange:d=>t(u=>({...u,siteDescription:d.target.value})),rows:3})]}),r.jsxs(fe,{onClick:()=>c("general"),children:[r.jsx(vm,{size:16,className:"mr-2"}),"Save General Settings"]})]})]})}),r.jsx(Td,{value:"security",className:"space-y-6",children:r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Security Settings"}),r.jsx(br,{children:"Configure security policies and authentication settings"})]}),r.jsxs(Ve,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"Two-Factor Authentication"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Require 2FA for all users"})]}),r.jsx(ts,{checked:s.twoFactorAuth,onCheckedChange:d=>n(u=>({...u,twoFactorAuth:d}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"Audit Logging"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Log all administrative actions"})]}),r.jsx(ts,{checked:s.auditLogging,onCheckedChange:d=>n(u=>({...u,auditLogging:d}))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),r.jsx(Oe,{id:"sessionTimeout",type:"number",value:s.sessionTimeout,onChange:d=>n(u=>({...u,sessionTimeout:parseInt(d.target.value)}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"loginAttempts",children:"Max Login Attempts"}),r.jsx(Oe,{id:"loginAttempts",type:"number",value:s.loginAttempts,onChange:d=>n(u=>({...u,loginAttempts:parseInt(d.target.value)}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"passwordPolicy",children:"Password Policy"}),r.jsxs(Jt,{value:s.passwordPolicy,onValueChange:d=>n(u=>({...u,passwordPolicy:d})),children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"basic",children:"Basic"}),r.jsx(Re,{value:"strong",children:"Strong"}),r.jsx(Re,{value:"very-strong",children:"Very Strong"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"ipWhitelist",children:"IP Whitelist (optional)"}),r.jsx(Ma,{id:"ipWhitelist",value:s.ipWhitelist,onChange:d=>n(u=>({...u,ipWhitelist:d.target.value})),placeholder:"Enter IP addresses, one per line",rows:3})]}),r.jsxs(fe,{onClick:()=>c("security"),children:[r.jsx(vm,{size:16,className:"mr-2"}),"Save Security Settings"]})]})]})}),r.jsx(Td,{value:"notifications",className:"space-y-6",children:r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"Notification Settings"}),r.jsx(br,{children:"Configure system-wide notification preferences"})]}),r.jsxs(Ve,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"Email Notifications"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Send notifications via email"})]}),r.jsx(ts,{checked:a.emailNotifications,onCheckedChange:d=>i(u=>({...u,emailNotifications:d}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"SMS Notifications"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Send notifications via SMS"})]}),r.jsx(ts,{checked:a.smsNotifications,onCheckedChange:d=>i(u=>({...u,smsNotifications:d}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"Push Notifications"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Send push notifications to mobile apps"})]}),r.jsx(ts,{checked:a.pushNotifications,onCheckedChange:d=>i(u=>({...u,pushNotifications:d}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"System Alerts"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Show system alerts and warnings"})]}),r.jsx(ts,{checked:a.systemAlerts,onCheckedChange:d=>i(u=>({...u,systemAlerts:d}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"Marketing Emails"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Send promotional and marketing emails"})]}),r.jsx(ts,{checked:a.marketingEmails,onCheckedChange:d=>i(u=>({...u,marketingEmails:d}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"Weekly Reports"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Send weekly system reports"})]}),r.jsx(ts,{checked:a.weeklyReports,onCheckedChange:d=>i(u=>({...u,weeklyReports:d}))})]})]}),r.jsxs(fe,{onClick:()=>c("notifications"),children:[r.jsx(vm,{size:16,className:"mr-2"}),"Save Notification Settings"]})]})]})}),r.jsxs(Td,{value:"system",className:"space-y-6",children:[r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"System Settings"}),r.jsx(br,{children:"Configure system performance and maintenance settings"})]}),r.jsxs(Ve,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"Maintenance Mode"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Put the system in maintenance mode"})]}),r.jsx(ts,{checked:o.maintenanceMode,onCheckedChange:d=>l(u=>({...u,maintenanceMode:d}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"Debug Mode"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable debug logging and features"})]}),r.jsx(ts,{checked:o.debugMode,onCheckedChange:d=>l(u=>({...u,debugMode:d}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(le,{children:"Auto Backup"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically backup system data"})]}),r.jsx(ts,{checked:o.autoBackup,onCheckedChange:d=>l(u=>({...u,autoBackup:d}))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"backupFrequency",children:"Backup Frequency"}),r.jsxs(Jt,{value:o.backupFrequency,onValueChange:d=>l(u=>({...u,backupFrequency:d})),children:[r.jsx(Gt,{children:r.jsx(Zt,{})}),r.jsxs(Kt,{children:[r.jsx(Re,{value:"daily",children:"Daily"}),r.jsx(Re,{value:"weekly",children:"Weekly"}),r.jsx(Re,{value:"monthly",children:"Monthly"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"maxFileSize",children:"Max File Size (MB)"}),r.jsx(Oe,{id:"maxFileSize",type:"number",value:o.maxFileSize,onChange:d=>l(u=>({...u,maxFileSize:parseInt(d.target.value)}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{htmlFor:"maxUsersPerSchool",children:"Max Users per School"}),r.jsx(Oe,{id:"maxUsersPerSchool",type:"number",value:o.maxUsersPerSchool,onChange:d=>l(u=>({...u,maxUsersPerSchool:parseInt(d.target.value)}))})]})]}),r.jsxs(fe,{onClick:()=>c("system"),children:[r.jsx(vm,{size:16,className:"mr-2"}),"Save System Settings"]})]})]}),r.jsxs(Me,{children:[r.jsxs(Ke,{children:[r.jsx(Je,{children:"System Status"}),r.jsx(br,{children:"Current system health and status"})]}),r.jsx(Ve,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{children:"Database Connection"})]}),r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{children:"API Services"})]}),r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Online"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{children:"Email Service"})]}),r.jsx(Te,{className:"bg-green-100 text-green-800",children:"Active"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lc,{className:"h-4 w-4 text-yellow-600"}),r.jsx("span",{children:"Storage Usage"})]}),r.jsx(Te,{className:"bg-yellow-100 text-yellow-800",children:"75% Used"})]})]})})]})]})]})]})};var u1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},h1=typeof window>"u"||"Deno"in globalThis;function Ui(){}function $ee(e,t){return typeof e=="function"?e(t):e}function Bee(e){return typeof e=="number"&&e>=0&&e!==1/0}function zee(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Tw(e,t){return typeof e=="function"?e(t):e}function Uee(e,t){return typeof e=="function"?e(t):e}function $3(e,t){const{type:s="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==gS(o,t.options))return!1}else if(!Dp(t.queryKey,o))return!1}if(s!=="all"){const c=t.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function B3(e,t){const{exact:s,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(Fp(t.options.mutationKey)!==Fp(i))return!1}else if(!Dp(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function gS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Fp)(e)}function Fp(e){return JSON.stringify(e,(t,s)=>Iw(s)?Object.keys(s).sort().reduce((n,a)=>(n[a]=s[a],n),{}):s)}function Dp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Dp(e[s],t[s])):!1}function xI(e,t){if(e===t)return e;const s=z3(e)&&z3(t);if(s||Iw(e)&&Iw(t)){const n=s?e:Object.keys(e),a=n.length,i=s?t:Object.keys(t),o=i.length,l=s?[]:{},c=new Set(n);let d=0;for(let u=0;u<o;u++){const h=s?u:i[u];(!s&&c.has(h)||s)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,d++):(l[h]=xI(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&d++)}return a===o&&d===a?e:l}return t}function z3(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Iw(e){if(!U3(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!U3(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function U3(e){return Object.prototype.toString.call(e)==="[object Object]"}function qee(e){return new Promise(t=>{setTimeout(t,e)})}function Vee(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?xI(e,t):t}function Hee(e,t,s=0){const n=[...e,t];return s&&n.length>s?n.slice(1):n}function Wee(e,t,s=0){const n=[t,...e];return s&&n.length>s?n.slice(0,-1):n}var xS=Symbol();function vI(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===xS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Id,oc,qh,W3,Gee=(W3=class extends u1{constructor(){super();zr(this,Id);zr(this,oc);zr(this,qh);pr(this,qh,t=>{if(!h1&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){Qe(this,oc)||this.setEventListener(Qe(this,qh))}onUnsubscribe(){var t;this.hasListeners()||((t=Qe(this,oc))==null||t.call(this),pr(this,oc,void 0))}setEventListener(t){var s;pr(this,qh,t),(s=Qe(this,oc))==null||s.call(this),pr(this,oc,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Qe(this,Id)!==t&&(pr(this,Id,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof Qe(this,Id)=="boolean"?Qe(this,Id):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Id=new WeakMap,oc=new WeakMap,qh=new WeakMap,W3),yI=new Gee,Vh,lc,Hh,G3,Kee=(G3=class extends u1{constructor(){super();zr(this,Vh,!0);zr(this,lc);zr(this,Hh);pr(this,Hh,t=>{if(!h1&&window.addEventListener){const s=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){Qe(this,lc)||this.setEventListener(Qe(this,Hh))}onUnsubscribe(){var t;this.hasListeners()||((t=Qe(this,lc))==null||t.call(this),pr(this,lc,void 0))}setEventListener(t){var s;pr(this,Hh,t),(s=Qe(this,lc))==null||s.call(this),pr(this,lc,t(this.setOnline.bind(this)))}setOnline(t){Qe(this,Vh)!==t&&(pr(this,Vh,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Qe(this,Vh)}},Vh=new WeakMap,lc=new WeakMap,Hh=new WeakMap,G3),Rv=new Kee;function Yee(){let e,t;const s=new Promise((a,i)=>{e=a,t=i});s.status="pending",s.catch(()=>{});function n(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},s.reject=a=>{n({status:"rejected",reason:a}),t(a)},s}function Jee(e){return Math.min(1e3*2**e,3e4)}function bI(e){return(e??"online")==="online"?Rv.isOnline():!0}var jI=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function P2(e){return e instanceof jI}function wI(e){let t=!1,s=0,n=!1,a;const i=Yee(),o=g=>{var j;n||(p(new jI(g)),(j=e.abort)==null||j.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>yI.isFocused()&&(e.networkMode==="always"||Rv.isOnline())&&e.canRun(),u=()=>bI(e.networkMode)&&e.canRun(),h=g=>{var j;n||(n=!0,(j=e.onSuccess)==null||j.call(e,g),a==null||a(),i.resolve(g))},p=g=>{var j;n||(n=!0,(j=e.onError)==null||j.call(e,g),a==null||a(),i.reject(g))},f=()=>new Promise(g=>{var j;a=v=>{(n||d())&&g(v)},(j=e.onPause)==null||j.call(e)}).then(()=>{var g;a=void 0,n||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(n)return;let g;const j=s===0?e.initialPromise:void 0;try{g=j??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(h).catch(v=>{var O;if(n)return;const w=e.retry??(h1?0:3),N=e.retryDelay??Jee,C=typeof N=="function"?N(s,v):N,k=w===!0||typeof w=="number"&&s<w||typeof w=="function"&&w(s,v);if(t||!k){p(v);return}s++,(O=e.onFail)==null||O.call(e,s,v),qee(C).then(()=>d()?void 0:f()).then(()=>{t?p(v):y()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():f().then(y),i)}}var Zee=e=>setTimeout(e,0);function Xee(){let e=[],t=0,s=l=>{l()},n=l=>{l()},a=Zee;const i=l=>{t?e.push(l):a(()=>{s(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{s(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var ha=Xee(),Fd,K3,NI=(K3=class{constructor(){zr(this,Fd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bee(this.gcTime)&&pr(this,Fd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(h1?1/0:5*60*1e3))}clearGcTimeout(){Qe(this,Fd)&&(clearTimeout(Qe(this,Fd)),pr(this,Fd,void 0))}},Fd=new WeakMap,K3),Wh,Gh,bi,Dd,Kn,Op,Od,qi,cl,Y3,Qee=(Y3=class extends NI{constructor(t){super();zr(this,qi);zr(this,Wh);zr(this,Gh);zr(this,bi);zr(this,Dd);zr(this,Kn);zr(this,Op);zr(this,Od);pr(this,Od,!1),pr(this,Op,t.defaultOptions),this.setOptions(t.options),this.observers=[],pr(this,Dd,t.client),pr(this,bi,Qe(this,Dd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,pr(this,Wh,tte(this.options)),this.state=t.state??Qe(this,Wh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Qe(this,Kn))==null?void 0:t.promise}setOptions(t){this.options={...Qe(this,Op),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Qe(this,bi).remove(this)}setData(t,s){const n=Vee(this.state.data,t,this.options);return zn(this,qi,cl).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(t,s){zn(this,qi,cl).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var n,a;const s=(n=Qe(this,Kn))==null?void 0:n.promise;return(a=Qe(this,Kn))==null||a.cancel(t),s?s.then(Ui).catch(Ui):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Qe(this,Wh))}isActive(){return this.observers.some(t=>Uee(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Tw(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!zee(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=Qe(this,Kn))==null||s.continue()}onOnline(){var s;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=Qe(this,Kn))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Qe(this,bi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(Qe(this,Kn)&&(Qe(this,Od)?Qe(this,Kn).cancel({revert:!0}):Qe(this,Kn).cancelRetry()),this.scheduleGc()),Qe(this,bi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||zn(this,qi,cl).call(this,{type:"invalidate"})}fetch(t,s){var d,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(Qe(this,Kn))return Qe(this,Kn).continueRetry(),Qe(this,Kn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(f=>f.options.queryFn);p&&this.setOptions(p.options)}const n=new AbortController,a=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(pr(this,Od,!0),n.signal)})},i=()=>{const p=vI(this.options,s),y=(()=>{const g={client:Qe(this,Dd),queryKey:this.queryKey,meta:this.meta};return a(g),g})();return pr(this,Od,!1),this.options.persister?this.options.persister(p,y,this):p(y)},l=(()=>{const p={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:Qe(this,Dd),state:this.state,fetchFn:i};return a(p),p})();(d=this.options.behavior)==null||d.onFetch(l,this),pr(this,Gh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&zn(this,qi,cl).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=p=>{var f,y,g,j;P2(p)&&p.silent||zn(this,qi,cl).call(this,{type:"error",error:p}),P2(p)||((y=(f=Qe(this,bi).config).onError)==null||y.call(f,p,this),(j=(g=Qe(this,bi).config).onSettled)==null||j.call(g,this.state.data,p,this)),this.scheduleGc()};return pr(this,Kn,wI({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:p=>{var f,y,g,j;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(v){c(v);return}(y=(f=Qe(this,bi).config).onSuccess)==null||y.call(f,p,this),(j=(g=Qe(this,bi).config).onSettled)==null||j.call(g,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,f)=>{zn(this,qi,cl).call(this,{type:"failed",failureCount:p,error:f})},onPause:()=>{zn(this,qi,cl).call(this,{type:"pause"})},onContinue:()=>{zn(this,qi,cl).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Qe(this,Kn).start()}},Wh=new WeakMap,Gh=new WeakMap,bi=new WeakMap,Dd=new WeakMap,Kn=new WeakMap,Op=new WeakMap,Od=new WeakMap,qi=new WeakSet,cl=function(t){const s=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ete(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return P2(a)&&a.revert&&Qe(this,Gh)?{...Qe(this,Gh),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=s(this.state),ha.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Qe(this,bi).notify({query:this,type:"updated",action:t})})},Y3);function ete(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bI(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function tte(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,n=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var wo,J3,rte=(J3=class extends u1{constructor(t={}){super();zr(this,wo);this.config=t,pr(this,wo,new Map)}build(t,s,n){const a=s.queryKey,i=s.queryHash??gS(a,s);let o=this.get(i);return o||(o=new Qee({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(s),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Qe(this,wo).has(t.queryHash)||(Qe(this,wo).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=Qe(this,wo).get(t.queryHash);s&&(t.destroy(),s===t&&Qe(this,wo).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ha.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Qe(this,wo).get(t)}getAll(){return[...Qe(this,wo).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(n=>$3(s,n))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(n=>$3(t,n)):s}notify(t){ha.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){ha.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ha.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},wo=new WeakMap,J3),No,la,Md,So,Xl,Z3,ste=(Z3=class extends NI{constructor(t){super();zr(this,So);zr(this,No);zr(this,la);zr(this,Md);this.mutationId=t.mutationId,pr(this,la,t.mutationCache),pr(this,No,[]),this.state=t.state||nte(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Qe(this,No).includes(t)||(Qe(this,No).push(t),this.clearGcTimeout(),Qe(this,la).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){pr(this,No,Qe(this,No).filter(s=>s!==t)),this.scheduleGc(),Qe(this,la).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Qe(this,No).length||(this.state.status==="pending"?this.scheduleGc():Qe(this,la).remove(this))}continue(){var t;return((t=Qe(this,Md))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,d,u,h,p,f,y,g,j,v,w,N,C,k,O,R,E;const s=()=>{zn(this,So,Xl).call(this,{type:"continue"})};pr(this,Md,wI({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,D)=>{zn(this,So,Xl).call(this,{type:"failed",failureCount:I,error:D})},onPause:()=>{zn(this,So,Xl).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Qe(this,la).canRun(this)}));const n=this.state.status==="pending",a=!Qe(this,Md).canStart();try{if(n)s();else{zn(this,So,Xl).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=Qe(this,la).config).onMutate)==null?void 0:o.call(i,t,this));const D=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));D!==this.state.context&&zn(this,So,Xl).call(this,{type:"pending",context:D,variables:t,isPaused:a})}const I=await Qe(this,Md).start();return await((u=(d=Qe(this,la).config).onSuccess)==null?void 0:u.call(d,I,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,I,t,this.state.context)),await((y=(f=Qe(this,la).config).onSettled)==null?void 0:y.call(f,I,null,this.state.variables,this.state.context,this)),await((j=(g=this.options).onSettled)==null?void 0:j.call(g,I,null,t,this.state.context)),zn(this,So,Xl).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(v=Qe(this,la).config).onError)==null?void 0:w.call(v,I,t,this.state.context,this)),await((C=(N=this.options).onError)==null?void 0:C.call(N,I,t,this.state.context)),await((O=(k=Qe(this,la).config).onSettled)==null?void 0:O.call(k,void 0,I,this.state.variables,this.state.context,this)),await((E=(R=this.options).onSettled)==null?void 0:E.call(R,void 0,I,t,this.state.context)),I}finally{zn(this,So,Xl).call(this,{type:"error",error:I})}}finally{Qe(this,la).runNext(this)}}},No=new WeakMap,la=new WeakMap,Md=new WeakMap,So=new WeakSet,Xl=function(t){const s=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ha.batch(()=>{Qe(this,No).forEach(n=>{n.onMutationUpdate(t)}),Qe(this,la).notify({mutation:this,type:"updated",action:t})})},Z3);function nte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hl,Vi,Mp,X3,ate=(X3=class extends u1{constructor(t={}){super();zr(this,hl);zr(this,Vi);zr(this,Mp);this.config=t,pr(this,hl,new Set),pr(this,Vi,new Map),pr(this,Mp,0)}build(t,s,n){const a=new ste({mutationCache:this,mutationId:++zg(this,Mp)._,options:t.defaultMutationOptions(s),state:n});return this.add(a),a}add(t){Qe(this,hl).add(t);const s=xx(t);if(typeof s=="string"){const n=Qe(this,Vi).get(s);n?n.push(t):Qe(this,Vi).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Qe(this,hl).delete(t)){const s=xx(t);if(typeof s=="string"){const n=Qe(this,Vi).get(s);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&Qe(this,Vi).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=xx(t);if(typeof s=="string"){const n=Qe(this,Vi).get(s),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const s=xx(t);if(typeof s=="string"){const a=(n=Qe(this,Vi).get(s))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ha.batch(()=>{Qe(this,hl).forEach(t=>{this.notify({type:"removed",mutation:t})}),Qe(this,hl).clear(),Qe(this,Vi).clear()})}getAll(){return Array.from(Qe(this,hl))}find(t){const s={exact:!0,...t};return this.getAll().find(n=>B3(s,n))}findAll(t={}){return this.getAll().filter(s=>B3(t,s))}notify(t){ha.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return ha.batch(()=>Promise.all(t.map(s=>s.continue().catch(Ui))))}},hl=new WeakMap,Vi=new WeakMap,Mp=new WeakMap,X3);function xx(e){var t;return(t=e.options.scope)==null?void 0:t.id}function q3(e){return{onFetch:(t,s)=>{var u,h,p,f,y;const n=t.options,a=(p=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const j=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=vI(t.options,t.fetchOptions),w=async(N,C,k)=>{if(g)return Promise.reject();if(C==null&&N.pages.length)return Promise.resolve(N);const R=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:C,direction:k?"backward":"forward",meta:t.options.meta};return j(P),P})(),E=await v(R),{maxPages:I}=t.options,D=k?Wee:Hee;return{pages:D(N.pages,E,I),pageParams:D(N.pageParams,C,I)}};if(a&&i.length){const N=a==="backward",C=N?ite:V3,k={pages:i,pageParams:o},O=C(n,k);l=await w(k,O,N)}else{const N=e??i.length;do{const C=c===0?o[0]??n.initialPageParam:V3(n,l);if(c>0&&C==null)break;l=await w(l,C),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var g,j;return(j=(g=t.options).persister)==null?void 0:j.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=d}}}function V3(e,{pages:t,pageParams:s}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,s[n],s):void 0}function ite(e,{pages:t,pageParams:s}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,s[0],s):void 0}var Is,cc,dc,Kh,Yh,uc,Jh,Zh,Q3,ote=(Q3=class{constructor(e={}){zr(this,Is);zr(this,cc);zr(this,dc);zr(this,Kh);zr(this,Yh);zr(this,uc);zr(this,Jh);zr(this,Zh);pr(this,Is,e.queryCache||new rte),pr(this,cc,e.mutationCache||new ate),pr(this,dc,e.defaultOptions||{}),pr(this,Kh,new Map),pr(this,Yh,new Map),pr(this,uc,0)}mount(){zg(this,uc)._++,Qe(this,uc)===1&&(pr(this,Jh,yI.subscribe(async e=>{e&&(await this.resumePausedMutations(),Qe(this,Is).onFocus())})),pr(this,Zh,Rv.subscribe(async e=>{e&&(await this.resumePausedMutations(),Qe(this,Is).onOnline())})))}unmount(){var e,t;zg(this,uc)._--,Qe(this,uc)===0&&((e=Qe(this,Jh))==null||e.call(this),pr(this,Jh,void 0),(t=Qe(this,Zh))==null||t.call(this),pr(this,Zh,void 0))}isFetching(e){return Qe(this,Is).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Qe(this,cc).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=Qe(this,Is).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=Qe(this,Is).build(this,t),n=s.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Tw(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Qe(this,Is).findAll(e).map(({queryKey:t,state:s})=>{const n=s.data;return[t,n]})}setQueryData(e,t,s){const n=this.defaultQueryOptions({queryKey:e}),a=Qe(this,Is).get(n.queryHash),i=a==null?void 0:a.state.data,o=$ee(t,i);if(o!==void 0)return Qe(this,Is).build(this,n).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return ha.batch(()=>Qe(this,Is).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=Qe(this,Is).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=Qe(this,Is);ha.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=Qe(this,Is);return ha.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},n=ha.batch(()=>Qe(this,Is).findAll(e).map(a=>a.cancel(s)));return Promise.all(n).then(Ui).catch(Ui)}invalidateQueries(e,t={}){return ha.batch(()=>(Qe(this,Is).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},n=ha.batch(()=>Qe(this,Is).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(Ui)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ui)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=Qe(this,Is).build(this,t);return s.isStaleByTime(Tw(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ui).catch(Ui)}fetchInfiniteQuery(e){return e.behavior=q3(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ui).catch(Ui)}ensureInfiniteQueryData(e){return e.behavior=q3(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Rv.isOnline()?Qe(this,cc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Qe(this,Is)}getMutationCache(){return Qe(this,cc)}getDefaultOptions(){return Qe(this,dc)}setDefaultOptions(e){pr(this,dc,e)}setQueryDefaults(e,t){Qe(this,Kh).set(Fp(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Qe(this,Kh).values()],s={};return t.forEach(n=>{Dp(e,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(e,t){Qe(this,Yh).set(Fp(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Qe(this,Yh).values()],s={};return t.forEach(n=>{Dp(e,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Qe(this,dc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=gS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===xS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Qe(this,dc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Qe(this,Is).clear(),Qe(this,cc).clear()}},Is=new WeakMap,cc=new WeakMap,dc=new WeakMap,Kh=new WeakMap,Yh=new WeakMap,uc=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,Q3),lte=x.createContext(void 0),cte=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(lte.Provider,{value:e,children:t})),vS="ToastProvider",[yS,dte,ute]=Ty("Toast"),[SI,pre]=xa("Toast",[ute]),[hte,f1]=SI(vS),_I=e=>{const{__scopeToast:t,label:s="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=x.useState(null),[d,u]=x.useState(0),h=x.useRef(!1),p=x.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${vS}\`. Expected non-empty \`string\`.`),r.jsx(yS.Provider,{scope:t,children:r.jsx(hte,{scope:t,label:s,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>u(f=>f+1),[]),onToastRemove:x.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};_I.displayName=vS;var CI="ToastViewport",fte=["F8"],Fw="toast.viewportPause",Dw="toast.viewportResume",kI=x.forwardRef((e,t)=>{const{__scopeToast:s,hotkey:n=fte,label:a="Notifications ({hotkey})",...i}=e,o=f1(CI,s),l=dte(s),c=x.useRef(null),d=x.useRef(null),u=x.useRef(null),h=x.useRef(null),p=Nr(t,h,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;x.useEffect(()=>{const j=v=>{var N;n.length!==0&&n.every(C=>v[C]||v.code===C)&&((N=h.current)==null||N.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[n]),x.useEffect(()=>{const j=c.current,v=h.current;if(y&&j&&v){const w=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(Fw);v.dispatchEvent(O),o.isClosePausedRef.current=!0}},N=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(Dw);v.dispatchEvent(O),o.isClosePausedRef.current=!1}},C=O=>{!j.contains(O.relatedTarget)&&N()},k=()=>{j.contains(document.activeElement)||N()};return j.addEventListener("focusin",w),j.addEventListener("focusout",C),j.addEventListener("pointermove",w),j.addEventListener("pointerleave",k),window.addEventListener("blur",w),window.addEventListener("focus",N),()=>{j.removeEventListener("focusin",w),j.removeEventListener("focusout",C),j.removeEventListener("pointermove",w),j.removeEventListener("pointerleave",k),window.removeEventListener("blur",w),window.removeEventListener("focus",N)}}},[y,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:j})=>{const w=l().map(N=>{const C=N.ref.current,k=[C,...Cte(C)];return j==="forwards"?k:k.reverse()});return(j==="forwards"?w.reverse():w).flat()},[l]);return x.useEffect(()=>{const j=h.current;if(j){const v=w=>{var k,O,R;const N=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!N){const E=document.activeElement,I=w.shiftKey;if(w.target===j&&I){(k=d.current)==null||k.focus();return}const A=g({tabbingDirection:I?"backwards":"forwards"}),$=A.findIndex(U=>U===E);E2(A.slice($+1))?w.preventDefault():I?(O=d.current)==null||O.focus():(R=u.current)==null||R.focus()}};return j.addEventListener("keydown",v),()=>j.removeEventListener("keydown",v)}},[l,g]),r.jsxs(aV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&r.jsx(Ow,{ref:d,onFocusFromOutsideViewport:()=>{const j=g({tabbingDirection:"forwards"});E2(j)}}),r.jsx(yS.Slot,{scope:s,children:r.jsx(Ot.ol,{tabIndex:-1,...i,ref:p})}),y&&r.jsx(Ow,{ref:u,onFocusFromOutsideViewport:()=>{const j=g({tabbingDirection:"backwards"});E2(j)}})]})});kI.displayName=CI;var AI="ToastFocusProxy",Ow=x.forwardRef((e,t)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...a}=e,i=f1(AI,s);return r.jsx(Hy,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});Ow.displayName=AI;var sg="Toast",mte="toast.swipeStart",pte="toast.swipeMove",gte="toast.swipeCancel",xte="toast.swipeEnd",PI=x.forwardRef((e,t)=>{const{forceMount:s,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=so({prop:n,defaultProp:a??!0,onChange:i,caller:sg});return r.jsx($a,{present:s||l,children:r.jsx(bte,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Oa(e.onPause),onResume:Oa(e.onResume),onSwipeStart:pt(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pt(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:pt(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pt(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});PI.displayName=sg;var[vte,yte]=SI(sg,{onClose(){}}),bte=x.forwardRef((e,t)=>{const{__scopeToast:s,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...y}=e,g=f1(sg,s),[j,v]=x.useState(null),w=Nr(t,U=>v(U)),N=x.useRef(null),C=x.useRef(null),k=a||g.duration,O=x.useRef(0),R=x.useRef(k),E=x.useRef(0),{onToastAdd:I,onToastRemove:D}=g,P=Oa(()=>{var de;(j==null?void 0:j.contains(document.activeElement))&&((de=g.viewport)==null||de.focus()),o()}),A=x.useCallback(U=>{!U||U===1/0||(window.clearTimeout(E.current),O.current=new Date().getTime(),E.current=window.setTimeout(P,U))},[P]);x.useEffect(()=>{const U=g.viewport;if(U){const de=()=>{A(R.current),d==null||d()},se=()=>{const ge=new Date().getTime()-O.current;R.current=R.current-ge,window.clearTimeout(E.current),c==null||c()};return U.addEventListener(Fw,se),U.addEventListener(Dw,de),()=>{U.removeEventListener(Fw,se),U.removeEventListener(Dw,de)}}},[g.viewport,k,c,d,A]),x.useEffect(()=>{i&&!g.isClosePausedRef.current&&A(k)},[i,k,g.isClosePausedRef,A]),x.useEffect(()=>(I(),()=>D()),[I,D]);const $=x.useMemo(()=>j?DI(j):null,[j]);return g.viewport?r.jsxs(r.Fragment,{children:[$&&r.jsx(jte,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),r.jsx(vte,{scope:s,onClose:P,children:sd.createPortal(r.jsx(yS.ItemSlot,{scope:s,children:r.jsx(nV,{asChild:!0,onEscapeKeyDown:pt(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||P(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Ot.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:pt(e.onKeyDown,U=>{U.key==="Escape"&&(l==null||l(U.nativeEvent),U.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:pt(e.onPointerDown,U=>{U.button===0&&(N.current={x:U.clientX,y:U.clientY})}),onPointerMove:pt(e.onPointerMove,U=>{if(!N.current)return;const de=U.clientX-N.current.x,se=U.clientY-N.current.y,ge=!!C.current,V=["left","right"].includes(g.swipeDirection),K=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,J=V?K(0,de):0,ie=V?0:K(0,se),T=U.pointerType==="touch"?10:2,F={x:J,y:ie},M={originalEvent:U,delta:F};ge?(C.current=F,vx(pte,h,M,{discrete:!1})):H3(F,g.swipeDirection,T)?(C.current=F,vx(mte,u,M,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(de)>T||Math.abs(se)>T)&&(N.current=null)}),onPointerUp:pt(e.onPointerUp,U=>{const de=C.current,se=U.target;if(se.hasPointerCapture(U.pointerId)&&se.releasePointerCapture(U.pointerId),C.current=null,N.current=null,de){const ge=U.currentTarget,V={originalEvent:U,delta:de};H3(de,g.swipeDirection,g.swipeThreshold)?vx(xte,f,V,{discrete:!0}):vx(gte,p,V,{discrete:!0}),ge.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),jte=e=>{const{__scopeToast:t,children:s,...n}=e,a=f1(sg,t),[i,o]=x.useState(!1),[l,c]=x.useState(!1);return Ste(()=>o(!0)),x.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(Pf,{asChild:!0,children:r.jsx(Hy,{...n,children:i&&r.jsxs(r.Fragment,{children:[a.label," ",s]})})})},wte="ToastTitle",EI=x.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e;return r.jsx(Ot.div,{...n,ref:t})});EI.displayName=wte;var Nte="ToastDescription",LI=x.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e;return r.jsx(Ot.div,{...n,ref:t})});LI.displayName=Nte;var RI="ToastAction",TI=x.forwardRef((e,t)=>{const{altText:s,...n}=e;return s.trim()?r.jsx(FI,{altText:s,asChild:!0,children:r.jsx(bS,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${RI}\`. Expected non-empty \`string\`.`),null)});TI.displayName=RI;var II="ToastClose",bS=x.forwardRef((e,t)=>{const{__scopeToast:s,...n}=e,a=yte(II,s);return r.jsx(FI,{asChild:!0,children:r.jsx(Ot.button,{type:"button",...n,ref:t,onClick:pt(e.onClick,a.onClose)})})});bS.displayName=II;var FI=x.forwardRef((e,t)=>{const{__scopeToast:s,altText:n,...a}=e;return r.jsx(Ot.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function DI(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),_te(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...DI(n))}}),t}function vx(e,t,s,{discrete:n}){const a=s.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),n?h5(a,i):a.dispatchEvent(i)}var H3=(e,t,s=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>s:!i&&a>s};function Ste(e=()=>{}){const t=Oa(e);Dn(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[t])}function _te(e){return e.nodeType===e.ELEMENT_NODE}function Cte(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function E2(e){const t=document.activeElement;return e.some(s=>s===t?!0:(s.focus(),document.activeElement!==t))}var kte=_I,OI=kI,MI=PI,$I=EI,BI=LI,zI=TI,UI=bS;const Ate=kte,qI=x.forwardRef(({className:e,...t},s)=>r.jsx(OI,{ref:s,className:it("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));qI.displayName=OI.displayName;const Pte=gu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),VI=x.forwardRef(({className:e,variant:t,...s},n)=>r.jsx(MI,{ref:n,className:it(Pte({variant:t}),e),...s}));VI.displayName=MI.displayName;const Ete=x.forwardRef(({className:e,...t},s)=>r.jsx(zI,{ref:s,className:it("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Ete.displayName=zI.displayName;const HI=x.forwardRef(({className:e,...t},s)=>r.jsx(UI,{ref:s,className:it("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(mu,{className:"h-4 w-4"})}));HI.displayName=UI.displayName;const WI=x.forwardRef(({className:e,...t},s)=>r.jsx($I,{ref:s,className:it("text-sm font-semibold",e),...t}));WI.displayName=$I.displayName;const GI=x.forwardRef(({className:e,...t},s)=>r.jsx(BI,{ref:s,className:it("text-sm opacity-90",e),...t}));GI.displayName=BI.displayName;function Lte(){const{toasts:e}=Zs();return r.jsxs(Ate,{children:[e.map(function({id:t,title:s,description:n,action:a,...i}){return r.jsxs(VI,{...i,children:[r.jsxs("div",{className:"grid gap-1",children:[s&&r.jsx(WI,{children:s}),n&&r.jsx(GI,{children:n})]}),a,r.jsx(HI,{})]},t)}),r.jsx(qI,{})]})}const Rte=x.createContext(null),L2={didCatch:!1,error:null};class Tte extends x.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=L2}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var s,n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(s=(n=this.props).onReset)===null||s===void 0||s.call(n,{args:i,reason:"imperative-api"}),this.setState(L2)}}componentDidCatch(t,s){var n,a;(n=(a=this.props).onError)===null||n===void 0||n.call(a,t,s)}componentDidUpdate(t,s){const{didCatch:n}=this.state,{resetKeys:a}=this.props;if(n&&s.error!==null&&Ite(t.resetKeys,a)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(L2)}}render(){const{children:t,fallbackRender:s,FallbackComponent:n,fallback:a}=this.props,{didCatch:i,error:o}=this.state;let l=t;if(i){const c={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof s=="function")l=s(c);else if(n)l=x.createElement(n,c);else if(a!==void 0)l=a;else throw o}return x.createElement(Rte.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},l)}}function Ite(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((s,n)=>!Object.is(s,t[n]))}const Fte=new ote,Dte=()=>{var c;const e=ns(),{token:t,isInitialized:s,user:n}=At(d=>d.auth),{schools:a=[],loading:i,error:o}=At(d=>d.schools),l=(c=a.find(d=>d.admin===(n==null?void 0:n.id)))==null?void 0:c.id;return console.log("App state:",{token:t?"exists":"null",isInitialized:s,user:n?{id:n.id,name:`${n.first_name} ${n.last_name}`}:"null",schoolsCount:a.length,schoolId:l,schoolsLoading:i,schoolsError:o}),console.log("localStorage debug:",{persistAuth:localStorage.getItem("persist:auth"),directToken:localStorage.getItem("token")}),x.useEffect(()=>{console.log("=== AUTH DEBUG ==="),console.log("localStorage keys:",Object.keys(localStorage)),console.log("persist:auth raw:",localStorage.getItem("persist:auth")),console.log("token raw:",localStorage.getItem("token"));try{const d=localStorage.getItem("persist:auth");if(d){const u=JSON.parse(d);if(console.log("parsed persist:auth:",u),u.token){const h=JSON.parse(u.token);console.log("parsed token:",h)}}}catch(d){console.error("Error parsing persist:auth:",d)}},[]),x.useEffect(()=>{e(cz())},[e]),x.useEffect(()=>{localStorage.setItem("schoolId",(l==null?void 0:l.toString())||"")},[l]),gr.useEffect(()=>{if(t&&s){const d=setInterval(()=>{e(lz())},6e4);return()=>clearInterval(d)}},[t,s,e]),gr.useEffect(()=>{t&&s&&(console.log("Fetching schools with token:",t.substring(0,20)+"..."),e(vl()).catch(d=>{console.error("Failed to fetch schools:",d)}))},[t,s,e]),gr.useEffect(()=>{a&&a.length>0&&console.log("Schools data:",a)},[a]),gr.useEffect(()=>{!t&&o&&e(hz())},[t,o,e]),r.jsxs(XO,{children:[r.jsx(Rr,{path:"/login",element:r.jsx(qq,{})}),r.jsx(Rr,{path:"/home",element:r.jsx(xH,{})}),r.jsx(Rr,{path:"/subscription-selection",element:r.jsx(ZG,{})}),r.jsx(Rr,{path:"/register",element:r.jsx(vH,{})}),r.jsx(Rr,{path:"/verification",element:r.jsx(XG,{})}),r.jsxs(Rr,{path:"/",element:t?r.jsx(sY,{}):r.jsx(d4,{to:"/home",replace:!0}),children:[r.jsx(Rr,{index:!0,element:r.jsx(BY,{})}),r.jsx(Rr,{path:"trips",element:r.jsx(eJ,{})}),r.jsx(Rr,{path:"routes",element:r.jsx(uZ,{})}),r.jsx(Rr,{path:"students",element:r.jsx(eX,{})}),r.jsx(Rr,{path:"staff",element:r.jsx(nX,{})}),r.jsx(Rr,{path:"parents",element:r.jsx(vX,{})}),r.jsx(Rr,{path:"drivers",element:r.jsx(yX,{})}),r.jsx(Rr,{path:"vehicles",element:r.jsx(bX,{})}),r.jsx(Rr,{path:"reports",element:r.jsx(wX,{})}),r.jsx(Rr,{path:"subscription",element:r.jsx(LX,{})}),r.jsx(Rr,{path:"admin/subscription",element:r.jsx(RX,{})}),r.jsx(Rr,{path:"admin/school-subscription",element:r.jsx(pee,{})}),r.jsx(Rr,{path:"notifications",element:r.jsx(xee,{})}),r.jsx(Rr,{path:"settings",element:r.jsx(kX,{})}),r.jsx(Rr,{path:"profile",element:r.jsx(PX,{})})]}),r.jsxs(Rr,{path:"/super-admin",element:t?r.jsx(wee,{}):r.jsx(d4,{to:"/login",replace:!0}),children:[r.jsx(Rr,{index:!0,element:r.jsx(See,{})}),r.jsx(Rr,{path:"users",element:r.jsx(_ee,{})}),r.jsx(Rr,{path:"schools",element:r.jsx(Cee,{})}),r.jsx(Rr,{path:"schools/:id",element:r.jsx(kee,{})}),r.jsx(Rr,{path:"subscriptions",element:r.jsx(Pee,{})}),r.jsx(Rr,{path:"school-subscriptions",element:r.jsx(Ree,{})}),r.jsx(Rr,{path:"invoices",element:r.jsx(Fee,{})}),r.jsx(Rr,{path:"support",element:r.jsx(Dee,{})}),r.jsx(Rr,{path:"analytics",element:r.jsx(Oee,{})}),r.jsx(Rr,{path:"settings",element:r.jsx(Mee,{})})]}),r.jsx(Rr,{path:"*",element:r.jsx(vee,{})})]})},Ote=()=>r.jsx(aM,{children:r.jsx(Dte,{})});function Mte(){return r.jsx(Tte,{FallbackComponent:()=>null,children:r.jsx(eq,{children:r.jsx(tq,{children:r.jsx(cte,{client:Fte,children:r.jsxs(oL,{children:[r.jsx(Ote,{}),r.jsx(Lte,{})]})})})})})}mA(document.getElementById("root")).render(r.jsx(Mte,{}));export{u9 as _,Bte as c,ek as g};
