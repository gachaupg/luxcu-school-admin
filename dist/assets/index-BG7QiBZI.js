var dF=Object.defineProperty;var __=e=>{throw TypeError(e)};var uF=(e,t,r)=>t in e?dF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var mg=(e,t,r)=>uF(e,typeof t!="symbol"?t+"":t,r),E1=(e,t,r)=>t.has(e)||__("Cannot "+r);var rt=(e,t,r)=>(E1(e,t,"read from private field"),r?r.call(e):t.get(e)),er=(e,t,r)=>t.has(e)?__("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),_s=(e,t,r,n)=>(E1(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),sa=(e,t,r)=>(E1(e,t,"access private method"),r);var pg=(e,t,r,n)=>({set _(a){_s(e,t,a,r)},get _(){return rt(e,t,n)}});function hF(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var zse=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ek(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lk={exports:{}},xy={},Tk={exports:{}},zs={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx=Symbol.for("react.element"),fF=Symbol.for("react.portal"),mF=Symbol.for("react.fragment"),pF=Symbol.for("react.strict_mode"),xF=Symbol.for("react.profiler"),gF=Symbol.for("react.provider"),vF=Symbol.for("react.context"),yF=Symbol.for("react.forward_ref"),bF=Symbol.for("react.suspense"),jF=Symbol.for("react.memo"),wF=Symbol.for("react.lazy"),C_=Symbol.iterator;function NF(e){return e===null||typeof e!="object"?null:(e=C_&&e[C_]||e["@@iterator"],typeof e=="function"?e:null)}var Rk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ik=Object.assign,Fk={};function $f(e,t,r){this.props=e,this.context=t,this.refs=Fk,this.updater=r||Rk}$f.prototype.isReactComponent={};$f.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Dk(){}Dk.prototype=$f.prototype;function jN(e,t,r){this.props=e,this.context=t,this.refs=Fk,this.updater=r||Rk}var wN=jN.prototype=new Dk;wN.constructor=jN;Ik(wN,$f.prototype);wN.isPureReactComponent=!0;var k_=Array.isArray,Ok=Object.prototype.hasOwnProperty,NN={current:null},Mk={key:!0,ref:!0,__self:!0,__source:!0};function $k(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Ok.call(t,n)&&!Mk.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:dx,type:e,key:i,ref:o,props:a,_owner:NN.current}}function SF(e,t){return{$$typeof:dx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function SN(e){return typeof e=="object"&&e!==null&&e.$$typeof===dx}function _F(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var A_=/\/+/g;function L1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_F(""+e.key):t.toString(36)}function Qg(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case dx:case fF:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+L1(o,0):n,k_(a)?(r="",e!=null&&(r=e.replace(A_,"$&/")+"/"),Qg(a,t,r,"",function(d){return d})):a!=null&&(SN(a)&&(a=SF(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(A_,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",k_(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+L1(i,l);o+=Qg(i,t,r,c,a)}else if(c=NF(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+L1(i,l++),o+=Qg(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function xg(e,t,r){if(e==null)return e;var n=[],a=0;return Qg(e,n,"","",function(i){return t.call(r,i,a++)}),n}function CF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ta={current:null},ev={transition:null},kF={ReactCurrentDispatcher:Ta,ReactCurrentBatchConfig:ev,ReactCurrentOwner:NN};zs.Children={map:xg,forEach:function(e,t,r){xg(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return xg(e,function(){t++}),t},toArray:function(e){return xg(e,function(t){return t})||[]},only:function(e){if(!SN(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};zs.Component=$f;zs.Fragment=mF;zs.Profiler=xF;zs.PureComponent=jN;zs.StrictMode=pF;zs.Suspense=bF;zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kF;zs.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ik({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=NN.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Ok.call(t,c)&&!Mk.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:dx,type:e.type,key:a,ref:i,props:n,_owner:o}};zs.createContext=function(e){return e={$$typeof:vF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gF,_context:e},e.Consumer=e};zs.createElement=$k;zs.createFactory=function(e){var t=$k.bind(null,e);return t.type=e,t};zs.createRef=function(){return{current:null}};zs.forwardRef=function(e){return{$$typeof:yF,render:e}};zs.isValidElement=SN;zs.lazy=function(e){return{$$typeof:wF,_payload:{_status:-1,_result:e},_init:CF}};zs.memo=function(e,t){return{$$typeof:jF,type:e,compare:t===void 0?null:t}};zs.startTransition=function(e){var t=ev.transition;ev.transition={};try{e()}finally{ev.transition=t}};zs.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};zs.useCallback=function(e,t){return Ta.current.useCallback(e,t)};zs.useContext=function(e){return Ta.current.useContext(e)};zs.useDebugValue=function(){};zs.useDeferredValue=function(e){return Ta.current.useDeferredValue(e)};zs.useEffect=function(e,t){return Ta.current.useEffect(e,t)};zs.useId=function(){return Ta.current.useId()};zs.useImperativeHandle=function(e,t,r){return Ta.current.useImperativeHandle(e,t,r)};zs.useInsertionEffect=function(e,t){return Ta.current.useInsertionEffect(e,t)};zs.useLayoutEffect=function(e,t){return Ta.current.useLayoutEffect(e,t)};zs.useMemo=function(e,t){return Ta.current.useMemo(e,t)};zs.useReducer=function(e,t,r){return Ta.current.useReducer(e,t,r)};zs.useRef=function(e){return Ta.current.useRef(e)};zs.useState=function(e){return Ta.current.useState(e)};zs.useSyncExternalStore=function(e,t,r){return Ta.current.useSyncExternalStore(e,t,r)};zs.useTransition=function(){return Ta.current.useTransition()};zs.version="18.2.0";Tk.exports=zs;var g=Tk.exports;const bs=Ek(g),_N=hF({__proto__:null,default:bs},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AF=g,PF=Symbol.for("react.element"),EF=Symbol.for("react.fragment"),LF=Object.prototype.hasOwnProperty,TF=AF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RF={key:!0,ref:!0,__self:!0,__source:!0};function Bk(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)LF.call(t,n)&&!RF.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:PF,type:e,key:i,ref:o,props:a,_owner:TF.current}}xy.Fragment=EF;xy.jsx=Bk;xy.jsxs=Bk;Lk.exports=xy;var s=Lk.exports,zk={exports:{}},bi={},Uk={exports:{}},qk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,Z){var W=U.length;U.push(Z);e:for(;0<W;){var ve=W-1>>>1,A=U[ve];if(0<a(A,Z))U[ve]=Z,U[W]=A,W=ve;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var Z=U[0],W=U.pop();if(W!==Z){U[0]=W;e:for(var ve=0,A=U.length,z=A>>>1;ve<z;){var M=2*(ve+1)-1,re=U[M],te=M+1,O=U[te];if(0>a(re,W))te<A&&0>a(O,re)?(U[ve]=O,U[te]=W,ve=te):(U[ve]=re,U[M]=W,ve=M);else if(te<A&&0>a(O,W))U[ve]=O,U[te]=W,ve=te;else break e}}return Z}function a(U,Z){var W=U.sortIndex-Z.sortIndex;return W!==0?W:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,y=!1,x=!1,j=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(U){for(var Z=r(d);Z!==null;){if(Z.callback===null)n(d);else if(Z.startTime<=U)n(d),Z.sortIndex=Z.expirationTime,t(c,Z);else break;Z=r(d)}}function k(U){if(x=!1,N(U),!y)if(r(c)!==null)y=!0,oe(P);else{var Z=r(d);Z!==null&&ae(k,Z.startTime-U)}}function P(U,Z){y=!1,x&&(x=!1,v(T),T=-1),f=!0;var W=p;try{for(N(Z),h=r(c);h!==null&&(!(h.expirationTime>Z)||U&&!D());){var ve=h.callback;if(typeof ve=="function"){h.callback=null,p=h.priorityLevel;var A=ve(h.expirationTime<=Z);Z=e.unstable_now(),typeof A=="function"?h.callback=A:h===r(c)&&n(c),N(Z)}else n(c);h=r(c)}if(h!==null)var z=!0;else{var M=r(d);M!==null&&ae(k,M.startTime-Z),z=!1}return z}finally{h=null,p=W,f=!1}}var E=!1,I=null,T=-1,R=5,X=-1;function D(){return!(e.unstable_now()-X<R)}function C(){if(I!==null){var U=e.unstable_now();X=U;var Z=!0;try{Z=I(!0,U)}finally{Z?$():(E=!1,I=null)}}else E=!1}var $;if(typeof w=="function")$=function(){w(C)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Q=B.port2;B.port1.onmessage=C,$=function(){Q.postMessage(null)}}else $=function(){j(C,0)};function oe(U){I=U,E||(E=!0,$())}function ae(U,Z){T=j(function(){U(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){y||f||(y=!0,oe(P))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(U){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var W=p;p=Z;try{return U()}finally{p=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var W=p;p=U;try{return Z()}finally{p=W}},e.unstable_scheduleCallback=function(U,Z,W){var ve=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ve+W:ve):W=ve,U){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=W+A,U={id:u++,callback:Z,priorityLevel:U,startTime:W,expirationTime:A,sortIndex:-1},W>ve?(U.sortIndex=W,t(d,U),r(c)===null&&U===r(d)&&(x?(v(T),T=-1):x=!0,ae(k,W-ve))):(U.sortIndex=A,t(c,U),y||f||(y=!0,oe(P))),U},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(U){var Z=p;return function(){var W=p;p=Z;try{return U.apply(this,arguments)}finally{p=W}}}})(qk);Uk.exports=qk;var IF=Uk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk=g,vi=IF;function ft(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hk=new Set,Ap={};function Iu(e,t){bf(e,t),bf(e+"Capture",t)}function bf(e,t){for(Ap[e]=t,e=0;e<t.length;e++)Hk.add(t[e])}var Yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m2=Object.prototype.hasOwnProperty,FF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P_={},E_={};function DF(e){return m2.call(E_,e)?!0:m2.call(P_,e)?!1:FF.test(e)?E_[e]=!0:(P_[e]=!0,!1)}function OF(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function MF(e,t,r,n){if(t===null||typeof t>"u"||OF(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ra(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Yn[e]=new Ra(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Yn[t]=new Ra(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Yn[e]=new Ra(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Yn[e]=new Ra(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Yn[e]=new Ra(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Yn[e]=new Ra(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Yn[e]=new Ra(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Yn[e]=new Ra(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Yn[e]=new Ra(e,5,!1,e.toLowerCase(),null,!1,!1)});var CN=/[\-:]([a-z])/g;function kN(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(CN,kN);Yn[t]=new Ra(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(CN,kN);Yn[t]=new Ra(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(CN,kN);Yn[t]=new Ra(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Yn[e]=new Ra(e,1,!1,e.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new Ra("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Yn[e]=new Ra(e,1,!1,e.toLowerCase(),null,!0,!0)});function AN(e,t,r,n){var a=Yn.hasOwnProperty(t)?Yn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(MF(t,r,a,n)&&(r=null),n||a===null?DF(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var oc=Vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gg=Symbol.for("react.element"),Ch=Symbol.for("react.portal"),kh=Symbol.for("react.fragment"),PN=Symbol.for("react.strict_mode"),p2=Symbol.for("react.profiler"),Wk=Symbol.for("react.provider"),Gk=Symbol.for("react.context"),EN=Symbol.for("react.forward_ref"),x2=Symbol.for("react.suspense"),g2=Symbol.for("react.suspense_list"),LN=Symbol.for("react.memo"),Rc=Symbol.for("react.lazy"),Kk=Symbol.for("react.offscreen"),L_=Symbol.iterator;function Pm(e){return e===null||typeof e!="object"?null:(e=L_&&e[L_]||e["@@iterator"],typeof e=="function"?e:null)}var Ur=Object.assign,T1;function Gm(e){if(T1===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);T1=t&&t[1]||""}return`
`+T1+e}var R1=!1;function I1(e,t){if(!e||R1)return"";R1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{R1=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Gm(e):""}function $F(e){switch(e.tag){case 5:return Gm(e.type);case 16:return Gm("Lazy");case 13:return Gm("Suspense");case 19:return Gm("SuspenseList");case 0:case 2:case 15:return e=I1(e.type,!1),e;case 11:return e=I1(e.type.render,!1),e;case 1:return e=I1(e.type,!0),e;default:return""}}function v2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kh:return"Fragment";case Ch:return"Portal";case p2:return"Profiler";case PN:return"StrictMode";case x2:return"Suspense";case g2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gk:return(e.displayName||"Context")+".Consumer";case Wk:return(e._context.displayName||"Context")+".Provider";case EN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case LN:return t=e.displayName||null,t!==null?t:v2(e.type)||"Memo";case Rc:t=e._payload,e=e._init;try{return v2(e(t))}catch{}}return null}function BF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v2(t);case 8:return t===PN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zF(e){var t=Yk(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function vg(e){e._valueTracker||(e._valueTracker=zF(e))}function Jk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Yk(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function l0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function y2(e,t){var r=t.checked;return Ur({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function T_(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=fd(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zk(e,t){t=t.checked,t!=null&&AN(e,"checked",t,!1)}function b2(e,t){Zk(e,t);var r=fd(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?j2(e,t.type,r):t.hasOwnProperty("defaultValue")&&j2(e,t.type,fd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function R_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function j2(e,t,r){(t!=="number"||l0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Km=Array.isArray;function $h(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+fd(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function w2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ft(91));return Ur({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function I_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ft(92));if(Km(r)){if(1<r.length)throw Error(ft(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:fd(r)}}function Xk(e,t){var r=fd(t.value),n=fd(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function F_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function N2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yg,e6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yg=yg||document.createElement("div"),yg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var sp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UF=["Webkit","ms","Moz","O"];Object.keys(sp).forEach(function(e){UF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sp[t]=sp[e]})});function t6(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||sp.hasOwnProperty(e)&&sp[e]?(""+t).trim():t+"px"}function s6(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=t6(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var qF=Ur({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function S2(e,t){if(t){if(qF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ft(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ft(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ft(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ft(62))}}function _2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C2=null;function TN(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var k2=null,Bh=null,zh=null;function D_(e){if(e=fx(e)){if(typeof k2!="function")throw Error(ft(280));var t=e.stateNode;t&&(t=jy(t),k2(e.stateNode,e.type,t))}}function r6(e){Bh?zh?zh.push(e):zh=[e]:Bh=e}function n6(){if(Bh){var e=Bh,t=zh;if(zh=Bh=null,D_(e),t)for(e=0;e<t.length;e++)D_(t[e])}}function a6(e,t){return e(t)}function i6(){}var F1=!1;function o6(e,t,r){if(F1)return e(t,r);F1=!0;try{return a6(e,t,r)}finally{F1=!1,(Bh!==null||zh!==null)&&(i6(),n6())}}function Ep(e,t){var r=e.stateNode;if(r===null)return null;var n=jy(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ft(231,t,typeof r));return r}var A2=!1;if(Yl)try{var Em={};Object.defineProperty(Em,"passive",{get:function(){A2=!0}}),window.addEventListener("test",Em,Em),window.removeEventListener("test",Em,Em)}catch{A2=!1}function VF(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var rp=!1,c0=null,d0=!1,P2=null,HF={onError:function(e){rp=!0,c0=e}};function WF(e,t,r,n,a,i,o,l,c){rp=!1,c0=null,VF.apply(HF,arguments)}function GF(e,t,r,n,a,i,o,l,c){if(WF.apply(this,arguments),rp){if(rp){var d=c0;rp=!1,c0=null}else throw Error(ft(198));d0||(d0=!0,P2=d)}}function Fu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function l6(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function O_(e){if(Fu(e)!==e)throw Error(ft(188))}function KF(e){var t=e.alternate;if(!t){if(t=Fu(e),t===null)throw Error(ft(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return O_(a),e;if(i===n)return O_(a),t;i=i.sibling}throw Error(ft(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(ft(189))}}if(r.alternate!==n)throw Error(ft(190))}if(r.tag!==3)throw Error(ft(188));return r.stateNode.current===r?e:t}function c6(e){return e=KF(e),e!==null?d6(e):null}function d6(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=d6(e);if(t!==null)return t;e=e.sibling}return null}var u6=vi.unstable_scheduleCallback,M_=vi.unstable_cancelCallback,YF=vi.unstable_shouldYield,JF=vi.unstable_requestPaint,en=vi.unstable_now,ZF=vi.unstable_getCurrentPriorityLevel,RN=vi.unstable_ImmediatePriority,h6=vi.unstable_UserBlockingPriority,u0=vi.unstable_NormalPriority,XF=vi.unstable_LowPriority,f6=vi.unstable_IdlePriority,gy=null,Qo=null;function QF(e){if(Qo&&typeof Qo.onCommitFiberRoot=="function")try{Qo.onCommitFiberRoot(gy,e,void 0,(e.current.flags&128)===128)}catch{}}var jo=Math.clz32?Math.clz32:sD,eD=Math.log,tD=Math.LN2;function sD(e){return e>>>=0,e===0?32:31-(eD(e)/tD|0)|0}var bg=64,jg=4194304;function Ym(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function h0(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Ym(l):(i&=o,i!==0&&(n=Ym(i)))}else o=r&~a,o!==0?n=Ym(o):i!==0&&(n=Ym(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-jo(t),a=1<<r,n|=e[r],t&=~a;return n}function rD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nD(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-jo(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=rD(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function E2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function m6(){var e=bg;return bg<<=1,!(bg&4194240)&&(bg=64),e}function D1(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ux(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jo(t),e[t]=r}function aD(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-jo(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function IN(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-jo(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ur=0;function p6(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var x6,FN,g6,v6,y6,L2=!1,wg=[],Jc=null,Zc=null,Xc=null,Lp=new Map,Tp=new Map,Dc=[],iD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $_(e,t){switch(e){case"focusin":case"focusout":Jc=null;break;case"dragenter":case"dragleave":Zc=null;break;case"mouseover":case"mouseout":Xc=null;break;case"pointerover":case"pointerout":Lp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tp.delete(t.pointerId)}}function Lm(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=fx(t),t!==null&&FN(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function oD(e,t,r,n,a){switch(t){case"focusin":return Jc=Lm(Jc,e,t,r,n,a),!0;case"dragenter":return Zc=Lm(Zc,e,t,r,n,a),!0;case"mouseover":return Xc=Lm(Xc,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Lp.set(i,Lm(Lp.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Tp.set(i,Lm(Tp.get(i)||null,e,t,r,n,a)),!0}return!1}function b6(e){var t=eu(e.target);if(t!==null){var r=Fu(t);if(r!==null){if(t=r.tag,t===13){if(t=l6(r),t!==null){e.blockedOn=t,y6(e.priority,function(){g6(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=T2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);C2=n,r.target.dispatchEvent(n),C2=null}else return t=fx(r),t!==null&&FN(t),e.blockedOn=r,!1;t.shift()}return!0}function B_(e,t,r){tv(e)&&r.delete(t)}function lD(){L2=!1,Jc!==null&&tv(Jc)&&(Jc=null),Zc!==null&&tv(Zc)&&(Zc=null),Xc!==null&&tv(Xc)&&(Xc=null),Lp.forEach(B_),Tp.forEach(B_)}function Tm(e,t){e.blockedOn===t&&(e.blockedOn=null,L2||(L2=!0,vi.unstable_scheduleCallback(vi.unstable_NormalPriority,lD)))}function Rp(e){function t(a){return Tm(a,e)}if(0<wg.length){Tm(wg[0],e);for(var r=1;r<wg.length;r++){var n=wg[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Jc!==null&&Tm(Jc,e),Zc!==null&&Tm(Zc,e),Xc!==null&&Tm(Xc,e),Lp.forEach(t),Tp.forEach(t),r=0;r<Dc.length;r++)n=Dc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Dc.length&&(r=Dc[0],r.blockedOn===null);)b6(r),r.blockedOn===null&&Dc.shift()}var Uh=oc.ReactCurrentBatchConfig,f0=!0;function cD(e,t,r,n){var a=ur,i=Uh.transition;Uh.transition=null;try{ur=1,DN(e,t,r,n)}finally{ur=a,Uh.transition=i}}function dD(e,t,r,n){var a=ur,i=Uh.transition;Uh.transition=null;try{ur=4,DN(e,t,r,n)}finally{ur=a,Uh.transition=i}}function DN(e,t,r,n){if(f0){var a=T2(e,t,r,n);if(a===null)W1(e,t,n,m0,r),$_(e,n);else if(oD(a,e,t,r,n))n.stopPropagation();else if($_(e,n),t&4&&-1<iD.indexOf(e)){for(;a!==null;){var i=fx(a);if(i!==null&&x6(i),i=T2(e,t,r,n),i===null&&W1(e,t,n,m0,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else W1(e,t,n,null,r)}}var m0=null;function T2(e,t,r,n){if(m0=null,e=TN(n),e=eu(e),e!==null)if(t=Fu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=l6(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return m0=e,null}function j6(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZF()){case RN:return 1;case h6:return 4;case u0:case XF:return 16;case f6:return 536870912;default:return 16}default:return 16}}var Wc=null,ON=null,sv=null;function w6(){if(sv)return sv;var e,t=ON,r=t.length,n,a="value"in Wc?Wc.value:Wc.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return sv=a.slice(e,1<n?1-n:void 0)}function rv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ng(){return!0}function z_(){return!1}function ji(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ng:z_,this.isPropagationStopped=z_,this}return Ur(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ng)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ng)},persist:function(){},isPersistent:Ng}),t}var Bf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},MN=ji(Bf),hx=Ur({},Bf,{view:0,detail:0}),uD=ji(hx),O1,M1,Rm,vy=Ur({},hx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$N,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rm&&(Rm&&e.type==="mousemove"?(O1=e.screenX-Rm.screenX,M1=e.screenY-Rm.screenY):M1=O1=0,Rm=e),O1)},movementY:function(e){return"movementY"in e?e.movementY:M1}}),U_=ji(vy),hD=Ur({},vy,{dataTransfer:0}),fD=ji(hD),mD=Ur({},hx,{relatedTarget:0}),$1=ji(mD),pD=Ur({},Bf,{animationName:0,elapsedTime:0,pseudoElement:0}),xD=ji(pD),gD=Ur({},Bf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vD=ji(gD),yD=Ur({},Bf,{data:0}),q_=ji(yD),bD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ND(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wD[e])?!!t[e]:!1}function $N(){return ND}var SD=Ur({},hx,{key:function(e){if(e.key){var t=bD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$N,charCode:function(e){return e.type==="keypress"?rv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_D=ji(SD),CD=Ur({},vy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V_=ji(CD),kD=Ur({},hx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$N}),AD=ji(kD),PD=Ur({},Bf,{propertyName:0,elapsedTime:0,pseudoElement:0}),ED=ji(PD),LD=Ur({},vy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),TD=ji(LD),RD=[9,13,27,32],BN=Yl&&"CompositionEvent"in window,np=null;Yl&&"documentMode"in document&&(np=document.documentMode);var ID=Yl&&"TextEvent"in window&&!np,N6=Yl&&(!BN||np&&8<np&&11>=np),H_=" ",W_=!1;function S6(e,t){switch(e){case"keyup":return RD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ah=!1;function FD(e,t){switch(e){case"compositionend":return _6(t);case"keypress":return t.which!==32?null:(W_=!0,H_);case"textInput":return e=t.data,e===H_&&W_?null:e;default:return null}}function DD(e,t){if(Ah)return e==="compositionend"||!BN&&S6(e,t)?(e=w6(),sv=ON=Wc=null,Ah=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return N6&&t.locale!=="ko"?null:t.data;default:return null}}var OD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OD[e.type]:t==="textarea"}function C6(e,t,r,n){r6(n),t=p0(t,"onChange"),0<t.length&&(r=new MN("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ap=null,Ip=null;function MD(e){O6(e,0)}function yy(e){var t=Lh(e);if(Jk(t))return e}function $D(e,t){if(e==="change")return t}var k6=!1;if(Yl){var B1;if(Yl){var z1="oninput"in document;if(!z1){var K_=document.createElement("div");K_.setAttribute("oninput","return;"),z1=typeof K_.oninput=="function"}B1=z1}else B1=!1;k6=B1&&(!document.documentMode||9<document.documentMode)}function Y_(){ap&&(ap.detachEvent("onpropertychange",A6),Ip=ap=null)}function A6(e){if(e.propertyName==="value"&&yy(Ip)){var t=[];C6(t,Ip,e,TN(e)),o6(MD,t)}}function BD(e,t,r){e==="focusin"?(Y_(),ap=t,Ip=r,ap.attachEvent("onpropertychange",A6)):e==="focusout"&&Y_()}function zD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yy(Ip)}function UD(e,t){if(e==="click")return yy(t)}function qD(e,t){if(e==="input"||e==="change")return yy(t)}function VD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var No=typeof Object.is=="function"?Object.is:VD;function Fp(e,t){if(No(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!m2.call(t,a)||!No(e[a],t[a]))return!1}return!0}function J_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Z_(e,t){var r=J_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=J_(r)}}function P6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?P6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E6(){for(var e=window,t=l0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=l0(e.document)}return t}function zN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function HD(e){var t=E6(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&P6(r.ownerDocument.documentElement,r)){if(n!==null&&zN(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Z_(r,i);var o=Z_(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var WD=Yl&&"documentMode"in document&&11>=document.documentMode,Ph=null,R2=null,ip=null,I2=!1;function X_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;I2||Ph==null||Ph!==l0(n)||(n=Ph,"selectionStart"in n&&zN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ip&&Fp(ip,n)||(ip=n,n=p0(R2,"onSelect"),0<n.length&&(t=new MN("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ph)))}function Sg(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Eh={animationend:Sg("Animation","AnimationEnd"),animationiteration:Sg("Animation","AnimationIteration"),animationstart:Sg("Animation","AnimationStart"),transitionend:Sg("Transition","TransitionEnd")},U1={},L6={};Yl&&(L6=document.createElement("div").style,"AnimationEvent"in window||(delete Eh.animationend.animation,delete Eh.animationiteration.animation,delete Eh.animationstart.animation),"TransitionEvent"in window||delete Eh.transitionend.transition);function by(e){if(U1[e])return U1[e];if(!Eh[e])return e;var t=Eh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in L6)return U1[e]=t[r];return e}var T6=by("animationend"),R6=by("animationiteration"),I6=by("animationstart"),F6=by("transitionend"),D6=new Map,Q_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cd(e,t){D6.set(e,t),Iu(t,[e])}for(var q1=0;q1<Q_.length;q1++){var V1=Q_[q1],GD=V1.toLowerCase(),KD=V1[0].toUpperCase()+V1.slice(1);Cd(GD,"on"+KD)}Cd(T6,"onAnimationEnd");Cd(R6,"onAnimationIteration");Cd(I6,"onAnimationStart");Cd("dblclick","onDoubleClick");Cd("focusin","onFocus");Cd("focusout","onBlur");Cd(F6,"onTransitionEnd");bf("onMouseEnter",["mouseout","mouseover"]);bf("onMouseLeave",["mouseout","mouseover"]);bf("onPointerEnter",["pointerout","pointerover"]);bf("onPointerLeave",["pointerout","pointerover"]);Iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jm));function e4(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,GF(n,t,void 0,e),e.currentTarget=null}function O6(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;e4(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;e4(a,l,d),i=c}}}if(d0)throw e=P2,d0=!1,P2=null,e}function Pr(e,t){var r=t[$2];r===void 0&&(r=t[$2]=new Set);var n=e+"__bubble";r.has(n)||(M6(t,e,2,!1),r.add(n))}function H1(e,t,r){var n=0;t&&(n|=4),M6(r,e,n,t)}var _g="_reactListening"+Math.random().toString(36).slice(2);function Dp(e){if(!e[_g]){e[_g]=!0,Hk.forEach(function(r){r!=="selectionchange"&&(YD.has(r)||H1(r,!1,e),H1(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_g]||(t[_g]=!0,H1("selectionchange",!1,t))}}function M6(e,t,r,n){switch(j6(t)){case 1:var a=cD;break;case 4:a=dD;break;default:a=DN}r=a.bind(null,t,r,e),a=void 0,!A2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function W1(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=eu(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}o6(function(){var d=i,u=TN(r),h=[];e:{var p=D6.get(e);if(p!==void 0){var f=MN,y=e;switch(e){case"keypress":if(rv(r)===0)break e;case"keydown":case"keyup":f=_D;break;case"focusin":y="focus",f=$1;break;case"focusout":y="blur",f=$1;break;case"beforeblur":case"afterblur":f=$1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=U_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=fD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=AD;break;case T6:case R6:case I6:f=xD;break;case F6:f=ED;break;case"scroll":f=uD;break;case"wheel":f=TD;break;case"copy":case"cut":case"paste":f=vD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=V_}var x=(t&4)!==0,j=!x&&e==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var w=d,N;w!==null;){N=w;var k=N.stateNode;if(N.tag===5&&k!==null&&(N=k,v!==null&&(k=Ep(w,v),k!=null&&x.push(Op(w,k,N)))),j)break;w=w.return}0<x.length&&(p=new f(p,y,null,r,u),h.push({event:p,listeners:x}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&r!==C2&&(y=r.relatedTarget||r.fromElement)&&(eu(y)||y[Jl]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(y=r.relatedTarget||r.toElement,f=d,y=y?eu(y):null,y!==null&&(j=Fu(y),y!==j||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=d),f!==y)){if(x=U_,k="onMouseLeave",v="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(x=V_,k="onPointerLeave",v="onPointerEnter",w="pointer"),j=f==null?p:Lh(f),N=y==null?p:Lh(y),p=new x(k,w+"leave",f,r,u),p.target=j,p.relatedTarget=N,k=null,eu(u)===d&&(x=new x(v,w+"enter",y,r,u),x.target=N,x.relatedTarget=j,k=x),j=k,f&&y)t:{for(x=f,v=y,w=0,N=x;N;N=uh(N))w++;for(N=0,k=v;k;k=uh(k))N++;for(;0<w-N;)x=uh(x),w--;for(;0<N-w;)v=uh(v),N--;for(;w--;){if(x===v||v!==null&&x===v.alternate)break t;x=uh(x),v=uh(v)}x=null}else x=null;f!==null&&t4(h,p,f,x,!1),y!==null&&j!==null&&t4(h,j,y,x,!0)}}e:{if(p=d?Lh(d):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var P=$D;else if(G_(p))if(k6)P=qD;else{P=zD;var E=BD}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=UD);if(P&&(P=P(e,d))){C6(h,P,r,u);break e}E&&E(e,p,d),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&j2(p,"number",p.value)}switch(E=d?Lh(d):window,e){case"focusin":(G_(E)||E.contentEditable==="true")&&(Ph=E,R2=d,ip=null);break;case"focusout":ip=R2=Ph=null;break;case"mousedown":I2=!0;break;case"contextmenu":case"mouseup":case"dragend":I2=!1,X_(h,r,u);break;case"selectionchange":if(WD)break;case"keydown":case"keyup":X_(h,r,u)}var I;if(BN)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ah?S6(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(N6&&r.locale!=="ko"&&(Ah||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ah&&(I=w6()):(Wc=u,ON="value"in Wc?Wc.value:Wc.textContent,Ah=!0)),E=p0(d,T),0<E.length&&(T=new q_(T,e,null,r,u),h.push({event:T,listeners:E}),I?T.data=I:(I=_6(r),I!==null&&(T.data=I)))),(I=ID?FD(e,r):DD(e,r))&&(d=p0(d,"onBeforeInput"),0<d.length&&(u=new q_("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=I))}O6(h,t)})}function Op(e,t,r){return{instance:e,listener:t,currentTarget:r}}function p0(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ep(e,r),i!=null&&n.unshift(Op(e,i,a)),i=Ep(e,t),i!=null&&n.push(Op(e,i,a))),e=e.return}return n}function uh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function t4(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Ep(r,i),c!=null&&o.unshift(Op(r,c,l))):a||(c=Ep(r,i),c!=null&&o.push(Op(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var JD=/\r\n?/g,ZD=/\u0000|\uFFFD/g;function s4(e){return(typeof e=="string"?e:""+e).replace(JD,`
`).replace(ZD,"")}function Cg(e,t,r){if(t=s4(t),s4(e)!==t&&r)throw Error(ft(425))}function x0(){}var F2=null,D2=null;function O2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var M2=typeof setTimeout=="function"?setTimeout:void 0,XD=typeof clearTimeout=="function"?clearTimeout:void 0,r4=typeof Promise=="function"?Promise:void 0,QD=typeof queueMicrotask=="function"?queueMicrotask:typeof r4<"u"?function(e){return r4.resolve(null).then(e).catch(eO)}:M2;function eO(e){setTimeout(function(){throw e})}function G1(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Rp(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Rp(t)}function Qc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function n4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var zf=Math.random().toString(36).slice(2),Ho="__reactFiber$"+zf,Mp="__reactProps$"+zf,Jl="__reactContainer$"+zf,$2="__reactEvents$"+zf,tO="__reactListeners$"+zf,sO="__reactHandles$"+zf;function eu(e){var t=e[Ho];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Jl]||r[Ho]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=n4(e);e!==null;){if(r=e[Ho])return r;e=n4(e)}return t}e=r,r=e.parentNode}return null}function fx(e){return e=e[Ho]||e[Jl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ft(33))}function jy(e){return e[Mp]||null}var B2=[],Th=-1;function kd(e){return{current:e}}function Tr(e){0>Th||(e.current=B2[Th],B2[Th]=null,Th--)}function Cr(e,t){Th++,B2[Th]=e.current,e.current=t}var md={},ya=kd(md),Ha=kd(!1),ju=md;function jf(e,t){var r=e.type.contextTypes;if(!r)return md;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Wa(e){return e=e.childContextTypes,e!=null}function g0(){Tr(Ha),Tr(ya)}function a4(e,t,r){if(ya.current!==md)throw Error(ft(168));Cr(ya,t),Cr(Ha,r)}function $6(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ft(108,BF(e)||"Unknown",a));return Ur({},r,n)}function v0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||md,ju=ya.current,Cr(ya,e),Cr(Ha,Ha.current),!0}function i4(e,t,r){var n=e.stateNode;if(!n)throw Error(ft(169));r?(e=$6(e,t,ju),n.__reactInternalMemoizedMergedChildContext=e,Tr(Ha),Tr(ya),Cr(ya,e)):Tr(Ha),Cr(Ha,r)}var Il=null,wy=!1,K1=!1;function B6(e){Il===null?Il=[e]:Il.push(e)}function rO(e){wy=!0,B6(e)}function Ad(){if(!K1&&Il!==null){K1=!0;var e=0,t=ur;try{var r=Il;for(ur=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Il=null,wy=!1}catch(a){throw Il!==null&&(Il=Il.slice(e+1)),u6(RN,Ad),a}finally{ur=t,K1=!1}}return null}var Rh=[],Ih=0,y0=null,b0=0,Ti=[],Ri=0,wu=null,Dl=1,Ol="";function Yd(e,t){Rh[Ih++]=b0,Rh[Ih++]=y0,y0=e,b0=t}function z6(e,t,r){Ti[Ri++]=Dl,Ti[Ri++]=Ol,Ti[Ri++]=wu,wu=e;var n=Dl;e=Ol;var a=32-jo(n)-1;n&=~(1<<a),r+=1;var i=32-jo(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Dl=1<<32-jo(t)+a|r<<a|n,Ol=i+e}else Dl=1<<i|r<<a|n,Ol=e}function UN(e){e.return!==null&&(Yd(e,1),z6(e,1,0))}function qN(e){for(;e===y0;)y0=Rh[--Ih],Rh[Ih]=null,b0=Rh[--Ih],Rh[Ih]=null;for(;e===wu;)wu=Ti[--Ri],Ti[Ri]=null,Ol=Ti[--Ri],Ti[Ri]=null,Dl=Ti[--Ri],Ti[Ri]=null}var xi=null,fi=null,Dr=!1,co=null;function U6(e,t){var r=Oi(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function o4(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xi=e,fi=Qc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xi=e,fi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=wu!==null?{id:Dl,overflow:Ol}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Oi(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,xi=e,fi=null,!0):!1;default:return!1}}function z2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function U2(e){if(Dr){var t=fi;if(t){var r=t;if(!o4(e,t)){if(z2(e))throw Error(ft(418));t=Qc(r.nextSibling);var n=xi;t&&o4(e,t)?U6(n,r):(e.flags=e.flags&-4097|2,Dr=!1,xi=e)}}else{if(z2(e))throw Error(ft(418));e.flags=e.flags&-4097|2,Dr=!1,xi=e}}}function l4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xi=e}function kg(e){if(e!==xi)return!1;if(!Dr)return l4(e),Dr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!O2(e.type,e.memoizedProps)),t&&(t=fi)){if(z2(e))throw q6(),Error(ft(418));for(;t;)U6(e,t),t=Qc(t.nextSibling)}if(l4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ft(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){fi=Qc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}fi=null}}else fi=xi?Qc(e.stateNode.nextSibling):null;return!0}function q6(){for(var e=fi;e;)e=Qc(e.nextSibling)}function wf(){fi=xi=null,Dr=!1}function VN(e){co===null?co=[e]:co.push(e)}var nO=oc.ReactCurrentBatchConfig;function so(e,t){if(e&&e.defaultProps){t=Ur({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var j0=kd(null),w0=null,Fh=null,HN=null;function WN(){HN=Fh=w0=null}function GN(e){var t=j0.current;Tr(j0),e._currentValue=t}function q2(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function qh(e,t){w0=e,HN=Fh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Va=!0),e.firstContext=null)}function zi(e){var t=e._currentValue;if(HN!==e)if(e={context:e,memoizedValue:t,next:null},Fh===null){if(w0===null)throw Error(ft(308));Fh=e,w0.dependencies={lanes:0,firstContext:e}}else Fh=Fh.next=e;return t}var tu=null;function KN(e){tu===null?tu=[e]:tu.push(e)}function V6(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,KN(t)):(r.next=a.next,a.next=r),t.interleaved=r,Zl(e,n)}function Zl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ic=!1;function YN(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ed(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Xs&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Zl(e,r)}return a=n.interleaved,a===null?(t.next=t,KN(n)):(t.next=a.next,a.next=t),n.interleaved=t,Zl(e,r)}function nv(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,IN(e,r)}}function c4(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function N0(e,t,r,n){var a=e.updateQueue;Ic=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var p=l.lane,f=l.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,x=l;switch(p=t,f=r,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(f,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,p=typeof y=="function"?y.call(f,h,p):y,p==null)break e;h=Ur({},h,p);break e;case 2:Ic=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=f,c=h):u=u.next=f,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Su|=o,e.lanes=o,e.memoizedState=h}}function d4(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ft(191,a));a.call(n)}}}var W6=new Vk.Component().refs;function V2(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ur({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ny={isMounted:function(e){return(e=e._reactInternals)?Fu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Pa(),a=sd(e),i=Bl(n,a);i.payload=t,r!=null&&(i.callback=r),t=ed(e,i,a),t!==null&&(wo(t,e,a,n),nv(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Pa(),a=sd(e),i=Bl(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ed(e,i,a),t!==null&&(wo(t,e,a,n),nv(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Pa(),n=sd(e),a=Bl(r,n);a.tag=2,t!=null&&(a.callback=t),t=ed(e,a,n),t!==null&&(wo(t,e,n,r),nv(t,e,n))}};function u4(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Fp(r,n)||!Fp(a,i):!0}function G6(e,t,r){var n=!1,a=md,i=t.contextType;return typeof i=="object"&&i!==null?i=zi(i):(a=Wa(t)?ju:ya.current,n=t.contextTypes,i=(n=n!=null)?jf(e,a):md),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ny,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function h4(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ny.enqueueReplaceState(t,t.state,null)}function H2(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=W6,YN(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=zi(i):(i=Wa(t)?ju:ya.current,a.context=jf(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(V2(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ny.enqueueReplaceState(a,a.state,null),N0(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Im(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ft(309));var n=r.stateNode}if(!n)throw Error(ft(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;l===W6&&(l=a.refs={}),o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ft(284));if(!r._owner)throw Error(ft(290,e))}return e}function Ag(e,t){throw e=Object.prototype.toString.call(t),Error(ft(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function f4(e){var t=e._init;return t(e._payload)}function K6(e){function t(v,w){if(e){var N=v.deletions;N===null?(v.deletions=[w],v.flags|=16):N.push(w)}}function r(v,w){if(!e)return null;for(;w!==null;)t(v,w),w=w.sibling;return null}function n(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function a(v,w){return v=rd(v,w),v.index=0,v.sibling=null,v}function i(v,w,N){return v.index=N,e?(N=v.alternate,N!==null?(N=N.index,N<w?(v.flags|=2,w):N):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,w,N,k){return w===null||w.tag!==6?(w=tj(N,v.mode,k),w.return=v,w):(w=a(w,N),w.return=v,w)}function c(v,w,N,k){var P=N.type;return P===kh?u(v,w,N.props.children,k,N.key):w!==null&&(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Rc&&f4(P)===w.type)?(k=a(w,N.props),k.ref=Im(v,w,N),k.return=v,k):(k=dv(N.type,N.key,N.props,null,v.mode,k),k.ref=Im(v,w,N),k.return=v,k)}function d(v,w,N,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=sj(N,v.mode,k),w.return=v,w):(w=a(w,N.children||[]),w.return=v,w)}function u(v,w,N,k,P){return w===null||w.tag!==7?(w=fu(N,v.mode,k,P),w.return=v,w):(w=a(w,N),w.return=v,w)}function h(v,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=tj(""+w,v.mode,N),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gg:return N=dv(w.type,w.key,w.props,null,v.mode,N),N.ref=Im(v,null,w),N.return=v,N;case Ch:return w=sj(w,v.mode,N),w.return=v,w;case Rc:var k=w._init;return h(v,k(w._payload),N)}if(Km(w)||Pm(w))return w=fu(w,v.mode,N,null),w.return=v,w;Ag(v,w)}return null}function p(v,w,N,k){var P=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return P!==null?null:l(v,w,""+N,k);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case gg:return N.key===P?c(v,w,N,k):null;case Ch:return N.key===P?d(v,w,N,k):null;case Rc:return P=N._init,p(v,w,P(N._payload),k)}if(Km(N)||Pm(N))return P!==null?null:u(v,w,N,k,null);Ag(v,N)}return null}function f(v,w,N,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(N)||null,l(w,v,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case gg:return v=v.get(k.key===null?N:k.key)||null,c(w,v,k,P);case Ch:return v=v.get(k.key===null?N:k.key)||null,d(w,v,k,P);case Rc:var E=k._init;return f(v,w,N,E(k._payload),P)}if(Km(k)||Pm(k))return v=v.get(N)||null,u(w,v,k,P,null);Ag(w,k)}return null}function y(v,w,N,k){for(var P=null,E=null,I=w,T=w=0,R=null;I!==null&&T<N.length;T++){I.index>T?(R=I,I=null):R=I.sibling;var X=p(v,I,N[T],k);if(X===null){I===null&&(I=R);break}e&&I&&X.alternate===null&&t(v,I),w=i(X,w,T),E===null?P=X:E.sibling=X,E=X,I=R}if(T===N.length)return r(v,I),Dr&&Yd(v,T),P;if(I===null){for(;T<N.length;T++)I=h(v,N[T],k),I!==null&&(w=i(I,w,T),E===null?P=I:E.sibling=I,E=I);return Dr&&Yd(v,T),P}for(I=n(v,I);T<N.length;T++)R=f(I,v,T,N[T],k),R!==null&&(e&&R.alternate!==null&&I.delete(R.key===null?T:R.key),w=i(R,w,T),E===null?P=R:E.sibling=R,E=R);return e&&I.forEach(function(D){return t(v,D)}),Dr&&Yd(v,T),P}function x(v,w,N,k){var P=Pm(N);if(typeof P!="function")throw Error(ft(150));if(N=P.call(N),N==null)throw Error(ft(151));for(var E=P=null,I=w,T=w=0,R=null,X=N.next();I!==null&&!X.done;T++,X=N.next()){I.index>T?(R=I,I=null):R=I.sibling;var D=p(v,I,X.value,k);if(D===null){I===null&&(I=R);break}e&&I&&D.alternate===null&&t(v,I),w=i(D,w,T),E===null?P=D:E.sibling=D,E=D,I=R}if(X.done)return r(v,I),Dr&&Yd(v,T),P;if(I===null){for(;!X.done;T++,X=N.next())X=h(v,X.value,k),X!==null&&(w=i(X,w,T),E===null?P=X:E.sibling=X,E=X);return Dr&&Yd(v,T),P}for(I=n(v,I);!X.done;T++,X=N.next())X=f(I,v,T,X.value,k),X!==null&&(e&&X.alternate!==null&&I.delete(X.key===null?T:X.key),w=i(X,w,T),E===null?P=X:E.sibling=X,E=X);return e&&I.forEach(function(C){return t(v,C)}),Dr&&Yd(v,T),P}function j(v,w,N,k){if(typeof N=="object"&&N!==null&&N.type===kh&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case gg:e:{for(var P=N.key,E=w;E!==null;){if(E.key===P){if(P=N.type,P===kh){if(E.tag===7){r(v,E.sibling),w=a(E,N.props.children),w.return=v,v=w;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Rc&&f4(P)===E.type){r(v,E.sibling),w=a(E,N.props),w.ref=Im(v,E,N),w.return=v,v=w;break e}r(v,E);break}else t(v,E);E=E.sibling}N.type===kh?(w=fu(N.props.children,v.mode,k,N.key),w.return=v,v=w):(k=dv(N.type,N.key,N.props,null,v.mode,k),k.ref=Im(v,w,N),k.return=v,v=k)}return o(v);case Ch:e:{for(E=N.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){r(v,w.sibling),w=a(w,N.children||[]),w.return=v,v=w;break e}else{r(v,w);break}else t(v,w);w=w.sibling}w=sj(N,v.mode,k),w.return=v,v=w}return o(v);case Rc:return E=N._init,j(v,w,E(N._payload),k)}if(Km(N))return y(v,w,N,k);if(Pm(N))return x(v,w,N,k);Ag(v,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(r(v,w.sibling),w=a(w,N),w.return=v,v=w):(r(v,w),w=tj(N,v.mode,k),w.return=v,v=w),o(v)):r(v,w)}return j}var Nf=K6(!0),Y6=K6(!1),mx={},el=kd(mx),$p=kd(mx),Bp=kd(mx);function su(e){if(e===mx)throw Error(ft(174));return e}function JN(e,t){switch(Cr(Bp,t),Cr($p,e),Cr(el,mx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:N2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=N2(t,e)}Tr(el),Cr(el,t)}function Sf(){Tr(el),Tr($p),Tr(Bp)}function J6(e){su(Bp.current);var t=su(el.current),r=N2(t,e.type);t!==r&&(Cr($p,e),Cr(el,r))}function ZN(e){$p.current===e&&(Tr(el),Tr($p))}var Br=kd(0);function S0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Y1=[];function XN(){for(var e=0;e<Y1.length;e++)Y1[e]._workInProgressVersionPrimary=null;Y1.length=0}var av=oc.ReactCurrentDispatcher,J1=oc.ReactCurrentBatchConfig,Nu=0,zr=null,yn=null,An=null,_0=!1,op=!1,zp=0,aO=0;function ra(){throw Error(ft(321))}function QN(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!No(e[r],t[r]))return!1;return!0}function e5(e,t,r,n,a,i){if(Nu=i,zr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,av.current=e===null||e.memoizedState===null?cO:dO,e=r(n,a),op){i=0;do{if(op=!1,zp=0,25<=i)throw Error(ft(301));i+=1,An=yn=null,t.updateQueue=null,av.current=uO,e=r(n,a)}while(op)}if(av.current=C0,t=yn!==null&&yn.next!==null,Nu=0,An=yn=zr=null,_0=!1,t)throw Error(ft(300));return e}function t5(){var e=zp!==0;return zp=0,e}function zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?zr.memoizedState=An=e:An=An.next=e,An}function Ui(){if(yn===null){var e=zr.alternate;e=e!==null?e.memoizedState:null}else e=yn.next;var t=An===null?zr.memoizedState:An.next;if(t!==null)An=t,yn=e;else{if(e===null)throw Error(ft(310));yn=e,e={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},An===null?zr.memoizedState=An=e:An=An.next=e}return An}function Up(e,t){return typeof t=="function"?t(e):t}function Z1(e){var t=Ui(),r=t.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=e;var n=yn,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Nu&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,zr.lanes|=u,Su|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,No(n,t.memoizedState)||(Va=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,zr.lanes|=i,Su|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function X1(e){var t=Ui(),r=t.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);No(i,t.memoizedState)||(Va=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Z6(){}function X6(e,t){var r=zr,n=Ui(),a=t(),i=!No(n.memoizedState,a);if(i&&(n.memoizedState=a,Va=!0),n=n.queue,s5(tA.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||An!==null&&An.memoizedState.tag&1){if(r.flags|=2048,qp(9,eA.bind(null,r,n,a,t),void 0,null),Tn===null)throw Error(ft(349));Nu&30||Q6(r,t,a)}return a}function Q6(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function eA(e,t,r,n){t.value=r,t.getSnapshot=n,sA(t)&&rA(e)}function tA(e,t,r){return r(function(){sA(t)&&rA(e)})}function sA(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!No(e,r)}catch{return!0}}function rA(e){var t=Zl(e,1);t!==null&&wo(t,e,1,-1)}function m4(e){var t=zo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Up,lastRenderedState:e},t.queue=e,e=e.dispatch=lO.bind(null,zr,e),[t.memoizedState,e]}function qp(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function nA(){return Ui().memoizedState}function iv(e,t,r,n){var a=zo();zr.flags|=e,a.memoizedState=qp(1|t,r,void 0,n===void 0?null:n)}function Sy(e,t,r,n){var a=Ui();n=n===void 0?null:n;var i=void 0;if(yn!==null){var o=yn.memoizedState;if(i=o.destroy,n!==null&&QN(n,o.deps)){a.memoizedState=qp(t,r,i,n);return}}zr.flags|=e,a.memoizedState=qp(1|t,r,i,n)}function p4(e,t){return iv(8390656,8,e,t)}function s5(e,t){return Sy(2048,8,e,t)}function aA(e,t){return Sy(4,2,e,t)}function iA(e,t){return Sy(4,4,e,t)}function oA(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lA(e,t,r){return r=r!=null?r.concat([e]):null,Sy(4,4,oA.bind(null,t,e),r)}function r5(){}function cA(e,t){var r=Ui();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&QN(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function dA(e,t){var r=Ui();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&QN(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function uA(e,t,r){return Nu&21?(No(r,t)||(r=m6(),zr.lanes|=r,Su|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Va=!0),e.memoizedState=r)}function iO(e,t){var r=ur;ur=r!==0&&4>r?r:4,e(!0);var n=J1.transition;J1.transition={};try{e(!1),t()}finally{ur=r,J1.transition=n}}function hA(){return Ui().memoizedState}function oO(e,t,r){var n=sd(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},fA(e))mA(t,r);else if(r=V6(e,t,r,n),r!==null){var a=Pa();wo(r,e,n,a),pA(r,t,n)}}function lO(e,t,r){var n=sd(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(fA(e))mA(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,No(l,o)){var c=t.interleaved;c===null?(a.next=a,KN(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=V6(e,t,a,n),r!==null&&(a=Pa(),wo(r,e,n,a),pA(r,t,n))}}function fA(e){var t=e.alternate;return e===zr||t!==null&&t===zr}function mA(e,t){op=_0=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function pA(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,IN(e,r)}}var C0={readContext:zi,useCallback:ra,useContext:ra,useEffect:ra,useImperativeHandle:ra,useInsertionEffect:ra,useLayoutEffect:ra,useMemo:ra,useReducer:ra,useRef:ra,useState:ra,useDebugValue:ra,useDeferredValue:ra,useTransition:ra,useMutableSource:ra,useSyncExternalStore:ra,useId:ra,unstable_isNewReconciler:!1},cO={readContext:zi,useCallback:function(e,t){return zo().memoizedState=[e,t===void 0?null:t],e},useContext:zi,useEffect:p4,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,iv(4194308,4,oA.bind(null,t,e),r)},useLayoutEffect:function(e,t){return iv(4194308,4,e,t)},useInsertionEffect:function(e,t){return iv(4,2,e,t)},useMemo:function(e,t){var r=zo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=zo();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=oO.bind(null,zr,e),[n.memoizedState,e]},useRef:function(e){var t=zo();return e={current:e},t.memoizedState=e},useState:m4,useDebugValue:r5,useDeferredValue:function(e){return zo().memoizedState=e},useTransition:function(){var e=m4(!1),t=e[0];return e=iO.bind(null,e[1]),zo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=zr,a=zo();if(Dr){if(r===void 0)throw Error(ft(407));r=r()}else{if(r=t(),Tn===null)throw Error(ft(349));Nu&30||Q6(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,p4(tA.bind(null,n,i,e),[e]),n.flags|=2048,qp(9,eA.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=zo(),t=Tn.identifierPrefix;if(Dr){var r=Ol,n=Dl;r=(n&~(1<<32-jo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=zp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=aO++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dO={readContext:zi,useCallback:cA,useContext:zi,useEffect:s5,useImperativeHandle:lA,useInsertionEffect:aA,useLayoutEffect:iA,useMemo:dA,useReducer:Z1,useRef:nA,useState:function(){return Z1(Up)},useDebugValue:r5,useDeferredValue:function(e){var t=Ui();return uA(t,yn.memoizedState,e)},useTransition:function(){var e=Z1(Up)[0],t=Ui().memoizedState;return[e,t]},useMutableSource:Z6,useSyncExternalStore:X6,useId:hA,unstable_isNewReconciler:!1},uO={readContext:zi,useCallback:cA,useContext:zi,useEffect:s5,useImperativeHandle:lA,useInsertionEffect:aA,useLayoutEffect:iA,useMemo:dA,useReducer:X1,useRef:nA,useState:function(){return X1(Up)},useDebugValue:r5,useDeferredValue:function(e){var t=Ui();return yn===null?t.memoizedState=e:uA(t,yn.memoizedState,e)},useTransition:function(){var e=X1(Up)[0],t=Ui().memoizedState;return[e,t]},useMutableSource:Z6,useSyncExternalStore:X6,useId:hA,unstable_isNewReconciler:!1};function _f(e,t){try{var r="",n=t;do r+=$F(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Q1(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function W2(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hO=typeof WeakMap=="function"?WeakMap:Map;function xA(e,t,r){r=Bl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){A0||(A0=!0,sw=n),W2(e,t)},r}function gA(e,t,r){r=Bl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){W2(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){W2(e,t),typeof n!="function"&&(td===null?td=new Set([this]):td.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function x4(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new hO;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=CO.bind(null,e,t,r),t.then(e,e))}function g4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function v4(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Bl(-1,1),t.tag=2,ed(r,t,1))),r.lanes|=1),e)}var fO=oc.ReactCurrentOwner,Va=!1;function Ca(e,t,r,n){t.child=e===null?Y6(t,null,r,n):Nf(t,e.child,r,n)}function y4(e,t,r,n,a){r=r.render;var i=t.ref;return qh(t,a),n=e5(e,t,r,n,i,a),r=t5(),e!==null&&!Va?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Xl(e,t,a)):(Dr&&r&&UN(t),t.flags|=1,Ca(e,t,n,a),t.child)}function b4(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!u5(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,vA(e,t,i,n,a)):(e=dv(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Fp,r(o,n)&&e.ref===t.ref)return Xl(e,t,a)}return t.flags|=1,e=rd(i,n),e.ref=t.ref,e.return=t,t.child=e}function vA(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Fp(i,n)&&e.ref===t.ref)if(Va=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Va=!0);else return t.lanes=e.lanes,Xl(e,t,a)}return G2(e,t,r,n,a)}function yA(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Oh,ci),ci|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Oh,ci),ci|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Cr(Oh,ci),ci|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Cr(Oh,ci),ci|=n;return Ca(e,t,a,r),t.child}function bA(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function G2(e,t,r,n,a){var i=Wa(r)?ju:ya.current;return i=jf(t,i),qh(t,a),r=e5(e,t,r,n,i,a),n=t5(),e!==null&&!Va?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Xl(e,t,a)):(Dr&&n&&UN(t),t.flags|=1,Ca(e,t,r,a),t.child)}function j4(e,t,r,n,a){if(Wa(r)){var i=!0;v0(t)}else i=!1;if(qh(t,a),t.stateNode===null)ov(e,t),G6(t,r,n),H2(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=zi(d):(d=Wa(r)?ju:ya.current,d=jf(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&h4(t,o,n,d),Ic=!1;var p=t.memoizedState;o.state=p,N0(t,n,o,a),c=t.memoizedState,l!==n||p!==c||Ha.current||Ic?(typeof u=="function"&&(V2(t,r,u,n),c=t.memoizedState),(l=Ic||u4(t,r,l,n,p,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,H6(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:so(t.type,l),o.props=d,h=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=zi(c):(c=Wa(r)?ju:ya.current,c=jf(t,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&h4(t,o,n,c),Ic=!1,p=t.memoizedState,o.state=p,N0(t,n,o,a);var y=t.memoizedState;l!==h||p!==y||Ha.current||Ic?(typeof f=="function"&&(V2(t,r,f,n),y=t.memoizedState),(d=Ic||u4(t,r,d,n,p,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return K2(e,t,r,n,i,a)}function K2(e,t,r,n,a,i){bA(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&i4(t,r,!1),Xl(e,t,i);n=t.stateNode,fO.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Nf(t,e.child,null,i),t.child=Nf(t,null,l,i)):Ca(e,t,l,i),t.memoizedState=n.state,a&&i4(t,r,!0),t.child}function jA(e){var t=e.stateNode;t.pendingContext?a4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&a4(e,t.context,!1),JN(e,t.containerInfo)}function w4(e,t,r,n,a){return wf(),VN(a),t.flags|=256,Ca(e,t,r,n),t.child}var Y2={dehydrated:null,treeContext:null,retryLane:0};function J2(e){return{baseLanes:e,cachePool:null,transitions:null}}function wA(e,t,r){var n=t.pendingProps,a=Br.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Cr(Br,a&1),e===null)return U2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ky(o,n,0,null),e=fu(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=J2(r),t.memoizedState=Y2,e):n5(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return mO(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=rd(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=rd(l,i):(i=fu(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?J2(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Y2,n}return i=e.child,e=i.sibling,n=rd(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function n5(e,t){return t=ky({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pg(e,t,r,n){return n!==null&&VN(n),Nf(t,e.child,null,r),e=n5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mO(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Q1(Error(ft(422))),Pg(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=ky({mode:"visible",children:n.children},a,0,null),i=fu(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Nf(t,e.child,null,o),t.child.memoizedState=J2(o),t.memoizedState=Y2,i);if(!(t.mode&1))return Pg(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ft(419)),n=Q1(i,n,void 0),Pg(e,t,o,n)}if(l=(o&e.childLanes)!==0,Va||l){if(n=Tn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Zl(e,a),wo(n,e,a,-1))}return d5(),n=Q1(Error(ft(421))),Pg(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=kO.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,fi=Qc(a.nextSibling),xi=t,Dr=!0,co=null,e!==null&&(Ti[Ri++]=Dl,Ti[Ri++]=Ol,Ti[Ri++]=wu,Dl=e.id,Ol=e.overflow,wu=t),t=n5(t,n.children),t.flags|=4096,t)}function N4(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),q2(e.return,t,r)}function ej(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function NA(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ca(e,t,n.children,r),n=Br.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&N4(e,r,t);else if(e.tag===19)N4(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Cr(Br,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&S0(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ej(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&S0(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ej(t,!0,r,null,i);break;case"together":ej(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ov(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Su|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ft(153));if(t.child!==null){for(e=t.child,r=rd(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=rd(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function pO(e,t,r){switch(t.tag){case 3:jA(t),wf();break;case 5:J6(t);break;case 1:Wa(t.type)&&v0(t);break;case 4:JN(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Cr(j0,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Cr(Br,Br.current&1),t.flags|=128,null):r&t.child.childLanes?wA(e,t,r):(Cr(Br,Br.current&1),e=Xl(e,t,r),e!==null?e.sibling:null);Cr(Br,Br.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return NA(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Cr(Br,Br.current),n)break;return null;case 22:case 23:return t.lanes=0,yA(e,t,r)}return Xl(e,t,r)}var SA,Z2,_A,CA;SA=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Z2=function(){};_A=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,su(el.current);var i=null;switch(r){case"input":a=y2(e,a),n=y2(e,n),i=[];break;case"select":a=Ur({},a,{value:void 0}),n=Ur({},n,{value:void 0}),i=[];break;case"textarea":a=w2(e,a),n=w2(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=x0)}S2(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ap.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ap.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Pr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};CA=function(e,t,r,n){r!==n&&(t.flags|=4)};function Fm(e,t){if(!Dr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function na(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function xO(e,t,r){var n=t.pendingProps;switch(qN(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return na(t),null;case 1:return Wa(t.type)&&g0(),na(t),null;case 3:return n=t.stateNode,Sf(),Tr(Ha),Tr(ya),XN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(kg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,co!==null&&(aw(co),co=null))),Z2(e,t),na(t),null;case 5:ZN(t);var a=su(Bp.current);if(r=t.type,e!==null&&t.stateNode!=null)_A(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ft(166));return na(t),null}if(e=su(el.current),kg(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ho]=t,n[Mp]=i,e=(t.mode&1)!==0,r){case"dialog":Pr("cancel",n),Pr("close",n);break;case"iframe":case"object":case"embed":Pr("load",n);break;case"video":case"audio":for(a=0;a<Jm.length;a++)Pr(Jm[a],n);break;case"source":Pr("error",n);break;case"img":case"image":case"link":Pr("error",n),Pr("load",n);break;case"details":Pr("toggle",n);break;case"input":T_(n,i),Pr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Pr("invalid",n);break;case"textarea":I_(n,i),Pr("invalid",n)}S2(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Cg(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Cg(n.textContent,l,e),a=["children",""+l]):Ap.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pr("scroll",n)}switch(r){case"input":vg(n),R_(n,i,!0);break;case"textarea":vg(n),F_(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=x0)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qk(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ho]=t,e[Mp]=n,SA(e,t,!1,!1),t.stateNode=e;e:{switch(o=_2(r,n),r){case"dialog":Pr("cancel",e),Pr("close",e),a=n;break;case"iframe":case"object":case"embed":Pr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Jm.length;a++)Pr(Jm[a],e);a=n;break;case"source":Pr("error",e),a=n;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),a=n;break;case"details":Pr("toggle",e),a=n;break;case"input":T_(e,n),a=y2(e,n),Pr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ur({},n,{value:void 0}),Pr("invalid",e);break;case"textarea":I_(e,n),a=w2(e,n),Pr("invalid",e);break;default:a=n}S2(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?s6(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e6(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Pp(e,c):typeof c=="number"&&Pp(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ap.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Pr("scroll",e):c!=null&&AN(e,i,c,o))}switch(r){case"input":vg(e),R_(e,n,!1);break;case"textarea":vg(e),F_(e);break;case"option":n.value!=null&&e.setAttribute("value",""+fd(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?$h(e,!!n.multiple,i,!1):n.defaultValue!=null&&$h(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=x0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return na(t),null;case 6:if(e&&t.stateNode!=null)CA(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ft(166));if(r=su(Bp.current),su(el.current),kg(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ho]=t,(i=n.nodeValue!==r)&&(e=xi,e!==null))switch(e.tag){case 3:Cg(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Cg(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ho]=t,t.stateNode=n}return na(t),null;case 13:if(Tr(Br),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Dr&&fi!==null&&t.mode&1&&!(t.flags&128))q6(),wf(),t.flags|=98560,i=!1;else if(i=kg(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ft(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ft(317));i[Ho]=t}else wf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;na(t),i=!1}else co!==null&&(aw(co),co=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Br.current&1?wn===0&&(wn=3):d5())),t.updateQueue!==null&&(t.flags|=4),na(t),null);case 4:return Sf(),Z2(e,t),e===null&&Dp(t.stateNode.containerInfo),na(t),null;case 10:return GN(t.type._context),na(t),null;case 17:return Wa(t.type)&&g0(),na(t),null;case 19:if(Tr(Br),i=t.memoizedState,i===null)return na(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Fm(i,!1);else{if(wn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=S0(e),o!==null){for(t.flags|=128,Fm(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Cr(Br,Br.current&1|2),t.child}e=e.sibling}i.tail!==null&&en()>Cf&&(t.flags|=128,n=!0,Fm(i,!1),t.lanes=4194304)}else{if(!n)if(e=S0(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Fm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Dr)return na(t),null}else 2*en()-i.renderingStartTime>Cf&&r!==1073741824&&(t.flags|=128,n=!0,Fm(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=en(),t.sibling=null,r=Br.current,Cr(Br,n?r&1|2:r&1),t):(na(t),null);case 22:case 23:return c5(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ci&1073741824&&(na(t),t.subtreeFlags&6&&(t.flags|=8192)):na(t),null;case 24:return null;case 25:return null}throw Error(ft(156,t.tag))}function gO(e,t){switch(qN(t),t.tag){case 1:return Wa(t.type)&&g0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sf(),Tr(Ha),Tr(ya),XN(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ZN(t),null;case 13:if(Tr(Br),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ft(340));wf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tr(Br),null;case 4:return Sf(),null;case 10:return GN(t.type._context),null;case 22:case 23:return c5(),null;case 24:return null;default:return null}}var Eg=!1,ua=!1,vO=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Dh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Kr(e,t,n)}else r.current=null}function X2(e,t,r){try{r()}catch(n){Kr(e,t,n)}}var S4=!1;function yO(e,t){if(F2=f0,e=E6(),zN(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++d===a&&(l=o),p===i&&++u===n&&(c=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(D2={focusedElem:e,selectionRange:r},f0=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){t=Ot;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,j=y.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:so(t.type,x),j);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ft(163))}}catch(k){Kr(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}return y=S4,S4=!1,y}function lp(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&X2(t,r,i)}a=a.next}while(a!==n)}}function _y(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Q2(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function kA(e){var t=e.alternate;t!==null&&(e.alternate=null,kA(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ho],delete t[Mp],delete t[$2],delete t[tO],delete t[sO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function AA(e){return e.tag===5||e.tag===3||e.tag===4}function _4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||AA(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ew(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=x0));else if(n!==4&&(e=e.child,e!==null))for(ew(e,t,r),e=e.sibling;e!==null;)ew(e,t,r),e=e.sibling}function tw(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(tw(e,t,r),e=e.sibling;e!==null;)tw(e,t,r),e=e.sibling}var qn=null,oo=!1;function Cc(e,t,r){for(r=r.child;r!==null;)PA(e,t,r),r=r.sibling}function PA(e,t,r){if(Qo&&typeof Qo.onCommitFiberUnmount=="function")try{Qo.onCommitFiberUnmount(gy,r)}catch{}switch(r.tag){case 5:ua||Dh(r,t);case 6:var n=qn,a=oo;qn=null,Cc(e,t,r),qn=n,oo=a,qn!==null&&(oo?(e=qn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):qn.removeChild(r.stateNode));break;case 18:qn!==null&&(oo?(e=qn,r=r.stateNode,e.nodeType===8?G1(e.parentNode,r):e.nodeType===1&&G1(e,r),Rp(e)):G1(qn,r.stateNode));break;case 4:n=qn,a=oo,qn=r.stateNode.containerInfo,oo=!0,Cc(e,t,r),qn=n,oo=a;break;case 0:case 11:case 14:case 15:if(!ua&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&X2(r,t,o),a=a.next}while(a!==n)}Cc(e,t,r);break;case 1:if(!ua&&(Dh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Kr(r,t,l)}Cc(e,t,r);break;case 21:Cc(e,t,r);break;case 22:r.mode&1?(ua=(n=ua)||r.memoizedState!==null,Cc(e,t,r),ua=n):Cc(e,t,r);break;default:Cc(e,t,r)}}function C4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new vO),t.forEach(function(n){var a=AO.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Xi(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:qn=l.stateNode,oo=!1;break e;case 3:qn=l.stateNode.containerInfo,oo=!0;break e;case 4:qn=l.stateNode.containerInfo,oo=!0;break e}l=l.return}if(qn===null)throw Error(ft(160));PA(i,o,a),qn=null,oo=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Kr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)EA(t,e),t=t.sibling}function EA(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xi(t,e),Mo(e),n&4){try{lp(3,e,e.return),_y(3,e)}catch(x){Kr(e,e.return,x)}try{lp(5,e,e.return)}catch(x){Kr(e,e.return,x)}}break;case 1:Xi(t,e),Mo(e),n&512&&r!==null&&Dh(r,r.return);break;case 5:if(Xi(t,e),Mo(e),n&512&&r!==null&&Dh(r,r.return),e.flags&32){var a=e.stateNode;try{Pp(a,"")}catch(x){Kr(e,e.return,x)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Zk(a,i),_2(l,o);var d=_2(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?s6(a,h):u==="dangerouslySetInnerHTML"?e6(a,h):u==="children"?Pp(a,h):AN(a,u,h,d)}switch(l){case"input":b2(a,i);break;case"textarea":Xk(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?$h(a,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?$h(a,!!i.multiple,i.defaultValue,!0):$h(a,!!i.multiple,i.multiple?[]:"",!1))}a[Mp]=i}catch(x){Kr(e,e.return,x)}}break;case 6:if(Xi(t,e),Mo(e),n&4){if(e.stateNode===null)throw Error(ft(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Kr(e,e.return,x)}}break;case 3:if(Xi(t,e),Mo(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Rp(t.containerInfo)}catch(x){Kr(e,e.return,x)}break;case 4:Xi(t,e),Mo(e);break;case 13:Xi(t,e),Mo(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(o5=en())),n&4&&C4(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(ua=(d=ua)||u,Xi(t,e),ua=d):Xi(t,e),Mo(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ot=e,u=e.child;u!==null;){for(h=Ot=u;Ot!==null;){switch(p=Ot,f=p.child,p.tag){case 0:case 11:case 14:case 15:lp(4,p,p.return);break;case 1:Dh(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(x){Kr(n,r,x)}}break;case 5:Dh(p,p.return);break;case 22:if(p.memoizedState!==null){A4(h);continue}}f!==null?(f.return=p,Ot=f):A4(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=t6("display",o))}catch(x){Kr(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){Kr(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xi(t,e),Mo(e),n&4&&C4(e);break;case 21:break;default:Xi(t,e),Mo(e)}}function Mo(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(AA(r)){var n=r;break e}r=r.return}throw Error(ft(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Pp(a,""),n.flags&=-33);var i=_4(e);tw(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=_4(e);ew(e,l,o);break;default:throw Error(ft(161))}}catch(c){Kr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bO(e,t,r){Ot=e,LA(e)}function LA(e,t,r){for(var n=(e.mode&1)!==0;Ot!==null;){var a=Ot,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Eg;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ua;l=Eg;var d=ua;if(Eg=o,(ua=c)&&!d)for(Ot=a;Ot!==null;)o=Ot,c=o.child,o.tag===22&&o.memoizedState!==null?P4(a):c!==null?(c.return=o,Ot=c):P4(a);for(;i!==null;)Ot=i,LA(i),i=i.sibling;Ot=a,Eg=l,ua=d}k4(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ot=i):k4(e)}}function k4(e){for(;Ot!==null;){var t=Ot;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ua||_y(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ua)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:so(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&d4(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}d4(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Rp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ft(163))}ua||t.flags&512&&Q2(t)}catch(p){Kr(t,t.return,p)}}if(t===e){Ot=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ot=r;break}Ot=t.return}}function A4(e){for(;Ot!==null;){var t=Ot;if(t===e){Ot=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ot=r;break}Ot=t.return}}function P4(e){for(;Ot!==null;){var t=Ot;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{_y(4,t)}catch(c){Kr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Kr(t,a,c)}}var i=t.return;try{Q2(t)}catch(c){Kr(t,i,c)}break;case 5:var o=t.return;try{Q2(t)}catch(c){Kr(t,o,c)}}}catch(c){Kr(t,t.return,c)}if(t===e){Ot=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ot=l;break}Ot=t.return}}var jO=Math.ceil,k0=oc.ReactCurrentDispatcher,a5=oc.ReactCurrentOwner,Mi=oc.ReactCurrentBatchConfig,Xs=0,Tn=null,hn=null,Wn=0,ci=0,Oh=kd(0),wn=0,Vp=null,Su=0,Cy=0,i5=0,cp=null,qa=null,o5=0,Cf=1/0,Rl=null,A0=!1,sw=null,td=null,Lg=!1,Gc=null,P0=0,dp=0,rw=null,lv=-1,cv=0;function Pa(){return Xs&6?en():lv!==-1?lv:lv=en()}function sd(e){return e.mode&1?Xs&2&&Wn!==0?Wn&-Wn:nO.transition!==null?(cv===0&&(cv=m6()),cv):(e=ur,e!==0||(e=window.event,e=e===void 0?16:j6(e.type)),e):1}function wo(e,t,r,n){if(50<dp)throw dp=0,rw=null,Error(ft(185));ux(e,r,n),(!(Xs&2)||e!==Tn)&&(e===Tn&&(!(Xs&2)&&(Cy|=r),wn===4&&Oc(e,Wn)),Ga(e,n),r===1&&Xs===0&&!(t.mode&1)&&(Cf=en()+500,wy&&Ad()))}function Ga(e,t){var r=e.callbackNode;nD(e,t);var n=h0(e,e===Tn?Wn:0);if(n===0)r!==null&&M_(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&M_(r),t===1)e.tag===0?rO(E4.bind(null,e)):B6(E4.bind(null,e)),QD(function(){!(Xs&6)&&Ad()}),r=null;else{switch(p6(n)){case 1:r=RN;break;case 4:r=h6;break;case 16:r=u0;break;case 536870912:r=f6;break;default:r=u0}r=$A(r,TA.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function TA(e,t){if(lv=-1,cv=0,Xs&6)throw Error(ft(327));var r=e.callbackNode;if(Vh()&&e.callbackNode!==r)return null;var n=h0(e,e===Tn?Wn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=E0(e,n);else{t=n;var a=Xs;Xs|=2;var i=IA();(Tn!==e||Wn!==t)&&(Rl=null,Cf=en()+500,hu(e,t));do try{SO();break}catch(l){RA(e,l)}while(!0);WN(),k0.current=i,Xs=a,hn!==null?t=0:(Tn=null,Wn=0,t=wn)}if(t!==0){if(t===2&&(a=E2(e),a!==0&&(n=a,t=nw(e,a))),t===1)throw r=Vp,hu(e,0),Oc(e,n),Ga(e,en()),r;if(t===6)Oc(e,n);else{if(a=e.current.alternate,!(n&30)&&!wO(a)&&(t=E0(e,n),t===2&&(i=E2(e),i!==0&&(n=i,t=nw(e,i))),t===1))throw r=Vp,hu(e,0),Oc(e,n),Ga(e,en()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ft(345));case 2:Jd(e,qa,Rl);break;case 3:if(Oc(e,n),(n&130023424)===n&&(t=o5+500-en(),10<t)){if(h0(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Pa(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=M2(Jd.bind(null,e,qa,Rl),t);break}Jd(e,qa,Rl);break;case 4:if(Oc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-jo(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=en()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jO(n/1960))-n,10<n){e.timeoutHandle=M2(Jd.bind(null,e,qa,Rl),n);break}Jd(e,qa,Rl);break;case 5:Jd(e,qa,Rl);break;default:throw Error(ft(329))}}}return Ga(e,en()),e.callbackNode===r?TA.bind(null,e):null}function nw(e,t){var r=cp;return e.current.memoizedState.isDehydrated&&(hu(e,t).flags|=256),e=E0(e,t),e!==2&&(t=qa,qa=r,t!==null&&aw(t)),e}function aw(e){qa===null?qa=e:qa.push.apply(qa,e)}function wO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!No(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oc(e,t){for(t&=~i5,t&=~Cy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-jo(t),n=1<<r;e[r]=-1,t&=~n}}function E4(e){if(Xs&6)throw Error(ft(327));Vh();var t=h0(e,0);if(!(t&1))return Ga(e,en()),null;var r=E0(e,t);if(e.tag!==0&&r===2){var n=E2(e);n!==0&&(t=n,r=nw(e,n))}if(r===1)throw r=Vp,hu(e,0),Oc(e,t),Ga(e,en()),r;if(r===6)throw Error(ft(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jd(e,qa,Rl),Ga(e,en()),null}function l5(e,t){var r=Xs;Xs|=1;try{return e(t)}finally{Xs=r,Xs===0&&(Cf=en()+500,wy&&Ad())}}function _u(e){Gc!==null&&Gc.tag===0&&!(Xs&6)&&Vh();var t=Xs;Xs|=1;var r=Mi.transition,n=ur;try{if(Mi.transition=null,ur=1,e)return e()}finally{ur=n,Mi.transition=r,Xs=t,!(Xs&6)&&Ad()}}function c5(){ci=Oh.current,Tr(Oh)}function hu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,XD(r)),hn!==null)for(r=hn.return;r!==null;){var n=r;switch(qN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&g0();break;case 3:Sf(),Tr(Ha),Tr(ya),XN();break;case 5:ZN(n);break;case 4:Sf();break;case 13:Tr(Br);break;case 19:Tr(Br);break;case 10:GN(n.type._context);break;case 22:case 23:c5()}r=r.return}if(Tn=e,hn=e=rd(e.current,null),Wn=ci=t,wn=0,Vp=null,i5=Cy=Su=0,qa=cp=null,tu!==null){for(t=0;t<tu.length;t++)if(r=tu[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}tu=null}return e}function RA(e,t){do{var r=hn;try{if(WN(),av.current=C0,_0){for(var n=zr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}_0=!1}if(Nu=0,An=yn=zr=null,op=!1,zp=0,a5.current=null,r===null||r.return===null){wn=1,Vp=t,hn=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Wn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=g4(o);if(f!==null){f.flags&=-257,v4(f,o,l,i,t),f.mode&1&&x4(i,d,t),t=f,c=d;var y=t.updateQueue;if(y===null){var x=new Set;x.add(c),t.updateQueue=x}else y.add(c);break e}else{if(!(t&1)){x4(i,d,t),d5();break e}c=Error(ft(426))}}else if(Dr&&l.mode&1){var j=g4(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),v4(j,o,l,i,t),VN(_f(c,l));break e}}i=c=_f(c,l),wn!==4&&(wn=2),cp===null?cp=[i]:cp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=xA(i,c,t);c4(i,v);break e;case 1:l=c;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(td===null||!td.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=gA(i,l,t);c4(i,k);break e}}i=i.return}while(i!==null)}DA(r)}catch(P){t=P,hn===r&&r!==null&&(hn=r=r.return);continue}break}while(!0)}function IA(){var e=k0.current;return k0.current=C0,e===null?C0:e}function d5(){(wn===0||wn===3||wn===2)&&(wn=4),Tn===null||!(Su&268435455)&&!(Cy&268435455)||Oc(Tn,Wn)}function E0(e,t){var r=Xs;Xs|=2;var n=IA();(Tn!==e||Wn!==t)&&(Rl=null,hu(e,t));do try{NO();break}catch(a){RA(e,a)}while(!0);if(WN(),Xs=r,k0.current=n,hn!==null)throw Error(ft(261));return Tn=null,Wn=0,wn}function NO(){for(;hn!==null;)FA(hn)}function SO(){for(;hn!==null&&!YF();)FA(hn)}function FA(e){var t=MA(e.alternate,e,ci);e.memoizedProps=e.pendingProps,t===null?DA(e):hn=t,a5.current=null}function DA(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gO(r,t),r!==null){r.flags&=32767,hn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wn=6,hn=null;return}}else if(r=xO(r,t,ci),r!==null){hn=r;return}if(t=t.sibling,t!==null){hn=t;return}hn=t=e}while(t!==null);wn===0&&(wn=5)}function Jd(e,t,r){var n=ur,a=Mi.transition;try{Mi.transition=null,ur=1,_O(e,t,r,n)}finally{Mi.transition=a,ur=n}return null}function _O(e,t,r,n){do Vh();while(Gc!==null);if(Xs&6)throw Error(ft(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ft(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(aD(e,i),e===Tn&&(hn=Tn=null,Wn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Lg||(Lg=!0,$A(u0,function(){return Vh(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Mi.transition,Mi.transition=null;var o=ur;ur=1;var l=Xs;Xs|=4,a5.current=null,yO(e,r),EA(r,e),HD(D2),f0=!!F2,D2=F2=null,e.current=r,bO(r),JF(),Xs=l,ur=o,Mi.transition=i}else e.current=r;if(Lg&&(Lg=!1,Gc=e,P0=a),i=e.pendingLanes,i===0&&(td=null),QF(r.stateNode),Ga(e,en()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(A0)throw A0=!1,e=sw,sw=null,e;return P0&1&&e.tag!==0&&Vh(),i=e.pendingLanes,i&1?e===rw?dp++:(dp=0,rw=e):dp=0,Ad(),null}function Vh(){if(Gc!==null){var e=p6(P0),t=Mi.transition,r=ur;try{if(Mi.transition=null,ur=16>e?16:e,Gc===null)var n=!1;else{if(e=Gc,Gc=null,P0=0,Xs&6)throw Error(ft(331));var a=Xs;for(Xs|=4,Ot=e.current;Ot!==null;){var i=Ot,o=i.child;if(Ot.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ot=d;Ot!==null;){var u=Ot;switch(u.tag){case 0:case 11:case 15:lp(8,u,i)}var h=u.child;if(h!==null)h.return=u,Ot=h;else for(;Ot!==null;){u=Ot;var p=u.sibling,f=u.return;if(kA(u),u===d){Ot=null;break}if(p!==null){p.return=f,Ot=p;break}Ot=f}}}var y=i.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var j=x.sibling;x.sibling=null,x=j}while(x!==null)}}Ot=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ot=o;else e:for(;Ot!==null;){if(i=Ot,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lp(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ot=v;break e}Ot=i.return}}var w=e.current;for(Ot=w;Ot!==null;){o=Ot;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Ot=N;else e:for(o=w;Ot!==null;){if(l=Ot,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_y(9,l)}}catch(P){Kr(l,l.return,P)}if(l===o){Ot=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Ot=k;break e}Ot=l.return}}if(Xs=a,Ad(),Qo&&typeof Qo.onPostCommitFiberRoot=="function")try{Qo.onPostCommitFiberRoot(gy,e)}catch{}n=!0}return n}finally{ur=r,Mi.transition=t}}return!1}function L4(e,t,r){t=_f(r,t),t=xA(e,t,1),e=ed(e,t,1),t=Pa(),e!==null&&(ux(e,1,t),Ga(e,t))}function Kr(e,t,r){if(e.tag===3)L4(e,e,r);else for(;t!==null;){if(t.tag===3){L4(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(td===null||!td.has(n))){e=_f(r,e),e=gA(t,e,1),t=ed(t,e,1),e=Pa(),t!==null&&(ux(t,1,e),Ga(t,e));break}}t=t.return}}function CO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Pa(),e.pingedLanes|=e.suspendedLanes&r,Tn===e&&(Wn&r)===r&&(wn===4||wn===3&&(Wn&130023424)===Wn&&500>en()-o5?hu(e,0):i5|=r),Ga(e,t)}function OA(e,t){t===0&&(e.mode&1?(t=jg,jg<<=1,!(jg&130023424)&&(jg=4194304)):t=1);var r=Pa();e=Zl(e,t),e!==null&&(ux(e,t,r),Ga(e,r))}function kO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),OA(e,r)}function AO(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ft(314))}n!==null&&n.delete(t),OA(e,r)}var MA;MA=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ha.current)Va=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Va=!1,pO(e,t,r);Va=!!(e.flags&131072)}else Va=!1,Dr&&t.flags&1048576&&z6(t,b0,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ov(e,t),e=t.pendingProps;var a=jf(t,ya.current);qh(t,r),a=e5(null,t,n,e,a,r);var i=t5();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wa(n)?(i=!0,v0(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,YN(t),a.updater=Ny,t.stateNode=a,a._reactInternals=t,H2(t,n,e,r),t=K2(null,t,n,!0,i,r)):(t.tag=0,Dr&&i&&UN(t),Ca(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ov(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=EO(n),e=so(n,e),a){case 0:t=G2(null,t,n,e,r);break e;case 1:t=j4(null,t,n,e,r);break e;case 11:t=y4(null,t,n,e,r);break e;case 14:t=b4(null,t,n,so(n.type,e),r);break e}throw Error(ft(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:so(n,a),G2(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:so(n,a),j4(e,t,n,a,r);case 3:e:{if(jA(t),e===null)throw Error(ft(387));n=t.pendingProps,i=t.memoizedState,a=i.element,H6(e,t),N0(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=_f(Error(ft(423)),t),t=w4(e,t,n,r,a);break e}else if(n!==a){a=_f(Error(ft(424)),t),t=w4(e,t,n,r,a);break e}else for(fi=Qc(t.stateNode.containerInfo.firstChild),xi=t,Dr=!0,co=null,r=Y6(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(wf(),n===a){t=Xl(e,t,r);break e}Ca(e,t,n,r)}t=t.child}return t;case 5:return J6(t),e===null&&U2(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,O2(n,a)?o=null:i!==null&&O2(n,i)&&(t.flags|=32),bA(e,t),Ca(e,t,o,r),t.child;case 6:return e===null&&U2(t),null;case 13:return wA(e,t,r);case 4:return JN(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Nf(t,null,n,r):Ca(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:so(n,a),y4(e,t,n,a,r);case 7:return Ca(e,t,t.pendingProps,r),t.child;case 8:return Ca(e,t,t.pendingProps.children,r),t.child;case 12:return Ca(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Cr(j0,n._currentValue),n._currentValue=o,i!==null)if(No(i.value,o)){if(i.children===a.children&&!Ha.current){t=Xl(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Bl(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),q2(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ft(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),q2(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ca(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,qh(t,r),a=zi(a),n=n(a),t.flags|=1,Ca(e,t,n,r),t.child;case 14:return n=t.type,a=so(n,t.pendingProps),a=so(n.type,a),b4(e,t,n,a,r);case 15:return vA(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:so(n,a),ov(e,t),t.tag=1,Wa(n)?(e=!0,v0(t)):e=!1,qh(t,r),G6(t,n,a),H2(t,n,a,r),K2(null,t,n,!0,e,r);case 19:return NA(e,t,r);case 22:return yA(e,t,r)}throw Error(ft(156,t.tag))};function $A(e,t){return u6(e,t)}function PO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(e,t,r,n){return new PO(e,t,r,n)}function u5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function EO(e){if(typeof e=="function")return u5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===EN)return 11;if(e===LN)return 14}return 2}function rd(e,t){var r=e.alternate;return r===null?(r=Oi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function dv(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")u5(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case kh:return fu(r.children,a,i,t);case PN:o=8,a|=8;break;case p2:return e=Oi(12,r,t,a|2),e.elementType=p2,e.lanes=i,e;case x2:return e=Oi(13,r,t,a),e.elementType=x2,e.lanes=i,e;case g2:return e=Oi(19,r,t,a),e.elementType=g2,e.lanes=i,e;case Kk:return ky(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wk:o=10;break e;case Gk:o=9;break e;case EN:o=11;break e;case LN:o=14;break e;case Rc:o=16,n=null;break e}throw Error(ft(130,e==null?e:typeof e,""))}return t=Oi(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function fu(e,t,r,n){return e=Oi(7,e,n,t),e.lanes=r,e}function ky(e,t,r,n){return e=Oi(22,e,n,t),e.elementType=Kk,e.lanes=r,e.stateNode={isHidden:!1},e}function tj(e,t,r){return e=Oi(6,e,null,t),e.lanes=r,e}function sj(e,t,r){return t=Oi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function LO(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=D1(0),this.expirationTimes=D1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D1(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function h5(e,t,r,n,a,i,o,l,c){return e=new LO(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Oi(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},YN(i),e}function TO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ch,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function BA(e){if(!e)return md;e=e._reactInternals;e:{if(Fu(e)!==e||e.tag!==1)throw Error(ft(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ft(171))}if(e.tag===1){var r=e.type;if(Wa(r))return $6(e,r,t)}return t}function zA(e,t,r,n,a,i,o,l,c){return e=h5(r,n,!0,e,a,i,o,l,c),e.context=BA(null),r=e.current,n=Pa(),a=sd(r),i=Bl(n,a),i.callback=t??null,ed(r,i,a),e.current.lanes=a,ux(e,a,n),Ga(e,n),e}function Ay(e,t,r,n){var a=t.current,i=Pa(),o=sd(a);return r=BA(r),t.context===null?t.context=r:t.pendingContext=r,t=Bl(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ed(a,t,o),e!==null&&(wo(e,a,o,i),nv(e,a,o)),o}function L0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function T4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function f5(e,t){T4(e,t),(e=e.alternate)&&T4(e,t)}function RO(){return null}var UA=typeof reportError=="function"?reportError:function(e){console.error(e)};function m5(e){this._internalRoot=e}Py.prototype.render=m5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ft(409));Ay(e,t,null,null)};Py.prototype.unmount=m5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_u(function(){Ay(null,e,null,null)}),t[Jl]=null}};function Py(e){this._internalRoot=e}Py.prototype.unstable_scheduleHydration=function(e){if(e){var t=v6();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dc.length&&t!==0&&t<Dc[r].priority;r++);Dc.splice(r,0,e),r===0&&b6(e)}};function p5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ey(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function R4(){}function IO(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=L0(o);i.call(d)}}var o=zA(t,n,e,0,null,!1,!1,"",R4);return e._reactRootContainer=o,e[Jl]=o.current,Dp(e.nodeType===8?e.parentNode:e),_u(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=L0(c);l.call(d)}}var c=h5(e,0,!1,null,null,!1,!1,"",R4);return e._reactRootContainer=c,e[Jl]=c.current,Dp(e.nodeType===8?e.parentNode:e),_u(function(){Ay(t,c,r,n)}),c}function Ly(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=L0(o);l.call(c)}}Ay(t,o,e,a)}else o=IO(r,t,e,a,n);return L0(o)}x6=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ym(t.pendingLanes);r!==0&&(IN(t,r|1),Ga(t,en()),!(Xs&6)&&(Cf=en()+500,Ad()))}break;case 13:_u(function(){var n=Zl(e,1);if(n!==null){var a=Pa();wo(n,e,1,a)}}),f5(e,1)}};FN=function(e){if(e.tag===13){var t=Zl(e,134217728);if(t!==null){var r=Pa();wo(t,e,134217728,r)}f5(e,134217728)}};g6=function(e){if(e.tag===13){var t=sd(e),r=Zl(e,t);if(r!==null){var n=Pa();wo(r,e,t,n)}f5(e,t)}};v6=function(){return ur};y6=function(e,t){var r=ur;try{return ur=e,t()}finally{ur=r}};k2=function(e,t,r){switch(t){case"input":if(b2(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=jy(n);if(!a)throw Error(ft(90));Jk(n),b2(n,a)}}}break;case"textarea":Xk(e,r);break;case"select":t=r.value,t!=null&&$h(e,!!r.multiple,t,!1)}};a6=l5;i6=_u;var FO={usingClientEntryPoint:!1,Events:[fx,Lh,jy,r6,n6,l5]},Dm={findFiberByHostInstance:eu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},DO={bundleType:Dm.bundleType,version:Dm.version,rendererPackageName:Dm.rendererPackageName,rendererConfig:Dm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=c6(e),e===null?null:e.stateNode},findFiberByHostInstance:Dm.findFiberByHostInstance||RO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tg.isDisabled&&Tg.supportsFiber)try{gy=Tg.inject(DO),Qo=Tg}catch{}}bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FO;bi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p5(t))throw Error(ft(200));return TO(e,t,null,r)};bi.createRoot=function(e,t){if(!p5(e))throw Error(ft(299));var r=!1,n="",a=UA;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=h5(e,1,!1,null,null,r,!1,n,a),e[Jl]=t.current,Dp(e.nodeType===8?e.parentNode:e),new m5(t)};bi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ft(188)):(e=Object.keys(e).join(","),Error(ft(268,e)));return e=c6(t),e=e===null?null:e.stateNode,e};bi.flushSync=function(e){return _u(e)};bi.hydrate=function(e,t,r){if(!Ey(t))throw Error(ft(200));return Ly(null,e,t,!0,r)};bi.hydrateRoot=function(e,t,r){if(!p5(e))throw Error(ft(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=UA;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=zA(t,null,e,1,r??null,a,!1,i,o),e[Jl]=t.current,Dp(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Py(t)};bi.render=function(e,t,r){if(!Ey(t))throw Error(ft(200));return Ly(null,e,t,!1,r)};bi.unmountComponentAtNode=function(e){if(!Ey(e))throw Error(ft(40));return e._reactRootContainer?(_u(function(){Ly(null,null,e,!1,function(){e._reactRootContainer=null,e[Jl]=null})}),!0):!1};bi.unstable_batchedUpdates=l5;bi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ey(r))throw Error(ft(200));if(e==null||e._reactInternals===void 0)throw Error(ft(38));return Ly(e,t,r,!1,n)};bi.version="18.2.0-next-9e3b772b8-20220608";function qA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qA)}catch(e){console.error(e)}}qA(),zk.exports=bi;var Pd=zk.exports;const OO=Ek(Pd);var VA,I4=Pd;VA=I4.createRoot,I4.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hp.apply(this,arguments)}var Kc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Kc||(Kc={}));const F4="popstate";function MO(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return iw("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:T0(a)}return BO(t,r,null,e)}function nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function HA(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $O(){return Math.random().toString(36).substr(2,8)}function D4(e,t){return{usr:e.state,key:e.key,idx:t}}function iw(e,t,r,n){return r===void 0&&(r=null),Hp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Uf(t):t,{state:r,key:t&&t.key||n||$O()})}function T0(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Uf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function BO(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Kc.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Hp({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Kc.Pop;let j=u(),v=j==null?null:j-d;d=j,c&&c({action:l,location:x.location,delta:v})}function p(j,v){l=Kc.Push;let w=iw(x.location,j,v);d=u()+1;let N=D4(w,d),k=x.createHref(w);try{o.pushState(N,"",k)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(k)}i&&c&&c({action:l,location:x.location,delta:1})}function f(j,v){l=Kc.Replace;let w=iw(x.location,j,v);d=u();let N=D4(w,d),k=x.createHref(w);o.replaceState(N,"",k),i&&c&&c({action:l,location:x.location,delta:0})}function y(j){let v=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof j=="string"?j:T0(j);return w=w.replace(/ $/,"%20"),nn(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let x={get action(){return l},get location(){return e(a,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(F4,h),c=j,()=>{a.removeEventListener(F4,h),c=null}},createHref(j){return t(a,j)},createURL:y,encodeLocation(j){let v=y(j);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:f,go(j){return o.go(j)}};return x}var O4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(O4||(O4={}));function zO(e,t,r){return r===void 0&&(r="/"),UO(e,t,r)}function UO(e,t,r,n){let a=typeof t=="string"?Uf(t):t,i=x5(a.pathname||"/",r);if(i==null)return null;let o=WA(e);qO(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=tM(i);l=XO(o[c],d)}return l}function WA(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(nn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=nd([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(nn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),WA(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:JO(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of GA(i.path))a(i,o,c)}),t}function GA(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=GA(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function qO(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ZO(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const VO=/^:[\w-]+$/,HO=3,WO=2,GO=1,KO=10,YO=-2,M4=e=>e==="*";function JO(e,t){let r=e.split("/"),n=r.length;return r.some(M4)&&(n+=YO),t&&(n+=WO),r.filter(a=>!M4(a)).reduce((a,i)=>a+(VO.test(i)?HO:i===""?GO:KO),n)}function ZO(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function XO(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=QO({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:nd([i,h.pathname]),pathnameBase:aM(nd([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=nd([i,h.pathnameBase]))}return o}function QO(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=eM(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:p,isOptional:f}=u;if(p==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const y=l[h];return f&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function eM(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),HA(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function tM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return HA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function x5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function sM(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Uf(e):e;return{pathname:r?r.startsWith("/")?r:rM(r,t):t,search:iM(n),hash:oM(a)}}function rM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function rj(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function g5(e,t){let r=nM(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function v5(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Uf(e):(a=Hp({},e),nn(!a.pathname||!a.pathname.includes("?"),rj("?","pathname","search",a)),nn(!a.pathname||!a.pathname.includes("#"),rj("#","pathname","hash",a)),nn(!a.search||!a.search.includes("#"),rj("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;a.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=sM(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const nd=e=>e.join("/").replace(/\/\/+/g,"/"),aM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,oM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const KA=["post","put","patch","delete"];new Set(KA);const cM=["get",...KA];new Set(cM);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wp(){return Wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wp.apply(this,arguments)}const y5=g.createContext(null),dM=g.createContext(null),Ed=g.createContext(null),Ty=g.createContext(null),xl=g.createContext({outlet:null,matches:[],isDataRoute:!1}),YA=g.createContext(null);function uM(e,t){let{relative:r}=t===void 0?{}:t;qf()||nn(!1);let{basename:n,navigator:a}=g.useContext(Ed),{hash:i,pathname:o,search:l}=ZA(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:nd([n,o])),a.createHref({pathname:c,search:l,hash:i})}function qf(){return g.useContext(Ty)!=null}function Vi(){return qf()||nn(!1),g.useContext(Ty).location}function JA(e){g.useContext(Ed).static||g.useLayoutEffect(e)}function Ia(){let{isDataRoute:e}=g.useContext(xl);return e?kM():hM()}function hM(){qf()||nn(!1);let e=g.useContext(y5),{basename:t,future:r,navigator:n}=g.useContext(Ed),{matches:a}=g.useContext(xl),{pathname:i}=Vi(),o=JSON.stringify(g5(a,r.v7_relativeSplatPath)),l=g.useRef(!1);return JA(()=>{l.current=!0}),g.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=v5(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:nd([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,o,i,e])}const fM=g.createContext(null);function mM(e){let t=g.useContext(xl).outlet;return t&&g.createElement(fM.Provider,{value:e},t)}function pM(){let{matches:e}=g.useContext(xl),t=e[e.length-1];return t?t.params:{}}function ZA(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=g.useContext(Ed),{matches:a}=g.useContext(xl),{pathname:i}=Vi(),o=JSON.stringify(g5(a,n.v7_relativeSplatPath));return g.useMemo(()=>v5(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function xM(e,t){return gM(e,t)}function gM(e,t,r,n){qf()||nn(!1);let{navigator:a}=g.useContext(Ed),{matches:i}=g.useContext(xl),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Vi(),u;if(t){var h;let j=typeof t=="string"?Uf(t):t;c==="/"||(h=j.pathname)!=null&&h.startsWith(c)||nn(!1),u=j}else u=d;let p=u.pathname||"/",f=p;if(c!=="/"){let j=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(j.length).join("/")}let y=zO(e,{pathname:f}),x=wM(y&&y.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:nd([c,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:nd([c,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,r,n);return t&&x?g.createElement(Ty.Provider,{value:{location:Wp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Kc.Pop}},x):x}function vM(){let e=CM(),t=lM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:a},r):null,null)}const yM=g.createElement(vM,null);class bM extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(xl.Provider,{value:this.props.routeContext},g.createElement(YA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jM(e){let{routeContext:t,match:r,children:n}=e,a=g.useContext(y5);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(xl.Provider,{value:t},n)}function wM(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||nn(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:p,errors:f}=r,y=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||y){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,p)=>{let f,y=!1,x=null,j=null;r&&(f=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||yM,c&&(d<0&&p===0?(AM("route-fallback"),y=!0,j=null):d===p&&(y=!0,j=h.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,p+1)),w=()=>{let N;return f?N=x:y?N=j:h.route.Component?N=g.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=u,g.createElement(jM,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:N})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?g.createElement(bM,{location:r.location,revalidation:r.revalidation,component:x,error:f,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var XA=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(XA||{}),QA=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(QA||{});function NM(e){let t=g.useContext(y5);return t||nn(!1),t}function SM(e){let t=g.useContext(dM);return t||nn(!1),t}function _M(e){let t=g.useContext(xl);return t||nn(!1),t}function eP(e){let t=_M(),r=t.matches[t.matches.length-1];return r.route.id||nn(!1),r.route.id}function CM(){var e;let t=g.useContext(YA),r=SM(),n=eP();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function kM(){let{router:e}=NM(XA.UseNavigateStable),t=eP(QA.UseNavigateStable),r=g.useRef(!1);return JA(()=>{r.current=!0}),g.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Wp({fromRouteId:t},i)))},[e,t])}const $4={};function AM(e,t,r){$4[e]||($4[e]=!0)}function PM(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function B4(e){let{to:t,replace:r,state:n,relative:a}=e;qf()||nn(!1);let{future:i,static:o}=g.useContext(Ed),{matches:l}=g.useContext(xl),{pathname:c}=Vi(),d=Ia(),u=v5(t,g5(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(u);return g.useEffect(()=>d(JSON.parse(h),{replace:r,state:n,relative:a}),[d,h,a,r,n]),null}function tP(e){return mM(e.context)}function Is(e){nn(!1)}function EM(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Kc.Pop,navigator:i,static:o=!1,future:l}=e;qf()&&nn(!1);let c=t.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:o,future:Wp({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Uf(n));let{pathname:u="/",search:h="",hash:p="",state:f=null,key:y="default"}=n,x=g.useMemo(()=>{let j=x5(u,c);return j==null?null:{location:{pathname:j,search:h,hash:p,state:f,key:y},navigationType:a}},[c,u,h,p,f,y,a]);return x==null?null:g.createElement(Ed.Provider,{value:d},g.createElement(Ty.Provider,{children:r,value:x}))}function LM(e){let{children:t,location:r}=e;return xM(ow(t),r)}new Promise(()=>{});function ow(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(n,a)=>{if(!g.isValidElement(n))return;let i=[...t,a];if(n.type===g.Fragment){r.push.apply(r,ow(n.props.children,i));return}n.type!==Is&&nn(!1),!n.props.index||!n.props.children||nn(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ow(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lw.apply(this,arguments)}function TM(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function RM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IM(e,t){return e.button===0&&(!t||t==="_self")&&!RM(e)}const FM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DM="6";try{window.__reactRouterVersion=DM}catch{}const OM="startTransition",z4=_N[OM];function MM(e){let{basename:t,children:r,future:n,window:a}=e,i=g.useRef();i.current==null&&(i.current=MO({window:a,v5Compat:!0}));let o=i.current,[l,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=g.useCallback(h=>{d&&z4?z4(()=>c(h)):c(h)},[c,d]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>PM(n),[n]),g.createElement(EM,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const $M=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dr=g.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,p=TM(t,FM),{basename:f}=g.useContext(Ed),y,x=!1;if(typeof d=="string"&&BM.test(d)&&(y=d,$M))try{let N=new URL(window.location.href),k=d.startsWith("//")?new URL(N.protocol+d):new URL(d),P=x5(k.pathname,f);k.origin===N.origin&&P!=null?d=P+k.search+k.hash:x=!0}catch{}let j=uM(d,{relative:a}),v=zM(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});function w(N){n&&n(N),N.defaultPrevented||v(N)}return g.createElement("a",lw({},p,{href:y||j,onClick:x||i?n:w,ref:r,target:c}))});var U4;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(U4||(U4={}));var q4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(q4||(q4={}));function zM(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ia(),d=Vi(),u=ZA(e,{relative:o});return g.useCallback(h=>{if(IM(h,r)){h.preventDefault();let p=n!==void 0?n:T0(d)===T0(u);c(e,{replace:p,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,r,e,i,o,l])}var sP={exports:{}},rP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kf=g;function UM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qM=typeof Object.is=="function"?Object.is:UM,VM=kf.useState,HM=kf.useEffect,WM=kf.useLayoutEffect,GM=kf.useDebugValue;function KM(e,t){var r=t(),n=VM({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return WM(function(){a.value=r,a.getSnapshot=t,nj(a)&&i({inst:a})},[e,r,t]),HM(function(){return nj(a)&&i({inst:a}),e(function(){nj(a)&&i({inst:a})})},[e]),GM(r),r}function nj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qM(e,r)}catch{return!0}}function YM(e,t){return t()}var JM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?YM:KM;rP.useSyncExternalStore=kf.useSyncExternalStore!==void 0?kf.useSyncExternalStore:JM;sP.exports=rP;var ZM=sP.exports,nP={exports:{}},aP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry=g,XM=ZM;function QM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var e9=typeof Object.is=="function"?Object.is:QM,t9=XM.useSyncExternalStore,s9=Ry.useRef,r9=Ry.useEffect,n9=Ry.useMemo,a9=Ry.useDebugValue;aP.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=s9(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=n9(function(){function c(f){if(!d){if(d=!0,u=f,f=n(f),a!==void 0&&o.hasValue){var y=o.value;if(a(y,f))return h=y}return h=f}if(y=h,e9(u,f))return y;var x=n(f);return a!==void 0&&a(y,x)?(u=f,y):(u=f,h=x)}var d=!1,u,h,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,a]);var l=t9(e,i[0],i[1]);return r9(function(){o.hasValue=!0,o.value=l},[l]),a9(l),l};nP.exports=aP;var i9=nP.exports;function o9(e){e()}let iP=o9;const l9=e=>iP=e,c9=()=>iP,V4=Symbol.for("react-redux-context"),H4=typeof globalThis<"u"?globalThis:{};function d9(){var e;if(!g.createContext)return{};const t=(e=H4[V4])!=null?e:H4[V4]=new Map;let r=t.get(g.createContext);return r||(r=g.createContext(null),t.set(g.createContext,r)),r}const pd=d9();function b5(e=pd){return function(){return g.useContext(e)}}const oP=b5(),u9=()=>{throw new Error("uSES not initialized!")};let lP=u9;const h9=e=>{lP=e},f9=(e,t)=>e===t;function m9(e=pd){const t=e===pd?oP:b5(e);return function(n,a={}){const{equalityFn:i=f9,stabilityCheck:o=void 0,noopCheck:l=void 0}=typeof a=="function"?{equalityFn:a}:a,{store:c,subscription:d,getServerState:u,stabilityCheck:h,noopCheck:p}=t();g.useRef(!0);const f=g.useCallback({[n.name](x){return n(x)}}[n.name],[n,h,o]),y=lP(d.addNestedSub,c.getState,u||c.getState,f,i);return g.useDebugValue(y),y}}const xa=m9();var cP={exports:{}},fr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var On=typeof Symbol=="function"&&Symbol.for,j5=On?Symbol.for("react.element"):60103,w5=On?Symbol.for("react.portal"):60106,Iy=On?Symbol.for("react.fragment"):60107,Fy=On?Symbol.for("react.strict_mode"):60108,Dy=On?Symbol.for("react.profiler"):60114,Oy=On?Symbol.for("react.provider"):60109,My=On?Symbol.for("react.context"):60110,N5=On?Symbol.for("react.async_mode"):60111,$y=On?Symbol.for("react.concurrent_mode"):60111,By=On?Symbol.for("react.forward_ref"):60112,zy=On?Symbol.for("react.suspense"):60113,p9=On?Symbol.for("react.suspense_list"):60120,Uy=On?Symbol.for("react.memo"):60115,qy=On?Symbol.for("react.lazy"):60116,x9=On?Symbol.for("react.block"):60121,g9=On?Symbol.for("react.fundamental"):60117,v9=On?Symbol.for("react.responder"):60118,y9=On?Symbol.for("react.scope"):60119;function wi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case j5:switch(e=e.type,e){case N5:case $y:case Iy:case Dy:case Fy:case zy:return e;default:switch(e=e&&e.$$typeof,e){case My:case By:case qy:case Uy:case Oy:return e;default:return t}}case w5:return t}}}function dP(e){return wi(e)===$y}fr.AsyncMode=N5;fr.ConcurrentMode=$y;fr.ContextConsumer=My;fr.ContextProvider=Oy;fr.Element=j5;fr.ForwardRef=By;fr.Fragment=Iy;fr.Lazy=qy;fr.Memo=Uy;fr.Portal=w5;fr.Profiler=Dy;fr.StrictMode=Fy;fr.Suspense=zy;fr.isAsyncMode=function(e){return dP(e)||wi(e)===N5};fr.isConcurrentMode=dP;fr.isContextConsumer=function(e){return wi(e)===My};fr.isContextProvider=function(e){return wi(e)===Oy};fr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===j5};fr.isForwardRef=function(e){return wi(e)===By};fr.isFragment=function(e){return wi(e)===Iy};fr.isLazy=function(e){return wi(e)===qy};fr.isMemo=function(e){return wi(e)===Uy};fr.isPortal=function(e){return wi(e)===w5};fr.isProfiler=function(e){return wi(e)===Dy};fr.isStrictMode=function(e){return wi(e)===Fy};fr.isSuspense=function(e){return wi(e)===zy};fr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Iy||e===$y||e===Dy||e===Fy||e===zy||e===p9||typeof e=="object"&&e!==null&&(e.$$typeof===qy||e.$$typeof===Uy||e.$$typeof===Oy||e.$$typeof===My||e.$$typeof===By||e.$$typeof===g9||e.$$typeof===v9||e.$$typeof===y9||e.$$typeof===x9)};fr.typeOf=wi;cP.exports=fr;var b9=cP.exports,uP=b9,j9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},w9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},hP={};hP[uP.ForwardRef]=j9;hP[uP.Memo]=w9;var gr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S5=Symbol.for("react.element"),_5=Symbol.for("react.portal"),Vy=Symbol.for("react.fragment"),Hy=Symbol.for("react.strict_mode"),Wy=Symbol.for("react.profiler"),Gy=Symbol.for("react.provider"),Ky=Symbol.for("react.context"),N9=Symbol.for("react.server_context"),Yy=Symbol.for("react.forward_ref"),Jy=Symbol.for("react.suspense"),Zy=Symbol.for("react.suspense_list"),Xy=Symbol.for("react.memo"),Qy=Symbol.for("react.lazy"),S9=Symbol.for("react.offscreen"),fP;fP=Symbol.for("react.module.reference");function Hi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case S5:switch(e=e.type,e){case Vy:case Wy:case Hy:case Jy:case Zy:return e;default:switch(e=e&&e.$$typeof,e){case N9:case Ky:case Yy:case Qy:case Xy:case Gy:return e;default:return t}}case _5:return t}}}gr.ContextConsumer=Ky;gr.ContextProvider=Gy;gr.Element=S5;gr.ForwardRef=Yy;gr.Fragment=Vy;gr.Lazy=Qy;gr.Memo=Xy;gr.Portal=_5;gr.Profiler=Wy;gr.StrictMode=Hy;gr.Suspense=Jy;gr.SuspenseList=Zy;gr.isAsyncMode=function(){return!1};gr.isConcurrentMode=function(){return!1};gr.isContextConsumer=function(e){return Hi(e)===Ky};gr.isContextProvider=function(e){return Hi(e)===Gy};gr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===S5};gr.isForwardRef=function(e){return Hi(e)===Yy};gr.isFragment=function(e){return Hi(e)===Vy};gr.isLazy=function(e){return Hi(e)===Qy};gr.isMemo=function(e){return Hi(e)===Xy};gr.isPortal=function(e){return Hi(e)===_5};gr.isProfiler=function(e){return Hi(e)===Wy};gr.isStrictMode=function(e){return Hi(e)===Hy};gr.isSuspense=function(e){return Hi(e)===Jy};gr.isSuspenseList=function(e){return Hi(e)===Zy};gr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Vy||e===Wy||e===Hy||e===Jy||e===Zy||e===S9||typeof e=="object"&&e!==null&&(e.$$typeof===Qy||e.$$typeof===Xy||e.$$typeof===Gy||e.$$typeof===Ky||e.$$typeof===Yy||e.$$typeof===fP||e.getModuleId!==void 0)};gr.typeOf=Hi;function _9(){const e=c9();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,i=r={callback:n,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const W4={notify(){},get:()=>[]};function C9(e,t){let r,n=W4,a=0,i=!1;function o(x){u();const j=n.subscribe(x);let v=!1;return()=>{v||(v=!0,j(),h())}}function l(){n.notify()}function c(){y.onStateChange&&y.onStateChange()}function d(){return i}function u(){a++,r||(r=e.subscribe(c),n=_9())}function h(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=W4)}function p(){i||(i=!0,u())}function f(){i&&(i=!1,h())}const y={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:f,getListeners:()=>n};return y}const k9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A9=k9?g.useLayoutEffect:g.useEffect;function P9({store:e,context:t,children:r,serverState:n,stabilityCheck:a="once",noopCheck:i="once"}){const o=g.useMemo(()=>{const d=C9(e);return{store:e,subscription:d,getServerState:n?()=>n:void 0,stabilityCheck:a,noopCheck:i}},[e,n,a,i]),l=g.useMemo(()=>e.getState(),[e]);A9(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==e.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,l]);const c=t||pd;return g.createElement(c.Provider,{value:o},r)}function mP(e=pd){const t=e===pd?oP:b5(e);return function(){const{store:n}=t();return n}}const E9=mP();function L9(e=pd){const t=e===pd?E9:mP(e);return function(){return t().dispatch}}const lc=L9();h9(i9.useSyncExternalStoreWithSelector);l9(Pd.unstable_batchedUpdates);function uo(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function xd(e){return!!e&&!!e[Fr]}function Ql(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===B9}(e)||Array.isArray(e)||!!e[Q4]||!!(!((t=e.constructor)===null||t===void 0)&&t[Q4])||C5(e)||k5(e))}function Cu(e,t,r){r===void 0&&(r=!1),Vf(e)===0?(r?Object.keys:Wh)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function Vf(e){var t=e[Fr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:C5(e)?2:k5(e)?3:0}function Hh(e,t){return Vf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function T9(e,t){return Vf(e)===2?e.get(t):e[t]}function pP(e,t,r){var n=Vf(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function xP(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function C5(e){return M9&&e instanceof Map}function k5(e){return $9&&e instanceof Set}function Zd(e){return e.o||e.t}function A5(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=vP(e);delete t[Fr];for(var r=Wh(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function P5(e,t){return t===void 0&&(t=!1),E5(e)||xd(e)||!Ql(e)||(Vf(e)>1&&(e.set=e.add=e.clear=e.delete=R9),Object.freeze(e),t&&Cu(e,function(r,n){return P5(n,!0)},!0)),e}function R9(){uo(2)}function E5(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function tl(e){var t=hw[e];return t||uo(18,e),t}function I9(e,t){hw[e]||(hw[e]=t)}function cw(){return Gp}function aj(e,t){t&&(tl("Patches"),e.u=[],e.s=[],e.v=t)}function R0(e){dw(e),e.p.forEach(F9),e.p=null}function dw(e){e===Gp&&(Gp=e.l)}function G4(e){return Gp={p:[],l:Gp,h:e,m:!0,_:0}}function F9(e){var t=e[Fr];t.i===0||t.i===1?t.j():t.g=!0}function ij(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||tl("ES5").S(t,e,n),n?(r[Fr].P&&(R0(t),uo(4)),Ql(e)&&(e=I0(t,e),t.l||F0(t,e)),t.u&&tl("Patches").M(r[Fr].t,e,t.u,t.s)):e=I0(t,r,[]),R0(t),t.u&&t.v(t.u,t.s),e!==gP?e:void 0}function I0(e,t,r){if(E5(t))return t;var n=t[Fr];if(!n)return Cu(t,function(l,c){return K4(e,n,t,l,c,r)},!0),t;if(n.A!==e)return t;if(!n.P)return F0(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=A5(n.k):n.o,i=a,o=!1;n.i===3&&(i=new Set(a),a.clear(),o=!0),Cu(i,function(l,c){return K4(e,n,a,l,c,r,o)}),F0(e,a,!1),r&&e.u&&tl("Patches").N(n,r,e.u,e.s)}return n.o}function K4(e,t,r,n,a,i,o){if(xd(a)){var l=I0(e,a,i&&t&&t.i!==3&&!Hh(t.R,n)?i.concat(n):void 0);if(pP(r,n,l),!xd(l))return;e.m=!1}else o&&r.add(a);if(Ql(a)&&!E5(a)){if(!e.h.D&&e._<1)return;I0(e,a),t&&t.A.l||F0(e,a)}}function F0(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&P5(t,r)}function oj(e,t){var r=e[Fr];return(r?Zd(r):e)[t]}function Y4(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Mc(e){e.P||(e.P=!0,e.l&&Mc(e.l))}function lj(e){e.o||(e.o=A5(e.t))}function uw(e,t,r){var n=C5(t)?tl("MapSet").F(t,r):k5(t)?tl("MapSet").T(t,r):e.O?function(a,i){var o=Array.isArray(a),l={i:o?1:0,A:i?i.A:cw(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},c=l,d=Kp;o&&(c=[l],d=Zm);var u=Proxy.revocable(c,d),h=u.revoke,p=u.proxy;return l.k=p,l.j=h,p}(t,r):tl("ES5").J(t,r);return(r?r.A:cw()).p.push(n),n}function D9(e){return xd(e)||uo(22,e),function t(r){if(!Ql(r))return r;var n,a=r[Fr],i=Vf(r);if(a){if(!a.P&&(a.i<4||!tl("ES5").K(a)))return a.t;a.I=!0,n=J4(r,i),a.I=!1}else n=J4(r,i);return Cu(n,function(o,l){a&&T9(a.t,o)===l||pP(n,o,t(l))}),i===3?new Set(n):n}(e)}function J4(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return A5(e)}function O9(){function e(i,o){var l=a[i];return l?l.enumerable=o:a[i]=l={configurable:!0,enumerable:o,get:function(){var c=this[Fr];return Kp.get(c,i)},set:function(c){var d=this[Fr];Kp.set(d,i,c)}},l}function t(i){for(var o=i.length-1;o>=0;o--){var l=i[o][Fr];if(!l.P)switch(l.i){case 5:n(l)&&Mc(l);break;case 4:r(l)&&Mc(l)}}}function r(i){for(var o=i.t,l=i.k,c=Wh(l),d=c.length-1;d>=0;d--){var u=c[d];if(u!==Fr){var h=o[u];if(h===void 0&&!Hh(o,u))return!0;var p=l[u],f=p&&p[Fr];if(f?f.t!==h:!xP(p,h))return!0}}var y=!!o[Fr];return c.length!==Wh(o).length+(y?0:1)}function n(i){var o=i.k;if(o.length!==i.t.length)return!0;var l=Object.getOwnPropertyDescriptor(o,o.length-1);if(l&&!l.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var a={};I9("ES5",{J:function(i,o){var l=Array.isArray(i),c=function(u,h){if(u){for(var p=Array(h.length),f=0;f<h.length;f++)Object.defineProperty(p,""+f,e(f,!0));return p}var y=vP(h);delete y[Fr];for(var x=Wh(y),j=0;j<x.length;j++){var v=x[j];y[v]=e(v,u||!!y[v].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(l,i),d={i:l?5:4,A:o?o.A:cw(),P:!1,I:!1,R:{},l:o,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,Fr,{value:d,writable:!0}),c},S:function(i,o,l){l?xd(o)&&o[Fr].A===i&&t(i.p):(i.u&&function c(d){if(d&&typeof d=="object"){var u=d[Fr];if(u){var h=u.t,p=u.k,f=u.R,y=u.i;if(y===4)Cu(p,function(N){N!==Fr&&(h[N]!==void 0||Hh(h,N)?f[N]||c(p[N]):(f[N]=!0,Mc(u)))}),Cu(h,function(N){p[N]!==void 0||Hh(p,N)||(f[N]=!1,Mc(u))});else if(y===5){if(n(u)&&(Mc(u),f.length=!0),p.length<h.length)for(var x=p.length;x<h.length;x++)f[x]=!1;else for(var j=h.length;j<p.length;j++)f[j]=!0;for(var v=Math.min(p.length,h.length),w=0;w<v;w++)p.hasOwnProperty(w)||(f[w]=!0),f[w]===void 0&&c(p[w])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var Z4,Gp,L5=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",M9=typeof Map<"u",$9=typeof Set<"u",X4=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",gP=L5?Symbol.for("immer-nothing"):((Z4={})["immer-nothing"]=!0,Z4),Q4=L5?Symbol.for("immer-draftable"):"__$immer_draftable",Fr=L5?Symbol.for("immer-state"):"__$immer_state",B9=""+Object.prototype.constructor,Wh=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,vP=Object.getOwnPropertyDescriptors||function(e){var t={};return Wh(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},hw={},Kp={get:function(e,t){if(t===Fr)return e;var r=Zd(e);if(!Hh(r,t))return function(a,i,o){var l,c=Y4(i,o);return c?"value"in c?c.value:(l=c.get)===null||l===void 0?void 0:l.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!Ql(n)?n:n===oj(e.t,t)?(lj(e),e.o[t]=uw(e.A.h,n,e)):n},has:function(e,t){return t in Zd(e)},ownKeys:function(e){return Reflect.ownKeys(Zd(e))},set:function(e,t,r){var n=Y4(Zd(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=oj(Zd(e),t),i=a==null?void 0:a[Fr];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(xP(r,a)&&(r!==void 0||Hh(e.t,t)))return!0;lj(e),Mc(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return oj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,lj(e),Mc(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Zd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){uo(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){uo(12)}},Zm={};Cu(Kp,function(e,t){Zm[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Zm.deleteProperty=function(e,t){return Zm.set.call(this,e,t,void 0)},Zm.set=function(e,t,r){return Kp.set.call(this,e[0],t,r,e[0])};var z9=function(){function e(r){var n=this;this.O=X4,this.D=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var l=i;i=a;var c=n;return function(x){var j=this;x===void 0&&(x=l);for(var v=arguments.length,w=Array(v>1?v-1:0),N=1;N<v;N++)w[N-1]=arguments[N];return c.produce(x,function(k){var P;return(P=i).call.apply(P,[j,k].concat(w))})}}var d;if(typeof i!="function"&&uo(6),o!==void 0&&typeof o!="function"&&uo(7),Ql(a)){var u=G4(n),h=uw(n,a,void 0),p=!0;try{d=i(h),p=!1}finally{p?R0(u):dw(u)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(x){return aj(u,o),ij(x,u)},function(x){throw R0(u),x}):(aj(u,o),ij(d,u))}if(!a||typeof a!="object"){if((d=i(a))===void 0&&(d=a),d===gP&&(d=void 0),n.D&&P5(d,!0),o){var f=[],y=[];tl("Patches").M(a,d,f,y),o(f,y)}return d}uo(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(d){for(var u=arguments.length,h=Array(u>1?u-1:0),p=1;p<u;p++)h[p-1]=arguments[p];return n.produceWithPatches(d,function(f){return a.apply(void 0,[f].concat(h))})};var o,l,c=n.produce(a,i,function(d,u){o=d,l=u});return typeof Promise<"u"&&c instanceof Promise?c.then(function(d){return[d,o,l]}):[c,o,l]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Ql(r)||uo(8),xd(r)&&(r=D9(r));var n=G4(this),a=uw(this,r,void 0);return a[Fr].C=!0,dw(n),a},t.finishDraft=function(r,n){var a=r&&r[Fr],i=a.A;return aj(i,n),ij(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!X4&&uo(20),this.O=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=tl("Patches").$;return xd(r)?o(r,n):this.produce(r,function(l){return o(l,n)})},e}(),yi=new z9,yP=yi.produce;yi.produceWithPatches.bind(yi);yi.setAutoFreeze.bind(yi);yi.setUseProxies.bind(yi);yi.applyPatches.bind(yi);yi.createDraft.bind(yi);yi.finishDraft.bind(yi);function sr(e){"@babel/helpers - typeof";return sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(e)}function U9(e,t){if(sr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q9(e){var t=U9(e,"string");return sr(t)=="symbol"?t:t+""}function V9(e,t,r){return(t=q9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(n){V9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function da(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var sC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),cj=function(){return Math.random().toString(36).substring(7).split("").join(".")},D0={INIT:"@@redux/INIT"+cj(),REPLACE:"@@redux/REPLACE"+cj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cj()}};function H9(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function T5(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(da(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(da(1));return r(T5)(e,t)}if(typeof e!="function")throw new Error(da(2));var a=e,i=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function u(){if(c)throw new Error(da(3));return i}function h(x){if(typeof x!="function")throw new Error(da(4));if(c)throw new Error(da(5));var j=!0;return d(),l.push(x),function(){if(j){if(c)throw new Error(da(6));j=!1,d();var w=l.indexOf(x);l.splice(w,1),o=null}}}function p(x){if(!H9(x))throw new Error(da(7));if(typeof x.type>"u")throw new Error(da(8));if(c)throw new Error(da(9));try{c=!0,i=a(i,x)}finally{c=!1}for(var j=o=l,v=0;v<j.length;v++){var w=j[v];w()}return x}function f(x){if(typeof x!="function")throw new Error(da(10));a=x,p({type:D0.REPLACE})}function y(){var x,j=h;return x={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(da(11));function N(){w.next&&w.next(u())}N();var k=j(N);return{unsubscribe:k}}},x[sC]=function(){return this},x}return p({type:D0.INIT}),n={dispatch:p,subscribe:h,getState:u,replaceReducer:f},n[sC]=y,n}function W9(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:D0.INIT});if(typeof n>"u")throw new Error(da(12));if(typeof r(void 0,{type:D0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(da(13))})}function G9(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),o;try{W9(r)}catch(l){o=l}return function(c,d){if(c===void 0&&(c={}),o)throw o;for(var u=!1,h={},p=0;p<i.length;p++){var f=i[p],y=r[f],x=c[f],j=y(x,d);if(typeof j>"u")throw d&&d.type,new Error(da(14));h[f]=j,u=u||j!==x}return u=u||i.length!==Object.keys(c).length,u?h:c}}function O0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function K9(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(da(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=O0.apply(void 0,l)(a.dispatch),tC(tC({},a),{},{dispatch:i})}}}function bP(e){var t=function(n){var a=n.dispatch,i=n.getState;return function(o){return function(l){return typeof l=="function"?l(a,i,e):o(l)}}};return t}var fw=bP();fw.withExtraArgument=bP;var jP=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y9=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Af=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},J9=Object.defineProperty,Z9=Object.defineProperties,X9=Object.getOwnPropertyDescriptors,rC=Object.getOwnPropertySymbols,Q9=Object.prototype.hasOwnProperty,e$=Object.prototype.propertyIsEnumerable,nC=function(e,t,r){return t in e?J9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ad=function(e,t){for(var r in t||(t={}))Q9.call(t,r)&&nC(e,r,t[r]);if(rC)for(var n=0,a=rC(t);n<a.length;n++){var r=a[n];e$.call(t,r)&&nC(e,r,t[r])}return e},dj=function(e,t){return Z9(e,X9(t))},t$=function(e,t,r){return new Promise(function(n,a){var i=function(c){try{l(r.next(c))}catch(d){a(d)}},o=function(c){try{l(r.throw(c))}catch(d){a(d)}},l=function(c){return c.done?n(c.value):Promise.resolve(c.value).then(i,o)};l((r=r.apply(e,t)).next())})},s$=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?O0:O0.apply(null,arguments)};function r$(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function id(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return ad(ad({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var n$=function(e){jP(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Af([void 0],r[0].concat(this)))):new(t.bind.apply(t,Af([void 0],r.concat(this))))},t}(Array),a$=function(e){jP(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Af([void 0],r[0].concat(this)))):new(t.bind.apply(t,Af([void 0],r.concat(this))))},t}(Array);function mw(e){return Ql(e)?yP(e,function(){}):e}function i$(e){return typeof e=="boolean"}function o$(){return function(t){return l$(t)}}function l$(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new n$;return r&&(i$(r)?n.push(fw):n.push(fw.withExtraArgument(r.extraArgument))),n}function c$(e){var t=o$(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?t():i,l=r.devTools,c=l===void 0?!0:l,d=r.preloadedState,u=d===void 0?void 0:d,h=r.enhancers,p=h===void 0?void 0:h,f;if(typeof a=="function")f=a;else if(r$(a))f=G9(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(t));var x=K9.apply(void 0,y),j=O0;c&&(j=s$(ad({trace:!1},typeof c=="object"&&c)));var v=new a$(x),w=v;Array.isArray(p)?w=Af([x],p):typeof p=="function"&&(w=p(v));var N=j.apply(void 0,w);return T5(f,u,N)}function wP(e){var t={},r=[],n,a={addCase:function(i,o){var l=typeof i=="string"?i:i.type;if(!l)throw new Error("`builder.addCase` cannot be called with an empty action type");if(l in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[l]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return e(a),[t,r,n]}function d$(e){return typeof e=="function"}function u$(e,t,r,n){r===void 0&&(r=[]);var a=typeof t=="function"?wP(t):[t,r,n],i=a[0],o=a[1],l=a[2],c;if(d$(e))c=function(){return mw(e())};else{var d=mw(e);c=function(){return d}}function u(h,p){h===void 0&&(h=c());var f=Af([i[p.type]],o.filter(function(y){var x=y.matcher;return x(p)}).map(function(y){var x=y.reducer;return x}));return f.filter(function(y){return!!y}).length===0&&(f=[l]),f.reduce(function(y,x){if(x)if(xd(y)){var j=y,v=x(j,p);return v===void 0?y:v}else{if(Ql(y))return yP(y,function(w){return x(w,p)});var v=x(y,p);if(v===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return y},h)}return u.getInitialState=c,u}function h$(e,t){return e+"/"+t}function Yr(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:mw(e.initialState),n=e.reducers||{},a=Object.keys(n),i={},o={},l={};a.forEach(function(u){var h=n[u],p=h$(t,u),f,y;"reducer"in h?(f=h.reducer,y=h.prepare):f=h,i[u]=f,o[p]=f,l[u]=y?id(p,y):id(p)});function c(){var u=typeof e.extraReducers=="function"?wP(e.extraReducers):[e.extraReducers],h=u[0],p=h===void 0?{}:h,f=u[1],y=f===void 0?[]:f,x=u[2],j=x===void 0?void 0:x,v=ad(ad({},p),o);return u$(r,function(w){for(var N in v)w.addCase(N,v[N]);for(var k=0,P=y;k<P.length;k++){var E=P[k];w.addMatcher(E.matcher,E.reducer)}j&&w.addDefaultCase(j)})}var d;return{name:t,reducer:function(u,h){return d||(d=c()),d(u,h)},actions:l,caseReducers:i,getInitialState:function(){return d||(d=c()),d.getInitialState()}}}var f$="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",m$=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=f$[Math.random()*64|0];return t},p$=["name","message","stack","code"],uj=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),aC=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),x$=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=p$;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}},Ct=function(){function e(t,r,n){var a=id(t+"/fulfilled",function(d,u,h,p){return{payload:d,meta:dj(ad({},p||{}),{arg:h,requestId:u,requestStatus:"fulfilled"})}}),i=id(t+"/pending",function(d,u,h){return{payload:void 0,meta:dj(ad({},h||{}),{arg:u,requestId:d,requestStatus:"pending"})}}),o=id(t+"/rejected",function(d,u,h,p,f){return{payload:p,error:(n&&n.serializeError||x$)(d||"Rejected"),meta:dj(ad({},f||{}),{arg:h,requestId:u,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"})}}),l=typeof AbortController<"u"?AbortController:function(){function d(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return d.prototype.abort=function(){},d}();function c(d){return function(u,h,p){var f=n!=null&&n.idGenerator?n.idGenerator(d):m$(),y=new l,x;function j(w){x=w,y.abort()}var v=function(){return t$(this,null,function(){var w,N,k,P,E,I,T;return Y9(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),P=(w=n==null?void 0:n.condition)==null?void 0:w.call(n,d,{getState:h,extra:p}),v$(P)?[4,P]:[3,2];case 1:P=R.sent(),R.label=2;case 2:if(P===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return E=new Promise(function(X,D){return y.signal.addEventListener("abort",function(){return D({name:"AbortError",message:x||"Aborted"})})}),u(i(f,d,(N=n==null?void 0:n.getPendingMeta)==null?void 0:N.call(n,{requestId:f,arg:d},{getState:h,extra:p}))),[4,Promise.race([E,Promise.resolve(r(d,{dispatch:u,getState:h,extra:p,requestId:f,signal:y.signal,abort:j,rejectWithValue:function(X,D){return new uj(X,D)},fulfillWithValue:function(X,D){return new aC(X,D)}})).then(function(X){if(X instanceof uj)throw X;return X instanceof aC?a(X.payload,f,d,X.meta):a(X,f,d)})])];case 3:return k=R.sent(),[3,5];case 4:return I=R.sent(),k=I instanceof uj?o(null,f,d,I.payload,I.meta):o(I,f,d),[3,5];case 5:return T=n&&!n.dispatchConditionRejection&&o.match(k)&&k.meta.condition,T||u(k),[2,k]}})})}();return Object.assign(v,{abort:j,requestId:f,arg:d,unwrap:function(){return v.then(g$)}})}}return Object.assign(c,{pending:i,rejected:o,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e}();function g$(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function v$(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var R5="listenerMiddleware";id(R5+"/add");id(R5+"/removeAll");id(R5+"/remove");var iC;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);O9();var I5="persist:",NP="persist/FLUSH",F5="persist/REHYDRATE",SP="persist/PAUSE",_P="persist/PERSIST",CP="persist/PURGE",kP="persist/REGISTER",y$=-1;function uv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uv=function(r){return typeof r}:uv=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},uv(e)}function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oC(r,!0).forEach(function(n){j$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w$(e,t,r,n){n.debug;var a=b$({},r);return e&&uv(e)==="object"&&Object.keys(e).forEach(function(i){i!=="_persist"&&t[i]===r[i]&&(a[i]=e[i])}),a}function N$(e){var t=e.blacklist||null,r=e.whitelist||null,n=e.transforms||[],a=e.throttle||0,i="".concat(e.keyPrefix!==void 0?e.keyPrefix:I5).concat(e.key),o=e.storage,l;e.serialize===!1?l=function(P){return P}:typeof e.serialize=="function"?l=e.serialize:l=S$;var c=e.writeFailHandler||null,d={},u={},h=[],p=null,f=null,y=function(P){Object.keys(P).forEach(function(E){v(E)&&d[E]!==P[E]&&h.indexOf(E)===-1&&h.push(E)}),Object.keys(d).forEach(function(E){P[E]===void 0&&v(E)&&h.indexOf(E)===-1&&d[E]!==void 0&&h.push(E)}),p===null&&(p=setInterval(x,a)),d=P};function x(){if(h.length===0){p&&clearInterval(p),p=null;return}var k=h.shift(),P=n.reduce(function(E,I){return I.in(E,k,d)},d[k]);if(P!==void 0)try{u[k]=l(P)}catch(E){console.error("redux-persist/createPersistoid: error serializing state",E)}else delete u[k];h.length===0&&j()}function j(){Object.keys(u).forEach(function(k){d[k]===void 0&&delete u[k]}),f=o.setItem(i,l(u)).catch(w)}function v(k){return!(r&&r.indexOf(k)===-1&&k!=="_persist"||t&&t.indexOf(k)!==-1)}function w(k){c&&c(k)}var N=function(){for(;h.length!==0;)x();return f||Promise.resolve()};return{update:y,flush:N}}function S$(e){return JSON.stringify(e)}function _$(e){var t=e.transforms||[],r="".concat(e.keyPrefix!==void 0?e.keyPrefix:I5).concat(e.key),n=e.storage;e.debug;var a;return e.deserialize===!1?a=function(o){return o}:typeof e.deserialize=="function"?a=e.deserialize:a=C$,n.getItem(r).then(function(i){if(i)try{var o={},l=a(i);return Object.keys(l).forEach(function(c){o[c]=t.reduceRight(function(d,u){return u.out(d,c,l)},a(l[c]))}),o}catch(c){throw c}else return})}function C$(e){return JSON.parse(e)}function k$(e){var t=e.storage,r="".concat(e.keyPrefix!==void 0?e.keyPrefix:I5).concat(e.key);return t.removeItem(r,A$)}function A$(e){}function lC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lC(r,!0).forEach(function(n){P$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lC(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E$(e,t){if(e==null)return{};var r=L$(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function L$(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var T$=5e3;function AP(e,t){var r=e.version!==void 0?e.version:y$;e.debug;var n=e.stateReconciler===void 0?w$:e.stateReconciler,a=e.getStoredState||_$,i=e.timeout!==void 0?e.timeout:T$,o=null,l=!1,c=!0,d=function(h){return h._persist.rehydrated&&o&&!c&&o.update(h),h};return function(u,h){var p=u||{},f=p._persist,y=E$(p,["_persist"]),x=y;if(h.type===_P){var j=!1,v=function(T,R){j||(h.rehydrate(e.key,T,R),j=!0)};if(i&&setTimeout(function(){!j&&v(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},i),c=!1,o||(o=N$(e)),f)return Al({},t(x,h),{_persist:f});if(typeof h.rehydrate!="function"||typeof h.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return h.register(e.key),a(e).then(function(I){var T=e.migrate||function(R,X){return Promise.resolve(R)};T(I,r).then(function(R){v(R)},function(R){v(void 0,R)})},function(I){v(void 0,I)}),Al({},t(x,h),{_persist:{version:r,rehydrated:!1}})}else{if(h.type===CP)return l=!0,h.result(k$(e)),Al({},t(x,h),{_persist:f});if(h.type===NP)return h.result(o&&o.flush()),Al({},t(x,h),{_persist:f});if(h.type===SP)c=!0;else if(h.type===F5){if(l)return Al({},x,{_persist:Al({},f,{rehydrated:!0})});if(h.key===e.key){var w=t(x,h),N=h.payload,k=n!==!1&&N!==void 0?n(N,u,w,e):w,P=Al({},k,{_persist:Al({},f,{rehydrated:!0})});return d(P)}}}if(!f)return t(u,h);var E=t(x,h);return E===x?u:d(Al({},E,{_persist:f}))}}function cC(e){return F$(e)||I$(e)||R$()}function R$(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function I$(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function F$(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(r,!0).forEach(function(n){D$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PP={registry:[],bootstrapped:!1},O$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:PP,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case kP:return pw({},t,{registry:[].concat(cC(t.registry),[r.key])});case F5:var n=t.registry.indexOf(r.key),a=cC(t.registry);return a.splice(n,1),pw({},t,{registry:a,bootstrapped:a.length===0});default:return t}};function M$(e,t,r){var n=T5(O$,PP,void 0),a=function(c){n.dispatch({type:kP,key:c})},i=function(c,d,u){var h={type:F5,payload:d,err:u,key:c};e.dispatch(h),n.dispatch(h)},o=pw({},n,{purge:function(){var c=[];return e.dispatch({type:CP,result:function(u){c.push(u)}}),Promise.all(c)},flush:function(){var c=[];return e.dispatch({type:NP,result:function(u){c.push(u)}}),Promise.all(c)},pause:function(){e.dispatch({type:SP})},persist:function(){e.dispatch({type:_P,register:a,rehydrate:i})}});return o.persist(),o}var D5={},O5={};O5.__esModule=!0;O5.default=z$;function hv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hv=function(r){return typeof r}:hv=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hv(e)}function hj(){}var $$={getItem:hj,setItem:hj,removeItem:hj};function B$(e){if((typeof self>"u"?"undefined":hv(self))!=="object"||!(e in self))return!1;try{var t=self[e],r="redux-persist ".concat(e," test");t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch{return!1}return!0}function z$(e){var t="".concat(e,"Storage");return B$(t)?self[t]:$$}D5.__esModule=!0;D5.default=V$;var U$=q$(O5);function q$(e){return e&&e.__esModule?e:{default:e}}function V$(e){var t=(0,U$.default)(e);return{getItem:function(n){return new Promise(function(a,i){a(t.getItem(n))})},setItem:function(n,a){return new Promise(function(i,o){i(t.setItem(n,a))})},removeItem:function(n){return new Promise(function(a,i){a(t.removeItem(n))})}}}var M5=void 0,H$=W$(D5);function W$(e){return e&&e.__esModule?e:{default:e}}var G$=(0,H$.default)("local");M5=G$;function EP(e,t){return function(){return e.apply(t,arguments)}}const{toString:K$}=Object.prototype,{getPrototypeOf:$5}=Object,{iterator:eb,toStringTag:LP}=Symbol,tb=(e=>t=>{const r=K$.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Po=e=>(e=e.toLowerCase(),t=>tb(t)===e),sb=e=>t=>typeof t===e,{isArray:Hf}=Array,Yp=sb("undefined");function px(e){return e!==null&&!Yp(e)&&e.constructor!==null&&!Yp(e.constructor)&&Ka(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const TP=Po("ArrayBuffer");function Y$(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&TP(e.buffer),t}const J$=sb("string"),Ka=sb("function"),RP=sb("number"),xx=e=>e!==null&&typeof e=="object",Z$=e=>e===!0||e===!1,fv=e=>{if(tb(e)!=="object")return!1;const t=$5(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(LP in e)&&!(eb in e)},X$=e=>{if(!xx(e)||px(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Q$=Po("Date"),eB=Po("File"),tB=Po("Blob"),sB=Po("FileList"),rB=e=>xx(e)&&Ka(e.pipe),nB=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ka(e.append)&&((t=tb(e))==="formdata"||t==="object"&&Ka(e.toString)&&e.toString()==="[object FormData]"))},aB=Po("URLSearchParams"),[iB,oB,lB,cB]=["ReadableStream","Request","Response","Headers"].map(Po),dB=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gx(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Hf(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(px(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function IP(e,t){if(px(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const ru=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,FP=e=>!Yp(e)&&e!==ru;function xw(){const{caseless:e}=FP(this)&&this||{},t={},r=(n,a)=>{const i=e&&IP(t,a)||a;fv(t[i])&&fv(n)?t[i]=xw(t[i],n):fv(n)?t[i]=xw({},n):Hf(n)?t[i]=n.slice():t[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&gx(arguments[n],r);return t}const uB=(e,t,r,{allOwnKeys:n}={})=>(gx(t,(a,i)=>{r&&Ka(a)?e[i]=EP(a,r):e[i]=a},{allOwnKeys:n}),e),hB=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),fB=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},mB=(e,t,r,n)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&$5(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},pB=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},xB=e=>{if(!e)return null;if(Hf(e))return e;let t=e.length;if(!RP(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},gB=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&$5(Uint8Array)),vB=(e,t)=>{const n=(e&&e[eb]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},yB=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},bB=Po("HTMLFormElement"),jB=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),uC=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),wB=Po("RegExp"),DP=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};gx(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},NB=e=>{DP(e,(t,r)=>{if(Ka(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Ka(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},SB=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Hf(e)?n(e):n(String(e).split(t)),r},_B=()=>{},CB=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function kB(e){return!!(e&&Ka(e.append)&&e[LP]==="FormData"&&e[eb])}const AB=e=>{const t=new Array(10),r=(n,a)=>{if(xx(n)){if(t.indexOf(n)>=0)return;if(px(n))return n;if(!("toJSON"in n)){t[a]=n;const i=Hf(n)?[]:{};return gx(n,(o,l)=>{const c=r(o,a+1);!Yp(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return r(e,0)},PB=Po("AsyncFunction"),EB=e=>e&&(xx(e)||Ka(e))&&Ka(e.then)&&Ka(e.catch),OP=((e,t)=>e?setImmediate:t?((r,n)=>(ru.addEventListener("message",({source:a,data:i})=>{a===ru&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),ru.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ka(ru.postMessage)),LB=typeof queueMicrotask<"u"?queueMicrotask.bind(ru):typeof process<"u"&&process.nextTick||OP,TB=e=>e!=null&&Ka(e[eb]),Ke={isArray:Hf,isArrayBuffer:TP,isBuffer:px,isFormData:nB,isArrayBufferView:Y$,isString:J$,isNumber:RP,isBoolean:Z$,isObject:xx,isPlainObject:fv,isEmptyObject:X$,isReadableStream:iB,isRequest:oB,isResponse:lB,isHeaders:cB,isUndefined:Yp,isDate:Q$,isFile:eB,isBlob:tB,isRegExp:wB,isFunction:Ka,isStream:rB,isURLSearchParams:aB,isTypedArray:gB,isFileList:sB,forEach:gx,merge:xw,extend:uB,trim:dB,stripBOM:hB,inherits:fB,toFlatObject:mB,kindOf:tb,kindOfTest:Po,endsWith:pB,toArray:xB,forEachEntry:vB,matchAll:yB,isHTMLForm:bB,hasOwnProperty:uC,hasOwnProp:uC,reduceDescriptors:DP,freezeMethods:NB,toObjectSet:SB,toCamelCase:jB,noop:_B,toFiniteNumber:CB,findKey:IP,global:ru,isContextDefined:FP,isSpecCompliantForm:kB,toJSONObject:AB,isAsyncFn:PB,isThenable:EB,setImmediate:OP,asap:LB,isIterable:TB};function Cs(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Ke.inherits(Cs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ke.toJSONObject(this.config),code:this.code,status:this.status}}});const MP=Cs.prototype,$P={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{$P[e]={value:e}});Object.defineProperties(Cs,$P);Object.defineProperty(MP,"isAxiosError",{value:!0});Cs.from=(e,t,r,n,a,i)=>{const o=Object.create(MP);return Ke.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Cs.call(o,e.message,t,r,n,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const RB=null;function gw(e){return Ke.isPlainObject(e)||Ke.isArray(e)}function BP(e){return Ke.endsWith(e,"[]")?e.slice(0,-2):e}function hC(e,t,r){return e?e.concat(t).map(function(a,i){return a=BP(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function IB(e){return Ke.isArray(e)&&!e.some(gw)}const FB=Ke.toFlatObject(Ke,{},null,function(t){return/^is[A-Z]/.test(t)});function rb(e,t,r){if(!Ke.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Ke.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,j){return!Ke.isUndefined(j[x])});const n=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Ke.isSpecCompliantForm(t);if(!Ke.isFunction(a))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(Ke.isDate(y))return y.toISOString();if(Ke.isBoolean(y))return y.toString();if(!c&&Ke.isBlob(y))throw new Cs("Blob is not supported. Use a Buffer instead.");return Ke.isArrayBuffer(y)||Ke.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,x,j){let v=y;if(y&&!j&&typeof y=="object"){if(Ke.endsWith(x,"{}"))x=n?x:x.slice(0,-2),y=JSON.stringify(y);else if(Ke.isArray(y)&&IB(y)||(Ke.isFileList(y)||Ke.endsWith(x,"[]"))&&(v=Ke.toArray(y)))return x=BP(x),v.forEach(function(N,k){!(Ke.isUndefined(N)||N===null)&&t.append(o===!0?hC([x],k,i):o===null?x:x+"[]",d(N))}),!1}return gw(y)?!0:(t.append(hC(j,x,i),d(y)),!1)}const h=[],p=Object.assign(FB,{defaultVisitor:u,convertValue:d,isVisitable:gw});function f(y,x){if(!Ke.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(y),Ke.forEach(y,function(v,w){(!(Ke.isUndefined(v)||v===null)&&a.call(t,v,Ke.isString(w)?w.trim():w,x,p))===!0&&f(v,x?x.concat(w):[w])}),h.pop()}}if(!Ke.isObject(e))throw new TypeError("data must be an object");return f(e),t}function fC(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function B5(e,t){this._pairs=[],e&&rb(e,this,t)}const zP=B5.prototype;zP.append=function(t,r){this._pairs.push([t,r])};zP.toString=function(t){const r=t?function(n){return t.call(this,n,fC)}:fC;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function DB(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function UP(e,t,r){if(!t)return e;const n=r&&r.encode||DB;Ke.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=Ke.isURLSearchParams(t)?t.toString():new B5(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class mC{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ke.forEach(this.handlers,function(n){n!==null&&t(n)})}}const qP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},OB=typeof URLSearchParams<"u"?URLSearchParams:B5,MB=typeof FormData<"u"?FormData:null,$B=typeof Blob<"u"?Blob:null,BB={isBrowser:!0,classes:{URLSearchParams:OB,FormData:MB,Blob:$B},protocols:["http","https","file","blob","url","data"]},z5=typeof window<"u"&&typeof document<"u",vw=typeof navigator=="object"&&navigator||void 0,zB=z5&&(!vw||["ReactNative","NativeScript","NS"].indexOf(vw.product)<0),UB=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",qB=z5&&window.location.href||"http://localhost",VB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:z5,hasStandardBrowserEnv:zB,hasStandardBrowserWebWorkerEnv:UB,navigator:vw,origin:qB},Symbol.toStringTag,{value:"Module"})),ha={...VB,...BB};function HB(e,t){return rb(e,new ha.classes.URLSearchParams,{visitor:function(r,n,a,i){return ha.isNode&&Ke.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function WB(e){return Ke.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function GB(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function VP(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&Ke.isArray(a)?a.length:o,c?(Ke.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!Ke.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&Ke.isArray(a[o])&&(a[o]=GB(a[o])),!l)}if(Ke.isFormData(e)&&Ke.isFunction(e.entries)){const r={};return Ke.forEachEntry(e,(n,a)=>{t(WB(n),a,r,0)}),r}return null}function KB(e,t,r){if(Ke.isString(e))try{return(t||JSON.parse)(e),Ke.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const vx={transitional:qP,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=Ke.isObject(t);if(i&&Ke.isHTMLForm(t)&&(t=new FormData(t)),Ke.isFormData(t))return a?JSON.stringify(VP(t)):t;if(Ke.isArrayBuffer(t)||Ke.isBuffer(t)||Ke.isStream(t)||Ke.isFile(t)||Ke.isBlob(t)||Ke.isReadableStream(t))return t;if(Ke.isArrayBufferView(t))return t.buffer;if(Ke.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return HB(t,this.formSerializer).toString();if((l=Ke.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return rb(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),KB(t)):t}],transformResponse:[function(t){const r=this.transitional||vx.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(Ke.isResponse(t)||Ke.isReadableStream(t))return t;if(t&&Ke.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?Cs.from(l,Cs.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ha.classes.FormData,Blob:ha.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ke.forEach(["delete","get","head","post","put","patch"],e=>{vx.headers[e]={}});const YB=Ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JB=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&YB[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},pC=Symbol("internals");function Om(e){return e&&String(e).trim().toLowerCase()}function mv(e){return e===!1||e==null?e:Ke.isArray(e)?e.map(mv):String(e)}function ZB(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const XB=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fj(e,t,r,n,a){if(Ke.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!Ke.isString(t)){if(Ke.isString(n))return t.indexOf(n)!==-1;if(Ke.isRegExp(n))return n.test(t)}}function QB(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function ez(e,t){const r=Ke.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let Ya=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(l,c,d){const u=Om(c);if(!u)throw new Error("header name must be a non-empty string");const h=Ke.findKey(a,u);(!h||a[h]===void 0||d===!0||d===void 0&&a[h]!==!1)&&(a[h||c]=mv(l))}const o=(l,c)=>Ke.forEach(l,(d,u)=>i(d,u,c));if(Ke.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Ke.isString(t)&&(t=t.trim())&&!XB(t))o(JB(t),r);else if(Ke.isObject(t)&&Ke.isIterable(t)){let l={},c,d;for(const u of t){if(!Ke.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?Ke.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=Om(t),t){const n=Ke.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return ZB(a);if(Ke.isFunction(r))return r.call(this,a,n);if(Ke.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Om(t),t){const n=Ke.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||fj(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=Om(o),o){const l=Ke.findKey(n,o);l&&(!r||fj(n,n[l],l,r))&&(delete n[l],a=!0)}}return Ke.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||fj(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return Ke.forEach(this,(a,i)=>{const o=Ke.findKey(n,i);if(o){r[o]=mv(a),delete r[i];return}const l=t?QB(i):String(i).trim();l!==i&&delete r[i],r[l]=mv(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ke.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&Ke.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[pC]=this[pC]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=Om(o);n[l]||(ez(a,o),n[l]=!0)}return Ke.isArray(t)?t.forEach(i):i(t),this}};Ya.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ke.reduceDescriptors(Ya.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Ke.freezeMethods(Ya);function mj(e,t){const r=this||vx,n=t||r,a=Ya.from(n.headers);let i=n.data;return Ke.forEach(e,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function HP(e){return!!(e&&e.__CANCEL__)}function Wf(e,t,r){Cs.call(this,e??"canceled",Cs.ERR_CANCELED,t,r),this.name="CanceledError"}Ke.inherits(Wf,Cs,{__CANCEL__:!0});function WP(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Cs("Request failed with status code "+r.status,[Cs.ERR_BAD_REQUEST,Cs.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function tz(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function sz(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),r[a]=c,n[a]=d;let h=i,p=0;for(;h!==a;)p+=r[h++],h=h%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const f=u&&d-u;return f?Math.round(p*1e3/f):void 0}}function rz(e,t){let r=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-h)))},()=>a&&o(a)]}const M0=(e,t,r=3)=>{let n=0;const a=sz(50,250);return rz(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),u=o<=l;n=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},r)},xC=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},gC=e=>(...t)=>Ke.asap(()=>e(...t)),nz=ha.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ha.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ha.origin),ha.navigator&&/(msie|trident)/i.test(ha.navigator.userAgent)):()=>!0,az=ha.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const o=[e+"="+encodeURIComponent(t)];Ke.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Ke.isString(n)&&o.push("path="+n),Ke.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function iz(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function oz(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function GP(e,t,r){let n=!iz(t);return e&&(n||r==!1)?oz(e,t):t}const vC=e=>e instanceof Ya?{...e}:e;function ku(e,t){t=t||{};const r={};function n(d,u,h,p){return Ke.isPlainObject(d)&&Ke.isPlainObject(u)?Ke.merge.call({caseless:p},d,u):Ke.isPlainObject(u)?Ke.merge({},u):Ke.isArray(u)?u.slice():u}function a(d,u,h,p){if(Ke.isUndefined(u)){if(!Ke.isUndefined(d))return n(void 0,d,h,p)}else return n(d,u,h,p)}function i(d,u){if(!Ke.isUndefined(u))return n(void 0,u)}function o(d,u){if(Ke.isUndefined(u)){if(!Ke.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>a(vC(d),vC(u),h,!0)};return Ke.forEach(Object.keys({...e,...t}),function(u){const h=c[u]||a,p=h(e[u],t[u],u);Ke.isUndefined(p)&&h!==l||(r[u]=p)}),r}const KP=e=>{const t=ku({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=Ya.from(o),t.url=UP(GP(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Ke.isFormData(r)){if(ha.hasStandardBrowserEnv||ha.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(ha.hasStandardBrowserEnv&&(n&&Ke.isFunction(n)&&(n=n(t)),n||n!==!1&&nz(t.url))){const d=a&&i&&az.read(i);d&&o.set(a,d)}return t},lz=typeof XMLHttpRequest<"u",cz=lz&&function(e){return new Promise(function(r,n){const a=KP(e);let i=a.data;const o=Ya.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,h,p,f,y;function x(){f&&f(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function v(){if(!j)return;const N=Ya.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),P={data:!l||l==="text"||l==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:N,config:e,request:j};WP(function(I){r(I),x()},function(I){n(I),x()},P),j=null}"onloadend"in j?j.onloadend=v:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(v)},j.onabort=function(){j&&(n(new Cs("Request aborted",Cs.ECONNABORTED,e,j)),j=null)},j.onerror=function(){n(new Cs("Network Error",Cs.ERR_NETWORK,e,j)),j=null},j.ontimeout=function(){let k=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||qP;a.timeoutErrorMessage&&(k=a.timeoutErrorMessage),n(new Cs(k,P.clarifyTimeoutError?Cs.ETIMEDOUT:Cs.ECONNABORTED,e,j)),j=null},i===void 0&&o.setContentType(null),"setRequestHeader"in j&&Ke.forEach(o.toJSON(),function(k,P){j.setRequestHeader(P,k)}),Ke.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),l&&l!=="json"&&(j.responseType=a.responseType),d&&([p,y]=M0(d,!0),j.addEventListener("progress",p)),c&&j.upload&&([h,f]=M0(c),j.upload.addEventListener("progress",h),j.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(u=N=>{j&&(n(!N||N.type?new Wf(null,e,j):N),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const w=tz(a.url);if(w&&ha.protocols.indexOf(w)===-1){n(new Cs("Unsupported protocol "+w+":",Cs.ERR_BAD_REQUEST,e));return}j.send(i||null)})},dz=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof Cs?u:new Wf(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new Cs(`timeout ${t} of ms exceeded`,Cs.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>Ke.asap(l),c}},uz=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},hz=async function*(e,t){for await(const r of fz(e))yield*uz(r,t)},fz=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},yC=(e,t,r,n)=>{const a=hz(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let p=i+=h;r(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},nb=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",YP=nb&&typeof ReadableStream=="function",mz=nb&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),JP=(e,...t)=>{try{return!!e(...t)}catch{return!1}},pz=YP&&JP(()=>{let e=!1;const t=new Request(ha.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),bC=64*1024,yw=YP&&JP(()=>Ke.isReadableStream(new Response("").body)),$0={stream:yw&&(e=>e.body)};nb&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!$0[t]&&($0[t]=Ke.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Cs(`Response type '${t}' is not supported`,Cs.ERR_NOT_SUPPORT,n)})})})(new Response);const xz=async e=>{if(e==null)return 0;if(Ke.isBlob(e))return e.size;if(Ke.isSpecCompliantForm(e))return(await new Request(ha.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ke.isArrayBufferView(e)||Ke.isArrayBuffer(e))return e.byteLength;if(Ke.isURLSearchParams(e)&&(e=e+""),Ke.isString(e))return(await mz(e)).byteLength},gz=async(e,t)=>{const r=Ke.toFiniteNumber(e.getContentLength());return r??xz(t)},vz=nb&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:p}=KP(e);d=d?(d+"").toLowerCase():"text";let f=dz([a,i&&i.toAbortSignal()],o),y;const x=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let j;try{if(c&&pz&&r!=="get"&&r!=="head"&&(j=await gz(u,n))!==0){let P=new Request(t,{method:"POST",body:n,duplex:"half"}),E;if(Ke.isFormData(n)&&(E=P.headers.get("content-type"))&&u.setContentType(E),P.body){const[I,T]=xC(j,M0(gC(c)));n=yC(P.body,bC,I,T)}}Ke.isString(h)||(h=h?"include":"omit");const v="credentials"in Request.prototype;y=new Request(t,{...p,signal:f,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:v?h:void 0});let w=await fetch(y,p);const N=yw&&(d==="stream"||d==="response");if(yw&&(l||N&&x)){const P={};["status","statusText","headers"].forEach(R=>{P[R]=w[R]});const E=Ke.toFiniteNumber(w.headers.get("content-length")),[I,T]=l&&xC(E,M0(gC(l),!0))||[];w=new Response(yC(w.body,bC,I,()=>{T&&T(),x&&x()}),P)}d=d||"text";let k=await $0[Ke.findKey($0,d)||"text"](w,e);return!N&&x&&x(),await new Promise((P,E)=>{WP(P,E,{data:k,headers:Ya.from(w.headers),status:w.status,statusText:w.statusText,config:e,request:y})})}catch(v){throw x&&x(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new Cs("Network Error",Cs.ERR_NETWORK,e,y),{cause:v.cause||v}):Cs.from(v,v&&v.code,e,y)}}),bw={http:RB,xhr:cz,fetch:vz};Ke.forEach(bw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jC=e=>`- ${e}`,yz=e=>Ke.isFunction(e)||e===null||e===!1,ZP={getAdapter:e=>{e=Ke.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let i=0;i<t;i++){r=e[i];let o;if(n=r,!yz(r)&&(n=bw[(o=String(r)).toLowerCase()],n===void 0))throw new Cs(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(jC).join(`
`):" "+jC(i[0]):"as no adapter specified";throw new Cs("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:bw};function pj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Wf(null,e)}function wC(e){return pj(e),e.headers=Ya.from(e.headers),e.data=mj.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ZP.getAdapter(e.adapter||vx.adapter)(e).then(function(n){return pj(e),n.data=mj.call(e,e.transformResponse,n),n.headers=Ya.from(n.headers),n},function(n){return HP(n)||(pj(e),n&&n.response&&(n.response.data=mj.call(e,e.transformResponse,n.response),n.response.headers=Ya.from(n.response.headers))),Promise.reject(n)})}const XP="1.11.0",ab={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ab[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const NC={};ab.transitional=function(t,r,n){function a(i,o){return"[Axios v"+XP+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new Cs(a(o," has been removed"+(r?" in "+r:"")),Cs.ERR_DEPRECATED);return r&&!NC[o]&&(NC[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};ab.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function bz(e,t,r){if(typeof e!="object")throw new Cs("options must be an object",Cs.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new Cs("option "+i+" must be "+c,Cs.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Cs("Unknown option "+i,Cs.ERR_BAD_OPTION)}}const pv={assertOptions:bz,validators:ab},$o=pv.validators;let mu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new mC,response:new mC}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ku(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&pv.assertOptions(n,{silentJSONParsing:$o.transitional($o.boolean),forcedJSONParsing:$o.transitional($o.boolean),clarifyTimeoutError:$o.transitional($o.boolean)},!1),a!=null&&(Ke.isFunction(a)?r.paramsSerializer={serialize:a}:pv.assertOptions(a,{encode:$o.function,serialize:$o.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),pv.assertOptions(r,{baseUrl:$o.spelling("baseURL"),withXsrfToken:$o.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&Ke.merge(i.common,i[r.method]);i&&Ke.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),r.headers=Ya.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(c=c&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let u,h=0,p;if(!c){const y=[wC.bind(this),void 0];for(y.unshift(...l),y.push(...d),p=y.length,u=Promise.resolve(r);h<p;)u=u.then(y[h++],y[h++]);return u}p=l.length;let f=r;for(h=0;h<p;){const y=l[h++],x=l[h++];try{f=y(f)}catch(j){x.call(this,j);break}}try{u=wC.call(this,f)}catch(y){return Promise.reject(y)}for(h=0,p=d.length;h<p;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=ku(this.defaults,t);const r=GP(t.baseURL,t.url,t.allowAbsoluteUrls);return UP(r,t.params,t.paramsSerializer)}};Ke.forEach(["delete","get","head","options"],function(t){mu.prototype[t]=function(r,n){return this.request(ku(n||{},{method:t,url:r,data:(n||{}).data}))}});Ke.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(ku(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}mu.prototype[t]=r(),mu.prototype[t+"Form"]=r(!0)});let jz=class QP{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Wf(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new QP(function(a){t=a}),cancel:t}}};function wz(e){return function(r){return e.apply(null,r)}}function Nz(e){return Ke.isObject(e)&&e.isAxiosError===!0}const jw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jw).forEach(([e,t])=>{jw[t]=e});function eE(e){const t=new mu(e),r=EP(mu.prototype.request,t);return Ke.extend(r,mu.prototype,t,{allOwnKeys:!0}),Ke.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return eE(ku(e,a))},r}const Rr=eE(vx);Rr.Axios=mu;Rr.CanceledError=Wf;Rr.CancelToken=jz;Rr.isCancel=HP;Rr.VERSION=XP;Rr.toFormData=rb;Rr.AxiosError=Cs;Rr.Cancel=Rr.CanceledError;Rr.all=function(t){return Promise.all(t)};Rr.spread=wz;Rr.isAxiosError=Nz;Rr.mergeConfig=ku;Rr.AxiosHeaders=Ya;Rr.formToJSON=e=>VP(Ke.isHTMLForm(e)?new FormData(e):e);Rr.getAdapter=ZP.getAdapter;Rr.HttpStatusCode=jw;Rr.default=Rr;const{Axios:Vse,AxiosError:Gs,CanceledError:Hse,isCancel:Wse,CancelToken:Gse,VERSION:Kse,all:Yse,Cancel:Jse,isAxiosError:Zse,spread:Xse,toFormData:Qse,AxiosHeaders:ere,HttpStatusCode:tre,formToJSON:sre,getAdapter:rre,mergeConfig:nre}=Rr,Ys="https://apiv1.shuletrack.com/api",zl="AIzaSyB6Vd9ueyuXpQNCbSnpjrHLfToa--0VvH8",Dt={LOGIN:`${Ys}/login/`,VERIFY_OTP:`${Ys}/verify-otp/`,REGISTER:`${Ys}/register/`,SCHOOLS:`${Ys}/schools/`,SCHOOL_REGISTRATION:`${Ys}/school-registration/`,PARENTS:`${Ys}/parents/`,DRIVERS:`${Ys}/drivers/`,VEHICLES:`${Ys}/vehicles/`,ROUTES:`${Ys}/schools/`,ROUTE_STOPS:`${Ys}/schools/`,ROUTE_ASSIGNMENTS:`${Ys}/route-assignments/`,STAFF:`${Ys}/staff/`,SCHOOLS_ROLES:`${Ys}/schools-roles`,STUDENTS:`${Ys}/students/`,TRIPS:`${Ys}/trips/`,GRADES:`${Ys}/grades/`,PREFERENCES:`${Ys}/preferences/`,NOTIFICATIONS:`${Ys}/alerts/`,NOTIFICATIONS_CREATE:`${Ys}/alerts/`,CSV_UPLOAD:`${Ys}/csv-upload/`,REPORTS:`${Ys}/reports/`,SUBSCRIPTION_PLANS:`${Ys}/subscription-plans/`,CONTACT_MESSAGES:`${Ys}/contact-messages/`,SCHOOL_SUBSCRIPTIONS:`${Ys}/school-subscriptions/`,INVOICES:`${Ys}/invoices/`,ACTIVATE_SCHOOL:`${Ys}/activate-school/`,ALL_USERS:`${Ys}/all-users/`,DELETE_USER:`${Ys}/delete-user/`,RESTORE_USER:`${Ys}/restore-user/`},Gf=async(e,t={},r=3,n=1e3)=>{var i,o,l;let a=null;for(let c=0;c<=r;c++)try{const d=await fetch(e,t);if(d.ok)return d;if(d.status===429){const p=((o=(i=(await d.json().catch(()=>({}))).detail)==null?void 0:i.match(/(\d+) seconds?/))==null?void 0:o[1])||20;if(c<r){await new Promise(f=>setTimeout(f,parseInt(p)*1e3));continue}else throw new Error(`Rate limited. Please wait ${p} seconds before trying again.`)}const u=await d.json().catch(()=>({}));throw new Error(u.message||`HTTP error! status: ${d.status}`)}catch(d){if(a=d,!((l=d.message)!=null&&l.includes("Rate limited"))&&c<r){const u=n*Math.pow(2,c);await new Promise(h=>setTimeout(h,u));continue}throw d}throw a||new Error("Request failed after all retries")},Sz=1,_z=1e6;let xj=0;function Cz(){return xj=(xj+1)%Number.MAX_SAFE_INTEGER,xj.toString()}const gj=new Map,SC=e=>{if(gj.has(e))return;const t=setTimeout(()=>{gj.delete(e),up({type:"REMOVE_TOAST",toastId:e})},_z);gj.set(e,t)},kz=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Sz)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?SC(r):e.toasts.forEach(n=>{SC(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},xv=[];let gv={toasts:[]};function up(e){gv=kz(gv,e),xv.forEach(t=>{t(gv)})}function Hs({...e}){const t=Cz(),r=a=>up({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>up({type:"DISMISS_TOAST",toastId:t});return up({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function mr(){const[e,t]=g.useState(gv);return g.useEffect(()=>(xv.push(t),()=>{const r=xv.indexOf(t);r>-1&&xv.splice(r,1)}),[e]),{...e,toast:Hs,dismiss:r=>up({type:"DISMISS_TOAST",toastId:r})}}const ns={success:(e,t)=>{Hs({title:e,description:t,variant:"default"})},error:(e,t)=>{Hs({title:e,description:t,variant:"destructive"})},warning:(e,t)=>{Hs({title:e,description:t,variant:"warning"})},info:(e,t)=>{Hs({title:e,description:t,variant:"default"})}};let Az=()=>{q5.dispatch(rE()),window.location.href="/login"};const Pz=(e,t={})=>{const{showToast:r=!0,component:n,action:a}=t;if(e instanceof Gs){if(!e.response)throw r&&ns.error("Network Error","Please check your connection"),new Error("Network error - please check your connection");const i=e.response.status,o=e.response.data;switch(i){case 400:throw r&&ns.error("Error Trying to Make The Request",o.message||o.error||"Invalid request"),new Error(o.message||o.error||"Bad request");case 401:Az();return;case 403:throw r&&ns.error("Forbidden","You don't have permission"),new Error("Forbidden - you don't have permission");case 404:throw r&&ns.error("Not Found","Resource not found"),new Error("Resource not found");case 500:throw r&&ns.error("Server Error","Please try again later"),new Error("Server error - please try again later");default:throw r&&ns.error("Error",o.message||"An error occurred"),new Error(o.message||"An error occurred")}}throw r&&ns.error("Error",e instanceof Error?e.message:"An unexpected error occurred"),e};class Xm extends Error{}Xm.prototype.name="InvalidTokenError";function Ez(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function Lz(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Ez(t)}catch{return atob(t)}}function Tz(e,t){if(typeof e!="string")throw new Xm("Invalid token specified: must be a string");t||(t={});const r=t.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw new Xm(`Invalid token specified: missing part #${r+1}`);let a;try{a=Lz(n)}catch(i){throw new Xm(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new Xm(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}const Rg=e=>{try{const t=Tz(e),r=Date.now()/1e3;return t.exp<r}catch{return!0}},tE=()=>{let e=localStorage.getItem("token");if(!e)try{const t=localStorage.getItem("persist:auth");if(t){const r=JSON.parse(t);if(r.token){const n=JSON.parse(r.token);e=typeof n=="string"?n:JSON.stringify(n)}}}catch{}return e},hp=()=>{localStorage.removeItem("persist:auth"),localStorage.removeItem("schoolId"),localStorage.removeItem("token")},Rz={timeout:3e4,baseURL:Ys},Iz={"/parents":{timeout:45e3},"/students":{timeout:45e3}},Fz=(e=Rz)=>{const t=Rr.create({baseURL:e.baseURL,timeout:e.timeout,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});return t.interceptors.request.use(r=>{const n=r.url||"",a=Iz[n];return a&&(r.timeout=a.timeout||e.timeout),r}),t},Dz=e=>(e.interceptors.request.use(t=>{const r=tE();return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t)),e),Tt=Fz();Dz(Tt);let hh=!1;Tt.interceptors.response.use(e=>e,e=>{var t,r;return((t=e.response)==null?void 0:t.status)===401&&!hh?(hh=!0,hp(),setTimeout(()=>{hh=!1},1e3),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(e)):((r=e.response)==null?void 0:r.status)===403&&!hh?(hh=!0,hp(),setTimeout(()=>{hh=!1},1e3),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(e)):(Pz(e),Promise.reject(e))});const Oz=()=>tE(),Mz=()=>{try{const e=localStorage.getItem("persist:auth");if(e){const t=JSON.parse(e);return JSON.parse(t.user||"null")}}catch{}return null},$z={user:null,token:null,loading:!1,error:null,userId:null,verificationStatus:"idle",isInitialized:!1,hasLoggedInBefore:!1},Bz=e=>{const t=e.school_subscription;if(!t||t.school_to_pay||t.parents_to_pay)return null;if(!t.school_to_pay&&!t.parents_to_pay&&t.status!=="active"){let r="Access denied. ";switch(t.status){case"suspended":r+="Your school subscription has been suspended due to payment issues. Please contact your school administrator to resolve this.";break;case"expired":r+="Your school subscription has expired. Please contact your school administrator to renew the subscription.";break;case"cancelled":r+="Your school subscription has been cancelled. Please contact your school administrator to reactivate the subscription.";break;case"pending":r+="Your school subscription is pending activation. Please contact your school administrator.";break;default:r+=`Your school subscription is ${t.status}. Please contact your school administrator to resolve payment issues.`}return r}return null},vv=Ct("auth/login",async(e,{rejectWithValue:t})=>new Promise((r,n)=>{const a=new XMLHttpRequest;a.open("POST",Dt.LOGIN,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Accept","application/json"),a.onload=function(){var i;if(a.status>=200&&a.status<300)try{const o=JSON.parse(a.responseText);if((i=o.data)!=null&&i.token){const{token:l,user:c}=o.data,d=Bz(c);if(d){n(t(d));return}r({token:l,user:c})}else n(t("Invalid response from server"))}catch{n(t("Failed to parse server response"))}else try{const o=JSON.parse(a.responseText);n(t(o.message||"Login failed. Please try again."))}catch{n(t("Login failed. Please try again."))}},a.onerror=function(){n(t("Network error occurred"))},a.send(JSON.stringify(e))})),vj=Ct("auth/verifyOTP",async(e,{rejectWithValue:t})=>{var r,n;try{return(await Tt.post(Dt.VERIFY_OTP,e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"OTP verification failed")}}),yj=Ct("auth/register",async(e,{rejectWithValue:t})=>{var r,n,a;try{const i=await Tt.post(Dt.REGISTER,e);if((r=i.data.data)!=null&&r.token){const{token:o,user:l}=i.data.data;return{token:o,user:l}}else return t("Invalid response from server")}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Registration failed")}}),sE=Yr({name:"auth",initialState:$z,reducers:{logout:e=>{e.user=null,e.token=null,e.userId=null,e.verificationStatus="idle",e.isInitialized=!0,hp()},clearError:e=>{e.error=null},resetVerificationStatus:e=>{e.verificationStatus="idle"},checkTokenExpiration:e=>{e.token&&Rg(e.token)&&(e.user=null,e.token=null,e.userId=null,e.verificationStatus="idle",e.isInitialized=!0,hp())},initializeAuth:e=>{const t=Oz(),r=Mz();if(t&&r&&!Rg(t))e.token=t,e.user=r,e.hasLoggedInBefore=!0;else{t&&Rg(t)&&hp();const n=localStorage.getItem("hasLoggedInBefore")==="true";e.hasLoggedInBefore=n,e.token=null,e.user=null,e.userId=null,e.verificationStatus="idle"}e.isInitialized=!0}},extraReducers:e=>{e.addCase("persist/REHYDRATE",(t,r)=>{var n;if((n=r.payload)!=null&&n.auth){const{token:a,user:i}=r.payload.auth;a&&i&&!Rg(a)?(t.token=a,t.user=i,t.hasLoggedInBefore=!0):(t.token=null,t.user=null,t.hasLoggedInBefore=!1)}t.isInitialized=!0}).addCase(vv.pending,t=>{t.loading=!0,t.error=null}).addCase(vv.fulfilled,(t,r)=>{t.loading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isInitialized=!0,t.hasLoggedInBefore=!0,localStorage.setItem("token",r.payload.token),localStorage.setItem("hasLoggedInBefore","true")}).addCase(vv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Login failed. Please try again.",t.isInitialized=!0}).addCase(vj.pending,t=>{t.loading=!0,t.error=null}).addCase(vj.fulfilled,(t,r)=>{t.loading=!1,t.user=r.payload.user,t.token=r.payload.token,t.verificationStatus="verified",t.isInitialized=!0,t.hasLoggedInBefore=!0,localStorage.setItem("token",r.payload.token),localStorage.setItem("hasLoggedInBefore","true")}).addCase(vj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"OTP verification failed",t.verificationStatus="failed",t.isInitialized=!0}).addCase(yj.pending,t=>{t.loading=!0,t.error=null}).addCase(yj.fulfilled,(t,r)=>{t.loading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isInitialized=!0,t.hasLoggedInBefore=!0,localStorage.setItem("token",r.payload.token),localStorage.setItem("hasLoggedInBefore","true")}).addCase(yj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Registration failed",t.isInitialized=!0})}}),{logout:rE,clearError:_C,checkTokenExpiration:zz,initializeAuth:Uz}=sE.actions,qz=sE.reducer,Vz={schools:[],loading:!1,error:null,registrationLoading:!1,registrationError:null,registrationSuccess:!1},Ul=Ct("schools/fetchSchools",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await Tt.get(Dt.SCHOOLS);return!o.data||!Array.isArray(o.data)?t("Invalid response format from server"):o.data}catch(o){const l=o;return((r=l.response)==null?void 0:r.status)===401||((n=l.response)==null?void 0:n.status)===403?t("Authentication failed"):l.response?t(((i=(a=l.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch schools"):t("Network error - please check your connection")}}),yv=Ct("schools/registerSchool",async(e,{rejectWithValue:t})=>{var r,n;try{return(await Tt.post(Dt.SCHOOL_REGISTRATION,e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to register school")}}),nE=Yr({name:"schools",initialState:Vz,reducers:{clearSchoolsError:e=>{e.error=null},clearRegistrationError:e=>{e.registrationError=null},clearRegistrationSuccess:e=>{e.registrationSuccess=!1}},extraReducers:e=>{e.addCase(Ul.pending,t=>{t.loading=!0,t.error=null}).addCase(Ul.fulfilled,(t,r)=>{t.loading=!1,t.schools=r.payload}).addCase(Ul.rejected,(t,r)=>{t.loading=!1;const n=r.payload||"Failed to fetch schools";n.includes("Authentication failed")||(t.error=n)}).addCase(yv.pending,t=>{t.registrationLoading=!0,t.registrationError=null,t.registrationSuccess=!1}).addCase(yv.fulfilled,t=>{t.registrationLoading=!1,t.registrationSuccess=!0}).addCase(yv.rejected,(t,r)=>{t.registrationLoading=!1,t.registrationError=r.payload||"Failed to register school"})}}),{clearSchoolsError:CC}=nE.actions,Hz=nE.reducer,Wz={parents:[],loading:!1,error:null},bv=Ct("parents/registerParent",async(e,{rejectWithValue:t})=>{var r,n;try{const a={user_data:{first_name:e.user.first_name,last_name:e.user.last_name,email:e.user.email,phone_number:e.user.phone_number,password:e.user.password,confirm_password:e.user.confirm_password,user_type:e.user.user_type,profile_image:e.user.profile_image,user_phone_number:e.user.user_phone_number},address:e.address,emergency_contact:e.emergency_contact,school:e.school,preferred_contact_method:e.preferred_contact_method,secondary_phone:e.secondary_phone,authorized_pickup_persons:e.authorized_pickup_persons};return(await Tt.post(Dt.PARENTS,a)).data}catch(a){if(a instanceof Gs){if((r=a.response)!=null&&r.data){const i=a.response.data,o=JSON.stringify(i);return t(o)}return(n=a.response)!=null&&n.status?t(`Server error (${a.response.status})`):t("Network error - please check your connection")}return t(a instanceof Error?a.message:"Failed to register parent")}}),Vn=Ct("parents/fetchParents",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Dt.PARENTS;a&&(i+=`?school=${a}`);const o=Date.now();i+=i.includes("?")?`&_t=${o}`:`?_t=${o}`;const l=await Tt.get(i);return!l.data||!Array.isArray(l.data)?t("Invalid response format from server"):l.data}catch(a){if(a instanceof Gs){if((r=a.response)!=null&&r.data){const i=a.response.data;return typeof i=="object"&&i.message?t(i.message):t(JSON.stringify(i))}return(n=a.response)!=null&&n.status?t(`Server error (${a.response.status})`):t("Network error - please check your connection")}return t(a instanceof Error?a.message:"Failed to fetch parents")}}),bj=Ct("parents/fetchParentById",async({schoolId:e,parentId:t},{rejectWithValue:r})=>{var n,a;try{const i=await Tt.get(`${Dt.PARENTS}${t}/`);return i.data.data||i.data}catch(i){if(i instanceof Gs){if((n=i.response)!=null&&n.data){const o=i.response.data;return typeof o=="object"&&o.message?r(o.message):r(JSON.stringify(o))}return(a=i.response)!=null&&a.status?r(`Server error (${i.response.status})`):r("Network error - please check your connection")}return r(i instanceof Error?i.message:"Failed to fetch parent")}}),jv=Ct("parents/updateParent",async({id:e,data:t},{rejectWithValue:r})=>{var n,a;try{const i=await Tt.patch(`${Dt.PARENTS}${e}/`,t);return i.data.data||i.data}catch(i){if(i instanceof Gs){if((n=i.response)!=null&&n.data){const o=i.response.data;return typeof o=="object"&&o.message?r(o.message):r(JSON.stringify(o))}return(a=i.response)!=null&&a.status?r(`Server error (${i.response.status})`):r("Network error - please check your connection")}return r(i instanceof Error?i.message:"Failed to update parent")}}),wv=Ct("parents/deleteParent",async(e,{rejectWithValue:t})=>{var r,n;try{await Tt.delete(`${Dt.PARENTS}${e}/`)}catch(a){if(a instanceof Gs){if((r=a.response)!=null&&r.data){const i=a.response.data;return typeof i=="object"&&i.message?t(i.message):t(JSON.stringify(i))}return(n=a.response)!=null&&n.status?t(`Server error (${a.response.status})`):t("Network error - please check your connection")}return t(a instanceof Error?a.message:"Failed to delete parent")}}),Gz=Yr({name:"parents",initialState:Wz,reducers:{clearParentsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(bv.pending,t=>{t.loading=!0,t.error=null}).addCase(bv.fulfilled,(t,r)=>{t.loading=!1,t.parents.push(r.payload)}).addCase(bv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to register parent"}).addCase(Vn.pending,t=>{t.loading=!0,t.error=null}).addCase(Vn.fulfilled,(t,r)=>{t.loading=!1,t.parents=r.payload}).addCase(Vn.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch parents"}).addCase(bj.pending,t=>{t.loading=!0,t.error=null}).addCase(bj.fulfilled,(t,r)=>{t.loading=!1;const n=t.parents.findIndex(a=>a.id===r.payload.id);n!==-1?t.parents[n]=r.payload:t.parents.push(r.payload)}).addCase(bj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(jv.pending,t=>{t.loading=!0,t.error=null}).addCase(jv.fulfilled,(t,r)=>{t.loading=!1;const n=t.parents.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.parents[n]=r.payload)}).addCase(jv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(wv.pending,t=>{t.loading=!0,t.error=null}).addCase(wv.fulfilled,(t,r)=>{t.loading=!1,t.parents=t.parents.filter(n=>n.id!==r.meta.arg)}).addCase(wv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),Kz=Gz.reducer,Yz={drivers:[],loading:!1,error:null},Nv=Ct("drivers/addDriver",async(e,{rejectWithValue:t})=>{var r;try{return(await Tt.post(Dt.DRIVERS,e)).data.data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add driver"}))}}),Hn=Ct("drivers/fetchDrivers",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await Tt.get(Dt.DRIVERS);if(Array.isArray(a.data))return a.data;if(a.data.data&&Array.isArray(a.data.data))return a.data.data;throw new Error("Invalid response format")}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch drivers")}}),Sv=Ct("drivers/deleteDriver",async(e,{rejectWithValue:t})=>{var r,n;try{return await Tt.delete(`${Dt.DRIVERS}${e}/`),e}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete driver"):t("Failed to delete driver")}}),_v=Ct("drivers/updateDriver",async({id:e,data:t},{rejectWithValue:r})=>{var n;try{const a=await Tt.put(`${Dt.DRIVERS}${e}/`,t);return a.data.data||a.data}catch(a){return r(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update driver"}))}}),Jz=Yr({name:"drivers",initialState:Yz,reducers:{clearDriversError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Nv.pending,t=>{t.loading=!0,t.error=null}).addCase(Nv.fulfilled,(t,r)=>{t.loading=!1,t.drivers.push(r.payload)}).addCase(Nv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add driver"}).addCase(Hn.pending,t=>{t.loading=!0,t.error=null}).addCase(Hn.fulfilled,(t,r)=>{t.loading=!1,t.drivers=r.payload}).addCase(Hn.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch drivers"}).addCase(Sv.pending,t=>{t.loading=!0,t.error=null}).addCase(Sv.fulfilled,(t,r)=>{t.loading=!1,t.drivers=t.drivers.filter(n=>n.id!==r.payload)}).addCase(Sv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete driver"}).addCase(_v.pending,t=>{t.loading=!0,t.error=null}).addCase(_v.fulfilled,(t,r)=>{t.loading=!1;const n=t.drivers.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.drivers[n]=r.payload)}).addCase(_v.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update driver"})}}),Zz=Jz.reducer,Xz={vehicles:[],loading:!1,error:null},pu=Ct("vehicles/fetchVehicles",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Dt.VEHICLES;a&&(i+=`?school=${a}`);const o=await Tt.get(i);return Array.isArray(o.data)?o.data.filter(c=>!(!c||typeof c!="object")):o.data&&o.data.data&&Array.isArray(o.data.data)?o.data.data:[]}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch vehicles")}}),Cv=Ct("vehicles/addVehicle",async(e,{rejectWithValue:t})=>{var r;try{return(await Tt.post(Dt.VEHICLES,e)).data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add vehicle"}))}}),kv=Ct("vehicles/updateVehicle",async({id:e,data:t},{rejectWithValue:r})=>{var n;try{return(await Tt.put(`${Dt.VEHICLES}${e}/`,t)).data}catch(a){return r(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update vehicle"}))}}),Av=Ct("vehicles/deleteVehicle",async(e,{rejectWithValue:t,getState:r})=>{var n,a;try{const o=r().auth.token,l=await Tt.delete(`${Dt.VEHICLES}${e}/`);return e}catch(i){return i instanceof Gs?t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to delete vehicle"):t("Failed to delete vehicle")}}),Qz=Yr({name:"vehicles",initialState:Xz,reducers:{clearVehiclesError:e=>{e.error=null}},extraReducers:e=>{e.addCase(pu.pending,t=>{t.loading=!0,t.error=null}).addCase(pu.fulfilled,(t,r)=>{t.loading=!1,t.vehicles=r.payload}).addCase(pu.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch vehicles"}).addCase(Cv.pending,t=>{t.loading=!0,t.error=null}).addCase(Cv.fulfilled,(t,r)=>{t.loading=!1,t.vehicles.push(r.payload)}).addCase(Cv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add vehicle"}).addCase(kv.pending,t=>{t.loading=!0,t.error=null}).addCase(kv.fulfilled,(t,r)=>{t.loading=!1;const n=t.vehicles.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.vehicles[n]=r.payload)}).addCase(kv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update vehicle"}).addCase(Av.pending,t=>{t.loading=!0,t.error=null}).addCase(Av.fulfilled,(t,r)=>{t.loading=!1,t.vehicles=t.vehicles.filter(n=>n.id!==r.payload)}).addCase(Av.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete vehicle"})}}),eU=Qz.reducer,tU={routes:[],allRouteStops:[],loading:!1,error:null},Pv=Ct("routes/addRoute",async(e,{rejectWithValue:t})=>{var r;try{const n=e.school;return(await Tt.post(`${Dt.ROUTES}${n}/routes/`,e)).data.data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add route"}))}}),ho=Ct("routes/fetchRoutes",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;if(!a)throw new Error("School ID is required");const i=`${Dt.ROUTES}${a}/routes/`,o=await Tt.get(i);if(Array.isArray(o.data))return o.data;if(o.data.data&&Array.isArray(o.data.data))return o.data.data;throw new Error("Invalid response format")}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch routes")}}),Ev=Ct("routes/deleteRoute",async(e,{rejectWithValue:t})=>{var r,n;try{return await Tt.delete(`/routes/${e}/`),e}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete route"):t("Failed to delete route")}}),fp=Ct("routes/updateRoute",async({id:e,routeData:t},{rejectWithValue:r})=>{var n;try{const a=t.school,i=await Tt.put(`/routes/${e}/`,t);return{...i.data.data||i.data,id:e}}catch(a){return r(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update route"}))}}),Lv=Ct("routes/addRouteStop",async(e,{rejectWithValue:t})=>{var r;try{return(await Tt.post(`/routes/${e.route}/stops/`,e)).data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add route stop"}))}}),Gh=Ct("routes/fetchRouteStops",async(e,{rejectWithValue:t})=>{var r,n;try{return(await Tt.get(`/routes/${e}/stops/`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch route stops")}}),mp=Ct("routes/fetchAllRouteStops",async(e,{rejectWithValue:t})=>{var r,n;try{return(await Tt.get(`/schools/${e}/route-stops/`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch all route stops")}}),Tv=Ct("routes/updateRouteStop",async({routeId:e,stopId:t,stopData:r},{rejectWithValue:n})=>{var a;try{return(await Tt.put(`/routes/${e}/stops/${t}/`,r)).data}catch(i){return n(JSON.stringify(((a=i.response)==null?void 0:a.data)||{message:"Failed to update route stop"}))}}),Rv=Ct("routes/deleteRouteStop",async({routeId:e,stopId:t},{rejectWithValue:r})=>{var n,a;try{return await Tt.delete(`/routes/${e}/stops/${t}/`),t}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to delete route stop")}}),sU=Yr({name:"routes",initialState:tU,reducers:{clearRoutesError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Pv.pending,t=>{t.loading=!0,t.error=null}).addCase(Pv.fulfilled,(t,r)=>{t.loading=!1,r.payload&&t.routes.push(r.payload)}).addCase(Pv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add route"}).addCase(ho.pending,t=>{t.loading=!0,t.error=null}).addCase(ho.fulfilled,(t,r)=>{t.loading=!1,t.routes=r.payload.filter(n=>n!=null)}).addCase(ho.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch routes"}).addCase(Ev.pending,t=>{t.loading=!0,t.error=null}).addCase(Ev.fulfilled,(t,r)=>{t.loading=!1,t.routes=t.routes.filter(n=>n&&n.id!==r.payload)}).addCase(Ev.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete route"}).addCase(fp.pending,t=>{t.loading=!0,t.error=null}).addCase(fp.fulfilled,(t,r)=>{if(t.loading=!1,r.payload&&r.payload.id){const n=t.routes.findIndex(a=>a&&a.id===r.payload.id);n!==-1&&(t.routes[n]=r.payload)}}).addCase(fp.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update route"}).addCase(Lv.pending,t=>{t.loading=!0,t.error=null}).addCase(Lv.fulfilled,(t,r)=>{t.loading=!1}).addCase(Lv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add route stop"}).addCase(Gh.pending,t=>{t.loading=!0,t.error=null}).addCase(Gh.fulfilled,(t,r)=>{t.loading=!1}).addCase(Gh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch route stops"}).addCase(mp.pending,t=>{t.loading=!0,t.error=null}).addCase(mp.fulfilled,(t,r)=>{t.loading=!1,t.allRouteStops=r.payload}).addCase(mp.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch all route stops"}).addCase(Tv.pending,t=>{t.loading=!0,t.error=null}).addCase(Tv.fulfilled,t=>{t.loading=!1}).addCase(Tv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update route stop"}).addCase(Rv.pending,t=>{t.loading=!0,t.error=null}).addCase(Rv.fulfilled,t=>{t.loading=!1}).addCase(Rv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete route stop"})}}),rU=sU.reducer,nU={assignments:[],loading:!1,error:null},Iv=Ct("routeAssignments/createAssignment",async(e,{rejectWithValue:t})=>{var r;try{return(await Tt.post(Dt.ROUTE_ASSIGNMENTS,e)).data.data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to create route assignment"}))}}),Kh=Ct("routeAssignments/fetchAssignments",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Dt.ROUTE_ASSIGNMENTS;a&&(i+=`?school=${a}`);const o=await Tt.get(i);if(Array.isArray(o.data))return o.data;if(o.data.data&&Array.isArray(o.data.data))return o.data.data;throw new Error("Invalid response format")}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch route assignments")}}),jj=Ct("routeAssignments/updateAssignment",async({id:e,data:t},{rejectWithValue:r})=>{var n;try{return(await Tt.put(`${Dt.ROUTE_ASSIGNMENTS}${e}/`,t)).data.data}catch(a){return r(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update route assignment"}))}}),wj=Ct("routeAssignments/deleteAssignment",async(e,{rejectWithValue:t})=>{var r;try{return await Tt.delete(`${Dt.ROUTE_ASSIGNMENTS}${e}/`),e}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to delete route assignment"}))}}),aU=Yr({name:"routeAssignments",initialState:nU,reducers:{clearRouteAssignmentsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Iv.pending,t=>{t.loading=!0,t.error=null}).addCase(Iv.fulfilled,(t,r)=>{t.loading=!1,t.assignments.push(r.payload)}).addCase(Iv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to create route assignment"}).addCase(Kh.pending,t=>{t.loading=!0,t.error=null}).addCase(Kh.fulfilled,(t,r)=>{t.loading=!1,t.assignments=r.payload}).addCase(Kh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch route assignments"}).addCase(jj.pending,t=>{t.loading=!0,t.error=null}).addCase(jj.fulfilled,(t,r)=>{t.loading=!1;const n=t.assignments.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.assignments[n]=r.payload)}).addCase(jj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update route assignment"}).addCase(wj.pending,t=>{t.loading=!0,t.error=null}).addCase(wj.fulfilled,(t,r)=>{t.loading=!1,t.assignments=t.assignments.filter(n=>n.id!==r.payload)}).addCase(wj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete route assignment"})}}),iU=aU.reducer,oU={staff:[],loading:!1,error:null},xu=Ct("staff/fetchStaff",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Dt.STAFF;return a&&(i+=`?school=${a}`),(await Tt.get(i)).data}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch staff"):t("Failed to fetch staff")}}),Yh=Ct("staff/addStaff",async(e,{rejectWithValue:t})=>{var r;try{return(await Tt.post(Dt.STAFF,e)).data}catch(n){return n instanceof Gs?t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add staff"})):t("Failed to add staff")}}),Nj=Ct("staff/updateStaff",async({id:e,staffData:t},{rejectWithValue:r})=>{var n,a;try{return(await Tt.patch(`${Dt.STAFF}${e}/`,t)).data}catch(i){return i instanceof Gs?r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update staff"):r("Failed to update staff")}}),Sj=Ct("staff/deleteStaff",async(e,{rejectWithValue:t})=>{var r,n;try{return await Tt.delete(`${Dt.STAFF}${e}/`),e}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete staff"):t("Failed to delete staff")}}),lU=Yr({name:"staff",initialState:oU,reducers:{clearStaffError:e=>{e.error=null}},extraReducers:e=>{e.addCase(xu.pending,t=>{t.loading=!0,t.error=null}).addCase(xu.fulfilled,(t,r)=>{t.loading=!1,t.staff=r.payload}).addCase(xu.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch staff"}).addCase(Yh.pending,t=>{t.loading=!0,t.error=null}).addCase(Yh.fulfilled,(t,r)=>{t.loading=!1,t.staff.push(r.payload)}).addCase(Yh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add staff"}).addCase(Nj.pending,t=>{t.loading=!0,t.error=null}).addCase(Nj.fulfilled,(t,r)=>{t.loading=!1;const n=t.staff.findIndex(a=>a.employee_id===r.payload.employee_id);n!==-1&&(t.staff[n]=r.payload)}).addCase(Nj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update staff"}).addCase(Sj.pending,t=>{t.loading=!0,t.error=null}).addCase(Sj.fulfilled,(t,r)=>{t.loading=!1,t.staff=t.staff.filter(n=>n.employee_id!==r.payload)}).addCase(Sj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete staff"})}}),cU=lU.reducer,dU={name:"school_admin",description:"Full administrative access for school management",school:1,permissions:["manage_staff","manage_students","manage_transport","manage_security","view_reports","manage_finance","manage_attendance","manage_timetable","manage_exams","manage_parents","manage_vehicles","manage_routes","manage_trips","manage_grades","manage_settings"],is_system_role:!1},uU={name:"teacher",description:"Teacher access for classroom management",school:1,permissions:["manage_students","view_reports","manage_attendance","manage_timetable","manage_exams","manage_grades"],is_system_role:!1},hU={name:"driver",description:"Driver access for transport management",school:1,permissions:["manage_transport","manage_trips","view_reports"],is_system_role:!1},fU={name:"security",description:"Security personnel access",school:1,permissions:["manage_security","view_reports"],is_system_role:!1},mU=e=>[{...dU,school:e},{...uU,school:e},{...hU,school:e},{...fU,school:e}],pU={roles:[],selectedRole:null,loading:!1,error:null},gu=Ct("roles/fetchRoles",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await Tt.get(`${Dt.SCHOOLS_ROLES}?school=${e}`);return a.data.data||a.data}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch roles"):t("Failed to fetch roles")}}),_j=Ct("roles/fetchRoleById",async({schoolId:e,roleId:t},{rejectWithValue:r})=>{var n,a;try{const i=await Tt.get(`${Dt.SCHOOLS_ROLES}/${t}/`);return i.data.data||i.data}catch(i){return i instanceof Gs?r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch role"):r("Failed to fetch role")}}),Jh=Ct("roles/createRole",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await Tt.post(`${Dt.SCHOOLS_ROLES}/`,e);return a.data.data||a.data}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create role"):t("Failed to create role")}}),Cj=Ct("roles/updateRole",async({id:e,data:t},{rejectWithValue:r})=>{var n,a;try{const i=await Tt.put(`${Dt.SCHOOLS_ROLES}/${e}/`,t);return i.data.data||i.data}catch(i){return i instanceof Gs?r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update role"):r("Failed to update role")}}),kj=Ct("roles/deleteRole",async(e,{rejectWithValue:t})=>{var r,n;try{await Tt.delete(`${Dt.SCHOOLS_ROLES}/${e}/`)}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete role"):t("Failed to delete role")}}),Zh=Ct("roles/createDefaultRoles",async(e,{rejectWithValue:t})=>{var r,n;try{const a=mU(e),i=[];for(const o of a)try{const l=await Tt.post(`${Dt.SCHOOLS_ROLES}/`,o);i.push(l.data.data||l.data)}catch{}return i}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create default roles"):t("Failed to create default roles")}}),xU=Yr({name:"roles",initialState:pU,reducers:{clearSelectedRole:e=>{e.selectedRole=null}},extraReducers:e=>{e.addCase(gu.pending,t=>{t.loading=!0,t.error=null}).addCase(gu.fulfilled,(t,r)=>{t.loading=!1,t.roles=r.payload}).addCase(gu.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(_j.pending,t=>{t.loading=!0,t.error=null}).addCase(_j.fulfilled,(t,r)=>{t.loading=!1,t.selectedRole=r.payload}).addCase(_j.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Jh.pending,t=>{t.loading=!0,t.error=null}).addCase(Jh.fulfilled,(t,r)=>{t.loading=!1,t.roles.push(r.payload)}).addCase(Jh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Cj.pending,t=>{t.loading=!0,t.error=null}).addCase(Cj.fulfilled,(t,r)=>{var a;t.loading=!1;const n=t.roles.findIndex(i=>i.id===r.payload.id);n!==-1&&(t.roles[n]=r.payload),((a=t.selectedRole)==null?void 0:a.id)===r.payload.id&&(t.selectedRole=r.payload)}).addCase(Cj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(kj.pending,t=>{t.loading=!0,t.error=null}).addCase(kj.fulfilled,(t,r)=>{var n;t.loading=!1,t.roles=t.roles.filter(a=>a.id!==r.meta.arg),((n=t.selectedRole)==null?void 0:n.id)===r.meta.arg&&(t.selectedRole=null)}).addCase(kj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Zh.pending,t=>{t.loading=!0,t.error=null}).addCase(Zh.fulfilled,(t,r)=>{t.loading=!1,t.roles.push(...r.payload)}).addCase(Zh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),gU=xU.reducer,vU={students:[],loading:!1,error:null},Fv=Ct("students/createStudent",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await Tt.post(Dt.STUDENTS,e),i=((r=a.data)==null?void 0:r.data)||a.data;return!i||typeof i!="object"?t("Invalid student data received from server"):!i.first_name||!i.last_name?t("Student data missing required fields"):i}catch(a){return a instanceof Gs?t(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to create student"})):t("Failed to create student")}}),fa=Ct("students/fetchStudents",async(e,{rejectWithValue:t})=>{var r,n,a;try{const i=typeof e=="object"?e.schoolId:void 0;let o=Dt.STUDENTS;i&&(o+=`?school=${i}`);const l=await Tt.get(o),c=((r=l.data)==null?void 0:r.data)||l.data;return Array.isArray(c)?c:[]}catch(i){return i instanceof Gs?t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch students"):t("Failed to fetch students")}}),pp=Ct("students/updateStudent",async({id:e,data:t},{rejectWithValue:r})=>{var n,a;try{const i=await Tt.put(`${Dt.STUDENTS}${e}/`,t),o=((n=i.data)==null?void 0:n.data)||i.data;return!o||typeof o!="object"?r("Invalid student data received from server"):o}catch(i){return i instanceof Gs?r(JSON.stringify(((a=i.response)==null?void 0:a.data)||{message:"Failed to update student"})):r("Failed to update student")}}),xp=Ct("students/deleteStudent",async(e,{rejectWithValue:t})=>{var r;try{return await Tt.delete(`${Dt.STUDENTS}${e}/`),e}catch(n){return n instanceof Gs?t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to delete student"})):t("Failed to delete student")}}),yU=Yr({name:"students",initialState:vU,reducers:{clearStudentsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Fv.pending,t=>{t.loading=!0,t.error=null}).addCase(Fv.fulfilled,(t,r)=>{t.loading=!1,r.payload&&typeof r.payload=="object"&&r.payload.first_name?t.students.push(r.payload):t.error="Invalid student data received"}).addCase(Fv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to create student"}).addCase(fa.pending,t=>{t.loading=!0,t.error=null}).addCase(fa.fulfilled,(t,r)=>{t.loading=!1,t.students=Array.isArray(r.payload)?r.payload:[]}).addCase(fa.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch students"}).addCase(pp.pending,t=>{t.loading=!0,t.error=null}).addCase(pp.fulfilled,(t,r)=>{t.loading=!1;const n=t.students.findIndex(a=>a.id===r.payload.id);n!==-1?t.students[n]=r.payload:t.students.push(r.payload)}).addCase(pp.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update student"}).addCase(xp.pending,t=>{t.loading=!0,t.error=null}).addCase(xp.fulfilled,(t,r)=>{t.loading=!1,t.students=t.students.filter(n=>n.id!==r.payload)}).addCase(xp.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete student"})}}),bU=yU.reducer,U5=void 0,jU={profile:null,loading:!1,error:null},gp=Ct("profile/fetchProfile",async(e,{rejectWithValue:t,getState:r})=>{var n,a;try{const o=r().auth.token;return(await Rr.get(`${U5}/api/user-profile/`,{headers:{Authorization:`Bearer ${o}`}})).data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch profile")}}),Dv=Ct("profile/updateProfile",async(e,{rejectWithValue:t,getState:r})=>{var n,a;try{const o=r().auth.token;return(await Rr.patch(`${U5}/api/user-profile/`,e,{headers:{Authorization:`Bearer ${o}`}})).data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update profile")}}),aE=Ct("profile/logout",async(e,{rejectWithValue:t,getState:r})=>{var n,a;try{const o=r().auth.token;return await Rr.post(`${U5}/api/logout/`,{},{headers:{Authorization:`Bearer ${o}`}}),null}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to logout")}}),wU=Yr({name:"profile",initialState:jU,reducers:{clearProfile:e=>{e.profile=null,e.error=null}},extraReducers:e=>{e.addCase(gp.pending,t=>{t.loading=!0,t.error=null}).addCase(gp.fulfilled,(t,r)=>{t.loading=!1,t.profile=r.payload}).addCase(gp.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Dv.pending,t=>{t.loading=!0,t.error=null}).addCase(Dv.fulfilled,(t,r)=>{t.loading=!1,t.profile=r.payload}).addCase(Dv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(aE.fulfilled,t=>{t.profile=null,t.loading=!1,t.error=null})}}),NU=wU.reducer,kC={stats:{totalStudents:0,totalParents:0,totalStaff:0,totalVehicles:0,totalRoutes:0,activeRoutes:0},loading:!1,error:null,lastUpdated:null},vp=Ct("overview/fetchOverviewData",async({schoolId:e},{rejectWithValue:t,dispatch:r})=>{try{const[n,a,i,o,l]=await Promise.allSettled([r(fa({schoolId:e})).unwrap(),r(Vn({schoolId:e})).unwrap(),r(xu({schoolId:e})).unwrap(),r(pu({schoolId:e})).unwrap(),r(ho({schoolId:e})).unwrap()]),c=n.status==="fulfilled"?n.value:[],d=a.status==="fulfilled"?a.value:[],u=i.status==="fulfilled"?i.value:[],h=o.status==="fulfilled"?o.value:[],p=l.status==="fulfilled"?l.value:[];return{totalStudents:c.length,totalParents:d.length,totalStaff:u.length,totalVehicles:h.length,totalRoutes:p.length,activeRoutes:p.filter(y=>y.is_active).length}}catch{return t("Failed to fetch overview data")}}),SU=Yr({name:"overview",initialState:kC,reducers:{clearOverviewError:e=>{e.error=null},resetOverview:e=>{e.stats=kC.stats,e.lastUpdated=null}},extraReducers:e=>{e.addCase(vp.pending,t=>{t.loading=!0,t.error=null}).addCase(vp.fulfilled,(t,r)=>{t.loading=!1,t.stats=r.payload,t.lastUpdated=new Date().toISOString()}).addCase(vp.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch overview data"})}}),_U=SU.reducer,CU="https://fcm-nhzp.onrender.com";class kU{async getAuthToken(){let t=localStorage.getItem("token");if(!t){const r=localStorage.getItem("persist:auth");if(r)try{const n=JSON.parse(r);t=JSON.parse(n.user||"{}").token}catch{}}return t&&t.startsWith('"')&&t.endsWith('"')&&(t=JSON.parse(t)),t}async getSchoolId(){const t=localStorage.getItem("schoolId");return t?parseInt(t):0}async sendTripNotification(t,r,n){try{const a=await this.getAuthToken(),i=await this.getSchoolId();if(!a||t.length===0)return!1;const o={fcmTokens:t,notification:r,schoolId:i,tripId:n},l=await fetch(`${CU}/sendNotification`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(o)});if(!l.ok){const d=await l.text();throw new Error(`FCM notification failed: ${l.status} - ${d}`)}const c=await l.json();return!0}catch{return!1}}async notifyTripStatusChange(t,r,n){var o,l;const a={scheduled:"Trip has been scheduled",preparing:"Trip is being prepared",ongoing:"Trip is now in progress",completed:"Trip has been completed",cancelled:"Trip has been cancelled",delayed:"Trip has been delayed"},i={title:`Trip Status Update - ${t.route_name||`Route ${t.route}`}`,body:`${a[r]||`Trip status changed to ${r}`}`,data:{tripId:(o=t.id)==null?void 0:o.toString(),routeName:t.route_name||`Route ${t.route}`,driverName:t.driver_name||`Driver ${t.driver}`,vehicleRegistration:t.vehicle_registration||`Vehicle ${t.vehicle}`,status:r,tripType:t.trip_type,scheduledStartTime:t.scheduled_start_time,type:"trip_status_change"}};return this.sendTripNotification(n,i,(l=t.id)==null?void 0:l.toString())}async notifyNewTripCreated(t,r){var a,i;const n={title:"New Trip Created",body:`A new ${t.trip_type} trip has been scheduled for ${t.route_name||`Route ${t.route}`}`,data:{tripId:(a=t.id)==null?void 0:a.toString(),routeName:t.route_name||`Route ${t.route}`,driverName:t.driver_name||`Driver ${t.driver}`,vehicleRegistration:t.vehicle_registration||`Vehicle ${t.vehicle}`,status:t.status,tripType:t.trip_type,scheduledStartTime:t.scheduled_start_time,type:"new_trip_created"}};return this.sendTripNotification(r,n,(i=t.id)==null?void 0:i.toString())}async notifyTripDelay(t,r,n){var i,o;const a={title:`Trip Delayed - ${t.route_name||`Route ${t.route}`}`,body:`The trip has been delayed. Reason: ${r}`,data:{tripId:(i=t.id)==null?void 0:i.toString(),routeName:t.route_name||`Route ${t.route}`,driverName:t.driver_name||`Driver ${t.driver}`,vehicleRegistration:t.vehicle_registration||`Vehicle ${t.vehicle}`,status:"delayed",tripType:t.trip_type,scheduledStartTime:t.scheduled_start_time,delayReason:r,type:"trip_delay"}};return this.sendTripNotification(n,a,(o=t.id)==null?void 0:o.toString())}async notifyTripCancellation(t,r,n){var i,o;const a={title:`Trip Cancelled - ${t.route_name||`Route ${t.route}`}`,body:`The trip has been cancelled. Reason: ${r}`,data:{tripId:(i=t.id)==null?void 0:i.toString(),routeName:t.route_name||`Route ${t.route}`,driverName:t.driver_name||`Driver ${t.driver}`,vehicleRegistration:t.vehicle_registration||`Vehicle ${t.vehicle}`,status:"cancelled",tripType:t.trip_type,scheduledStartTime:t.scheduled_start_time,cancellationReason:r,type:"trip_cancellation"}};return this.sendTripNotification(n,a,(o=t.id)==null?void 0:o.toString())}async notifyTripEmergency(t,r,n){var i,o;const a={title:` EMERGENCY - ${t.route_name||`Route ${t.route}`}`,body:r,data:{tripId:(i=t.id)==null?void 0:i.toString(),routeName:t.route_name||`Route ${t.route}`,driverName:t.driver_name||`Driver ${t.driver}`,vehicleRegistration:t.vehicle_registration||`Vehicle ${t.vehicle}`,status:t.status,tripType:t.trip_type,scheduledStartTime:t.scheduled_start_time,emergencyMessage:r,type:"trip_emergency",priority:"high"}};return this.sendTripNotification(n,a,(o=t.id)==null?void 0:o.toString())}}const yp=new kU;class AU{async getAuthToken(){let t=localStorage.getItem("token");if(!t){const r=localStorage.getItem("persist:auth");if(r)try{const n=JSON.parse(r);t=JSON.parse(n.user||"{}").token}catch(n){console.error("Error parsing persist:auth:",n)}}return t&&t.startsWith('"')&&t.endsWith('"')&&(t=JSON.parse(t)),t}async getSchoolId(){const t=localStorage.getItem("schoolId");return t?parseInt(t):0}async getSchoolFCMTokens(){var t;try{const r=await this.getAuthToken(),n=await this.getSchoolId();if(!r||!n)return console.warn("No auth token or school ID available for FCM token fetch"),[];const a=await Tt.get(`/fcm-tokens/?school=${n}`,{headers:{Authorization:`Bearer ${r}`}});return(((t=a.data)==null?void 0:t.results)||a.data||[]).filter(o=>o.is_active).map(o=>o.token)}catch(r){return console.error("Error fetching FCM tokens:",r),[]}}async getParentFCMTokens(){var t;try{const r=await this.getAuthToken(),n=await this.getSchoolId();if(!r||!n)return console.warn("No auth token or school ID available for FCM token fetch"),[];const a=await Tt.get(`/fcm-tokens/?school=${n}&user_type=parent`,{headers:{Authorization:`Bearer ${r}`}});return(((t=a.data)==null?void 0:t.results)||a.data||[]).filter(o=>o.is_active).map(o=>o.token)}catch(r){return console.error("Error fetching parent FCM tokens:",r),[]}}async getDriverFCMTokens(){var t;try{const r=await this.getAuthToken(),n=await this.getSchoolId();if(!r||!n)return console.warn("No auth token or school ID available for FCM token fetch"),[];const a=await Tt.get(`/fcm-tokens/?school=${n}&user_type=driver`,{headers:{Authorization:`Bearer ${r}`}});return(((t=a.data)==null?void 0:t.results)||a.data||[]).filter(o=>o.is_active).map(o=>o.token)}catch(r){return console.error("Error fetching driver FCM tokens:",r),[]}}async getTripFCMTokens(t){var r;try{const n=await this.getAuthToken(),a=await this.getSchoolId();return!n||!a?(console.warn("No auth token or school ID available for FCM token fetch"),[]):(((r=(await Tt.get(`/trips/${t}/fcm-tokens/`,{headers:{Authorization:`Bearer ${n}`}})).data)==null?void 0:r.tokens)||[]).filter(l=>l.is_active).map(l=>l.token)}catch(n){return console.error("Error fetching trip FCM tokens:",n),[]}}async registerFCMToken(t,r,n="web"){try{const a=await this.getAuthToken(),i=await this.getSchoolId();return!a||!i?(console.warn("No auth token or school ID available for FCM token registration"),!1):(await Tt.post("/fcm-tokens/",{token:t,user_type:r,device_type:n,school:i,is_active:!0},{headers:{Authorization:`Bearer ${a}`}}),!0)}catch(a){return console.error("Error registering FCM token:",a),!1}}async unregisterFCMToken(t){try{const r=await this.getAuthToken();return r?(await Tt.delete(`/fcm-tokens/?token=${encodeURIComponent(t)}`,{headers:{Authorization:`Bearer ${r}`}}),!0):(console.warn("No auth token available for FCM token unregistration"),!1)}catch(r){return console.error("Error unregistering FCM token:",r),!1}}}const iE=new AU,PU={trips:[],loading:!1,error:null},Xh=Ct("trips/fetchTrips",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Dt.TRIPS;a&&(i+=`?school=${a}`);const o=await Tt.get(i);let l;return o.data&&o.data.results?l=o.data.results:o.data&&Array.isArray(o.data)?l=o.data:o.data&&o.data.data&&Array.isArray(o.data.data)?l=o.data.data:l=[],Array.isArray(l)?l.map(d=>{var u,h,p;return{...d,route_name:d.route_name||((u=d.route_details)==null?void 0:u.name)||`Route ${d.route}`,vehicle_registration:d.vehicle_number||((h=d.vehicle_details)==null?void 0:h.license_plate)||`Vehicle ${d.vehicle}`,driver_name:d.driver_name||((p=d.driver_details)==null?void 0:p.full_name)||`Driver ${d.driver}`}}):[]}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch trips"):t("Failed to fetch trips")}}),Ov=Ct("trips/createTrip",async(e,{rejectWithValue:t})=>{var r,n,a,i,o,l,c,d,u;try{try{const j=localStorage.getItem("persist:auth");if(j){const v=JSON.parse(j);let w=JSON.parse(v.token||"null");if(typeof w=="string")try{w=JSON.parse(w)}catch{}}}catch{}let h=null;try{const j=localStorage.getItem("persist:auth");if(j){const v=JSON.parse(j);if(h=JSON.parse(v.token||"null"),typeof h=="string")try{h=JSON.parse(h)}catch{}}}catch{}const p={headers:h?{Authorization:`Bearer ${h}`}:{}},f=await Tt.post(Dt.TRIPS,e,p),y=((r=f.data)==null?void 0:r.data)||f.data,x={...y,route_name:((n=y.route_details)==null?void 0:n.name)||`Route ${y.route}`,vehicle_registration:((a=y.vehicle_details)==null?void 0:a.license_plate)||`Vehicle ${y.vehicle}`,driver_name:((i=y.driver_details)==null?void 0:i.full_name)||`Driver ${y.driver}`};try{const j=await iE.getSchoolFCMTokens();j.length>0&&await yp.notifyNewTripCreated(x,j)}catch(j){console.error("Failed to send trip creation notification:",j)}return x}catch(h){if(h instanceof Gs){const p=(o=h.response)==null?void 0:o.data;return t(p||((c=(l=h.response)==null?void 0:l.data)==null?void 0:c.message)||((u=(d=h.response)==null?void 0:d.data)==null?void 0:u.detail)||"Failed to create trip")}return t("Failed to create trip")}}),Mv=Ct("trips/updateTrip",async({id:e,tripData:t},{rejectWithValue:r,getState:n})=>{var a,i,o,l,c,d,u;try{const p=n().trips.trips.find(j=>j.id===e),f=await Tt.patch(`${Dt.TRIPS}${e}/`,t),y=((a=f.data)==null?void 0:a.data)||f.data,x={...y,route_name:((i=y.route_details)==null?void 0:i.name)||`Route ${y.route}`,vehicle_registration:((o=y.vehicle_details)==null?void 0:o.license_plate)||`Vehicle ${y.vehicle}`,driver_name:((l=y.driver_details)==null?void 0:l.full_name)||`Driver ${y.driver}`};if(t.status&&p&&p.status!==t.status)try{const j=await iE.getSchoolFCMTokens();j.length>0&&await yp.notifyTripStatusChange(x,t.status,j)}catch{}return x}catch(h){if(h instanceof Gs){const p=(c=h.response)==null?void 0:c.data;return r(p||((u=(d=h.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to update trip")}return r("Failed to update trip")}}),$v=Ct("trips/deleteTrip",async(e,{rejectWithValue:t})=>{var r,n;try{return await Tt.delete(`${Dt.TRIPS}${e}/`),e}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete trip"):t("Failed to delete trip")}}),Aj=Ct("trips/sendTripNotification",async({tripId:e,notificationType:t,message:r,fcmTokens:n},{rejectWithValue:a,getState:i})=>{try{const l=i().trips.trips.find(d=>d.id===e);if(!l)return a("Trip not found");let c=!1;switch(t){case"delay":c=await yp.notifyTripDelay(l,r,n);break;case"cancellation":c=await yp.notifyTripCancellation(l,r,n);break;case"emergency":c=await yp.notifyTripEmergency(l,r,n);break;default:return a("Invalid notification type")}return c?!0:a("Failed to send notification")}catch{return a("Failed to send notification")}}),EU=Yr({name:"trips",initialState:PU,reducers:{clearTripsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Xh.pending,t=>{t.loading=!0,t.error=null}).addCase(Xh.fulfilled,(t,r)=>{t.loading=!1,t.trips=Array.isArray(r.payload)?r.payload:[]}).addCase(Xh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch trips"}).addCase(Ov.pending,t=>{}).addCase(Ov.fulfilled,(t,r)=>{t.trips.push(r.payload)}).addCase(Ov.rejected,(t,r)=>{}).addCase(Mv.pending,t=>{}).addCase(Mv.fulfilled,(t,r)=>{const n=t.trips.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.trips[n]=r.payload)}).addCase(Mv.rejected,(t,r)=>{}).addCase($v.pending,t=>{}).addCase($v.fulfilled,(t,r)=>{t.trips=t.trips.filter(n=>n.id!==r.payload)}).addCase($v.rejected,(t,r)=>{}).addCase(Aj.pending,t=>{}).addCase(Aj.fulfilled,t=>{}).addCase(Aj.rejected,(t,r)=>{})}}),LU=EU.reducer,TU={grades:[],loading:!1,error:null},Bv=Ct("grades/createGrade",async(e,{rejectWithValue:t})=>{var r,n;try{return(await Tt.post(Dt.GRADES,e)).data.data}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create grade"):t("Failed to create grade")}}),Ii=Ct("grades/fetchGrades",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=Dt.GRADES;a&&(i+=`?school=${a}`);const o=await Tt.get(i);let l;return o.data&&typeof o.data=="object"?Array.isArray(o.data)?l=o.data:o.data.data&&Array.isArray(o.data.data)?l=o.data.data:o.data.results&&Array.isArray(o.data.results)?l=o.data.results:l=[]:l=[],l}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch grades"):t("Failed to fetch grades")}}),zv=Ct("grades/updateGrade",async({id:e,data:t},{rejectWithValue:r})=>{var n,a;try{return(await Tt.put(`${Dt.GRADES}${e}/`,t)).data.data}catch(i){return i instanceof Gs?r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update grade"):r("Failed to update grade")}}),Uv=Ct("grades/deleteGrade",async(e,{rejectWithValue:t})=>{var r,n;try{return await Tt.delete(`${Dt.GRADES}${e}/`),e}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete grade"):t("Failed to delete grade")}}),RU=Yr({name:"grades",initialState:TU,reducers:{clearGradesError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Bv.pending,t=>{t.loading=!0,t.error=null}).addCase(Bv.fulfilled,(t,r)=>{t.loading=!1,t.grades.push(r.payload)}).addCase(Bv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to create grade"}).addCase(Ii.pending,t=>{t.loading=!0,t.error=null}).addCase(Ii.fulfilled,(t,r)=>{t.loading=!1,t.grades=Array.isArray(r.payload)?r.payload:[]}).addCase(Ii.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch grades"}).addCase(zv.pending,t=>{t.loading=!0,t.error=null}).addCase(zv.fulfilled,(t,r)=>{t.loading=!1;const n=t.grades.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.grades[n]=r.payload)}).addCase(zv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update grade"}).addCase(Uv.pending,t=>{t.loading=!0,t.error=null}).addCase(Uv.fulfilled,(t,r)=>{t.loading=!1,t.grades=t.grades.filter(n=>n.id!==r.payload)}).addCase(Uv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete grade"})}}),IU=RU.reducer,ww={preferences:{showAnalytics:!0,showRecentActivity:!0,showNotificationsPanel:!0,allowDataExport:!0,autoBackup:!0,theme:"light",language:"en"},loading:!1,error:null},bp=Ct("preferences/fetchUserPreferences",async(e,{rejectWithValue:t})=>{try{const r=localStorage.getItem("userPreferences");if(r)try{return JSON.parse(r)}catch{}return ww.preferences}catch{return t("Failed to fetch preferences")}}),qv=Ct("preferences/updateUserPreferences",async(e,{rejectWithValue:t})=>{try{const n={...JSON.parse(localStorage.getItem("userPreferences")||"{}"),...e};return localStorage.setItem("userPreferences",JSON.stringify(n)),e}catch{return t("Failed to update preferences")}}),FU=Yr({name:"preferences",initialState:ww,reducers:{setPreference:(e,t)=>{const{key:r,value:n}=t.payload;e.preferences[r]=n},resetPreferences:e=>{e.preferences=ww.preferences}},extraReducers:e=>{e.addCase(bp.pending,t=>{t.loading=!0,t.error=null}).addCase(bp.fulfilled,(t,r)=>{t.loading=!1,t.preferences={...t.preferences,...r.payload}}).addCase(bp.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(qv.pending,t=>{t.loading=!0,t.error=null}).addCase(qv.fulfilled,(t,r)=>{t.loading=!1,t.preferences={...t.preferences,...r.payload}}).addCase(qv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),DU=FU.reducer,OU={notifications:[],loading:!1,error:null},jp=Ct("notifications/createNotification",async(e,{rejectWithValue:t})=>{var r,n;try{let a=localStorage.getItem("token");if(!a){const d=localStorage.getItem("persist:auth");if(d)try{const u=JSON.parse(d);a=JSON.parse(u.user||"{}").token}catch{}}a&&(a.startsWith('"')&&a.endsWith('"')&&(a=JSON.parse(a)),Tt.defaults.headers.common.Authorization=`Bearer ${a}`);const i=localStorage.getItem("schoolId"),o={alert_type:e.alert_type,severity:e.severity,title:e.title,message:e.message,description:e.description,student_id:e.student_id,trip_id:e.trip_id,recipients:e.recipients||[],requires_immediate_action:e.requires_immediate_action||!1,metadata:e.metadata||{},location:e.location,address:e.address};Object.keys(o).forEach(d=>{o[d]===void 0&&delete o[d]});const l={headers:a?{Authorization:`Bearer ${a}`}:{}};return(await Tt.post(Dt.NOTIFICATIONS_CREATE,o,l)).data}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create notification"):t("Failed to create notification")}}),Qh=Ct("notifications/fetchNotifications",async(e,{rejectWithValue:t})=>{var r,n;try{let a=localStorage.getItem("token");if(!a){const u=localStorage.getItem("persist:auth");if(u)try{const h=JSON.parse(u);a=JSON.parse(h.user||"{}").token}catch{}}a&&(a.startsWith('"')&&a.endsWith('"')&&(a=JSON.parse(a)),Tt.defaults.headers.common.Authorization=`Bearer ${a}`);const i=typeof e=="object"?e.schoolId:void 0;let o=Dt.NOTIFICATIONS;i&&(o+=`?school=${i}`);const l={headers:a?{Authorization:`Bearer ${a}`}:{}},c=await Tt.get(o,l);let d;return c.data&&c.data.results?d=c.data.results:c.data&&Array.isArray(c.data)?d=c.data:c.data&&c.data.data&&Array.isArray(c.data.data)?d=c.data.data:d=[],d}catch(a){return a instanceof Gs?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch notifications"):t("Failed to fetch notifications")}}),MU=Yr({name:"notifications",initialState:OU,reducers:{clearNotificationsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(jp.pending,t=>{t.loading=!0,t.error=null}).addCase(jp.fulfilled,(t,r)=>{t.loading=!1,t.notifications.unshift(r.payload)}).addCase(jp.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to create notification"}).addCase(Qh.pending,t=>{t.loading=!0,t.error=null}).addCase(Qh.fulfilled,(t,r)=>{t.loading=!1,t.notifications=Array.isArray(r.payload)?r.payload:[]}).addCase(Qh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch notifications"})}}),$U=MU.reducer,BU={reports:[],metrics:null,pagination:null,filters:{},loading:!1,error:null},$c=Ct("reports/fetchReports",async(e,{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;e.school_id&&a.append("school_id",e.school_id.toString()),e.start_date&&a.append("start_date",e.start_date),e.end_date&&a.append("end_date",e.end_date),e.driver_id&&a.append("driver_id",e.driver_id.toString()),e.route_id&&a.append("route_id",e.route_id.toString()),e.status&&a.append("status",e.status),e.page&&a.append("page",e.page.toString());const i=`${Dt.REPORTS}?${a.toString()}`;return(await Tt.get(i)).data}catch(a){const i=a instanceof Gs?((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||a.message:"Failed to fetch reports";return t(i)}}),oE=Yr({name:"reports",initialState:BU,reducers:{clearReports:e=>{e.reports=[],e.metrics=null,e.pagination=null,e.error=null},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={}}},extraReducers:e=>{e.addCase($c.pending,t=>{t.loading=!0,t.error=null}).addCase($c.fulfilled,(t,r)=>{t.loading=!1,t.reports=r.payload.results,t.metrics=r.payload.metrics,t.pagination=r.payload.pagination,t.error=null}).addCase($c.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch reports"})}}),{clearFilters:zU}=oE.actions,UU=oE.reducer,qU={plans:[],loading:!1,error:null},sl=Ct("subscription/fetchPlans",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await Tt.get("subscription-plans/");return Array.isArray(a.data)?a.data:((r=a.data)==null?void 0:r.results)||((n=a.data)==null?void 0:n.data)||[]}catch(a){const i=a instanceof Error?a.message:"Failed to fetch subscription plans";return t(i)}}),VU=Yr({name:"subscription",initialState:qU,reducers:{clearSubscription:e=>{e.plans=[],e.error=null}},extraReducers:e=>{e.addCase(sl.pending,t=>{t.loading=!0,t.error=null}).addCase(sl.fulfilled,(t,r)=>{t.loading=!1,t.plans=r.payload}).addCase(sl.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),HU=VU.reducer,WU={messages:[],loading:!1,error:null,creating:!1,updating:!1},Vv=Ct("contactMessages/fetchContactMessages",async(e,{rejectWithValue:t})=>{try{const r=await fetch(`${Dt.CONTACT_MESSAGES}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();let a=n.data||n;return Array.isArray(a)?a:[{id:"1",first_name:"Peter",last_name:"Mwangi",email_address:"p.mwangi@brightfutureschool.co.ke",school_name:"Bright Future Academy",message:"Hello, I'm interested in your Smart Shule platform for our school transport management. We have about 300 students and 5 buses. Could you please provide more information about pricing and implementation timeline? We're particularly interested in the parent notification features and real-time tracking capabilities.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T10:30:00Z"},{id:"2",first_name:"Grace",last_name:"Achieng",email_address:"grace.achieng@educationhub.ac.ke",school_name:"Education Hub International",message:"We would like to schedule a demo of your Smart Shule platform. Our school currently uses manual systems for transport management and we're looking for a comprehensive digital solution. We have 450 students across primary and secondary sections with 8 buses operating daily. Please let us know your availability for a presentation.",message_type:"demo_request",is_read:!0,created_at:"2024-01-14T14:20:00Z",updated_at:"2024-01-15T09:15:00Z"},{id:"3",first_name:"David",last_name:"Ochieng",email_address:"d.ochieng@holyrosaryschool.edu",school_name:"Holy Rosary School",message:"We're experiencing some issues with the GPS tracking on two of our buses. The location updates seem to be delayed by about 10-15 minutes. Could someone from your technical team please assist us? Our subscription is active and this is affecting our parent communication.",message_type:"support_message",is_read:!1,created_at:"2024-01-15T08:15:00Z",updated_at:"2024-01-15T08:15:00Z"},{id:"4",first_name:"Sarah",last_name:"Kamau",email_address:"s.kamau@stmarys.edu",school_name:"St. Mary's Preparatory School",message:"We're considering upgrading to the premium plan. Could you please send us detailed information about the additional features and pricing? We currently have 200 students and 3 buses.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-13T11:45:00Z",updated_at:"2024-01-13T11:45:00Z"},{id:"5",first_name:"Michael",last_name:"Onyango",email_address:"m.onyango@kenyacollege.edu",school_name:"Kenya College",message:"We would like to request a custom integration with our existing student management system. Is this possible with your platform? We need to sync student data automatically.",message_type:"demo_request",is_read:!0,created_at:"2024-01-12T16:30:00Z",updated_at:"2024-01-12T16:30:00Z"}]}catch{return[{id:"1",first_name:"Peter",last_name:"Mwangi",email_address:"p.mwangi@brightfutureschool.co.ke",school_name:"Bright Future Academy",message:"Hello, I'm interested in your Smart Shule platform for our school transport management. We have about 300 students and 5 buses. Could you please provide more information about pricing and implementation timeline? We're particularly interested in the parent notification features and real-time tracking capabilities.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T10:30:00Z"},{id:"2",first_name:"Grace",last_name:"Achieng",email_address:"grace.achieng@educationhub.ac.ke",school_name:"Education Hub International",message:"We would like to schedule a demo of your Smart Shule platform. Our school currently uses manual systems for transport management and we're looking for a comprehensive digital solution. We have 450 students across primary and secondary sections with 8 buses operating daily. Please let us know your availability for a presentation.",message_type:"demo_request",is_read:!0,created_at:"2024-01-14T14:20:00Z",updated_at:"2024-01-15T09:15:00Z"},{id:"3",first_name:"David",last_name:"Ochieng",email_address:"d.ochieng@holyrosaryschool.edu",school_name:"Holy Rosary School",message:"We're experiencing some issues with the GPS tracking on two of our buses. The location updates seem to be delayed by about 10-15 minutes. Could someone from your technical team please assist us? Our subscription is active and this is affecting our parent communication.",message_type:"support_message",is_read:!1,created_at:"2024-01-15T08:15:00Z",updated_at:"2024-01-15T08:15:00Z"},{id:"4",first_name:"Sarah",last_name:"Kamau",email_address:"s.kamau@stmarys.edu",school_name:"St. Mary's Preparatory School",message:"We're considering upgrading to the premium plan. Could you please send us detailed information about the additional features and pricing? We currently have 200 students and 3 buses.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-13T11:45:00Z",updated_at:"2024-01-13T11:45:00Z"},{id:"5",first_name:"Michael",last_name:"Onyango",email_address:"m.onyango@kenyacollege.edu",school_name:"Kenya College",message:"We would like to request a custom integration with our existing student management system. Is this possible with your platform? We need to sync student data automatically.",message_type:"demo_request",is_read:!0,created_at:"2024-01-12T16:30:00Z",updated_at:"2024-01-12T16:30:00Z"}]}}),wp=Ct("contactMessages/createContactMessage",async(e,{rejectWithValue:t})=>{try{const n=["first_name","last_name","email_address","school_name","message"].filter(p=>{var f;return!((f=e[p])!=null&&f.trim())});if(n.length>0)return t(`Missing required fields: ${n.join(", ")}`);const{message_type:a,...i}=e,o={first_name:i.first_name.trim(),last_name:i.last_name.trim(),email_address:i.email_address.trim(),school_name:i.school_name.trim(),message:i.message.trim()},l=localStorage.getItem("token"),c=o,d={"Content-Type":"application/json"};l&&(d.Authorization=`Bearer ${l}`);const u=await fetch(`${Dt.CONTACT_MESSAGES}`,{method:"POST",headers:d,body:JSON.stringify(c)}),h=await u.json();if(!u.ok){if(u.status===401&&l){const p=await fetch(`${Dt.CONTACT_MESSAGES}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),f=await p.json();return p.ok?f.data||f:t(f.message||"Failed to create contact message")}return t(h.message||"Failed to create contact message")}return h.data||h}catch{return t("Failed to create contact message")}}),Pj=Ct("contactMessages/updateContactMessage",async({id:e,updateData:t},{rejectWithValue:r})=>{try{const n=await fetch(`${Dt.CONTACT_MESSAGES}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch{return r("Failed to update contact message")}}),Hv=Ct("contactMessages/markAsRead",async(e,{rejectWithValue:t,getState:r})=>{try{const n=await fetch(`${Dt.CONTACT_MESSAGES}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({is_read:!0})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();if(a.data||a)return a.data||a;const o=r().contactMessages.messages.find(l=>l.id===e);if(o)return{...o,is_read:!0,updated_at:new Date().toISOString()};throw new Error("Message not found")}catch{const i=r().contactMessages.messages.find(o=>o.id===e);return i?{...i,is_read:!0,updated_at:new Date().toISOString()}:t("Failed to mark message as read")}}),Ej=Ct("contactMessages/fetchContactMessageById",async(e,{rejectWithValue:t})=>{try{const r=await fetch(`${Dt.CONTACT_MESSAGES}/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch{return t("Failed to fetch contact message")}}),GU=Yr({name:"contactMessages",initialState:WU,reducers:{clearContactMessagesError:e=>{e.error=null},clearContactMessages:e=>{e.messages=[],e.error=null}},extraReducers:e=>{e.addCase(Vv.pending,t=>{t.loading=!0,t.error=null}).addCase(Vv.fulfilled,(t,r)=>{t.loading=!1,t.messages=r.payload,t.error=null}).addCase(Vv.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(wp.pending,t=>{t.creating=!0,t.error=null}).addCase(wp.fulfilled,(t,r)=>{t.creating=!1,t.messages.unshift(r.payload),t.error=null}).addCase(wp.rejected,(t,r)=>{t.creating=!1,t.error=r.payload}),e.addCase(Pj.pending,t=>{t.updating=!0,t.error=null}).addCase(Pj.fulfilled,(t,r)=>{t.updating=!1;const n=t.messages.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.messages[n]=r.payload),t.error=null}).addCase(Pj.rejected,(t,r)=>{t.updating=!1,t.error=r.payload}),e.addCase(Hv.pending,t=>{t.updating=!0,t.error=null}).addCase(Hv.fulfilled,(t,r)=>{t.updating=!1;const n=t.messages.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.messages[n]=r.payload),t.error=null}).addCase(Hv.rejected,(t,r)=>{t.updating=!1,t.error=r.payload}),e.addCase(Ej.pending,t=>{t.loading=!0,t.error=null}).addCase(Ej.fulfilled,(t,r)=>{t.loading=!1;const n=t.messages.findIndex(a=>a.id===r.payload.id);n!==-1?t.messages[n]=r.payload:t.messages.unshift(r.payload),t.error=null}).addCase(Ej.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),KU=GU.reducer,YU={subscriptions:[],loading:!1,error:null,creating:!1,updating:!1},ql=Ct("schoolSubscriptions/fetchSchoolSubscriptions",async(e,{rejectWithValue:t})=>{var r,n,a;try{const i=await Gf(`${Dt.SCHOOL_SUBSCRIPTIONS}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!i.ok){const l=await i.json().catch(()=>({}));if(i.status===429||(r=l.detail)!=null&&r.includes("throttled")){const c=((a=(n=l.detail)==null?void 0:n.match(/(\d+) seconds?/))==null?void 0:a[1])||20;throw new Error(`Rate limited. Please wait ${c} seconds before trying again.`)}throw l.message?new Error(l.message):new Error(`HTTP error! status: ${i.status}`)}const o=await i.json();return o.data||o}catch{return t("Failed to fetch school subscriptions")}}),Lj=Ct("schoolSubscriptions/fetchSchoolSubscriptionById",async(e,{rejectWithValue:t})=>{try{const r=await fetch(`${Dt.SCHOOL_SUBSCRIPTIONS}/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch{return t("Failed to fetch school subscription")}}),Wv=Ct("schoolSubscriptions/createSchoolSubscription",async(e,{rejectWithValue:t})=>{try{const r=await fetch(`${Dt.SCHOOL_SUBSCRIPTIONS}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)});if(!r.ok){const a=await r.json();throw new Error(a.message||"Failed to create subscription")}const n=await r.json();return n.data||n}catch{return t("Failed to create school subscription")}}),Gv=Ct("schoolSubscriptions/updateSchoolSubscription",async({id:e,updateData:t},{rejectWithValue:r})=>{try{const n=await fetch(`${Dt.SCHOOL_SUBSCRIPTIONS}${e}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!n.ok){const i=await n.json();throw new Error(i.message||"Failed to update subscription")}const a=await n.json();return a.data||a}catch{return r("Failed to update school subscription")}}),JU=Yr({name:"schoolSubscriptions",initialState:YU,reducers:{clearSchoolSubscriptionsError:e=>{e.error=null},clearSchoolSubscriptions:e=>{e.subscriptions=[],e.error=null}},extraReducers:e=>{e.addCase(ql.pending,t=>{t.loading=!0,t.error=null}).addCase(ql.fulfilled,(t,r)=>{t.loading=!1,t.subscriptions=r.payload,t.error=null}).addCase(ql.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(Lj.pending,t=>{t.loading=!0,t.error=null}).addCase(Lj.fulfilled,(t,r)=>{t.loading=!1;const n=t.subscriptions.findIndex(a=>a.id===r.payload.id);n!==-1?t.subscriptions[n]=r.payload:t.subscriptions.unshift(r.payload),t.error=null}).addCase(Lj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(Wv.pending,t=>{t.creating=!0,t.error=null}).addCase(Wv.fulfilled,(t,r)=>{t.creating=!1,t.subscriptions.unshift(r.payload),t.error=null}).addCase(Wv.rejected,(t,r)=>{t.creating=!1,t.error=r.payload}),e.addCase(Gv.pending,t=>{t.updating=!0,t.error=null}).addCase(Gv.fulfilled,(t,r)=>{t.updating=!1;const n=t.subscriptions.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.subscriptions[n]=r.payload),t.error=null}).addCase(Gv.rejected,(t,r)=>{t.updating=!1,t.error=r.payload})}}),ZU=JU.reducer,XU={invoices:[],loading:!1,error:null,creating:!1,updating:!1},vu=Ct("invoices/fetchInvoices",async(e,{rejectWithValue:t})=>{try{const n=await(await Gf(`${Dt.INVOICES}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();return n.data||n}catch(r){return t(r instanceof Error?r.message:"Failed to fetch invoices")}}),Tj=Ct("invoices/fetchInvoiceById",async(e,{rejectWithValue:t})=>{try{const n=await(await Gf(`${Dt.INVOICES}/${e}/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();return n.data||n}catch(r){return t(r instanceof Error?r.message:"Failed to fetch invoice")}}),Kv=Ct("invoices/createInvoice",async(e,{rejectWithValue:t})=>{try{const n=await(await Gf(`${Dt.INVOICES}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)})).json();return n.data||n}catch(r){return t(r instanceof Error?r.message:"Failed to create invoice")}}),Rj=Ct("invoices/processPayment",async(e,{rejectWithValue:t})=>{try{const n=await(await Gf(`${Dt.INVOICES}${e.invoice_id}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)})).json();return n.data||n}catch(r){return t(r instanceof Error?r.message:"Failed to process payment")}}),Yv=Ct("invoices/updateInvoice",async({id:e,updateData:t},{rejectWithValue:r})=>{try{const a=await(await Gf(`${Dt.INVOICES}/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)})).json();return a.data||a}catch(n){return r(n instanceof Error?n.message:"Failed to update invoice")}}),QU=Yr({name:"invoices",initialState:XU,reducers:{clearInvoicesError:e=>{e.error=null},clearInvoices:e=>{e.invoices=[],e.error=null}},extraReducers:e=>{e.addCase(vu.pending,t=>{t.loading=!0,t.error=null}).addCase(vu.fulfilled,(t,r)=>{t.loading=!1,t.invoices=r.payload,t.error=null}).addCase(vu.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(Tj.pending,t=>{t.loading=!0,t.error=null}).addCase(Tj.fulfilled,(t,r)=>{t.loading=!1;const n=t.invoices.findIndex(a=>a.id===r.payload.id);n!==-1?t.invoices[n]=r.payload:t.invoices.unshift(r.payload),t.error=null}).addCase(Tj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(Kv.pending,t=>{t.creating=!0,t.error=null}).addCase(Kv.fulfilled,(t,r)=>{t.creating=!1,t.invoices.unshift(r.payload),t.error=null}).addCase(Kv.rejected,(t,r)=>{t.creating=!1,t.error=r.payload}),e.addCase(Rj.pending,t=>{t.updating=!0,t.error=null}).addCase(Rj.fulfilled,(t,r)=>{t.updating=!1;const n=t.invoices.findIndex(a=>a.id===r.payload.invoice_id);n!==-1&&(t.invoices[n].status="paid"),t.error=null}).addCase(Rj.rejected,(t,r)=>{t.updating=!1,t.error=r.payload}),e.addCase(Yv.pending,t=>{t.updating=!0,t.error=null}).addCase(Yv.fulfilled,(t,r)=>{t.updating=!1;const n=t.invoices.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.invoices[n]=r.payload),t.error=null}).addCase(Yv.rejected,(t,r)=>{t.updating=!1,t.error=r.payload})}}),eq=QU.reducer,tq={errors:[],networkStatus:{isOnline:navigator.onLine,lastOnlineTime:new Date().toISOString(),retryAttempts:0},isGlobalErrorVisible:!1,lastErrorId:null},lE=Yr({name:"error",initialState:tq,reducers:{addError:(e,t)=>{const r={...t.payload,id:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),retryCount:0,maxRetries:t.payload.maxRetries||3};e.errors.push(r),e.lastErrorId=r.id,(r.type==="network"||r.type==="auth")&&(e.isGlobalErrorVisible=!0)},removeError:(e,t)=>{e.errors=e.errors.filter(n=>n.id!==t.payload),e.errors.some(n=>n.type==="network"||n.type==="auth")||(e.isGlobalErrorVisible=!1)},clearErrors:e=>{e.errors=[],e.isGlobalErrorVisible=!1,e.lastErrorId=null},clearErrorsByType:(e,t)=>{e.errors=e.errors.filter(n=>n.type!==t.payload),e.errors.some(n=>n.type==="network"||n.type==="auth")||(e.isGlobalErrorVisible=!1)},updateNetworkStatus:(e,t)=>{e.networkStatus={...e.networkStatus,...t.payload}},incrementRetryCount:(e,t)=>{const r=e.errors.find(n=>n.id===t.payload);r&&r.retryCount!==void 0&&(r.retryCount+=1)},markErrorResolved:(e,t)=>{const r=e.errors.find(n=>n.id===t.payload);r&&(r.recoverable=!1)},setGlobalErrorVisibility:(e,t)=>{e.isGlobalErrorVisible=t.payload},addBatchErrors:(e,t)=>{const r=t.payload.map(a=>({...a,id:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),retryCount:0,maxRetries:a.maxRetries||3}));e.errors.push(...r),r.some(a=>a.type==="network"||a.type==="auth")&&(e.isGlobalErrorVisible=!0)}}}),{removeError:sq,updateNetworkStatus:Ig,setGlobalErrorVisibility:Ij}=lE.actions,rq=lE.reducer,nq={key:"auth",storage:M5,whitelist:["user","token","userId"]},aq={key:"routes",storage:M5,whitelist:["routes"]},iq=AP(nq,qz),oq=AP(aq,rU),lq={auth:iq,schools:Hz,parents:Kz,drivers:Zz,vehicles:eU,routes:oq,routeAssignments:iU,staff:cU,roles:gU,students:bU,profile:NU,overview:_U,trips:LU,grades:IU,preferences:DU,notifications:$U,reports:UU,subscription:HU,contactMessages:KU,schoolSubscriptions:ZU,invoices:eq,error:rq},q5=c$({reducer:lq,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]},immutableCheck:!1}),devTools:!1}),cq=M$(q5);function Jv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jv=function(r){return typeof r}:Jv=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Jv(e)}function dq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hq(e,t,r){return t&&uq(e.prototype,t),e}function fq(e,t){return t&&(Jv(t)==="object"||typeof t=="function")?t:Zv(e)}function Nw(e){return Nw=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Nw(e)}function Zv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sw(e,t)}function Sw(e,t){return Sw=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},Sw(e,t)}function Xv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cE=function(e){mq(t,e);function t(){var r,n;dq(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=fq(this,(r=Nw(t)).call.apply(r,[this].concat(i))),Xv(Zv(n),"state",{bootstrapped:!1}),Xv(Zv(n),"_unsubscribe",void 0),Xv(Zv(n),"handlePersistorState",function(){var l=n.props.persistor,c=l.getState(),d=c.bootstrapped;d&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return hq(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(g.PureComponent);Xv(cE,"defaultProps",{children:null,loading:null});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...xq,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:dE("lucide",a),...l},[...o.map(([d,u])=>g.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(e,t)=>{const r=g.forwardRef(({className:n,...a},i)=>g.createElement(gq,{ref:i,iconNode:t,className:dE(`lucide-${pq(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=pt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=pt("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=pt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=pt("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=pt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=pt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=pt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=pt("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=pt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=pt("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=pt("ChartBar",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=pt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=pt("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=pt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=pt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=pt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=pt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=pt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=pt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=pt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=pt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=pt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=pt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=pt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=pt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=pt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=pt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=pt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=pt("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=pt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=pt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=pt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=pt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=pt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=pt("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=pt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=pt("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=pt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=pt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=pt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=pt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=pt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=pt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=pt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=pt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=pt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=pt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=pt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=pt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=pt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=pt("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=pt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=pt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=pt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=pt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=pt("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=pt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=pt("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=pt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=pt("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=pt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=pt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=pt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=pt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=pt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=pt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=pt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=pt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=pt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=pt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=pt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=pt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=pt("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=pt("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=pt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=pt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),qq=()=>s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(In,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{children:"Loading application..."})]})});function Vq({children:e}){return s.jsx(P9,{store:q5,children:s.jsx(cE,{loading:s.jsx(qq,{}),persistor:cq,children:e})})}const rr=()=>lc(),jt=xa,bE=g.createContext(void 0),H5=()=>{const e=g.useContext(bE);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Hq=({children:e})=>{const t=rr(),{preferences:r}=jt(u=>u.preferences),[n,a]=g.useState(!1),i=()=>r.theme==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":r.theme,o=u=>{const h=document.documentElement;a(u==="dark"),u==="dark"?(h.classList.add("dark"),h.setAttribute("data-theme","dark")):(h.classList.remove("dark"),h.setAttribute("data-theme","light"))},l=async u=>{if(await t(qv({theme:u})),u==="auto"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches;o(h?"dark":"light")}else o(u)},c=()=>{const u=r.theme;let h;u==="auto"?h=window.matchMedia("(prefers-color-scheme: dark)").matches?"light":"dark":u==="light"?h="dark":h="light",l(h)};g.useEffect(()=>{if(r.theme==="auto"){const u=window.matchMedia("(prefers-color-scheme: dark)"),h=()=>{o(i())};return u.addEventListener("change",h),()=>u.removeEventListener("change",h)}},[r.theme]),g.useEffect(()=>{o(i())},[r.theme]),g.useEffect(()=>{o(i())},[]);const d={theme:r.theme,isDark:n,setTheme:l,toggleTheme:c};return s.jsx(bE.Provider,{value:d,children:e})};function EC(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function tc(...e){return t=>{let r=!1;const n=e.map(a=>{const i=EC(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():EC(e[a],null)}}}}function Fs(...e){return g.useCallback(tc(...e),e)}function gd(e){const t=Wq(e),r=g.forwardRef((n,a)=>{const{children:i,...o}=n,l=g.Children.toArray(i),c=l.find(Gq);if(c){const d=c.props.children,u=l.map(h=>h===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:a,children:g.isValidElement(d)?g.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var Du=gd("Slot");function Wq(e){const t=g.forwardRef((r,n)=>{const{children:a,...i}=r;if(g.isValidElement(a)){const o=Yq(a),l=Kq(i,a.props);return a.type!==g.Fragment&&(l.ref=n?tc(n,o):o),g.cloneElement(a,l)}return g.Children.count(a)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var jE=Symbol("radix.slottable");function wE(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=jE,t}function Gq(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===jE}function Kq(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Yq(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function NE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=NE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function SE(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=NE(e))&&(n&&(n+=" "),n+=t);return n}const LC=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,TC=SE,Ou=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return TC(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],h=i==null?void 0:i[d];if(u===null)return null;const p=LC(u)||LC(h);return a[d][p]}),l=r&&Object.entries(r).reduce((d,u)=>{let[h,p]=u;return p===void 0||(d[h]=p),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:p,...f}=u;return Object.entries(f).every(y=>{let[x,j]=y;return Array.isArray(j)?j.includes({...i,...l}[x]):{...i,...l}[x]===j})?[...d,h,p]:d},[]);return TC(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},W5="-",Jq=e=>{const t=Xq(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(W5);return l[0]===""&&l.length!==1&&l.shift(),_E(l,t)||Zq(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},_E=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?_E(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(W5);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},RC=/^\[(.+)\]$/,Zq=e=>{if(RC.test(e)){const t=RC.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Xq=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return eV(Object.entries(e.classGroups),r).forEach(([i,o])=>{Pw(o,n,i,t)}),n},Pw=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:IC(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(Qq(a)){Pw(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{Pw(o,IC(t,i),r,n)})})},IC=(e,t)=>{let r=e;return t.split(W5).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Qq=e=>e.isThemeGetter,eV=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,tV=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},CE="!",sV=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let j=0;j<l.length;j++){let v=l[j];if(d===0){if(v===a&&(n||l.slice(j,j+i)===t)){c.push(l.slice(u,j)),u=j+i;continue}if(v==="/"){h=j;continue}}v==="["?d++:v==="]"&&d--}const p=c.length===0?l:l.substring(u),f=p.startsWith(CE),y=f?p.substring(1):p,x=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:o}):o},rV=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},nV=e=>({cache:tV(e.cacheSize),parseClassName:sV(e),...Jq(e)}),aV=/\s+/,iV=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(aV);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=r(d);let y=!!f,x=n(y?p.substring(0,f):p);if(!x){if(!y){l=d+(l.length>0?" "+l:l);continue}if(x=n(p),!x){l=d+(l.length>0?" "+l:l);continue}y=!1}const j=rV(u).join(":"),v=h?j+CE:j,w=v+x;if(i.includes(w))continue;i.push(w);const N=a(x,y);for(let k=0;k<N.length;++k){const P=N[k];i.push(v+P)}l=d+(l.length>0?" "+l:l)}return l};function oV(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=kE(t))&&(n&&(n+=" "),n+=r);return n}const kE=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=kE(e[n]))&&(r&&(r+=" "),r+=t);return r};function lV(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return r=nV(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=iV(c,r);return a(c,u),u}return function(){return i(oV.apply(null,arguments))}}const Ar=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},AE=/^\[(?:([a-z-]+):)?(.+)\]$/i,cV=/^\d+\/\d+$/,dV=new Set(["px","full","screen"]),uV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pl=e=>ef(e)||dV.has(e)||cV.test(e),kc=e=>Kf(e,"length",NV),ef=e=>!!e&&!Number.isNaN(Number(e)),Dj=e=>Kf(e,"number",ef),Bm=e=>!!e&&Number.isInteger(Number(e)),xV=e=>e.endsWith("%")&&ef(e.slice(0,-1)),Ps=e=>AE.test(e),Ac=e=>uV.test(e),gV=new Set(["length","size","percentage"]),vV=e=>Kf(e,gV,PE),yV=e=>Kf(e,"position",PE),bV=new Set(["image","url"]),jV=e=>Kf(e,bV,_V),wV=e=>Kf(e,"",SV),zm=()=>!0,Kf=(e,t,r)=>{const n=AE.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},NV=e=>hV.test(e)&&!fV.test(e),PE=()=>!1,SV=e=>mV.test(e),_V=e=>pV.test(e),CV=()=>{const e=Ar("colors"),t=Ar("spacing"),r=Ar("blur"),n=Ar("brightness"),a=Ar("borderColor"),i=Ar("borderRadius"),o=Ar("borderSpacing"),l=Ar("borderWidth"),c=Ar("contrast"),d=Ar("grayscale"),u=Ar("hueRotate"),h=Ar("invert"),p=Ar("gap"),f=Ar("gradientColorStops"),y=Ar("gradientColorStopPositions"),x=Ar("inset"),j=Ar("margin"),v=Ar("opacity"),w=Ar("padding"),N=Ar("saturate"),k=Ar("scale"),P=Ar("sepia"),E=Ar("skew"),I=Ar("space"),T=Ar("translate"),R=()=>["auto","contain","none"],X=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Ps,t],C=()=>[Ps,t],$=()=>["",Pl,kc],B=()=>["auto",ef,Ps],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],oe=()=>["solid","dashed","dotted","double","none"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",Ps],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ve=()=>[ef,Ps];return{cacheSize:500,separator:":",theme:{colors:[zm],spacing:[Pl,kc],blur:["none","",Ac,Ps],brightness:ve(),borderColor:[e],borderRadius:["none","","full",Ac,Ps],borderSpacing:C(),borderWidth:$(),contrast:ve(),grayscale:Z(),hueRotate:ve(),invert:Z(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[xV,kc],inset:D(),margin:D(),opacity:ve(),padding:C(),saturate:ve(),scale:ve(),sepia:Z(),skew:ve(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",Ps]}],container:["container"],columns:[{columns:[Ac]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),Ps]}],overflow:[{overflow:X()}],"overflow-x":[{"overflow-x":X()}],"overflow-y":[{"overflow-y":X()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bm,Ps]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ps]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",Bm,Ps]}],"grid-cols":[{"grid-cols":[zm]}],"col-start-end":[{col:["auto",{span:["full",Bm,Ps]},Ps]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[zm]}],"row-start-end":[{row:["auto",{span:[Bm,Ps]},Ps]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ps]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ps]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ps,t]}],"min-w":[{"min-w":[Ps,t,"min","max","fit"]}],"max-w":[{"max-w":[Ps,t,"none","full","min","max","fit","prose",{screen:[Ac]},Ac]}],h:[{h:[Ps,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ps,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ps,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ps,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ac,kc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Dj]}],"font-family":[{font:[zm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ps]}],"line-clamp":[{"line-clamp":["none",ef,Dj]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pl,Ps]}],"list-image":[{"list-image":["none",Ps]}],"list-style-type":[{list:["none","disc","decimal",Ps]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pl,kc]}],"underline-offset":[{"underline-offset":["auto",Pl,Ps]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ps]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ps]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),yV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",vV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jV]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...oe(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:oe()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...oe()]}],"outline-offset":[{"outline-offset":[Pl,Ps]}],"outline-w":[{outline:[Pl,kc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Pl,kc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ac,wV]}],"shadow-color":[{shadow:[zm]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...ae(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ae()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ac,Ps]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[N]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ps]}],duration:[{duration:ve()}],ease:[{ease:["linear","in","out","in-out",Ps]}],delay:[{delay:ve()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ps]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Bm,Ps]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ps]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ps]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ps]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Pl,kc,Dj]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kV=lV(CV);function nt(...e){return kV(SE(e))}const G5=Ou("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ue=g.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?Du:"button";return s.jsx(o,{className:nt(G5({variant:t,size:r,className:e})),ref:i,...a})});ue.displayName="Button";const $e=g.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:nt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));$e.displayName="Input";const ze=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:nt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ze.displayName="Card";const Xe=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:nt("flex flex-col space-y-1.5 p-6",e),...t}));Xe.displayName="CardHeader";const tt=g.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:nt("text-2xl font-semibold leading-none tracking-tight",e),...t}));tt.displayName="CardTitle";const Ws=g.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:nt("text-sm text-muted-foreground",e),...t}));Ws.displayName="CardDescription";const Ue=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:nt("p-6 pt-0",e),...t}));Ue.displayName="CardContent";const K5=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:nt("flex items-center p-6 pt-0",e),...t}));K5.displayName="CardFooter";var AV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Bt=AV.reduce((e,t)=>{const r=gd(`Primitive.${t}`),n=g.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Y5(e,t){e&&Pd.flushSync(()=>e.dispatchEvent(t))}var PV="Label",EE=g.forwardRef((e,t)=>s.jsx(Bt.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));EE.displayName=PV;var LE=EE;const EV=Ou("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),de=g.forwardRef(({className:e,...t},r)=>s.jsx(LE,{ref:r,className:nt(EV(),e),...t}));de.displayName=LE.displayName;const LV=Ou("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Gl=g.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:nt(LV({variant:t}),e),...r}));Gl.displayName="Alert";const TV=g.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:nt("mb-1 font-medium leading-none tracking-tight",e),...t}));TV.displayName="AlertTitle";const Kl=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:nt("text-sm [&_p]:leading-relaxed",e),...t}));Kl.displayName="AlertDescription";function bt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function RV(e,t){const r=g.createContext(t),n=i=>{const{children:o,...l}=i,c=g.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=g.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function Fa(e,t=[]){let r=[];function n(i,o){const l=g.createContext(o),c=r.length;r=[...r,o];const d=h=>{var v;const{scope:p,children:f,...y}=h,x=((v=p==null?void 0:p[e])==null?void 0:v[c])||l,j=g.useMemo(()=>y,Object.values(y));return s.jsx(x.Provider,{value:j,children:f})};d.displayName=i+"Provider";function u(h,p){var x;const f=((x=p==null?void 0:p[e])==null?void 0:x[c])||l,y=g.useContext(f);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,IV(a,...t)]}function IV(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Jn=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},FV=_N[" useId ".trim().toString()]||(()=>{}),DV=0;function Fn(e){const[t,r]=g.useState(FV());return Jn(()=>{r(n=>n??String(DV++))},[e]),t?`radix-${t}`:""}var OV=_N[" useInsertionEffect ".trim().toString()]||Jn;function Co({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=MV({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const u=g.useRef(e!==void 0);g.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=g.useCallback(u=>{var h;if(l){const p=$V(u)?u(e):u;p!==e&&((h=o.current)==null||h.call(o,p))}else i(u)},[l,e,i,o]);return[c,d]}function MV({defaultProp:e,onChange:t}){const[r,n]=g.useState(e),a=g.useRef(r),i=g.useRef(t);return OV(()=>{i.current=t},[t]),g.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function $V(e){return typeof e=="function"}function Xa(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function BV(e,t=globalThis==null?void 0:globalThis.document){const r=Xa(e);g.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var zV="DismissableLayer",Ew="dismissableLayer.update",UV="dismissableLayer.pointerDownOutside",qV="dismissableLayer.focusOutside",FC,TE=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mu=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=g.useContext(TE),[u,h]=g.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=g.useState({}),y=Fs(t,I=>h(I)),x=Array.from(d.layers),[j]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(j),w=u?x.indexOf(u):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,k=w>=v,P=HV(I=>{const T=I.target,R=[...d.branches].some(X=>X.contains(T));!k||R||(a==null||a(I),o==null||o(I),I.defaultPrevented||l==null||l())},p),E=WV(I=>{const T=I.target;[...d.branches].some(X=>X.contains(T))||(i==null||i(I),o==null||o(I),I.defaultPrevented||l==null||l())},p);return BV(I=>{w===d.layers.size-1&&(n==null||n(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},p),g.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(FC=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),DC(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=FC)}},[u,p,r,d]),g.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),DC())},[u,d]),g.useEffect(()=>{const I=()=>f({});return document.addEventListener(Ew,I),()=>document.removeEventListener(Ew,I)},[]),s.jsx(Bt.div,{...c,ref:y,style:{pointerEvents:N?k?"auto":"none":void 0,...e.style},onFocusCapture:bt(e.onFocusCapture,E.onFocusCapture),onBlurCapture:bt(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:bt(e.onPointerDownCapture,P.onPointerDownCapture)})});Mu.displayName=zV;var VV="DismissableLayerBranch",RE=g.forwardRef((e,t)=>{const r=g.useContext(TE),n=g.useRef(null),a=Fs(t,n);return g.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Bt.div,{...e,ref:a})});RE.displayName=VV;function HV(e,t=globalThis==null?void 0:globalThis.document){const r=Xa(e),n=g.useRef(!1),a=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){IE(UV,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function WV(e,t=globalThis==null?void 0:globalThis.document){const r=Xa(e),n=g.useRef(!1);return g.useEffect(()=>{const a=i=>{i.target&&!n.current&&IE(qV,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function DC(){const e=new CustomEvent(Ew);document.dispatchEvent(e)}function IE(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?Y5(a,i):a.dispatchEvent(i)}var GV=Mu,KV=RE,Oj="focusScope.autoFocusOnMount",Mj="focusScope.autoFocusOnUnmount",OC={bubbles:!1,cancelable:!0},YV="FocusScope",yx=g.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=g.useState(null),d=Xa(a),u=Xa(i),h=g.useRef(null),p=Fs(t,x=>c(x)),f=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(n){let x=function(N){if(f.paused||!l)return;const k=N.target;l.contains(k)?h.current=k:Lc(h.current,{select:!0})},j=function(N){if(f.paused||!l)return;const k=N.relatedTarget;k!==null&&(l.contains(k)||Lc(h.current,{select:!0}))},v=function(N){if(document.activeElement===document.body)for(const P of N)P.removedNodes.length>0&&Lc(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",j);const w=new MutationObserver(v);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",j),w.disconnect()}}},[n,l,f.paused]),g.useEffect(()=>{if(l){$C.add(f);const x=document.activeElement;if(!l.contains(x)){const v=new CustomEvent(Oj,OC);l.addEventListener(Oj,d),l.dispatchEvent(v),v.defaultPrevented||(JV(tH(FE(l)),{select:!0}),document.activeElement===x&&Lc(l))}return()=>{l.removeEventListener(Oj,d),setTimeout(()=>{const v=new CustomEvent(Mj,OC);l.addEventListener(Mj,u),l.dispatchEvent(v),v.defaultPrevented||Lc(x??document.body,{select:!0}),l.removeEventListener(Mj,u),$C.remove(f)},0)}}},[l,d,u,f]);const y=g.useCallback(x=>{if(!r&&!n||f.paused)return;const j=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,v=document.activeElement;if(j&&v){const w=x.currentTarget,[N,k]=ZV(w);N&&k?!x.shiftKey&&v===k?(x.preventDefault(),r&&Lc(N,{select:!0})):x.shiftKey&&v===N&&(x.preventDefault(),r&&Lc(k,{select:!0})):v===w&&x.preventDefault()}},[r,n,f.paused]);return s.jsx(Bt.div,{tabIndex:-1,...o,ref:p,onKeyDown:y})});yx.displayName=YV;function JV(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Lc(n,{select:t}),document.activeElement!==r)return}function ZV(e){const t=FE(e),r=MC(t,e),n=MC(t.reverse(),e);return[r,n]}function FE(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function MC(e,t){for(const r of e)if(!XV(r,{upTo:t}))return r}function XV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function QV(e){return e instanceof HTMLInputElement&&"select"in e}function Lc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&QV(e)&&t&&e.select()}}var $C=eH();function eH(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=BC(e,t),e.unshift(t)},remove(t){var r;e=BC(e,t),(r=e[0])==null||r.resume()}}}function BC(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function tH(e){return e.filter(t=>t.tagName!=="A")}var sH="Portal",Yf=g.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=g.useState(!1);Jn(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?OO.createPortal(s.jsx(Bt.div,{...n,ref:t}),o):null});Yf.displayName=sH;function rH(e,t){return g.useReducer((r,n)=>t[r][n]??r,e)}var Qa=e=>{const{present:t,children:r}=e,n=nH(t),a=typeof r=="function"?r({present:n.isPresent}):g.Children.only(r),i=Fs(n.ref,aH(a));return typeof r=="function"||n.isPresent?g.cloneElement(a,{ref:i}):null};Qa.displayName="Presence";function nH(e){const[t,r]=g.useState(),n=g.useRef(null),a=g.useRef(e),i=g.useRef("none"),o=e?"mounted":"unmounted",[l,c]=rH(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=Dg(n.current);i.current=l==="mounted"?d:"none"},[l]),Jn(()=>{const d=n.current,u=a.current;if(u!==e){const p=i.current,f=Dg(d);e?c("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&p!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Jn(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=f=>{const x=Dg(n.current).includes(f.animationName);if(f.target===t&&x&&(c("ANIMATION_END"),!a.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},p=f=>{f.target===t&&(i.current=Dg(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function Dg(e){return(e==null?void 0:e.animationName)||"none"}function aH(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var $j=0;function cb(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??zC()),document.body.insertAdjacentElement("beforeend",e[1]??zC()),$j++,()=>{$j===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),$j--}},[])}function zC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Go=function(){return Go=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Go.apply(this,arguments)};function DE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function iH(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Qv="right-scroll-bar-position",e0="width-before-scroll-bar",oH="with-scroll-bars-hidden",lH="--removed-body-scroll-bar-size";function Bj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function cH(e,t){var r=g.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var dH=typeof window<"u"?g.useLayoutEffect:g.useEffect,UC=new WeakMap;function uH(e,t){var r=cH(null,function(n){return e.forEach(function(a){return Bj(a,n)})});return dH(function(){var n=UC.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||Bj(l,null)}),i.forEach(function(l){a.has(l)||Bj(l,o)})}UC.set(r,e)},[e]),r}function hH(e){return e}function fH(e,t){t===void 0&&(t=hH);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function mH(e){e===void 0&&(e={});var t=fH(null);return t.options=Go({async:!0,ssr:!1},e),t}var OE=function(e){var t=e.sideCar,r=DE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return g.createElement(n,Go({},r))};OE.isSideCarExport=!0;function pH(e,t){return e.useMedium(t),OE}var ME=mH(),zj=function(){},db=g.forwardRef(function(e,t){var r=g.useRef(null),n=g.useState({onScrollCapture:zj,onWheelCapture:zj,onTouchMoveCapture:zj}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,p=e.sideCar,f=e.noRelative,y=e.noIsolation,x=e.inert,j=e.allowPinchZoom,v=e.as,w=v===void 0?"div":v,N=e.gapMode,k=DE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=p,E=uH([r,t]),I=Go(Go({},k),a);return g.createElement(g.Fragment,null,u&&g.createElement(P,{sideCar:ME,removeScrollBar:d,shards:h,noRelative:f,noIsolation:y,inert:x,setCallbacks:i,allowPinchZoom:!!j,lockRef:r,gapMode:N}),o?g.cloneElement(g.Children.only(l),Go(Go({},I),{ref:E})):g.createElement(w,Go({},I,{className:c,ref:E}),l))});db.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};db.classNames={fullWidth:e0,zeroRight:Qv};var xH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gH(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=xH();return t&&e.setAttribute("nonce",t),e}function vH(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function yH(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var bH=function(){var e=0,t=null;return{add:function(r){e==0&&(t=gH())&&(vH(t,r),yH(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jH=function(){var e=bH();return function(t,r){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},$E=function(){var e=jH(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},wH={left:0,top:0,right:0,gap:0},Uj=function(e){return parseInt(e||"",10)||0},NH=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Uj(r),Uj(n),Uj(a)]},SH=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return wH;var t=NH(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},_H=$E(),tf="data-scroll-locked",CH=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(oH,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(tf,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qv,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(e0,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Qv," .").concat(Qv,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(e0," .").concat(e0,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(tf,`] {
    `).concat(lH,": ").concat(l,`px;
  }
`)},qC=function(){var e=parseInt(document.body.getAttribute(tf)||"0",10);return isFinite(e)?e:0},kH=function(){g.useEffect(function(){return document.body.setAttribute(tf,(qC()+1).toString()),function(){var e=qC()-1;e<=0?document.body.removeAttribute(tf):document.body.setAttribute(tf,e.toString())}},[])},AH=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;kH();var i=g.useMemo(function(){return SH(a)},[a]);return g.createElement(_H,{styles:CH(i,!t,a,r?"":"!important")})},Lw=!1;if(typeof window<"u")try{var Og=Object.defineProperty({},"passive",{get:function(){return Lw=!0,!0}});window.addEventListener("test",Og,Og),window.removeEventListener("test",Og,Og)}catch{Lw=!1}var fh=Lw?{passive:!1}:!1,PH=function(e){return e.tagName==="TEXTAREA"},BE=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!PH(e)&&r[t]==="visible")},EH=function(e){return BE(e,"overflowY")},LH=function(e){return BE(e,"overflowX")},VC=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=zE(e,n);if(a){var i=UE(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},TH=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},RH=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},zE=function(e,t){return e==="v"?EH(t):LH(t)},UE=function(e,t){return e==="v"?TH(t):RH(t)},IH=function(e,t){return e==="h"&&t==="rtl"?-1:1},FH=function(e,t,r,n,a){var i=IH(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),d=!1,u=o>0,h=0,p=0;do{if(!l)break;var f=UE(e,l),y=f[0],x=f[1],j=f[2],v=x-j-i*y;(y||v)&&zE(e,l)&&(h+=v,p+=y);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(h)<1||!u&&Math.abs(p)<1)&&(d=!0),d},Mg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},HC=function(e){return[e.deltaX,e.deltaY]},WC=function(e){return e&&"current"in e?e.current:e},DH=function(e,t){return e[0]===t[0]&&e[1]===t[1]},OH=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},MH=0,mh=[];function $H(e){var t=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),a=g.useState(MH++)[0],i=g.useState($E)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=iH([e.lockRef.current],(e.shards||[]).map(WC),!0).filter(Boolean);return x.forEach(function(j){return j.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(x,j){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var v=Mg(x),w=r.current,N="deltaX"in x?x.deltaX:w[0]-v[0],k="deltaY"in x?x.deltaY:w[1]-v[1],P,E=x.target,I=Math.abs(N)>Math.abs(k)?"h":"v";if("touches"in x&&I==="h"&&E.type==="range")return!1;var T=VC(I,E);if(!T)return!0;if(T?P=I:(P=I==="v"?"h":"v",T=VC(I,E)),!T)return!1;if(!n.current&&"changedTouches"in x&&(N||k)&&(n.current=P),!P)return!0;var R=n.current||P;return FH(R,j,x,R==="h"?N:k)},[]),c=g.useCallback(function(x){var j=x;if(!(!mh.length||mh[mh.length-1]!==i)){var v="deltaY"in j?HC(j):Mg(j),w=t.current.filter(function(P){return P.name===j.type&&(P.target===j.target||j.target===P.shadowParent)&&DH(P.delta,v)})[0];if(w&&w.should){j.cancelable&&j.preventDefault();return}if(!w){var N=(o.current.shards||[]).map(WC).filter(Boolean).filter(function(P){return P.contains(j.target)}),k=N.length>0?l(j,N[0]):!o.current.noIsolation;k&&j.cancelable&&j.preventDefault()}}},[]),d=g.useCallback(function(x,j,v,w){var N={name:x,delta:j,target:v,should:w,shadowParent:BH(v)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(k){return k!==N})},1)},[]),u=g.useCallback(function(x){r.current=Mg(x),n.current=void 0},[]),h=g.useCallback(function(x){d(x.type,HC(x),x.target,l(x,e.lockRef.current))},[]),p=g.useCallback(function(x){d(x.type,Mg(x),x.target,l(x,e.lockRef.current))},[]);g.useEffect(function(){return mh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,fh),document.addEventListener("touchmove",c,fh),document.addEventListener("touchstart",u,fh),function(){mh=mh.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,fh),document.removeEventListener("touchmove",c,fh),document.removeEventListener("touchstart",u,fh)}},[]);var f=e.removeScrollBar,y=e.inert;return g.createElement(g.Fragment,null,y?g.createElement(i,{styles:OH(a)}):null,f?g.createElement(AH,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function BH(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zH=pH(ME,$H);var bx=g.forwardRef(function(e,t){return g.createElement(db,Go({},e,{ref:t,sideCar:zH}))});bx.classNames=db.classNames;var UH=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ph=new WeakMap,$g=new WeakMap,Bg={},qj=0,qE=function(e){return e&&(e.host||qE(e.parentNode))},qH=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=qE(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},VH=function(e,t,r,n){var a=qH(t,Array.isArray(e)?e:[e]);Bg[r]||(Bg[r]=new WeakMap);var i=Bg[r],o=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))u(p);else try{var f=p.getAttribute(n),y=f!==null&&f!=="false",x=(ph.get(p)||0)+1,j=(i.get(p)||0)+1;ph.set(p,x),i.set(p,j),o.push(p),x===1&&y&&$g.set(p,!0),j===1&&p.setAttribute(r,"true"),y||p.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return u(t),l.clear(),qj++,function(){o.forEach(function(h){var p=ph.get(h)-1,f=i.get(h)-1;ph.set(h,p),i.set(h,f),p||($g.has(h)||h.removeAttribute(n),$g.delete(h)),f||h.removeAttribute(r)}),qj--,qj||(ph=new WeakMap,ph=new WeakMap,$g=new WeakMap,Bg={})}},ub=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=UH(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),VH(n,a,r,"aria-hidden")):function(){return null}},hb="Dialog",[VE,HE]=Fa(hb),[HH,Eo]=VE(hb),WE=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=g.useRef(null),c=g.useRef(null),[d,u]=Co({prop:n,defaultProp:a??!1,onChange:i,caller:hb});return s.jsx(HH,{scope:t,triggerRef:l,contentRef:c,contentId:Fn(),titleId:Fn(),descriptionId:Fn(),open:d,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};WE.displayName=hb;var GE="DialogTrigger",KE=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Eo(GE,r),i=Fs(t,a.triggerRef);return s.jsx(Bt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":X5(a.open),...n,ref:i,onClick:bt(e.onClick,a.onOpenToggle)})});KE.displayName=GE;var J5="DialogPortal",[WH,YE]=VE(J5,{forceMount:void 0}),JE=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Eo(J5,t);return s.jsx(WH,{scope:t,forceMount:r,children:g.Children.map(n,o=>s.jsx(Qa,{present:r||i.open,children:s.jsx(Yf,{asChild:!0,container:a,children:o})}))})};JE.displayName=J5;var V0="DialogOverlay",ZE=g.forwardRef((e,t)=>{const r=YE(V0,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Eo(V0,e.__scopeDialog);return i.modal?s.jsx(Qa,{present:n||i.open,children:s.jsx(KH,{...a,ref:t})}):null});ZE.displayName=V0;var GH=gd("DialogOverlay.RemoveScroll"),KH=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Eo(V0,r);return s.jsx(bx,{as:GH,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Bt.div,{"data-state":X5(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Au="DialogContent",XE=g.forwardRef((e,t)=>{const r=YE(Au,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Eo(Au,e.__scopeDialog);return s.jsx(Qa,{present:n||i.open,children:i.modal?s.jsx(YH,{...a,ref:t}):s.jsx(JH,{...a,ref:t})})});XE.displayName=Au;var YH=g.forwardRef((e,t)=>{const r=Eo(Au,e.__scopeDialog),n=g.useRef(null),a=Fs(t,r.contentRef,n);return g.useEffect(()=>{const i=n.current;if(i)return ub(i)},[]),s.jsx(QE,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:bt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:bt(e.onFocusOutside,i=>i.preventDefault())})}),JH=g.forwardRef((e,t)=>{const r=Eo(Au,e.__scopeDialog),n=g.useRef(!1),a=g.useRef(!1);return s.jsx(QE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),QE=g.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Eo(Au,r),c=g.useRef(null),d=Fs(t,c);return cb(),s.jsxs(s.Fragment,{children:[s.jsx(yx,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Mu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":X5(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(XH,{titleId:l.titleId}),s.jsx(eW,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Z5="DialogTitle",e8=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Eo(Z5,r);return s.jsx(Bt.h2,{id:a.titleId,...n,ref:t})});e8.displayName=Z5;var t8="DialogDescription",s8=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Eo(t8,r);return s.jsx(Bt.p,{id:a.descriptionId,...n,ref:t})});s8.displayName=t8;var r8="DialogClose",n8=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Eo(r8,r);return s.jsx(Bt.button,{type:"button",...n,ref:t,onClick:bt(e.onClick,()=>a.onOpenChange(!1))})});n8.displayName=r8;function X5(e){return e?"open":"closed"}var a8="DialogTitleWarning",[ZH,i8]=RV(a8,{contentName:Au,titleName:Z5,docsSlug:"dialog"}),XH=({titleId:e})=>{const t=i8(a8),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},QH="DialogDescriptionWarning",eW=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${i8(QH).contentName}}.`;return g.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Q5=WE,o8=KE,eS=JE,fb=ZE,mb=XE,tS=e8,sS=s8,rS=n8;const js=Q5,Jf=o8,tW=eS,l8=g.forwardRef(({className:e,...t},r)=>s.jsx(fb,{ref:r,className:nt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));l8.displayName=fb.displayName;const xs=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(tW,{children:[s.jsx(l8,{}),s.jsxs(mb,{ref:n,className:nt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(rS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(il,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xs.displayName=mb.displayName;const gs=({className:e,...t})=>s.jsx("div",{className:nt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});gs.displayName="DialogHeader";const lo=({className:e,...t})=>s.jsx("div",{className:nt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});lo.displayName="DialogFooter";const vs=g.forwardRef(({className:e,...t},r)=>s.jsx(tS,{ref:r,className:nt("text-lg font-semibold leading-none tracking-tight",e),...t}));vs.displayName=tS.displayName;const En=g.forwardRef(({className:e,...t},r)=>s.jsx(sS,{ref:r,className:nt("text-sm text-muted-foreground",e),...t}));En.displayName=sS.displayName;const sW=Ou("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function De({className:e,variant:t,...r}){return s.jsx("div",{className:nt(sW({variant:t}),e),...r})}const rW=({isOpen:e,onClose:t})=>{const r=()=>{window.open("mailto:support@eujimsolutions.com?subject=Subscription Activation Request","_blank")},n=()=>{window.open("tel:+254113281424","_blank")};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(gs,{className:"flex-shrink-0",children:[s.jsxs(vs,{className:"flex items-center gap-2 text-lg",children:[s.jsx(kr,{className:"h-5 w-5 text-yellow-600"}),"Subscription Activation Required"]}),s.jsx(En,{className:"text-sm",children:"Your school subscription is currently inactive. Please activate your subscription to access the ShuleTrack Admin Dashboard."})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:[s.jsx(ze,{className:"border-red-200 bg-red-50",children:s.jsx(Ue,{className:"p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(De,{variant:"destructive",className:"text-xs",children:"Subscription Inactive"})}),s.jsx("p",{className:"text-xs text-red-700",children:"Account access is currently disabled"})]})})}),s.jsx(ze,{children:s.jsxs(Ue,{className:"p-4",children:[s.jsxs("h4",{className:"font-semibold text-base mb-4 flex items-center gap-2",children:[s.jsx(kr,{className:"h-4 w-4 text-yellow-600"}),"Contact Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Nr,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm mb-1",children:"Head Office"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Gesora Road, Utawala, Nairobi"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ga,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm mb-1",children:"Email Support"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Inquiry:"})," ",s.jsx("a",{href:"mailto:info@shuletrack.com ",className:"text-yellow-600 hover:underline",children:"info@shuletrack.com"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Support:"})," ",s.jsx("a",{href:"mailto:support@shuletrack.com",className:"text-yellow-600 hover:underline",children:"support@shuletrack.com"})]})]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Za,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm mb-1",children:"Phone Support"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm text-gray-600",children:s.jsx("a",{href:"tel:+254113281424",className:"text-yellow-600 hover:underline",children:"+254 113281424"})}),s.jsx("p",{className:"text-sm text-gray-600",children:s.jsx("a",{href:"tel:+254718099959",className:"text-yellow-600 hover:underline",children:"+254 718099959"})})]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Aq,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm mb-1",children:"Contact Support"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Need help? Reach out to our support team"}),s.jsxs(ue,{variant:"outline",onClick:r,className:"h-9 text-sm",children:[s.jsx(ga,{className:"mr-2 h-3 w-3"}),"Email Us"]})]})]})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(ue,{variant:"outline",onClick:n,className:"flex-1 h-9",children:[s.jsx(Za,{className:"mr-2 h-3 w-3"}),"Call Now"]}),s.jsxs(ue,{variant:"outline",onClick:r,className:"flex-1 h-9",children:[s.jsx(ga,{className:"mr-2 h-3 w-3"}),"Email Support"]})]}),s.jsx("div",{className:"text-center pt-2",children:s.jsx(ue,{variant:"ghost",onClick:t,size:"sm",children:"Close"})})]})]})})},nW=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(""),[a,i]=g.useState(!1),[o,l]=g.useState(!1),c=rr(),d=Ia(),{toast:u}=mr(),{loading:h,error:p,user:f}=jt(v=>v.auth);g.useEffect(()=>{c(_C())},[c]),g.useEffect(()=>{if(p)if(p.includes("Account is disabled")||p.includes("Authentication failed"))l(!0);else{const w=p.includes("subscription")||p.includes("Access denied");u({variant:"destructive",title:w?"Subscription Issue":"Error",description:p})}},[p,u]),g.useEffect(()=>{f&&d("/")},[f,d]);const y=v=>{const w=v.replace(/\D/g,"");return w?w.startsWith("0757")?"+2527"+w.slice(4):w.startsWith("0")?"+254"+w.slice(1):w.startsWith("254")||w.startsWith("2527")?"+"+w:w.length===9?"+254"+w:v.startsWith("+")?v:"+254"+w:""},x=v=>{const w=v.target.value;t(w)},j=async v=>{v.preventDefault();const w=y(e);if(!w){u({variant:"destructive",title:"Error",description:"Please enter a valid phone number"});return}c(vv({phone_number:w,password:r}))};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:s.jsxs(ze,{className:"w-full max-w-md shadow-lg",children:[s.jsx(rW,{isOpen:o,onClose:()=>{l(!1),c(_C())}}),s.jsxs(Xe,{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/shuletrack_landscape_logo_yc2rnq.svg",alt:"ShuleTrack Logo",className:"h-12 w-auto"})}),s.jsx(tt,{className:"text-2xl font-bold text-center",children:"Welcome Back"}),s.jsx(Ws,{className:"text-center",children:"Sign in to access Smart shule Admin Dashboard"})]}),s.jsxs(Ue,{children:[p&&s.jsx(Gl,{variant:"destructive",className:"mb-4",children:s.jsx(Kl,{children:p})}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"phone",children:"Phone Number"}),s.jsx($e,{id:"phone",type:"tel",placeholder:"Enter your phone number (e.g., 0757198515 or 0757xxxxxx)",value:e,onChange:x,required:!0,className:"w-full"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter local format (e.g. 0757xxxxxx)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{id:"password",type:a?"text":"password",placeholder:"Enter your password",value:r,onChange:v=>n(v.target.value),required:!0,className:"w-full pr-10"}),s.jsx(ue,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?s.jsx(z0,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(qr,{className:"h-4 w-4 text-muted-foreground"})})]})]}),s.jsx(ue,{type:"submit",className:"w-full",disabled:h,children:h?s.jsxs(s.Fragment,{children:[s.jsx(In,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Login"})]})]}),s.jsx(K5,{className:"flex flex-col space-y-4"})]})})},Kn=g.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:nt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Kn.displayName="Textarea";const nS=({isOpen:e,onClose:t})=>{const{toast:r}=mr(),n=rr(),[a,i]=g.useState({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",student_count:"",bus_count:"",message:""}),[o,l]=g.useState(!1),c=u=>{const{name:h,value:p}=u.target;i(f=>({...f,[h]:p}))},d=async u=>{u.preventDefault(),l(!0);try{const h={first_name:a.first_name.trim(),last_name:a.last_name.trim(),email_address:a.email_address.trim(),school_name:a.school_name.trim(),message:a.message.trim()},p=Object.entries(h).filter(([j,v])=>!v).map(([j])=>j);if(p.length>0){r({title:"Error",description:`Please fill in all required fields: ${p.join(", ")}`,variant:"destructive"});return}const f=[];a.position&&f.push(`Position: ${a.position}`),a.student_count&&f.push(`Students: ${a.student_count}`),a.bus_count&&f.push(`Buses: ${a.bus_count}`),a.phone_number&&f.push(`Phone: ${a.phone_number}`);const y=a.message+(f.length>0?`

Additional Information:
${f.join(`
`)}`:""),x={first_name:h.first_name,last_name:h.last_name,email_address:h.email_address,school_name:h.school_name,message:y,message_type:"demo_request"};await n(wp(x)).unwrap(),r({title:"Demo Request Sent!",description:"We'll contact you within 24 hours to schedule your demo."}),i({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",student_count:"",bus_count:"",message:""}),t()}catch(h){r({title:"Error",description:typeof h=="string"?h:"Failed to send demo request. Please try again.",variant:"destructive"})}finally{l(!1)}};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsx(vs,{className:"text-xl font-bold text-slate-900",children:"Request Demo"}),s.jsx(En,{className:"text-slate-600",children:"Get a personalized demo of our school transportation platform. We'll show you how it can transform your operations."})]}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"first_name",className:"text-sm font-medium text-slate-700",children:"First Name *"}),s.jsx($e,{id:"first_name",name:"first_name",type:"text",value:a.first_name,onChange:c,placeholder:"John",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"last_name",className:"text-sm font-medium text-slate-700",children:"Last Name *"}),s.jsx($e,{id:"last_name",name:"last_name",type:"text",value:a.last_name,onChange:c,placeholder:"Doe",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"email_address",className:"text-sm font-medium text-slate-700",children:"Email Address *"}),s.jsx($e,{id:"email_address",name:"email_address",type:"email",value:a.email_address,onChange:c,placeholder:"john@school.edu",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"phone_number",className:"text-sm font-medium text-slate-700",children:"Phone Number"}),s.jsx($e,{id:"phone_number",name:"phone_number",type:"tel",value:a.phone_number,onChange:c,placeholder:"+1 (555) 123-4567",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"school_name",className:"text-sm font-medium text-slate-700",children:"School/District Name *"}),s.jsx($e,{id:"school_name",name:"school_name",type:"text",value:a.school_name,onChange:c,placeholder:"Your School District",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"position",className:"text-sm font-medium text-slate-700",children:"Your Position"}),s.jsx($e,{id:"position",name:"position",type:"text",value:a.position,onChange:c,placeholder:"Principal, Admin, etc.",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"student_count",className:"text-sm font-medium text-slate-700",children:"Number of Students"}),s.jsx($e,{id:"student_count",name:"student_count",type:"number",value:a.student_count,onChange:c,placeholder:"500",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"bus_count",className:"text-sm font-medium text-slate-700",children:"Number of Buses"}),s.jsx($e,{id:"bus_count",name:"bus_count",type:"number",value:a.bus_count,onChange:c,placeholder:"10",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"message",className:"text-sm font-medium text-slate-700",children:"Additional Information"}),s.jsx(Kn,{id:"message",name:"message",value:a.message,onChange:c,placeholder:"Tell us about your transportation needs, specific requirements, or any questions you have...",rows:4,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 resize-none"})]}),s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(Es,{className:"h-5 w-5 text-emerald-600"}),s.jsx("span",{className:"font-medium text-emerald-800",children:"What's Included in Your Demo"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm text-emerald-700",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pa,{className:"h-4 w-4"}),s.jsx("span",{children:"30-minute personalized walkthrough"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ws,{className:"h-4 w-4"}),s.jsx("span",{children:"Live platform demonstration"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ln,{className:"h-4 w-4"}),s.jsx("span",{children:"Security & compliance overview"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fn,{className:"h-4 w-4"}),s.jsx("span",{children:"Q&A session with our experts"})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[s.jsx(ue,{type:"button",variant:"outline",className:"flex-1",onClick:t,children:"Cancel"}),s.jsx(ue,{type:"submit",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(lb,{className:"h-4 w-4 mr-2"}),"Request Demo"]})})]}),s.jsx("div",{className:"text-xs text-slate-500 text-center",children:"We'll contact you within 24 hours to schedule your personalized demo."})]})]})})},pb=()=>{const e=Ia(),{token:t,user:r,hasLoggedInBefore:n}=jt(d=>d.auth),a=!!t&&!!r,[i,o]=g.useState(!1),l=()=>{o(!i)},c=()=>{o(!1)};return s.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white transition-all duration-300 text-black shadow-sm",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx(dr,{to:"/home",onClick:c,children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("span",{className:"text-xl w-40 h-30 font-bold transition-colors duration-300",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1759998717/shuletrack_landscape_logo-100_gcmpht__1_-removebg-preview_kibgoq.png",alt:"Shuletrack"})})})}),s.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[s.jsx(dr,{to:"/home",className:"text-black transition-colors font-medium hover:text-[#f7c624] hover:scale-105 transform duration-200",children:"Home"}),s.jsx(dr,{to:"/about",className:"text-black transition-colors font-medium hover:text-[#f7c624] hover:scale-105 transform duration-200",children:"About Us"}),s.jsx(dr,{to:"/features",className:"text-black transition-colors font-medium hover:text-[#f7c624] hover:scale-105 transform duration-200",children:"Features"}),s.jsx(dr,{to:"/contact",className:"text-black transition-colors font-medium hover:text-[#f7c624] hover:scale-105 transform duration-200",children:"Contact"})]}),s.jsx("div",{className:"hidden md:block",children:s.jsx(ue,{className:"bg-[#10213f] hover:bg-[#f7c624] text-white border-0 px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105",onClick:()=>{e(a?"/":n?"/login":"/register")},children:a?"Dashboard":n?"Login":"Get Started"})}),s.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:l,"aria-label":"Toggle menu",children:i?s.jsx(il,{className:"h-6 w-6 text-black"}):s.jsx(gE,{className:"h-6 w-6 text-black"})})]})}),i&&s.jsx("div",{className:"md:hidden bg-white border-t border-gray-200 shadow-lg",children:s.jsxs("div",{className:"px-4 py-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 pb-3 border-b border-gray-200",children:[s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1759998717/shuletrack_landscape_logo-100_gcmpht__1_-removebg-preview_kibgoq.png",alt:"Shuletrack",className:"h-8 w-auto"}),s.jsx("span",{className:"text-lg font-bold text-[#f7c624]",children:"Shuletrack"})]}),s.jsx(dr,{to:"/home",className:"block px-4 py-3 text-black font-medium hover:bg-gray-100 hover:text-[#f7c624] rounded-lg transition-colors",onClick:c,children:"Home"}),s.jsx(dr,{to:"/about",className:"block px-4 py-3 text-black font-medium hover:bg-gray-100 hover:text-[#f7c624] rounded-lg transition-colors",onClick:c,children:"About Us"}),s.jsx(dr,{to:"/features",className:"block px-4 py-3 text-black font-medium hover:bg-gray-100 hover:text-[#f7c624] rounded-lg transition-colors",onClick:c,children:"Features"}),s.jsx(dr,{to:"/contact",className:"block px-4 py-3 text-black font-medium hover:bg-gray-100 hover:text-[#f7c624] rounded-lg transition-colors",onClick:c,children:"Contact"}),s.jsx("div",{className:"pt-2",children:s.jsx(ue,{className:"w-full bg-[#10213f] hover:bg-[#f7c624] text-white border-0 px-6 py-3 rounded-lg font-medium transition-all duration-200",onClick:()=>{c(),e(a?"/":n?"/login":"/register")},children:a?"Dashboard":n?"Login":"Get Started"})})]})})]})},xb=()=>{const[e,t]=g.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("footer",{className:"bg-gradient-to-r from-slate-600 via-slate-800 to-slate-900 text-white py-16 shadow-xl shadow-black/30",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-2",children:[s.jsx("div",{className:"flex items-center space-x-2 mb-6",children:s.jsx("div",{className:"w-40 flex items-center justify-center",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1759998717/shuletrack_landscape_logo-100_gcmpht__1_-removebg-preview_kibgoq.png",alt:"Shuletrack"})})}),s.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed max-w-md",children:"Modern school transportation management platform that helps schools improve safety, efficiency, and parent satisfaction."}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Nr,{className:"h-5 w-5 text-[#f7c624] mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-white mb-1",children:"Head Office"}),s.jsx("p",{className:"text-slate-300 text-sm",children:"Gesora Road, Utawala, Nairobi"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ga,{className:"h-5 w-5 text-[#f7c624] mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-white mb-1",children:"Mailing Address"}),s.jsx("p",{className:"text-slate-300 text-sm",children:s.jsx("a",{href:"mailto:info@eujimsloutions.com",className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"Inquiry: info@eujimsloutions.com"})}),s.jsx("p",{className:"text-slate-300 text-sm",children:s.jsx("a",{href:"mailto:support@eujimsolutions.com",className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"Support: support@eujimsolutions.com"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Za,{className:"h-5 w-5 text-[#f7c624] mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-white mb-1",children:"Business Talk"}),s.jsx("p",{className:"text-slate-300 text-sm",children:s.jsx("a",{href:"tel:+254113281424",className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"+254 113281424"})})]})]})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"tel:+254113281424",className:"text-slate-400 hover:text-[#f7c624] transition-colors",title:"Call us",children:s.jsx(Za,{className:"h-5 w-5"})}),s.jsx("a",{href:"mailto:info@eujimsloutions.com",className:"text-slate-400 hover:text-[#f7c624] transition-colors",title:"Email us",children:s.jsx(ga,{className:"h-5 w-5"})}),s.jsx("a",{href:"https://maps.google.com/?q=Gesora+Road,+Utawala,+Nairobi",target:"_blank",rel:"noopener noreferrer",className:"text-slate-400 hover:text-[#f7c624] transition-colors",title:"Visit our office",children:s.jsx(Nr,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Product"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsx("li",{children:s.jsx(dr,{to:"/features",className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"Features"})}),s.jsx("li",{children:s.jsx("button",{onClick:()=>t(!0),className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"Demo"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Company"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsx("li",{children:s.jsx(dr,{to:"/about",className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"About Us"})}),s.jsx("li",{children:s.jsx(dr,{to:"/contact",className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"Contact"})})]})]})]}),s.jsx("div",{className:"border-t border-slate-800 mt-12 pt-8 text-center",children:s.jsxs("p",{className:"text-slate-400",children:[" ",new Date().getFullYear()," Shule Track. Powered by"," ",s.jsx("a",{href:"https://eujimsolutions.com",target:"_blank",rel:"noopener noreferrer",className:"text-[#f7c624] hover:text-[#f7c624]/80 transition-colors",children:"EUJIM SOLUTIONS"}),"."]})})]})}),s.jsx(nS,{isOpen:e,onClose:()=>t(!1)})]})},aW=()=>{const[e,t]=g.useState(!1);Ia();const{token:r,user:n,hasLoggedInBefore:a}=jt(l=>l.auth);bs.useEffect(()=>{document.title="Shuletrack - Modern School Transportation Management"},[]);const i=[{number:"50+",label:"Schools Trust Us"},{number:"5000+",label:"Students Transported"},{number:"99.9%",label:"Uptime Reliability"},{number:"4.9/5",label:"Customer Rating"}],o=[{icon:s.jsx(qi,{className:"h-8 w-8 text-[#f7c624]"}),title:"Real-time GPS Tracking",description:"Track every school bus in real-time with precise location data."},{icon:s.jsx(Ln,{className:"h-8 w-8 text-[#f7c624]"}),title:"Advanced Safety Features",description:"Comprehensive safety monitoring with speed alerts and emergency response."},{icon:s.jsx(pE,{className:"h-8 w-8 text-[#f7c624]"}),title:"Biometric Login",description:"Secure biometric authentication for accurate attendance tracking."},{icon:s.jsx(ws,{className:"h-8 w-8 text-[#f7c624]"}),title:"Parent Portal",description:"Dedicated mobile app for parents to track their child's bus."},{icon:s.jsx(fn,{className:"h-8 w-8 text-[#f7c624]"}),title:"Live Updates",description:"Instant notifications for delays, route changes, and arrival times."},{icon:s.jsx(_o,{className:"h-8 w-8 text-[#f7c624]"}),title:"Analytics Dashboard",description:"Comprehensive reporting to optimize operations and efficiency."}];return s.jsxs("div",{className:"min-h-screen bg-slate-900 scroll-smooth",children:[s.jsx(pb,{}),s.jsxs("section",{className:"relative min-h-screen flex items-center bg-gradient-to-r from-slate-600 via-slate-800 to-slate-900 shadow-xl shadow-black/30",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.3) 1px, transparent 0)",backgroundSize:"50px 50px"}})}),s.jsx("div",{className:"max-w-7xl mx-auto mt-5 px-4 sm:px-6 lg:px-8 w-full relative z-10",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[s.jsxs("div",{className:"text-left space-y-6",children:[s.jsx("div",{className:"opacity-100 mt-16 sm:mt-8 x:mt-16",children:s.jsxs(De,{variant:"secondary",className:"inline-flex items-center bg-[#f7c624] text-white px-4 py-2 rounded-full font-medium",children:[s.jsx(Ef,{className:"h-4 w-4 mr-2"}),"Trusted by 50+ Schools Nationwide"]})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white leading-tight",children:[s.jsx("span",{className:"block",children:"Modern School"}),s.jsx("span",{className:"text-[#f7c624] block",children:"Transportation"}),s.jsx("span",{className:"text-xl md:text-2xl font-light text-white/80 block mt-2",children:"Made Simple & Secure"})]})}),s.jsx("p",{className:"text-lg text-white/80 leading-relaxed max-w-xl",children:"Transform your school transportation with our enterprise-grade platform. Real-time GPS tracking, AI-powered route optimization, and complete transparency for parents, drivers, and administrators."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs(ue,{size:"lg",className:"px-8 py-3 bg-[#f7c624] hover:bg-[#f7c624]/90 text-white border-0 rounded-lg font-semibold",onClick:()=>t(!0),children:[s.jsx(q0,{className:"h-4 w-4 mr-2"}),"Request Demo"]}),s.jsx(dr,{to:"/about",children:s.jsxs(ue,{variant:"outline",size:"lg",className:"px-8 py-3 border-2 border-white/40 text-white hover:bg-white/20 rounded-lg font-semibold",children:[s.jsx(Pf,{className:"h-4 text-black w-4 mr-2"}),s.jsx("span",{className:"text-black",children:"Learn More"})]})})]}),s.jsxs("div",{className:"flex items-center space-x-6 pt-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex -space-x-2",children:[1,2,3,4].map(l=>s.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/20 bg-[#f7c624] flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:l})},l))}),s.jsx("span",{className:"text-white/70 text-sm",children:"Join 50+ schools"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(l=>s.jsx(Ef,{className:"h-4 w-4 text-[#f7c624] fill-current"},l))}),s.jsx("span",{className:"text-white/70 text-sm",children:"4.9/5 rating"})]})]})]}),s.jsx("div",{className:"relative flex items-center justify-center",children:s.jsxs("div",{className:"relative w-full max-w-xl",children:[s.jsx("div",{className:"relative",children:s.jsx("div",{className:"relative rounded-2xl p-8",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1756278735/Yellow_School_Bus_on_White_Background_iihnb2.png",alt:"School Bus Transportation",className:"w-full h-auto object-contain"})})}),s.jsx("div",{className:"absolute bottom-4 left-4 bg-black/70 rounded-lg px-4 py-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-[#f7c624] rounded-full"}),s.jsx("span",{className:"text-white text-sm font-medium",children:"Live Tracking Active"})]})}),s.jsx("div",{className:"absolute top-4 right-4 bg-black/70 rounded-lg px-4 py-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-[#f7c624] rounded-full"}),s.jsx("span",{className:"text-white text-sm font-medium",children:"GPS System Online"})]})})]})})]})})]}),s.jsx("section",{className:"py-12 bg-slate-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:i.map((l,c)=>s.jsxs("div",{className:"text-center group hover:scale-105 transition-transform duration-300",children:[s.jsx("div",{className:"text-4xl md:text-5xl font-bold text-[#f7c624] mb-3 group-hover:text-[#f7c624]/80 transition-colors",children:l.number}),s.jsx("div",{className:"text-slate-100 group-hover:text-slate-600 transition-colors font-medium",children:l.label})]},c))})})}),s.jsx("section",{className:"py-16 bg-slate-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx(De,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"Features"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Everything You Need for",s.jsx("span",{className:"text-[#f7c624] block",children:"Safe Transportation"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed",children:"Our comprehensive platform provides all the tools needed to manage school transportation efficiently and safely."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:o.map((l,c)=>s.jsxs(ze,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 group bg-slate-700 rounded-2xl overflow-hidden p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"group-hover:scale-110 transition-transform duration-300",children:l.icon}),s.jsx("h3",{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:l.title})]}),s.jsx("p",{className:"text-base text-slate-400 leading-relaxed",children:l.description})]},c))}),s.jsx("div",{className:"text-center",children:s.jsx(dr,{to:"/features",children:s.jsxs(ue,{size:"lg",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:["View All Features",s.jsx(Pf,{className:"h-4 w-4 ml-2"})]})})})]})}),s.jsx("section",{className:"py-16 bg-slate-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs(ze,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden p-8 text-center",children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"About Us"}),s.jsx("p",{className:"text-slate-300 mb-6",children:"Learn more about our mission, vision, and why schools choose Shuletrack."}),s.jsx(dr,{to:"/about",children:s.jsx(ue,{variant:"outline",className:"border-[#f7c624] text-[#f7c624] hover:bg-[#f7c624] hover:text-white",children:"Learn More"})})]}),s.jsxs(ze,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden p-8 text-center",children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Features"}),s.jsx("p",{className:"text-slate-300 mb-6",children:"Explore our comprehensive platform features and capabilities."}),s.jsx(dr,{to:"/features",children:s.jsx(ue,{variant:"outline",className:"border-[#f7c624] text-[#f7c624] hover:bg-[#f7c624] hover:text-white",children:"View Features"})})]}),s.jsxs(ze,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden p-8 text-center",children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Contact Us"}),s.jsx("p",{className:"text-slate-300 mb-6",children:"Get in touch with our team to learn how we can help your school."}),s.jsx(dr,{to:"/contact",children:s.jsx(ue,{variant:"outline",className:"border-[#f7c624] text-[#f7c624] hover:bg-[#f7c624] hover:text-white",children:"Contact Us"})})]})]})})}),s.jsx("section",{className:"py-20 bg-slate-900",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Ready to Transform Your",s.jsx("span",{className:"block",children:"School Transportation?"})]}),s.jsx("p",{className:"text-xl text-slate-300 mb-10 leading-relaxed max-w-2xl mx-auto",children:"Join hundreds of schools that have already improved their transportation operations with Shuletrack. Get started today and see the difference."}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:s.jsxs(ue,{size:"lg",className:"text-lg px-8 py-6 bg-white text-[#f7c624] hover:bg-[#f7c624]/10 hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl rounded-xl font-semibold",onClick:()=>t(!0),children:[s.jsx(q0,{className:"h-5 w-5 mr-3"}),"Request a Demo"]})})]})}),s.jsx(xb,{}),s.jsx(nS,{isOpen:e,onClose:()=>t(!1)})]})},iW=()=>{const[e,t]=g.useState(new Set);g.useEffect(()=>{document.title="About Us - Shuletrack | School Transportation Management";const n={threshold:.1,rootMargin:"0px 0px -50px 0px"},a=new IntersectionObserver(o=>{o.forEach(l=>{if(l.isIntersecting){const c=l.target.getAttribute("id");c&&!e.has(c)&&t(d=>new Set([...d,c]))}})},n);return document.querySelectorAll("section[id]").forEach(o=>a.observe(o)),()=>a.disconnect()},[e]);const r=[{number:"50+",label:"Schools Trust Us"},{number:"5000+",label:"Students Transported"},{number:"99.9%",label:"Uptime Reliability"},{number:"4.9/5",label:"Customer Rating"}];return s.jsxs("div",{className:"min-h-screen bg-slate-900",children:[s.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .section-animate {
          opacity: 0;
          transform: translateY(20px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .section-animate.animate {
          opacity: 1;
          transform: translateY(0);
        }
        
        .card-animate {
          opacity: 0;
          transform: translateY(30px);
          transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-animate.animate {
          opacity: 1;
          transform: translateY(0);
        }
      `}),s.jsx(pb,{}),s.jsx("div",{className:"pt-24 pb-8 bg-slate-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:["About ",s.jsx("span",{className:"text-[#f7c624]",children:"Shuletrack"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto",children:"Leading the future of school transportation in Africa"})]})}),s.jsx("section",{id:"stats",className:`py-12 bg-slate-900 section-animate ${e.has("stats")?"animate":""}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:r.map((n,a)=>s.jsxs("div",{className:`text-center group hover:scale-105 transition-transform duration-300 card-animate ${e.has("stats")?"animate":""}`,style:{transitionDelay:`${a*100}ms`},children:[s.jsx("div",{className:"text-4xl md:text-5xl font-bold text-[#f7c624] mb-3 group-hover:text-[#f7c624]/80 transition-colors",children:n.number}),s.jsx("div",{className:"text-slate-100 group-hover:text-slate-600 transition-colors font-medium",children:n.label})]},a))})})}),s.jsx("section",{id:"mission",className:`py-16 bg-slate-900 section-animate ${e.has("mission")?"animate":""}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-[#f7c624] to-[#10213f] rounded-xl flex items-center justify-center",children:s.jsx(Oq,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Our Mission"})]}),s.jsx("p",{className:"text-lg text-slate-300 leading-relaxed",children:"To provide schools with innovative transportation solutions that enhance safety, improve efficiency, and create peace of mind for parents and administrators through cutting-edge technology and exceptional service."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-300 text-sm",children:"Enhance student safety"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-300 text-sm",children:"Improve operational efficiency"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-300 text-sm",children:"Provide peace of mind"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-[#f7c624] to-[#10213f] rounded-xl flex items-center justify-center",children:s.jsx(qr,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Our Vision"})]}),s.jsx("p",{className:"text-lg text-slate-100 leading-relaxed",children:"To become the leading provider of school transportation technology in Africa, making safe and efficient school transportation accessible to every educational institution while setting global standards for innovation."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Lead African innovation"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Set global standards"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Universal accessibility"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-[#f7c624] to-[#10213f] rounded-xl flex items-center justify-center",children:s.jsx(Rq,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-slate-100",children:"Our Future"})]}),s.jsx("p",{className:"text-lg text-slate-100 leading-relaxed",children:"We envision a future where every school in Africa has access to world-class transportation technology, creating safer, more efficient, and environmentally sustainable school transportation systems."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"AI-powered solutions"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Green transportation"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Global expansion"})]})]})]})]}),s.jsxs("div",{className:"mt-16",children:[s.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-8 text-center",children:"Why Choose Shule Track?"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-[#f7c624] rounded-full flex items-center justify-center",children:s.jsx(Es,{className:"h-4 w-4 text-[#f7c624]"})}),s.jsx("p",{className:"text-slate-100",children:"Local expertise with global standards"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-[#f7c624] rounded-full flex items-center justify-center",children:s.jsx(Es,{className:"h-4 w-4 text-[#f7c624]"})}),s.jsx("p",{className:"text-slate-100",children:"24/7 customer support in your timezone"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-[#f7c624]/20 rounded-full flex items-center justify-center",children:s.jsx(Es,{className:"h-4 w-4 text-[#f7c624]"})}),s.jsx("p",{className:"text-slate-100",children:"Customized solutions for African schools"})]})]})]})]})}),s.jsx("section",{id:"benefits",className:`py-16 bg-slate-900 section-animate ${e.has("benefits")?"animate":""}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-8 leading-tight",children:["Join hundreds of schools that have",s.jsx("span",{className:"text-[#f7c624] block",children:"transformed their operations"})]}),s.jsx("p",{className:"text-xl text-slate-300 mb-10 leading-relaxed",children:"Our platform has helped schools across the country improve their transportation efficiency, safety, and parent satisfaction."}),s.jsx(dr,{to:"/features",children:s.jsx(ue,{size:"lg",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Explore Our Features"})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1753866768/images__1_-removebg-preview_gkn47i.png",alt:"School Bus Fleet",className:"w-full h-auto rounded-3xl"}),s.jsx(ze,{className:"absolute -bottom-8 -right-8 p-8 shadow-2xl bg-slate-800 rounded-2xl border border-slate-700",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-[#f7c624] mb-2",children:"50+"}),s.jsx("div",{className:"text-lg text-slate-100 mb-3",children:"Schools Trust Us"}),s.jsx("div",{className:"flex justify-center space-x-1 mb-2",children:[...Array(5)].map((n,a)=>s.jsx(Ef,{className:"h-5 w-5 text-yellow-400 fill-current"},a))}),s.jsx("p",{className:"text-sm text-slate-500",children:"4.9/5 average rating"})]})})]})]})})}),s.jsx("section",{id:"cta",className:`py-20 bg-slate-900 section-animate ${e.has("cta")?"animate":""}`,children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Get Started?"}),s.jsx("p",{className:"text-xl text-slate-300 mb-10 leading-relaxed max-w-2xl mx-auto",children:"Join us in revolutionizing school transportation. Contact us today to learn more."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:[s.jsx(dr,{to:"/contact",children:s.jsx(ue,{size:"lg",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Contact Us"})}),s.jsx(dr,{to:"/features",children:s.jsx(ue,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/20",children:"Learn More"})})]})]})}),s.jsx(xb,{})]})},oW=()=>{const[e,t]=g.useState(new Set);g.useEffect(()=>{document.title="Features - Shuletrack | School Bus Tracking & Management";const i={threshold:.1,rootMargin:"0px 0px -50px 0px"},o=new IntersectionObserver(c=>{c.forEach(d=>{if(d.isIntersecting){const u=d.target.getAttribute("id");u&&!e.has(u)&&t(h=>new Set([...h,u]))}})},i);return document.querySelectorAll("section[id]").forEach(c=>o.observe(c)),()=>o.disconnect()},[e]);const r=[{icon:s.jsx(qi,{className:"h-8 w-8 text-[#f7c624]"}),title:"Real-time GPS Tracking",description:"Track every school bus in real-time with precise location data and live updates for parents and administrators.",ticks:["Live location updates every 30 seconds","Route deviation alerts","ETA predictions","Historical route tracking","Multi-device access"]},{icon:s.jsx(Ln,{className:"h-8 w-8 text-[#f7c624]"}),title:"Advanced Safety Features",description:"Comprehensive safety monitoring including speed alerts, route compliance, and emergency response systems.",ticks:["Speed monitoring & alerts","Emergency SOS system","Driver behavior tracking","Weather condition alerts","Real-time incident reporting"]},{icon:s.jsx(pE,{className:"h-8 w-8 text-[#f7c624]"}),title:"Biometric Login for Students",description:"Secure biometric authentication for students to check in when dropped off and picked up, ensuring accurate attendance tracking.",ticks:["Fingerprint & facial recognition","Automatic attendance tracking","Drop-off & pick-up verification","Parent notification system","Secure data encryption"]},{icon:s.jsx(ws,{className:"h-8 w-8 text-[#f7c624]"}),title:"Parent Portal",description:"Dedicated mobile app for parents to track their child's bus location and receive real-time notifications.",ticks:["Real-time bus tracking","Push notifications","Multiple child support","Schedule management","Direct communication with drivers"]},{icon:s.jsx(fn,{className:"h-8 w-8 text-[#f7c624]"}),title:"Live Updates",description:"Instant notifications for delays, route changes, and arrival times to keep everyone informed.",ticks:["Delay notifications","Route change alerts","Arrival time updates","Weather-related updates","Emergency announcements"]},{icon:s.jsx(_o,{className:"h-8 w-8 text-[#f7c624]"}),title:"Analytics Dashboard",description:"Comprehensive reporting and analytics to optimize operations and improve efficiency.",ticks:["Performance metrics","Cost analysis reports","Route optimization data","Safety incident tracking","Custom report generation"]}],n=[{icon:s.jsx(qi,{className:"h-12 w-12 text-[#f7c624]"}),title:"GPS Tracking",description:"Real-time location monitoring for every school bus with precise GPS coordinates and live updates every 30 seconds.",ticks:["Live location updates","Route history tracking","Speed monitoring"]},{icon:s.jsx(Ln,{className:"h-12 w-12 text-[#f7c624]"}),title:"Safety Monitoring",description:"Advanced safety protocols with real-time alerts for speed violations, route deviations, and emergency situations.",ticks:["Speed limit alerts","Emergency response","Driver behavior monitoring"]},{icon:s.jsx(Nr,{className:"h-12 w-12 text-[#f7c624]"}),title:"Route Optimization",description:"AI-powered route planning that optimizes pickups, drop-offs, and fuel efficiency while reducing travel time.",ticks:["AI route planning","Fuel cost reduction","Traffic optimization"]},{icon:s.jsx(Dq,{className:"h-12 w-12 text-[#f7c624]"}),title:"Mobile App",description:"Dedicated mobile applications for drivers, parents, and administrators with real-time notifications and updates.",ticks:["Driver app","Parent portal","Admin dashboard"]},{icon:s.jsx(ib,{className:"h-12 w-12 text-[#f7c624]"}),title:"Analytics & Reports",description:"Comprehensive reporting and analytics to optimize operations, reduce costs, and improve efficiency.",ticks:["Performance metrics","Cost analysis","Custom reports"]},{icon:s.jsx(xE,{className:"h-12 w-12 text-[#f7c624]"}),title:"Security & Compliance",description:"Enterprise-grade security with FERPA compliance and data protection for student safety and privacy.",ticks:["FERPA compliant","Data encryption","Access controls"]}],a=["Reduce transportation costs by up to 30%","Improve safety with real-time monitoring","Enhance parent satisfaction and communication","Streamline administrative operations","Ensure compliance with transportation regulations","Provide data-driven insights for optimization"];return s.jsxs("div",{className:"min-h-screen bg-slate-900",children:[s.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .section-animate {
          opacity: 0;
          transform: translateY(20px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .section-animate.animate {
          opacity: 1;
          transform: translateY(0);
        }
        
        .card-animate {
          opacity: 0;
          transform: translateY(30px);
          transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-animate.animate {
          opacity: 1;
          transform: translateY(0);
        }
      `}),s.jsx(pb,{}),s.jsx("div",{className:"pt-24 pb-8 bg-slate-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:["Our ",s.jsx("span",{className:"text-[#f7c624]",children:"Features"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto",children:"Everything you need for safe and efficient school transportation"})]})}),s.jsx("section",{id:"features",className:`py-16 bg-slate-900 section-animate ${e.has("features")?"animate":""}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((i,o)=>s.jsxs(ze,{className:`border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 group bg-slate-700 rounded-2xl overflow-hidden card-animate ${e.has("features")?"animate":""}`,style:{transitionDelay:`${o*100}ms`},children:[s.jsx(Xe,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"group-hover:scale-110 transition-transform duration-300",children:i.icon}),s.jsx(tt,{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:i.title})]})}),s.jsxs(Ue,{children:[s.jsx(Ws,{className:"text-base group-hover:text-slate-300 transition-colors leading-relaxed text-slate-400 mb-6",children:i.description}),s.jsx("div",{className:"space-y-3",children:i.ticks.map((l,c)=>s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Es,{className:"h-3 w-3 text-white"})}),s.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:l})]},c))})]})]},o))})})}),s.jsx("section",{id:"benefits",className:`py-16 bg-slate-900 section-animate ${e.has("benefits")?"animate":""}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"text-center mb-12",children:s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Why Schools Choose",s.jsx("span",{className:"text-[#f7c624] block",children:"Shuletrack"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:a.map((i,o)=>s.jsxs("div",{className:"flex items-center space-x-4 group hover:translate-x-2 transition-transform duration-300",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-[#f7c624]/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:s.jsx(Es,{className:"h-5 w-5 text-[#f7c624]"})}),s.jsx("span",{className:"text-slate-300 group-hover:text-[#f7c624] transition-colors text-lg",children:i})]},o))})]})}),s.jsx("section",{id:"fleet",className:`py-16 bg-slate-900 section-animate ${e.has("fleet")?"animate":""}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(De,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"Fleet Management"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Modern School Bus Fleet",s.jsx("span",{className:"text-[#f7c624] block",children:"Management"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed",children:"See how our platform manages real school bus fleets with advanced tracking and safety features."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((i,o)=>s.jsxs(ze,{className:`border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden group card-animate ${e.has("fleet")?"animate":""}`,style:{transitionDelay:`${o*100}ms`},children:[s.jsxs(Xe,{className:"pb-4",children:[s.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:i.icon}),s.jsx(tt,{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:i.title})]}),s.jsxs(Ue,{children:[s.jsx(Ws,{className:"text-base group-hover:text-slate-300 transition-colors leading-relaxed text-slate-300 mb-6",children:i.description}),s.jsx("div",{className:"space-y-3",children:i.ticks.map((l,c)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Es,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:l})]},c))})]})]},o))})]})}),s.jsx("section",{id:"cta",className:`py-20 bg-slate-900 section-animate ${e.has("cta")?"animate":""}`,children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Ready to Transform Your",s.jsx("span",{className:"block",children:"School Transportation?"})]}),s.jsx("p",{className:"text-xl text-slate-300 mb-10 leading-relaxed max-w-2xl mx-auto",children:"Join hundreds of schools that have already improved their transportation operations with Shuletrack."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:[s.jsx(dr,{to:"/contact",children:s.jsx(ue,{size:"lg",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Contact Us"})}),s.jsx(dr,{to:"/about",children:s.jsx(ue,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/20",children:"Learn About Us"})})]})]})}),s.jsx(xb,{})]})},lW=()=>{const{toast:e}=mr(),t=rr(),[r,n]=g.useState({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",message:""}),[a,i]=g.useState(!1),o=c=>{const{name:d,value:u}=c.target;n(h=>({...h,[d]:u}))},l=async c=>{c.preventDefault(),i(!0);try{const d={first_name:r.first_name.trim(),last_name:r.last_name.trim(),email_address:r.email_address.trim(),school_name:r.school_name.trim(),message:r.message.trim()},u=Object.entries(d).filter(([y,x])=>!x).map(([y])=>y);if(u.length>0){e({title:"Error",description:`Please fill in all required fields: ${u.join(", ")}`,variant:"destructive"});return}const h=[];r.position&&h.push(`Position: ${r.position}`),r.phone_number&&h.push(`Phone: ${r.phone_number}`);const p=r.message+(h.length>0?`

Additional Information:
${h.join(`
`)}`:""),f={first_name:d.first_name,last_name:d.last_name,email_address:d.email_address,school_name:d.school_name,message:p,message_type:"inquiry_message"};await t(wp(f)).unwrap(),e({title:"Message Sent!",description:"We'll get back to you within 24 hours."}),n({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",message:""})}catch(d){e({title:"Error",description:typeof d=="string"?d:"Failed to send message. Please try again.",variant:"destructive"})}finally{i(!1)}};return s.jsxs("form",{onSubmit:l,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"first_name",className:"text-white font-medium",children:"First Name *"}),s.jsx($e,{id:"first_name",name:"first_name",type:"text",value:r.first_name,onChange:o,placeholder:"John",required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"last_name",className:"text-white font-medium",children:"Last Name *"}),s.jsx($e,{id:"last_name",name:"last_name",type:"text",value:r.last_name,onChange:o,placeholder:"Doe",required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"email_address",className:"text-white font-medium",children:"Email Address *"}),s.jsx($e,{id:"email_address",name:"email_address",type:"email",value:r.email_address,onChange:o,placeholder:"john@school.edu",required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"phone_number",className:"text-white font-medium",children:"Phone Number"}),s.jsx($e,{id:"phone_number",name:"phone_number",type:"tel",value:r.phone_number,onChange:o,placeholder:"+1 (555) 123-4567",className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"school_name",className:"text-white font-medium",children:"School/District Name *"}),s.jsx($e,{id:"school_name",name:"school_name",type:"text",value:r.school_name,onChange:o,placeholder:"Your School District",required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"position",className:"text-white font-medium",children:"Your Position"}),s.jsx($e,{id:"position",name:"position",type:"text",value:r.position,onChange:o,placeholder:"Principal, Admin, etc.",className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"message",className:"text-white font-medium",children:"Message *"}),s.jsx(Kn,{id:"message",name:"message",value:r.message,onChange:o,placeholder:"Tell us about your transportation needs and how we can help...",rows:4,required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors resize-none placeholder:text-slate-400"})]}),s.jsx(ue,{type:"submit",className:"w-full bg-[#f7c624] hover:bg-[#f7c624]/90 text-white py-3 rounded-xl font-medium transition-all duration-200 hover:scale-105",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(lb,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})},cW=()=>{const[e,t]=g.useState(null),[r,n]=g.useState(!1),[a,i]=g.useState(new Set);g.useEffect(()=>{document.title="Contact Us - Shuletrack | Get in Touch";const d={threshold:.1,rootMargin:"0px 0px -50px 0px"},u=new IntersectionObserver(p=>{p.forEach(f=>{if(f.isIntersecting){const y=f.target.getAttribute("id");y&&!a.has(y)&&i(x=>new Set([...x,y]))}})},d);return document.querySelectorAll("section[id]").forEach(p=>u.observe(p)),()=>u.disconnect()},[a]);const o=[{icon:s.jsx(Nr,{className:"h-6 w-6 text-[#f7c624]"}),title:"Head Office",description:"Visit our headquarters",value:"Gesora Road, Utawala, Nairobi",link:"https://maps.google.com/?q=Gesora+Road,+Utawala,+Nairobi"},{icon:s.jsx(ga,{className:"h-6 w-6 text-[#f7c624]"}),title:"Mailing Address",description:"Get in touch with our team",value:"Inquiry:info@shuletrack.com",link:"mailto:info@shuletrack.com"},{icon:s.jsx(ga,{className:"h-6 w-6 text-[#f7c624]"}),title:"Support Email",description:"Technical support and assistance",value:"Support: support@shuletrack.com",link:"mailto:support@shuletrack.com"},{icon:s.jsx(Za,{className:"h-6 w-6 text-[#f7c624]"}),title:"Business Talk",description:"Call us anytime",value:"+254 113281424",link:"tel:+254113281424"}],l=[{name:"Sarah Johnson",role:"School Principal",content:"The transportation system has revolutionized how we manage our school buses. Parents love the real-time updates!",rating:5,avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face"},{name:"Michael Chen",role:"Transportation Director",content:"The analytics and reporting features have made our operations so much more efficient. Highly recommended!",rating:5,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face&sat=-100&brightness=0.8&contrast=1.2"},{name:"Lisa Rodriguez",role:"Parent",content:"Knowing exactly where my child's bus is gives me complete peace of mind. The app is fantastic!",rating:5,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face&sat=-100&brightness=0.8&contrast=1.2"}],c=[{question:"How does the GPS tracking work?",answer:"Our system uses advanced GPS technology to provide real-time location data for every school bus. Parents and administrators can track buses through our mobile app or web dashboard with updates every 30 seconds."},{question:"Is the system secure and private?",answer:"Yes, we prioritize security and privacy. All data is encrypted, and we comply with FERPA and other educational privacy regulations. Student information is protected with industry-standard security measures."},{question:"Can parents track multiple children?",answer:"Absolutely! Parents can track multiple children from a single account. Each child's bus location and schedule is clearly displayed with individual notifications and updates."},{question:"What happens during emergencies?",answer:"Our system includes emergency protocols with instant alerts to administrators, drivers, and parents. We provide real-time communication channels and emergency response coordination."},{question:"How long does implementation take?",answer:"Most schools are up and running within 2-3 weeks. Our team handles installation, training, and setup to ensure a smooth transition with minimal disruption to your operations."}];return s.jsxs("div",{className:"min-h-screen bg-slate-900",children:[s.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .section-animate {
          opacity: 0;
          transform: translateY(20px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .section-animate.animate {
          opacity: 1;
          transform: translateY(0);
        }
        
        .card-animate {
          opacity: 0;
          transform: translateY(30px);
          transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-animate.animate {
          opacity: 1;
          transform: translateY(0);
        }
      `}),s.jsx(pb,{}),s.jsx("div",{className:"pt-24 pb-8 bg-slate-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:["Contact ",s.jsx("span",{className:"text-[#f7c624]",children:"Us"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto",children:"Get in touch with our team. We're here to help!"})]})}),s.jsx("section",{id:"contact",className:`py-16 bg-slate-900 section-animate ${a.has("contact")?"animate":""}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-2 lg:px-2",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Let's Start a Conversation"}),s.jsx("p",{className:"text-lg text-slate-300 leading-relaxed mb-8",children:"Our team is here to help you understand how Shuletrack can transform your school transportation operations. We'll provide a personalized demo and answer all your questions."})]}),s.jsx("div",{className:"space-y-6",children:o.map((d,u)=>s.jsxs("div",{className:"flex items-start space-x-4 group hover:translate-x-2 transition-transform duration-300",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-[#f7c624]/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:d.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white text-lg mb-1",children:d.title}),s.jsx("div",{className:"text-slate-300 mb-2",children:d.description}),s.jsx("div",{className:"text-[#f7c624] font-medium",children:d.link?s.jsx("a",{href:d.link,target:d.link.startsWith("http")?"_blank":void 0,rel:d.link.startsWith("http")?"noopener noreferrer":void 0,className:"hover:text-[#f7c624]/80 transition-colors",children:d.value}):d.value})]})]},u))}),s.jsxs("div",{className:"bg-slate-700 p-6 rounded-2xl border border-slate-600",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Sq,{className:"h-6 w-6 text-[#f7c624]"}),s.jsx("h4",{className:"text-lg font-semibold text-white",children:"Expert Support"})]}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Our dedicated support team is available 24/7 to help you with any questions or technical issues. We're committed to your success."})]})]}),s.jsxs(ze,{className:"shadow-xl border-0 rounded-2xl overflow-hidden bg-slate-800",children:[s.jsxs(Xe,{className:"bg-slate-700 text-white",children:[s.jsx(tt,{className:"text-2xl",children:"Send us a Message"}),s.jsx(Ws,{className:"text-slate-300",children:"Fill out the form below and we'll get back to you within 24 hours."})]}),s.jsx(Ue,{className:"p-8",children:s.jsx(lW,{})})]})]})})}),s.jsx("section",{id:"testimonials",className:`py-16 bg-slate-900 section-animate ${a.has("testimonials")?"animate":""}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(De,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"Testimonials"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["What Our Customers",s.jsx("span",{className:"text-[#f7c624] block",children:"Say"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed",children:"Hear from school administrators, transportation directors, and parents who have transformed their school transportation with Shuletrack."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:l.map((d,u)=>s.jsx(ze,{className:`border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-800 rounded-2xl overflow-hidden card-animate ${a.has("testimonials")?"animate":""}`,style:{transitionDelay:`${u*100}ms`},children:s.jsxs(Ue,{className:"p-8",children:[s.jsx("div",{className:"flex items-center space-x-1 mb-6",children:[...Array(d.rating)].map((h,p)=>s.jsx(Ef,{className:"h-5 w-5 text-yellow-400 fill-current"},p))}),s.jsxs("p",{className:"text-slate-300 mb-6 leading-relaxed text-lg",children:['"',d.content,'"']}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:d.avatar,alt:d.name,className:"w-12 h-12 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white",children:d.name}),s.jsx("div",{className:"text-slate-300",children:d.role})]})]})]})},u))})]})}),s.jsx("section",{id:"faq",className:`py-16 bg-slate-900 section-animate ${a.has("faq")?"animate":""}`,children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(De,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"FAQ"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Frequently Asked",s.jsx("span",{className:"text-[#f7c624] block",children:"Questions"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-2xl mx-auto leading-relaxed",children:"Find answers to common questions about our school transportation platform."})]}),s.jsx("div",{className:"space-y-4",children:c.map((d,u)=>s.jsxs(ze,{className:`border border-slate-700 bg-slate-800 rounded-2xl overflow-hidden hover:shadow-lg transition-all duration-200 card-animate ${a.has("faq")?"animate":""}`,style:{transitionDelay:`${u*100}ms`},children:[s.jsxs("button",{onClick:()=>t(e===u?null:u),className:"w-full p-6 text-left flex items-center justify-between hover:bg-slate-700 transition-colors",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:d.question}),e===u?s.jsx(hE,{className:"h-5 w-5 text-slate-300"}):s.jsx(ob,{className:"h-5 w-5 text-slate-300"})]}),e===u&&s.jsx("div",{className:"px-6 pb-6",children:s.jsx("p",{className:"text-slate-300 leading-relaxed",children:d.answer})})]},u))})]})}),s.jsx("section",{id:"cta",className:`py-20 bg-slate-900 section-animate ${a.has("cta")?"animate":""}`,children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Ready to Transform Your",s.jsx("span",{className:"block",children:"School Transportation?"})]}),s.jsx("p",{className:"text-xl text-slate-300 mb-10 leading-relaxed max-w-2xl mx-auto",children:"Join hundreds of schools that have already improved their transportation operations with Shuletrack. Get started today and see the difference."}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:s.jsxs(ue,{size:"lg",className:"text-lg px-8 py-6 bg-white text-[#f7c624] hover:bg-[#f7c624]/10 hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl rounded-xl font-semibold",onClick:()=>n(!0),children:[s.jsx(q0,{className:"h-5 w-5 mr-3"}),"Request a Demo"]})})]})}),s.jsx(xb,{}),s.jsx(nS,{isOpen:r,onClose:()=>n(!1)})]})};function wr({className:e,...t}){return s.jsx("div",{className:nt("animate-pulse rounded-md bg-muted",e),...t})}function dW(){const e=lc(),t=Ia(),{plans:r,loading:n,error:a}=xa(u=>u.subscription),[i,o]=g.useState("month");g.useEffect(()=>{e(sl())},[e]);const l=u=>{localStorage.setItem("selectedSubscriptionPlan",JSON.stringify(u)),t("/register",{state:{selectedPlan:u}})},c=u=>i==="year"?Math.round(u*12*.8):u,d=u=>u.id==="custom"?"Contact us":i==="year"?`KSH ${c(u.price).toLocaleString()}/year`:`KSH ${u.price.toLocaleString()}/${u.billingCycle}`;return n?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 pt-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx(wr,{className:"h-12 w-96 mx-auto mb-4"}),s.jsx(wr,{className:"h-6 w-2/3 mx-auto"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(u=>s.jsx(wr,{className:"h-96 w-full"},u))})]})}):a?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 pt-20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Error Loading Pricing"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Unable to load pricing information. Please try again later."}),s.jsx(ue,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 pt-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx(De,{variant:"secondary",className:"bg-emerald-100 text-emerald-800 mb-4",children:"Pricing Plans"}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose the Perfect Plan for Your School"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Flexible pricing options designed to meet the needs of schools of all sizes. Start with what you need and scale as you grow."})]}),s.jsx("div",{className:"flex justify-center mb-8",children:s.jsxs("div",{className:"bg-white rounded-lg p-1 shadow-sm border",children:[s.jsx("button",{onClick:()=>o("month"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i==="month"?"bg-emerald-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"}),s.jsxs("button",{onClick:()=>o("year"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i==="year"?"bg-emerald-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:["Yearly",s.jsx("span",{className:"ml-1 text-xs bg-emerald-100 text-emerald-800 px-2 py-0.5 rounded",children:"Save 20%"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(u=>{var h;return s.jsxs(ze,{className:`relative h-full transition-all duration-300 hover:shadow-xl ${u.popular?"ring-2 ring-emerald-500 shadow-lg":"hover:scale-105"}`,children:[u.popular&&s.jsx(De,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-emerald-600 text-white",children:"Most Popular"}),s.jsxs(Xe,{className:"text-center pb-4",children:[s.jsx(tt,{className:"text-2xl font-bold text-gray-900",children:u.name}),s.jsx(Ws,{className:"text-gray-600",children:u.description})]}),s.jsxs(Ue,{className:"space-y-6 flex-1",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-gray-900",children:u.id==="custom"?"Custom":`KSH ${c(u.price).toLocaleString()}`}),s.jsx("div",{className:"text-gray-600",children:d(u)}),i==="year"&&u.id!=="custom"&&s.jsxs("div",{className:"text-sm text-green-600 font-medium mt-1",children:["Save KSH"," ",(u.price*12-c(u.price)).toLocaleString(),"/year"]})]}),s.jsx("div",{className:"space-y-3",children:(h=u.features)==null?void 0:h.map((p,f)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Or,{className:"h-5 w-5 text-emerald-600 flex-shrink-0"}),s.jsx("span",{className:"text-gray-700",children:p})]},f))}),s.jsxs(ue,{onClick:()=>l(u),className:`w-full ${u.popular?"bg-emerald-600 hover:bg-emerald-700":"bg-gray-900 hover:bg-gray-800"} text-white`,children:[u.id==="custom"?"Contact Sales":"Get Started",s.jsx(Pf,{className:"ml-2 h-4 w-4"})]})]})]},u.id)})}),s.jsxs("div",{className:"mt-20",children:[s.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"Frequently Asked Questions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Can I change my plan later?"}),s.jsx("p",{className:"text-gray-600",children:"Yes, you can upgrade or downgrade your plan at any time. Changes will be reflected in your next billing cycle."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Is there a setup fee?"}),s.jsx("p",{className:"text-gray-600",children:"No setup fees for any of our plans. You only pay the monthly or yearly subscription fee."})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What payment methods do you accept?"}),s.jsx("p",{className:"text-gray-600",children:"We accept all major credit cards, bank transfers, and mobile money payments for your convenience."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Do you offer a free trial?"}),s.jsx("p",{className:"text-gray-600",children:"Yes, we offer a 14-day free trial for all plans so you can experience our platform before committing."})]})]})]})]})]})})}const uW=()=>{const e=lc(),{registrationLoading:t,registrationError:r,registrationSuccess:n}=xa(te=>te.schools),[a,i]=g.useState(1),o=3,[l,c]=g.useState({schoolName:"",schoolLocation:"",schoolDescription:"",schoolContactNumber:"",schoolEmail:"",longitude:"",latitude:"",operatingHoursStart:"08:00",operatingHoursEnd:"15:00",adminFirstName:"",adminLastName:"",adminEmail:"",adminPassword:"",adminPhoneNumber:""}),[d,u]=g.useState(null),[h,p]=g.useState({}),[f,y]=g.useState(""),[x,j]=g.useState(!1),[v,w]=g.useState(!1),N=Ia(),k=Vi(),{toast:P}=mr();g.useEffect(()=>{var ce;const te=localStorage.getItem("selectedSubscriptionPlan"),O=(ce=k.state)==null?void 0:ce.selectedPlan;O?u(O):te&&u(JSON.parse(te))},[k.state]),g.useEffect(()=>{if(r){let te="Registration Failed",O=r;r.includes("Duplicate entry")&&r.includes("username")?(te="Phone Number Already Registered",O="This phone number is already registered in our system. Please use a different phone number or try logging in."):r.includes("Duplicate entry")&&r.includes("email")?(te="Email Already Registered",O="This email is already registered in our system. Please use a different email or try logging in."):r.includes("Duplicate entry")&&(te="Registration Conflict",O="Some information you provided is already registered in our system. Please check your phone number and email."),P({variant:"destructive",title:te,description:O})}},[r,P]);const E=te=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te),I=te=>{const O=te.replace(/\D/g,"");return!!(O.startsWith("0")&&O.length===10||O.startsWith("254")&&O.length===12||O.startsWith("7")&&O.length===9||te.startsWith("+254")&&te.length===13)},T=te=>{const O=te.replace(/\D/g,"");return O.startsWith("0")?"+254"+O.substring(1):O.startsWith("254")?"+"+O:te.startsWith("+")?te:O.length===9?"+254"+O:te},R=(te,O)=>!te||te.trim()===""?`${O} is required`:"",X=te=>{const O={};return te===1?(Object.entries({schoolName:"School Name",schoolLocation:"School Location",schoolContactNumber:"School Contact Number",schoolEmail:"School Email"}).forEach(([le,Ee])=>{const _e=R(l[le],Ee);_e&&(O[le]=_e)}),l.schoolEmail&&!E(l.schoolEmail)&&(O.schoolEmail="Please enter a valid email address"),l.schoolContactNumber&&!I(l.schoolContactNumber)&&(O.schoolContactNumber="Please enter a valid phone number")):te===2&&(Object.entries({adminFirstName:"Admin First Name",adminLastName:"Admin Last Name",adminEmail:"Admin Email",adminPassword:"Admin Password",adminPhoneNumber:"Admin Phone Number"}).forEach(([le,Ee])=>{const _e=R(l[le],Ee);_e&&(O[le]=_e)}),l.adminPhoneNumber&&!I(l.adminPhoneNumber)&&(O.adminPhoneNumber="Please enter a valid phone number"),l.adminEmail&&!E(l.adminEmail)&&(O.adminEmail="Please enter a valid admin email address"),l.adminPassword&&l.adminPassword.length<6&&(O.adminPassword="Password must be at least 6 characters long")),p(O),Object.keys(O).length===0},[D,C]=g.useState([]),[$,B]=g.useState(!1),[Q,oe]=g.useState(null),ae=zl;g.useEffect(()=>{const te=O=>{O.target.closest(".address-search-container")||B(!1)};return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[]);const U=te=>{Q&&clearTimeout(Q);const O=setTimeout(()=>{te.length>2?Z(te):(C([]),B(!1))},300);oe(O)},Z=async te=>{if(!te.trim()){C([]),B(!1);return}j(!0);try{const O=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(te)}&types=establishment&components=country:ke&key=${ae}`)}`);if(!O.ok)throw new Error(`HTTP error! status: ${O.status}`);const ce=await O.json();ce.predictions&&ce.predictions.length>0?(C(ce.predictions),B(!0)):(C([]),B(!1))}catch{try{const ce=await fetch(`https://corsproxy.io/?${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(te)}&types=establishment&components=country:ke&key=${ae}`)}`);if(ce.ok){const le=await ce.json();if(le.predictions&&le.predictions.length>0){C(le.predictions),B(!0);return}}}catch{}C([]),B(!1),P({variant:"destructive",title:"Search Error",description:"Could not search for locations. Please try again or enter coordinates manually."})}finally{j(!1)}},W=async(te,O)=>{try{const ce=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/details/json?place_id=${te}&fields=formatted_address,geometry&key=${ae}`)}`);if(!ce.ok)throw new Error(`HTTP error! status: ${ce.status}`);const le=await ce.json();if(le.result&&le.result.geometry&&le.result.geometry.location){const{lat:Ee,lng:_e}=le.result.geometry.location;c(Be=>({...Be,longitude:_e.toString(),latitude:Ee.toString(),schoolLocation:le.result.formatted_address||O})),C([]),B(!1),P({title:"Location Selected",description:"Coordinates have been set based on the selected location."})}else throw new Error("No location data found")}catch{try{const le=await fetch(`https://corsproxy.io/?${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/details/json?place_id=${te}&fields=formatted_address,geometry&key=${ae}`)}`);if(le.ok){const Ee=await le.json();if(Ee.result&&Ee.result.geometry&&Ee.result.geometry.location){const{lat:_e,lng:Be}=Ee.result.geometry.location;c(Ge=>({...Ge,longitude:Be.toString(),latitude:_e.toString(),schoolLocation:Ee.result.formatted_address||O})),C([]),B(!1),P({title:"Location Selected",description:"Coordinates have been set based on the selected location."});return}}}catch{}c(le=>({...le,longitude:"36.689",latitude:"-1.3197",schoolLocation:O})),C([]),B(!1),P({variant:"destructive",title:"Location Error",description:"Could not get location coordinates. Using default coordinates."})}},ve=te=>{const{name:O,value:ce}=te.target;c(le=>({...le,[O]:ce}))},A=()=>{X(a)?(i(te=>Math.min(te+1,o)),window.scrollTo({top:0,behavior:"smooth"})):P({variant:"destructive",title:"Validation Error",description:"Please fix the errors before proceeding to the next step."})},z=()=>{i(te=>Math.max(te-1,1)),window.scrollTo({top:0,behavior:"smooth"})},M=async te=>{if(te.preventDefault(),!X(a)){P({variant:"destructive",title:"Validation Error",description:"Please fix the errors in the form before submitting."});return}try{const O={school_name:l.schoolName,school_location:l.schoolLocation,school_description:l.schoolDescription,school_contact_number:T(l.schoolContactNumber),school_email:l.schoolEmail,longitude:parseFloat(l.longitude)||36.689,latitude:parseFloat(l.latitude)||-1.3197,operating_hours_start:l.operatingHoursStart,operating_hours_end:l.operatingHoursEnd,admin_first_name:l.adminFirstName,admin_last_name:l.adminLastName,admin_phone_number:T(l.adminPhoneNumber),admin_email:l.adminEmail,admin_password:l.adminPassword,selected_plan_id:(d==null?void 0:d.id)||"1",billing_cycle:(d==null?void 0:d.default_billing_cycle)||"monthly",estimated_students:100,estimated_buses:2,estimated_parents:200},ce=await e(yv(O)).unwrap();P({title:"Registration Successful!",description:"Your school has been registered successfully. You can now log in with your admin credentials."}),localStorage.removeItem("selectedSubscriptionPlan"),N("/login")}catch(O){P({variant:"destructive",title:"Registration Failed",description:O instanceof Error?O.message:"Failed to submit registration. Please try again."})}},re=[{number:1,title:"School Information",icon:kr},{number:2,title:"Admin Details",icon:Ja},{number:3,title:"Review & Submit",icon:kw}];return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-[#f7c624]/10 p-4",children:s.jsxs(ze,{className:"w-full max-w-4xl shadow-xl",children:[s.jsxs(Xe,{className:"text-center pb-4",children:[s.jsx(tt,{className:"text-2xl font-bold text-slate-900",children:"Register Your School"}),s.jsx("div",{className:"flex items-center justify-center mt-3 space-x-2",children:re.map((te,O)=>s.jsxs(bs.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${a===te.number?"bg-[#f7c624] border-[#f7c624] text-white":a>te.number?"bg-[#f7c624]/20 border-[#f7c624] text-[#f7c624]":"bg-white border-gray-300 text-gray-400"}`,children:a>te.number?s.jsx(Or,{className:"w-5 h-5"}):s.jsx(te.icon,{className:"w-5 h-5"})}),s.jsx("p",{className:`text-xs mt-1 hidden sm:block ${a===te.number?"text-[#f7c624] font-semibold":"text-gray-500"}`,children:te.title})]}),O<re.length-1&&s.jsx("div",{className:`h-0.5 w-12 sm:w-20 transition-all ${a>te.number?"bg-[#f7c624]":"bg-gray-300"}`})]},te.number))})]}),s.jsx(Ue,{className:"",children:s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[a===1&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(kr,{className:"h-5 w-5 mr-2 text-[#f7c624]"}),"School Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"schoolName",children:"School Name *"}),s.jsx($e,{id:"schoolName",name:"schoolName",value:l.schoolName,onChange:ve,placeholder:"Enter school name",required:!0,className:h.schoolName?"border-red-500":""}),h.schoolName&&s.jsx("p",{className:"text-sm text-red-500",children:h.schoolName})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"schoolLocation",children:"School Location *"}),s.jsxs("div",{className:"relative address-search-container",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx($e,{id:"schoolLocation",name:"schoolLocation",value:l.schoolLocation,onChange:te=>{ve(te),U(te.target.value)},placeholder:"Search for school location...",required:!0,className:h.schoolLocation?"border-red-500":""}),x&&s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s.jsx(In,{className:"h-4 w-4 animate-spin"})})]}),$&&D.length>0&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:D.map((te,O)=>{var ce,le;return s.jsxs("button",{type:"button",className:"w-full px-4 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>W(te.place_id,te.description),children:[s.jsx("div",{className:"font-medium text-sm",children:((ce=te.structured_formatting)==null?void 0:ce.main_text)||te.description}),s.jsx("div",{className:"text-xs text-gray-500",children:((le=te.structured_formatting)==null?void 0:le.secondary_text)||""})]},O)})})]}),h.schoolLocation&&s.jsx("p",{className:"text-sm text-red-500",children:h.schoolLocation}),s.jsxs("p",{className:"text-xs text-slate-500",children:[s.jsx(Nr,{className:"h-3 w-3 inline mr-1"}),"Start typing to search for your school location. Coordinates will be automatically set."]})]})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"schoolDescription",children:"School Description"}),s.jsx(Kn,{id:"schoolDescription",name:"schoolDescription",value:l.schoolDescription,onChange:ve,placeholder:"Brief description of your school",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"schoolContactNumber",children:"School Contact Number *"}),s.jsx($e,{id:"schoolContactNumber",name:"schoolContactNumber",type:"tel",value:l.schoolContactNumber,onChange:ve,placeholder:"e.g., 0725797597 or +254725797597",required:!0,className:h.schoolContactNumber?"border-red-500":""}),h.schoolContactNumber&&s.jsx("p",{className:"text-sm text-red-500",children:h.schoolContactNumber})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"schoolEmail",children:"School Email *"}),s.jsx($e,{id:"schoolEmail",name:"schoolEmail",type:"email",value:l.schoolEmail,onChange:ve,placeholder:"school@example.com",required:!0,className:h.schoolEmail?"border-red-500":""}),h.schoolEmail&&s.jsx("p",{className:"text-sm text-red-500",children:h.schoolEmail})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"operatingHoursStart",children:"Operating Hours Start"}),s.jsx($e,{id:"operatingHoursStart",name:"operatingHoursStart",type:"time",value:l.operatingHoursStart,onChange:ve})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"operatingHoursEnd",children:"Operating Hours End"}),s.jsx($e,{id:"operatingHoursEnd",name:"operatingHoursEnd",type:"time",value:l.operatingHoursEnd,onChange:ve})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"longitude",children:"Longitude (Auto-populated)"}),s.jsx($e,{id:"longitude",name:"longitude",type:"text",value:l.longitude,readOnly:!0,placeholder:"Auto-filled from location",className:"bg-slate-50"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Automatically set when you search for a location"})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"latitude",children:"Latitude (Auto-populated)"}),s.jsx($e,{id:"latitude",name:"latitude",type:"text",value:l.latitude,readOnly:!0,placeholder:"Auto-filled from location",className:"bg-slate-50"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Automatically set when you search for a location"})]})]})]}),a===2&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(Ja,{className:"h-5 w-5 mr-2 text-[#f7c624]"}),"Admin Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"adminFirstName",children:"Admin First Name *"}),s.jsx($e,{id:"adminFirstName",name:"adminFirstName",value:l.adminFirstName,onChange:ve,placeholder:"John",required:!0,className:h.adminFirstName?"border-red-500":""}),h.adminFirstName&&s.jsx("p",{className:"text-sm text-red-500",children:h.adminFirstName})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"adminLastName",children:"Admin Last Name *"}),s.jsx($e,{id:"adminLastName",name:"adminLastName",value:l.adminLastName,onChange:ve,placeholder:"Doe",required:!0,className:h.adminLastName?"border-red-500":""}),h.adminLastName&&s.jsx("p",{className:"text-sm text-red-500",children:h.adminLastName})]})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"adminEmail",children:"Admin Email *"}),s.jsx($e,{id:"adminEmail",name:"adminEmail",type:"email",value:l.adminEmail,onChange:ve,placeholder:"john.doe@samplehighschool.edu",required:!0,className:h.adminEmail?"border-red-500":""}),h.adminEmail&&s.jsx("p",{className:"text-sm text-red-500",children:h.adminEmail})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"adminPhoneNumber",children:"Admin Phone Number *"}),s.jsx($e,{id:"adminPhoneNumber",name:"adminPhoneNumber",type:"tel",value:l.adminPhoneNumber,onChange:ve,placeholder:"e.g., 0725797597 or +254725797597",required:!0,className:h.adminPhoneNumber?"border-red-500":""}),h.adminPhoneNumber&&s.jsx("p",{className:"text-sm text-red-500",children:h.adminPhoneNumber})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsx(de,{htmlFor:"adminPassword",children:"Admin Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{id:"adminPassword",name:"adminPassword",type:v?"text":"password",value:l.adminPassword,onChange:ve,placeholder:"Enter admin password",required:!0,className:`pr-10 ${h.adminPassword?"border-red-500":""}`}),s.jsx(ue,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>w(!v),children:v?s.jsx(z0,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(qr,{className:"h-4 w-4 text-muted-foreground"})})]}),h.adminPassword&&s.jsx("p",{className:"text-sm text-red-500",children:h.adminPassword})]})]}),a===3&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(kw,{className:"h-5 w-5 mr-2 text-[#f7c624]"}),"Review Your Information"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ze,{className:"border-slate-200",children:[s.jsx(Xe,{children:s.jsx(tt,{className:"text-md",children:"School Information"})}),s.jsxs(Ue,{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"School Name:"}),s.jsx("p",{className:"text-slate-600",children:l.schoolName||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Location:"}),s.jsx("p",{className:"text-slate-600",children:l.schoolLocation||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Contact Number:"}),s.jsx("p",{className:"text-slate-600",children:l.schoolContactNumber||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Email:"}),s.jsx("p",{className:"text-slate-600",children:l.schoolEmail||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Operating Hours:"}),s.jsxs("p",{className:"text-slate-600",children:[l.operatingHoursStart," - ",l.operatingHoursEnd]})]})]}),l.schoolDescription&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Description:"}),s.jsx("p",{className:"text-slate-600",children:l.schoolDescription})]})]})]}),s.jsxs(ze,{className:"border-slate-200",children:[s.jsx(Xe,{children:s.jsx(tt,{className:"text-md",children:"Admin Information"})}),s.jsx(Ue,{className:"space-y-2 text-sm",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Name:"}),s.jsxs("p",{className:"text-slate-600",children:[l.adminFirstName," ",l.adminLastName]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Email:"}),s.jsx("p",{className:"text-slate-600",children:l.adminEmail||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Phone:"}),s.jsx("p",{className:"text-slate-600",children:l.adminPhoneNumber||"N/A"})]})]})})]})]}),s.jsx(Gl,{children:s.jsx(Kl,{children:"By submitting this form, you agree to our terms of service and privacy policy. We will review your application and contact you within 24-48 hours."})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t mt-8",children:[s.jsx(ue,{type:"button",variant:"outline",className:"flex-1",onClick:()=>N("/home"),children:"Cancel"}),a>1&&s.jsxs(ue,{type:"button",variant:"outline",className:"flex-1",onClick:z,children:[s.jsx(Jp,{className:"mr-2 h-4 w-4"}),"Previous"]}),a<o?s.jsxs(ue,{type:"button",className:"flex-1 bg-[#f7c624] hover:bg-[#f7c624]/80",onClick:A,children:["Next",s.jsx(Pf,{className:"ml-2 h-4 w-4"})]}):s.jsx(ue,{type:"submit",className:"flex-1 bg-[#f7c624] hover:bg-[#f7c624]/80",disabled:t,children:t?s.jsxs(s.Fragment,{children:[s.jsx(In,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"mr-2 h-4 w-4"}),"Submit Registration"]})})]})]})})]})})};function hW(){const e=lc(),t=Ia(),{plans:r,loading:n,error:a}=xa(f=>f.subscription),[i,o]=g.useState(null);g.useEffect(()=>{e(sl())},[e]);const l=f=>parseFloat(f).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2}),c=f=>{const y=f.toLowerCase();return y.includes("basic")||y.includes("starter")?{text:"Starter",variant:"secondary"}:y.includes("standard")||y.includes("medium")?{text:"Standard",variant:"default"}:y.includes("pro")||y.includes("professional")?{text:"Popular",variant:"default"}:y.includes("enterprise")||y.includes("premium")?{text:"Enterprise",variant:"default"}:null},d=f=>{const y=f.toLowerCase();return y.includes("basic")||y.includes("starter")?s.jsx(ws,{className:"h-6 w-6"}):y.includes("standard")||y.includes("medium")?s.jsx(bq,{className:"h-6 w-6"}):y.includes("pro")||y.includes("professional")?s.jsx(_o,{className:"h-6 w-6"}):y.includes("enterprise")||y.includes("premium")?s.jsx(fE,{className:"h-6 w-6"}):s.jsx(qi,{className:"h-6 w-6"})},u=f=>{o(f)},h=()=>{i&&(localStorage.setItem("selectedSubscriptionPlan",JSON.stringify(i)),t("/register",{state:{selectedPlan:i,fromSubscription:!0}}))},p=Array.isArray(r)?r:[];return n?s.jsx("div",{className:"min-h-screen bg-slate-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(wr,{className:"h-8 w-32 mx-auto mb-4"}),s.jsx(wr,{className:"h-12 w-96 mx-auto mb-6"}),s.jsx(wr,{className:"h-6 w-96 mx-auto"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(f=>s.jsxs(ze,{className:"border-0 shadow-lg",children:[s.jsxs(Xe,{children:[s.jsx(wr,{className:"h-6 w-32 mb-2"}),s.jsx(wr,{className:"h-4 w-48"})]}),s.jsxs(Ue,{children:[s.jsx(wr,{className:"h-8 w-24 mb-4"}),s.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(y=>s.jsx(wr,{className:"h-4 w-full"},y))})]})]},f))})]})}):a?s.jsx("div",{className:"min-h-screen bg-slate-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[s.jsx("h2",{className:"text-red-800 font-semibold text-xl mb-2",children:"Error Loading Subscription Plans"}),s.jsx("p",{className:"text-red-600 mb-4",children:a}),s.jsx(ue,{onClick:()=>e(sl()),className:"bg-red-600 hover:bg-red-700",children:"Retry"})]})})}):s.jsxs("div",{className:"min-h-screen bg-slate-900",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px- py-1",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white ",children:["Select Your Perfect",s.jsx("span",{className:"text-[#f7c624] block",children:"Subscription Plan"})]}),s.jsx("p",{className:"text-lg text-slate-300 max-w-2xl mx-auto leading-relaxed",children:"Choose the plan that best fits your school's needs. You can always upgrade or downgrade later."}),s.jsx("div",{className:"mt-6",children:s.jsxs(ue,{className:"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white font-semibold px-8 py-3 transition-all duration-200 hover:scale-105",onClick:()=>t("/register"),children:["Get Started",s.jsx(Pf,{className:"h-4 w-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:p.map(f=>{const y=c(f.name),x=d(f.name),j=(i==null?void 0:i.id)===f.id;return s.jsxs(ze,{className:`relative border-2 transition-all duration-300 hover:-translate-y-1 rounded-xl overflow-hidden cursor-pointer ${j?"border-[#f7c624] shadow-lg scale-102 bg-slate-800":"border-slate-700 shadow-md hover:shadow-lg bg-slate-800"}`,onClick:()=>u(f),children:[!f.is_active&&s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx(De,{variant:"secondary",children:"Inactive"})}),j&&s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx(De,{className:"bg-[#f7c624] text-white",children:"Selected"})}),y&&!j&&s.jsx("div",{className:`text-center py-2 text-sm font-medium ${y.text==="Popular"?"bg-[#f7c624] text-white":"bg-slate-100 text-slate-700"}`,children:y.text}),s.jsxs(Xe,{className:"text-center pb-4",children:[s.jsx("div",{className:"flex justify-center mb-3",children:s.jsx("div",{className:"w-10 h-10 bg-[#f7c624] rounded-lg flex items-center justify-center text-white",children:x})}),s.jsx(tt,{className:"text-xl font-bold text-white mb-2",children:f.name.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase())}),s.jsx(Ws,{className:"text-slate-300 text-sm",children:f.description})]}),s.jsxs(Ue,{className:"pb-6",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-2xl font-bold text-white",children:l(f.base_price)}),s.jsx("span",{className:"text-slate-300",children:"/month"})]}),s.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[s.jsxs("div",{children:["+ ",l(f.price_per_student)," per student"]}),s.jsxs("div",{children:["+ ",l(f.price_per_bus)," per bus"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-white mb-2 text-center text-sm",children:"Plan Limits"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"text-center p-1 bg-slate-700 rounded",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:f.features_json.max_students}),s.jsx("div",{className:"text-slate-300 text-xs",children:"Students"})]}),s.jsxs("div",{className:"text-center p-1 bg-slate-700 rounded",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:f.features_json.max_parents}),s.jsx("div",{className:"text-slate-300 text-xs",children:"Parents"})]}),s.jsxs("div",{className:"text-center p-1 bg-slate-700 rounded",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:f.features_json.max_buses}),s.jsx("div",{className:"text-slate-300 text-xs",children:"Buses"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-white mb-2 text-sm",children:"Features"}),s.jsx("div",{className:"space-y-1",children:Object.entries(f.features_json).map(([v,w])=>typeof w=="boolean"?s.jsx("div",{className:"flex items-center justify-between text-xs",children:s.jsxs("div",{className:"flex items-center gap-2",children:[w?s.jsx(Or,{className:"h-3 w-3 text-[#f7c624]"}):s.jsx(il,{className:"h-3 w-3 text-red-500"}),s.jsx("span",{className:"capitalize text-white",children:v.replace(/_/g," ")})]})},v):null)})]}),s.jsx("div",{className:"pt-3 border-t border-slate-700 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-slate-100",children:"Billing Cycle:"}),s.jsx(De,{variant:"outline",className:"capitalize text-slate-100 text-xs",children:f.default_billing_cycle})]})}),j&&s.jsx("div",{className:"pt-3 border-t border-slate-200",children:s.jsxs(ue,{className:"w-full bg-[#f7c624] hover:bg-[#f7c624] text-white font-semibold transition-all duration-200 hover:scale-105 shadow-lg",onClick:h,children:["Continue to Registration",s.jsx(Pf,{className:"h-4 w-4 ml-2"})]})})]})]},f.id)})}),p.length===0&&!n&&s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[s.jsx(Ln,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Subscription Plans Available"}),s.jsx("p",{children:"Please contact support to set up subscription plans."})]})}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("div",{className:"bg-[#f7c624] p-6 rounded-xl border border-[#f7c624]",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[s.jsx(Ef,{className:"h-4 w-4 text-white"}),s.jsx("span",{className:"text-white font-semibold text-sm",children:"All plans include:"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-white",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Or,{className:"h-3 w-3"}),s.jsx("span",{children:"24/7 Support"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Or,{className:"h-3 w-3"}),s.jsx("span",{children:"Free Setup"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Or,{className:"h-3 w-3"}),s.jsx("span",{children:"No Hidden Fees"})]})]})]})})]}),s.jsx("footer",{className:"bg-slate-900 text-white py-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[s.jsx("div",{className:"w-8 h-8 bg-[#f7c624] rounded-lg flex items-center justify-center",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/Shule_Track_favicon_logo-100_u2kc1z.jpg",alt:""})}),s.jsx("span",{className:"text-xl font-bold",children:"Shuletrack"})]}),s.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed max-w-md",children:"Modern school transportation management platform that helps schools improve safety, efficiency, and parent satisfaction."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"#",className:"text-slate-400 hover:text-[#f7c624] transition-colors",children:s.jsx(Za,{className:"h-5 w-5"})}),s.jsx("a",{href:"#",className:"text-slate-400 hover:text-[#f7c624] transition-colors",children:s.jsx(ga,{className:"h-5 w-5"})}),s.jsx("a",{href:"#",className:"text-slate-400 hover:text-emerald-400 transition-colors",children:s.jsx(Nr,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Product"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Features"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Pricing"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Demo"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"API"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Company"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"About"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Blog"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Careers"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Contact"})})]})]})]}),s.jsx("div",{className:"border-t border-slate-800  pt-8 text-center",children:s.jsxs("p",{className:"text-slate-400",children:[" ",new Date().getFullYear()," shuletrack. All rights reserved."]})})]})})]})}const fW=()=>{const e=Ia(),t=Vi(),[r,n]=g.useState(null);g.useEffect(()=>{var c;const o=localStorage.getItem("selectedSubscriptionPlan"),l=(c=t.state)==null?void 0:c.selectedPlan;l?n(l):o&&n(JSON.parse(o))},[t.state]);const a=o=>parseFloat(o).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2}),i=o=>{const l=o.toLowerCase();return l.includes("basic")?"Basic Plan":l.includes("standard")?"Standard Plan":l.includes("premium")?"Premium Plan":l.includes("pro")||l.includes("professional")?"Professional Plan":l.includes("enterprise")?"Enterprise Plan":o.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase())};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-emerald-50 p-4",children:s.jsxs(ze,{className:"w-full max-w-2xl shadow-xl",children:[s.jsxs(Xe,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mb-6",children:s.jsx(fn,{className:"h-10 w-10 text-amber-600"})}),s.jsx(tt,{className:"text-3xl font-bold text-slate-900 mb-2",children:"Registration Under Review"}),s.jsx(Ws,{className:"text-lg text-slate-600",children:"Thank you for registering your school with LuxCub. We're currently reviewing your application."})]}),s.jsxs(Ue,{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsxs(De,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-200 px-4 py-2 text-base",children:[s.jsx(fn,{className:"h-4 w-4 mr-2"}),"Pending Verification"]})}),r&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[s.jsx(kw,{className:"h-5 w-5 text-emerald-600"}),"Selected Subscription Plan"]}),s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-emerald-800 text-lg",children:i(r.name)}),s.jsx("p",{className:"text-emerald-700 text-sm",children:r.description})]}),s.jsx(De,{className:"bg-emerald-600 text-white",children:r.default_billing_cycle})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-emerald-700 font-medium",children:"Base Price:"}),s.jsxs("span",{className:"font-semibold text-emerald-800",children:[a(r.base_price),"/month"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-emerald-700",children:"Per Student:"}),s.jsx("span",{className:"text-emerald-800",children:a(r.price_per_student)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-emerald-700",children:"Per Bus:"}),s.jsx("span",{className:"text-emerald-800",children:a(r.price_per_bus)})]})]}),s.jsx("div",{className:"mt-4 pt-3 border-t border-emerald-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-emerald-700 font-medium",children:"Plan Limits:"}),s.jsxs("div",{className:"flex gap-4 text-xs text-emerald-700",children:[s.jsxs("span",{children:[r.features_json.max_students," Students"]}),s.jsxs("span",{children:[r.features_json.max_parents," Parents"]}),s.jsxs("span",{children:[r.features_json.max_buses," Buses"]})]})]})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"What happens next?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mt-0.5",children:s.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"1"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-700 font-medium",children:"Application Review"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"Our team will review your school information and verify details."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mt-0.5",children:s.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"2"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-700 font-medium",children:"Contact Verification"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"We'll contact you to verify your information and discuss setup."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mt-0.5",children:s.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"3"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-700 font-medium",children:"Account Setup"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"Once approved, we'll set up your account and provide access credentials."})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Expected Timeline"}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Es,{className:"h-5 w-5 text-emerald-600"}),s.jsx("span",{className:"text-slate-700 font-medium",children:"Application Submitted"})]}),s.jsx("span",{className:"text-sm text-slate-500",children:"Today"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(fn,{className:"h-5 w-5 text-amber-600"}),s.jsx("span",{className:"text-slate-700 font-medium",children:"Under Review"})]}),s.jsx("span",{className:"text-sm text-slate-500",children:"1-2 business days"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(kr,{className:"h-5 w-5 text-slate-400"}),s.jsx("span",{className:"text-slate-500 font-medium",children:"Account Setup"})]}),s.jsx("span",{className:"text-sm text-slate-500",children:"2-3 business days"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Need Help?"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[s.jsx(ga,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Email Support"}),s.jsx("p",{className:"text-xs text-slate-600",children:"hello@luxcub.com"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[s.jsx(Za,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Phone Support"}),s.jsx("p",{className:"text-xs text-slate-600",children:"+1 (555) 123-4567"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[s.jsxs(ue,{variant:"outline",className:"flex-1",onClick:()=>e("/home"),children:[s.jsx(Jp,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),s.jsx(ue,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700",onClick:()=>e("/login"),children:"Try Demo Account"})]})]})]})})},Vj=768;function mW(){const[e,t]=g.useState(void 0);return g.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Vj-1}px)`),n=()=>{t(window.innerWidth<Vj)};return r.addEventListener("change",n),t(window.innerWidth<Vj),()=>r.removeEventListener("change",n)},[]),!!e}var pW="Separator",GC="horizontal",xW=["horizontal","vertical"],c8=g.forwardRef((e,t)=>{const{decorative:r,orientation:n=GC,...a}=e,i=gW(n)?n:GC,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(Bt.div,{"data-orientation":i,...l,...a,ref:t})});c8.displayName=pW;function gW(e){return xW.includes(e)}var d8=c8;const sf=g.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(d8,{ref:a,decorative:r,orientation:t,className:nt("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));sf.displayName=d8.displayName;const vW=["top","right","bottom","left"],vd=Math.min,ui=Math.max,H0=Math.round,zg=Math.floor,rl=e=>({x:e,y:e}),yW={left:"right",right:"left",bottom:"top",top:"bottom"},bW={start:"end",end:"start"};function Tw(e,t,r){return ui(e,vd(t,r))}function sc(e,t){return typeof e=="function"?e(t):e}function rc(e){return e.split("-")[0]}function Zf(e){return e.split("-")[1]}function aS(e){return e==="x"?"y":"x"}function iS(e){return e==="y"?"height":"width"}function Jo(e){return["top","bottom"].includes(rc(e))?"y":"x"}function oS(e){return aS(Jo(e))}function jW(e,t,r){r===void 0&&(r=!1);const n=Zf(e),a=oS(e),i=iS(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=W0(o)),[o,W0(o)]}function wW(e){const t=W0(e);return[Rw(e),t,Rw(t)]}function Rw(e){return e.replace(/start|end/g,t=>bW[t])}function NW(e,t,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?i:o;default:return[]}}function SW(e,t,r,n){const a=Zf(e);let i=NW(rc(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Rw)))),i}function W0(e){return e.replace(/left|right|bottom|top/g,t=>yW[t])}function _W(e){return{top:0,right:0,bottom:0,left:0,...e}}function u8(e){return typeof e!="number"?_W(e):{top:e,right:e,bottom:e,left:e}}function G0(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function KC(e,t,r){let{reference:n,floating:a}=e;const i=Jo(t),o=oS(t),l=iS(o),c=rc(t),d=i==="y",u=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,p=n[l]/2-a[l]/2;let f;switch(c){case"top":f={x:u,y:n.y-a.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-a.width,y:h};break;default:f={x:n.x,y:n.y}}switch(Zf(t)){case"start":f[o]-=p*(r&&d?-1:1);break;case"end":f[o]+=p*(r&&d?-1:1);break}return f}const CW=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=KC(d,n,c),p=n,f={},y=0;for(let x=0;x<l.length;x++){const{name:j,fn:v}=l[x],{x:w,y:N,data:k,reset:P}=await v({x:u,y:h,initialPlacement:n,placement:p,strategy:a,middlewareData:f,rects:d,platform:o,elements:{reference:e,floating:t}});u=w??u,h=N??h,f={...f,[j]:{...f[j],...k}},P&&y<=50&&(y++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(d=P.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):P.rects),{x:u,y:h}=KC(d,p,c)),x=-1)}return{x:u,y:h,placement:p,strategy:a,middlewareData:f}};async function Zp(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=sc(t,e),y=u8(f),j=l[p?h==="floating"?"reference":"floating":h],v=G0(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(j)))==null||r?j:j.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),w=h==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},P=G0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:N,strategy:c}):w);return{top:(v.top-P.top+y.top)/k.y,bottom:(P.bottom-v.bottom+y.bottom)/k.y,left:(v.left-P.left+y.left)/k.x,right:(P.right-v.right+y.right)/k.x}}const kW=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=sc(e,t)||{};if(d==null)return{};const h=u8(u),p={x:r,y:n},f=oS(a),y=iS(f),x=await o.getDimensions(d),j=f==="y",v=j?"top":"left",w=j?"bottom":"right",N=j?"clientHeight":"clientWidth",k=i.reference[y]+i.reference[f]-p[f]-i.floating[y],P=p[f]-i.reference[f],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let I=E?E[N]:0;(!I||!await(o.isElement==null?void 0:o.isElement(E)))&&(I=l.floating[N]||i.floating[y]);const T=k/2-P/2,R=I/2-x[y]/2-1,X=vd(h[v],R),D=vd(h[w],R),C=X,$=I-x[y]-D,B=I/2-x[y]/2+T,Q=Tw(C,B,$),oe=!c.arrow&&Zf(a)!=null&&B!==Q&&i.reference[y]/2-(B<C?X:D)-x[y]/2<0,ae=oe?B<C?B-C:B-$:0;return{[f]:p[f]+ae,data:{[f]:Q,centerOffset:B-Q-ae,...oe&&{alignmentOffset:ae}},reset:oe}}}),AW=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:x=!0,...j}=sc(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=rc(a),w=Jo(l),N=rc(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),P=p||(N||!x?[W0(l)]:wW(l)),E=y!=="none";!p&&E&&P.push(...SW(l,x,y,k));const I=[l,...P],T=await Zp(t,j),R=[];let X=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&R.push(T[v]),h){const B=jW(a,o,k);R.push(T[B[0]],T[B[1]])}if(X=[...X,{placement:a,overflows:R}],!R.every(B=>B<=0)){var D,C;const B=(((D=i.flip)==null?void 0:D.index)||0)+1,Q=I[B];if(Q&&(!(h==="alignment"?w!==Jo(Q):!1)||X.every(U=>U.overflows[0]>0&&Jo(U.placement)===w)))return{data:{index:B,overflows:X},reset:{placement:Q}};let oe=(C=X.filter(ae=>ae.overflows[0]<=0).sort((ae,U)=>ae.overflows[1]-U.overflows[1])[0])==null?void 0:C.placement;if(!oe)switch(f){case"bestFit":{var $;const ae=($=X.filter(U=>{if(E){const Z=Jo(U.placement);return Z===w||Z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(Z=>Z>0).reduce((Z,W)=>Z+W,0)]).sort((U,Z)=>U[1]-Z[1])[0])==null?void 0:$[0];ae&&(oe=ae);break}case"initialPlacement":oe=l;break}if(a!==oe)return{reset:{placement:oe}}}return{}}}};function YC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function JC(e){return vW.some(t=>e[t]>=0)}const PW=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=sc(e,t);switch(n){case"referenceHidden":{const i=await Zp(t,{...a,elementContext:"reference"}),o=YC(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:JC(o)}}}case"escaped":{const i=await Zp(t,{...a,altBoundary:!0}),o=YC(i,r.floating);return{data:{escapedOffsets:o,escaped:JC(o)}}}default:return{}}}}};async function EW(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=rc(r),l=Zf(r),c=Jo(r)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,h=sc(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof y=="number"&&(f=l==="end"?y*-1:y),c?{x:f*u,y:p*d}:{x:p*d,y:f*u}}const LW=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await EW(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},TW=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:j=>{let{x:v,y:w}=j;return{x:v,y:w}}},...c}=sc(e,t),d={x:r,y:n},u=await Zp(t,c),h=Jo(rc(a)),p=aS(h);let f=d[p],y=d[h];if(i){const j=p==="y"?"top":"left",v=p==="y"?"bottom":"right",w=f+u[j],N=f-u[v];f=Tw(w,f,N)}if(o){const j=h==="y"?"top":"left",v=h==="y"?"bottom":"right",w=y+u[j],N=y-u[v];y=Tw(w,y,N)}const x=l.fn({...t,[p]:f,[h]:y});return{...x,data:{x:x.x-r,y:x.y-n,enabled:{[p]:i,[h]:o}}}}}},RW=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=sc(e,t),u={x:r,y:n},h=Jo(a),p=aS(h);let f=u[p],y=u[h];const x=sc(l,t),j=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const N=p==="y"?"height":"width",k=i.reference[p]-i.floating[N]+j.mainAxis,P=i.reference[p]+i.reference[N]-j.mainAxis;f<k?f=k:f>P&&(f=P)}if(d){var v,w;const N=p==="y"?"width":"height",k=["top","left"].includes(rc(a)),P=i.reference[h]-i.floating[N]+(k&&((v=o.offset)==null?void 0:v[h])||0)+(k?0:j.crossAxis),E=i.reference[h]+i.reference[N]+(k?0:((w=o.offset)==null?void 0:w[h])||0)-(k?j.crossAxis:0);y<P?y=P:y>E&&(y=E)}return{[p]:f,[h]:y}}}},IW=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=sc(e,t),u=await Zp(t,d),h=rc(a),p=Zf(a),f=Jo(a)==="y",{width:y,height:x}=i.floating;let j,v;h==="top"||h==="bottom"?(j=h,v=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,j=p==="end"?"top":"bottom");const w=x-u.top-u.bottom,N=y-u.left-u.right,k=vd(x-u[j],w),P=vd(y-u[v],N),E=!t.middlewareData.shift;let I=k,T=P;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(T=N),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(I=w),E&&!p){const X=ui(u.left,0),D=ui(u.right,0),C=ui(u.top,0),$=ui(u.bottom,0);f?T=y-2*(X!==0||D!==0?X+D:ui(u.left,u.right)):I=x-2*(C!==0||$!==0?C+$:ui(u.top,u.bottom))}await c({...t,availableWidth:T,availableHeight:I});const R=await o.getDimensions(l.floating);return y!==R.width||x!==R.height?{reset:{rects:!0}}:{}}}};function gb(){return typeof window<"u"}function Xf(e){return h8(e)?(e.nodeName||"").toLowerCase():"#document"}function gi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gl(e){var t;return(t=(h8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function h8(e){return gb()?e instanceof Node||e instanceof gi(e).Node:!1}function ko(e){return gb()?e instanceof Element||e instanceof gi(e).Element:!1}function ol(e){return gb()?e instanceof HTMLElement||e instanceof gi(e).HTMLElement:!1}function ZC(e){return!gb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof gi(e).ShadowRoot}function jx(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Ao(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function FW(e){return["table","td","th"].includes(Xf(e))}function vb(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function lS(e){const t=cS(),r=ko(e)?Ao(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function DW(e){let t=yd(e);for(;ol(t)&&!Lf(t);){if(lS(t))return t;if(vb(t))return null;t=yd(t)}return null}function cS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Lf(e){return["html","body","#document"].includes(Xf(e))}function Ao(e){return gi(e).getComputedStyle(e)}function yb(e){return ko(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function yd(e){if(Xf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ZC(e)&&e.host||gl(e);return ZC(t)?t.host:t}function f8(e){const t=yd(e);return Lf(t)?e.ownerDocument?e.ownerDocument.body:e.body:ol(t)&&jx(t)?t:f8(t)}function Xp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=f8(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=gi(a);if(i){const l=Iw(o);return t.concat(o,o.visualViewport||[],jx(a)?a:[],l&&r?Xp(l):[])}return t.concat(a,Xp(a,[],r))}function Iw(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function m8(e){const t=Ao(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=ol(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=H0(r)!==i||H0(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function dS(e){return ko(e)?e:e.contextElement}function rf(e){const t=dS(e);if(!ol(t))return rl(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=m8(t);let o=(i?H0(r.width):r.width)/n,l=(i?H0(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const OW=rl(0);function p8(e){const t=gi(e);return!cS()||!t.visualViewport?OW:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function MW(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==gi(e)?!1:t}function Pu(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=dS(e);let o=rl(1);t&&(n?ko(n)&&(o=rf(n)):o=rf(e));const l=MW(i,r,n)?p8(i):rl(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(i){const p=gi(i),f=n&&ko(n)?gi(n):n;let y=p,x=Iw(y);for(;x&&n&&f!==y;){const j=rf(x),v=x.getBoundingClientRect(),w=Ao(x),N=v.left+(x.clientLeft+parseFloat(w.paddingLeft))*j.x,k=v.top+(x.clientTop+parseFloat(w.paddingTop))*j.y;c*=j.x,d*=j.y,u*=j.x,h*=j.y,c+=N,d+=k,y=gi(x),x=Iw(y)}}return G0({width:u,height:h,x:c,y:d})}function uS(e,t){const r=yb(e).scrollLeft;return t?t.left+r:Pu(gl(e)).left+r}function x8(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:uS(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function $W(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=gl(n),l=t?vb(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=rl(1);const u=rl(0),h=ol(n);if((h||!h&&!i)&&((Xf(n)!=="body"||jx(o))&&(c=yb(n)),ol(n))){const f=Pu(n);d=rf(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const p=o&&!h&&!i?x8(o,c,!0):rl(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+p.x,y:r.y*d.y-c.scrollTop*d.y+u.y+p.y}}function BW(e){return Array.from(e.getClientRects())}function zW(e){const t=gl(e),r=yb(e),n=e.ownerDocument.body,a=ui(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=ui(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+uS(e);const l=-r.scrollTop;return Ao(n).direction==="rtl"&&(o+=ui(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function UW(e,t){const r=gi(e),n=gl(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=cS();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function qW(e,t){const r=Pu(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=ol(e)?rf(e):rl(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function XC(e,t,r){let n;if(t==="viewport")n=UW(e,r);else if(t==="document")n=zW(gl(e));else if(ko(t))n=qW(t,r);else{const a=p8(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return G0(n)}function g8(e,t){const r=yd(e);return r===t||!ko(r)||Lf(r)?!1:Ao(r).position==="fixed"||g8(r,t)}function VW(e,t){const r=t.get(e);if(r)return r;let n=Xp(e,[],!1).filter(l=>ko(l)&&Xf(l)!=="body"),a=null;const i=Ao(e).position==="fixed";let o=i?yd(e):e;for(;ko(o)&&!Lf(o);){const l=Ao(o),c=lS(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||jx(o)&&!c&&g8(e,o))?n=n.filter(u=>u!==o):a=l,o=yd(o)}return t.set(e,n),n}function HW(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?vb(t)?[]:VW(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const h=XC(t,u,a);return d.top=ui(h.top,d.top),d.right=vd(h.right,d.right),d.bottom=vd(h.bottom,d.bottom),d.left=ui(h.left,d.left),d},XC(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function WW(e){const{width:t,height:r}=m8(e);return{width:t,height:r}}function GW(e,t,r){const n=ol(t),a=gl(t),i=r==="fixed",o=Pu(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=rl(0);function d(){c.x=uS(a)}if(n||!n&&!i)if((Xf(t)!=="body"||jx(a))&&(l=yb(t)),n){const f=Pu(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?x8(a,l):rl(0),h=o.left+l.scrollLeft-c.x-u.x,p=o.top+l.scrollTop-c.y-u.y;return{x:h,y:p,width:o.width,height:o.height}}function Hj(e){return Ao(e).position==="static"}function QC(e,t){if(!ol(e)||Ao(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return gl(e)===r&&(r=r.ownerDocument.body),r}function v8(e,t){const r=gi(e);if(vb(e))return r;if(!ol(e)){let a=yd(e);for(;a&&!Lf(a);){if(ko(a)&&!Hj(a))return a;a=yd(a)}return r}let n=QC(e,t);for(;n&&FW(n)&&Hj(n);)n=QC(n,t);return n&&Lf(n)&&Hj(n)&&!lS(n)?r:n||DW(e)||r}const KW=async function(e){const t=this.getOffsetParent||v8,r=this.getDimensions,n=await r(e.floating);return{reference:GW(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function YW(e){return Ao(e).direction==="rtl"}const JW={convertOffsetParentRelativeRectToViewportRelativeRect:$W,getDocumentElement:gl,getClippingRect:HW,getOffsetParent:v8,getElementRects:KW,getClientRects:BW,getDimensions:WW,getScale:rf,isElement:ko,isRTL:YW};function y8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ZW(e,t){let r=null,n;const a=gl(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:p,height:f}=d;if(l||t(),!p||!f)return;const y=zg(h),x=zg(a.clientWidth-(u+p)),j=zg(a.clientHeight-(h+f)),v=zg(u),N={rootMargin:-y+"px "+-x+"px "+-j+"px "+-v+"px",threshold:ui(0,vd(1,c))||1};let k=!0;function P(E){const I=E[0].intersectionRatio;if(I!==c){if(!k)return o();I?o(!1,I):n=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!y8(d,e.getBoundingClientRect())&&o(),k=!1}try{r=new IntersectionObserver(P,{...N,root:a.ownerDocument})}catch{r=new IntersectionObserver(P,N)}r.observe(e)}return o(!0),i}function XW(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=dS(e),u=a||i?[...d?Xp(d):[],...Xp(t)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const h=d&&l?ZW(d,r):null;let p=-1,f=null;o&&(f=new ResizeObserver(v=>{let[w]=v;w&&w.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var N;(N=f)==null||N.observe(t)})),r()}),d&&!c&&f.observe(d),f.observe(t));let y,x=c?Pu(e):null;c&&j();function j(){const v=Pu(e);x&&!y8(x,v)&&r(),x=v,y=requestAnimationFrame(j)}return r(),()=>{var v;u.forEach(w=>{a&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),h==null||h(),(v=f)==null||v.disconnect(),f=null,c&&cancelAnimationFrame(y)}}const QW=LW,eG=TW,tG=AW,sG=IW,rG=PW,e3=kW,nG=RW,aG=(e,t,r)=>{const n=new Map,a={platform:JW,...r},i={...a.platform,_c:n};return CW(e,t,{...a,platform:i})};var iG=typeof document<"u",oG=function(){},t0=iG?g.useLayoutEffect:oG;function K0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!K0(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!K0(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function b8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function t3(e,t){const r=b8(e);return Math.round(t*r)/r}function Wj(e){const t=g.useRef(e);return t0(()=>{t.current=e}),t}function lG(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=g.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=g.useState(n);K0(p,n)||f(n);const[y,x]=g.useState(null),[j,v]=g.useState(null),w=g.useCallback(U=>{U!==E.current&&(E.current=U,x(U))},[]),N=g.useCallback(U=>{U!==I.current&&(I.current=U,v(U))},[]),k=i||y,P=o||j,E=g.useRef(null),I=g.useRef(null),T=g.useRef(u),R=c!=null,X=Wj(c),D=Wj(a),C=Wj(d),$=g.useCallback(()=>{if(!E.current||!I.current)return;const U={placement:t,strategy:r,middleware:p};D.current&&(U.platform=D.current),aG(E.current,I.current,U).then(Z=>{const W={...Z,isPositioned:C.current!==!1};B.current&&!K0(T.current,W)&&(T.current=W,Pd.flushSync(()=>{h(W)}))})},[p,t,r,D,C]);t0(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(U=>({...U,isPositioned:!1})))},[d]);const B=g.useRef(!1);t0(()=>(B.current=!0,()=>{B.current=!1}),[]),t0(()=>{if(k&&(E.current=k),P&&(I.current=P),k&&P){if(X.current)return X.current(k,P,$);$()}},[k,P,$,X,R]);const Q=g.useMemo(()=>({reference:E,floating:I,setReference:w,setFloating:N}),[w,N]),oe=g.useMemo(()=>({reference:k,floating:P}),[k,P]),ae=g.useMemo(()=>{const U={position:r,left:0,top:0};if(!oe.floating)return U;const Z=t3(oe.floating,u.x),W=t3(oe.floating,u.y);return l?{...U,transform:"translate("+Z+"px, "+W+"px)",...b8(oe.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Z,top:W}},[r,l,oe.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:$,refs:Q,elements:oe,floatingStyles:ae}),[u,$,Q,oe,ae])}const cG=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?e3({element:n.current,padding:a}).fn(r):{}:n?e3({element:n,padding:a}).fn(r):{}}}},dG=(e,t)=>({...QW(e),options:[e,t]}),uG=(e,t)=>({...eG(e),options:[e,t]}),hG=(e,t)=>({...nG(e),options:[e,t]}),fG=(e,t)=>({...tG(e),options:[e,t]}),mG=(e,t)=>({...sG(e),options:[e,t]}),pG=(e,t)=>({...rG(e),options:[e,t]}),xG=(e,t)=>({...cG(e),options:[e,t]});var gG="Arrow",j8=g.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Bt.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});j8.displayName=gG;var vG=j8;function hS(e){const[t,r]=g.useState(void 0);return Jn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var fS="Popper",[w8,Td]=Fa(fS),[yG,N8]=w8(fS),S8=e=>{const{__scopePopper:t,children:r}=e,[n,a]=g.useState(null);return s.jsx(yG,{scope:t,anchor:n,onAnchorChange:a,children:r})};S8.displayName=fS;var _8="PopperAnchor",C8=g.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=N8(_8,r),o=g.useRef(null),l=Fs(t,o);return g.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Bt.div,{...a,ref:l})});C8.displayName=_8;var mS="PopperContent",[bG,jG]=w8(mS),k8=g.forwardRef((e,t)=>{var O,ce,le,Ee,_e,Be;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:y,...x}=e,j=N8(mS,r),[v,w]=g.useState(null),N=Fs(t,Ge=>w(Ge)),[k,P]=g.useState(null),E=hS(k),I=(E==null?void 0:E.width)??0,T=(E==null?void 0:E.height)??0,R=n+(i!=="center"?"-"+i:""),X=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(d)?d:[d],C=D.length>0,$={padding:X,boundary:D.filter(NG),altBoundary:C},{refs:B,floatingStyles:Q,placement:oe,isPositioned:ae,middlewareData:U}=lG({strategy:"fixed",placement:R,whileElementsMounted:(...Ge)=>XW(...Ge,{animationFrame:f==="always"}),elements:{reference:j.anchor},middleware:[dG({mainAxis:a+T,alignmentAxis:o}),c&&uG({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?hG():void 0,...$}),c&&fG({...$}),mG({...$,apply:({elements:Ge,rects:ut,availableWidth:Le,availableHeight:K})=>{const{width:He,height:xe}=ut.reference,ge=Ge.floating.style;ge.setProperty("--radix-popper-available-width",`${Le}px`),ge.setProperty("--radix-popper-available-height",`${K}px`),ge.setProperty("--radix-popper-anchor-width",`${He}px`),ge.setProperty("--radix-popper-anchor-height",`${xe}px`)}}),k&&xG({element:k,padding:l}),SG({arrowWidth:I,arrowHeight:T}),p&&pG({strategy:"referenceHidden",...$})]}),[Z,W]=E8(oe),ve=Xa(y);Jn(()=>{ae&&(ve==null||ve())},[ae,ve]);const A=(O=U.arrow)==null?void 0:O.x,z=(ce=U.arrow)==null?void 0:ce.y,M=((le=U.arrow)==null?void 0:le.centerOffset)!==0,[re,te]=g.useState();return Jn(()=>{v&&te(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:ae?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(Ee=U.transformOrigin)==null?void 0:Ee.x,(_e=U.transformOrigin)==null?void 0:_e.y].join(" "),...((Be=U.hide)==null?void 0:Be.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(bG,{scope:r,placedSide:Z,onArrowChange:P,arrowX:A,arrowY:z,shouldHideArrow:M,children:s.jsx(Bt.div,{"data-side":Z,"data-align":W,...x,ref:N,style:{...x.style,animation:ae?void 0:"none"}})})})});k8.displayName=mS;var A8="PopperArrow",wG={top:"bottom",right:"left",bottom:"top",left:"right"},P8=g.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=jG(A8,n),o=wG[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(vG,{...a,ref:r,style:{...a.style,display:"block"}})})});P8.displayName=A8;function NG(e){return e!==null}var SG=e=>({name:"transformOrigin",options:e,fn(t){var j,v,w;const{placement:r,rects:n,middlewareData:a}=t,o=((j=a.arrow)==null?void 0:j.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=E8(r),h={start:"0%",center:"50%",end:"100%"}[u],p=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,f=(((w=a.arrow)==null?void 0:w.y)??0)+c/2;let y="",x="";return d==="bottom"?(y=o?h:`${p}px`,x=`${-c}px`):d==="top"?(y=o?h:`${p}px`,x=`${n.floating.height+c}px`):d==="right"?(y=`${-c}px`,x=o?h:`${f}px`):d==="left"&&(y=`${n.floating.width+c}px`,x=o?h:`${f}px`),{data:{x:y,y:x}}}});function E8(e){const[t,r="center"]=e.split("-");return[t,r]}var bb=S8,wx=C8,jb=k8,wb=P8,L8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_G="VisuallyHidden",Nb=g.forwardRef((e,t)=>s.jsx(Bt.span,{...e,ref:t,style:{...L8,...e.style}}));Nb.displayName=_G;var CG=Nb,[Sb,are]=Fa("Tooltip",[Td]),_b=Td(),T8="TooltipProvider",kG=700,Fw="tooltip.open",[AG,pS]=Sb(T8),R8=e=>{const{__scopeTooltip:t,delayDuration:r=kG,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(AG,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};R8.displayName=T8;var Qp="Tooltip",[PG,Cb]=Sb(Qp),I8=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=pS(Qp,e.__scopeTooltip),d=_b(t),[u,h]=g.useState(null),p=Fn(),f=g.useRef(0),y=o??c.disableHoverableContent,x=l??c.delayDuration,j=g.useRef(!1),[v,w]=Co({prop:n,defaultProp:a??!1,onChange:I=>{I?(c.onOpen(),document.dispatchEvent(new CustomEvent(Fw))):c.onClose(),i==null||i(I)},caller:Qp}),N=g.useMemo(()=>v?j.current?"delayed-open":"instant-open":"closed",[v]),k=g.useCallback(()=>{window.clearTimeout(f.current),f.current=0,j.current=!1,w(!0)},[w]),P=g.useCallback(()=>{window.clearTimeout(f.current),f.current=0,w(!1)},[w]),E=g.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{j.current=!0,w(!0),f.current=0},x)},[x,w]);return g.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),s.jsx(bb,{...d,children:s.jsx(PG,{scope:t,contentId:p,open:v,stateAttribute:N,trigger:u,onTriggerChange:h,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayedRef.current?E():k()},[c.isOpenDelayedRef,E,k]),onTriggerLeave:g.useCallback(()=>{y?P():(window.clearTimeout(f.current),f.current=0)},[P,y]),onOpen:k,onClose:P,disableHoverableContent:y,children:r})})};I8.displayName=Qp;var Dw="TooltipTrigger",F8=g.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Cb(Dw,r),i=pS(Dw,r),o=_b(r),l=g.useRef(null),c=Fs(t,l,a.onTriggerChange),d=g.useRef(!1),u=g.useRef(!1),h=g.useCallback(()=>d.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(wx,{asChild:!0,...o,children:s.jsx(Bt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:bt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:bt(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:bt(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:bt(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:bt(e.onBlur,a.onClose),onClick:bt(e.onClick,a.onClose)})})});F8.displayName=Dw;var EG="TooltipPortal",[ire,LG]=Sb(EG,{forceMount:void 0}),Tf="TooltipContent",D8=g.forwardRef((e,t)=>{const r=LG(Tf,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=Cb(Tf,e.__scopeTooltip);return s.jsx(Qa,{present:n||o.open,children:o.disableHoverableContent?s.jsx(O8,{side:a,...i,ref:t}):s.jsx(TG,{side:a,...i,ref:t})})}),TG=g.forwardRef((e,t)=>{const r=Cb(Tf,e.__scopeTooltip),n=pS(Tf,e.__scopeTooltip),a=g.useRef(null),i=Fs(t,a),[o,l]=g.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:h}=n,p=g.useCallback(()=>{l(null),h(!1)},[h]),f=g.useCallback((y,x)=>{const j=y.currentTarget,v={x:y.clientX,y:y.clientY},w=OG(v,j.getBoundingClientRect()),N=MG(v,w),k=$G(x.getBoundingClientRect()),P=zG([...N,...k]);l(P),h(!0)},[h]);return g.useEffect(()=>()=>p(),[p]),g.useEffect(()=>{if(c&&u){const y=j=>f(j,u),x=j=>f(j,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",x)}}},[c,u,f,p]),g.useEffect(()=>{if(o){const y=x=>{const j=x.target,v={x:x.clientX,y:x.clientY},w=(c==null?void 0:c.contains(j))||(u==null?void 0:u.contains(j)),N=!BG(v,o);w?p():N&&(p(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,o,d,p]),s.jsx(O8,{...e,ref:i})}),[RG,IG]=Sb(Qp,{isInside:!1}),FG=wE("TooltipContent"),O8=g.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Cb(Tf,r),d=_b(r),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(Fw,u),()=>document.removeEventListener(Fw,u)),[u]),g.useEffect(()=>{if(c.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),s.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:s.jsxs(jb,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(FG,{children:n}),s.jsx(RG,{scope:r,isInside:!0,children:s.jsx(CG,{id:c.contentId,role:"tooltip",children:a||n})})]})})});D8.displayName=Tf;var M8="TooltipArrow",DG=g.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=_b(r);return IG(M8,r).isInside?null:s.jsx(wb,{...a,...n,ref:t})});DG.displayName=M8;function OG(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function MG(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function $G(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function BG(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,h=c.x,p=c.y;u>n!=p>n&&r<(h-d)*(n-u)/(p-u)+d&&(a=!a)}return a}function zG(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),UG(t)}function UG(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var qG=R8,VG=I8,HG=F8,$8=D8;const B8=qG,WG=VG,GG=HG,z8=g.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx($8,{ref:n,sideOffset:t,className:nt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));z8.displayName=$8.displayName;const KG="sidebar-state",YG=60*60*24*365,JG="var(--sidebar-width, 16rem)",ZG="var(--sidebar-width-icon, 4rem)",U8=g.createContext(void 0);function q8({children:e,defaultOpen:t=!0,open:r,onOpenChange:n,className:a,style:i,...o}){const l=mW(),[c,d]=g.useState(!1),[u,h]=g.useState(t),p=r??u,f=j=>{const v=typeof j=="function"?j(p):j;n?n(v):h(v),document.cookie=`${KG}=${v}; path=/; max-age=${YG}`},y=()=>l?d(j=>!j):f(j=>!j),x=p?"expanded":"collapsed";return s.jsx(U8.Provider,{value:{state:x,open:p,setOpen:f,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:y},children:s.jsx(B8,{delayDuration:0,children:s.jsx("div",{style:{"--sidebar-width":JG,"--sidebar-width-icon":ZG,...i},className:nt("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",a),...o,children:e})})})}function Qf(){const e=g.useContext(U8);if(e===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return e}const XG=Ou("group/sidebar relative flex h-full flex-col gap-4 border-r bg-background transition-all duration-300 ease-in-out",{variants:{variant:{default:"bg-background",inset:"bg-sidebar"}},defaultVariants:{variant:"default"}}),QG=g.forwardRef(({className:e,variant:t,children:r,...n},a)=>{const{state:i,open:o,isMobile:l}=Qf();return s.jsx("div",{ref:a,"data-state":i,className:nt(XG({variant:t}),"w-[var(--sidebar-width)] data-[state=collapsed]:w-[var(--sidebar-width-icon)]",e),...n,children:r})});QG.displayName="Sidebar";const eK=g.forwardRef(({className:e,onClick:t,...r},n)=>{const{toggleSidebar:a}=Qf();return s.jsxs(ue,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:nt("h-7 w-7",e),onClick:i=>{t==null||t(i),a()},...r,children:[s.jsx(Eq,{}),s.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});eK.displayName="SidebarTrigger";const tK=g.forwardRef(({className:e,...t},r)=>{const{toggleSidebar:n}=Qf();return s.jsx("button",{ref:r,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:nt("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});tK.displayName="SidebarRail";const sK=g.forwardRef(({className:e,...t},r)=>s.jsx("main",{ref:r,className:nt("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));sK.displayName="SidebarInset";const rK=g.forwardRef(({className:e,...t},r)=>s.jsx($e,{ref:r,"data-sidebar":"input",className:nt("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));rK.displayName="SidebarInput";const nK=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"header",className:nt("flex flex-col gap-2 p-2",e),...t}));nK.displayName="SidebarHeader";const aK=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"footer",className:nt("flex flex-col gap-2 p-2",e),...t}));aK.displayName="SidebarFooter";const iK=g.forwardRef(({className:e,...t},r)=>s.jsx(sf,{ref:r,"data-sidebar":"separator",className:nt("mx-2 w-auto bg-sidebar-border",e),...t}));iK.displayName="SidebarSeparator";const oK=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"content",className:nt("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));oK.displayName="SidebarContent";const lK=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"group",className:nt("relative flex w-full min-w-0 flex-col p-2",e),...t}));lK.displayName="SidebarGroup";const cK=g.forwardRef(({className:e,asChild:t=!1,...r},n)=>{const a=t?Du:"div";return s.jsx(a,{ref:n,"data-sidebar":"group-label",className:nt("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...r})});cK.displayName="SidebarGroupLabel";const dK=g.forwardRef(({className:e,asChild:t=!1,...r},n)=>{const a=t?Du:"button";return s.jsx(a,{ref:n,"data-sidebar":"group-action",className:nt("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...r})});dK.displayName="SidebarGroupAction";const uK=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"group-content",className:nt("w-full text-sm",e),...t}));uK.displayName="SidebarGroupContent";const hK=g.forwardRef(({className:e,...t},r)=>s.jsx("ul",{ref:r,"data-sidebar":"menu",className:nt("flex w-full min-w-0 flex-col gap-1",e),...t}));hK.displayName="SidebarMenu";const fK=g.forwardRef(({className:e,...t},r)=>s.jsx("li",{ref:r,"data-sidebar":"menu-item",className:nt("group/menu-item relative",e),...t}));fK.displayName="SidebarMenuItem";const mK=Ou("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),pK=g.forwardRef(({asChild:e=!1,isActive:t=!1,variant:r="default",size:n="default",tooltip:a,className:i,...o},l)=>{const c=e?Du:"button",{isMobile:d,state:u}=Qf(),h=s.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":n,"data-active":t,className:nt(mK({variant:r,size:n}),i),...o});return a?(typeof a=="string"&&(a={children:a}),s.jsxs(WG,{children:[s.jsx(GG,{asChild:!0,children:h}),s.jsx(z8,{side:"right",align:"center",hidden:u!=="collapsed"||d,...a})]})):h});pK.displayName="SidebarMenuButton";const xK=g.forwardRef(({className:e,asChild:t=!1,showOnHover:r=!1,...n},a)=>{const i=t?Du:"button";return s.jsx(i,{ref:a,"data-sidebar":"menu-action",className:nt("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...n})});xK.displayName="SidebarMenuAction";const gK=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"menu-badge",className:nt("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));gK.displayName="SidebarMenuBadge";const vK=g.forwardRef(({className:e,showIcon:t=!1,...r},n)=>{const a=g.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return s.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:nt("rounded-md h-8 flex gap-2 px-2 items-center",e),...r,children:[t&&s.jsx(wr,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),s.jsx(wr,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});vK.displayName="SidebarMenuSkeleton";const yK=g.forwardRef(({className:e,...t},r)=>s.jsx("ul",{ref:r,"data-sidebar":"menu-sub",className:nt("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));yK.displayName="SidebarMenuSub";const bK=g.forwardRef(({...e},t)=>s.jsx("li",{ref:t,...e}));bK.displayName="SidebarMenuSubItem";const jK=g.forwardRef(({asChild:e=!1,size:t="md",isActive:r,className:n,...a},i)=>{const o=e?Du:"a";return s.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":t,"data-active":r,className:nt("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...a})});jK.displayName="SidebarMenuSubButton";const wK=[{label:"Overview",icon:V5,href:"/"},{label:"Routes",icon:U0,href:"/routes"},{label:"Parents",icon:ws,href:"/parents"},{label:"Students",icon:ws,href:"/students"},{label:"Drivers",icon:ws,href:"/drivers"},{label:"Vehicles",icon:Vl,href:"/vehicles"},{label:"Trips",icon:Vl,href:"/trips"},{label:"Staff",icon:ws,href:"/staff"},{label:"Reports",icon:Rn,href:"/reports"},{label:"Notifications",icon:mi,href:"/notifications"},{label:"School Subscriptions",icon:kr,href:"/admin/school-subscription"}];function NK(){const e=Vi(),t=r=>r==="/"?e.pathname==="/":e.pathname.startsWith(r);return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(dr,{to:"/home",children:s.jsx("img",{className:"w-40 h-30 ml-6",src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/shuletrack_landscape_logo_wfussl.png",alt:"shuletrack"})}),s.jsx("div",{className:"flex-1 mt-5 overflow-y-auto px-4",children:s.jsx("nav",{className:"space-y-1",children:wK.map(r=>{const n=t(r.href);return s.jsxs(dr,{to:r.href,className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${n?"bg-[#f7c624] text-white":"text-[#10213f] dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[s.jsx(r.icon,{size:20,className:n?"text-white":"text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"font-medium",children:r.label})]},r.label)})})}),s.jsx("div",{className:"p-4",children:s.jsxs(dr,{to:"/settings",className:`flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-700 dark:text-gray-300 w-full ${t("/settings")?"text-white":""}`,style:{backgroundColor:t("/settings")?"#f7c624":void 0},children:[s.jsx(Fi,{size:20,className:t("/settings")?"text-white":"text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"font-medium",children:"Settings"})]})})]})}function kb(e){const t=e+"CollectionProvider",[r,n]=Fa(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:j,children:v}=x,w=bs.useRef(null),N=bs.useRef(new Map).current;return s.jsx(a,{scope:j,itemMap:N,collectionRef:w,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=gd(l),d=bs.forwardRef((x,j)=>{const{scope:v,children:w}=x,N=i(l,v),k=Fs(j,N.collectionRef);return s.jsx(c,{ref:k,children:w})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",p=gd(u),f=bs.forwardRef((x,j)=>{const{scope:v,children:w,...N}=x,k=bs.useRef(null),P=Fs(j,k),E=i(u,v);return bs.useEffect(()=>(E.itemMap.set(k,{ref:k,...N}),()=>void E.itemMap.delete(k))),s.jsx(p,{[h]:"",ref:P,children:w})});f.displayName=u;function y(x){const j=i(e+"CollectionConsumer",x);return bs.useCallback(()=>{const w=j.collectionRef.current;if(!w)return[];const N=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(j.itemMap.values()).sort((E,I)=>N.indexOf(E.ref.current)-N.indexOf(I.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:d,ItemSlot:f},y,n]}var SK=g.createContext(void 0);function Ab(e){const t=g.useContext(SK);return e||t||"ltr"}var Gj="rovingFocusGroup.onEntryFocus",_K={bubbles:!1,cancelable:!0},Nx="RovingFocusGroup",[Ow,V8,CK]=kb(Nx),[kK,Pb]=Fa(Nx,[CK]),[AK,PK]=kK(Nx),H8=g.forwardRef((e,t)=>s.jsx(Ow.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Ow.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(EK,{...e,ref:t})})}));H8.displayName=Nx;var EK=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,p=g.useRef(null),f=Fs(t,p),y=Ab(i),[x,j]=Co({prop:o,defaultProp:l??null,onChange:c,caller:Nx}),[v,w]=g.useState(!1),N=Xa(d),k=V8(r),P=g.useRef(!1),[E,I]=g.useState(0);return g.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(Gj,N),()=>T.removeEventListener(Gj,N)},[N]),s.jsx(AK,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:x,onItemFocus:g.useCallback(T=>j(T),[j]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>I(T=>T+1),[]),onFocusableItemRemove:g.useCallback(()=>I(T=>T-1),[]),children:s.jsx(Bt.div,{tabIndex:v||E===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:bt(e.onMouseDown,()=>{P.current=!0}),onFocus:bt(e.onFocus,T=>{const R=!P.current;if(T.target===T.currentTarget&&R&&!v){const X=new CustomEvent(Gj,_K);if(T.currentTarget.dispatchEvent(X),!X.defaultPrevented){const D=k().filter(oe=>oe.focusable),C=D.find(oe=>oe.active),$=D.find(oe=>oe.id===x),Q=[C,$,...D].filter(Boolean).map(oe=>oe.ref.current);K8(Q,u)}}P.current=!1}),onBlur:bt(e.onBlur,()=>w(!1))})})}),W8="RovingFocusGroupItem",G8=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Fn(),d=i||c,u=PK(W8,r),h=u.currentTabStopId===d,p=V8(r),{onFocusableItemAdd:f,onFocusableItemRemove:y,currentTabStopId:x}=u;return g.useEffect(()=>{if(n)return f(),()=>y()},[n,f,y]),s.jsx(Ow.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:s.jsx(Bt.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:bt(e.onMouseDown,j=>{n?u.onItemFocus(d):j.preventDefault()}),onFocus:bt(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:bt(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){u.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const v=RK(j,u.orientation,u.dir);if(v!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let N=p().filter(k=>k.focusable).map(k=>k.ref.current);if(v==="last")N.reverse();else if(v==="prev"||v==="next"){v==="prev"&&N.reverse();const k=N.indexOf(j.currentTarget);N=u.loop?IK(N,k+1):N.slice(k+1)}setTimeout(()=>K8(N))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:x!=null}):o})})});G8.displayName=W8;var LK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function TK(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function RK(e,t,r){const n=TK(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return LK[n]}function K8(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function IK(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Y8=H8,J8=G8,Mw=["Enter"," "],FK=["ArrowDown","PageUp","Home"],Z8=["ArrowUp","PageDown","End"],DK=[...FK,...Z8],OK={ltr:[...Mw,"ArrowRight"],rtl:[...Mw,"ArrowLeft"]},MK={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Sx="Menu",[ex,$K,BK]=kb(Sx),[$u,X8]=Fa(Sx,[BK,Td,Pb]),Eb=Td(),Q8=Pb(),[zK,Bu]=$u(Sx),[UK,_x]=$u(Sx),eL=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=Eb(t),[c,d]=g.useState(null),u=g.useRef(!1),h=Xa(i),p=Ab(a);return g.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),s.jsx(bb,{...l,children:s.jsx(zK,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:d,children:s.jsx(UK,{scope:t,onClose:g.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:p,modal:o,children:n})})})};eL.displayName=Sx;var qK="MenuAnchor",xS=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=Eb(r);return s.jsx(wx,{...a,...n,ref:t})});xS.displayName=qK;var gS="MenuPortal",[VK,tL]=$u(gS,{forceMount:void 0}),sL=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=Bu(gS,t);return s.jsx(VK,{scope:t,forceMount:r,children:s.jsx(Qa,{present:r||i.open,children:s.jsx(Yf,{asChild:!0,container:a,children:n})})})};sL.displayName=gS;var Bi="MenuContent",[HK,vS]=$u(Bi),rL=g.forwardRef((e,t)=>{const r=tL(Bi,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Bu(Bi,e.__scopeMenu),o=_x(Bi,e.__scopeMenu);return s.jsx(ex.Provider,{scope:e.__scopeMenu,children:s.jsx(Qa,{present:n||i.open,children:s.jsx(ex.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(WK,{...a,ref:t}):s.jsx(GK,{...a,ref:t})})})})}),WK=g.forwardRef((e,t)=>{const r=Bu(Bi,e.__scopeMenu),n=g.useRef(null),a=Fs(t,n);return g.useEffect(()=>{const i=n.current;if(i)return ub(i)},[]),s.jsx(yS,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:bt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),GK=g.forwardRef((e,t)=>{const r=Bu(Bi,e.__scopeMenu);return s.jsx(yS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),KK=gd("MenuContent.ScrollLock"),yS=g.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f,disableOutsideScroll:y,...x}=e,j=Bu(Bi,r),v=_x(Bi,r),w=Eb(r),N=Q8(r),k=$K(r),[P,E]=g.useState(null),I=g.useRef(null),T=Fs(t,I,j.onContentChange),R=g.useRef(0),X=g.useRef(""),D=g.useRef(0),C=g.useRef(null),$=g.useRef("right"),B=g.useRef(0),Q=y?bx:g.Fragment,oe=y?{as:KK,allowPinchZoom:!0}:void 0,ae=Z=>{var O,ce;const W=X.current+Z,ve=k().filter(le=>!le.disabled),A=document.activeElement,z=(O=ve.find(le=>le.ref.current===A))==null?void 0:O.textValue,M=ve.map(le=>le.textValue),re=iY(M,W,z),te=(ce=ve.find(le=>le.textValue===re))==null?void 0:ce.ref.current;(function le(Ee){X.current=Ee,window.clearTimeout(R.current),Ee!==""&&(R.current=window.setTimeout(()=>le(""),1e3))})(W),te&&setTimeout(()=>te.focus())};g.useEffect(()=>()=>window.clearTimeout(R.current),[]),cb();const U=g.useCallback(Z=>{var ve,A;return $.current===((ve=C.current)==null?void 0:ve.side)&&lY(Z,(A=C.current)==null?void 0:A.area)},[]);return s.jsx(HK,{scope:r,searchRef:X,onItemEnter:g.useCallback(Z=>{U(Z)&&Z.preventDefault()},[U]),onItemLeave:g.useCallback(Z=>{var W;U(Z)||((W=I.current)==null||W.focus(),E(null))},[U]),onTriggerLeave:g.useCallback(Z=>{U(Z)&&Z.preventDefault()},[U]),pointerGraceTimerRef:D,onPointerGraceIntentChange:g.useCallback(Z=>{C.current=Z},[]),children:s.jsx(Q,{...oe,children:s.jsx(yx,{asChild:!0,trapped:a,onMountAutoFocus:bt(i,Z=>{var W;Z.preventDefault(),(W=I.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f,children:s.jsx(Y8,{asChild:!0,...N,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:P,onCurrentTabStopIdChange:E,onEntryFocus:bt(c,Z=>{v.isUsingKeyboardRef.current||Z.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(jb,{role:"menu","aria-orientation":"vertical","data-state":yL(j.open),"data-radix-menu-content":"",dir:v.dir,...w,...x,ref:T,style:{outline:"none",...x.style},onKeyDown:bt(x.onKeyDown,Z=>{const ve=Z.target.closest("[data-radix-menu-content]")===Z.currentTarget,A=Z.ctrlKey||Z.altKey||Z.metaKey,z=Z.key.length===1;ve&&(Z.key==="Tab"&&Z.preventDefault(),!A&&z&&ae(Z.key));const M=I.current;if(Z.target!==M||!DK.includes(Z.key))return;Z.preventDefault();const te=k().filter(O=>!O.disabled).map(O=>O.ref.current);Z8.includes(Z.key)&&te.reverse(),nY(te)}),onBlur:bt(e.onBlur,Z=>{Z.currentTarget.contains(Z.target)||(window.clearTimeout(R.current),X.current="")}),onPointerMove:bt(e.onPointerMove,tx(Z=>{const W=Z.target,ve=B.current!==Z.clientX;if(Z.currentTarget.contains(W)&&ve){const A=Z.clientX>B.current?"right":"left";$.current=A,B.current=Z.clientX}}))})})})})})})});rL.displayName=Bi;var YK="MenuGroup",bS=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Bt.div,{role:"group",...n,ref:t})});bS.displayName=YK;var JK="MenuLabel",nL=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Bt.div,{...n,ref:t})});nL.displayName=JK;var Y0="MenuItem",s3="menu.itemSelect",Lb=g.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=g.useRef(null),o=_x(Y0,e.__scopeMenu),l=vS(Y0,e.__scopeMenu),c=Fs(t,i),d=g.useRef(!1),u=()=>{const h=i.current;if(!r&&h){const p=new CustomEvent(s3,{bubbles:!0,cancelable:!0});h.addEventListener(s3,f=>n==null?void 0:n(f),{once:!0}),Y5(h,p),p.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(aL,{...a,ref:c,disabled:r,onClick:bt(e.onClick,u),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),d.current=!0},onPointerUp:bt(e.onPointerUp,h=>{var p;d.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:bt(e.onKeyDown,h=>{const p=l.searchRef.current!=="";r||p&&h.key===" "||Mw.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Lb.displayName=Y0;var aL=g.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=vS(Y0,r),l=Q8(r),c=g.useRef(null),d=Fs(t,c),[u,h]=g.useState(!1),[p,f]=g.useState("");return g.useEffect(()=>{const y=c.current;y&&f((y.textContent??"").trim())},[i.children]),s.jsx(ex.ItemSlot,{scope:r,disabled:n,textValue:a??p,children:s.jsx(J8,{asChild:!0,...l,focusable:!n,children:s.jsx(Bt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:bt(e.onPointerMove,tx(y=>{n?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:bt(e.onPointerLeave,tx(y=>o.onItemLeave(y))),onFocus:bt(e.onFocus,()=>h(!0)),onBlur:bt(e.onBlur,()=>h(!1))})})})}),ZK="MenuCheckboxItem",iL=g.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(uL,{scope:e.__scopeMenu,checked:r,children:s.jsx(Lb,{role:"menuitemcheckbox","aria-checked":J0(r)?"mixed":r,...a,ref:t,"data-state":wS(r),onSelect:bt(a.onSelect,()=>n==null?void 0:n(J0(r)?!0:!r),{checkForDefaultPrevented:!1})})})});iL.displayName=ZK;var oL="MenuRadioGroup",[XK,QK]=$u(oL,{value:void 0,onValueChange:()=>{}}),lL=g.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Xa(n);return s.jsx(XK,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(bS,{...a,ref:t})})});lL.displayName=oL;var cL="MenuRadioItem",dL=g.forwardRef((e,t)=>{const{value:r,...n}=e,a=QK(cL,e.__scopeMenu),i=r===a.value;return s.jsx(uL,{scope:e.__scopeMenu,checked:i,children:s.jsx(Lb,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":wS(i),onSelect:bt(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});dL.displayName=cL;var jS="MenuItemIndicator",[uL,eY]=$u(jS,{checked:!1}),hL=g.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=eY(jS,r);return s.jsx(Qa,{present:n||J0(i.checked)||i.checked===!0,children:s.jsx(Bt.span,{...a,ref:t,"data-state":wS(i.checked)})})});hL.displayName=jS;var tY="MenuSeparator",fL=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Bt.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});fL.displayName=tY;var sY="MenuArrow",mL=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=Eb(r);return s.jsx(wb,{...a,...n,ref:t})});mL.displayName=sY;var rY="MenuSub",[ore,pL]=$u(rY),Qm="MenuSubTrigger",xL=g.forwardRef((e,t)=>{const r=Bu(Qm,e.__scopeMenu),n=_x(Qm,e.__scopeMenu),a=pL(Qm,e.__scopeMenu),i=vS(Qm,e.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(xS,{asChild:!0,...d,children:s.jsx(aL,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":yL(r.open),...e,ref:tc(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:bt(e.onPointerMove,tx(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:bt(e.onPointerLeave,tx(h=>{var f,y;u();const p=(f=r.content)==null?void 0:f.getBoundingClientRect();if(p){const x=(y=r.content)==null?void 0:y.dataset.side,j=x==="right",v=j?-5:5,w=p[j?"left":"right"],N=p[j?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x:w,y:p.top},{x:N,y:p.top},{x:N,y:p.bottom},{x:w,y:p.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:bt(e.onKeyDown,h=>{var f;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||OK[n.dir].includes(h.key)&&(r.onOpenChange(!0),(f=r.content)==null||f.focus(),h.preventDefault())})})})});xL.displayName=Qm;var gL="MenuSubContent",vL=g.forwardRef((e,t)=>{const r=tL(Bi,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Bu(Bi,e.__scopeMenu),o=_x(Bi,e.__scopeMenu),l=pL(gL,e.__scopeMenu),c=g.useRef(null),d=Fs(t,c);return s.jsx(ex.Provider,{scope:e.__scopeMenu,children:s.jsx(Qa,{present:n||i.open,children:s.jsx(ex.Slot,{scope:e.__scopeMenu,children:s.jsx(yS,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:bt(e.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:bt(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:bt(e.onKeyDown,u=>{var f;const h=u.currentTarget.contains(u.target),p=MK[o.dir].includes(u.key);h&&p&&(i.onOpenChange(!1),(f=l.trigger)==null||f.focus(),u.preventDefault())})})})})})});vL.displayName=gL;function yL(e){return e?"open":"closed"}function J0(e){return e==="indeterminate"}function wS(e){return J0(e)?"indeterminate":e?"checked":"unchecked"}function nY(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function aY(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function iY(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=aY(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function oY(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,h=c.x,p=c.y;u>n!=p>n&&r<(h-d)*(n-u)/(p-u)+d&&(a=!a)}return a}function lY(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return oY(r,t)}function tx(e){return t=>t.pointerType==="mouse"?e(t):void 0}var cY=eL,dY=xS,uY=sL,hY=rL,fY=bS,mY=nL,pY=Lb,xY=iL,gY=lL,vY=dL,yY=hL,bY=fL,jY=mL,wY=xL,NY=vL,Tb="DropdownMenu",[SY,lre]=Fa(Tb,[X8]),Da=X8(),[_Y,bL]=SY(Tb),jL=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Da(t),d=g.useRef(null),[u,h]=Co({prop:a,defaultProp:i??!1,onChange:o,caller:Tb});return s.jsx(_Y,{scope:t,triggerId:Fn(),triggerRef:d,contentId:Fn(),open:u,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(p=>!p),[h]),modal:l,children:s.jsx(cY,{...c,open:u,onOpenChange:h,dir:n,modal:l,children:r})})};jL.displayName=Tb;var wL="DropdownMenuTrigger",NL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=bL(wL,r),o=Da(r);return s.jsx(dY,{asChild:!0,...o,children:s.jsx(Bt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:tc(t,i.triggerRef),onPointerDown:bt(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:bt(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});NL.displayName=wL;var CY="DropdownMenuPortal",SL=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Da(t);return s.jsx(uY,{...n,...r})};SL.displayName=CY;var _L="DropdownMenuContent",CL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=bL(_L,r),i=Da(r),o=g.useRef(!1);return s.jsx(hY,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:bt(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:bt(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});CL.displayName=_L;var kY="DropdownMenuGroup",AY=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(fY,{...a,...n,ref:t})});AY.displayName=kY;var PY="DropdownMenuLabel",kL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(mY,{...a,...n,ref:t})});kL.displayName=PY;var EY="DropdownMenuItem",AL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(pY,{...a,...n,ref:t})});AL.displayName=EY;var LY="DropdownMenuCheckboxItem",PL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(xY,{...a,...n,ref:t})});PL.displayName=LY;var TY="DropdownMenuRadioGroup",RY=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(gY,{...a,...n,ref:t})});RY.displayName=TY;var IY="DropdownMenuRadioItem",EL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(vY,{...a,...n,ref:t})});EL.displayName=IY;var FY="DropdownMenuItemIndicator",LL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(yY,{...a,...n,ref:t})});LL.displayName=FY;var DY="DropdownMenuSeparator",TL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(bY,{...a,...n,ref:t})});TL.displayName=DY;var OY="DropdownMenuArrow",MY=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(jY,{...a,...n,ref:t})});MY.displayName=OY;var $Y="DropdownMenuSubTrigger",RL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(wY,{...a,...n,ref:t})});RL.displayName=$Y;var BY="DropdownMenuSubContent",IL=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Da(r);return s.jsx(NY,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IL.displayName=BY;var zY=jL,UY=NL,qY=SL,FL=CL,DL=kL,OL=AL,ML=PL,$L=EL,BL=LL,zL=TL,UL=RL,qL=IL;const Zn=zY,Xn=UY,VY=g.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(UL,{ref:a,className:nt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(Hl,{className:"ml-auto h-4 w-4"})]}));VY.displayName=UL.displayName;const HY=g.forwardRef(({className:e,...t},r)=>s.jsx(qL,{ref:r,className:nt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));HY.displayName=qL.displayName;const Dn=g.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(qY,{children:s.jsx(FL,{ref:n,sideOffset:t,className:nt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Dn.displayName=FL.displayName;const Ut=g.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(OL,{ref:n,className:nt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Ut.displayName=OL.displayName;const WY=g.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(ML,{ref:a,className:nt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(BL,{children:s.jsx(Or,{className:"h-4 w-4"})})}),t]}));WY.displayName=ML.displayName;const GY=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs($L,{ref:n,className:nt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(BL,{children:s.jsx(wq,{className:"h-2 w-2 fill-current"})})}),t]}));GY.displayName=$L.displayName;const Rd=g.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(DL,{ref:n,className:nt("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));Rd.displayName=DL.displayName;const bd=g.forwardRef(({className:e,...t},r)=>s.jsx(zL,{ref:r,className:nt("-mx-1 my-1 h-px bg-muted",e),...t}));bd.displayName=zL.displayName;const KY=()=>{const{theme:e,isDark:t,setTheme:r,toggleTheme:n}=H5(),i=e==="auto"?t?"dark":"light":e;return s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsxs(ue,{variant:"outline",size:"icon",className:"h-9 w-9",children:[s.jsx(PC,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(AC,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),s.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),s.jsxs(Dn,{align:"end",children:[s.jsxs(Ut,{onClick:()=>r("light"),className:e==="light"?"bg-accent":"",children:[s.jsx(PC,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:" Light"}),e==="light"&&s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"Active"})]}),s.jsxs(Ut,{onClick:()=>r("dark"),className:e==="dark"?"bg-accent":"",children:[s.jsx(AC,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:" Dark"}),e==="dark"&&s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"Active"})]}),s.jsxs(Ut,{onClick:()=>r("auto"),className:e==="auto"?"bg-accent":"",children:[s.jsx(Pq,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Follow System"}),e==="auto"&&s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:i==="dark"?"Dark":"Light"})]})]})]})},VL=({onMenuClick:e,isScrolled:t=!1})=>{var d;const r=Ia(),n=rr(),{user:a}=xa(u=>u.auth),{notifications:i}=xa(u=>u.notifications),{isDark:o}=H5(),l=()=>{n(rE()),r("/login")},c=!o||t;return s.jsx("nav",{className:`bg-background border-b px-4 md:px-8 py-3 transition-colors duration-200 ${t?"bg-white shadow-md":""}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:e,className:"p-2 rounded-md hover:bg-accent md:hidden",children:s.jsx(gE,{className:`h-6 w-6 ${c?"text-black":"text-foreground"}`})}),s.jsxs("h1",{className:`text-xl font-semibold ${c?"text-black":"text-foreground"}`,children:["Hello, ",a==null?void 0:a.first_name," ",a==null?void 0:a.last_name]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(KY,{}),s.jsxs(ue,{variant:"ghost",size:"icon",className:"relative",onClick:()=>r("/notifications"),children:[s.jsx(mi,{className:`h-5 w-5 ${c?"text-black":""}`}),i&&i.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full text-[10px] text-white flex items-center justify-center",children:i.length})]}),s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsxs(ue,{variant:"ghost",className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-primary",children:((d=a==null?void 0:a.first_name)==null?void 0:d.charAt(0))||"U"})}),s.jsxs("div",{className:"hidden md:block text-left",children:[s.jsx("p",{className:`text-sm font-medium ${c?"text-black":""}`,children:(a==null?void 0:a.first_name)||"User"}),s.jsx("p",{className:`text-xs ${c?"text-gray-600":"text-muted-foreground"}`,children:(a==null?void 0:a.user_type)||"Admin"})]})]})}),s.jsxs(Dn,{align:"end",children:[s.jsx(Ut,{onClick:()=>r("/profile"),children:"Profile"}),s.jsx(Ut,{onClick:()=>r("/settings"),children:"Settings"}),s.jsx(Ut,{onClick:()=>r("/terms-and-policies"),children:"Terms and Policies"}),s.jsx(Ut,{onClick:l,children:"Logout"})]})]})]})]})})},YY=()=>{Vi().pathname;const{openMobile:t,setOpenMobile:r,toggleSidebar:n}=Qf(),[a,i]=g.useState(!1),o=g.useRef(null);return g.useEffect(()=>{const l=()=>{if(o.current){const d=o.current.scrollTop;i(d>0)}},c=o.current;if(c)return c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)},[]),s.jsxs("div",{className:"h-screen w-screen bg-background",children:[t&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>r(!1)}),s.jsxs("div",{className:"flex h-full w-full overflow-hidden",children:[s.jsx("div",{className:`fixed md:static inset-y-0 left-0 z-50 w-64 transform transition-transform duration-200 ease-in-out ${t?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:s.jsx("div",{className:"h-full bg-card border-r",children:s.jsx(NK,{})})}),s.jsxs("div",{className:"flex-1 flex flex-col w-full overflow-hidden",children:[s.jsx(VL,{onMenuClick:n,isScrolled:a}),s.jsx("main",{ref:o,className:"flex-1 overflow-y-auto bg-background",children:s.jsx("div",{className:"h-full w-full",children:s.jsx("div",{className:"h-full w-full",children:s.jsx(tP,{})})})})]})]})]})},JY=()=>s.jsx(q8,{children:s.jsx(YY,{})}),HL=()=>{const{stats:e,loading:t}=jt(n=>n.overview),r=[{title:"Total Students",value:e.totalStudents.toString(),icon:ws,description:"Active students",color:"text-blue-600"},{title:"Total Parents",value:e.totalParents.toString(),icon:yE,description:"Registered parents",color:"text-green-600"},{title:"Total Staff",value:e.totalStaff.toString(),icon:yq,description:"School staff",color:"text-purple-600"},{title:"Total Vehicles",value:e.totalVehicles.toString(),icon:qi,description:"Fleet vehicles",color:"text-orange-600"},{title:"Active Routes",value:e.activeRoutes.toString(),icon:vE,description:"Current routes",color:"text-indigo-600"},{title:"Total Routes",value:e.totalRoutes.toString(),icon:Nr,description:"All routes",color:"text-red-600"}];return t?s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 w-full",children:r.map(n=>s.jsxs(ze,{className:"w-full",children:[s.jsx(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(n.icon,{className:"h-4 w-4 text-muted-foreground"})}),s.jsxs(Ue,{children:[s.jsx("div",{className:"h-8 bg-muted rounded animate-pulse"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:n.description})]})]},n.title))}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 w-full",children:r.map(n=>s.jsxs(ze,{className:"w-full hover:shadow-md transition-shadow",children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:n.title}),s.jsx(n.icon,{className:`h-4 w-4 ${n.color}`})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:`text-2xl font-bold ${n.color}`,children:n.value}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})]},n.title))})},ei=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:nt("w-full caption-bottom text-sm",e),...t})}));ei.displayName="Table";const ti=g.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:nt("[&_tr]:border-b",e),...t}));ti.displayName="TableHeader";const si=g.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:nt("[&_tr:last-child]:border-0",e),...t}));si.displayName="TableBody";const ZY=g.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:nt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));ZY.displayName="TableFooter";const hr=g.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:nt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));hr.displayName="TableRow";const yt=g.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:nt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));yt.displayName="TableHead";const vt=g.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:nt("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));vt.displayName="TableCell";const XY=g.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:nt("mt-4 text-sm text-muted-foreground",e),...t}));XY.displayName="TableCaption";const WL=()=>{const e=rr(),{trips:t,loading:r}=jt(d=>d.trips),a=(()=>{const d=localStorage.getItem("schoolId");return d?parseInt(d):void 0})();g.useEffect(()=>{a&&e(Xh({schoolId:a}))},[e,a]);const i=Array.isArray(t)?t.slice(0,5):[],o=d=>{switch(d.toLowerCase()){case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=d=>{try{return new Date(d).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return d}},c=d=>d.replace("_"," ").replace(/\b\w/g,u=>u.toUpperCase());return r?s.jsx("div",{className:"rounded-md border w-full",children:s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"animate-pulse space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"space-y-2",children:[1,2,3].map(d=>s.jsx("div",{className:"h-4 bg-gray-200 rounded"},d))})]})})}):i.length===0?s.jsxs("div",{className:"rounded-md border w-full",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsx("h3",{className:"text-lg font-semibold",children:"Recent Trips"})}),s.jsx("div",{className:"p-8 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"No trips found"}),s.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"There are no recent trips to display. Trips will appear here once they are scheduled or completed."})]})]})})]}):s.jsxs("div",{className:"rounded-md border w-full",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsx("h3",{className:"text-lg font-semibold",children:"Recent Trips"})}),s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{className:"w-[20%]",children:"Route"}),s.jsx(yt,{className:"w-[20%]",children:"Driver"}),s.jsx(yt,{className:"w-[20%]",children:"Vehicle"}),s.jsx(yt,{className:"w-[15%]",children:"Status"}),s.jsx(yt,{className:"w-[15%]",children:"Start Time"}),s.jsx(yt,{className:"w-[10%]",children:"Students"})]})}),s.jsx(si,{children:i.map(d=>s.jsxs(hr,{children:[s.jsx(vt,{className:"font-medium",children:d.route_name||`Route ${d.route}`}),s.jsx(vt,{children:d.driver_name||`Driver ${d.driver}`}),s.jsx(vt,{children:d.vehicle_registration||`Vehicle ${d.vehicle}`}),s.jsx(vt,{children:s.jsx(De,{className:o(d.status),children:c(d.status)})}),s.jsx(vt,{children:l(d.start_time)}),s.jsx(vt,{children:d.students_count})]},d.id))})]})]})},QY=()=>{const e=rr(),{stats:t,loading:r,error:n,lastUpdated:a}=jt(k=>k.overview),{user:i}=jt(k=>k.auth),{schools:o,loading:l,error:c}=jt(k=>k.schools),{preferences:d={showAnalytics:!0,showRecentActivity:!0,showNotificationsPanel:!0,allowDataExport:!0,autoBackup:!0,theme:"light",language:"en"}}=jt(k=>k.preferences),{notifications:u}=jt(k=>k.notifications),{parents:h}=jt(k=>k.parents),{drivers:p}=jt(k=>k.drivers),y=(()=>{const k=localStorage.getItem("schoolId");if(k)return parseInt(k);const P=o.find(E=>E.admin===(i==null?void 0:i.id));return P==null?void 0:P.id})();g.useEffect(()=>{y&&(e(vp({schoolId:y})),e(Qh({schoolId:y})),e(Vn({schoolId:y})),e(Hn())),e(bp())},[e,y]);const x=()=>{y&&(e(vp({schoolId:y})),e(Qh({schoolId:y})),e(Vn({schoolId:y})),e(Hn()))},j=k=>{const P=new Date(k),I=Math.floor((new Date().getTime()-P.getTime())/(1e3*60));return I<1?"Just now":I<60?`${I} min ago`:I<1440?`${Math.floor(I/60)} hour${Math.floor(I/60)>1?"s":""} ago`:`${Math.floor(I/1440)} day${Math.floor(I/1440)>1?"s":""} ago`},v=k=>{const P={ACTION_REQUIRED:{color:"bg-orange-100 text-orange-800",icon:un},SYSTEM:{color:"bg-blue-100 text-blue-800",icon:mi},INFO:{color:"bg-blue-100 text-blue-800",icon:mi},WARNING:{color:"bg-yellow-100 text-yellow-800",icon:un},EMERGENCY:{color:"bg-red-100 text-red-800",icon:un}};return P[k]||P.INFO},w=k=>{const P=h==null?void 0:h.find(E=>E.id===k);return P?P.user_full_name:`Parent ${k}`},N=k=>{const P=p==null?void 0:p.find(E=>E.id===k);return P?`${P.user_details.first_name} ${P.user_details.last_name}`:`Driver ${k}`};return l?s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(In,{className:"h-5 w-5 animate-spin text-primary"}),s.jsx("span",{className:"text-muted-foreground",children:"Loading school information..."})]})})})}):c?s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs(Gl,{variant:"destructive",className:"border-red-200 bg-red-50 dark:bg-red-950/20",children:[s.jsx(un,{className:"h-4 w-4"}),s.jsxs(Kl,{children:["Failed to load school information: ",c]})]})})}):y?s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"p-2",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:"Dashboard Overview"}),a&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Last updated: ",new Date(a).toLocaleString()]})]}),s.jsxs(ue,{onClick:x,disabled:r,variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-accent/50",children:[s.jsx(Wl,{className:`h-4 w-4 ${r?"animate-spin":""}`}),"Refresh"]})]}),n&&s.jsxs(Gl,{className:"mb-6 border-red-200 bg-red-50 dark:bg-red-950/20",variant:"destructive",children:[s.jsx(un,{className:"h-4 w-4"}),s.jsx(Kl,{children:n})]}),s.jsxs("div",{className:"grid gap-6",children:[d.showAnalytics&&s.jsx("div",{className:"mb-4",children:s.jsx(HL,{})}),d.showRecentActivity&&s.jsx("div",{className:"mb-4",children:s.jsx(WL,{})}),d.showNotificationsPanel&&s.jsxs(ze,{className:"border-0 shadow-sm bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20",children:[s.jsx(Xe,{className:"pb-3",children:s.jsxs(tt,{className:"flex items-center gap-2 text-lg",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(mi,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Recent Notifications",u&&u.length>0&&s.jsx(De,{variant:"secondary",className:"ml-2",children:u.length})]})}),s.jsx(Ue,{className:"pt-0",children:!u||u.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(mi,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):s.jsx("div",{className:"space-y-3",children:u.slice(0,5).map(k=>{var I,T,R,X;const P=v(k.notification_type||"INFO"),E=P.icon;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800/50 rounded-xl border shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${k.notification_type==="ACTION_REQUIRED"?"bg-orange-500":k.notification_type==="EMERGENCY"?"bg-red-500":k.notification_type==="WARNING"?"bg-yellow-500":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs(De,{className:`text-xs ${P.color}`,children:[s.jsx(E,{className:"w-3 h-3 mr-1"}),k.notification_type||"INFO"]}),k.is_read&&s.jsx(Es,{className:"w-3 h-3 text-[#f7c624]"})]}),s.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm truncate",children:k.message}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["School:"," ",k.school_name||"Unknown"]}),(((I=k.parents)==null?void 0:I.length)>0||((T=k.drivers)==null?void 0:T.length)>0)&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[((R=k.parents)==null?void 0:R.length)>0&&s.jsxs("span",{className:"text-xs text-blue-600",children:["Parents:"," ",k.parents.map(w).join(", ")]}),((X=k.drivers)==null?void 0:X.length)>0&&s.jsxs("span",{className:"text-xs text-[#f7c624]",children:["Drivers:"," ",k.drivers.map(N).join(", ")]})]})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1 ml-3",children:[s.jsx("span",{className:"text-xs text-gray-500 font-medium",children:k.created_at?j(k.created_at):"N/A"}),!k.is_read&&s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]})]},k.id)})})})]}),!d.showAnalytics&&!d.showRecentActivity&&!d.showNotificationsPanel&&s.jsx(ze,{className:"border-0 shadow-sm bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900/20 dark:to-gray-800/20",children:s.jsx(Ue,{className:"p-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"w-20 h-20 bg-muted rounded-2xl flex items-center justify-center shadow-inner",children:s.jsx("svg",{className:"w-10 h-10 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Dashboard is Empty"}),s.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"All dashboard sections are currently disabled. You can enable them in the Settings page under Personalization."})]})]})})})]})]})})}):s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs(Gl,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950/20",children:[s.jsx(un,{className:"h-4 w-4"}),s.jsxs(Kl,{children:["No school ID found. Please ensure you are associated with a school.",o.length===0&&" No schools available.",o.length>0&&i&&` Available schools: ${o.length}, User ID: ${i.id}`]})]})})})};function r3(e,[t,r]){return Math.min(r,Math.max(t,e))}function NS(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var eJ=[" ","Enter","ArrowUp","ArrowDown"],tJ=[" ","Enter"],Eu="Select",[Rb,Ib,sJ]=kb(Eu),[em,cre]=Fa(Eu,[sJ,Td]),Fb=Td(),[rJ,Id]=em(Eu),[nJ,aJ]=em(Eu),GL=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:p,required:f,form:y}=e,x=Fb(t),[j,v]=g.useState(null),[w,N]=g.useState(null),[k,P]=g.useState(!1),E=Ab(d),[I,T]=Co({prop:n,defaultProp:a??!1,onChange:i,caller:Eu}),[R,X]=Co({prop:o,defaultProp:l,onChange:c,caller:Eu}),D=g.useRef(null),C=j?y||!!j.closest("form"):!0,[$,B]=g.useState(new Set),Q=Array.from($).map(oe=>oe.props.value).join(";");return s.jsx(bb,{...x,children:s.jsxs(rJ,{required:f,scope:t,trigger:j,onTriggerChange:v,valueNode:w,onValueNodeChange:N,valueNodeHasChildren:k,onValueNodeHasChildrenChange:P,contentId:Fn(),value:R,onValueChange:X,open:I,onOpenChange:T,dir:E,triggerPointerDownPosRef:D,disabled:p,children:[s.jsx(Rb.Provider,{scope:t,children:s.jsx(nJ,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(oe=>{B(ae=>new Set(ae).add(oe))},[]),onNativeOptionRemove:g.useCallback(oe=>{B(ae=>{const U=new Set(ae);return U.delete(oe),U})},[]),children:r})}),C?s.jsxs(gT,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:R,onChange:oe=>X(oe.target.value),disabled:p,form:y,children:[R===void 0?s.jsx("option",{value:""}):null,Array.from($)]},Q):null]})})};GL.displayName=Eu;var KL="SelectTrigger",YL=g.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=Fb(r),o=Id(KL,r),l=o.disabled||n,c=Fs(t,o.onTriggerChange),d=Ib(r),u=g.useRef("touch"),[h,p,f]=yT(x=>{const j=d().filter(N=>!N.disabled),v=j.find(N=>N.value===o.value),w=bT(j,x,v);w!==void 0&&o.onValueChange(w.value)}),y=x=>{l||(o.onOpenChange(!0),f()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return s.jsx(wx,{asChild:!0,...i,children:s.jsx(Bt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":vT(o.value)?"":void 0,...a,ref:c,onClick:bt(a.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&y(x)}),onPointerDown:bt(a.onPointerDown,x=>{u.current=x.pointerType;const j=x.target;j.hasPointerCapture(x.pointerId)&&j.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(y(x),x.preventDefault())}),onKeyDown:bt(a.onKeyDown,x=>{const j=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(j&&x.key===" ")&&eJ.includes(x.key)&&(y(),x.preventDefault())})})})});YL.displayName=KL;var JL="SelectValue",ZL=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Id(JL,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=Fs(t,c.onValueNodeChange);return Jn(()=>{d(u)},[d,u]),s.jsx(Bt.span,{...l,ref:h,style:{pointerEvents:"none"},children:vT(c.value)?s.jsx(s.Fragment,{children:o}):i})});ZL.displayName=JL;var iJ="SelectIcon",XL=g.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Bt.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});XL.displayName=iJ;var oJ="SelectPortal",QL=e=>s.jsx(Yf,{asChild:!0,...e});QL.displayName=oJ;var Lu="SelectContent",eT=g.forwardRef((e,t)=>{const r=Id(Lu,e.__scopeSelect),[n,a]=g.useState();if(Jn(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Pd.createPortal(s.jsx(tT,{scope:e.__scopeSelect,children:s.jsx(Rb.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(sT,{...e,ref:t})});eT.displayName=Lu;var to=10,[tT,Fd]=em(Lu),lJ="SelectContentImpl",cJ=gd("SelectContent.RemoveScroll"),sT=g.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:x,avoidCollisions:j,...v}=e,w=Id(Lu,r),[N,k]=g.useState(null),[P,E]=g.useState(null),I=Fs(t,O=>k(O)),[T,R]=g.useState(null),[X,D]=g.useState(null),C=Ib(r),[$,B]=g.useState(!1),Q=g.useRef(!1);g.useEffect(()=>{if(N)return ub(N)},[N]),cb();const oe=g.useCallback(O=>{const[ce,...le]=C().map(Be=>Be.ref.current),[Ee]=le.slice(-1),_e=document.activeElement;for(const Be of O)if(Be===_e||(Be==null||Be.scrollIntoView({block:"nearest"}),Be===ce&&P&&(P.scrollTop=0),Be===Ee&&P&&(P.scrollTop=P.scrollHeight),Be==null||Be.focus(),document.activeElement!==_e))return},[C,P]),ae=g.useCallback(()=>oe([T,N]),[oe,T,N]);g.useEffect(()=>{$&&ae()},[$,ae]);const{onOpenChange:U,triggerPointerDownPosRef:Z}=w;g.useEffect(()=>{if(N){let O={x:0,y:0};const ce=Ee=>{var _e,Be;O={x:Math.abs(Math.round(Ee.pageX)-(((_e=Z.current)==null?void 0:_e.x)??0)),y:Math.abs(Math.round(Ee.pageY)-(((Be=Z.current)==null?void 0:Be.y)??0))}},le=Ee=>{O.x<=10&&O.y<=10?Ee.preventDefault():N.contains(Ee.target)||U(!1),document.removeEventListener("pointermove",ce),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",le,{capture:!0})}}},[N,U,Z]),g.useEffect(()=>{const O=()=>U(!1);return window.addEventListener("blur",O),window.addEventListener("resize",O),()=>{window.removeEventListener("blur",O),window.removeEventListener("resize",O)}},[U]);const[W,ve]=yT(O=>{const ce=C().filter(_e=>!_e.disabled),le=ce.find(_e=>_e.ref.current===document.activeElement),Ee=bT(ce,O,le);Ee&&setTimeout(()=>Ee.ref.current.focus())}),A=g.useCallback((O,ce,le)=>{const Ee=!Q.current&&!le;(w.value!==void 0&&w.value===ce||Ee)&&(R(O),Ee&&(Q.current=!0))},[w.value]),z=g.useCallback(()=>N==null?void 0:N.focus(),[N]),M=g.useCallback((O,ce,le)=>{const Ee=!Q.current&&!le;(w.value!==void 0&&w.value===ce||Ee)&&D(O)},[w.value]),re=n==="popper"?$w:rT,te=re===$w?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:x,avoidCollisions:j}:{};return s.jsx(tT,{scope:r,content:N,viewport:P,onViewportChange:E,itemRefCallback:A,selectedItem:T,onItemLeave:z,itemTextRefCallback:M,focusSelectedItem:ae,selectedItemText:X,position:n,isPositioned:$,searchRef:W,children:s.jsx(bx,{as:cJ,allowPinchZoom:!0,children:s.jsx(yx,{asChild:!0,trapped:w.open,onMountAutoFocus:O=>{O.preventDefault()},onUnmountAutoFocus:bt(a,O=>{var ce;(ce=w.trigger)==null||ce.focus({preventScroll:!0}),O.preventDefault()}),children:s.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:O=>O.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:s.jsx(re,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:O=>O.preventDefault(),...v,...te,onPlaced:()=>B(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:bt(v.onKeyDown,O=>{const ce=O.ctrlKey||O.altKey||O.metaKey;if(O.key==="Tab"&&O.preventDefault(),!ce&&O.key.length===1&&ve(O.key),["ArrowUp","ArrowDown","Home","End"].includes(O.key)){let Ee=C().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);if(["ArrowUp","End"].includes(O.key)&&(Ee=Ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(O.key)){const _e=O.target,Be=Ee.indexOf(_e);Ee=Ee.slice(Be+1)}setTimeout(()=>oe(Ee)),O.preventDefault()}})})})})})})});sT.displayName=lJ;var dJ="SelectItemAlignedPosition",rT=g.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Id(Lu,r),o=Fd(Lu,r),[l,c]=g.useState(null),[d,u]=g.useState(null),h=Fs(t,I=>u(I)),p=Ib(r),f=g.useRef(!1),y=g.useRef(!0),{viewport:x,selectedItem:j,selectedItemText:v,focusSelectedItem:w}=o,N=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&j&&v){const I=i.trigger.getBoundingClientRect(),T=d.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),X=v.getBoundingClientRect();if(i.dir!=="rtl"){const _e=X.left-T.left,Be=R.left-_e,Ge=I.left-Be,ut=I.width+Ge,Le=Math.max(ut,T.width),K=window.innerWidth-to,He=r3(Be,[to,Math.max(to,K-Le)]);l.style.minWidth=ut+"px",l.style.left=He+"px"}else{const _e=T.right-X.right,Be=window.innerWidth-R.right-_e,Ge=window.innerWidth-I.right-Be,ut=I.width+Ge,Le=Math.max(ut,T.width),K=window.innerWidth-to,He=r3(Be,[to,Math.max(to,K-Le)]);l.style.minWidth=ut+"px",l.style.right=He+"px"}const D=p(),C=window.innerHeight-to*2,$=x.scrollHeight,B=window.getComputedStyle(d),Q=parseInt(B.borderTopWidth,10),oe=parseInt(B.paddingTop,10),ae=parseInt(B.borderBottomWidth,10),U=parseInt(B.paddingBottom,10),Z=Q+oe+$+U+ae,W=Math.min(j.offsetHeight*5,Z),ve=window.getComputedStyle(x),A=parseInt(ve.paddingTop,10),z=parseInt(ve.paddingBottom,10),M=I.top+I.height/2-to,re=C-M,te=j.offsetHeight/2,O=j.offsetTop+te,ce=Q+oe+O,le=Z-ce;if(ce<=M){const _e=D.length>0&&j===D[D.length-1].ref.current;l.style.bottom="0px";const Be=d.clientHeight-x.offsetTop-x.offsetHeight,Ge=Math.max(re,te+(_e?z:0)+Be+ae),ut=ce+Ge;l.style.height=ut+"px"}else{const _e=D.length>0&&j===D[0].ref.current;l.style.top="0px";const Ge=Math.max(M,Q+x.offsetTop+(_e?A:0)+te)+le;l.style.height=Ge+"px",x.scrollTop=ce-M+x.offsetTop}l.style.margin=`${to}px 0`,l.style.minHeight=W+"px",l.style.maxHeight=C+"px",n==null||n(),requestAnimationFrame(()=>f.current=!0)}},[p,i.trigger,i.valueNode,l,d,x,j,v,i.dir,n]);Jn(()=>N(),[N]);const[k,P]=g.useState();Jn(()=>{d&&P(window.getComputedStyle(d).zIndex)},[d]);const E=g.useCallback(I=>{I&&y.current===!0&&(N(),w==null||w(),y.current=!1)},[N,w]);return s.jsx(hJ,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:E,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:s.jsx(Bt.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});rT.displayName=dJ;var uJ="SelectPopperPosition",$w=g.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=to,...i}=e,o=Fb(r);return s.jsx(jb,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$w.displayName=uJ;var[hJ,SS]=em(Lu,{}),Bw="SelectViewport",nT=g.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Fd(Bw,r),o=SS(Bw,r),l=Fs(t,i.onViewportChange),c=g.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(Rb.Slot,{scope:r,children:s.jsx(Bt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:bt(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const f=Math.abs(c.current-u.scrollTop);if(f>0){const y=window.innerHeight-to*2,x=parseFloat(h.style.minHeight),j=parseFloat(h.style.height),v=Math.max(x,j);if(v<y){const w=v+f,N=Math.min(y,w),k=w-N;h.style.height=N+"px",h.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});nT.displayName=Bw;var aT="SelectGroup",[fJ,mJ]=em(aT),pJ=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Fn();return s.jsx(fJ,{scope:r,id:a,children:s.jsx(Bt.div,{role:"group","aria-labelledby":a,...n,ref:t})})});pJ.displayName=aT;var iT="SelectLabel",oT=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=mJ(iT,r);return s.jsx(Bt.div,{id:a.id,...n,ref:t})});oT.displayName=iT;var Z0="SelectItem",[xJ,lT]=em(Z0),cT=g.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Id(Z0,r),c=Fd(Z0,r),d=l.value===n,[u,h]=g.useState(i??""),[p,f]=g.useState(!1),y=Fs(t,w=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,w,n,a)}),x=Fn(),j=g.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(xJ,{scope:r,value:n,disabled:a,textId:x,isSelected:d,onItemTextChange:g.useCallback(w=>{h(N=>N||((w==null?void 0:w.textContent)??"").trim())},[]),children:s.jsx(Rb.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(Bt.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:y,onFocus:bt(o.onFocus,()=>f(!0)),onBlur:bt(o.onBlur,()=>f(!1)),onClick:bt(o.onClick,()=>{j.current!=="mouse"&&v()}),onPointerUp:bt(o.onPointerUp,()=>{j.current==="mouse"&&v()}),onPointerDown:bt(o.onPointerDown,w=>{j.current=w.pointerType}),onPointerMove:bt(o.onPointerMove,w=>{var N;j.current=w.pointerType,a?(N=c.onItemLeave)==null||N.call(c):j.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:bt(o.onPointerLeave,w=>{var N;w.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:bt(o.onKeyDown,w=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&w.key===" "||(tJ.includes(w.key)&&v(),w.key===" "&&w.preventDefault())})})})})});cT.displayName=Z0;var ep="SelectItemText",dT=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Id(ep,r),l=Fd(ep,r),c=lT(ep,r),d=aJ(ep,r),[u,h]=g.useState(null),p=Fs(t,v=>h(v),c.onItemTextChange,v=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,v,c.value,c.disabled)}),f=u==null?void 0:u.textContent,y=g.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:x,onNativeOptionRemove:j}=d;return Jn(()=>(x(y),()=>j(y)),[x,j,y]),s.jsxs(s.Fragment,{children:[s.jsx(Bt.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Pd.createPortal(i.children,o.valueNode):null]})});dT.displayName=ep;var uT="SelectItemIndicator",hT=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return lT(uT,r).isSelected?s.jsx(Bt.span,{"aria-hidden":!0,...n,ref:t}):null});hT.displayName=uT;var zw="SelectScrollUpButton",fT=g.forwardRef((e,t)=>{const r=Fd(zw,e.__scopeSelect),n=SS(zw,e.__scopeSelect),[a,i]=g.useState(!1),o=Fs(t,n.onScrollButtonChange);return Jn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(pT,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});fT.displayName=zw;var Uw="SelectScrollDownButton",mT=g.forwardRef((e,t)=>{const r=Fd(Uw,e.__scopeSelect),n=SS(Uw,e.__scopeSelect),[a,i]=g.useState(!1),o=Fs(t,n.onScrollButtonChange);return Jn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(pT,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});mT.displayName=Uw;var pT=g.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Fd("SelectScrollButton",r),o=g.useRef(null),l=Ib(r),c=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),Jn(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Bt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:bt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:bt(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:bt(a.onPointerLeave,()=>{c()})})}),gJ="SelectSeparator",xT=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Bt.div,{"aria-hidden":!0,...n,ref:t})});xT.displayName=gJ;var qw="SelectArrow",vJ=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Fb(r),i=Id(qw,r),o=Fd(qw,r);return i.open&&o.position==="popper"?s.jsx(wb,{...a,...n,ref:t}):null});vJ.displayName=qw;var yJ="SelectBubbleInput",gT=g.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=g.useRef(null),i=Fs(n,a),o=NS(t);return g.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const h=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(Bt.select,{...r,style:{...L8,...r.style},ref:i,defaultValue:t})});gT.displayName=yJ;function vT(e){return e===""||e===void 0}function yT(e){const t=Xa(e),r=g.useRef(""),n=g.useRef(0),a=g.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=g.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function bT(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=bJ(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function bJ(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var jJ=GL,jT=YL,wJ=ZL,NJ=XL,SJ=QL,wT=eT,_J=nT,NT=oT,ST=cT,CJ=dT,kJ=hT,_T=fT,CT=mT,kT=xT;const es=jJ,ts=wJ,Zt=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(jT,{ref:n,className:nt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(NJ,{asChild:!0,children:s.jsx(ob,{className:"h-4 w-4 opacity-50"})})]}));Zt.displayName=jT.displayName;const AT=g.forwardRef(({className:e,...t},r)=>s.jsx(_T,{ref:r,className:nt("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(hE,{className:"h-4 w-4"})}));AT.displayName=_T.displayName;const PT=g.forwardRef(({className:e,...t},r)=>s.jsx(CT,{ref:r,className:nt("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(ob,{className:"h-4 w-4"})}));PT.displayName=CT.displayName;const Xt=g.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(SJ,{children:s.jsxs(wT,{ref:a,className:nt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(AT,{}),s.jsx(_J,{className:nt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(PT,{})]})}));Xt.displayName=wT.displayName;const AJ=g.forwardRef(({className:e,...t},r)=>s.jsx(NT,{ref:r,className:nt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));AJ.displayName=NT.displayName;const Ve=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(ST,{ref:n,className:nt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(kJ,{children:s.jsx(Or,{className:"h-4 w-4"})})}),s.jsx(CJ,{children:t})]}));Ve.displayName=ST.displayName;const PJ=g.forwardRef(({className:e,...t},r)=>s.jsx(kT,{ref:r,className:nt("-mx-1 my-1 h-px bg-muted",e),...t}));PJ.displayName=kT.displayName;var Db="Popover",[ET,dre]=Fa(Db,[Td]),Cx=Td(),[EJ,Dd]=ET(Db),LT=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=Cx(t),c=g.useRef(null),[d,u]=g.useState(!1),[h,p]=Co({prop:n,defaultProp:a??!1,onChange:i,caller:Db});return s.jsx(bb,{...l,children:s.jsx(EJ,{scope:t,contentId:Fn(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:g.useCallback(()=>p(f=>!f),[p]),hasCustomAnchor:d,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o,children:r})})};LT.displayName=Db;var TT="PopoverAnchor",LJ=g.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Dd(TT,r),i=Cx(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return g.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(wx,{...i,...n,ref:t})});LJ.displayName=TT;var RT="PopoverTrigger",IT=g.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Dd(RT,r),i=Cx(r),o=Fs(t,a.triggerRef),l=s.jsx(Bt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":$T(a.open),...n,ref:o,onClick:bt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(wx,{asChild:!0,...i,children:l})});IT.displayName=RT;var _S="PopoverPortal",[TJ,RJ]=ET(_S,{forceMount:void 0}),FT=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Dd(_S,t);return s.jsx(TJ,{scope:t,forceMount:r,children:s.jsx(Qa,{present:r||i.open,children:s.jsx(Yf,{asChild:!0,container:a,children:n})})})};FT.displayName=_S;var Rf="PopoverContent",DT=g.forwardRef((e,t)=>{const r=RJ(Rf,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Dd(Rf,e.__scopePopover);return s.jsx(Qa,{present:n||i.open,children:i.modal?s.jsx(FJ,{...a,ref:t}):s.jsx(DJ,{...a,ref:t})})});DT.displayName=Rf;var IJ=gd("PopoverContent.RemoveScroll"),FJ=g.forwardRef((e,t)=>{const r=Dd(Rf,e.__scopePopover),n=g.useRef(null),a=Fs(t,n),i=g.useRef(!1);return g.useEffect(()=>{const o=n.current;if(o)return ub(o)},[]),s.jsx(bx,{as:IJ,allowPinchZoom:!0,children:s.jsx(OT,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bt(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:bt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:bt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),DJ=g.forwardRef((e,t)=>{const r=Dd(Rf,e.__scopePopover),n=g.useRef(!1),a=g.useRef(!1);return s.jsx(OT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),OT=g.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,p=Dd(Rf,r),f=Cx(r);return cb(),s.jsx(yx,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:s.jsx(jb,{"data-state":$T(p.open),role:"dialog",id:p.contentId,...f,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),MT="PopoverClose",OJ=g.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Dd(MT,r);return s.jsx(Bt.button,{type:"button",...n,ref:t,onClick:bt(e.onClick,()=>a.onOpenChange(!1))})});OJ.displayName=MT;var MJ="PopoverArrow",$J=g.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Cx(r);return s.jsx(wb,{...a,...n,ref:t})});$J.displayName=MJ;function $T(e){return e?"open":"closed"}var BJ=LT,zJ=IT,UJ=FT,BT=DT;const Ko=BJ,Yo=zJ,fo=g.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(UJ,{children:s.jsx(BT,{ref:a,align:t,sideOffset:r,className:nt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));fo.displayName=BT.displayName;var n3=1,qJ=.9,VJ=.8,HJ=.17,Kj=.1,Yj=.999,WJ=.9999,GJ=.99,KJ=/[\\\/_+.#"@\[\(\{&]/,YJ=/[\\\/_+.#"@\[\(\{&]/g,JJ=/[\s-]/,zT=/[\s-]/g;function Vw(e,t,r,n,a,i,o){if(i===t.length)return a===e.length?n3:GJ;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(i),d=r.indexOf(c,a),u=0,h,p,f,y;d>=0;)h=Vw(e,t,r,n,d+1,i+1,o),h>u&&(d===a?h*=n3:KJ.test(e.charAt(d-1))?(h*=VJ,f=e.slice(a,d-1).match(YJ),f&&a>0&&(h*=Math.pow(Yj,f.length))):JJ.test(e.charAt(d-1))?(h*=qJ,y=e.slice(a,d-1).match(zT),y&&a>0&&(h*=Math.pow(Yj,y.length))):(h*=HJ,a>0&&(h*=Math.pow(Yj,d-a))),e.charAt(d)!==t.charAt(i)&&(h*=WJ)),(h<Kj&&r.charAt(d-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&r.charAt(d-1)!==n.charAt(i))&&(p=Vw(e,t,r,n,d+1,i+2,o),p*Kj>h&&(h=p*Kj)),h>u&&(u=h),d=r.indexOf(c,d+1);return o[l]=u,u}function a3(e){return e.toLowerCase().replace(zT," ")}function ZJ(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Vw(e,t,a3(e),a3(t),0,0,{})}var Um='[cmdk-group=""]',Jj='[cmdk-group-items=""]',XJ='[cmdk-group-heading=""]',UT='[cmdk-item=""]',i3=`${UT}:not([aria-disabled="true"])`,Hw="cmdk-item-select",jh="data-value",QJ=(e,t,r)=>ZJ(e,t,r),qT=g.createContext(void 0),kx=()=>g.useContext(qT),VT=g.createContext(void 0),CS=()=>g.useContext(VT),HT=g.createContext(void 0),WT=g.forwardRef((e,t)=>{let r=wh(()=>{var A,z;return{search:"",value:(z=(A=e.value)!=null?A:e.defaultValue)!=null?z:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=wh(()=>new Set),a=wh(()=>new Map),i=wh(()=>new Map),o=wh(()=>new Set),l=GT(e),{label:c,children:d,value:u,onValueChange:h,filter:p,shouldFilter:f,loop:y,disablePointerSelection:x=!1,vimBindings:j=!0,...v}=e,w=Fn(),N=Fn(),k=Fn(),P=g.useRef(null),E=dZ();Tu(()=>{if(u!==void 0){let A=u.trim();r.current.value=A,I.emit()}},[u]),Tu(()=>{E(6,$)},[]);let I=g.useMemo(()=>({subscribe:A=>(o.current.add(A),()=>o.current.delete(A)),snapshot:()=>r.current,setState:(A,z,M)=>{var re,te,O,ce;if(!Object.is(r.current[A],z)){if(r.current[A]=z,A==="search")C(),X(),E(1,D);else if(A==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let le=document.getElementById(k);le?le.focus():(re=document.getElementById(w))==null||re.focus()}if(E(7,()=>{var le;r.current.selectedItemId=(le=B())==null?void 0:le.id,I.emit()}),M||E(5,$),((te=l.current)==null?void 0:te.value)!==void 0){let le=z??"";(ce=(O=l.current).onValueChange)==null||ce.call(O,le);return}}I.emit()}},emit:()=>{o.current.forEach(A=>A())}}),[]),T=g.useMemo(()=>({value:(A,z,M)=>{var re;z!==((re=i.current.get(A))==null?void 0:re.value)&&(i.current.set(A,{value:z,keywords:M}),r.current.filtered.items.set(A,R(z,M)),E(2,()=>{X(),I.emit()}))},item:(A,z)=>(n.current.add(A),z&&(a.current.has(z)?a.current.get(z).add(A):a.current.set(z,new Set([A]))),E(3,()=>{C(),X(),r.current.value||D(),I.emit()}),()=>{i.current.delete(A),n.current.delete(A),r.current.filtered.items.delete(A);let M=B();E(4,()=>{C(),(M==null?void 0:M.getAttribute("id"))===A&&D(),I.emit()})}),group:A=>(a.current.has(A)||a.current.set(A,new Set),()=>{i.current.delete(A),a.current.delete(A)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:w,inputId:k,labelId:N,listInnerRef:P}),[]);function R(A,z){var M,re;let te=(re=(M=l.current)==null?void 0:M.filter)!=null?re:QJ;return A?te(A,r.current.search,z):0}function X(){if(!r.current.search||l.current.shouldFilter===!1)return;let A=r.current.filtered.items,z=[];r.current.filtered.groups.forEach(re=>{let te=a.current.get(re),O=0;te.forEach(ce=>{let le=A.get(ce);O=Math.max(le,O)}),z.push([re,O])});let M=P.current;Q().sort((re,te)=>{var O,ce;let le=re.getAttribute("id"),Ee=te.getAttribute("id");return((O=A.get(Ee))!=null?O:0)-((ce=A.get(le))!=null?ce:0)}).forEach(re=>{let te=re.closest(Jj);te?te.appendChild(re.parentElement===te?re:re.closest(`${Jj} > *`)):M.appendChild(re.parentElement===M?re:re.closest(`${Jj} > *`))}),z.sort((re,te)=>te[1]-re[1]).forEach(re=>{var te;let O=(te=P.current)==null?void 0:te.querySelector(`${Um}[${jh}="${encodeURIComponent(re[0])}"]`);O==null||O.parentElement.appendChild(O)})}function D(){let A=Q().find(M=>M.getAttribute("aria-disabled")!=="true"),z=A==null?void 0:A.getAttribute(jh);I.setState("value",z||void 0)}function C(){var A,z,M,re;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let te=0;for(let O of n.current){let ce=(z=(A=i.current.get(O))==null?void 0:A.value)!=null?z:"",le=(re=(M=i.current.get(O))==null?void 0:M.keywords)!=null?re:[],Ee=R(ce,le);r.current.filtered.items.set(O,Ee),Ee>0&&te++}for(let[O,ce]of a.current)for(let le of ce)if(r.current.filtered.items.get(le)>0){r.current.filtered.groups.add(O);break}r.current.filtered.count=te}function $(){var A,z,M;let re=B();re&&(((A=re.parentElement)==null?void 0:A.firstChild)===re&&((M=(z=re.closest(Um))==null?void 0:z.querySelector(XJ))==null||M.scrollIntoView({block:"nearest"})),re.scrollIntoView({block:"nearest"}))}function B(){var A;return(A=P.current)==null?void 0:A.querySelector(`${UT}[aria-selected="true"]`)}function Q(){var A;return Array.from(((A=P.current)==null?void 0:A.querySelectorAll(i3))||[])}function oe(A){let z=Q()[A];z&&I.setState("value",z.getAttribute(jh))}function ae(A){var z;let M=B(),re=Q(),te=re.findIndex(ce=>ce===M),O=re[te+A];(z=l.current)!=null&&z.loop&&(O=te+A<0?re[re.length-1]:te+A===re.length?re[0]:re[te+A]),O&&I.setState("value",O.getAttribute(jh))}function U(A){let z=B(),M=z==null?void 0:z.closest(Um),re;for(;M&&!re;)M=A>0?lZ(M,Um):cZ(M,Um),re=M==null?void 0:M.querySelector(i3);re?I.setState("value",re.getAttribute(jh)):ae(A)}let Z=()=>oe(Q().length-1),W=A=>{A.preventDefault(),A.metaKey?Z():A.altKey?U(1):ae(1)},ve=A=>{A.preventDefault(),A.metaKey?oe(0):A.altKey?U(-1):ae(-1)};return g.createElement(Bt.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:A=>{var z;(z=v.onKeyDown)==null||z.call(v,A);let M=A.nativeEvent.isComposing||A.keyCode===229;if(!(A.defaultPrevented||M))switch(A.key){case"n":case"j":{j&&A.ctrlKey&&W(A);break}case"ArrowDown":{W(A);break}case"p":case"k":{j&&A.ctrlKey&&ve(A);break}case"ArrowUp":{ve(A);break}case"Home":{A.preventDefault(),oe(0);break}case"End":{A.preventDefault(),Z();break}case"Enter":{A.preventDefault();let re=B();if(re){let te=new Event(Hw);re.dispatchEvent(te)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:T.inputId,id:T.labelId,style:hZ},c),Ob(e,A=>g.createElement(VT.Provider,{value:I},g.createElement(qT.Provider,{value:T},A))))}),eZ=g.forwardRef((e,t)=>{var r,n;let a=Fn(),i=g.useRef(null),o=g.useContext(HT),l=kx(),c=GT(e),d=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;Tu(()=>{if(!d)return l.item(a,o==null?void 0:o.id)},[d]);let u=KT(a,i,[e.value,e.children,i],e.keywords),h=CS(),p=jd(E=>E.value&&E.value===u.current),f=jd(E=>d||l.filter()===!1?!0:E.search?E.filtered.items.get(a)>0:!0);g.useEffect(()=>{let E=i.current;if(!(!E||e.disabled))return E.addEventListener(Hw,y),()=>E.removeEventListener(Hw,y)},[f,e.onSelect,e.disabled]);function y(){var E,I;x(),(I=(E=c.current).onSelect)==null||I.call(E,u.current)}function x(){h.setState("value",u.current,!0)}if(!f)return null;let{disabled:j,value:v,onSelect:w,forceMount:N,keywords:k,...P}=e;return g.createElement(Bt.div,{ref:tc(i,t),...P,id:a,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!p,"data-disabled":!!j,"data-selected":!!p,onPointerMove:j||l.getDisablePointerSelection()?void 0:x,onClick:j?void 0:y},e.children)}),tZ=g.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...i}=e,o=Fn(),l=g.useRef(null),c=g.useRef(null),d=Fn(),u=kx(),h=jd(f=>a||u.filter()===!1?!0:f.search?f.filtered.groups.has(o):!0);Tu(()=>u.group(o),[]),KT(o,l,[e.value,e.heading,c]);let p=g.useMemo(()=>({id:o,forceMount:a}),[a]);return g.createElement(Bt.div,{ref:tc(l,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},r&&g.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),Ob(e,f=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},g.createElement(HT.Provider,{value:p},f))))}),sZ=g.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=g.useRef(null),i=jd(o=>!o.search);return!r&&!i?null:g.createElement(Bt.div,{ref:tc(a,t),...n,"cmdk-separator":"",role:"separator"})}),rZ=g.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,i=CS(),o=jd(d=>d.search),l=jd(d=>d.selectedItemId),c=kx();return g.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),g.createElement(Bt.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:d=>{a||i.setState("search",d.target.value),r==null||r(d.target.value)}})}),nZ=g.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,i=g.useRef(null),o=g.useRef(null),l=jd(d=>d.selectedItemId),c=kx();return g.useEffect(()=>{if(o.current&&i.current){let d=o.current,u=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let f=d.offsetHeight;u.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return p.observe(d),()=>{cancelAnimationFrame(h),p.unobserve(d)}}},[]),g.createElement(Bt.div,{ref:tc(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},Ob(e,d=>g.createElement("div",{ref:tc(o,c.listInnerRef),"cmdk-list-sizer":""},d)))}),aZ=g.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:i,container:o,...l}=e;return g.createElement(Q5,{open:r,onOpenChange:n},g.createElement(eS,{container:o},g.createElement(fb,{"cmdk-overlay":"",className:a}),g.createElement(mb,{"aria-label":e.label,"cmdk-dialog":"",className:i},g.createElement(WT,{ref:t,...l}))))}),iZ=g.forwardRef((e,t)=>jd(r=>r.filtered.count===0)?g.createElement(Bt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),oZ=g.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...i}=e;return g.createElement(Bt.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Ob(e,o=>g.createElement("div",{"aria-hidden":!0},o)))}),ri=Object.assign(WT,{List:nZ,Item:eZ,Input:rZ,Group:tZ,Separator:sZ,Dialog:aZ,Empty:iZ,Loading:oZ});function lZ(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function cZ(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function GT(e){let t=g.useRef(e);return Tu(()=>{t.current=e}),t}var Tu=typeof window>"u"?g.useEffect:g.useLayoutEffect;function wh(e){let t=g.useRef();return t.current===void 0&&(t.current=e()),t}function jd(e){let t=CS(),r=()=>e(t.snapshot());return g.useSyncExternalStore(t.subscribe,r,r)}function KT(e,t,r,n=[]){let a=g.useRef(),i=kx();return Tu(()=>{var o;let l=(()=>{var d;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=n.map(d=>d.trim());i.value(e,l,c),(o=t.current)==null||o.setAttribute(jh,l),a.current=l}),a}var dZ=()=>{let[e,t]=g.useState(),r=wh(()=>new Map);return Tu(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}};function uZ(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Ob({asChild:e,children:t},r){return e&&g.isValidElement(t)?g.cloneElement(uZ(t),{ref:t.ref},r(t.props.children)):r(t)}var hZ={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const mo=g.forwardRef(({className:e,...t},r)=>s.jsx(ri,{ref:r,className:nt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));mo.displayName=ri.displayName;const po=g.forwardRef(({className:e,...t},r)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(mn,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(ri.Input,{ref:r,className:nt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));po.displayName=ri.Input.displayName;const xo=g.forwardRef(({className:e,...t},r)=>s.jsx(ri.List,{ref:r,className:nt("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));xo.displayName=ri.List.displayName;const go=g.forwardRef((e,t)=>s.jsx(ri.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));go.displayName=ri.Empty.displayName;const vo=g.forwardRef(({className:e,...t},r)=>s.jsx(ri.Group,{ref:r,className:nt("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));vo.displayName=ri.Group.displayName;const fZ=g.forwardRef(({className:e,...t},r)=>s.jsx(ri.Separator,{ref:r,className:nt("-mx-1 h-px bg-border",e),...t}));fZ.displayName=ri.Separator.displayName;const hi=g.forwardRef(({className:e,...t},r)=>s.jsx(ri.Item,{ref:r,className:nt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));hi.displayName=ri.Item.displayName;function o3({isOpen:e,onClose:t,trip:r,mode:n}){var ut,Le,K,He,xe,ge,se;const a=rr(),{toast:i}=mr(),{loading:o}=jt(F=>F.trips),{routes:l}=jt(F=>F.routes),{drivers:c}=jt(F=>F.drivers),{vehicles:d}=jt(F=>F.vehicles),{grades:u}=jt(F=>F.grades),{students:h}=jt(F=>F.students),{schools:p}=jt(F=>F.schools),{user:f}=jt(F=>F.auth),{assignments:y}=jt(F=>F.routeAssignments),[x,j]=g.useState({route:"",driver:"",vehicle:"",trip_type:"morning",status:"scheduled",scheduled_start_time:"",scheduled_end_time:"",grade:"",students:[]}),[v,w]=g.useState({}),[N,k]=g.useState(!1),[P,E]=g.useState(""),[I,T]=g.useState(null),[R,X]=g.useState(!1),[D,C]=g.useState(!1),[$,B]=g.useState(!1),[Q,oe]=g.useState(!1),ae=(ut=p.find(F=>F.admin===(f==null?void 0:f.id)))==null?void 0:ut.id,U=l.filter(F=>F.school===ae),Z=c.filter(F=>F.school===ae),W=d.filter(F=>F.school===ae),ve=u.filter(F=>F.school===ae),A=h.filter(F=>F.school===ae),M=(F=>{if(!F)return W;const ne=parseInt(F);return W.filter(ye=>ye.driver===ne)})(x.driver),re=A.filter(F=>{var ne,ye,je;if(x.grade){const Y=parseInt(x.grade);if(F.grade!==Y)return!1}if(P){const Y=P.toLowerCase();return((ne=F.first_name)==null?void 0:ne.toLowerCase().includes(Y))||((ye=F.last_name)==null?void 0:ye.toLowerCase().includes(Y))||((je=F.admission_number)==null?void 0:je.toLowerCase().includes(Y))||`${F.first_name} ${F.last_name}`.toLowerCase().includes(Y)}return!0}),te=U.find(F=>F.id.toString()===x.route),O=(F,ne)=>{const ye={...v};if(Array.isArray(ne))return!0;switch(F){case"route":ne?delete ye.route:ye.route="Route is required";break;case"driver":ne?delete ye.driver:ye.driver="Driver is required";break;case"vehicle":ne?delete ye.vehicle:ye.vehicle="Vehicle is required";break;case"scheduled_start_time":ne?new Date(ne)<new Date?ye.scheduled_start_time="Start time cannot be in the past":delete ye.scheduled_start_time:ye.scheduled_start_time="Start time is required";break;case"scheduled_end_time":if(!ne)ye.scheduled_end_time="End time is required";else{const je=new Date(x.scheduled_start_time);new Date(ne)<=je?ye.scheduled_end_time="End time must be after start time":delete ye.scheduled_end_time}break;case"grade":ne?delete ye.grade:ye.grade="Grade is required";break}return w(ye),Object.keys(ye).length===0},ce=()=>{const F=["route","driver","vehicle","grade","scheduled_start_time","scheduled_end_time"];let ne=!0;const ye={...v};return F.forEach(je=>{const Y=x[je];if(!Array.isArray(Y))switch(je){case"route":Y?delete ye.route:(ye.route="Route is required",ne=!1);break;case"driver":Y?delete ye.driver:(ye.driver="Driver is required",ne=!1);break;case"vehicle":Y?delete ye.vehicle:(ye.vehicle="Vehicle is required",ne=!1);break;case"scheduled_start_time":Y?new Date(Y)<new Date?(ye.scheduled_start_time="Start time cannot be in the past",ne=!1):delete ye.scheduled_start_time:(ye.scheduled_start_time="Start time is required",ne=!1);break;case"scheduled_end_time":if(!Y)ye.scheduled_end_time="End time is required",ne=!1;else{const Re=new Date(x.scheduled_start_time);new Date(Y)<=Re?(ye.scheduled_end_time="End time must be after start time",ne=!1):delete ye.scheduled_end_time}break;case"grade":Y?delete ye.grade:(ye.grade="Grade is required",ne=!1);break}}),w(ye),ne};g.useMemo(()=>["route","driver","vehicle","grade","scheduled_start_time","scheduled_end_time"].every(ye=>{const je=x[ye];return Array.isArray(je)?!0:je&&je.toString().trim()!==""}),[x]);const le=()=>{const F=[];return Z.find(je=>{var Y;return((Y=je.user_details)==null?void 0:Y.id.toString())===x.driver&&!1})&&F.push("Driver is already assigned to another trip at this time"),W.find(je=>je.id.toString()===x.vehicle&&!1)&&F.push("Vehicle is already in use for another trip at this time"),F},Ee=F=>{if(!F)return"";try{const ne=new Date(F),ye=ne.getFullYear(),je=String(ne.getMonth()+1).padStart(2,"0"),Y=String(ne.getDate()).padStart(2,"0"),Re=String(ne.getHours()).padStart(2,"0"),Qe=String(ne.getMinutes()).padStart(2,"0");return`${ye}-${je}-${Y}T${Re}:${Qe}`}catch(ne){return console.error("Error formatting datetime:",ne),""}};g.useEffect(()=>{var F;if(r&&n==="edit"){const ne=r.trip_type==="evening"?"afternoon":r.trip_type;j({route:r.route.toString(),driver:r.driver.toString(),vehicle:r.vehicle.toString(),trip_type:ne,status:r.status,scheduled_start_time:Ee(r.scheduled_start_time),scheduled_end_time:Ee(r.scheduled_end_time),grade:((F=r.grade)==null?void 0:F.toString())||"",students:r.students||[]})}else j({route:"",driver:"",vehicle:"",trip_type:"morning",status:"scheduled",scheduled_start_time:"",scheduled_end_time:"",grade:"",students:[]});w({}),T(null)},[r,n,e]),g.useEffect(()=>{e&&ae&&(a(Ii({schoolId:ae})),a(fa({schoolId:ae})),a(Kh({schoolId:ae})))},[e,ae,a]);const _e=async()=>{if(T(null),!ae){T("No school found for current user");return}if(!ce()){const je=Object.keys(v);je.length>0?T(`Please fix the following fields: ${je.join(", ")}`):T("Please fill in all required fields");return}const ne=le();if(ne.length>0){T(ne.join(", "));return}const ye={route:parseInt(x.route),driver:parseInt(x.driver),vehicle:parseInt(x.vehicle),trip_type:x.trip_type,status:x.status,scheduled_start_time:x.scheduled_start_time,scheduled_end_time:x.scheduled_end_time,grade:parseInt(x.grade),students:x.students.length>0?x.students:void 0};try{n==="create"?(await a(Ov(ye)).unwrap(),i({title:"Success",description:"Trip created successfully"}),t()):r!=null&&r.id&&(await a(Mv({id:r.id,tripData:ye})).unwrap(),i({title:"Success",description:"Trip updated successfully"}),t())}catch(je){let Y="Failed to save trip";if(je&&typeof je=="object"){const Re=je;if(Re.errors&&Re.errors.non_field_errors){const Qe=Re.errors.non_field_errors;Qe.some(me=>me.includes("is assigned to stops")||me.includes("but none are on route"))?Y=` Student-Route Mismatch

${Qe.join(" ")}

Please:
 Remove the student(s) from this trip, OR
 Assign the student(s) to stops on this route first, OR
 Select a different route`:Qe.some(me=>me.includes("not associated with any stops"))?Y=`Some selected students are not assigned to any stops on the selected route.

Please:
 Assign students to route stops first
 Remove students who are not on this route
 Select a different route`:Y=Qe.join(`
`)}else Re.errors?Y=Object.entries(Re.errors).map(([me,be])=>`${me.replace(/_/g," ").replace(/\b\w/g,ke=>ke.toUpperCase())}: ${Array.isArray(be)?be.join(", "):be}`).join("; "):Re.message?Y=Re.message:Re.detail&&(Y=Re.detail)}else typeof je=="string"?Y=je:je instanceof Error&&(Y=je.message);T(Y)}},Be=F=>{const{name:ne,value:ye}="target"in F?F.target:F;ne==="route"&&ye!==x.route?(j(je=>({...je,[ne]:ye,students:[]})),w(je=>{const Y={...je};return delete Y.students,Y})):j(ne==="driver"?je=>({...je,[ne]:ye,vehicle:""}):je=>({...je,[ne]:ye})),O(ne,ye)},Ge=F=>{!F&&(I||N)||t()};return s.jsx(js,{open:e,onOpenChange:Ge,children:s.jsxs(xs,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(vE,{className:"h-5 w-5 text-blue-600"}),n==="create"?"Create New Trip":"Edit Trip"]}),s.jsx(En,{children:n==="create"?"Set up a new trip with route, driver, and vehicle assignments":"Update trip details and assignments"})]}),s.jsx("div",{className:"relative space-y-4",children:s.jsxs("div",{className:`space-y-4 ${N?"pointer-events-none opacity-50":""}`,children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"route",className:"text-sm font-medium",children:"Route *"}),s.jsxs(Ko,{open:R,onOpenChange:X,children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox","aria-expanded":R,className:nt("w-full justify-between",v.route&&"border-red-500"),children:[x.route?(Le=U.find(F=>F.id.toString()===x.route))==null?void 0:Le.name:"Choose a route",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-[650px] p-0",align:"start",side:"bottom",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search routes..."}),s.jsxs(xo,{children:[s.jsx(go,{children:"No route found."}),s.jsx(vo,{children:U.map(F=>s.jsxs(hi,{value:F.name,onSelect:()=>{Be({name:"route",value:F.id.toString()}),X(!1)},children:[s.jsx(Or,{className:nt("mr-2 h-4 w-4",x.route===F.id.toString()?"opacity-100":"opacity-0")}),F.name]},F.id))})]})]})})]}),v.route&&s.jsx("p",{className:"text-sm text-red-600",children:v.route})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"driver",className:"text-sm font-medium",children:"Driver *"}),s.jsxs(Ko,{open:D,onOpenChange:C,children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox","aria-expanded":D,className:nt("w-full justify-between",v.driver&&"border-red-500"),children:[x.driver?(()=>{var ne,ye;const F=Z.find(je=>{var Y;return((Y=je.user_details)==null?void 0:Y.id.toString())===x.driver});return F?`${(ne=F.user_details)==null?void 0:ne.first_name} ${(ye=F.user_details)==null?void 0:ye.last_name}`:"Choose a driver"})():"Choose a driver",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-[650px] p-0",align:"start",side:"bottom",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search drivers..."}),s.jsxs(xo,{children:[s.jsx(go,{children:"No driver found."}),s.jsx(vo,{children:Z.map(F=>{var je,Y,Re;const ne=W.filter(Qe=>{var me;return Qe.driver===((me=F.user_details)==null?void 0:me.id)}).length,ye=`${(je=F.user_details)==null?void 0:je.first_name} ${(Y=F.user_details)==null?void 0:Y.last_name}`;return s.jsxs(hi,{value:ye,onSelect:()=>{var Qe;Be({name:"driver",value:(Qe=F.user_details)==null?void 0:Qe.id.toString()}),C(!1)},children:[s.jsx(Or,{className:nt("mr-2 h-4 w-4",x.driver===((Re=F.user_details)==null?void 0:Re.id.toString())?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx("span",{children:ye}),s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",ne," vehicles)"]})]})]},F.id)})})]})]})})]}),v.driver&&s.jsx("p",{className:"text-sm text-red-600",children:v.driver})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"vehicle",className:"text-sm font-medium",children:"Vehicle *"}),s.jsxs("div",{className:"space-y-1",children:[x.driver&&s.jsxs("p",{className:"text-xs text-blue-600",children:["Showing vehicles assigned to: ",(He=(K=Z.find(F=>{var ne;return((ne=F.user_details)==null?void 0:ne.id.toString())===x.driver}))==null?void 0:K.user_details)==null?void 0:He.first_name," ",(ge=(xe=Z.find(F=>{var ne;return((ne=F.user_details)==null?void 0:ne.id.toString())===x.driver}))==null?void 0:xe.user_details)==null?void 0:ge.last_name]}),!x.driver&&s.jsx("p",{className:"text-xs text-amber-600",children:"Please select a driver first to see available vehicles"})]}),s.jsxs(Ko,{open:$,onOpenChange:B,children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox","aria-expanded":$,disabled:!x.driver,className:nt("w-full justify-between",v.vehicle&&"border-red-500"),children:[x.vehicle?(()=>{const F=M.find(ne=>ne.id.toString()===x.vehicle);return F?F.registration_number:"Choose a vehicle"})():x.driver?"Choose a vehicle":"Select driver first",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-[650px] p-0",align:"start",side:"bottom",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search vehicles..."}),s.jsxs(xo,{children:[s.jsx(go,{children:M.length===0?"No vehicles assigned to this driver":"No vehicle found."}),s.jsx(vo,{children:M.map(F=>s.jsxs(hi,{value:`${F.registration_number} ${F.vehicle_type}`,onSelect:()=>{Be({name:"vehicle",value:F.id.toString()}),B(!1)},children:[s.jsx(Or,{className:nt("mr-2 h-4 w-4",x.vehicle===F.id.toString()?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx("span",{children:F.registration_number}),s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[F.vehicle_type,"  ",F.capacity," seats"]})]})]},F.id))})]})]})})]}),v.vehicle&&s.jsx("p",{className:"text-sm text-red-600",children:v.vehicle})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"trip_type",className:"text-sm font-medium",children:"Trip Type"}),s.jsxs(es,{value:x.trip_type,onValueChange:F=>Be({name:"trip_type",value:F}),children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select trip type"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"morning",children:"Morning"}),s.jsx(Ve,{value:"afternoon",children:"Afternoon"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"scheduled_start_time",className:"text-sm font-medium",children:"Start Time *"}),s.jsx($e,{id:"scheduled_start_time",name:"scheduled_start_time",type:"datetime-local",value:x.scheduled_start_time,onChange:Be,className:v.scheduled_start_time?"border-red-500":"",required:!0}),v.scheduled_start_time&&s.jsx("p",{className:"text-sm text-red-600",children:v.scheduled_start_time})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"scheduled_end_time",className:"text-sm font-medium",children:"End Time *"}),s.jsx($e,{id:"scheduled_end_time",name:"scheduled_end_time",type:"datetime-local",value:x.scheduled_end_time,onChange:Be,className:v.scheduled_end_time?"border-red-500":"",required:!0}),v.scheduled_end_time&&s.jsx("p",{className:"text-sm text-red-600",children:v.scheduled_end_time})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"grade",className:"text-sm font-medium",children:"Grade *"}),s.jsxs(es,{value:x.grade||void 0,onValueChange:F=>Be({name:"grade",value:F}),children:[s.jsx(Zt,{className:v.grade?"border-red-500":"",children:s.jsx(ts,{placeholder:"Select a grade"})}),s.jsx(Xt,{children:ve.map(F=>s.jsx(Ve,{value:F.id.toString(),children:s.jsx("span",{children:F.name})},F.id))})]}),v.grade&&s.jsx("p",{className:"text-sm text-red-600",children:v.grade})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(de,{className:"text-sm font-medium",children:["Students (",x.students.length," selected)"]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs text-gray-500",children:x.grade?`Showing students from ${((se=ve.find(F=>F.id.toString()===x.grade))==null?void 0:se.name)||"selected grade"}`:"Select a grade to filter students"}),x.route&&s.jsxs("p",{className:"text-xs text-blue-600",children:["Selected route: ",(te==null?void 0:te.name)||"Selected Route"]}),v.students&&s.jsxs(Gl,{variant:"destructive",className:"py-2",children:[s.jsx(un,{className:"h-4 w-4"}),s.jsx(Kl,{className:"text-sm",children:v.students})]})]}),s.jsxs(Ko,{open:Q,onOpenChange:oe,children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox","aria-expanded":Q,className:"w-full justify-between",children:[x.students.length>0?`${x.students.length} student${x.students.length>1?"s":""} selected`:"Select students...",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-[650px] p-0",align:"start",side:"bottom",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search students by name or admission number..."}),s.jsxs(xo,{className:"max-h-[60vh]",children:[s.jsx(go,{children:x.grade?"No students found matching your search":"Please select a grade first to see students"}),s.jsx(vo,{children:re.map(F=>{const ne=x.route?y.find(je=>je.student===F.id&&je.route===parseInt(x.route)&&je.is_active):null,ye=x.students.includes(F.id);return s.jsxs(hi,{value:`${F.first_name} ${F.last_name} ${F.admission_number}`,onSelect:()=>{const je=F.id;j(Y=>({...Y,students:Y.students.includes(je)?Y.students.filter(Re=>Re!==je):[...Y.students,je]}))},children:[s.jsx(Or,{className:nt("mr-2 h-4 w-4",ye?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:[F.first_name," ",F.last_name]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",F.admission_number,")"]}),s.jsx(De,{variant:"outline",className:"text-xs",children:ne?"Assigned":"Available"})]}),ne&&s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Pickup: Stop ",ne.pickup_stop," | Dropoff: Stop ",ne.dropoff_stop]})]})]},F.id)})})]})]})})]})]}),I&&s.jsxs(Gl,{variant:"destructive",className:"mt-4",children:[s.jsx(un,{className:"h-4 w-4"}),s.jsx(Kl,{className:"whitespace-pre-line",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{children:I}),s.jsx("div",{className:"text-xs opacity-80 italic",children:"Please fix the error above or click Cancel to close this dialog."})]})})]}),s.jsxs(lo,{className:"flex gap-2 pt-4",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:()=>{T(null),t()},disabled:N,children:"Cancel"}),s.jsx(ue,{type:"button",disabled:N,onClick:async()=>{if(!N){k(!0);try{await _e()}catch{}finally{k(!1)}}},className:`${N?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:N?s.jsxs(s.Fragment,{children:[s.jsx(In,{className:"mr-2 h-4 w-4 animate-spin"}),n==="create"?"Creating...":"Updating..."]}):s.jsx(s.Fragment,{children:n==="create"?s.jsxs(s.Fragment,{children:[s.jsx(va,{className:"mr-2 h-4 w-4"}),"Create Trip"]}):s.jsxs(s.Fragment,{children:[s.jsx(Lq,{className:"mr-2 h-4 w-4"}),"Update Trip"]})})})]})]})})]})})}var YT="AlertDialog",[mZ,ure]=Fa(YT,[HE]),cc=HE(),JT=e=>{const{__scopeAlertDialog:t,...r}=e,n=cc(t);return s.jsx(Q5,{...n,...r,modal:!0})};JT.displayName=YT;var pZ="AlertDialogTrigger",xZ=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=cc(r);return s.jsx(o8,{...a,...n,ref:t})});xZ.displayName=pZ;var gZ="AlertDialogPortal",ZT=e=>{const{__scopeAlertDialog:t,...r}=e,n=cc(t);return s.jsx(eS,{...n,...r})};ZT.displayName=gZ;var vZ="AlertDialogOverlay",XT=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=cc(r);return s.jsx(fb,{...a,...n,ref:t})});XT.displayName=vZ;var nf="AlertDialogContent",[yZ,bZ]=mZ(nf),jZ=wE("AlertDialogContent"),QT=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=cc(r),o=g.useRef(null),l=Fs(t,o),c=g.useRef(null);return s.jsx(ZH,{contentName:nf,titleName:eR,docsSlug:"alert-dialog",children:s.jsx(yZ,{scope:r,cancelRef:c,children:s.jsxs(mb,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:bt(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(jZ,{children:n}),s.jsx(NZ,{contentRef:o})]})})})});QT.displayName=nf;var eR="AlertDialogTitle",tR=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=cc(r);return s.jsx(tS,{...a,...n,ref:t})});tR.displayName=eR;var sR="AlertDialogDescription",rR=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=cc(r);return s.jsx(sS,{...a,...n,ref:t})});rR.displayName=sR;var wZ="AlertDialogAction",nR=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=cc(r);return s.jsx(rS,{...a,...n,ref:t})});nR.displayName=wZ;var aR="AlertDialogCancel",iR=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=bZ(aR,r),i=cc(r),o=Fs(t,a);return s.jsx(rS,{...i,...n,ref:o})});iR.displayName=aR;var NZ=({contentRef:e})=>{const t=`\`${nf}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${nf}\` by passing a \`${sR}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${nf}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},SZ=JT,_Z=ZT,oR=XT,lR=QT,cR=nR,dR=iR,uR=tR,hR=rR;const nc=SZ,CZ=_Z,fR=g.forwardRef(({className:e,...t},r)=>s.jsx(oR,{className:nt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));fR.displayName=oR.displayName;const ll=g.forwardRef(({className:e,...t},r)=>s.jsxs(CZ,{children:[s.jsx(fR,{}),s.jsx(lR,{ref:r,className:nt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));ll.displayName=lR.displayName;const cl=({className:e,...t})=>s.jsx("div",{className:nt("flex flex-col space-y-2 text-center sm:text-left",e),...t});cl.displayName="AlertDialogHeader";const dl=({className:e,...t})=>s.jsx("div",{className:nt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});dl.displayName="AlertDialogFooter";const ul=g.forwardRef(({className:e,...t},r)=>s.jsx(uR,{ref:r,className:nt("text-lg font-semibold",e),...t}));ul.displayName=uR.displayName;const hl=g.forwardRef(({className:e,...t},r)=>s.jsx(hR,{ref:r,className:nt("text-sm text-muted-foreground",e),...t}));hl.displayName=hR.displayName;const fl=g.forwardRef(({className:e,...t},r)=>s.jsx(cR,{ref:r,className:nt(G5(),e),...t}));fl.displayName=cR.displayName;const ml=g.forwardRef(({className:e,...t},r)=>s.jsx(dR,{ref:r,className:nt(G5({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ml.displayName=dR.displayName;const zu=({data:e,className:t="",variant:r="outline",size:n="default"})=>{const[a,i]=g.useState(!1),o=()=>{try{const d=[e.headers.join(","),...e.data.map((f,y)=>{const x=e.headers.map(j=>{const v=f[j.toLowerCase().replace(/\s+/g,"_")]||f[j]||"";return`"${String(v).replace(/"/g,'""')}"`}).join(",");return y<3,x})].join(`
`),u=new Blob([d],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a"),p=URL.createObjectURL(u);h.setAttribute("href",p),h.setAttribute("download",`${e.fileName}_${new Date().toISOString().split("T")[0]}.csv`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),Hs({title:"Export Successful",description:"Data exported to Excel (CSV) successfully"})}catch{Hs({title:"Export Failed",description:"Failed to export data",variant:"destructive"})}},l=()=>{try{const d=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>${e.title||"Report"}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; font-weight: bold; }
            h1 { color: #333; }
            .header { margin-bottom: 20px; }
            .date { color: #666; font-size: 14px; }
            .summary { margin: 20px 0; padding: 10px; background-color: #f9f9f9; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${e.title||"Report"}</h1>
            <div class="date">Generated on: ${new Date().toLocaleDateString()}</div>
          </div>
          
          <div class="summary">
            <h3>Summary</h3>
            <p>Total Records: ${e.data.length}</p>
            <p>Generated: ${new Date().toLocaleString()}</p>
          </div>
          
          <table>
            <thead>
              <tr>
                ${e.headers.map(f=>`<th>${f}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${e.data.map((f,y)=>(y<3,`
                <tr>
                  ${e.headers.map(x=>{const j=f[x.toLowerCase().replace(/\s+/g,"_")]||f[x]||"";return`<td>${String(j)}</td>`}).join("")}
                </tr>
              `)).join("")}
            </tbody>
          </table>
        </body>
        </html>
      `,u=new Blob([d],{type:"text/html;charset=utf-8;"}),h=document.createElement("a"),p=URL.createObjectURL(u);h.setAttribute("href",p),h.setAttribute("download",`${e.fileName}_${new Date().toISOString().split("T")[0]}.html`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),Hs({title:"Export Successful",description:"Report exported to HTML (can be opened in browser and saved as PDF)"})}catch{Hs({title:"Export Failed",description:"Failed to export report",variant:"destructive"})}},c=()=>{try{const d=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>${e.title||"Report"}</title>
          <style>
            body { font-family: 'Times New Roman', serif; margin: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 8px; text-align: left; }
            th { background-color: #f0f0f0; font-weight: bold; }
            h1 { color: #000; text-align: center; }
            .header { margin-bottom: 20px; text-align: center; }
            .date { color: #666; font-size: 14px; text-align: center; }
            .summary { margin: 20px 0; padding: 10px; background-color: #f9f9f9; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${e.title||"Report"}</h1>
            <div class="date">Generated on: ${new Date().toLocaleDateString()}</div>
          </div>
          
          <div class="summary">
            <h3>Summary</h3>
            <p>Total Records: ${e.data.length}</p>
            <p>Generated: ${new Date().toLocaleString()}</p>
          </div>

          <table>
            <thead>
              <tr>
                ${e.headers.map(f=>`<th>${f}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${e.data.map((f,y)=>(y<3,`
                <tr>
                  ${e.headers.map(x=>{const j=f[x.toLowerCase().replace(/\s+/g,"_")]||f[x]||"";return`<td>${String(j)}</td>`}).join("")}
                </tr>
              `)).join("")}
            </tbody>
          </table>
        </body>
        </html>
      `,u=new Blob([d],{type:"application/msword;charset=utf-8;"}),h=document.createElement("a"),p=URL.createObjectURL(u);h.setAttribute("href",p),h.setAttribute("download",`${e.fileName}_${new Date().toISOString().split("T")[0]}.doc`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),Hs({title:"Export Successful",description:"Report exported to Word document successfully"})}catch{Hs({title:"Export Failed",description:"Failed to export report",variant:"destructive"})}};return s.jsxs(Zn,{open:a,onOpenChange:i,children:[s.jsx(Xn,{asChild:!0,children:s.jsxs(ue,{variant:r,size:n,className:t,children:[s.jsx(pn,{className:"mr-2 h-4 w-4"}),"Export",s.jsx(ob,{className:"ml-2 h-4 w-4"})]})}),s.jsxs(Dn,{align:"end",className:"w-48",children:[s.jsxs(Ut,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{o(),i(!1)},children:[s.jsx(mE,{className:"h-4 w-4"}),"Export to Excel"]}),s.jsxs(Ut,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{l(),i(!1)},children:[s.jsx(Rn,{className:"h-4 w-4"}),"Export to PDF"]}),s.jsxs(Ut,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{c(),i(!1)},children:[s.jsx(_w,{className:"h-4 w-4"}),"Export to Word"]})]})]})};function kZ(){var Le;const e=rr(),{toast:t}=mr(),{trips:r,loading:n,error:a}=jt(K=>K.trips),{user:i}=jt(K=>K.auth),{schools:o}=jt(K=>K.schools),{students:l}=jt(K=>K.students),{parents:c}=jt(K=>K.parents),[d,u]=g.useState(!1),[h,p]=g.useState(null),[f,y]=g.useState(!1),[x,j]=g.useState(!1),[v,w]=g.useState(!1),[N,k]=g.useState("delay"),[P,E]=g.useState(""),[I,T]=g.useState(!1),[R,X]=g.useState(""),[D,C]=g.useState("all"),[$,B]=g.useState("all"),[Q,oe]=g.useState(1),[ae]=g.useState(10),U=(Le=o.find(K=>K.admin===(i==null?void 0:i.id)))==null?void 0:Le.id,Z=r;g.useEffect(()=>{(async()=>{try{U&&(await e(Xh({schoolId:U})).unwrap(),await e(fa({schoolId:U})).unwrap(),await e(Vn({schoolId:U})).unwrap()),await e(ho()),await e(Hn()),await e(pu())}catch{}})()},[e,U]);const W=Z.filter(K=>{var se,F,ne;const He=((se=K.route_name)==null?void 0:se.toLowerCase().includes(R.toLowerCase()))||((F=K.driver_name)==null?void 0:F.toLowerCase().includes(R.toLowerCase()))||((ne=K.vehicle_registration)==null?void 0:ne.toLowerCase().includes(R.toLowerCase()))||K.trip_type.toLowerCase().includes(R.toLowerCase()),xe=D==="all"||K.status===D,ge=$==="all"||K.trip_type===$;return He&&xe&&ge}),ve=Math.ceil(W.length/ae),A=(Q-1)*ae,z=A+ae,M=W.slice(A,z);g.useEffect(()=>{oe(1)},[R,D,$]);const re=()=>{p(null),u(!0)},te=K=>{p(K),y(!0)},O=K=>{p(K),j(!0)},ce=(K,He)=>{p(K),k(He),E(""),w(!0)},le=async()=>{if(!h||!P.trim()){t({title:"Error",description:"Please enter a notification message",variant:"destructive"});return}T(!0);try{if(!localStorage.getItem("schoolId")){t({title:"Error",description:"School ID not found",variant:"destructive"}),T(!1);return}let He="parent_notification",xe="low",ge="";switch(N){case"emergency":He="SOS",xe="high",ge=` Emergency Alert - ${h.route_name||`Route ${h.route}`}`;break;case"cancellation":He="traffic_delay",xe="high",ge=`Trip Cancelled - ${h.route_name||`Route ${h.route}`}`;break;case"delay":He="traffic_delay",xe="medium",ge=`Trip Delayed - ${h.route_name||`Route ${h.route}`}`;break}const se={alert_type:He,severity:xe,title:ge,message:P,description:`Driver: ${h.driver_name||`Driver ${h.driver}`} | Vehicle: ${h.vehicle_registration||`Vehicle ${h.vehicle}`}`,trip_id:h.id,recipients:[],requires_immediate_action:N==="emergency",metadata:{trip_type:h.trip_type,route_name:h.route_name,driver_name:h.driver_name,vehicle_registration:h.vehicle_registration,scheduled_start_time:h.scheduled_start_time,notification_type:N}},F=h.students||[],ne=(l==null?void 0:l.filter(Y=>F.includes(Y.id)))||[],ye=[...new Set(ne.map(Y=>Y.parent).filter(Y=>Y!=null))];se.recipients=ye;const je=await e(jp(se)).unwrap();t({title:"Success",description:ye.length>0?`${N.charAt(0).toUpperCase()+N.slice(1)} notification sent to ${ye.length} parent(s)`:"Notification created (no parents found for this route)"}),w(!1),p(null),E("")}catch(K){let He="Failed to send notification";K instanceof Error?He=K.message:typeof K=="string"&&(He=K),t({title:"Error",description:He,variant:"destructive"})}finally{T(!1)}},Ee=async()=>{try{if(!h){t({title:"Error",description:"No trip selected for deletion",variant:"destructive"});return}await e($v(h.id)).unwrap(),t({title:"Success",description:"Trip deleted successfully"}),j(!1),p(null)}catch(K){let He="Failed to delete trip";K instanceof Error?He=K.message:typeof K=="string"&&(He=K),t({title:"Error",description:He,variant:"destructive"})}},_e=K=>{switch(K.toLowerCase()){case"scheduled":return"bg-blue-100 text-blue-800";case"preparing":return"bg-yellow-100 text-yellow-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"delayed":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},Be=K=>{switch(K.toLowerCase()){case"morning":return"bg-orange-100 text-orange-800";case"afternoon":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},Ge=K=>{try{return new Date(K).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return K}},ut=[{label:"Total Trips",value:Z.length,icon:pa},{label:"Scheduled",value:Z.filter(K=>K.status==="scheduled").length,icon:fn},{label:"Ongoing",value:Z.filter(K=>K.status==="ongoing").length,icon:Nr},{label:"Completed",value:Z.filter(K=>K.status==="completed").length,icon:Ja}];return n?s.jsx("div",{className:"h-full w-full bg-gray-100 p-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#f7c624]"}),s.jsx("span",{children:"Loading trips..."})]})})})}):a?s.jsx("div",{className:"h-full w-full bg-background p-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx(Gl,{variant:"destructive",children:s.jsxs(Kl,{children:["Failed to load trips: ",a]})})})}):s.jsxs("div",{className:"h-full w-full bg-background p-4",children:[s.jsxs("div",{className:"max-w-7xl mx-auto space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Trips"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor school bus trips"})]}),s.jsxs(ue,{onClick:re,className:"flex items-center gap-2",children:[s.jsx(va,{className:"h-4 w-4"}),"Create Trip"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ut.map(K=>s.jsx(ze,{children:s.jsx(Ue,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:K.label}),s.jsx("p",{className:"text-2xl font-bold text-foreground",children:K.value})]}),s.jsx(K.icon,{className:"h-8 w-8 text-[#f7c624]"})]})})},K.label))}),s.jsx(ze,{children:s.jsx(Ue,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx($e,{placeholder:"Search trips...",value:R,onChange:K=>X(K.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:D,onChange:K=>C(K.target.value),className:"px-3 py-2 border border-border rounded-md text-sm bg-background text-foreground",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"preparing",children:"Preparing"}),s.jsx("option",{value:"ongoing",children:"Ongoing"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"delayed",children:"Delayed"})]}),s.jsxs("select",{value:$,onChange:K=>B(K.target.value),className:"px-3 py-2 border border-border rounded-md text-sm bg-background text-foreground",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"morning",children:"Morning"}),s.jsx("option",{value:"afternoon",children:"Afternoon"})]}),s.jsx(zu,{data:{headers:["Route","Driver","Vehicle","Trip Type","Start Time","End Time","Status","Students Count","Distance","Duration"],data:W.map(K=>{var He,xe,ge,se;return{route:K.route_name||`Route ${K.route}`,driver:K.driver_name||`Driver ${K.driver}`,vehicle:K.vehicle_registration||`Vehicle ${K.vehicle}`,trip_type:K.trip_type,start_time:Ge(K.scheduled_start_time),end_time:K.scheduled_end_time?Ge(K.scheduled_end_time):"",status:K.status.replace("_"," "),students_count:((xe=(He=K.students)==null?void 0:He.length)==null?void 0:xe.toString())||"0",distance:((ge=K.distance)==null?void 0:ge.toString())||"",duration:((se=K.duration)==null?void 0:se.toString())||""}}),fileName:"trips_export",title:"Trips Report"},className:"border-border hover:bg-muted/30 px-3 py-2"})]})]})})}),s.jsx(ze,{children:s.jsxs(Ue,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"Route"}),s.jsx(yt,{children:"Driver"}),s.jsx(yt,{children:"Vehicle"}),s.jsx(yt,{children:"Trip Type"}),s.jsx(yt,{children:"Start Time"}),s.jsx(yt,{children:"Status"}),s.jsx(yt,{children:"Actions"})]})}),s.jsx(si,{children:M.length===0?s.jsx(hr,{children:s.jsx(vt,{colSpan:7,className:"text-center py-8",children:s.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[s.jsx(Vl,{className:"h-8 w-8 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"No trips found"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first trip to get started"})]})})}):M.map(K=>s.jsxs(hr,{children:[s.jsx(vt,{className:"font-medium",children:K.route_name||`Route ${K.route}`}),s.jsx(vt,{children:K.driver_name||`Driver ${K.driver}`}),s.jsx(vt,{children:K.vehicle_registration||`Vehicle ${K.vehicle}`}),s.jsx(vt,{children:s.jsx(De,{className:Be(K.trip_type),children:K.trip_type})}),s.jsx(vt,{children:Ge(K.scheduled_start_time)}),s.jsx(vt,{children:s.jsx(De,{className:_e(K.status),children:K.status.replace("_"," ")})}),s.jsx(vt,{children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(B0,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsxs(Ut,{onClick:()=>te(K),children:[s.jsx(jn,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(Ut,{onClick:()=>ce(K,"delay"),className:"text-orange-600",children:[s.jsx(mi,{className:"h-4 w-4 mr-2"}),"Send Delay Notice"]}),s.jsxs(Ut,{onClick:()=>ce(K,"cancellation"),className:"text-red-600",children:[s.jsx(ec,{className:"h-4 w-4 mr-2"}),"Send Cancellation"]}),s.jsxs(Ut,{onClick:()=>ce(K,"emergency"),className:"text-red-700",children:[s.jsx($i,{className:"h-4 w-4 mr-2"}),"Emergency Alert"]}),s.jsxs(Ut,{onClick:()=>O(K),className:"text-red-600",children:[s.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},K.id))})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",A+1,"-",Math.min(z,W.length)," of"," ",W.length," trips"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ue,{variant:"outline",size:"sm",onClick:()=>oe(Math.max(1,Q-1)),disabled:Q===1,children:"Previous"}),s.jsx(ue,{variant:"outline",size:"sm",onClick:()=>oe(Math.min(ve,Q+1)),disabled:Q===ve,children:"Next"})]})]})]})})]}),s.jsx(o3,{isOpen:d,onClose:()=>u(!1),mode:"create"}),s.jsx(o3,{isOpen:f,onClose:()=>y(!1),trip:h,mode:"edit"}),s.jsx(nc,{open:x,onOpenChange:j,children:s.jsxs(ll,{children:[s.jsxs(cl,{children:[s.jsx(ul,{children:"Are you sure?"}),s.jsxs(hl,{children:["This action cannot be undone. This will permanently delete the trip",h&&` for route "${h.route_name||`Route ${h.route}`}"`,"."]})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Cancel"}),s.jsx(fl,{onClick:Ee,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),s.jsx(js,{open:v,onOpenChange:w,children:s.jsxs(xs,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsxs(vs,{className:"flex items-center gap-2",children:[N==="emergency"?s.jsx($i,{className:"h-5 w-5 text-red-600"}):N==="cancellation"?s.jsx(ec,{className:"h-5 w-5 text-red-500"}):s.jsx(mi,{className:"h-5 w-5 text-orange-500"}),"Send ",N==="delay"?"Delay Notice":N==="cancellation"?"Cancellation Notice":"Emergency Alert"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium mb-2 block",children:"Trip Information"}),s.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg border space-y-2",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Nr,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Route"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:(h==null?void 0:h.route_name)||`Route ${h==null?void 0:h.route}`})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ja,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Driver"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:(h==null?void 0:h.driver_name)||`Driver ${h==null?void 0:h.driver}`})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Vl,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Vehicle"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:(h==null?void 0:h.vehicle_registration)||`Vehicle ${h==null?void 0:h.vehicle}`})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(fn,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Trip Type"}),s.jsx(De,{className:Be((h==null?void 0:h.trip_type)||""),children:h==null?void 0:h.trip_type})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(de,{className:"text-sm font-medium",children:"Notification Type:"}),s.jsxs(De,{className:N==="emergency"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":N==="cancellation"?"bg-red-50 text-red-700 dark:bg-red-900/10 dark:text-red-300":"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",children:[N==="emergency"&&" ",N.toUpperCase()]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"notification-message",className:"text-sm font-medium",children:"Notification Message *"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-2",children:"This message will be sent to all parents with students on this trip"}),s.jsx($e,{id:"notification-message",placeholder:N==="delay"?"e.g., Traffic delay expected, arrival will be 15 minutes late":N==="cancellation"?"e.g., Trip cancelled due to weather conditions":"e.g., Emergency situation, all students are safe",value:P,onChange:K=>E(K.target.value),className:"mt-1",disabled:I}),P.trim().length>0&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[P.length," characters"]})]}),N==="emergency"&&s.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx($i,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-400",children:"Emergency Alert"}),s.jsx("p",{className:"text-xs text-red-700 dark:text-red-300 mt-1",children:"This will send a high-priority notification to all parents. Use only for urgent situations."})]})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[s.jsx(ue,{variant:"outline",onClick:()=>{w(!1),E("")},disabled:I,children:"Cancel"}),s.jsx(ue,{onClick:le,disabled:I||!P.trim(),className:N==="emergency"?"bg-red-600 hover:bg-red-700":N==="cancellation"?"bg-red-500 hover:bg-red-600":"bg-orange-500 hover:bg-orange-600",children:I?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(mi,{className:"h-4 w-4 mr-2"}),"Send ",N==="delay"?"Delay Notice":N==="cancellation"?"Cancellation":"Emergency Alert"]})})]})]})})]})}var Ax=e=>e.type==="checkbox",nu=e=>e instanceof Date,ka=e=>e==null;const mR=e=>typeof e=="object";var an=e=>!ka(e)&&!Array.isArray(e)&&mR(e)&&!nu(e),pR=e=>an(e)&&e.target?Ax(e.target)?e.target.checked:e.target.value:e,AZ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,xR=(e,t)=>e.has(AZ(t)),PZ=e=>{const t=e.constructor&&e.constructor.prototype;return an(t)&&t.hasOwnProperty("isPrototypeOf")},kS=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Un(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(kS&&(e instanceof Blob||n))&&(r||an(e)))if(t=r?[]:{},!r&&!PZ(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Un(e[a]));else return e;return t}var Mb=e=>/^\w*$/.test(e),Qr=e=>e===void 0,AS=e=>Array.isArray(e)?e.filter(Boolean):[],PS=e=>AS(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Pt=(e,t,r)=>{if(!t||!an(e))return r;const n=(Mb(t)?[t]:PS(t)).reduce((a,i)=>ka(a)?a:a[i],e);return Qr(n)||n===e?Qr(e[t])?r:e[t]:n},di=e=>typeof e=="boolean",or=(e,t,r)=>{let n=-1;const a=Mb(t)?[t]:PS(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const d=e[l];c=an(d)||Array.isArray(d)?d:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const X0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},yo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},El={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ES=bs.createContext(null);ES.displayName="HookFormContext";const $b=()=>bs.useContext(ES),EZ=e=>{const{children:t,...r}=e;return bs.createElement(ES.Provider,{value:r},t)};var gR=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==yo.all&&(t._proxyFormState[o]=!n||yo.all),r&&(r[o]=!0),e[o]}});return a};const LS=typeof window<"u"?g.useLayoutEffect:g.useEffect;function LZ(e){const t=$b(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=bs.useState(r._formState),c=bs.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return LS(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:d=>{!n&&l({...r._formState,...d})}}),[a,n,i]),bs.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),bs.useMemo(()=>gR(o,r,c.current,!1),[o,r])}var Zo=e=>typeof e=="string",vR=(e,t,r,n,a)=>Zo(e)?(n&&t.watch.add(e),Pt(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Pt(r,i))):(n&&(t.watchAll=!0),r);function TZ(e){const t=$b(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o}=e||{},l=bs.useRef(a),[c,d]=bs.useState(r._getWatch(n,l.current));return LS(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:u=>!i&&d(vR(n,r._names,u.values||r._formValues,!1,l.current))}),[n,r,i,o]),bs.useEffect(()=>r._removeUnmounted()),c}function RZ(e){const t=$b(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i}=e,o=xR(a._names.array,r),l=TZ({control:a,name:r,defaultValue:Pt(a._formValues,r,Pt(a._defaultValues,r,e.defaultValue)),exact:!0}),c=LZ({control:a,name:r,exact:!0}),d=bs.useRef(e),u=bs.useRef(a.register(r,{...e.rules,value:l,...di(e.disabled)?{disabled:e.disabled}:{}})),h=bs.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Pt(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!Pt(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Pt(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Pt(c.validatingFields,r)},error:{enumerable:!0,get:()=>Pt(c.errors,r)}}),[c,r]),p=bs.useCallback(j=>u.current.onChange({target:{value:pR(j),name:r},type:X0.CHANGE}),[r]),f=bs.useCallback(()=>u.current.onBlur({target:{value:Pt(a._formValues,r),name:r},type:X0.BLUR}),[r,a._formValues]),y=bs.useCallback(j=>{const v=Pt(a._fields,r);v&&j&&(v._f.ref={focus:()=>j.focus&&j.focus(),select:()=>j.select&&j.select(),setCustomValidity:w=>j.setCustomValidity(w),reportValidity:()=>j.reportValidity()})},[a._fields,r]),x=bs.useMemo(()=>({name:r,value:l,...di(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:p,onBlur:f,ref:y}),[r,n,c.disabled,p,f,y,l]);return bs.useEffect(()=>{const j=a._options.shouldUnregister||i;a.register(r,{...d.current.rules,...di(d.current.disabled)?{disabled:d.current.disabled}:{}});const v=(w,N)=>{const k=Pt(a._fields,w);k&&k._f&&(k._f.mount=N)};if(v(r,!0),j){const w=Un(Pt(a._options.defaultValues,r));or(a._defaultValues,r,w),Qr(Pt(a._formValues,r))&&or(a._formValues,r,w)}return!o&&a.register(r),()=>{(o?j&&!a._state.action:j)?a.unregister(r):v(r,!1)}},[r,a,o,i]),bs.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),bs.useMemo(()=>({field:x,formState:c,fieldState:h}),[x,c,h])}const IZ=e=>e.render(RZ(e));var yR=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Np=e=>Array.isArray(e)?e:[e],l3=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},Ww=e=>ka(e)||!mR(e);function Bc(e,t){if(Ww(e)||Ww(t))return e===t;if(nu(e)&&nu(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r){const i=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const o=t[a];if(nu(i)&&nu(o)||an(i)&&an(o)||Array.isArray(i)&&Array.isArray(o)?!Bc(i,o):i!==o)return!1}}return!0}var Ua=e=>an(e)&&!Object.keys(e).length,TS=e=>e.type==="file",bo=e=>typeof e=="function",Q0=e=>{if(!kS)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},bR=e=>e.type==="select-multiple",RS=e=>e.type==="radio",FZ=e=>RS(e)||Ax(e),Zj=e=>Q0(e)&&e.isConnected;function DZ(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Qr(e)?n++:e[t[n++]];return e}function OZ(e){for(const t in e)if(e.hasOwnProperty(t)&&!Qr(e[t]))return!1;return!0}function vn(e,t){const r=Array.isArray(t)?t:Mb(t)?[t]:PS(t),n=r.length===1?e:DZ(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(an(n)&&Ua(n)||Array.isArray(n)&&OZ(n))&&vn(e,r.slice(0,-1)),e}var jR=e=>{for(const t in e)if(bo(e[t]))return!0;return!1};function ey(e,t={}){const r=Array.isArray(e);if(an(e)||r)for(const n in e)Array.isArray(e[n])||an(e[n])&&!jR(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ey(e[n],t[n])):ka(e[n])||(t[n]=!0);return t}function wR(e,t,r){const n=Array.isArray(e);if(an(e)||n)for(const a in e)Array.isArray(e[a])||an(e[a])&&!jR(e[a])?Qr(t)||Ww(r[a])?r[a]=Array.isArray(e[a])?ey(e[a],[]):{...ey(e[a])}:wR(e[a],ka(t)?{}:t[a],r[a]):r[a]=!Bc(e[a],t[a]);return r}var qm=(e,t)=>wR(e,t,ey(t));const c3={value:!1,isValid:!1},d3={value:!0,isValid:!0};var NR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Qr(e[0].attributes.value)?Qr(e[0].value)||e[0].value===""?d3:{value:e[0].value,isValid:!0}:d3:c3}return c3},SR=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Qr(e)?e:t?e===""?NaN:e&&+e:r&&Zo(e)?new Date(e):n?n(e):e;const u3={isValid:!1,value:null};var _R=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,u3):u3;function h3(e){const t=e.ref;return TS(t)?t.files:RS(t)?_R(e.refs).value:bR(t)?[...t.selectedOptions].map(({value:r})=>r):Ax(t)?NR(e.refs).value:SR(Qr(t.value)?e.ref.value:t.value,e)}var MZ=(e,t,r,n)=>{const a={};for(const i of e){const o=Pt(t,i);o&&or(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},ty=e=>e instanceof RegExp,Vm=e=>Qr(e)?e:ty(e)?e.source:an(e)?ty(e.value)?e.value.source:e.value:e,f3=e=>({isOnSubmit:!e||e===yo.onSubmit,isOnBlur:e===yo.onBlur,isOnChange:e===yo.onChange,isOnAll:e===yo.all,isOnTouch:e===yo.onTouched});const m3="AsyncFunction";var $Z=e=>!!e&&!!e.validate&&!!(bo(e.validate)&&e.validate.constructor.name===m3||an(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===m3)),BZ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),p3=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Sp=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=Pt(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Sp(l,t))break}else if(an(l)&&Sp(l,t))break}}};function x3(e,t,r){const n=Pt(e,r);if(n||Mb(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=Pt(t,i),l=Pt(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var zZ=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Ua(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||yo.all))},UZ=(e,t,r)=>!e||!t||e===t||Np(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),qZ=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,VZ=(e,t)=>!AS(Pt(e,t)).length&&vn(e,t),HZ=(e,t,r)=>{const n=Np(Pt(e,r));return or(n,"root",t[r]),or(e,r,n),e},s0=e=>Zo(e);function g3(e,t,r="validate"){if(s0(e)||Array.isArray(e)&&e.every(s0)||di(e)&&!e)return{type:r,message:s0(e)?e:"",ref:t}}var xh=e=>an(e)&&!ty(e)?e:{value:e,message:""},v3=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:h,max:p,pattern:f,validate:y,name:x,valueAsNumber:j,mount:v}=e._f,w=Pt(r,x);if(!v||t.has(x))return{};const N=l?l[0]:o,k=C=>{a&&N.reportValidity&&(N.setCustomValidity(di(C)?"":C||""),N.reportValidity())},P={},E=RS(o),I=Ax(o),T=E||I,R=(j||TS(o))&&Qr(o.value)&&Qr(w)||Q0(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,X=yR.bind(null,x,n,P),D=(C,$,B,Q=El.maxLength,oe=El.minLength)=>{const ae=C?$:B;P[x]={type:C?Q:oe,message:ae,ref:o,...X(C?Q:oe,ae)}};if(i?!Array.isArray(w)||!w.length:c&&(!T&&(R||ka(w))||di(w)&&!w||I&&!NR(l).isValid||E&&!_R(l).isValid)){const{value:C,message:$}=s0(c)?{value:!!c,message:c}:xh(c);if(C&&(P[x]={type:El.required,message:$,ref:N,...X(El.required,$)},!n))return k($),P}if(!R&&(!ka(h)||!ka(p))){let C,$;const B=xh(p),Q=xh(h);if(!ka(w)&&!isNaN(w)){const oe=o.valueAsNumber||w&&+w;ka(B.value)||(C=oe>B.value),ka(Q.value)||($=oe<Q.value)}else{const oe=o.valueAsDate||new Date(w),ae=W=>new Date(new Date().toDateString()+" "+W),U=o.type=="time",Z=o.type=="week";Zo(B.value)&&w&&(C=U?ae(w)>ae(B.value):Z?w>B.value:oe>new Date(B.value)),Zo(Q.value)&&w&&($=U?ae(w)<ae(Q.value):Z?w<Q.value:oe<new Date(Q.value))}if((C||$)&&(D(!!C,B.message,Q.message,El.max,El.min),!n))return k(P[x].message),P}if((d||u)&&!R&&(Zo(w)||i&&Array.isArray(w))){const C=xh(d),$=xh(u),B=!ka(C.value)&&w.length>+C.value,Q=!ka($.value)&&w.length<+$.value;if((B||Q)&&(D(B,C.message,$.message),!n))return k(P[x].message),P}if(f&&!R&&Zo(w)){const{value:C,message:$}=xh(f);if(ty(C)&&!w.match(C)&&(P[x]={type:El.pattern,message:$,ref:o,...X(El.pattern,$)},!n))return k($),P}if(y){if(bo(y)){const C=await y(w,r),$=g3(C,N);if($&&(P[x]={...$,...X(El.validate,$.message)},!n))return k($.message),P}else if(an(y)){let C={};for(const $ in y){if(!Ua(C)&&!n)break;const B=g3(await y[$](w,r),N,$);B&&(C={...B,...X($,B.message)},k(B.message),n&&(P[x]=C))}if(!Ua(C)&&(P[x]={ref:N,...C},!n))return P}}return k(!0),P};const WZ={mode:yo.onSubmit,reValidateMode:yo.onChange,shouldFocusError:!0};function GZ(e={}){let t={...WZ,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:bo(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let a=an(t.defaultValues)||an(t.values)?Un(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Un(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const p={array:l3(),state:l3()},f=t.criteriaMode===yo.all,y=se=>F=>{clearTimeout(d),d=setTimeout(se,F)},x=async se=>{if(!t.disabled&&(u.isValid||h.isValid||se)){const F=t.resolver?Ua((await I()).errors):await R(n,!0);F!==r.isValid&&p.state.next({isValid:F})}},j=(se,F)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((se||Array.from(l.mount)).forEach(ne=>{ne&&(F?or(r.validatingFields,ne,F):vn(r.validatingFields,ne))}),p.state.next({validatingFields:r.validatingFields,isValidating:!Ua(r.validatingFields)}))},v=(se,F=[],ne,ye,je=!0,Y=!0)=>{if(ye&&ne&&!t.disabled){if(o.action=!0,Y&&Array.isArray(Pt(n,se))){const Re=ne(Pt(n,se),ye.argA,ye.argB);je&&or(n,se,Re)}if(Y&&Array.isArray(Pt(r.errors,se))){const Re=ne(Pt(r.errors,se),ye.argA,ye.argB);je&&or(r.errors,se,Re),VZ(r.errors,se)}if((u.touchedFields||h.touchedFields)&&Y&&Array.isArray(Pt(r.touchedFields,se))){const Re=ne(Pt(r.touchedFields,se),ye.argA,ye.argB);je&&or(r.touchedFields,se,Re)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=qm(a,i)),p.state.next({name:se,isDirty:D(se,F),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else or(i,se,F)},w=(se,F)=>{or(r.errors,se,F),p.state.next({errors:r.errors})},N=se=>{r.errors=se,p.state.next({errors:r.errors,isValid:!1})},k=(se,F,ne,ye)=>{const je=Pt(n,se);if(je){const Y=Pt(i,se,Qr(ne)?Pt(a,se):ne);Qr(Y)||ye&&ye.defaultChecked||F?or(i,se,F?Y:h3(je._f)):B(se,Y),o.mount&&x()}},P=(se,F,ne,ye,je)=>{let Y=!1,Re=!1;const Qe={name:se};if(!t.disabled){if(!ne||ye){(u.isDirty||h.isDirty)&&(Re=r.isDirty,r.isDirty=Qe.isDirty=D(),Y=Re!==Qe.isDirty);const me=Bc(Pt(a,se),F);Re=!!Pt(r.dirtyFields,se),me?vn(r.dirtyFields,se):or(r.dirtyFields,se,!0),Qe.dirtyFields=r.dirtyFields,Y=Y||(u.dirtyFields||h.dirtyFields)&&Re!==!me}if(ne){const me=Pt(r.touchedFields,se);me||(or(r.touchedFields,se,ne),Qe.touchedFields=r.touchedFields,Y=Y||(u.touchedFields||h.touchedFields)&&me!==ne)}Y&&je&&p.state.next(Qe)}return Y?Qe:{}},E=(se,F,ne,ye)=>{const je=Pt(r.errors,se),Y=(u.isValid||h.isValid)&&di(F)&&r.isValid!==F;if(t.delayError&&ne?(c=y(()=>w(se,ne)),c(t.delayError)):(clearTimeout(d),c=null,ne?or(r.errors,se,ne):vn(r.errors,se)),(ne?!Bc(je,ne):je)||!Ua(ye)||Y){const Re={...ye,...Y&&di(F)?{isValid:F}:{},errors:r.errors,name:se};r={...r,...Re},p.state.next(Re)}},I=async se=>{j(se,!0);const F=await t.resolver(i,t.context,MZ(se||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return j(se),F},T=async se=>{const{errors:F}=await I(se);if(se)for(const ne of se){const ye=Pt(F,ne);ye?or(r.errors,ne,ye):vn(r.errors,ne)}else r.errors=F;return F},R=async(se,F,ne={valid:!0})=>{for(const ye in se){const je=se[ye];if(je){const{_f:Y,...Re}=je;if(Y){const Qe=l.array.has(Y.name),me=je._f&&$Z(je._f);me&&u.validatingFields&&j([ye],!0);const be=await v3(je,l.disabled,i,f,t.shouldUseNativeValidation&&!F,Qe);if(me&&u.validatingFields&&j([ye]),be[Y.name]&&(ne.valid=!1,F))break;!F&&(Pt(be,Y.name)?Qe?HZ(r.errors,be,Y.name):or(r.errors,Y.name,be[Y.name]):vn(r.errors,Y.name))}!Ua(Re)&&await R(Re,F,ne)}}return ne.valid},X=()=>{for(const se of l.unMount){const F=Pt(n,se);F&&(F._f.refs?F._f.refs.every(ne=>!Zj(ne)):!Zj(F._f.ref))&&O(se)}l.unMount=new Set},D=(se,F)=>!t.disabled&&(se&&F&&or(i,se,F),!Bc(W(),a)),C=(se,F,ne)=>vR(se,l,{...o.mount?i:Qr(F)?a:Zo(se)?{[se]:F}:F},ne,F),$=se=>AS(Pt(o.mount?i:a,se,t.shouldUnregister?Pt(a,se,[]):[])),B=(se,F,ne={})=>{const ye=Pt(n,se);let je=F;if(ye){const Y=ye._f;Y&&(!Y.disabled&&or(i,se,SR(F,Y)),je=Q0(Y.ref)&&ka(F)?"":F,bR(Y.ref)?[...Y.ref.options].forEach(Re=>Re.selected=je.includes(Re.value)):Y.refs?Ax(Y.ref)?Y.refs.forEach(Re=>{(!Re.defaultChecked||!Re.disabled)&&(Array.isArray(je)?Re.checked=!!je.find(Qe=>Qe===Re.value):Re.checked=je===Re.value||!!je)}):Y.refs.forEach(Re=>Re.checked=Re.value===je):TS(Y.ref)?Y.ref.value="":(Y.ref.value=je,Y.ref.type||p.state.next({name:se,values:Un(i)})))}(ne.shouldDirty||ne.shouldTouch)&&P(se,je,ne.shouldTouch,ne.shouldDirty,!0),ne.shouldValidate&&Z(se)},Q=(se,F,ne)=>{for(const ye in F){if(!F.hasOwnProperty(ye))return;const je=F[ye],Y=se+"."+ye,Re=Pt(n,Y);(l.array.has(se)||an(je)||Re&&!Re._f)&&!nu(je)?Q(Y,je,ne):B(Y,je,ne)}},oe=(se,F,ne={})=>{const ye=Pt(n,se),je=l.array.has(se),Y=Un(F);or(i,se,Y),je?(p.array.next({name:se,values:Un(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&ne.shouldDirty&&p.state.next({name:se,dirtyFields:qm(a,i),isDirty:D(se,Y)})):ye&&!ye._f&&!ka(Y)?Q(se,Y,ne):B(se,Y,ne),p3(se,l)&&p.state.next({...r}),p.state.next({name:o.mount?se:void 0,values:Un(i)})},ae=async se=>{o.mount=!0;const F=se.target;let ne=F.name,ye=!0;const je=Pt(n,ne),Y=me=>{ye=Number.isNaN(me)||nu(me)&&isNaN(me.getTime())||Bc(me,Pt(i,ne,me))},Re=f3(t.mode),Qe=f3(t.reValidateMode);if(je){let me,be;const fe=F.type?h3(je._f):pR(se),ke=se.type===X0.BLUR||se.type===X0.FOCUS_OUT,We=!BZ(je._f)&&!t.resolver&&!Pt(r.errors,ne)&&!je._f.deps||qZ(ke,Pt(r.touchedFields,ne),r.isSubmitted,Qe,Re),Ze=p3(ne,l,ke);or(i,ne,fe),ke?(je._f.onBlur&&je._f.onBlur(se),c&&c(0)):je._f.onChange&&je._f.onChange(se);const xt=P(ne,fe,ke),lt=!Ua(xt)||Ze;if(!ke&&p.state.next({name:ne,type:se.type,values:Un(i)}),We)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?ke&&x():ke||x()),lt&&p.state.next({name:ne,...Ze?{}:xt});if(!ke&&Ze&&p.state.next({...r}),t.resolver){const{errors:ht}=await I([ne]);if(Y(fe),ye){const Nt=x3(r.errors,n,ne),Et=x3(ht,n,Nt.name||ne);me=Et.error,ne=Et.name,be=Ua(ht)}}else j([ne],!0),me=(await v3(je,l.disabled,i,f,t.shouldUseNativeValidation))[ne],j([ne]),Y(fe),ye&&(me?be=!1:(u.isValid||h.isValid)&&(be=await R(n,!0)));ye&&(je._f.deps&&Z(je._f.deps),E(ne,be,me,xt))}},U=(se,F)=>{if(Pt(r.errors,F)&&se.focus)return se.focus(),1},Z=async(se,F={})=>{let ne,ye;const je=Np(se);if(t.resolver){const Y=await T(Qr(se)?se:je);ne=Ua(Y),ye=se?!je.some(Re=>Pt(Y,Re)):ne}else se?(ye=(await Promise.all(je.map(async Y=>{const Re=Pt(n,Y);return await R(Re&&Re._f?{[Y]:Re}:Re)}))).every(Boolean),!(!ye&&!r.isValid)&&x()):ye=ne=await R(n);return p.state.next({...!Zo(se)||(u.isValid||h.isValid)&&ne!==r.isValid?{}:{name:se},...t.resolver||!se?{isValid:ne}:{},errors:r.errors}),F.shouldFocus&&!ye&&Sp(n,U,se?je:l.mount),ye},W=se=>{const F={...o.mount?i:a};return Qr(se)?F:Zo(se)?Pt(F,se):se.map(ne=>Pt(F,ne))},ve=(se,F)=>({invalid:!!Pt((F||r).errors,se),isDirty:!!Pt((F||r).dirtyFields,se),error:Pt((F||r).errors,se),isValidating:!!Pt(r.validatingFields,se),isTouched:!!Pt((F||r).touchedFields,se)}),A=se=>{se&&Np(se).forEach(F=>vn(r.errors,F)),p.state.next({errors:se?r.errors:{}})},z=(se,F,ne)=>{const ye=(Pt(n,se,{_f:{}})._f||{}).ref,je=Pt(r.errors,se)||{},{ref:Y,message:Re,type:Qe,...me}=je;or(r.errors,se,{...me,...F,ref:ye}),p.state.next({name:se,errors:r.errors,isValid:!1}),ne&&ne.shouldFocus&&ye&&ye.focus&&ye.focus()},M=(se,F)=>bo(se)?p.state.subscribe({next:ne=>se(C(void 0,F),ne)}):C(se,F,!0),re=se=>p.state.subscribe({next:F=>{UZ(se.name,F.name,se.exact)&&zZ(F,se.formState||u,He,se.reRenderRoot)&&se.callback({values:{...i},...r,...F})}}).unsubscribe,te=se=>(o.mount=!0,h={...h,...se.formState},re({...se,formState:h})),O=(se,F={})=>{for(const ne of se?Np(se):l.mount)l.mount.delete(ne),l.array.delete(ne),F.keepValue||(vn(n,ne),vn(i,ne)),!F.keepError&&vn(r.errors,ne),!F.keepDirty&&vn(r.dirtyFields,ne),!F.keepTouched&&vn(r.touchedFields,ne),!F.keepIsValidating&&vn(r.validatingFields,ne),!t.shouldUnregister&&!F.keepDefaultValue&&vn(a,ne);p.state.next({values:Un(i)}),p.state.next({...r,...F.keepDirty?{isDirty:D()}:{}}),!F.keepIsValid&&x()},ce=({disabled:se,name:F})=>{(di(se)&&o.mount||se||l.disabled.has(F))&&(se?l.disabled.add(F):l.disabled.delete(F))},le=(se,F={})=>{let ne=Pt(n,se);const ye=di(F.disabled)||di(t.disabled);return or(n,se,{...ne||{},_f:{...ne&&ne._f?ne._f:{ref:{name:se}},name:se,mount:!0,...F}}),l.mount.add(se),ne?ce({disabled:di(F.disabled)?F.disabled:t.disabled,name:se}):k(se,!0,F.value),{...ye?{disabled:F.disabled||t.disabled}:{},...t.progressive?{required:!!F.required,min:Vm(F.min),max:Vm(F.max),minLength:Vm(F.minLength),maxLength:Vm(F.maxLength),pattern:Vm(F.pattern)}:{},name:se,onChange:ae,onBlur:ae,ref:je=>{if(je){le(se,F),ne=Pt(n,se);const Y=Qr(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,Re=FZ(Y),Qe=ne._f.refs||[];if(Re?Qe.find(me=>me===Y):Y===ne._f.ref)return;or(n,se,{_f:{...ne._f,...Re?{refs:[...Qe.filter(Zj),Y,...Array.isArray(Pt(a,se))?[{}]:[]],ref:{type:Y.type,name:se}}:{ref:Y}}}),k(se,!1,void 0,Y)}else ne=Pt(n,se,{}),ne._f&&(ne._f.mount=!1),(t.shouldUnregister||F.shouldUnregister)&&!(xR(l.array,se)&&o.action)&&l.unMount.add(se)}}},Ee=()=>t.shouldFocusError&&Sp(n,U,l.mount),_e=se=>{di(se)&&(p.state.next({disabled:se}),Sp(n,(F,ne)=>{const ye=Pt(n,ne);ye&&(F.disabled=ye._f.disabled||se,Array.isArray(ye._f.refs)&&ye._f.refs.forEach(je=>{je.disabled=ye._f.disabled||se}))},0,!1))},Be=(se,F)=>async ne=>{let ye;ne&&(ne.preventDefault&&ne.preventDefault(),ne.persist&&ne.persist());let je=Un(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:Y,values:Re}=await I();r.errors=Y,je=Re}else await R(n);if(l.disabled.size)for(const Y of l.disabled)or(je,Y,void 0);if(vn(r.errors,"root"),Ua(r.errors)){p.state.next({errors:{}});try{await se(je,ne)}catch(Y){ye=Y}}else F&&await F({...r.errors},ne),Ee(),setTimeout(Ee);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ua(r.errors)&&!ye,submitCount:r.submitCount+1,errors:r.errors}),ye)throw ye},Ge=(se,F={})=>{Pt(n,se)&&(Qr(F.defaultValue)?oe(se,Un(Pt(a,se))):(oe(se,F.defaultValue),or(a,se,Un(F.defaultValue))),F.keepTouched||vn(r.touchedFields,se),F.keepDirty||(vn(r.dirtyFields,se),r.isDirty=F.defaultValue?D(se,Un(Pt(a,se))):D()),F.keepError||(vn(r.errors,se),u.isValid&&x()),p.state.next({...r}))},ut=(se,F={})=>{const ne=se?Un(se):a,ye=Un(ne),je=Ua(se),Y=je?a:ye;if(F.keepDefaultValues||(a=ne),!F.keepValues){if(F.keepDirtyValues){const Re=new Set([...l.mount,...Object.keys(qm(a,i))]);for(const Qe of Array.from(Re))Pt(r.dirtyFields,Qe)?or(Y,Qe,Pt(i,Qe)):oe(Qe,Pt(Y,Qe))}else{if(kS&&Qr(se))for(const Re of l.mount){const Qe=Pt(n,Re);if(Qe&&Qe._f){const me=Array.isArray(Qe._f.refs)?Qe._f.refs[0]:Qe._f.ref;if(Q0(me)){const be=me.closest("form");if(be){be.reset();break}}}}for(const Re of l.mount)oe(Re,Pt(Y,Re))}i=Un(Y),p.array.next({values:{...Y}}),p.state.next({values:{...Y}})}l={mount:F.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!F.keepIsValid||!!F.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:F.keepSubmitCount?r.submitCount:0,isDirty:je?!1:F.keepDirty?r.isDirty:!!(F.keepDefaultValues&&!Bc(se,a)),isSubmitted:F.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:je?{}:F.keepDirtyValues?F.keepDefaultValues&&i?qm(a,i):r.dirtyFields:F.keepDefaultValues&&se?qm(a,se):F.keepDirty?r.dirtyFields:{},touchedFields:F.keepTouched?r.touchedFields:{},errors:F.keepErrors?r.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Le=(se,F)=>ut(bo(se)?se(i):se,F),K=(se,F={})=>{const ne=Pt(n,se),ye=ne&&ne._f;if(ye){const je=ye.refs?ye.refs[0]:ye.ref;je.focus&&(je.focus(),F.shouldSelect&&bo(je.select)&&je.select())}},He=se=>{r={...r,...se}},ge={control:{register:le,unregister:O,getFieldState:ve,handleSubmit:Be,setError:z,_subscribe:re,_runSchema:I,_focusError:Ee,_getWatch:C,_getDirty:D,_setValid:x,_setFieldArray:v,_setDisabledField:ce,_setErrors:N,_getFieldArray:$,_reset:ut,_resetDefaultValues:()=>bo(t.defaultValues)&&t.defaultValues().then(se=>{Le(se,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:X,_disableForm:_e,_subjects:p,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(se){o=se},get _defaultValues(){return a},get _names(){return l},set _names(se){l=se},get _formState(){return r},get _options(){return t},set _options(se){t={...t,...se}}},subscribe:te,trigger:Z,register:le,handleSubmit:Be,watch:M,setValue:oe,getValues:W,reset:Le,resetField:Ge,clearErrors:A,unregister:O,setError:z,setFocus:K,getFieldState:ve};return{...ge,formControl:ge}}function sy(e={}){const t=bs.useRef(void 0),r=bs.useRef(void 0),[n,a]=bs.useState({isDirty:!1,isValidating:!1,isLoading:bo(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:bo(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!bo(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=GZ(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,LS(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),bs.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),bs.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),bs.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),bs.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),bs.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),bs.useEffect(()=>{e.values&&!Bc(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),bs.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=gR(n,i),t.current}const _p=EZ,CR=g.createContext({}),Js=({...e})=>s.jsx(CR.Provider,{value:{name:e.name},children:s.jsx(IZ,{...e})}),Bb=()=>{const e=g.useContext(CR),t=g.useContext(kR),{getFieldState:r,formState:n}=$b(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},kR=g.createContext({}),Ds=g.forwardRef(({className:e,...t},r)=>{const n=g.useId();return s.jsx(kR.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:nt("space-y-2",e),...t})})});Ds.displayName="FormItem";const Os=g.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=Bb();return s.jsx(de,{ref:r,className:nt(n&&"text-destructive",e),htmlFor:a,...t})});Os.displayName="FormLabel";const Vs=g.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=Bb();return s.jsx(Du,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});Vs.displayName="FormControl";const KZ=g.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=Bb();return s.jsx("p",{ref:r,id:n,className:nt("text-sm text-muted-foreground",e),...t})});KZ.displayName="FormDescription";const Er=g.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=Bb(),o=a?String(a==null?void 0:a.message):t;return o?s.jsx("p",{ref:n,id:i,className:nt("text-sm font-medium text-destructive",e),...r,children:o}):null});Er.displayName="FormMessage";const y3=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Pt(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},AR=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?y3(n.ref,r,e):n.refs&&n.refs.forEach(a=>y3(a,r,e))}},YZ=(e,t)=>{t.shouldUseNativeValidation&&AR(e,t);const r={};for(const n in e){const a=Pt(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(JZ(t.names||Object.keys(e),n)){const o=Object.assign({},Pt(r,n));or(o,"root",i),or(r,n,o)}else or(r,n,i)}return r},JZ=(e,t)=>e.some(r=>r.startsWith(t+"."));var ZZ=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var c=r[o].types,d=c&&c[n.code];r[o]=yR(o,t,r,a,d?[].concat(d,n.message):n.message)}e.shift()}return r},ry=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(d){return i.shouldUseNativeValidation&&AR({},i),{errors:{},values:r.raw?n:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:YZ(ZZ(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},tr;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(tr||(tr={}));var b3;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(b3||(b3={}));const $t=tr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fc=e=>{switch(typeof e){case"undefined":return $t.undefined;case"string":return $t.string;case"number":return Number.isNaN(e)?$t.nan:$t.number;case"boolean":return $t.boolean;case"function":return $t.function;case"bigint":return $t.bigint;case"symbol":return $t.symbol;case"object":return Array.isArray(e)?$t.array:e===null?$t.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?$t.promise:typeof Map<"u"&&e instanceof Map?$t.map:typeof Set<"u"&&e instanceof Set?$t.set:typeof Date<"u"&&e instanceof Date?$t.date:$t.object;default:return $t.unknown}},gt=tr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ac extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),n}static assert(t){if(!(t instanceof ac))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,tr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ac.create=e=>new ac(e);const Gw=(e,t)=>{let r;switch(e.code){case gt.invalid_type:e.received===$t.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case gt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,tr.jsonStringifyReplacer)}`;break;case gt.unrecognized_keys:r=`Unrecognized key(s) in object: ${tr.joinValues(e.keys,", ")}`;break;case gt.invalid_union:r="Invalid input";break;case gt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${tr.joinValues(e.options)}`;break;case gt.invalid_enum_value:r=`Invalid enum value. Expected ${tr.joinValues(e.options)}, received '${e.received}'`;break;case gt.invalid_arguments:r="Invalid function arguments";break;case gt.invalid_return_type:r="Invalid function return type";break;case gt.invalid_date:r="Invalid date";break;case gt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:tr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case gt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case gt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case gt.custom:r="Invalid input";break;case gt.invalid_intersection_types:r="Intersection results could not be merged";break;case gt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case gt.not_finite:r="Number must be finite";break;default:r=t.defaultError,tr.assertNever(e)}return{message:r}};let XZ=Gw;function QZ(){return XZ}const eX=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function It(e,t){const r=QZ(),n=eX({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Gw?void 0:Gw].filter(a=>!!a)});e.common.issues.push(n)}class La{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return ds;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return La.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return ds;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const ds=Object.freeze({status:"aborted"}),tp=e=>({status:"dirty",value:e}),Wi=e=>({status:"valid",value:e}),j3=e=>e.status==="aborted",w3=e=>e.status==="dirty",If=e=>e.status==="valid",ny=e=>typeof Promise<"u"&&e instanceof Promise;var Ht;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ht||(Ht={}));class pl{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const N3=(e,t)=>{if(If(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ac(e.common.issues);return this._error=r,this._error}}};function Ls(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class Us{get description(){return this._def.description}_getType(t){return Fc(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Fc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new La,ctx:{common:t.parent.common,data:t.data,parsedType:Fc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(ny(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fc(t)},a=this._parseSync({data:t,path:n.path,parent:n});return N3(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fc(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return If(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>If(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fc(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(ny(a)?a:Promise.resolve(a));return N3(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:gt.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Of({schema:this,typeName:ls.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return cd.create(this,this._def)}nullable(){return Mf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return nl.create(this)}promise(){return cy.create(this,this._def)}or(t){return iy.create([this,t],this._def)}and(t){return oy.create(this,t,this._def)}transform(t){return new Of({...Ls(this._def),schema:this,typeName:ls.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Zw({...Ls(this._def),innerType:this,defaultValue:r,typeName:ls.ZodDefault})}brand(){return new NX({typeName:ls.ZodBranded,type:this,...Ls(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Xw({...Ls(this._def),innerType:this,catchValue:r,typeName:ls.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return IS.create(this,t)}readonly(){return Qw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tX=/^c[^\s-]{8,}$/i,sX=/^[0-9a-z]+$/,rX=/^[0-9A-HJKMNP-TV-Z]{26}$/i,nX=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aX=/^[a-z0-9_-]{21}$/i,iX=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,oX=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,lX=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,cX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xj;const dX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,uX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,mX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pX=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,PR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",xX=new RegExp(`^${PR}$`);function ER(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function gX(e){return new RegExp(`^${ER(e)}$`)}function vX(e){let t=`${PR}T${ER(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function yX(e,t){return!!((t==="v4"||!t)&&dX.test(e)||(t==="v6"||!t)&&hX.test(e))}function bX(e,t){if(!iX.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function jX(e,t){return!!((t==="v4"||!t)&&uX.test(e)||(t==="v6"||!t)&&fX.test(e))}class Ml extends Us{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==$t.string){const i=this._getOrReturnCtx(t);return It(i,{code:gt.invalid_type,expected:$t.string,received:i.parsedType}),ds}const n=new La;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),It(a,{code:gt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),It(a,{code:gt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?It(a,{code:gt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&It(a,{code:gt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")lX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"email",code:gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Xj||(Xj=new RegExp(cX,"u")),Xj.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"emoji",code:gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")nX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"uuid",code:gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")aX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"nanoid",code:gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")tX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"cuid",code:gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")sX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"cuid2",code:gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")rX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"ulid",code:gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),It(a,{validation:"url",code:gt.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"regex",code:gt.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),It(a,{code:gt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),It(a,{code:gt.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),It(a,{code:gt.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?vX(i).test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{code:gt.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?xX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{code:gt.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?gX(i).test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{code:gt.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?oX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"duration",code:gt.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?yX(t.data,i.version)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"ip",code:gt.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?bX(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"jwt",code:gt.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?jX(t.data,i.version)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"cidr",code:gt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?mX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"base64",code:gt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?pX.test(t.data)||(a=this._getOrReturnCtx(t,a),It(a,{validation:"base64url",code:gt.invalid_string,message:i.message}),n.dirty()):tr.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:gt.invalid_string,...Ht.errToObj(n)})}_addCheck(t){return new Ml({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ht.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ht.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ht.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ht.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ht.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ht.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ht.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ht.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ht.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ht.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ht.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ht.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ht.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Ht.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ht.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ht.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ht.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ht.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ht.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ht.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ht.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ht.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ht.errToObj(r)})}nonempty(t){return this.min(1,Ht.errToObj(t))}trim(){return new Ml({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ml({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ml({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Ml.create=e=>new Ml({checks:[],typeName:ls.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Ls(e)});function wX(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class Ff extends Us{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==$t.number){const i=this._getOrReturnCtx(t);return It(i,{code:gt.invalid_type,expected:$t.number,received:i.parsedType}),ds}let n;const a=new La;for(const i of this._def.checks)i.kind==="int"?tr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),It(n,{code:gt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),It(n,{code:gt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),It(n,{code:gt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?wX(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),It(n,{code:gt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),It(n,{code:gt.not_finite,message:i.message}),a.dirty()):tr.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ht.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ht.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ht.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ht.toString(r))}setLimit(t,r,n,a){return new Ff({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ht.toString(a)}]})}_addCheck(t){return new Ff({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ht.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ht.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ht.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ht.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ht.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ht.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ht.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ht.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ht.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&tr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Ff.create=e=>new Ff({checks:[],typeName:ls.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ls(e)});class sx extends Us{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==$t.bigint)return this._getInvalidInput(t);let n;const a=new La;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),It(n,{code:gt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),It(n,{code:gt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),It(n,{code:gt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):tr.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return It(r,{code:gt.invalid_type,expected:$t.bigint,received:r.parsedType}),ds}gte(t,r){return this.setLimit("min",t,!0,Ht.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ht.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ht.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ht.toString(r))}setLimit(t,r,n,a){return new sx({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ht.toString(a)}]})}_addCheck(t){return new sx({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ht.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ht.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ht.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ht.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ht.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}sx.create=e=>new sx({checks:[],typeName:ls.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Ls(e)});class Kw extends Us{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==$t.boolean){const n=this._getOrReturnCtx(t);return It(n,{code:gt.invalid_type,expected:$t.boolean,received:n.parsedType}),ds}return Wi(t.data)}}Kw.create=e=>new Kw({typeName:ls.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ls(e)});class ay extends Us{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==$t.date){const i=this._getOrReturnCtx(t);return It(i,{code:gt.invalid_type,expected:$t.date,received:i.parsedType}),ds}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return It(i,{code:gt.invalid_date}),ds}const n=new La;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),It(a,{code:gt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),It(a,{code:gt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):tr.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ay({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ht.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ht.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}ay.create=e=>new ay({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ls.ZodDate,...Ls(e)});class S3 extends Us{_parse(t){if(this._getType(t)!==$t.symbol){const n=this._getOrReturnCtx(t);return It(n,{code:gt.invalid_type,expected:$t.symbol,received:n.parsedType}),ds}return Wi(t.data)}}S3.create=e=>new S3({typeName:ls.ZodSymbol,...Ls(e)});class _3 extends Us{_parse(t){if(this._getType(t)!==$t.undefined){const n=this._getOrReturnCtx(t);return It(n,{code:gt.invalid_type,expected:$t.undefined,received:n.parsedType}),ds}return Wi(t.data)}}_3.create=e=>new _3({typeName:ls.ZodUndefined,...Ls(e)});class C3 extends Us{_parse(t){if(this._getType(t)!==$t.null){const n=this._getOrReturnCtx(t);return It(n,{code:gt.invalid_type,expected:$t.null,received:n.parsedType}),ds}return Wi(t.data)}}C3.create=e=>new C3({typeName:ls.ZodNull,...Ls(e)});class Yw extends Us{constructor(){super(...arguments),this._any=!0}_parse(t){return Wi(t.data)}}Yw.create=e=>new Yw({typeName:ls.ZodAny,...Ls(e)});class k3 extends Us{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Wi(t.data)}}k3.create=e=>new k3({typeName:ls.ZodUnknown,...Ls(e)});class wd extends Us{_parse(t){const r=this._getOrReturnCtx(t);return It(r,{code:gt.invalid_type,expected:$t.never,received:r.parsedType}),ds}}wd.create=e=>new wd({typeName:ls.ZodNever,...Ls(e)});class A3 extends Us{_parse(t){if(this._getType(t)!==$t.undefined){const n=this._getOrReturnCtx(t);return It(n,{code:gt.invalid_type,expected:$t.void,received:n.parsedType}),ds}return Wi(t.data)}}A3.create=e=>new A3({typeName:ls.ZodVoid,...Ls(e)});class nl extends Us{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==$t.array)return It(r,{code:gt.invalid_type,expected:$t.array,received:r.parsedType}),ds;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(It(r,{code:o?gt.too_big:gt.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(It(r,{code:gt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(It(r,{code:gt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new pl(r,o,r.path,l)))).then(o=>La.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new pl(r,o,r.path,l)));return La.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new nl({...this._def,minLength:{value:t,message:Ht.toString(r)}})}max(t,r){return new nl({...this._def,maxLength:{value:t,message:Ht.toString(r)}})}length(t,r){return new nl({...this._def,exactLength:{value:t,message:Ht.toString(r)}})}nonempty(t){return this.min(1,t)}}nl.create=(e,t)=>new nl({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ls.ZodArray,...Ls(t)});function Nh(e){if(e instanceof dn){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=cd.create(Nh(n))}return new dn({...e._def,shape:()=>t})}else return e instanceof nl?new nl({...e._def,type:Nh(e.element)}):e instanceof cd?cd.create(Nh(e.unwrap())):e instanceof Mf?Mf.create(Nh(e.unwrap())):e instanceof Ru?Ru.create(e.items.map(t=>Nh(t))):e}class dn extends Us{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=tr.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==$t.object){const d=this._getOrReturnCtx(t);return It(d,{code:gt.invalid_type,expected:$t.object,received:d.parsedType}),ds}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof wd&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],h=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new pl(a,h,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof wd){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(It(a,{code:gt.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const h=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new pl(a,h,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,p=await u.value;d.push({key:h,value:p,alwaysSet:u.alwaysSet})}return d}).then(d=>La.mergeObjectSync(n,d)):La.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return Ht.errToObj,new dn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:Ht.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new dn({...this._def,unknownKeys:"strip"})}passthrough(){return new dn({...this._def,unknownKeys:"passthrough"})}extend(t){return new dn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new dn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ls.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new dn({...this._def,catchall:t})}pick(t){const r={};for(const n of tr.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new dn({...this._def,shape:()=>r})}omit(t){const r={};for(const n of tr.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new dn({...this._def,shape:()=>r})}deepPartial(){return Nh(this)}partial(t){const r={};for(const n of tr.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new dn({...this._def,shape:()=>r})}required(t){const r={};for(const n of tr.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof cd;)i=i._def.innerType;r[n]=i}return new dn({...this._def,shape:()=>r})}keyof(){return LR(tr.objectKeys(this.shape))}}dn.create=(e,t)=>new dn({shape:()=>e,unknownKeys:"strip",catchall:wd.create(),typeName:ls.ZodObject,...Ls(t)});dn.strictCreate=(e,t)=>new dn({shape:()=>e,unknownKeys:"strict",catchall:wd.create(),typeName:ls.ZodObject,...Ls(t)});dn.lazycreate=(e,t)=>new dn({shape:e,unknownKeys:"strip",catchall:wd.create(),typeName:ls.ZodObject,...Ls(t)});class iy extends Us{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new ac(l.ctx.common.issues));return It(r,{code:gt.invalid_union,unionErrors:o}),ds}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new ac(c));return It(r,{code:gt.invalid_union,unionErrors:l}),ds}}get options(){return this._def.options}}iy.create=(e,t)=>new iy({options:e,typeName:ls.ZodUnion,...Ls(t)});function Jw(e,t){const r=Fc(e),n=Fc(t);if(e===t)return{valid:!0,data:e};if(r===$t.object&&n===$t.object){const a=tr.objectKeys(t),i=tr.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=Jw(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===$t.array&&n===$t.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=Jw(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===$t.date&&n===$t.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class oy extends Us{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(j3(i)||j3(o))return ds;const l=Jw(i.value,o.value);return l.valid?((w3(i)||w3(o))&&r.dirty(),{status:r.value,value:l.data}):(It(n,{code:gt.invalid_intersection_types}),ds)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}oy.create=(e,t,r)=>new oy({left:e,right:t,typeName:ls.ZodIntersection,...Ls(r)});class Ru extends Us{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==$t.array)return It(n,{code:gt.invalid_type,expected:$t.array,received:n.parsedType}),ds;if(n.data.length<this._def.items.length)return It(n,{code:gt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ds;!this._def.rest&&n.data.length>this._def.items.length&&(It(n,{code:gt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new pl(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>La.mergeArray(r,o)):La.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new Ru({...this._def,rest:t})}}Ru.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ru({items:e,typeName:ls.ZodTuple,rest:null,...Ls(t)})};class ly extends Us{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==$t.object)return It(n,{code:gt.invalid_type,expected:$t.object,received:n.parsedType}),ds;const a=[],i=this._def.keyType,o=this._def.valueType;for(const l in n.data)a.push({key:i._parse(new pl(n,l,n.path,l)),value:o._parse(new pl(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?La.mergeObjectAsync(r,a):La.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Us?new ly({keyType:t,valueType:r,typeName:ls.ZodRecord,...Ls(n)}):new ly({keyType:Ml.create(),valueType:t,typeName:ls.ZodRecord,...Ls(r)})}}class P3 extends Us{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==$t.map)return It(n,{code:gt.invalid_type,expected:$t.map,received:n.parsedType}),ds;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:a._parse(new pl(n,l,n.path,[d,"key"])),value:i._parse(new pl(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return ds;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return ds;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}}}}P3.create=(e,t,r)=>new P3({valueType:t,keyType:e,typeName:ls.ZodMap,...Ls(r)});class rx extends Us{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==$t.set)return It(n,{code:gt.invalid_type,expected:$t.set,received:n.parsedType}),ds;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(It(n,{code:gt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(It(n,{code:gt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return ds;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const l=[...n.data.values()].map((c,d)=>i._parse(new pl(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new rx({...this._def,minSize:{value:t,message:Ht.toString(r)}})}max(t,r){return new rx({...this._def,maxSize:{value:t,message:Ht.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}rx.create=(e,t)=>new rx({valueType:e,minSize:null,maxSize:null,typeName:ls.ZodSet,...Ls(t)});class E3 extends Us{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}E3.create=(e,t)=>new E3({getter:e,typeName:ls.ZodLazy,...Ls(t)});class L3 extends Us{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return It(r,{received:r.data,code:gt.invalid_literal,expected:this._def.value}),ds}return{status:"valid",value:t.data}}get value(){return this._def.value}}L3.create=(e,t)=>new L3({value:e,typeName:ls.ZodLiteral,...Ls(t)});function LR(e,t){return new Df({values:e,typeName:ls.ZodEnum,...Ls(t)})}class Df extends Us{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return It(r,{expected:tr.joinValues(n),received:r.parsedType,code:gt.invalid_type}),ds}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return It(r,{received:r.data,code:gt.invalid_enum_value,options:n}),ds}return Wi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Df.create(t,{...this._def,...r})}exclude(t,r=this._def){return Df.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Df.create=LR;class T3 extends Us{_parse(t){const r=tr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==$t.string&&n.parsedType!==$t.number){const a=tr.objectValues(r);return It(n,{expected:tr.joinValues(a),received:n.parsedType,code:gt.invalid_type}),ds}if(this._cache||(this._cache=new Set(tr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=tr.objectValues(r);return It(n,{received:n.data,code:gt.invalid_enum_value,options:a}),ds}return Wi(t.data)}get enum(){return this._def.values}}T3.create=(e,t)=>new T3({values:e,typeName:ls.ZodNativeEnum,...Ls(t)});class cy extends Us{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==$t.promise&&r.common.async===!1)return It(r,{code:gt.invalid_type,expected:$t.promise,received:r.parsedType}),ds;const n=r.parsedType===$t.promise?r.data:Promise.resolve(r.data);return Wi(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}cy.create=(e,t)=>new cy({type:e,typeName:ls.ZodPromise,...Ls(t)});class Of extends Us{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ls.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{It(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return ds;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?ds:c.status==="dirty"||r.value==="dirty"?tp(c.value):c});{if(r.value==="aborted")return ds;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?ds:l.status==="dirty"||r.value==="dirty"?tp(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ds:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ds:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!If(o))return ds;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>If(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):ds);tr.assertNever(a)}}Of.create=(e,t,r)=>new Of({schema:e,typeName:ls.ZodEffects,effect:t,...Ls(r)});Of.createWithPreprocess=(e,t,r)=>new Of({schema:t,effect:{type:"preprocess",transform:e},typeName:ls.ZodEffects,...Ls(r)});class cd extends Us{_parse(t){return this._getType(t)===$t.undefined?Wi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}cd.create=(e,t)=>new cd({innerType:e,typeName:ls.ZodOptional,...Ls(t)});class Mf extends Us{_parse(t){return this._getType(t)===$t.null?Wi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Mf.create=(e,t)=>new Mf({innerType:e,typeName:ls.ZodNullable,...Ls(t)});class Zw extends Us{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===$t.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Zw.create=(e,t)=>new Zw({innerType:e,typeName:ls.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ls(t)});class Xw extends Us{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ny(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ac(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ac(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Xw.create=(e,t)=>new Xw({innerType:e,typeName:ls.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ls(t)});class R3 extends Us{_parse(t){if(this._getType(t)!==$t.nan){const n=this._getOrReturnCtx(t);return It(n,{code:gt.invalid_type,expected:$t.nan,received:n.parsedType}),ds}return{status:"valid",value:t.data}}}R3.create=e=>new R3({typeName:ls.ZodNaN,...Ls(e)});class NX extends Us{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class IS extends Us{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ds:i.status==="dirty"?(r.dirty(),tp(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ds:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new IS({in:t,out:r,typeName:ls.ZodPipeline})}}class Qw extends Us{_parse(t){const r=this._def.innerType._parse(t),n=a=>(If(a)&&(a.value=Object.freeze(a.value)),a);return ny(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}Qw.create=(e,t)=>new Qw({innerType:e,typeName:ls.ZodReadonly,...Ls(t)});var ls;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ls||(ls={}));const Di=Ml.create,bn=Ff.create,nx=Kw.create,SX=Yw.create;wd.create;const FS=nl.create,zb=dn.create;iy.create;oy.create;Ru.create;const _X=ly.create,I3=Df.create;cy.create;cd.create;Mf.create;var Ub="Checkbox",[CX,hre]=Fa(Ub),[kX,DS]=CX(Ub);function AX(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=e,[p,f]=Co({prop:r,defaultProp:a??!1,onChange:c,caller:Ub}),[y,x]=g.useState(null),[j,v]=g.useState(null),w=g.useRef(!1),N=y?!!o||!!y.closest("form"):!0,k={checked:p,disabled:i,setChecked:f,control:y,setControl:x,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:w,required:d,defaultChecked:dd(a)?!1:a,isFormControl:N,bubbleInput:j,setBubbleInput:v};return s.jsx(kX,{scope:t,...k,children:PX(h)?h(k):n})}var TR="CheckboxTrigger",RR=g.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:f,bubbleInput:y}=DS(TR,e),x=Fs(a,u),j=g.useRef(c);return g.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const w=()=>h(j.current);return v.addEventListener("reset",w),()=>v.removeEventListener("reset",w)}},[i,h]),s.jsx(Bt.button,{type:"button",role:"checkbox","aria-checked":dd(c)?"mixed":c,"aria-required":d,"data-state":MR(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:x,onKeyDown:bt(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:bt(r,v=>{h(w=>dd(w)?!0:!w),y&&f&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})});RR.displayName=TR;var OS=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=e;return s.jsx(AX,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:p})=>s.jsxs(s.Fragment,{children:[s.jsx(RR,{...h,ref:t,__scopeCheckbox:r}),p&&s.jsx(OR,{__scopeCheckbox:r})]})})});OS.displayName=Ub;var IR="CheckboxIndicator",FR=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=DS(IR,r);return s.jsx(Qa,{present:n||dd(i.checked)||i.checked===!0,children:s.jsx(Bt.span,{"data-state":MR(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});FR.displayName=IR;var DR="CheckboxBubbleInput",OR=g.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:p,setBubbleInput:f}=DS(DR,e),y=Fs(r,f),x=NS(i),j=hS(n);g.useEffect(()=>{const w=p;if(!w)return;const N=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(N,"checked").set,E=!a.current;if(x!==i&&P){const I=new Event("click",{bubbles:E});w.indeterminate=dd(i),P.call(w,dd(i)?!1:i),w.dispatchEvent(I)}},[p,x,i,a]);const v=g.useRef(dd(i)?!1:i);return s.jsx(Bt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:d,value:u,form:h,...t,tabIndex:-1,ref:y,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});OR.displayName=DR;function PX(e){return typeof e=="function"}function dd(e){return e==="indeterminate"}function MR(e){return dd(e)?"indeterminate":e?"checked":"unchecked"}const ud=g.forwardRef(({className:e,...t},r)=>s.jsx(OS,{ref:r,className:nt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(FR,{className:nt("flex items-center justify-center text-current"),children:s.jsx(Or,{className:"h-4 w-4"})})}));ud.displayName=OS.displayName;var qb="Switch",[EX,fre]=Fa(qb),[LX,TX]=EX(qb),$R=g.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[p,f]=g.useState(null),y=Fs(t,N=>f(N)),x=g.useRef(!1),j=p?u||!!p.closest("form"):!0,[v,w]=Co({prop:a,defaultProp:i??!1,onChange:d,caller:qb});return s.jsxs(LX,{scope:r,checked:v,disabled:l,children:[s.jsx(Bt.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":qR(v),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:y,onClick:bt(e.onClick,N=>{w(k=>!k),j&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),j&&s.jsx(UR,{control:p,bubbles:!x.current,name:n,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});$R.displayName=qb;var BR="SwitchThumb",zR=g.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=TX(BR,r);return s.jsx(Bt.span,{"data-state":qR(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});zR.displayName=BR;var RX="SwitchBubbleInput",UR=g.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=g.useRef(null),l=Fs(o,i),c=NS(r),d=hS(t);return g.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&f){const y=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(y)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});UR.displayName=RX;function qR(e){return e?"checked":"unchecked"}var VR=$R,IX=zR;const Zs=g.forwardRef(({className:e,...t},r)=>s.jsx(VR,{className:nt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(IX,{className:nt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Zs.displayName=VR.displayName;const FX=zb({name:Di().min(2,"Stop name must be at least 2 characters"),route:bn(),lat:bn(),lng:bn(),sequence_number:bn().min(1,"Sequence number must be at least 1"),estimated_arrival_time:Di().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/,"Time must be in HH:MM:SS format"),is_pickup:nx(),is_dropoff:nx()});function HR({isOpen:e,onClose:t,routeId:r,routeName:n,currentSequenceNumber:a}){const i=rr(),{toast:o}=mr(),[l,c]=g.useState(!1),[d,u]=g.useState(""),[h,p]=g.useState(null),[f,y]=g.useState([]),[x,j]=g.useState(a),v=g.useRef(null),w=sy({resolver:ry(FX),defaultValues:{name:"",route:r,lat:0,lng:0,sequence_number:a,estimated_arrival_time:"08:00:00",is_pickup:!0,is_dropoff:!0}});g.useEffect(()=>{e&&(w.reset({name:"",route:r,lat:0,lng:0,sequence_number:a,estimated_arrival_time:"08:00:00",is_pickup:!0,is_dropoff:!0}),u(""),p(null),y([]),j(a))},[e,r,a,w]);const N=zl;g.useEffect(()=>{if(e&&!l){const E=document.createElement("script");return E.src=`https://maps.googleapis.com/maps/api/js?key=${N}&libraries=places`,E.async=!0,E.defer=!0,E.onload=()=>{if(c(!0),v.current){const I=new google.maps.places.Autocomplete(v.current,{fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}});I.addListener("place_changed",()=>{var X,D;const R=I.getPlace();if(R.geometry){const C=((X=R.geometry.location)==null?void 0:X.lat())||0,$=((D=R.geometry.location)==null?void 0:D.lng())||0,B=R.name||R.formatted_address||"";u(B),p({name:B,lat:C,lng:$}),w.setValue("name",B),w.setValue("lat",C),w.setValue("lng",$)}});const T=document.createElement("style");T.textContent=`
            .pac-container {
              border-radius: 0.5rem;
              margin-top: 0.5rem;
              box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
              border: 1px solid #e5e7eb;
              background-color: white;
              z-index: 1000;
              max-height: 300px;
              overflow-y: auto;
            }
            .pac-item {
              padding: 0.75rem 1rem;
              cursor: pointer;
              font-size: 0.875rem;
              line-height: 1.25rem;
              border-bottom: 1px solid #f3f4f6;
              transition: background-color 0.2s;
            }
            .pac-item:last-child {
              border-bottom: none;
            }
            .pac-item:hover {
              background-color: #f3f4f6;
            }
            .pac-item-query {
              font-size: 0.875rem;
              color: #1f2937;
              font-weight: 500;
            }
            .pac-icon {
              margin-right: 0.75rem;
              color: #6b7280;
            }
            .pac-matched {
              font-weight: 600;
              color: #2563eb;
            }
          `,document.head.appendChild(T)}},document.head.appendChild(E),()=>{document.head.removeChild(E)}}},[e,l,w]);const k=async E=>{if(!h){o({title:"Error",description:"Please search and select a location first",variant:"destructive"});return}try{const I={name:E.name,route:E.route,location:{type:"Point",coordinates:[h.lng,h.lat]},sequence_number:E.sequence_number,estimated_arrival_time:E.estimated_arrival_time,is_pickup:E.is_pickup,is_dropoff:E.is_dropoff};await i(Lv(I)).unwrap();const T={name:E.name,sequence_number:E.sequence_number,estimated_arrival_time:E.estimated_arrival_time,is_pickup:E.is_pickup,is_dropoff:E.is_dropoff,lat:E.lat,lng:E.lng};y(R=>[...R,T]),j(R=>R+1),o({title:"Success",description:`Route stop "${E.name}" added successfully`}),w.reset({name:"",route:r,lat:0,lng:0,sequence_number:x+1,estimated_arrival_time:"08:00:00",is_pickup:!0,is_dropoff:!0}),u(""),p(null)}catch(I){let T="Failed to add route stop";if(I instanceof Error)try{const R=JSON.parse(I.message);typeof R=="object"&&R!==null?T=JSON.stringify(R,null,2):T=I.message}catch{T=I.message}else T=String(I);o({title:"Error",description:T,variant:"destructive"})}},P=()=>{f.length>0&&o({title:"Stops Added",description:`Successfully added ${f.length} route stop(s)`}),t()};return s.jsx(js,{open:e,onOpenChange:P,children:s.jsxs(xs,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(Nr,{className:"w-5 h-5 text-blue-500"}),"Add Route Stops"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Add multiple stops to route:"," ",s.jsx("span",{className:"font-semibold",children:n})]})]}),f.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(de,{className:"text-base font-semibold",children:["Added Stops (",f.length,")"]}),s.jsxs(De,{variant:"secondary",className:"bg-green-100 text-green-800",children:[s.jsx(Es,{className:"w-3 h-3 mr-1"}),"Success"]})]}),s.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-lg p-3 bg-green-50",children:f.map((E,I)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border mb-2 last:mb-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-green-600",children:E.sequence_number})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:E.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Arrival: ",E.estimated_arrival_time," |",E.is_pickup&&s.jsx(De,{variant:"outline",className:"ml-1 text-xs",children:"Pickup"}),E.is_dropoff&&s.jsx(De,{variant:"outline",className:"ml-1 text-xs",children:"Dropoff"})]})]})]}),s.jsx(Es,{className:"w-4 h-4 text-green-600"})]},I))})]}),s.jsx(_p,{...w,children:s.jsxs("form",{onSubmit:w.handleSubmit(k),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Search Location"}),s.jsxs("div",{className:"relative",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx($e,{ref:v,placeholder:"Search for a location...",value:d,onChange:E=>u(E.target.value),className:"pl-10",autoComplete:"off",onKeyDown:E=>{E.key==="ArrowDown"||E.key==="ArrowUp"||E.key}})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Start typing to search for locations using Google Maps"})]}),h&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Nr,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium text-green-800",children:"Location Selected"})]}),s.jsx("p",{className:"text-sm text-green-700 mb-1",children:h.name}),s.jsxs("p",{className:"text-xs text-green-600",children:["Coordinates: ",h.lat.toFixed(6),","," ",h.lng.toFixed(6)]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Js,{control:w.control,name:"sequence_number",render:({field:E})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Sequence Number"}),s.jsx(Vs,{children:s.jsx($e,{type:"number",min:"1",placeholder:"1",...E,onChange:I=>E.onChange(parseInt(I.target.value)||1)})}),s.jsx(Er,{})]})}),s.jsx(Js,{control:w.control,name:"estimated_arrival_time",render:({field:E})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Estimated Arrival Time"}),s.jsx(Vs,{children:s.jsx($e,{type:"time",step:"1",...E})}),s.jsx(Er,{})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Js,{control:w.control,name:"is_pickup",render:({field:E})=>s.jsxs(Ds,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Os,{className:"flex items-center gap-2",children:[s.jsx(ws,{className:"w-4 h-4"}),"Pickup Stop"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Students can be picked up at this stop"})]}),s.jsx(Vs,{children:s.jsx(Zs,{checked:E.value,onCheckedChange:E.onChange})})]})}),s.jsx(Js,{control:w.control,name:"is_dropoff",render:({field:E})=>s.jsxs(Ds,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Os,{className:"flex items-center gap-2",children:[s.jsx(ws,{className:"w-4 h-4"}),"Dropoff Stop"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Students can be dropped off at this stop"})]}),s.jsx(Vs,{children:s.jsx(Zs,{checked:E.value,onCheckedChange:E.onChange})})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:P,children:f.length>0?"Done":"Cancel"}),s.jsx(ue,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",disabled:!h,children:"Add Stop"})]})]})})]})})}let Ug=!1,gh=!1,qg=null;const yu=e=>gh&&qg?qg:Ug?Promise.resolve():window.google&&window.google.maps?(Ug=!0,Promise.resolve()):(gh=!0,qg=new Promise((t,r)=>{const n=document.querySelector('script[src*="maps.googleapis.com"]');if(n){n.addEventListener("load",()=>{Ug=!0,gh=!1,t()}),n.addEventListener("error",()=>{gh=!1,r(new Error("Failed to load Google Maps script"))});return}const a=document.createElement("script");a.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places&loading=async`,a.async=!0,a.defer=!0,a.onload=()=>{Ug=!0,gh=!1,t()},a.onerror=()=>{gh=!1,r(new Error("Failed to load Google Maps script"))},document.head.appendChild(a)}),qg);function DX({isOpen:e,onClose:t,routeId:r,routeStop:n,onSuccess:a}){const i=rr(),{toast:o}=mr(),[l,c]=g.useState(!1),[d,u]=g.useState(""),[h,p]=g.useState(!1),[f,y]=g.useState(""),[x,j]=g.useState(!1),[v,w]=g.useState(null),N=g.useRef(null),[k,P]=g.useState({name:"",lat:"",lng:"",sequence_number:0,estimated_arrival_time:"",is_pickup:!1,is_dropoff:!1}),E=async(C,$)=>new Promise(B=>{if(!window.google||!window.google.maps){B("Location not available");return}new google.maps.Geocoder().geocode({location:{lat:C,lng:$}},(oe,ae)=>{ae==="OK"&&(oe!=null&&oe[0])?B(oe[0].formatted_address):B("Location not available")})}),I=()=>{if(!window.google||!window.google.maps||!window.google.maps.places){console.warn("Google Maps Places API not ready");return}if(N.current){v&&google.maps.event.clearInstanceListeners(v);const C=new google.maps.places.Autocomplete(N.current,{fields:["geometry","formatted_address","name","place_id"],componentRestrictions:{country:"ke"}});C.addListener("place_changed",()=>{var B,Q;const $=C.getPlace();if($!=null&&$.geometry){const oe=((B=$.geometry.location)==null?void 0:B.lat())||0,ae=((Q=$.geometry.location)==null?void 0:Q.lng())||0,U=$.formatted_address||$.name||"";P(Z=>({...Z,lat:oe.toString(),lng:ae.toString(),name:U})),u(U),y(U),o({title:"Location Selected",description:`Updated to: ${U}`})}}),w(C)}},T=async()=>{if(f.trim()){j(!0);try{(!window.google||!window.google.maps)&&await yu(zl),new google.maps.Geocoder().geocode({address:f},($,B)=>{var Q,oe;if(j(!1),B==="OK"&&($!=null&&$[0])){const ae=$[0],U=((Q=ae.geometry.location)==null?void 0:Q.lat())||0,Z=((oe=ae.geometry.location)==null?void 0:oe.lng())||0,W=ae.formatted_address||f;P(ve=>({...ve,lat:U.toString(),lng:Z.toString(),name:W})),u(W),o({title:"Location Updated",description:`Updated to: ${W}`})}else o({title:"Location Not Found",description:"Could not find the specified location",variant:"destructive"})})}catch{j(!1),o({title:"Error",description:"Failed to search for location",variant:"destructive"})}}};g.useEffect(()=>{var C,$;if(n&&e){let B="",Q="",oe=0,ae=0;n.lat!==void 0&&n.lng!==void 0?(B=n.lat.toString(),Q=n.lng.toString(),oe=n.lat,ae=n.lng):n.location&&n.location.coordinates&&(Q=((C=n.location.coordinates[0])==null?void 0:C.toString())||"",B=(($=n.location.coordinates[1])==null?void 0:$.toString())||"",ae=n.location.coordinates[0],oe=n.location.coordinates[1]),P({name:n.name||"",lat:B,lng:Q,sequence_number:n.sequence_number||0,estimated_arrival_time:n.estimated_arrival_time||"",is_pickup:n.is_pickup||!1,is_dropoff:n.is_dropoff||!1}),oe!==0&&ae!==0&&(p(!0),yu(zl).then(()=>E(oe,ae)).then(U=>{u(U),y(U)}).catch(()=>{u("Location not available"),y("")}).finally(()=>p(!1)))}},[n,e]),g.useEffect(()=>{e&&yu(zl).then(()=>{setTimeout(()=>{I();const C=document.createElement("style");C.textContent=`
              .pac-container {
                border-radius: 0.5rem;
                margin-top: 0.5rem;
                box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
                border: 1px solid #e5e7eb;
                background-color: white;
                z-index: 9999;
                max-height: 300px;
                overflow-y: auto;
              }
              .pac-item {
                padding: 0.75rem 1rem;
                cursor: pointer;
                font-size: 0.875rem;
                line-height: 1.25rem;
                border-bottom: 1px solid #f3f4f6;
                transition: background-color 0.2s;
              }
              .pac-item:last-child {
                border-bottom: none;
              }
              .pac-item:hover {
                background-color: #f3f4f6;
              }
              .pac-item-query {
                font-size: 0.875rem;
                color: #1f2937;
                font-weight: 500;
              }
              .pac-icon {
                margin-right: 0.75rem;
                color: #6b7280;
              }
              .pac-matched {
                font-weight: 600;
                color: #2563eb;
              }
            `,document.head.appendChild(C)},200)}).catch(C=>{console.error("Failed to load Google Maps:",C)})},[e]),g.useEffect(()=>{var C,$;e&&N.current&&(($=(C=window.google)==null?void 0:C.maps)!=null&&$.places)&&I()},[e,N.current]);const R=(C,$)=>{P(B=>({...B,[C]:$}))},X=async C=>{if(C.preventDefault(),!(n!=null&&n.id)){o({title:"Error",description:"Invalid route stop data",variant:"destructive"});return}c(!0);try{const $={name:k.name,location:{type:"Point",coordinates:[parseFloat(k.lng),parseFloat(k.lat)]},sequence_number:k.sequence_number,estimated_arrival_time:k.estimated_arrival_time,is_pickup:k.is_pickup,is_dropoff:k.is_dropoff};await i(Tv({routeId:r,stopId:n.id,stopData:$})).unwrap(),o({title:"Success",description:"Route stop updated successfully"}),a==null||a(),t()}catch{o({title:"Error",description:"Failed to update route stop",variant:"destructive"})}finally{c(!1)}},D=()=>{l||(v&&(google.maps.event.clearInstanceListeners(v),w(null)),y(""),j(!1),t())};return s.jsx(js,{open:e,onOpenChange:D,children:s.jsxs(xs,{className:"sm:max-w-[500px]",children:[s.jsx(gs,{children:s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(Nr,{className:"w-5 h-5 text-blue-500"}),"Edit Route Stop"]})}),s.jsxs("form",{onSubmit:X,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"name",children:"Stop Name"}),s.jsx($e,{id:"name",value:k.name,onChange:C=>R("name",C.target.value),placeholder:"Enter stop name",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"sequence_number",children:"Sequence Number"}),s.jsx($e,{id:"sequence_number",type:"number",value:k.sequence_number,onChange:C=>R("sequence_number",parseInt(C.target.value)||0),placeholder:"Enter sequence number",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Location"}),s.jsxs("div",{className:"relative",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx($e,{ref:N,placeholder:"Search for a location...",value:f,onChange:C=>y(C.target.value),className:"pl-10",onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),T())}}),x&&s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s.jsx(In,{className:"w-4 h-4 animate-spin text-gray-400"})})]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Type to search for a location or select from suggestions. Coordinates: ",k.lat,", ",k.lng]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"estimated_arrival_time",children:"Estimated Arrival Time"}),s.jsxs("div",{className:"relative",children:[s.jsx(fn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx($e,{id:"estimated_arrival_time",type:"time",value:k.estimated_arrival_time,onChange:C=>R("estimated_arrival_time",C.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(de,{children:"Stop Type"}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ud,{id:"is_pickup",checked:k.is_pickup,onCheckedChange:C=>R("is_pickup",C)}),s.jsx(de,{htmlFor:"is_pickup",children:"Pickup Stop"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ud,{id:"is_dropoff",checked:k.is_dropoff,onCheckedChange:C=>R("is_dropoff",C)}),s.jsx(de,{htmlFor:"is_dropoff",children:"Dropoff Stop"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:D,disabled:l,children:"Cancel"}),s.jsxs(ue,{type:"submit",disabled:l,children:[l&&s.jsx(In,{className:"w-4 h-4 mr-2 animate-spin"}),"Update Stop"]})]})]})]})})}function OX({isOpen:e,onClose:t,routeId:r,routeName:n}){const a=rr(),{toast:i}=mr(),[o,l]=g.useState([]),[c,d]=g.useState(!1),[u,h]=g.useState(null),[p,f]=g.useState(!1),[y,x]=g.useState(!1),[j,v]=g.useState(!1),[w,N]=g.useState(null),[k,P]=g.useState(!1),[E,I]=g.useState({}),[T,R]=g.useState(!1);g.useEffect(()=>{e&&r&&D()},[e,r]);const X=async(U,Z)=>new Promise(W=>{if(!window.google||!window.google.maps){W("Location not available");return}new google.maps.Geocoder().geocode({location:{lat:U,lng:Z}},(A,z)=>{z==="OK"&&(A!=null&&A[0])?W(A[0].formatted_address):W("Location not available")})}),D=async()=>{d(!0),h(null);try{const U=await a(Gh(r)).unwrap();if(l(U),U.length>0){R(!0);try{await yu(zl);const Z={};for(const W of U){let ve=0,A=0;if(W.lat!==void 0&&W.lng!==void 0?(ve=W.lat,A=W.lng):W.location&&W.location.coordinates&&(A=W.location.coordinates[0],ve=W.location.coordinates[1]),ve!==0&&A!==0){const z=await X(ve,A);Z[W.id]=z}}I(Z)}catch(Z){console.error("Error loading Google Maps or geocoding:",Z)}finally{R(!1)}}}catch(U){h(U instanceof Error?U.message:"Failed to fetch route stops")}finally{d(!1)}},C=U=>{N(U),f(!0)},$=U=>{N(U),v(!0)},B=async()=>{if(w!=null&&w.id){P(!0);try{await a(Rv({routeId:r,stopId:w.id})).unwrap(),i({title:"Success",description:"Route stop deleted successfully"}),await D()}catch{i({title:"Error",description:"Failed to delete route stop",variant:"destructive"})}finally{P(!1),v(!1),N(null)}}},Q=()=>{D()},oe=()=>{D()},ae=o.sort((U,Z)=>U.sequence_number-Z.sequence_number);return s.jsxs(js,{open:e,onOpenChange:t,children:[s.jsxs(xs,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(Nr,{className:"w-5 h-5 text-blue-500"}),"Route Stops"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Stops for route: ",s.jsx("span",{className:"font-semibold",children:n})]})]}),s.jsxs(ue,{onClick:()=>x(!0),className:"bg-blue-500 hover:bg-blue-600",size:"sm",children:[s.jsx(va,{className:"w-4 h-4 mr-1"}),"Add Stop"]})]})}),c?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(In,{className:"w-5 h-5 animate-spin text-blue-500"}),s.jsx("span",{className:"text-gray-600",children:"Loading route stops..."})]})}):u?s.jsxs("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[s.jsx("p",{className:"text-red-700",children:u}),s.jsx(ue,{onClick:D,variant:"outline",size:"sm",className:"mt-2",children:"Retry"})]}):o.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Nr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Route Stops"}),s.jsx("p",{className:"text-gray-500",children:"This route doesn't have any stops configured yet."})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Total Stops: ",o.length]}),s.jsxs(De,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[ae.length," stops"]})]}),s.jsx("div",{className:"space-y-3",children:ae.map(U=>s.jsx("div",{className:"p-4 border rounded-lg bg-white hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600",children:U.sequence_number||0})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:U.name||"Unnamed Stop"}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(fn,{className:"w-4 h-4"}),s.jsxs("span",{children:["Arrival: ",U.estimated_arrival_time||"N/A"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Nr,{className:"w-4 h-4"}),s.jsx("span",{children:T?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(In,{className:"w-3 h-3 animate-spin"}),"Loading location..."]}):E[U.id]||"Location not available"})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex gap-1",children:[U.is_pickup&&s.jsxs(De,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:[s.jsx(ws,{className:"w-3 h-3 mr-1"}),"Pickup"]}),U.is_dropoff&&s.jsxs(De,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:[s.jsx(ws,{className:"w-3 h-3 mr-1"}),"Dropoff"]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ue,{variant:"ghost",size:"sm",onClick:()=>C(U),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50",children:s.jsx(jn,{className:"w-4 h-4"})}),s.jsx(ue,{variant:"ghost",size:"sm",onClick:()=>$(U),className:"h-8 w-8 p-0 text-red-600 hover:text-red-800 hover:bg-red-50",children:s.jsx(Ea,{className:"w-4 h-4"})})]})]})]})},U.id))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ue,{onClick:t,variant:"outline",children:"Close"})})]}),s.jsx(HR,{isOpen:y,onClose:()=>{x(!1),oe()},routeId:r,routeName:n,currentSequenceNumber:ae.length>0?ae[ae.length-1].sequence_number+1:1}),s.jsx(DX,{isOpen:p,onClose:()=>{f(!1),N(null)},routeId:r,routeStop:w,onSuccess:Q}),s.jsx(nc,{open:j,onOpenChange:v,children:s.jsxs(ll,{children:[s.jsxs(cl,{children:[s.jsx(ul,{children:"Delete Route Stop"}),s.jsxs(hl,{children:['Are you sure you want to delete "',w==null?void 0:w.name,'"? This action cannot be undone.']})]}),s.jsxs(dl,{children:[s.jsx(ml,{disabled:k,children:"Cancel"}),s.jsxs(fl,{onClick:B,disabled:k,className:"bg-red-600 hover:bg-red-700",children:[k&&s.jsx(In,{className:"w-4 h-4 mr-2 animate-spin"}),"Delete"]})]})]})})]})}const MX=zb({name:Di().min(2,"Route name must be at least 2 characters"),school:bn(),driver:bn().optional(),start_lat:bn(),start_lng:bn(),end_lat:bn(),end_lng:bn(),total_distance:bn(),estimated_duration:Di(),is_active:nx(),schedule_days:FS(Di()),traffic_factor:bn(),path:Di()}),$X=zb({student:bn().min(1,"Please select a student"),route:bn().min(1,"Please select a route"),pickup_stop:bn().nullable().optional(),dropoff_stop:bn().nullable().optional(),is_active:nx(),schedule_days:FS(Di()).min(1,"At least one schedule day is required")});function BX(){var Ro,Ni;const e=rr(),{routes:t,loading:r,error:n}=jt(H=>H.routes),{students:a}=jt(H=>H.students),{drivers:i}=jt(H=>H.drivers),{assignments:o}=jt(H=>H.routeAssignments),{grades:l}=jt(H=>H.grades),d=JSON.parse(localStorage.getItem("profile")||"{}"),{schools:u}=jt(H=>H.schools),{toast:h}=mr(),[p,f]=g.useState(!1),[y,x]=g.useState(""),[j,v]=g.useState(""),[w,N]=g.useState(!1),[k,P]=g.useState(null),[E,I]=g.useState(null),[T,R]=g.useState([]),[X,D]=g.useState(""),C=g.useRef(null),$=g.useRef(null),B=g.useRef(null),Q=g.useRef(null),oe=g.useRef(null),ae=g.useRef(null),[U,Z]=g.useState([]),[W,ve]=g.useState(new Set),[A,z]=g.useState(!1),[M,re]=g.useState(""),[te,O]=g.useState("all"),[ce,le]=g.useState(1),[Ee]=g.useState(10),[_e,Be]=g.useState(null),[Ge,ut]=g.useState(!1),[Le,K]=g.useState(!1),[He,xe]=g.useState(!1),[ge,se]=g.useState(!1),[F,ne]=g.useState(!1),[ye,je]=g.useState(!1),[Y,Re]=g.useState(null),[Qe,me]=g.useState(!1),[be,fe]=g.useState(null),[ke,We]=g.useState({}),[Ze,xt]=g.useState({}),[lt,ht]=g.useState(""),[Nt,Et]=g.useState(""),[Qt,zt]=g.useState("");u!=null&&u.filter(H=>H&&H.admin===(d==null?void 0:d.id));const Kt=localStorage.getItem("schoolId"),Ns=()=>{const H=localStorage.getItem("schoolId");if(!H||!u)return null;const Ie=u.find(qt=>qt.id===parseInt(H));if(!Ie)return null;let Je=null,wt=null,St=Ie.name;if(Ie.location){const qt=Ie.location.match(/POINT \(([^ ]+) ([^)]+)\)/);qt&&(wt=parseFloat(qt[1]),Je=parseFloat(qt[2]))}if(Je===null||wt===null)try{if(Ie.longitude_point&&typeof Ie.longitude_point=="object"){const qt=Ie.longitude_point;Array.isArray(qt==null?void 0:qt.coordinates)&&(wt=qt.coordinates[0])}if(Ie.latitude_point&&typeof Ie.latitude_point=="object"){const qt=Ie.latitude_point;Array.isArray(qt==null?void 0:qt.coordinates)&&(Je=qt.coordinates[1])}}catch(qt){console.warn("Error parsing school coordinates:",qt)}return Je!==null&&wt!==null?{lat:Je,lng:wt,name:St}:null},Ts=async()=>{const H=Ns();if(H)try{window.google&&window.google.maps?new google.maps.Geocoder().geocode({location:{lat:H.lat,lng:H.lng}},(Je,wt)=>{if(wt==="OK"&&(Je!=null&&Je[0])){const St=Je[0].formatted_address;x(St),Lt.setValue("start_lat",H.lat),Lt.setValue("start_lng",H.lng)}else x(H.name),Lt.setValue("start_lat",H.lat),Lt.setValue("start_lng",H.lng)}):(x(H.name),Lt.setValue("start_lat",H.lat),Lt.setValue("start_lng",H.lng))}catch(Ie){console.error("Error setting school location:",Ie),x(H.name),Lt.setValue("start_lat",H.lat),Lt.setValue("start_lng",H.lng)}},Yt=H=>{se(!0),Lt.reset(),x(""),v(""),P(null),I(null),R([]),Q.current=null,oe.current=null,ae.current=null,setTimeout(()=>{Ts()},100),setTimeout(()=>{ba()},300)},Rs=(a==null?void 0:a.filter(H=>H&&H.school===parseInt(Kt||"0")))||[],Nn=new Set((o==null?void 0:o.map(H=>H==null?void 0:H.student))||[]),vr=Rs.filter(H=>!Nn.has(H.id)),xn=vr.filter(H=>{var Je,wt,St;if(!lt)return!0;const Ie=lt.toLowerCase();return((Je=H.first_name)==null?void 0:Je.toLowerCase().includes(Ie))||((wt=H.last_name)==null?void 0:wt.toLowerCase().includes(Ie))||((St=H.admission_number)==null?void 0:St.toLowerCase().includes(Ie))||`${H.first_name} ${H.last_name}`.toLowerCase().includes(Ie)}),qe=(t||[]).filter(H=>{var Je,wt,St;if(!Nt)return!0;const Ie=Nt.toLowerCase();return((Je=H.name)==null?void 0:Je.toLowerCase().includes(Ie))||((wt=H.total_distance)==null?void 0:wt.toString().includes(Ie))||((St=H.estimated_duration)==null?void 0:St.toLowerCase().includes(Ie))}),Te=(i==null?void 0:i.filter(H=>H&&H.school===parseInt(Kt||"0")))||[];Te.filter(H=>{if(!Qt)return!0;const Ie=Qt.toLowerCase(),Je=`${H.user_details.first_name||""} ${H.user_details.last_name||""}`.toLowerCase(),wt=(H.phone_number||"").toLowerCase();return Je.includes(Ie)||wt.includes(Ie)});const mt=H=>{if(!H)return"N/A";const Ie=l.find(Je=>Je.id===Number(H));return Ie?Ie.name:`Grade ${H}`},Wt=async(H,Ie)=>new Promise(Je=>{if(!window.google||!window.google.maps){Je("Location not available");return}new google.maps.Geocoder().geocode({location:{lat:H,lng:Ie}},(St,qt)=>{qt==="OK"&&(St!=null&&St[0])?Je(St[0].formatted_address):Je("Location not available")})}),Jt=async H=>{if(t==null?void 0:t.find(Je=>Je.id===H))try{const Je=await e(Gh(H)).unwrap();(!window.google||!window.google.maps)&&await yu(zl);const wt=await Promise.all(Je.map(async(St,qt)=>{let os=0,Qs=0;St.lat!==void 0&&St.lng!==void 0?(os=St.lat,Qs=St.lng):St.location&&St.location.coordinates&&(Qs=St.location.coordinates[0],os=St.location.coordinates[1]);let nr=St.name||`Stop ${qt+1}`;if(os!==0&&Qs!==0)try{nr=await Wt(os,Qs)}catch(yr){console.error("Error geocoding:",yr)}return{id:St.id||qt+1,name:nr,lat:os,lng:Qs,sequence:St.sequence_number||qt+1,is_pickup:St.is_pickup,is_dropoff:St.is_dropoff}}));Z(wt)}catch{Z([]),h({title:"Error",description:"Failed to fetch route stops",variant:"destructive"})}else Z([])},ks=H=>{if(!H)return"N/A";const Ie=Te.find(Je=>Je.id===H);return Ie?`${Ie.user_details.first_name} ${Ie.user_details.last_name}`:"Unknown Driver"},us=(t==null?void 0:t.filter(H=>{var wt,St;if(!H)return!1;const Ie=((wt=H.name)==null?void 0:wt.toLowerCase().includes(M.toLowerCase()))||((St=H.schedule_days)==null?void 0:St.some(qt=>qt==null?void 0:qt.toLowerCase().includes(M.toLowerCase()))),Je=te==="all"||te==="active"&&H.is_active||te==="inactive"&&!H.is_active;return Ie&&Je}))||[],hs=Math.ceil(us.length/Ee),Ms=(ce-1)*Ee,Mr=Ms+Ee,Ir=us.slice(Ms,Mr);g.useEffect(()=>{le(1)},[M,te]);const Sn=H=>{H&&(Be(H),ut(!0))},Pe=H=>{if(!H){h({title:"Error",description:"Invalid route selected for editing",variant:"destructive"});return}if(!H.id||H.id===void 0||H.id===null){h({title:"Error",description:"Selected route has invalid ID",variant:"destructive"});return}Be(H),P(H.total_distance||0),I(H.estimated_duration||"00:00:00"),Lt.reset({name:H.name||"",school:H.school||parseInt(Kt||"1"),driver:H.driver||void 0,start_lat:H.start_lat||0,start_lng:H.start_lng||0,end_lat:H.end_lat||0,end_lng:H.end_lng||0,total_distance:H.total_distance||0,estimated_duration:H.estimated_duration||"00:00:00",is_active:H.is_active??!0,schedule_days:H.schedule_days||["monday","tuesday","wednesday","thursday","friday"],traffic_factor:H.traffic_factor||1.3,path:typeof H.path=="string"?H.path:JSON.stringify({type:"LineString",coordinates:[[0,0],[0,0]]})}),K(!0)},ot=H=>{H&&(Be(H),xe(!0))},kt=H=>{H&&(Re(H),je(!0))},Vt=H=>{H&&(fe(H),me(!0))},fs=async H=>{try{const Ie=await e(Gh(H)).unwrap();We(Je=>({...Je,[H]:Ie.length}))}catch{We(Je=>({...Je,[H]:0}))}},ir=(H,Ie,Je)=>{const wt={name:H,lat:Ie,lng:Je,sequence:T.length+1};R(St=>[...St,wt]),D("")},$s=H=>{const Je=T.filter((wt,St)=>St!==H).map((wt,St)=>({...wt,sequence:St+1}));R(Je)},As=async()=>{try{if(!_e){h({title:"Error",description:"No route selected for deletion",variant:"destructive"});return}const H=localStorage.getItem("schoolId");if(!H){h({title:"Error",description:"No school found for the current admin",variant:"destructive"});return}await e(Ev(_e.id)).unwrap(),h({title:"Success",description:"Route deleted successfully"}),H&&(e(ho({schoolId:parseInt(H)})),e(fa({schoolId:parseInt(H)})),e(Hn())),xe(!1),Be(null)}catch(H){let Ie="Failed to delete route";H instanceof Error?Ie=H.message:typeof H=="string"&&(Ie=H),h({title:"Error",description:Ie,variant:"destructive"})}},Lt=sy({resolver:ry(MX),defaultValues:{name:"",school:parseInt(Kt||"1"),driver:void 0,start_lat:0,start_lng:0,end_lat:0,end_lng:0,total_distance:0,estimated_duration:"00:00:00",is_active:!0,schedule_days:["monday","tuesday","wednesday","thursday","friday"],traffic_factor:1.3,path:JSON.stringify({type:"LineString",coordinates:[[0,0],[0,0]]})}}),is=sy({resolver:ry($X),defaultValues:{student:0,route:0,pickup_stop:null,dropoff_stop:null,is_active:!0,schedule_days:["monday","tuesday","wednesday","thursday","friday"]}});g.useEffect(()=>{const H=localStorage.getItem("schoolId");return H&&((!t||t.length===0)&&e(ho({schoolId:parseInt(H)})),e(fa({schoolId:parseInt(H)})),e(Hn()),e(Kh({schoolId:parseInt(H)})),e(Ii({schoolId:parseInt(H)}))),()=>{}},[]),g.useEffect(()=>{t&&t.length>0&&t.forEach(H=>{H&&H.id&&!ke[H.id]&&fs(H.id)})},[t]);const pr=zl,ba=()=>{if(!window.google||!window.google.maps||!window.google.maps.places)return console.warn("Google Maps Places API not ready"),!1;try{return C.current&&!Q.current&&(Q.current=new google.maps.places.Autocomplete(C.current,{fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}}),Q.current.addListener("place_changed",()=>{var Ie,Je,wt;const H=(Ie=Q.current)==null?void 0:Ie.getPlace();if(H!=null&&H.geometry){const St=((Je=H.geometry.location)==null?void 0:Je.lat())||0,qt=((wt=H.geometry.location)==null?void 0:wt.lng())||0;Lt.setValue("start_lat",St),Lt.setValue("start_lng",qt);const os=H.name||H.formatted_address||"";x(os),setTimeout(()=>{var nr;const Qs=j||((nr=$.current)==null?void 0:nr.value)||"";os&&Qs&&Qn(os,Qs)},200)}})),$.current&&!oe.current&&(oe.current=new google.maps.places.Autocomplete($.current,{fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}}),oe.current.addListener("place_changed",()=>{var Ie,Je,wt;const H=(Ie=oe.current)==null?void 0:Ie.getPlace();if(H!=null&&H.geometry){const St=((Je=H.geometry.location)==null?void 0:Je.lat())||0,qt=((wt=H.geometry.location)==null?void 0:wt.lng())||0;Lt.setValue("end_lat",St),Lt.setValue("end_lng",qt);const os=H.name||H.formatted_address||"";v(os),setTimeout(()=>{var nr;const Qs=y||((nr=C.current)==null?void 0:nr.value)||"";Qs&&os&&Qn(Qs,os)},200)}})),B.current&&!ae.current&&(ae.current=new google.maps.places.Autocomplete(B.current,{fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}}),ae.current.addListener("place_changed",()=>{var Ie,Je,wt;const H=(Ie=ae.current)==null?void 0:Ie.getPlace();if(H!=null&&H.geometry){const St=((Je=H.geometry.location)==null?void 0:Je.lat())||0,qt=((wt=H.geometry.location)==null?void 0:wt.lng())||0,os=H.name||H.formatted_address||"";D(os),B.current&&(B.current.value=os),setTimeout(()=>{B.current&&B.current.blur()},100)}})),!0}catch(H){return console.error("Error initializing autocomplete:",H),!1}},Qn=async(H,Ie)=>{if(!window.google||!window.google.maps)return;N(!0);const Je=new google.maps.DirectionsService,wt=new google.maps.Geocoder;try{const[St,qt]=await Promise.all([new Promise((os,Qs)=>{wt.geocode({address:H},(nr,yr)=>{yr==="OK"&&(nr!=null&&nr[0])?os(nr[0].geometry.location):Qs(new Error("Could not geocode start location"))})}),new Promise((os,Qs)=>{wt.geocode({address:Ie},(nr,yr)=>{yr==="OK"&&(nr!=null&&nr[0])?os(nr[0].geometry.location):Qs(new Error("Could not geocode end location"))})})]);Je.route({origin:St,destination:qt,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC},(os,Qs)=>{var nr,yr;if(N(!1),Qs==="OK"&&os){const Gi=os.routes[0],$n=((nr=Gi.legs[0].distance)==null?void 0:nr.value)||0,Od=((yr=Gi.legs[0].duration)==null?void 0:yr.value)||0,Md=Math.round($n/1e3*100)/100,tm=Math.floor(Od/3600),qu=Math.floor(Od%3600/60),sm=Od%60,uc=`${tm.toString().padStart(2,"0")}:${qu.toString().padStart(2,"0")}:${sm.toString().padStart(2,"0")}`;P(Md),I(uc),Lt.setValue("total_distance",Md),Lt.setValue("estimated_duration",uc)}else h({title:"Error",description:"Could not calculate route. Please check if the locations are valid and try again.",variant:"destructive"})})}catch(St){N(!1),h({title:"Error",description:St instanceof Error?St.message:"Could not calculate route. Please check the locations and try again.",variant:"destructive"})}};g.useEffect(()=>{yu(pr).then(()=>{f(!0),setTimeout(()=>{ba()},100);const H=document.createElement("style");H.textContent=`
          .pac-container {
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--popover));
            color: hsl(var(--popover-foreground));
            z-index: 1000;
            max-height: 300px;
            overflow-y: auto;
          }
          .pac-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            font-size: 0.875rem;
            line-height: 1.25rem;
            border-bottom: 1px solid hsl(var(--border));
            transition: background-color 0.2s;
          }
          .pac-item:last-child {
            border-bottom: none;
          }
          .pac-item:hover {
            background-color: hsl(var(--accent));
          }
          .pac-item-query {
            font-size: 0.875rem;
            color: hsl(var(--popover-foreground));
            font-weight: 500;
          }
          .pac-icon {
            margin-right: 0.75rem;
            color: hsl(var(--muted-foreground));
          }
          .pac-matched {
            font-weight: 600;
            color: hsl(var(--primary));
          }
        `,document.head.appendChild(H),C.current&&C.current.addEventListener("keydown",Je=>{Je.key==="Enter"&&Je.preventDefault()}),$.current&&$.current.addEventListener("keydown",Je=>{Je.key==="Enter"&&Je.preventDefault()});const Ie=new MutationObserver(Je=>{Je.forEach(wt=>{wt.addedNodes.length&&document.querySelectorAll(".pac-item").forEach(qt=>{qt.addEventListener("click",os=>{os.preventDefault(),os.stopPropagation()})})})});return Ie.observe(document.body,{childList:!0,subtree:!0}),()=>{Ie.disconnect()}}),yu(pr).catch(H=>{console.error("Failed to load Google Maps:",H),h({title:"Error",description:"Failed to load Google Maps. Please check your API key.",variant:"destructive"})})},[pr]),g.useEffect(()=>{if(y&&j&&p){const H=setTimeout(()=>{Qn(y,j)},500);return()=>clearTimeout(H)}},[y,j,p]);const Mn=async H=>{const Ie=localStorage.getItem("schoolId");if(!Ie){h({title:"Error",description:"No school found for the current admin",variant:"destructive"});return}try{let Je;if(T.length>0){const qt=T.map(os=>[os.lng,os.lat]);Je=JSON.stringify({type:"LineString",coordinates:qt})}else Je=JSON.stringify({type:"LineString",coordinates:[[H.start_lng,H.start_lat],[H.end_lng,H.end_lat]]});const wt={name:H.name,school:parseInt(Ie||"1"),driver:H.driver,start_lat:H.start_lat,start_lng:H.start_lng,end_lat:H.end_lat,end_lng:H.end_lng,total_distance:H.total_distance,estimated_duration:H.estimated_duration,is_active:H.is_active,schedule_days:H.schedule_days,traffic_factor:H.traffic_factor,path:Je},St=await e(Pv(wt)).unwrap();h({title:"Success",description:"Route added successfully"}),Ie&&(e(ho({schoolId:parseInt(Ie)})),e(fa({schoolId:parseInt(Ie)})),e(Hn())),se(!1),Lt.reset(),x(""),v(""),P(null),I(null),N(!1),R([]),D("")}catch(Je){let wt="Failed to add route";if(Je instanceof Error)try{const St=JSON.parse(Je.message);typeof St=="object"&&St!==null?wt=JSON.stringify(St,null,2):wt=Je.message}catch{wt=Je.message}else wt=String(Je);h({title:"Error",description:wt,variant:"destructive"})}},Jr=async H=>{if(!_e){h({title:"Error",description:"No route selected for update",variant:"destructive"});return}if(!_e.id||_e.id===void 0||_e.id===null){h({title:"Error",description:"Selected route has invalid ID",variant:"destructive"});return}const Ie=localStorage.getItem("schoolId");if(!Ie){h({title:"Error",description:"No school found for the current admin",variant:"destructive"});return}try{let Je;if(T.length>0){const qt=T.map(os=>[os.lng,os.lat]);Je=JSON.stringify({type:"LineString",coordinates:qt})}else Je=JSON.stringify({type:"LineString",coordinates:[[H.start_lng,H.start_lat],[H.end_lng,H.end_lat]]});const wt={name:H.name,school:parseInt(Ie||"1"),driver:H.driver,start_lat:H.start_lat,start_lng:H.start_lng,end_lat:H.end_lat,end_lng:H.end_lng,total_distance:H.total_distance,estimated_duration:H.estimated_duration,is_active:H.is_active,schedule_days:H.schedule_days,traffic_factor:H.traffic_factor,path:Je},St=await e(fp({id:_e.id,routeData:wt}));if(fp.rejected.match(St))throw new Error(St.error.message||"Failed to update route");h({title:"Success",description:"Route updated successfully"}),K(!1),Be(null),Lt.reset(),x(""),v(""),P(null),I(null),N(!1),R([]),D(""),Ie&&(e(ho({schoolId:parseInt(Ie)})),e(fa({schoolId:parseInt(Ie)})),e(Hn()))}catch(Je){let wt="Failed to update route";Je instanceof Error?wt=Je.message:typeof Je=="string"&&(wt=Je),h({title:"Error",description:wt,variant:"destructive"})}},ja=async H=>{try{const Ie={student:H.student,route:H.route,pickup_stop:H.pickup_stop,dropoff_stop:H.dropoff_stop,is_active:H.is_active,schedule_days:H.schedule_days};await e(Iv(Ie)).unwrap(),h({title:"Success",description:"Route assigned to student successfully"}),ne(!1),is.reset(),Z([])}catch(Ie){let Je="Failed to assign route to student";if(Ie instanceof Error)try{const wt=JSON.parse(Ie.message);typeof wt=="object"&&wt!==null?Je=JSON.stringify(wt,null,2):Je=Ie.message}catch{Je=Ie.message}else Je=String(Ie);h({title:"Error",description:Je,variant:"destructive"})}},Oa=()=>{const H=localStorage.getItem("schoolId");H&&(e(ho({schoolId:parseInt(H)})),e(fa({schoolId:parseInt(H)})),e(Hn()),e(Kh({schoolId:parseInt(H)})),e(Ii({schoolId:parseInt(H)})),h({title:"Refreshing",description:"Data is being refreshed..."}))},dc=H=>{ve(Ie=>{const Je=new Set(Ie);return Je.has(H)?Je.delete(H):Je.add(H),Je})};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-2 sm:px-1 py-0 w-full max-w-[98vw] mx-auto",children:s.jsxs(ze,{className:"bg-card shadow-lg border-0 rounded-xl",children:[s.jsxs(Xe,{className:"border-b border-border flex flex-row w-full items-center justify-between py-4",children:[s.jsxs(tt,{className:"text-xl font-bold text-foreground flex items-center gap-2",children:[s.jsx(U0,{className:"w-6 h-6 text-[#f7c624]"}),"Routes List"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(ue,{variant:"outline",onClick:Oa,disabled:r,className:"flex items-center gap-2",children:[s.jsx(Wl,{className:`h-4 w-4 ${r?"animate-spin":""}`}),"Refresh"]}),s.jsx(js,{open:F,onOpenChange:H=>{ne(H),H||(is.reset(),ht(""),Et(""),Z([]))},children:s.jsxs(xs,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsx(vs,{children:"Assign Route to Student"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[vr.length," students available for route assignment",Nn.size>0&&s.jsxs("span",{className:"text-amber-600 dark:text-amber-400",children:[" ","(",Nn.size," already assigned)"]})]})]}),s.jsx(_p,{...is,children:s.jsxs("form",{onSubmit:is.handleSubmit(ja),className:"space-y-4",children:[s.jsx(Js,{control:is.control,name:"student",render:({field:H})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Select Student"}),s.jsxs(es,{onValueChange:Ie=>H.onChange(parseInt(Ie)),value:H.value.toString(),children:[s.jsx(Vs,{children:s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Choose a student"})})}),s.jsxs(Xt,{children:[s.jsxs("div",{className:"flex items-center px-3 pb-2",children:[s.jsx(mn,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx("input",{placeholder:"Search students...",value:lt,onChange:Ie=>ht(Ie.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:xn.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:lt?"No unassigned students found matching your search":"No unassigned students available"}):xn.map(Ie=>{var Je;return s.jsx(Ve,{value:((Je=Ie.id)==null?void 0:Je.toString())||"",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"font-medium",children:[Ie.first_name," ",Ie.last_name]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ie.admission_number," -"," ",mt(Ie.grade)]})]})},Ie.id)})})]})]}),s.jsx(Er,{})]})}),s.jsx(Js,{control:is.control,name:"route",render:({field:H})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Select Route"}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Choose a route to see available stops for pickup and dropoff"}),s.jsxs(es,{onValueChange:Ie=>{const Je=parseInt(Ie);H.onChange(Je),Jt(Je)},value:H.value.toString(),children:[s.jsx(Vs,{children:s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Choose a route"})})}),s.jsxs(Xt,{children:[s.jsxs("div",{className:"flex items-center px-3 pb-2",children:[s.jsx(mn,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx("input",{placeholder:"Search routes by name, distance, or duration...",value:Nt,onChange:Ie=>Et(Ie.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:qe.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:Nt?"No routes found matching your search":"No routes available"}):qe.map(Ie=>{var Je;return s.jsx(Ve,{value:((Je=Ie.id)==null?void 0:Je.toString())||"",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:Ie.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ie.total_distance,"km -"," ",Ie.estimated_duration," -"," ",ks(Ie.driver)]})]})},Ie.id)})})]})]}),s.jsx(Er,{})]})}),A&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(de,{className:"text-base font-semibold",children:"Route Stops"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 dark:border-blue-400"}),"Loading stops..."]})]})}),U.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs(de,{className:"text-base font-semibold",children:["Route Stops (",U.length," stops found)"]})}),s.jsx("div",{className:"space-y-4",children:s.jsx(Js,{control:is.control,name:"pickup_stop",render:({field:H})=>{var Ie;return s.jsxs(Ds,{children:[s.jsx(Os,{children:"Route Stop"}),s.jsxs(es,{onValueChange:Je=>{const wt=parseInt(Je);H.onChange(wt),is.setValue("dropoff_stop",wt)},value:((Ie=H.value)==null?void 0:Ie.toString())||"",children:[s.jsx(Vs,{children:s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select route stop"})})}),s.jsx(Xt,{children:U.map(Je=>s.jsx(Ve,{value:Je.id.toString(),children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:Je.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Stop ",Je.sequence]})]})},Je.id))})]}),s.jsx(Er,{}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This stop will be used for both pickup and dropoff"})]})}})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-medium",children:"Route Stops Preview"}),s.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-lg p-3 bg-muted",children:U.map(H=>s.jsxs("div",{className:"flex items-center space-x-3 py-2 border-b border-border last:border-b-0",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:H.sequence})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:H.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Coordinates: ",H.lat.toFixed(6),","," ",H.lng.toFixed(6)]}),s.jsxs("div",{className:"flex gap-1 mt-1",children:[H.is_pickup&&s.jsx(De,{variant:"outline",className:"text-xs bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/20",children:"Pickup"}),H.is_dropoff&&s.jsx(De,{variant:"outline",className:"text-xs bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/20",children:"Dropoff"})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Stop ",H.sequence]})]},H.id))}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Select pickup and dropoff stops from the options above to assign to the student."})]})]}),!A&&U.length===0&&is.watch("route")&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx(de,{className:"text-base font-semibold",children:"Route Stops"})}),s.jsx("div",{className:"p-4 border rounded-lg bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-sm text-amber-700 dark:text-amber-300",children:"No stops found for this route. The route may not have path coordinates defined."})]})})]}),s.jsx(Js,{control:is.control,name:"is_active",render:({field:H})=>s.jsxs(Ds,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsx("div",{className:"space-y-0.5",children:s.jsx(Os,{children:"Active Status"})}),s.jsx(Vs,{children:s.jsx(Zs,{checked:H.value,onCheckedChange:H.onChange})})]})}),s.jsx(Js,{control:is.control,name:"schedule_days",render:()=>s.jsxs(Ds,{children:[s.jsx("div",{className:"mb-4",children:s.jsx(Os,{children:"Schedule Days"})}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(H=>s.jsx(Js,{control:is.control,name:"schedule_days",render:({field:Ie})=>{var Je;return s.jsxs(Ds,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(Vs,{children:s.jsx(ud,{checked:(Je=Ie.value)==null?void 0:Je.includes(H),onCheckedChange:wt=>{var St;return wt?Ie.onChange([...Ie.value,H]):Ie.onChange((St=Ie.value)==null?void 0:St.filter(qt=>qt!==H))}})}),s.jsx(Os,{className:"font-normal capitalize",children:H})]},H)}},H))}),s.jsx(Er,{})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ue,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Assign Route"})})]})})]})}),s.jsxs(js,{open:ge,onOpenChange:H=>{se(H),H||(Lt.reset(),x(""),v(""),P(null),I(null),N(!1),zt(""))},children:[s.jsx(Jf,{asChild:!0,children:s.jsx(ue,{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white font-semibold px-6 py-2 rounded-lg shadow",onClick:()=>Yt(),children:"Add New Route"})}),s.jsxs(xs,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Add New Route"})}),s.jsx(_p,{...Lt,children:s.jsxs("form",{onSubmit:Lt.handleSubmit(Mn),className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsx(Js,{control:Lt.control,name:"name",render:({field:H})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Route Name"}),s.jsx(Vs,{children:s.jsx($e,{placeholder:"Enter route name",...H})}),s.jsx(Er,{})]})})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(Ds,{children:[s.jsx(Os,{children:"Start Location"}),s.jsx(Vs,{children:s.jsx($e,{ref:C,placeholder:"Type to search for a location",value:y,onChange:H=>x(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.preventDefault()},className:"w-full",autoComplete:"off"})})]}),s.jsxs(Ds,{children:[s.jsx(Os,{children:"End Location"}),s.jsx(Vs,{children:s.jsx($e,{ref:$,placeholder:"Type to search for a location",value:j,onChange:H=>v(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.preventDefault()},className:"w-full",autoComplete:"off"})})]})]}),w&&s.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[s.jsx(Wl,{className:"h-4 w-4 animate-spin text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"Automatically calculating route distance and duration..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Js,{control:Lt.control,name:"total_distance",render:({field:H})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Total Distance (km)"}),s.jsx(Vs,{children:s.jsxs("div",{className:"relative",children:[s.jsx($e,{type:"number",step:"0.01",min:"0",value:k??H.value,onChange:Ie=>{const Je=parseFloat(Ie.target.value);P(Je),H.onChange(Je)},disabled:w}),w&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground",children:"Calculating..."})]})}),s.jsx(Er,{})]})}),s.jsx(Js,{control:Lt.control,name:"estimated_duration",render:({field:H})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Estimated Duration (HH:MM:SS)"}),s.jsx(Vs,{children:s.jsxs("div",{className:"relative",children:[s.jsx($e,{type:"text",value:E??H.value,onChange:Ie=>{I(Ie.target.value),H.onChange(Ie.target.value)},disabled:w,placeholder:"00:00:00",pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"}),w&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground",children:"Calculating..."})]})}),s.jsx(Er,{})]})})]}),s.jsx(Js,{control:Lt.control,name:"is_active",render:({field:H})=>s.jsxs(Ds,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsx("div",{className:"space-y-0.5",children:s.jsx(Os,{children:"Active Status"})}),s.jsx(Vs,{children:s.jsx(Zs,{checked:H.value,onCheckedChange:H.onChange})})]})}),s.jsx(Js,{control:Lt.control,name:"schedule_days",render:()=>s.jsxs(Ds,{children:[s.jsx("div",{className:"mb-4",children:s.jsx(Os,{children:"Schedule Days"})}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(H=>s.jsx(Js,{control:Lt.control,name:"schedule_days",render:({field:Ie})=>{var Je;return s.jsxs(Ds,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(Vs,{children:s.jsx(ud,{checked:(Je=Ie.value)==null?void 0:Je.includes(H),onCheckedChange:wt=>{var St;return wt?Ie.onChange([...Ie.value,H]):Ie.onChange((St=Ie.value)==null?void 0:St.filter(qt=>qt!==H))}})}),s.jsx(Os,{className:"font-normal capitalize",children:H})]},H)}},H))}),s.jsx(Er,{})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ue,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Create Route"})})]})})]})]})]})]}),s.jsx("div",{className:"p-4 border-b border-border",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx($e,{placeholder:"Search routes by name or schedule days...",value:M,onChange:H=>re(H.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ld,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs(es,{value:te,onValueChange:O,children:[s.jsx(Zt,{className:"w-[180px]",children:s.jsx(ts,{placeholder:"Filter by status"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Routes"}),s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"inactive",children:"Inactive"})]})]}),s.jsx(zu,{data:{headers:["Route Name","Driver","Start Location","End Location","Distance (km)","Duration","Schedule Days","Status","Traffic Factor"],data:us.map(H=>{var Ie,Je,wt,St,qt;return{route_name:H.name||"",driver:Te!=null&&Te.find(os=>os.id===H.driver)?`${((Ie=Te.find(os=>os.id===H.driver))==null?void 0:Ie.user_details.first_name)||""} ${((Je=Te.find(os=>os.id===H.driver))==null?void 0:Je.user_details.last_name)||""}`:"Not Assigned",start_location:`${H.start_lat}, ${H.start_lng}`,end_location:`${H.end_lat}, ${H.end_lng}`,distance:((wt=H.total_distance)==null?void 0:wt.toString())||"",duration:H.estimated_duration||"",schedule_days:((St=H.schedule_days)==null?void 0:St.join(", "))||"",status:H.is_active?"Active":"Inactive",traffic_factor:((qt=H.traffic_factor)==null?void 0:qt.toString())||""}}),fileName:"routes_export",title:"Routes Directory"},className:"border-border hover:bg-muted px-3 py-2"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-muted to-muted/80 border-b border-border",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Route Name"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Driver"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Distance"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Schedule"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Route Stops"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:r?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#f7c624]"}),s.jsx("span",{className:"text-muted-foreground font-medium",children:"Loading routes..."})]})})}):(t==null?void 0:t.length)===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:s.jsx(U0,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground font-medium",children:r?"Loading routes...":"No routes found"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:r?"Please wait while we fetch your routes":"Create your first route to get started"}),!r&&s.jsxs(ue,{onClick:Oa,variant:"outline",size:"sm",className:"mt-2",children:[s.jsx(Wl,{className:"w-4 h-4 mr-2"}),"Refresh Data"]})]})]})})}):Ir.map((H,Ie)=>{var Je,wt,St,qt,os,Qs,nr,yr,Gi;return H?s.jsxs("tr",{className:`hover:bg-muted transition-colors duration-200 ${Ie%2===0?"bg-card":"bg-muted/50"}`,children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-[#f7c624] rounded-full mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-foreground",children:H.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",H.id]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:((wt=(Je=Te==null?void 0:Te.find($n=>$n.id===H.driver))==null?void 0:Je.user_details.first_name)==null?void 0:wt.charAt(0))||"?"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-foreground",children:[((St=Te==null?void 0:Te.find($n=>$n.id===H.driver))==null?void 0:St.user_details.first_name)||"Not Assigned"," ",((qt=Te==null?void 0:Te.find($n=>$n.id===H.driver))==null?void 0:qt.user_details.last_name)||""]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:((os=Te==null?void 0:Te.find($n=>$n.id===H.driver))==null?void 0:os.license_number)||"No license"})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-xs font-medium text-purple-600",children:((Qs=H.total_distance)==null?void 0:Qs.toString().charAt(0))||"0"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-foreground",children:[H.total_distance," km"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:H.estimated_duration})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[(yr=W.has(H.id)?H.schedule_days:(nr=H.schedule_days)==null?void 0:nr.slice(0,3))==null?void 0:yr.map($n=>s.jsx(De,{variant:"outline",className:"text-xs px-2 py-1 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/20",children:$n.slice(0,3)},$n)),((Gi=H.schedule_days)==null?void 0:Gi.length)>3&&s.jsx(De,{variant:"outline",className:"text-xs px-2 py-1 bg-muted text-muted-foreground border-border cursor-pointer hover:bg-muted/80 transition-colors",onClick:()=>dc(H.id),children:W.has(H.id)?`-${H.schedule_days.length-3}`:`+${H.schedule_days.length-3}`})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>Vt(H),className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:[s.jsx(Nr,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"View Stops"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(De,{variant:H.is_active?"default":"secondary",className:`${H.is_active?"bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/20":"bg-muted text-muted-foreground border-border"} font-medium`,children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H.is_active?"bg-[#f7c624]":"bg-muted-foreground"}`}),s.jsx("span",{children:H.is_active?"Active":"Inactive"})]})})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-muted rounded-full",children:s.jsx(So,{className:"h-4 w-4 text-muted-foreground"})})}),s.jsxs(Dn,{align:"end",className:"w-48",children:[s.jsxs(Ut,{onClick:()=>Sn(H),className:"cursor-pointer",children:[s.jsx(qr,{className:"h-4 w-4 mr-2 text-blue-600 dark:text-blue-400"}),s.jsx("span",{children:"View Details"})]}),s.jsxs(Ut,{onClick:()=>Pe(H),className:"cursor-pointer",children:[s.jsx(jn,{className:"h-4 w-4 mr-2 text-[#f7c624]"}),s.jsx("span",{children:"Edit Route"})]}),s.jsxs(Ut,{onClick:()=>kt(H),className:"cursor-pointer",children:[s.jsx(Nr,{className:"h-4 w-4 mr-2 text-[#f7c624]"}),s.jsx("span",{children:"Add Route Stop"})]}),s.jsxs(Ut,{onClick:()=>ot(H),className:"cursor-pointer text-red-600 focus:text-red-600",children:[s.jsx(Ea,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"Delete Route"})]})]})]})})]},H.id):null})})]})}),s.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-border",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",Ms+1,"-",Math.min(Mr,us.length)," of"," ",us.length," routes",M&&` matching "${M}"`,te!=="all"&&` (${te})`]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>le(ce-1),disabled:ce===1,children:[s.jsx(od,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:hs},(H,Ie)=>Ie+1).map(H=>s.jsx(ue,{variant:ce===H?"default":"outline",size:"sm",onClick:()=>le(H),className:"w-8 h-8 p-0",children:H},H))}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>le(ce+1),disabled:ce===hs,children:["Next",s.jsx(Hl,{className:"h-4 w-4"})]})]})]})]})})}),s.jsx(js,{open:Ge,onOpenChange:ut,children:s.jsxs(xs,{className:"max-w-2xl",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Route Details"})}),_e&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Route Name"}),s.jsx("p",{children:_e.name})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Status"}),s.jsx(De,{variant:_e.is_active?"default":"secondary",children:_e.is_active?"Active":"Inactive"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Driver"}),s.jsxs("p",{children:[(Ro=Te==null?void 0:Te.find(H=>H.id===_e.driver))==null?void 0:Ro.user_details.first_name," ",(Ni=Te==null?void 0:Te.find(H=>H.id===_e.driver))==null?void 0:Ni.user_details.last_name]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Total Distance"}),s.jsxs("p",{children:[_e.total_distance," km"]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Estimated Duration"}),s.jsx("p",{children:_e.estimated_duration})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Traffic Factor"}),s.jsxs("p",{children:[_e.traffic_factor,"x"]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Schedule Days"}),s.jsx("div",{className:"flex gap-1 mt-1",children:_e.schedule_days.map(H=>s.jsx(De,{variant:"outline",className:"capitalize",children:H},H))})]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Coordinates"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx(de,{className:"text-sm text-gray-600",children:"Start Point"}),s.jsxs("p",{className:"text-sm",children:["Lat: ",_e.start_lat,", Lng:"," ",_e.start_lng]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm text-gray-600",children:"End Point"}),s.jsxs("p",{className:"text-sm",children:["Lat: ",_e.end_lat,", Lng: ",_e.end_lng]})]})]})]})]})]})}),s.jsx(js,{open:Le,onOpenChange:H=>{K(H),H||(Be(null),Lt.reset(),x(""),v(""),P(null),I(null),N(!1),zt(""))},children:s.jsxs(xs,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Edit Route"})}),s.jsx(_p,{...Lt,children:s.jsxs("form",{onSubmit:Lt.handleSubmit(Jr),className:"space-y-4",children:[s.jsx(Js,{control:Lt.control,name:"name",render:({field:H})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Route Name"}),s.jsx(Vs,{children:s.jsx($e,{placeholder:"Enter route name",...H})}),s.jsx(Er,{})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(Ds,{children:[s.jsx(Os,{children:"Start Location"}),s.jsx(Vs,{children:s.jsx($e,{ref:C,placeholder:"Type to search for a location",value:y,onChange:H=>x(H.target.value),className:"w-full",autoComplete:"off"})})]}),s.jsxs(Ds,{children:[s.jsx(Os,{children:"End Location"}),s.jsx(Vs,{children:s.jsx($e,{ref:$,placeholder:"Type to search for a location",value:j,onChange:H=>v(H.target.value),className:"w-full",autoComplete:"off"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Js,{control:Lt.control,name:"total_distance",render:({field:H})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Total Distance (km)"}),s.jsx(Vs,{children:s.jsxs("div",{className:"relative",children:[s.jsx($e,{type:"number",step:"0.01",min:"0",value:k??H.value,onChange:Ie=>{const Je=parseFloat(Ie.target.value);P(Je),H.onChange(Je)},disabled:w}),w&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),s.jsx(Er,{})]})}),s.jsx(Js,{control:Lt.control,name:"estimated_duration",render:({field:H})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Estimated Duration (HH:MM:SS)"}),s.jsx(Vs,{children:s.jsxs("div",{className:"relative",children:[s.jsx($e,{type:"text",value:E??H.value,onChange:Ie=>{I(Ie.target.value),H.onChange(Ie.target.value)},disabled:w,placeholder:"00:00:00",pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"}),w&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),s.jsx(Er,{})]})})]}),s.jsx(Js,{control:Lt.control,name:"is_active",render:({field:H})=>s.jsxs(Ds,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsx("div",{className:"space-y-0.5",children:s.jsx(Os,{children:"Active Status"})}),s.jsx(Vs,{children:s.jsx(Zs,{checked:H.value,onCheckedChange:H.onChange})})]})}),s.jsx(Js,{control:Lt.control,name:"schedule_days",render:()=>s.jsxs(Ds,{children:[s.jsx("div",{className:"mb-4",children:s.jsx(Os,{children:"Schedule Days"})}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(H=>s.jsx(Js,{control:Lt.control,name:"schedule_days",render:({field:Ie})=>{var Je;return s.jsxs(Ds,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(Vs,{children:s.jsx(ud,{checked:(Je=Ie.value)==null?void 0:Je.includes(H),onCheckedChange:wt=>{var St;return wt?Ie.onChange([...Ie.value,H]):Ie.onChange((St=Ie.value)==null?void 0:St.filter(qt=>qt!==H))}})}),s.jsx(Os,{className:"font-normal capitalize",children:H})]},H)}},H))}),s.jsx(Er,{})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{className:"text-base font-semibold",children:"Route Stops"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add intermediate stops for this route"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Add Stop"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($e,{ref:B,placeholder:"Search for a location to add as a stop...",value:X,onChange:H=>D(H.target.value),onKeyDown:H=>{H.key==="Enter"&&(H.preventDefault(),H.stopPropagation())},className:"flex-1",autoComplete:"off"}),s.jsx(ue,{type:"button",variant:"outline",onClick:()=>{X.trim()&&new google.maps.Geocoder().geocode({address:X},(Ie,Je)=>{var wt,St;if(Je==="OK"&&(Ie!=null&&Ie[0])){const qt=((wt=Ie[0].geometry.location)==null?void 0:wt.lat())||0,os=((St=Ie[0].geometry.location)==null?void 0:St.lng())||0;ir(X,qt,os)}else h({title:"Error",description:"Could not find coordinates for this location",variant:"destructive"})})},disabled:!X.trim(),children:"Add"})]})]}),T.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(de,{children:["Added Stops (",T.length,")"]}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border rounded-lg p-3",children:T.map((H,Ie)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-blue-600",children:H.sequence})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:H.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[H.lat.toFixed(6),", ",H.lng.toFixed(6)]})]})]}),s.jsx(ue,{variant:"ghost",size:"sm",onClick:()=>$s(Ie),className:"text-red-500 hover:text-red-700",children:s.jsx(Ea,{className:"w-4 h-4"})})]},Ie))})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ue,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Update Route"})})]})})]})}),s.jsx(nc,{open:He,onOpenChange:xe,children:s.jsxs(ll,{children:[s.jsxs(cl,{children:[s.jsx(ul,{children:"Are you sure?"}),s.jsxs(hl,{children:["This action cannot be undone. This will permanently delete the route",_e&&` "${_e.name}"`,"."]})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Cancel"}),s.jsx(fl,{onClick:As,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),Y&&s.jsx(HR,{isOpen:ye,onClose:()=>{je(!1),Re(null),Y.id&&fs(Y.id)},routeId:Y.id,routeName:Y.name,currentSequenceNumber:1}),be&&s.jsx(OX,{isOpen:Qe,onClose:()=>{me(!1),fe(null)},routeId:be.id,routeName:be.name})]})}const zX=(e={})=>{const{toast:t}=mr();return{handleModalSubmit:async(i,o={})=>{const l={...e,...o};try{await i(),l.successMessage&&t({title:"Success",description:l.successMessage}),l.onSuccess&&l.onSuccess()}catch(c){let d=l.errorMessage||"An error occurred. Please try again.";if(c&&typeof c=="object"){const u=c;u.message?d=u.message:u.detail?d=u.detail:u.errors&&(typeof u.errors=="object"?d=Object.entries(u.errors).map(([p,f])=>`${p.replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase())}: ${Array.isArray(f)?f.join(", "):f}`).join("; "):d=String(u.errors))}else typeof c=="string"?d=c:c instanceof Error&&(d=c.message);t({title:"Error",description:d,variant:"destructive",duration:6e3}),l.onError&&l.onError(c)}},showValidationError:i=>{t({title:"Validation Error",description:i,variant:"destructive"})},showSuccessMessage:i=>{t({title:"Success",description:i})}}};function F3({isOpen:e,onClose:t,onSubmit:r,schoolId:n,editMode:a=!1,student:i=null}){var A,z;const o=lc(),{handleModalSubmit:l,showValidationError:c}=zX({onSuccess:t,successMessage:a?"Student updated successfully":"Student created successfully"}),{parents:d}=xa(M=>M.parents),{grades:u}=xa(M=>M.grades),{allRouteStops:h}=xa(M=>M.routes),p=localStorage.getItem("schoolId"),[f,y]=g.useState(0),[x,j]=g.useState(!1),[v,w]=g.useState(!1),[N,k]=g.useState(""),[P,E]=g.useState(!1),[I,T]=g.useState(!1),[R,X]=g.useState(!1),D=(d||[]).filter(M=>M.school===Number(n)),C=(u||[]).filter(M=>M.school===Number(n)),[$,B]=g.useState({first_name:"",middle_name:"",last_name:"",date_of_birth:"",school:Number(p)||0,parent:0,admission_number:"",grade:0,gender:"",section:"",medical_conditions:"",emergency_contacts:[{name:"",phone:""}],transport_enabled:!0,route_stops:[]});g.useEffect(()=>{if(a&&i){const M={first_name:i.first_name||"",middle_name:i.middle_name||"",last_name:i.last_name||"",date_of_birth:i.date_of_birth||"",school:i.school||Number(p)||0,parent:i.parent||0,admission_number:i.admission_number||"",grade:i.grade||0,gender:i.gender||"",section:i.section||"",medical_conditions:i.medical_conditions||"",emergency_contacts:i.emergency_contacts||[{name:"",phone:""}],transport_enabled:i.transport_enabled??!0,route_stops:i.route_stops||[]};B(M),y(i.parent||0)}else{const M={first_name:"",middle_name:"",last_name:"",date_of_birth:"",school:Number(p)||0,parent:0,admission_number:"",grade:0,gender:"",section:"",medical_conditions:"",emergency_contacts:[{name:"",phone:""}],transport_enabled:!0,route_stops:[]};B(M),y(0)}},[a,i,p]),g.useEffect(()=>{f>0&&B(M=>({...M,parent:f}))},[f]),g.useEffect(()=>{e&&n&&o(mp(n))},[e,n,o]);const Q=(h||[]).filter(M=>M.name.toLowerCase().includes(N.toLowerCase()));g.useEffect(()=>{},[$]);const oe=async M=>{if(M.preventDefault(),!$.first_name){c("First name is required");return}if(!$.admission_number){c("Admission number is required");return}if(!$.grade||$.grade===0){C.length===0?c("No grades are available for this school. Please add grades first in the Grades tab."):c("Please select a grade");return}if(!$.parent||$.parent===0){c("Please select a parent");return}if(!$.route_stops||$.route_stops.length===0){c("Please select a route stop");return}await l(async()=>{a&&(i!=null&&i.id)?await r({id:i.id,data:$}):await r($)})},ae=M=>{const{name:re,value:te}=M.target;B(O=>({...O,[re]:te}))},U=(M,re)=>{const te=M==="grade"||M==="parent"?Number(re):re;B(O=>({...O,[M]:te}))},Z=(M,re,te)=>{B(O=>{const ce=[...O.emergency_contacts];return ce[M]={...ce[M],[re]:te},{...O,emergency_contacts:ce}})},W=()=>{B(M=>({...M,emergency_contacts:[...M.emergency_contacts,{name:"",phone:""}]}))},ve=M=>{B(re=>({...re,emergency_contacts:re.emergency_contacts.filter((te,O)=>O!==M)}))};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:a?"Edit Student":"Add New Student"})}),s.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"first_name",children:"First Name"}),s.jsx($e,{id:"first_name",name:"first_name",value:$.first_name,onChange:ae,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"middle_name",children:"Middle Name (Optional)"}),s.jsx($e,{id:"middle_name",name:"middle_name",value:$.middle_name,onChange:ae})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"last_name",children:"Last Name (Optional)"}),s.jsx($e,{id:"last_name",name:"last_name",value:$.last_name,onChange:ae})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"date_of_birth",children:"Date of Birth"}),s.jsx($e,{id:"date_of_birth",name:"date_of_birth",type:"date",value:$.date_of_birth,onChange:ae,max:new Date(new Date().setFullYear(new Date().getFullYear()-2)).toISOString().split("T")[0],required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"admission_number",children:"Admission Number"}),s.jsx($e,{id:"admission_number",name:"admission_number",value:$.admission_number,onChange:ae,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"parent",children:"Parent"}),s.jsxs(Ko,{open:x,onOpenChange:j,children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox","aria-expanded":x,className:"w-full justify-between",children:[$.parent?((A=D.find(M=>M.id===$.parent))==null?void 0:A.user_full_name)||"Unknown Parent":"Select parent...",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-[calc(100%-3rem)] p-0",align:"start",side:"bottom",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search parent..."}),s.jsxs(xo,{children:[s.jsx(go,{children:"No parent found."}),s.jsx(vo,{children:D.map(M=>{var re,te;return s.jsxs(hi,{value:`${M.user_full_name||"Unknown Parent"} ${M.user_phone_number||M.phone_number||((re=M.user_data)==null?void 0:re.phone_number)||""}`,onSelect:()=>{y(M.id),U("parent",M.id.toString()),j(!1)},children:[s.jsx(Or,{className:nt("mr-2 h-4 w-4",$.parent===M.id?"opacity-100":"opacity-0")}),M.user_full_name||"Unknown Parent"," -"," ",M.user_phone_number||M.phone_number||((te=M.user_data)==null?void 0:te.phone_number)||"No phone"]},M.id)})})]})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"grade",children:"Grade"}),s.jsxs(Ko,{open:P,onOpenChange:E,children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox","aria-expanded":P,className:"w-full justify-between",disabled:C.length===0,children:[$.grade?(()=>{const M=C.find(re=>re.id===$.grade);return M?`${M.name} - ${M.level}`:"Select grade"})():C.length>0?"Select grade":"No grades available",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-[calc(100%-3rem)] p-0",align:"start",side:"bottom",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search grades..."}),s.jsxs(xo,{children:[s.jsx(go,{children:C.length===0?"No grades available for this school":"No grade found."}),s.jsx(vo,{children:C.map(M=>s.jsxs(hi,{value:`${M.name} ${M.level}`,onSelect:()=>{var re;U("grade",((re=M.id)==null?void 0:re.toString())||""),E(!1)},children:[s.jsx(Or,{className:nt("mr-2 h-4 w-4",$.grade===M.id?"opacity-100":"opacity-0")}),M.name," - ",M.level]},M.id))})]})]})})]}),C.length===0&&s.jsx("p",{className:"text-sm text-amber-600 bg-amber-50 px-3 py-2 rounded-md",children:" No grades have been created for this school yet. Please add grades first in the Grades tab."})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"section",children:"Section"}),s.jsxs(Ko,{open:I,onOpenChange:T,children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox","aria-expanded":I,className:"w-full justify-between",children:[$.section?`Section ${$.section}`:"Select section",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-[calc(100%-3rem)] p-0",align:"start",side:"bottom",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search sections..."}),s.jsxs(xo,{children:[s.jsx(go,{children:"No section found."}),s.jsx(vo,{children:["A","B","C","D"].map(M=>s.jsxs(hi,{value:`Section ${M}`,onSelect:()=>{U("section",M),T(!1)},children:[s.jsx(Or,{className:nt("mr-2 h-4 w-4",$.section===M?"opacity-100":"opacity-0")}),"Section ",M]},M))})]})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"gender",children:"Gender"}),s.jsxs(Ko,{open:R,onOpenChange:X,children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox","aria-expanded":R,className:"w-full justify-between",children:[$.gender?$.gender.charAt(0).toUpperCase()+$.gender.slice(1):"Select gender",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-[calc(100%-3rem)] p-0",align:"start",side:"bottom",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search gender..."}),s.jsxs(xo,{children:[s.jsx(go,{children:"No gender found."}),s.jsx(vo,{children:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}].map(M=>s.jsxs(hi,{value:M.label,onSelect:()=>{U("gender",M.value),X(!1)},children:[s.jsx(Or,{className:nt("mr-2 h-4 w-4",$.gender===M.value?"opacity-100":"opacity-0")}),M.label]},M.value))})]})]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"route_stops",children:"Route Stop *"}),s.jsxs(Ko,{open:v,onOpenChange:w,children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox","aria-expanded":v,className:"w-full justify-between",children:[$.route_stops&&$.route_stops.length>0?((z=Q.find(M=>M.id===$.route_stops[0]))==null?void 0:z.name)||"Unknown Stop":"Select route stop...",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-full p-0",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search route stops...",value:N,onValueChange:k}),s.jsxs(xo,{children:[s.jsx(go,{children:"No route stop found."}),s.jsx(vo,{children:Q.map(M=>s.jsxs(hi,{value:`${M.name} - Route ${M.route}`,onSelect:()=>{B(re=>({...re,route_stops:[M.id||0]})),w(!1)},children:[s.jsx(Or,{className:nt("mr-2 h-4 w-4",$.route_stops.includes(M.id||0)?"opacity-100":"opacity-0")}),s.jsx(Nr,{className:"mr-2 h-4 w-4"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:M.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Route ",M.route,"  ",M.is_pickup&&M.is_dropoff?"Pickup & Dropoff":M.is_pickup?"Pickup":"Dropoff"]})]})]},M.id))})]})]})})]}),h.length===0&&s.jsx("p",{className:"text-sm text-amber-600 bg-amber-50 px-3 py-2 rounded-md",children:" No route stops are available for this school yet. Please add routes and route stops first."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"medical_conditions",children:"Medical Conditions (Optional)"}),s.jsx($e,{id:"medical_conditions",name:"medical_conditions",value:$.medical_conditions,onChange:ae,placeholder:"Enter any medical conditions or leave blank"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"transport_enabled",children:"Transport Status (Optional)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"transport_enabled",name:"transport_enabled",checked:$.transport_enabled,onChange:M=>B(re=>({...re,transport_enabled:M.target.checked})),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),s.jsx(de,{htmlFor:"transport_enabled",className:"text-sm",children:"Enable transport for this student"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Emergency Contacts"}),$.emergency_contacts.map((M,re)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx($e,{placeholder:"Contact Name",value:M.name,onChange:te=>Z(re,"name",te.target.value)}),s.jsx($e,{placeholder:"Phone Number",value:M.phone,onChange:te=>Z(re,"phone",te.target.value)}),re>0&&s.jsx(ue,{type:"button",variant:"destructive",onClick:()=>ve(re),children:"Remove"})]},re)),s.jsx(ue,{type:"button",variant:"outline",onClick:W,className:"mt-2",children:"Add Emergency Contact"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ue,{type:"submit",children:a?"Update Student":"Create Student"})]})]})]})})}function UX({isOpen:e,onClose:t,student:r}){const{grades:n}=xa(o=>o.grades);if(!r||!r.id)return null;const a=o=>{if(!o)return"N/A";const l=n.find(c=>c.id===Number(o));return l?l.name:`Grade ${o}`},i=o=>{try{if(!o)return"N/A";const l=new Date(o);return isNaN(l.getTime())?"Invalid Date":l.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid Date"}};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(Ja,{className:"h-5 w-5"}),"Student Details"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsx(tt,{className:"text-lg",children:"Basic Information"})}),s.jsx(Ue,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),s.jsxs("p",{className:"text-lg font-semibold",children:[r.first_name||""," ",r.middle_name||""," ",r.last_name||""]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Admission Number"}),s.jsx("p",{className:"text-lg font-semibold",children:r.admission_number||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(pa,{className:"h-4 w-4 text-gray-400"}),r.date_of_birth?i(r.date_of_birth):"N/A"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Gender"}),s.jsx("p",{className:"capitalize",children:r.gender||"N/A"})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"text-lg flex items-center gap-2",children:[s.jsx(Fq,{className:"h-5 w-5"}),"Academic Information"]})}),s.jsx(Ue,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Grade"}),s.jsx("p",{className:"text-lg font-semibold",children:a(r.grade)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Section"}),s.jsx("p",{className:"text-lg font-semibold",children:r.section||"N/A"})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsx(tt,{className:"text-lg",children:"Transport Status"})}),s.jsx(Ue,{children:s.jsx(De,{variant:r.transport_enabled?"default":"secondary",className:r.transport_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:r.transport_enabled?"Active":"Inactive"})})]}),r.medical_conditions&&r.medical_conditions.trim()&&s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"text-lg flex items-center gap-2",children:[s.jsx(_q,{className:"h-5 w-5"}),"Medical Information"]})}),s.jsx(Ue,{children:s.jsx("p",{className:"text-gray-700",children:r.medical_conditions})})]}),r.emergency_contacts&&r.emergency_contacts.length>0&&s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"text-lg flex items-center gap-2",children:[s.jsx(Za,{className:"h-5 w-5"}),"Emergency Contacts"]})}),s.jsx(Ue,{children:s.jsx("div",{className:"space-y-3",children:r.emergency_contacts.map((o,l)=>s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),s.jsx("p",{className:"font-medium",children:o.name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),s.jsx("p",{className:"font-medium",children:o.phone||"N/A"})]})]})},l))})})]})]}),s.jsx("div",{className:"flex justify-end gap-2 pt-4",children:s.jsx(ue,{variant:"outline",onClick:t,children:"Close"})})]})})}function D3({isOpen:e,onClose:t,onSubmit:r,schoolId:n,editMode:a=!1,grade:i}){const{toast:o}=mr(),[l,c]=g.useState({name:"",level:"",school:n||0,description:"",capacity:30}),[d,u]=g.useState({});g.useEffect(()=>{c(a&&i?{name:i.name||"",level:i.level||"",school:i.school||n||0,description:i.description||"",capacity:i.capacity||30}:{name:"",level:"",school:n||0,description:"",capacity:30}),u({})},[a,i,n,e]);const h=()=>{const y={};return l.name.trim()||(y.name="Grade name is required"),l.level||(y.level="Level is required"),l.description.trim()||(y.description="Description is required"),l.capacity<=0&&(y.capacity="Capacity must be greater than 0"),u(y),Object.keys(y).length===0},p=async y=>{if(y.preventDefault(),!h()){const x=Object.values(d).find(j=>j);x&&o({title:"Validation Error",description:x,variant:"destructive"});return}try{await r(l),o({title:"Success",description:a?"Grade updated successfully":"Grade created successfully"}),t()}catch(x){console.error("Grade submission error:",x)}},f=(y,x)=>{c(j=>({...j,[y]:x})),d[y]&&u(j=>({...j,[y]:""}))};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"sm:max-w-[500px]",children:[s.jsx(gs,{children:s.jsx(vs,{children:a?"Edit Grade":"Add New Grade"})}),s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"name",children:"Grade Name *"}),s.jsx($e,{id:"name",placeholder:"e.g., Grade 1A",value:l.name,onChange:y=>f("name",y.target.value),className:d.name?"border-red-500":""}),d.name&&s.jsx("p",{className:"text-sm text-red-500",children:d.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"level",children:"Level *"}),s.jsxs(es,{value:l.level,onValueChange:y=>f("level",y),children:[s.jsx(Zt,{className:d.level?"border-red-500":"",children:s.jsx(ts,{placeholder:"Select level"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"Primary",children:"Primary"}),s.jsx(Ve,{value:"Secondary",children:"Secondary"}),s.jsx(Ve,{value:"High School",children:"High School"}),s.jsx(Ve,{value:"College",children:"College"})]})]}),d.level&&s.jsx("p",{className:"text-sm text-red-500",children:d.level})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"description",children:"Description *"}),s.jsx(Kn,{id:"description",placeholder:"Describe the grade level...",value:l.description,onChange:y=>f("description",y.target.value),className:d.description?"border-red-500":"",rows:3}),d.description&&s.jsx("p",{className:"text-sm text-red-500",children:d.description})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"capacity",children:"Class Capacity *"}),s.jsx($e,{id:"capacity",type:"number",min:"1",max:"100",placeholder:"30",value:l.capacity,onChange:y=>f("capacity",parseInt(y.target.value)||0),className:d.capacity?"border-red-500":""}),d.capacity&&s.jsx("p",{className:"text-sm text-red-500",children:d.capacity})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ue,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:a?"Update Grade":"Create Grade"})]})]})]})})}var Vb="Tabs",[qX,mre]=Fa(Vb,[Pb]),WR=Pb(),[VX,MS]=qX(Vb),GR=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Ab(l),[h,p]=Co({prop:n,onChange:a,defaultProp:i??"",caller:Vb});return s.jsx(VX,{scope:r,baseId:Fn(),value:h,onValueChange:p,orientation:o,dir:u,activationMode:c,children:s.jsx(Bt.div,{dir:u,"data-orientation":o,...d,ref:t})})});GR.displayName=Vb;var KR="TabsList",YR=g.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=MS(KR,r),o=WR(r);return s.jsx(Y8,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Bt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});YR.displayName=KR;var JR="TabsTrigger",ZR=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=MS(JR,r),l=WR(r),c=e7(o.baseId,n),d=t7(o.baseId,n),u=n===o.value;return s.jsx(J8,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(Bt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:bt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:bt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:bt(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(n)})})})});ZR.displayName=JR;var XR="TabsContent",QR=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=MS(XR,r),c=e7(l.baseId,n),d=t7(l.baseId,n),u=n===l.value,h=g.useRef(u);return g.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(Qa,{present:a||u,children:({present:p})=>s.jsx(Bt.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});QR.displayName=XR;function e7(e,t){return`${e}-trigger-${t}`}function t7(e,t){return`${e}-content-${t}`}var HX=GR,s7=YR,r7=ZR,n7=QR;const a7=HX,$S=g.forwardRef(({className:e,...t},r)=>s.jsx(s7,{ref:r,className:nt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));$S.displayName=s7.displayName;const au=g.forwardRef(({className:e,...t},r)=>s.jsx(r7,{ref:r,className:nt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));au.displayName=r7.displayName;const iu=g.forwardRef(({className:e,...t},r)=>s.jsx(n7,{ref:r,className:nt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));iu.displayName=n7.displayName;var BS="Progress",zS=100,[WX,pre]=Fa(BS),[GX,KX]=WX(BS),i7=g.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=YX,...o}=e;(a||a===0)&&!O3(a)&&console.error(JX(`${a}`,"Progress"));const l=O3(a)?a:zS;n!==null&&!M3(n,l)&&console.error(ZX(`${n}`,"Progress"));const c=M3(n,l)?n:null,d=dy(c)?i(c,l):void 0;return s.jsx(GX,{scope:r,value:c,max:l,children:s.jsx(Bt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":dy(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":c7(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});i7.displayName=BS;var o7="ProgressIndicator",l7=g.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=KX(o7,r);return s.jsx(Bt.div,{"data-state":c7(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});l7.displayName=o7;function YX(e,t){return`${Math.round(e/t*100)}%`}function c7(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function dy(e){return typeof e=="number"}function O3(e){return dy(e)&&!isNaN(e)&&e>0}function M3(e,t){return dy(e)&&!isNaN(e)&&e<=t&&e>=0}function JX(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${zS}\`.`}function ZX(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${zS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var d7=i7,XX=l7;const eN=g.forwardRef(({className:e,value:t,...r},n)=>s.jsx(d7,{ref:n,className:nt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(XX,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));eN.displayName=d7.displayName;const Px=async(e,t)=>{var r;try{const n=aQ(),a=new FormData;a.append("file",e),a.append("upload_type",t);let i=localStorage.getItem("schoolId");if(!i){const d=localStorage.getItem("persist:auth");if(d)try{const u=JSON.parse(d),h=JSON.parse(u.user||"{}");i=h.school_id||h.school}catch{}}i&&a.append("school_id",i);let o=localStorage.getItem("token");if(!o){const d=localStorage.getItem("persist:auth");if(d)try{const u=JSON.parse(d);o=JSON.parse(u.user||"{}").token}catch{}}o&&(o.startsWith('"')&&o.endsWith('"')&&(o=JSON.parse(o)),Tt.defaults.headers.common.Authorization=`Bearer ${o}`);const l={headers:{...o?{Authorization:`Bearer ${o}`}:{},"Content-Type":"multipart/form-data"}},c=await Tt.post(Dt.CSV_UPLOAD,a,l);return{success:!0,message:c.data.message,created_count:c.data.created_count,skipped_count:c.data.skipped_count,errors:c.data.errors||[],created_users:c.data.created_users||[]}}catch(n){return(r=n.response)!=null&&r.data?{success:!1,message:n.response.data.message||n.response.data.detail||"Upload failed",created_count:0,skipped_count:0,errors:n.response.data.errors||[],created_users:[]}:{success:!1,message:n.message||"Upload failed",created_count:0,skipped_count:0,errors:[],created_users:[]}}},QX=()=>{const e=["first_name","school_id","last_name","phone_number","email","address","emergency_contact","secondary_phone","preferred_contact_method","authorized_pickup_persons"];let t=localStorage.getItem("schoolId");if(!t){const a=localStorage.getItem("persist:auth");if(a)try{const i=JSON.parse(a),o=JSON.parse(i.user||"{}");t=o.school_id||o.school}catch{}}const r=["John",t||"2","Doe","+254712345678","john.doe@email.com","123 Main St, Nairobi","Jane Doe (+254723456789)","+254734567890","phone","Jane Doe (Spouse, +254723456789); Mike Smith (Friend, +254745678901)"];return[e.join(","),r.join(","),`Mary,${t||"2"},Smith,+254723456789,mary.smith@email.com,456 Oak Ave,Tom Smith (+254734567890),+254745678901,email,Tom Smith (Spouse, +254734567890)`].join(`
`)},eQ=()=>{const e=["first_name","school_id","last_name","phone_number","email","license_number","license_expiry","license_class","is_assistant_driver","last_health_check","last_background_check"];let t=localStorage.getItem("schoolId");if(!t){const a=localStorage.getItem("persist:auth");if(a)try{const i=JSON.parse(a),o=JSON.parse(i.user||"{}");t=o.school_id||o.school}catch{}}const r=["Peter",t||"2","Gachau","+254712345678","peter.gachau@email.com","DL123456789","2025-12-31","B","false","2024-01-15","2024-01-10"];return[e.join(","),r.join(","),`Jane,${t||"2"},Mwangi,+254723456789,jane.mwangi@email.com,DL987654321,2025-06-30,A,true,2024-01-20,2024-01-15`].join(`
`)},tQ=()=>{const e=["first_name","middle_name","last_name","admission_number","school_id","grade","section","gender","date_of_birth","parent_name","parent_phone"];let t=localStorage.getItem("schoolId");if(!t){const i=localStorage.getItem("persist:auth");if(i)try{const o=JSON.parse(i),l=JSON.parse(o.user||"{}");t=l.school_id||l.school}catch{}}const r=["John","Michael","Doe","STU001",t||"2","Grade 1","A","male","2015-05-15","Jane Doe","+254712345678"],n=["Peter","","Johnson","STU002",t||"2","Grade 1","A","male","2015-03-10","Sarah Johnson","+254734567890"];return[e.join(","),r.join(","),n.join(",")].join(`
`)},sQ=()=>{const e=["registration_number","school_id","vehicle_type","capacity","model","year","fuel_type","manufacturer","is_active","has_gps","has_camera","has_emergency_button","driver_phone_number"];let t=localStorage.getItem("schoolId");if(!t){const a=localStorage.getItem("persist:auth");if(a)try{const i=JSON.parse(a),o=JSON.parse(i.user||"{}");t=o.school_id||o.school}catch{}}const r=["KAA-123B",t||"2","bus","50","Coaster","2020","diesel","Toyota","true","true","true","true","+254757198002"];return[e.join(","),r.join(","),`KBB-456C,${t||"2"},van,14,Caravan,2019,petrol,Nissan,true,true,true,true,+254757198002`,`KCC-789D,${t||"2"},bus,40,NQR,2021,diesel,Isuzu,true,true,true,true,+254757198002`].join(`
`)},rQ=()=>{const e=["first_name","middle_name","last_name","employee_number","school_id","gender","mobile_number","email","status","role","can_manage_routes","can_manage_vehicles","can_manage_staff","can_manage_student_trips","is_on_duty"];let t=localStorage.getItem("schoolId");if(!t){const a=localStorage.getItem("persist:auth");if(a)try{const i=JSON.parse(a),o=JSON.parse(i.user||"{}");t=o.school_id||o.school}catch{}}const r=["John","Michael","Doe","EMP001",t||"2","male","+254712345678","john.doe@school.com","active","teacher","false","false","false","true","true"];return[e.join(","),r.join(","),`Mary,Ann,Smith,EMP002,${t||"2"},female,+254723456789,mary.smith@school.com,active,school_admin,true,true,true,true,true`,`Peter,,Johnson,EMP003,${t||"2"},male,+254734567890,peter.johnson@school.com,active,driver,true,true,false,false,true`].join(`
`)},nQ=e=>{let t="",r="";switch(e){case"parents":t=QX(),r="parents_template.csv";break;case"drivers":t=eQ(),r="drivers_template.csv";break;case"students":t=tQ(),r="students_template.csv";break;case"vehicles":t=sQ(),r="vehicles_template.csv";break;case"staffs":case"staff":t=rQ(),r="staff_template.csv";break;default:t=`first_name,last_name,phone_number
John,Doe,+254700000000`,r=`${e}_template.csv`}const n=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a)},aQ=()=>{const e=localStorage.getItem("schoolId"),t=localStorage.getItem("schoolName"),r=[];for(let n=0;n<localStorage.length;n++){const a=localStorage.key(n);a&&a.toLowerCase().includes("school")&&r.push({key:a,value:localStorage.getItem(a)})}return{id:e,name:t||void 0}},Ex=({isOpen:e,onClose:t,title:r,description:n,acceptedFileTypes:a,maxFileSize:i=10,maxFiles:o=5,onUpload:l,onPreview:c,templateDownloadUrl:d,templateFileName:u,validationSchema:h,previewColumns:p,uploadType:f})=>{const[y,x]=g.useState([]),[j,v]=g.useState(!1),[w,N]=g.useState(!1),[k,P]=g.useState([]),[E,I]=g.useState(!1),[T,R]=g.useState(0),[X,D]=g.useState({total:0,completed:0,failed:0,errors:[]}),[C,$]=g.useState(!1),[B,Q]=g.useState(new Set),oe=g.useRef(null),ae=me=>{me.preventDefault(),v(!0)},U=me=>{me.preventDefault(),v(!1)},Z=me=>{me.preventDefault(),v(!1);const be=Array.from(me.dataTransfer.files);ve(be)},W=me=>{const be=Array.from(me.target.files||[]);ve(be)},ve=async me=>{if(!C){$(!0);try{const be=me.filter(fe=>{const ke=fe.name.toLowerCase().substring(fe.name.lastIndexOf(".")),We=ke===".csv"||fe.type==="text/csv"||fe.type==="application/vnd.ms-excel"||fe.type==="application/csv"||fe.type==="text/plain";return a.some(lt=>lt.startsWith(".")?lt.toLowerCase()===".csv"&&We?!0:ke===lt.toLowerCase():fe.type===lt||We)?fe.size<=i*1024*1024?!0:(Hs({title:"File too large",description:`${fe.name} exceeds the maximum file size of ${i}MB.`,variant:"destructive"}),!1):(Hs({title:"Invalid file type",description:`${fe.name} is not a supported file type. Supported types: ${a.join(", ")}. File extension: ${ke}, MIME type: ${fe.type||"unknown"}`,variant:"destructive"}),!1)});if(be.length===0){$(!1);return}if(y.length+be.length>o){Hs({title:"Too many files",description:`You can only upload up to ${o} files at once.`,variant:"destructive"}),$(!1);return}for(const fe of be){const ke=Math.random().toString(36).substr(2,9),We={id:ke,name:fe.name,size:fe.size,type:fe.type,status:"uploading",progress:0,file:fe};x(Ze=>[...Ze,We]),await A(fe,ke)}}finally{$(!1)}}},A=async(me,be)=>{if(!B.has(be)){Q(fe=>new Set(fe).add(be));try{x(ke=>ke.map(We=>We.id===be?{...We,status:"processing"}:We)),x(ke=>ke.map(We=>We.id===be?{...We,progress:50}:We));let fe=[];if(me.type==="text/csv"?fe=await M(me):me.type.includes("pdf")?fe=await te(me):me.type.includes("word")||me.type.includes("document")?fe=await Le(me):me.type==="text/html"&&(fe=await He(me)),h){const ke=ge(fe,h);if(!ke.isValid)throw new Error(ke.errors.join(", "))}x(ke=>ke.map(We=>We.id===be?{...We,status:"completed",progress:100,preview:fe}:We)),Q(ke=>{const We=new Set(ke);return We.delete(be),We}),Hs({title:"File processed successfully",description:`${me.name} has been processed and is ready for upload.`})}catch(fe){x(ke=>ke.map(We=>We.id===be?{...We,status:"error",error:fe.message}:We)),Q(ke=>{const We=new Set(ke);return We.delete(be),We}),Hs({title:"Processing failed",description:`Failed to process ${me.name}: ${fe.message}`,variant:"destructive"})}}},z=me=>{const be=[];return!me||me.length===0?(be.push("No data found in file"),{isValid:!1,errors:be}):f==="vehicles"||f==="staffs"||f==="staff"?{isValid:!0,errors:[]}:(me.forEach((fe,ke)=>{const We=ke+1,Ze=fe.name||fe.Name||fe["Full Name"]||fe.full_name||fe.Full_Name||fe.Parent||fe.parent||fe["Parent Name"]||fe.parent_name||fe.Parent_Name||fe.first_name||fe["First Name"]||fe.First_Name||fe.firstName||fe.FullName||fe.Full_Name||fe.ParentName||fe.Parent_Name,xt=fe.phone_number||fe["Phone Number"]||fe.Phone_Number||fe.phone_number||fe.phone||fe.Phone||fe.phone||fe.mobile||fe.Mobile||fe.mobile||fe["Mobile Number"]||fe.mobile_number||fe.Mobile_Number||fe.phoneNumber||fe.contact||fe.Contact||fe.contact||fe.tel||fe.Tel||fe.tel||fe.PhoneNumber||fe.Phone_Number||fe.MobileNumber||fe.Mobile_Number||fe.ContactNumber||fe.Contact_Number||Object.values(fe).find(Nt=>!Nt||typeof Nt!="string"?!1:/^(\+?254|0)?[17]\d{8}$/.test(Nt.replace(/\s+/g,""))),lt=fe.date_of_birth||fe["Date of Birth"]||fe.Date_of_Birth||fe.date_of_birth||fe.dateOfBirth||fe.DateOfBirth||fe.dob||fe.DOB||fe.dob;if(fe.license_number||fe["License Number"]||fe.License_Number||fe.licenseNumber||fe.LicenseNumber,fe.license_class||fe["License Class"]||fe.License_Class||fe.licenseClass||fe.LicenseClass,fe.license_expiry||fe["License Expiry"]||fe.License_Expiry||fe.licenseExpiry||fe.LicenseExpiry,fe.last_health_check||fe["Last Health Check"]||fe.Last_Health_Check||fe.lastHealthCheck||fe.LastHealthCheck,fe.last_background_check||fe["Last Background Check"]||fe.Last_Background_Check||fe.lastBackgroundCheck||fe.LastBackgroundCheck,Object.values(fe).some(Nt=>Nt&&String(Nt).trim())){if(f==="vehicles"){const Nt=fe.registration_number||fe["Registration Number"]||fe.Registration_Number||fe.registrationNumber||fe.RegistrationNumber;fe.vehicle_type||fe["Vehicle Type"]||fe.Vehicle_Type||fe.vehicleType||fe.VehicleType,fe.capacity||fe.Capacity||fe.capacity,Nt||be.push(`Row ${We}: Registration number is required`)}else if(f==="staffs"||f==="staff")fe.employee_number||fe["Employee Number"]||fe.Employee_Number||fe.employeeNumber,Ze||be.push(`Row ${We}: Name is required`),xt||be.push(`Row ${We}: Phone number is required`);else if(Ze||be.push(`Row ${We}: Name is required`),xt||be.push(`Row ${We}: Phone number is required`),f==="students")if(!lt)be.push(`Row ${We}: Date of birth is required for students (format: YYYY-MM-DD, e.g., 2015-05-15)`);else{const Nt=fe.date_of_birth||fe["Date of Birth"]||fe.Date_of_Birth||fe.dateOfBirth||fe.dob||fe.DOB;Nt&&(/^\d{4}-\d{2}-\d{2}$/.test(String(Nt).trim())||be.push(`Row ${We}: Date of birth must be in YYYY-MM-DD format (e.g., 2015-05-15)`))}}}),{isValid:be.length===0,errors:be})},M=async me=>new Promise((be,fe)=>{const ke=new FileReader;ke.onload=We=>{var Ze;try{const lt=((Ze=We.target)==null?void 0:Ze.result).split(`
`),ht=lt[0],Nt=re(ht).map(Kt=>Kt.trim()),Qt=lt.slice(1).map((Kt,Ns)=>{const Ts=re(Kt),Yt={};return Nt.forEach((Rs,Nn)=>{const vr=(Ts[Nn]||"").replace(/^["']|["']$/g,"").trim();Yt[Rs]=vr}),Yt}).filter(Kt=>Object.values(Kt).some(Ns=>Ns)),zt=z(Qt);if(!zt.isValid){fe(new Error(`File validation failed: ${zt.errors.join(", ")}`));return}be(Qt)}catch{fe(new Error("Failed to parse CSV file"))}},ke.onerror=()=>fe(new Error("Failed to read file")),ke.readAsText(me)}),re=me=>{const be=[];let fe="",ke=!1,We=0;for(;We<me.length;){const Ze=me[We];Ze==='"'?ke&&me[We+1]==='"'?(fe+='"',We+=2):(ke=!ke,We++):Ze===","&&!ke?(be.push(fe),fe="",We++):(fe+=Ze,We++)}return be.push(fe),be},te=async me=>new Promise((be,fe)=>{const ke=new FileReader;ke.onload=async We=>{var Ze;try{const xt=(Ze=We.target)==null?void 0:Ze.result,lt=await O(xt),ht=ce(lt),Nt=z(ht);if(!Nt.isValid){fe(new Error(`File validation failed: ${Nt.errors.join(", ")}`));return}be(ht)}catch{fe(new Error("Failed to parse PDF file"))}},ke.onerror=()=>fe(new Error("Failed to read file")),ke.readAsArrayBuffer(me)}),O=async me=>{try{const be=new Uint8Array(me),ke=new TextDecoder("utf-8").decode(be),Ze=ke.split(`
`).filter(xt=>xt.trim()).filter(xt=>xt.includes(",")&&(xt.includes("@")||xt.includes("+254")||xt.includes("07")));return Ze.length>0?Ze.join(`
`):ke}catch{throw new Error("Failed to extract text from PDF")}},ce=me=>{try{const be=me.split(`
`).filter(fe=>fe.trim());return be.length>0&&be[0].includes(",")?le(be):be.length>0&&be[0].includes("	")?Ee(be):_e(be)}catch{return[]}},le=me=>{const be=Ge(me,",");if(be===-1)return[];const fe=me[be].split(",").map(We=>We.trim());return me.slice(be+1).map(We=>{const Ze=We.split(",").map(lt=>lt.trim()),xt={};return fe.forEach((lt,ht)=>{xt[lt]=Ze[ht]||""}),xt}).filter(We=>Object.values(We).some(Ze=>Ze))},Ee=me=>{const be=Ge(me,"	");if(be===-1)return[];const fe=me[be].split("	").map(We=>We.trim());return me.slice(be+1).map(We=>{const Ze=We.split("	").map(lt=>lt.trim()),xt={};return fe.forEach((lt,ht)=>{xt[lt]=Ze[ht]||""}),xt}).filter(We=>Object.values(We).some(Ze=>Ze))},_e=me=>{const be=Be(me);let fe=me;be!==-1&&(fe=me.slice(be+1));const ke=[];for(const We of fe)if(We.trim()){const Ze=ut(We);Ze&&ke.push(Ze)}return ke},Be=me=>{const be=["name","full","parent","first","last"],fe=["phone","mobile","contact","number","tel"],ke=["email","mail"],We=["address","location","place"];for(let Ze=0;Ze<Math.min(10,me.length);Ze++){const xt=me[Ze].toLowerCase(),lt=be.some(zt=>xt.includes(zt)),ht=fe.some(zt=>xt.includes(zt)),Nt=ke.some(zt=>xt.includes(zt)),Et=We.some(zt=>xt.includes(zt));if([lt,ht,Nt,Et].filter(Boolean).length>=2)return Ze}return-1},Ge=(me,be)=>{const fe=["name","full","parent","first","last"],ke=["phone","mobile","contact","number","tel"],We=["email","mail"],Ze=["address","location","place"];for(let xt=0;xt<Math.min(5,me.length);xt++){const ht=me[xt].toLowerCase().split(be).map(Ns=>Ns.trim()),Nt=ht.some(Ns=>fe.some(Ts=>Ns.includes(Ts))),Et=ht.some(Ns=>ke.some(Ts=>Ns.includes(Ts))),Qt=ht.some(Ns=>We.some(Ts=>Ns.includes(Ts))),zt=ht.some(Ns=>Ze.some(Ts=>Ns.includes(Ts)));if([Nt,Et,Qt,zt].filter(Boolean).length>=2)return xt}return-1},ut=me=>{try{const be=me.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/),fe=be?be[0]:"",ke=me.match(/(\+254|0|254)?[17]\d{8}/),We=ke?ke[0]:"";let Ze="";const xt=fe?me.split(fe)[0].trim():me,lt=We?me.split(We)[0].trim():me;if(Ze=(xt.length>lt.length?xt:lt).replace(/[^\w\s\-\.]/g," ").trim(),!Ze){const Qt=me.match(/^([^@\d]+)/);Ze=Qt?Qt[1].trim():""}let Nt="";const Et=me.match(/(Nairobi|Kenya|Address:?\s*)([^,]+)/i);if(Et)Nt=Et[2].trim();else{const Qt=fe&&me.split(fe)[1]||"",zt=We&&me.split(We)[1]||"";Nt=(Qt.length>zt.length?Qt:zt).replace(/[^\w\s,\.\-]/g," ").trim()}return Ze||fe||We?{name:Ze,email:fe,phone:We,address:Nt,"Phone Number":We,Email:fe,Address:Nt}:null}catch{return null}},Le=async me=>new Promise((be,fe)=>{const ke=new FileReader;ke.onload=async We=>{var Ze;try{const xt=(Ze=We.target)==null?void 0:Ze.result,lt=await K(xt),ht=ce(lt),Nt=z(ht);if(!Nt.isValid){fe(new Error(`File validation failed: ${Nt.errors.join(", ")}`));return}be(ht)}catch{fe(new Error("Failed to parse Word document"))}},ke.onerror=()=>fe(new Error("Failed to read file")),ke.readAsArrayBuffer(me)}),K=async me=>{try{const be=new Uint8Array(me);let fe="";try{fe=new TextDecoder("utf-8").decode(be)}catch{}if(!fe||fe.length<100)try{fe=new TextDecoder("latin1").decode(be)}catch{}(!fe||fe.length<100)&&(fe=(Array.from(be).map(lt=>lt>=32&&lt<=126?String.fromCharCode(lt):" ").join("").match(/[a-zA-Z0-9\s@.,+\-()]+/g)||[]).join(`
`));const ke=fe.split(`
`).filter(Ze=>Ze.trim());if(ke.length===0)throw new Error("No readable content found in Word document");const We=ke.filter(Ze=>Ze.includes(",")&&(Ze.includes("@")||Ze.includes("+254")||Ze.includes("07")));return We.length>0?We.join(`
`):fe}catch{throw new Error("Failed to extract text from Word document")}},He=async me=>new Promise((be,fe)=>{const ke=new FileReader;ke.onload=async We=>{var Ze;try{const xt=(Ze=We.target)==null?void 0:Ze.result,lt=xe(xt),ht=z(lt);if(!ht.isValid){fe(new Error(`File validation failed: ${ht.errors.join(", ")}`));return}be(lt)}catch{fe(new Error("Failed to parse HTML file"))}},ke.onerror=()=>fe(new Error("Failed to read file")),ke.readAsText(me)}),xe=me=>{try{const be=me.match(/<table[^>]*>([\s\S]*?)<\/table>/i);if(!be)return[];const ke=be[1].split("</tr>").filter(xt=>xt.includes("<tr>")),We=[],Ze=[];for(const xt of ke)if(xt.includes("<th>")||xt.includes("<td>")){const lt=xt.split("<td>").filter(ht=>ht.includes("<th>"));lt.length>0&&We.push(lt[0].replace(/<th[^>]*>/,"").replace(/<\/th>/,"").trim())}for(const xt of ke)if(xt.includes("<td>")||xt.includes("<th>")){const lt=xt.split("<td>").filter(ht=>ht.includes("<th>"));if(lt.length>0){const ht={};for(let Nt=0;Nt<We.length;Nt++){const Et=lt[Nt].replace(/<td[^>]*>/,"").replace(/<\/td>/,"").trim();ht[We[Nt]]=Et}Ze.push(ht)}}return Ze.filter(xt=>Object.values(xt).some(lt=>lt))}catch{return[]}},ge=(me,be)=>{const fe=[];return me.forEach((ke,We)=>{(!ke.name||!ke.email)&&fe.push(`Row ${We+1}: Missing required fields`)}),{isValid:fe.length===0,errors:fe}},se=me=>{x(be=>be.filter(fe=>fe.id!==me))},F=()=>{const me=[];return y.forEach(be=>{be.status==="completed"&&be.preview&&me.push(...be.preview)}),me},ne=()=>{const me=F();if(me.length===0){Hs({title:"No data to preview",description:"Please wait for files to finish processing.",variant:"destructive"});return}P(me),N(!0)},ye=async()=>{const me=y.filter(fe=>fe.status==="completed");if(me.length===0){Hs({title:"No files ready",description:"Please wait for files to finish processing.",variant:"destructive"});return}const be=me.filter(fe=>fe.file).map(fe=>fe.file);if(be.length===0){Hs({title:"No files to upload",description:"No valid files found for upload.",variant:"destructive"});return}I(!0),R(0),D({total:be.length,completed:0,failed:0,errors:[]});try{await l(be),Hs({title:"Upload completed successfully",description:`Successfully uploaded ${be.length} files.`}),x([]),I(!1),R(0),D({total:0,completed:0,failed:0,errors:[]}),t()}catch(fe){Hs({title:"Upload failed",description:fe.message,variant:"destructive"}),I(!1)}},je=me=>me==="text/csv"?s.jsx(mE,{className:"w-5 h-5"}):me.includes("pdf")?s.jsx(Rn,{className:"w-5 h-5"}):me.includes("word")||me.includes("document")?s.jsx(_w,{className:"w-5 h-5"}):me==="text/html"?s.jsx(Rn,{className:"w-5 h-5"}):s.jsx(_w,{className:"w-5 h-5"}),Y=me=>{switch(me){case"uploading":return s.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"});case"processing":return s.jsx("div",{className:"w-4 h-4 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"});case"completed":return s.jsx(Or,{className:"w-4 h-4 text-[#f7c624]"});case"error":return s.jsx(un,{className:"w-4 h-4 text-red-500"});default:return null}},Re=me=>{if(me===0)return"0 Bytes";const be=1024,fe=["Bytes","KB","MB","GB"],ke=Math.floor(Math.log(me)/Math.log(be));return parseFloat((me/Math.pow(be,ke)).toFixed(2))+" "+fe[ke]},Qe=(me,be)=>{const ke={parents:{"First Name":"First Name",first_name:"First Name",school_id:"School ID","Last Name":"Last Name",last_name:"Last Name","Full Name":"Full Name",Name:"Name",Email:"Email",email:"Email","Phone Number":"Phone Number",phone_number:"Phone Number",Phone:"Phone Number",Mobile:"Phone Number",Contact:"Phone Number",Address:"Address",address:"Address","Emergency Contact":"Emergency Contact",emergency_contact:"Emergency Contact","Secondary Phone":"Secondary Phone",secondary_phone:"Secondary Phone","Preferred Contact Method":"Preferred Contact Method",preferred_contact_method:"Preferred Contact Method","Authorized Pickup Persons":"Authorized Pickup Persons",authorized_pickup_persons:"Authorized Pickup Persons"},drivers:{"First Name":"First Name",first_name:"First Name",school_id:"School ID","Last Name":"Last Name",last_name:"Last Name","Full Name":"Full Name",Name:"Name",Email:"Email",email:"Email","Phone Number":"Phone Number",phone_number:"Phone Number",Phone:"Phone Number",Mobile:"Phone Number",Contact:"Phone Number","License Number":"License Number",license_number:"License Number","License Class":"License Class",license_class:"License Class","License Expiry":"License Expiry",license_expiry:"License Expiry","Last Health Check":"Last Health Check",last_health_check:"Last Health Check","Last Background Check":"Last Background Check",last_background_check:"Last Background Check",is_assistant_driver:"Is Assistant Driver"},vehicles:{registration_number:"Registration Number",school_id:"School ID",vehicle_type:"Vehicle Type",capacity:"Capacity",model:"Model",year:"Year",fuel_type:"Fuel Type",manufacturer:"Manufacturer",is_active:"Is Active",has_gps:"Has GPS",has_camera:"Has Camera",has_emergency_button:"Has Emergency Button",driver_phone_number:"Driver Phone Number"},students:{first_name:"First Name",middle_name:"Middle Name",last_name:"Last Name",admission_number:"Admission Number",school_id:"School ID",grade:"Grade",section:"Section",gender:"Gender",date_of_birth:"Date of Birth",parent_name:"Parent Name",parent_phone:"Parent Phone"},staffs:{first_name:"First Name",middle_name:"Middle Name",last_name:"Last Name",employee_number:"Employee Number",school_id:"School ID",gender:"Gender",mobile_number:"Mobile Number",email:"Email",status:"Status",role:"Role",can_manage_routes:"Can Manage Routes",can_manage_vehicles:"Can Manage Vehicles",can_manage_staff:"Can Manage Staff",can_manage_student_trips:"Can Manage Student Trips",is_on_duty:"Is On Duty"}}[be]||{};return me.map(We=>{if(ke[We])return ke[We];const Ze=We.toLowerCase();for(const[xt,lt]of Object.entries(ke))if(xt.toLowerCase()===Ze)return lt;return We.replace(/_/g," ").replace(/\b\w/g,xt=>xt.toUpperCase())})};return s.jsxs(js,{open:e,onOpenChange:t,children:[s.jsxs(xs,{className:"max-w-4xl max-h-[85vh] overflow-y-auto",children:[s.jsxs(gs,{className:"pb-0",children:[s.jsx(vs,{className:"text-2xl font-bold",children:r}),n&&s.jsx("p",{className:"text-gray-600 mt-1",children:n})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsxs(ze,{children:[s.jsx("h2",{className:"text-lg font-bold mt-1 mb-1 ml-4",children:"Upload Files"}),s.jsx(Ue,{className:"pt-0",children:s.jsxs("div",{className:nt("border-2 border-dashed rounded-lg p-6 text-center transition-colors",j?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragOver:ae,onDragLeave:U,onDrop:Z,children:[s.jsx(Fj,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here or click to browse"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Supported formats: ",a.join(", "),s.jsx("br",{}),"Maximum file size: ",i,"MB",s.jsx("br",{}),"Maximum files: ",o,s.jsx("br",{}),s.jsx("span",{className:"text-blue-600 font-medium",children:" Download the template to see the required format"})]}),s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx(ue,{onClick:()=>{var me;return(me=oe.current)==null?void 0:me.click()},variant:"outline",children:"Choose Files"}),s.jsxs(ue,{onClick:()=>nQ(f),variant:"outline",className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-4 h-4"}),"Download Template"]})]}),s.jsx("input",{ref:oe,type:"file",multiple:!0,accept:a.join(","),onChange:W,className:"hidden"})]})})]}),y.length>0&&s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-3",children:s.jsx(tt,{className:"text-lg",children:"Uploaded Files"})}),s.jsx(Ue,{className:"pt-0",children:s.jsx("div",{className:"space-y-3",children:y.map(me=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[je(me.type),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:me.name}),s.jsx("p",{className:"text-sm text-gray-500",children:Re(me.size)})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[Y(me.status),s.jsxs("div",{className:"flex items-center space-x-2",children:[me.status==="completed"&&me.preview&&s.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>{P(me.preview||[]),N(!0)},children:[s.jsx(qr,{className:"w-4 h-4"}),"Preview (",me.preview.length," records)"]}),s.jsx(ue,{variant:"ghost",size:"sm",onClick:()=>se(me.id),children:s.jsx(Ea,{className:"w-4 h-4"})})]})]}),me.status==="uploading"||me.status==="processing"?s.jsx(eN,{value:me.progress,className:"w-24"}):null,me.error&&s.jsx("p",{className:"text-sm text-red-500",children:me.error})]},me.id))})})]}),y.some(me=>me.status==="completed")&&s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-3",children:s.jsx(tt,{className:"text-lg",children:"Ready to Upload"})}),s.jsx(Ue,{className:"pt-0",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Data Summary"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total Files:"}),s.jsx("span",{className:"ml-2 font-medium",children:y.filter(me=>me.status==="completed").length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total Records:"}),s.jsx("span",{className:"ml-2 font-medium",children:F().length})]})]})]}),E&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Uploading records..."}),s.jsxs("span",{children:[Math.round(T),"%"]})]}),s.jsx(eN,{value:T}),s.jsxs("div",{className:"text-sm text-gray-600",children:[X.completed," completed,"," ",X.failed," failed"]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsxs(ue,{variant:"outline",onClick:ne,children:[s.jsx(qr,{className:"w-4 h-4 mr-2"}),"Preview All Data"]}),s.jsx(ue,{onClick:ye,disabled:E,className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:E?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Fj,{className:"w-4 h-4 mr-2"}),"Upload ",F().length," Records"]})})]})]})})]}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsx(ue,{variant:"outline",onClick:t,children:"Close"})})]})]}),s.jsx(js,{open:w,onOpenChange:N,children:s.jsxs(xs,{className:"max-w-[95vw] max-h-[90vh] w-full overflow-hidden",children:[s.jsxs(gs,{className:"pb-4",children:[s.jsx(vs,{children:"Data Preview"}),s.jsxs(En,{children:["Preview of ",k.length," records from uploaded files"]})]}),s.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[s.jsxs("div",{className:"border rounded-lg overflow-hidden flex-1 min-h-0",children:[s.jsx("div",{className:"overflow-auto h-full",children:s.jsxs(ei,{children:[s.jsx(ti,{className:"sticky top-0 bg-white z-10",children:s.jsx(hr,{children:k.length>0&&(()=>{const me=Object.keys(k[0]);return Qe(me,f).map((fe,ke)=>s.jsx(yt,{className:"whitespace-nowrap bg-white",children:fe},me[ke]))})()})}),s.jsx(si,{children:k.slice(0,50).map((me,be)=>s.jsx(hr,{children:Object.values(me).map((fe,ke)=>s.jsx(vt,{className:"max-w-[200px] truncate",children:String(fe||"")},ke))},be))})]})}),k.length>50&&s.jsxs("div",{className:"p-3 bg-gray-50 text-center text-sm text-gray-600 border-t",children:["Showing first 50 records of ",k.length," total records"]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-2 border-t",children:[s.jsx(ue,{variant:"outline",onClick:()=>N(!1),children:"Close Preview"}),s.jsxs(ue,{onClick:()=>{N(!1),ye()},className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:[s.jsx(Fj,{className:"w-4 h-4 mr-2"}),"Upload All Records"]})]})]})]})})]})},Lx=({isOpen:e,onClose:t,data:r,title:n="Data Preview",columns:a,validationErrors:i={}})=>{if(!r||r.length===0)return null;const o=a||Object.keys(r[0]||{}),l=d=>{const u=i[d];return!u||u.length===0?{status:"valid",icon:s.jsx(Or,{className:"w-4 h-4 text-[#f7c624]"})}:{status:"error",icon:s.jsx(il,{className:"w-4 h-4 text-red-500"})}},c=d=>d==null?s.jsx("span",{className:"text-gray-400 italic",children:"Empty"}):typeof d=="boolean"?d?"Yes":"No":typeof d=="object"?JSON.stringify(d):String(d);return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsx(vs,{className:"text-2xl font-bold",children:n}),s.jsxs("p",{className:"text-gray-600",children:["Preview of ",r.length," records from uploaded file"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsx(tt,{className:"text-sm font-medium text-gray-600",children:"Total Records"})}),s.jsx(Ue,{children:s.jsx("div",{className:"text-2xl font-bold",children:r.length})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsx(tt,{className:"text-sm font-medium text-gray-600",children:"Valid Records"})}),s.jsx(Ue,{children:s.jsx("div",{className:"text-2xl font-bold text-[#f7c624]",children:r.length-Object.keys(i).length})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsx(tt,{className:"text-sm font-medium text-gray-600",children:"Records with Errors"})}),s.jsx(Ue,{children:s.jsx("div",{className:"text-2xl font-bold text-red-600",children:Object.keys(i).length})})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsx(tt,{className:"text-lg",children:"Data Preview"})}),s.jsx(Ue,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{className:"w-12",children:"#"}),s.jsx(yt,{className:"w-16",children:"Status"}),o.map(d=>s.jsx(yt,{className:"min-w-[150px]",children:d},d))]})}),s.jsx(si,{children:r.map((d,u)=>{const h=l(u),p=i[u]||[];return s.jsxs(hr,{className:h.status==="error"?"bg-red-50 border-red-200":"",children:[s.jsx(vt,{className:"font-medium",children:u+1}),s.jsx(vt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[h.icon,h.status==="error"&&s.jsxs(De,{variant:"destructive",className:"text-xs",children:[p.length," error",p.length!==1?"s":""]})]})}),o.map(f=>s.jsx(vt,{children:c(d[f])},f))]},u)})})]})})})]}),Object.keys(i).length>0&&s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"text-lg flex items-center space-x-2",children:[s.jsx($i,{className:"w-5 h-5 text-yellow-500"}),"Validation Errors"]})}),s.jsx(Ue,{children:s.jsx("div",{className:"space-y-3",children:Object.entries(i).map(([d,u])=>s.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsxs("h4",{className:"font-medium text-red-800 mb-2",children:["Row ",parseInt(d)+1,":"]}),s.jsx("ul",{className:"list-disc list-inside space-y-1",children:u.map((h,p)=>s.jsx("li",{className:"text-sm text-red-700",children:h},p))})]},d))})})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(ue,{variant:"outline",onClick:t,children:"Close"}),Object.keys(i).length===0&&s.jsx(ue,{children:"Continue with Upload"})]})]})]})})};function iQ(){const e=rr(),{students:t,loading:r,error:n}=jt(Pe=>Pe.students),{grades:a,loading:i,error:o}=jt(Pe=>Pe.grades),{schools:l}=jt(Pe=>Pe.schools),{user:c}=jt(Pe=>Pe.auth),{routes:d,allRouteStops:u}=jt(Pe=>Pe.routes),[h,p]=g.useState(new Set),[f,y]=g.useState({key:null,direction:"asc"}),[x,j]=g.useState(!1),[v,w]=g.useState("all"),[N,k]=g.useState("all"),[P,E]=g.useState("all"),[I,T]=g.useState("students"),[R,X]=g.useState(!1),[D,C]=g.useState(!1),[$,B]=g.useState(!1),[Q,oe]=g.useState(!1),[ae,U]=g.useState(!1),[Z,W]=g.useState(!1),[ve,A]=g.useState(!1),[z,M]=g.useState(null),[re,te]=g.useState(null),[O,ce]=g.useState(""),[le,Ee]=g.useState("all"),[_e,Be]=g.useState(""),[Ge,ut]=g.useState(1),[Le,K]=g.useState(1),[He,xe]=g.useState(10),[ge,se]=g.useState(!1),[F,ne]=g.useState(!1),[ye,je]=g.useState([]),Y=g.useMemo(()=>{const Pe=localStorage.getItem("schoolId");if(Pe){const ot=parseInt(Pe);if(!isNaN(ot))return ot}if(l.length>0&&(c!=null&&c.id)){const ot=l.find(kt=>kt.admin===c.id);if(ot!=null&&ot.id)return localStorage.setItem("schoolId",ot.id.toString()),ot.id}},[l,c==null?void 0:c.id]);g.useEffect(()=>{e(Ul()).catch(Pe=>{})},[e]),g.useEffect(()=>{Y&&(e(fa({schoolId:Y})),e(Vn({schoolId:Y})),e(Ii({schoolId:Y})),e(mp(Y)),e(ho({schoolId:Y})))},[e,Y]),g.useEffect(()=>{!z&&Q&&oe(!1)},[z,Q]),g.useEffect(()=>{Q&&(!z||!z.id)&&(oe(!1),M(null))},[Q,z]);const Re=g.useMemo(()=>{const Pe=(t||[]).filter(ot=>{var As,Lt,is,pr,ba,Qn;const kt=(((As=ot.first_name)==null?void 0:As.toLowerCase())||"").includes(O.toLowerCase())||(((Lt=ot.last_name)==null?void 0:Lt.toLowerCase())||"").includes(O.toLowerCase())||(((is=ot.admission_number)==null?void 0:is.toLowerCase())||"").includes(O.toLowerCase())||(((pr=ot.section)==null?void 0:pr.toLowerCase())||"").includes(O.toLowerCase())||(((ba=ot.middle_name)==null?void 0:ba.toLowerCase())||"").includes(O.toLowerCase()),Vt=le==="all"||le==="active"&&ot.transport_enabled||le==="inactive"&&!ot.transport_enabled,fs=v==="all"||((Qn=ot.grade)==null?void 0:Qn.toString())===v,ir=N==="all"||ot.gender===N,$s=P==="all"||(()=>{if(!ot.route_stops||ot.route_stops.length===0)return!1;const Mn=u.filter(Jr=>{var ja;return((ja=Jr.route)==null?void 0:ja.toString())===P});return ot.route_stops.some(Jr=>Mn.some(ja=>ja.id===Jr))})();return kt&&Vt&&fs&&ir&&$s});return f.key?[...Pe].sort((ot,kt)=>{const Vt=ot[f.key],fs=kt[f.key];if(Vt==null)return 1;if(fs==null)return-1;const ir=Vt<fs?-1:Vt>fs?1:0;return f.direction==="desc"?-ir:ir}):Pe},[t,O,le,v,N,P,u,f]),Qe=(Array.isArray(a)?a:[]).filter(Pe=>Pe.name.toLowerCase().includes(_e.toLowerCase())||Pe.level.toLowerCase().includes(_e.toLowerCase())||Pe.description.toLowerCase().includes(_e.toLowerCase())),me=Math.ceil(Re.length/He),be=(Ge-1)*He,fe=be+He,ke=Re.slice(be,fe),We=Math.ceil(Qe.length/He),Ze=(Le-1)*He,xt=Ze+He,lt=Qe.slice(Ze,xt);g.useEffect(()=>{ut(1)},[O,le,v,N,P]),g.useEffect(()=>{K(1)},[_e]);const ht=g.useCallback(Pe=>{y(ot=>({key:Pe,direction:ot.key===Pe&&ot.direction==="asc"?"desc":"asc"}))},[]),Nt=g.useCallback(()=>{h.size===ke.length?p(new Set):p(new Set(ke.map(Pe=>Pe.id)))},[h.size,ke]),Et=g.useCallback(Pe=>{p(ot=>{const kt=new Set(ot);return kt.has(Pe)?kt.delete(Pe):kt.add(Pe),kt})},[]),Qt=g.useCallback(async Pe=>{try{const ot=Array.from(h).map(kt=>(t==null?void 0:t.find(fs=>fs.id===kt))?e(pp({id:kt,data:{transport_enabled:Pe}})).unwrap():Promise.resolve());await Promise.all(ot),ns.success(`Successfully ${Pe?"activated":"deactivated"} transport for ${h.size} students`),p(new Set)}catch{ns.error("Failed to update transport status for students")}},[h,t,e]),zt=g.useCallback(async()=>{try{const Pe=Array.from(h).map(ot=>e(xp(ot)).unwrap());await Promise.all(Pe),ns.success(`Successfully deleted ${h.size} students`),p(new Set)}catch{ns.error("Failed to delete some students")}},[h,e]),Kt=async Pe=>{try{await e(Fv(Pe)).unwrap(),ns.success("Student created successfully"),X(!1),M(null)}catch(ot){let kt="Failed to create student";if(ot instanceof Error)try{const Vt=JSON.parse(ot.message);typeof Vt=="object"&&Vt!==null?kt=JSON.stringify(Vt,null,2):kt=ot.message}catch{kt=ot.message}else kt=String(ot);ns.error("Error",kt)}},Ns=async({id:Pe,data:ot})=>{try{await e(pp({id:Pe,data:ot})).unwrap(),ns.success("Student updated successfully"),C(!1),M(null)}catch(kt){let Vt="Failed to update student";if(kt instanceof Error)try{const fs=JSON.parse(kt.message);typeof fs=="object"&&fs!==null?Vt=JSON.stringify(fs,null,2):Vt=kt.message}catch{Vt=kt.message}else Vt=String(kt);ns.error("Error",Vt)}},Ts=async()=>{if(!(z!=null&&z.id)){ns.error("No student selected for deletion"),oe(!1),M(null);return}try{await e(xp(z.id)).unwrap(),ns.success("Student deleted successfully"),oe(!1),M(null)}catch(Pe){let ot="Failed to delete student";if(Pe instanceof Error)try{const kt=JSON.parse(Pe.message);typeof kt=="object"&&kt!==null?ot=JSON.stringify(kt,null,2):ot=Pe.message}catch{ot=Pe.message}else ot=String(Pe);ns.error("Error",ot)}},Yt=Pe=>{if(!Pe||!Pe.id){ns.error("Invalid student data");return}M(Pe),C(!0)},Rs=Pe=>{if(!Pe||!Pe.id){ns.error("Invalid student data");return}M(Pe),B(!0)},Nn=Pe=>{if(!Pe||!Pe.id){ns.error("Invalid student data");return}M(Pe),oe(!0)},vr=Pe=>s.jsx(De,{variant:Pe?"default":"secondary",className:Pe?"bg-green-100 text-green-800 hover:bg-green-100":"bg-red-100 text-red-800 hover:bg-red-100",children:Pe?"Active":"Inactive"}),xn=Pe=>{if(!Pe)return"N/A";const ot=a.find(kt=>kt.id===Number(Pe));return ot?ot.name:`Grade ${Pe}`},qe=async Pe=>{try{await e(Bv(Pe)).unwrap(),ns.success("Grade created successfully"),U(!1),Y&&e(Ii({schoolId:Y}))}catch(ot){ns.error(ot)}},Te=async({id:Pe,data:ot})=>{try{await e(zv({id:Pe,data:ot})).unwrap(),ns.success("Grade updated successfully"),W(!1),te(null),Y&&e(Ii({schoolId:Y}))}catch(kt){ns.error(kt)}},mt=async()=>{if(re!=null&&re.id)try{await e(Uv(re.id)).unwrap(),ns.success("Grade deleted successfully"),A(!1),te(null)}catch(Pe){ns.error(Pe)}},Wt=Pe=>{te(Pe),W(!0)},Jt=Pe=>{te(Pe),A(!0)},ks=async Pe=>{re!=null&&re.id&&await Te({id:re.id,data:Pe})},us=Pe=>{if(!Pe)return null;const ot=Pe.toString().trim().toLowerCase();let kt=a.find(Vt=>Vt.name.toLowerCase()===ot||Vt.name.toLowerCase()===`grade ${ot}`||Vt.level.toLowerCase()===ot);if(!kt){const Vt=ot.match(/\d+/);if(Vt){const fs=Vt[0];kt=a.find(ir=>ir.name.toLowerCase().includes(fs)||ir.level.toLowerCase().includes(fs))}}return(kt==null?void 0:kt.id)||null},hs=Pe=>{const ot=[];let kt="",Vt=!1,fs=0;const ir=Pe.replace(/[\r\n]+$/,"");for(;fs<ir.length;){const Lt=ir[fs];if(Lt==='"')Vt&&ir[fs+1]==='"'?(kt+='"',fs+=2):(Vt=!Vt,fs++);else if(Lt===","&&!Vt){const pr=kt.trim().replace(/^["']|["']$/g,"");ot.push(pr),kt="",fs++}else kt+=Lt,fs++}const As=kt.trim().replace(/^["']|["']$/g,"");return ot.push(As),ot},Ms=Pe=>Pe.includes(",")||Pe.includes('"')||Pe.includes(`
`)||Pe.includes("\r")?`"${Pe.replace(/"/g,'""')}"`:Pe,Mr=async Pe=>new Promise((ot,kt)=>{const Vt=new FileReader;Vt.onload=fs=>{var ir;try{const As=((ir=fs.target)==null?void 0:ir.result).split(`
`);if(As.length===0){ot(Pe);return}const Lt=hs(As[0]).map(Jr=>Jr.trim()),is=Lt.findIndex(Jr=>Jr.toLowerCase()==="grade"||Jr.toLowerCase()==="grade_name"||Jr.toLowerCase()==="class");if(is===-1){ot(Pe);return}const pr=[Lt.map(Jr=>Ms(Jr)).join(",")];for(let Jr=1;Jr<As.length;Jr++){const ja=As[Jr].trim();if(!ja)continue;const Oa=hs(ja);for(;Oa.length<Lt.length;)Oa.push("");if(Oa.length>is&&Oa[is]){const Ro=Oa[is],Ni=us(Ro);Ni&&(Oa[is]=Ni.toString())}const dc=Oa.map(Ro=>Ms(Ro)).join(",");pr.push(dc)}const ba=pr.join(`
`),Qn=new Blob([ba],{type:"text/csv"}),Mn=new File([Qn],Pe.name,{type:"text/csv"});ot(Mn)}catch{ot(Pe)}},Vt.onerror=()=>{kt(new Error("Failed to read file"))},Vt.readAsText(Pe)}),Ir=async Pe=>{try{if(!Y)throw new Error("School ID not found");a.length===0&&(ns.info("Loading grades..."),await e(Ii({schoolId:Y})).unwrap());let ot=0,kt=0;const Vt=[];for(let fs=0;fs<Pe.length;fs++){const ir=Pe[fs];try{const $s=await Mr(ir),As=await Px($s,"students");As.success?(ot+=As.created_count||0,kt+=As.skipped_count||0,As.errors&&As.errors.length>0&&As.errors.forEach(Lt=>{typeof Lt=="string"?Vt.push(Lt):Lt.row&&Lt.field&&Lt.message?Vt.push(`Row ${Lt.row}, ${Lt.field}: ${Lt.message}`):Vt.push(JSON.stringify(Lt))})):(kt+=1,Vt.push(`File "${ir.name}": ${As.message}`))}catch($s){kt+=1;const As=$s instanceof Error?$s.message:"Unknown error";Vt.push(`File "${ir.name}": ${As}`)}}ot>0&&ns.success(`Successfully created ${ot} students.${kt>0?` ${kt} skipped.`:""}`),kt>0&&Vt.length>0&&(ns.error(`${kt} records were skipped. Errors: ${Vt.slice(0,3).join(", ")}${Vt.length>3?"...":""}`),console.error("Upload errors:",Vt)),e(fa({schoolId:Y}))}catch(ot){throw ns.error(ot instanceof Error?ot.message:"CSV upload failed"),ot}},Sn=Pe=>{je(Pe),ne(!0)};return!Y&&l.length===0?s.jsx("div",{className:"min-h-screen bg-background flex w-full",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-6 py-4 bg-background",children:s.jsx(ze,{children:s.jsx(Ue,{className:"py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Initializing"}),s.jsx("p",{className:"text-muted-foreground",children:"Setting up your school dashboard..."})]})})})})})}):!Y&&l.length>0?s.jsx("div",{className:"min-h-screen bg-background flex w-full",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-6 py-4 bg-background",children:s.jsx(ze,{children:s.jsx(Ue,{className:"py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"School Configuration Required"}),s.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:"We couldn't determine which school you're managing. Please contact your administrator to set up your school access."}),s.jsxs(ue,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Page"]})]})})})})})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-1 sm:px-2 py-1 w-full max-w-[98vw] mx-auto",children:s.jsxs(ze,{className:"shadow-lg border-0 rounded-xl",children:[s.jsx(Xe,{className:"pb-1 border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx(tt,{className:"text-xl font-bold text-foreground flex items-center gap-2",children:I==="students"?s.jsxs(s.Fragment,{children:[s.jsx(ws,{className:"w-6 h-6 text-[#f7c624]"}),"Students List"]}):s.jsxs(s.Fragment,{children:[s.jsx(Fg,{className:"w-6 h-6 text-[#f7c624]"}),"Grades List"]})}),s.jsxs("div",{className:"flex gap-2 ml-auto",children:[I==="students"&&s.jsxs(ue,{onClick:()=>se(!0),className:"bg-[#10213f] hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(pn,{className:"mr-2 h-4 w-4"})," Bulk Upload"]}),s.jsxs(ue,{onClick:()=>I==="students"?X(!0):U(!0),className:"bg-[#f7c624] hover:bg-[#f7c624] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(va,{className:"mr-2 h-4 w-4"})," ",I==="students"?"Add Student":"Add Grade"]})]})]})}),s.jsx(Ue,{className:"pt-2",children:s.jsxs(a7,{value:I,onValueChange:T,className:"w-full",children:[s.jsxs($S,{className:"grid w-full grid-cols-2 mb-4",children:[s.jsxs(au,{value:"students",className:"flex items-center gap-2",children:[s.jsx(ws,{className:"h-4 w-4"}),"Students"]}),s.jsxs(au,{value:"grades",className:"flex items-center gap-2",children:[s.jsx(Fg,{className:"h-4 w-4"}),"Grades"]})]}),s.jsxs(iu,{value:"students",className:"space-y-3",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx($e,{placeholder:"Search students by name, admission number, section, or middle name...",value:O,onChange:Pe=>ce(Pe.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>j(!x),className:"flex items-center gap-2",children:[s.jsx(Ld,{className:"h-4 w-4"}),"Filters"]}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>{Y&&(e(fa({schoolId:Y})),e(Vn({schoolId:Y})),e(Ii({schoolId:Y})))},className:"flex items-center gap-2",children:[s.jsx(Wl,{className:"h-4 w-4"}),"Refresh"]}),s.jsx(zu,{data:{headers:["Name","Admission Number","Grade","Section","Gender","Transport Status"],data:Re.map(Pe=>({name:`${Pe.first_name||""} ${Pe.middle_name||""} ${Pe.last_name||""}`,admission_number:Pe.admission_number||"",grade:xn(Pe.grade),section:Pe.section||"",gender:Pe.gender||"",transport_status:Pe.transport_enabled?"Active":"Inactive"})),fileName:"students_export",title:"Students Directory"},className:"border-border hover:bg-accent px-3 py-2"})]})]}),x&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-medium",children:"Route"}),s.jsxs(es,{value:P,onValueChange:E,children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Routes"}),d.filter(Pe=>Pe.school===Y).map(Pe=>{var ot;return s.jsx(Ve,{value:((ot=Pe.id)==null?void 0:ot.toString())||"",children:Pe.name},Pe.id)})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-medium",children:"Status"}),s.jsxs(es,{value:le,onValueChange:Ee,children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Status"}),s.jsx(Ve,{value:"active",children:"Active Transport"}),s.jsx(Ve,{value:"inactive",children:"Inactive Transport"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-medium",children:"Grade"}),s.jsxs(es,{value:v,onValueChange:w,children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Grades"}),a.map(Pe=>s.jsx(Ve,{value:Pe.id.toString(),children:Pe.name},Pe.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-medium",children:"Gender"}),s.jsxs(es,{value:N,onValueChange:k,children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Genders"}),s.jsx(Ve,{value:"male",children:"Male"}),s.jsx(Ve,{value:"female",children:"Female"}),s.jsx(Ve,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-medium",children:"Per Page"}),s.jsxs(es,{value:He.toString(),onValueChange:Pe=>{xe(Number(Pe)),ut(1)},children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"5",children:"5"}),s.jsx(Ve,{value:"10",children:"10"}),s.jsx(Ve,{value:"20",children:"20"}),s.jsx(Ve,{value:"50",children:"50"})]})]})]})]}),h.size>0&&s.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[h.size," student(s) selected"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>Qt(!0),className:"flex items-center gap-2 text-green-700 border-green-300 hover:bg-green-50",children:[s.jsx(yE,{className:"h-4 w-4"}),"Activate Transport"]}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>Qt(!1),className:"flex items-center gap-2 text-orange-700 border-orange-300 hover:bg-orange-50",children:[s.jsx(Bq,{className:"h-4 w-4"}),"Deactivate Transport"]}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:zt,className:"flex items-center gap-2 text-red-700 border-red-300 hover:bg-red-50",children:[s.jsx(Ea,{className:"h-4 w-4"}),"Delete Selected"]})]})]})]}),r&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(wr,{className:"h-8 w-48"}),s.jsx(wr,{className:"h-8 w-32"})]}),s.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((Pe,ot)=>s.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[s.jsx(wr,{className:"h-4 w-4"}),s.jsx(wr,{className:"h-10 w-10 rounded-full"}),s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx(wr,{className:"h-4 w-32"}),s.jsx(wr,{className:"h-3 w-24"})]}),s.jsx(wr,{className:"h-4 w-20"}),s.jsx(wr,{className:"h-4 w-16"}),s.jsx(wr,{className:"h-4 w-12"}),s.jsx(wr,{className:"h-8 w-8"})]},ot))})]}),n&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-destructive",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Unable to Load Students"}),s.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:"We encountered an issue while loading your students. Please try again."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-destructive bg-destructive/10 px-4 py-2 rounded-md max-w-md mx-auto",children:n}),s.jsxs(ue,{onClick:()=>Y&&e(fa({schoolId:Y})),variant:"outline",className:"mt-4",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})]}),!r&&!n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"sticky top-0 bg-muted/50",children:s.jsxs("tr",{className:"border-b border-border",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("input",{type:"checkbox",checked:h.size===ke.length&&ke.length>0,onChange:Nt,className:"h-4 w-4 text-green-600 focus:ring-green-500 rounded"})})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground cursor-pointer hover:bg-muted/30",onClick:()=>ht("first_name"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Student",f.key==="first_name"&&(f.direction==="asc"?s.jsx($m,{className:"h-4 w-4"}):s.jsx(Mm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground cursor-pointer hover:bg-muted/30",onClick:()=>ht("admission_number"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Admission #",f.key==="admission_number"&&(f.direction==="asc"?s.jsx($m,{className:"h-4 w-4"}):s.jsx(Mm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground cursor-pointer hover:bg-muted/30",onClick:()=>ht("grade"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Grade & Section",f.key==="grade"&&(f.direction==="asc"?s.jsx($m,{className:"h-4 w-4"}):s.jsx(Mm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground cursor-pointer hover:bg-muted/30",onClick:()=>ht("gender"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Gender",f.key==="gender"&&(f.direction==="asc"?s.jsx($m,{className:"h-4 w-4"}):s.jsx(Mm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground cursor-pointer hover:bg-muted/30",onClick:()=>ht("transport_enabled"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Status",f.key==="transport_enabled"&&(f.direction==="asc"?s.jsx($m,{className:"h-4 w-4"}):s.jsx(Mm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-foreground",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:ke.map(Pe=>s.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[s.jsx("td",{className:"py-2 px-3",children:s.jsx("input",{type:"checkbox",checked:h.has(Pe.id),onChange:()=>Et(Pe.id),className:"h-4 w-4 text-green-600 focus:ring-green-500 rounded"})}),s.jsx("td",{className:"py-2 px-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-8 w-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:s.jsx(ws,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"ml-2",children:[s.jsxs("p",{className:"text-sm font-medium text-foreground",children:[Pe.first_name||""," ",Pe.middle_name||""," ",Pe.last_name||""]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",Pe.id||"N/A"]})]})]})}),s.jsx("td",{className:"py-2 px-3",children:s.jsx("span",{className:"text-sm font-medium text-foreground",children:Pe.admission_number||"N/A"})}),s.jsx("td",{className:"py-2 px-3",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:xn(Pe.grade)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Section ",Pe.section||"N/A"]})]})}),s.jsx("td",{className:"py-2 px-3",children:s.jsx("span",{className:"text-sm text-foreground capitalize",children:Pe.gender||"N/A"})}),s.jsx("td",{className:"py-2 px-3",children:vr(Pe.transport_enabled)}),s.jsx("td",{className:"py-2 px-3 text-right",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",size:"sm",children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsxs(Ut,{onClick:()=>Rs(Pe),children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(Ut,{onClick:()=>Yt(Pe),children:[s.jsx(jn,{className:"h-4 w-4 mr-2"}),"Edit Student"]}),s.jsxs(Ut,{onClick:()=>Nn(Pe),className:"text-red-600 focus:text-red-600",children:[s.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Delete Student"]})]})]})})]},Pe.id))})]}),ke.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:s.jsx(ws,{className:"h-8 w-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:O||le!=="all"?"No Students Found":"No Students Yet"}),s.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:O||le!=="all"?"No students match your current search or filter criteria. Try adjusting your search terms or filters.":"Get started by adding your first student to the system."}),!O&&le==="all"&&s.jsxs(ue,{onClick:()=>X(!0),className:"bg-green-600 hover:bg-green-700",children:[s.jsx(va,{className:"h-4 w-4 mr-2"}),"Add Your First Student"]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 p-6 border-t border-border mt-0",children:[s.jsxs("div",{className:"text-sm text-muted-foreground mb-2 sm:mb-0",children:["Showing ",be+1,"-",Math.min(fe,Re.length)," of"," ",Re.length," students"]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center",children:[s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>ut(Ge-1),disabled:Ge===1,children:[s.jsx(od,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:(()=>{const Pe=[];if(me<=5)for(let ot=1;ot<=me;ot++)Pe.push(ot);else Ge<=3?Pe.push(1,2,3,4,"...",me):Ge>=me-2?Pe.push(1,"...",me-3,me-2,me-1,me):Pe.push(1,"...",Ge-1,Ge,Ge+1,"...",me);return Pe.map((ot,kt)=>ot==="..."?s.jsx("span",{className:"px-2",children:"..."},"ellipsis-"+kt):s.jsx(ue,{variant:Ge===ot?"default":"outline",size:"sm",onClick:()=>ut(Number(ot)),className:"w-8 h-8 p-0",children:ot},ot))})()}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>ut(Ge+1),disabled:Ge===me,children:["Next",s.jsx(Hl,{className:"h-4 w-4"})]}),s.jsxs("span",{className:"ml-4 text-xs text-muted-foreground hidden sm:inline",children:["Page ",Ge," of ",me]})]})]})]})]}),s.jsxs(iu,{value:"grades",className:"space-y-3",children:[s.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx($e,{placeholder:"Search grades by name, level, or description...",value:_e,onChange:Pe=>Be(Pe.target.value),className:"pl-10"})]})}),i&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Loading Grades"}),s.jsx("p",{className:"text-muted-foreground",children:"Please wait while we fetch your grade data..."})]}),o&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-destructive",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Unable to Load Grades"}),s.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:"We encountered an issue while loading your grades. Please try again."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-destructive bg-destructive/10 px-4 py-2 rounded-md max-w-md mx-auto",children:o}),s.jsxs(ue,{onClick:()=>Y&&e(Ii({schoolId:Y})),variant:"outline",className:"mt-4",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})]}),!i&&!o&&s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"sticky top-0 bg-muted/50",children:s.jsxs("tr",{className:"border-b border-border",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground",children:"Grade"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground",children:"Level"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground",children:"Description"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-foreground",children:"Capacity"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-foreground",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:lt.map(Pe=>s.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[s.jsx("td",{className:"py-2 px-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-8 w-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx(Fg,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-2",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:Pe.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",Pe.id]})]})]})}),s.jsx("td",{className:"py-2 px-3",children:s.jsx(De,{variant:"outline",className:"text-xs",children:Pe.level})}),s.jsx("td",{className:"py-2 px-3",children:s.jsx("p",{className:"text-sm text-foreground max-w-xs truncate",children:Pe.description})}),s.jsx("td",{className:"py-2 px-3",children:s.jsxs("span",{className:"text-sm font-medium text-foreground",children:[Pe.capacity," students"]})}),s.jsx("td",{className:"py-2 px-3 text-right",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",size:"sm",children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsxs(Ut,{onClick:()=>Wt(Pe),children:[s.jsx(jn,{className:"h-4 w-4 mr-2"}),"Edit Grade"]}),s.jsxs(Ut,{onClick:()=>Jt(Pe),className:"text-red-600 focus:text-red-600",children:[s.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Delete Grade"]})]})]})})]},Pe.id))})]}),lt.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:s.jsx(Fg,{className:"h-8 w-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:_e?"No Grades Found":"No Grades Yet"}),s.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:_e?"No grades match your current search criteria. Try adjusting your search terms.":"Get started by adding your first grade to the system."}),!_e&&s.jsxs(ue,{onClick:()=>U(!0),className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(va,{className:"h-4 w-4 mr-2"}),"Add Your First Grade"]})]}),We>1&&s.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-border",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",Ze+1,"-",Math.min(xt,Qe.length)," of"," ",Qe.length," grades"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>K(Le-1),disabled:Le===1,children:[s.jsx(od,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:We},(Pe,ot)=>ot+1).map(Pe=>s.jsx(ue,{variant:Le===Pe?"default":"outline",size:"sm",onClick:()=>K(Pe),className:"w-8 h-8 p-0",children:Pe},Pe))}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>K(Le+1),disabled:Le===We,children:["Next",s.jsx(Hl,{className:"h-4 w-4"})]})]})]})]})]})]})})]})})}),s.jsx(F3,{isOpen:R,onClose:()=>X(!1),onSubmit:Kt,schoolId:Y,editMode:!1},"create"),s.jsx(F3,{isOpen:D,onClose:()=>{C(!1),M(null)},onSubmit:Ns,schoolId:Y,editMode:!0,student:z},(z==null?void 0:z.id)||"create"),s.jsx(UX,{isOpen:$,onClose:()=>{B(!1),M(null)},student:z}),z&&s.jsx(nc,{open:Q,onOpenChange:oe,children:s.jsxs(ll,{children:[s.jsxs(cl,{children:[s.jsx(ul,{children:"Are you sure?"}),s.jsxs(hl,{children:['This action cannot be undone. This will permanently delete the student "',z.first_name||"Unknown"," ",z.last_name||"",'" and remove their data from our servers.']})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Cancel"}),s.jsx(fl,{onClick:Ts,className:"bg-red-600 hover:bg-red-700",disabled:!z.id,children:"Delete Student"})]})]})}),s.jsx(D3,{isOpen:ae,onClose:()=>U(!1),onSubmit:qe,schoolId:Y,editMode:!1}),s.jsx(D3,{isOpen:Z,onClose:()=>{W(!1),te(null)},onSubmit:ks,schoolId:Y,editMode:!0,grade:re}),s.jsx(nc,{open:ve,onOpenChange:A,children:s.jsxs(ll,{children:[s.jsxs(cl,{children:[s.jsx(ul,{children:"Are you sure?"}),s.jsxs(hl,{children:['This action cannot be undone. This will permanently delete the grade "',(re==null?void 0:re.name)||"Unknown",'" and remove its data from our servers.']})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Cancel"}),s.jsx(fl,{onClick:mt,className:"bg-red-600 hover:bg-red-700",disabled:!(re!=null&&re.id),children:"Delete Grade"})]})]})}),s.jsx(Ex,{isOpen:ge,onClose:()=>se(!1),title:"Bulk Upload Students",description:"Upload multiple students at once using CSV document. Required fields: First Name, Last Name, Admission Number, Grade (use grade name like 'Grade 1' or just '1'), Gender, Date of Birth (format: YYYY-MM-DD, e.g., 2015-05-15), Parent Phone Number.",acceptedFileTypes:[".csv"],maxFileSize:10,maxFiles:5,onUpload:Ir,onPreview:Sn,uploadType:"students"}),s.jsx(Lx,{isOpen:F,onClose:()=>ne(!1),data:ye,title:"Student Data Preview",columns:["First Name","Middle Name","Last Name","Admission Number","Grade","Section","Gender","Transport Enabled","Route Stops","Parent Phone Number","School ID"]})]})}function oQ({isOpen:e,onClose:t,onSubmit:r}){var w,N,k,P,E,I;const n=lc(),{toast:a}=mr(),{roles:i,loading:o}=xa(T=>T.roles),[l,c]=g.useState({employee_id:"",role:"",status:"active",user:{first_name:"",last_name:"",email:"",phone_number:"",password:"",confirm_password:""}}),[d,u]=g.useState({}),[h,p]=g.useState(!1),[f,y]=g.useState(!1);g.useEffect(()=>{e&&n(gu())},[e,n]);const x=()=>{const T={};return l.employee_id?/^EMP\d{3}$/.test(l.employee_id)||(T.employee_id="Employee ID must be in format EMP001"):T.employee_id="Employee ID is required",l.role||(T.role="Role is required"),l.user.phone_number?/^\+254\d{9}$/.test(l.user.phone_number)||(T.user={...T.user,phone_number:"Phone number must be in format +254XXXXXXXXX"}):T.user={...T.user,phone_number:"Phone number is required"},l.user.password?l.user.password.length<8&&(T.user={...T.user,password:"Password must be at least 8 characters long"}):T.user={...T.user,password:"Password is required"},l.user.password!==l.user.confirm_password&&(T.user={...T.user,confirm_password:"Passwords do not match"}),u(T),Object.keys(T).length===0},j=async T=>{if(T.preventDefault(),!x()){const R=Object.values(d).find(X=>X);if(R){if(typeof R=="string")a({title:"Validation Error",description:R,variant:"destructive"});else if(R&&typeof R=="object"){const X=Object.values(R).find(D=>D);X&&a({title:"Validation Error",description:X,variant:"destructive"})}}return}try{await r({...l,role:parseInt(l.role),school:0}),a({title:"Success",description:"Staff member created successfully"}),t()}catch(R){console.error("Staff submission error:",R)}},v=T=>{const{name:R,value:X}=T.target;if(R.startsWith("user.")){const D=R.split(".")[1];c(C=>({...C,user:{...C.user,[D]:X}}))}else c(D=>({...D,[R]:X}));if(R.includes(".")){const[D,C]=R.split(".");u($=>({...$,[D]:{...$[D],[C]:void 0}}))}else u(D=>({...D,[R]:void 0}))};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Add New Staff Member"})}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"employee_id",children:"Employee ID"}),s.jsx($e,{id:"employee_id",name:"employee_id",value:l.employee_id,onChange:v,placeholder:"EMP001",required:!0,className:d.employee_id?"border-red-500":""}),d.employee_id&&s.jsx("p",{className:"text-sm text-red-500",children:d.employee_id})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"role",children:"Role"}),s.jsxs("select",{id:"role",name:"role",value:l.role,onChange:v,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[s.jsx("option",{value:"",children:"Select a role"}),o?s.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):Array.isArray(i)&&i.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))]}),d.role&&s.jsx("p",{className:"text-sm text-red-500",children:d.role})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"first_name",children:"First Name"}),s.jsx($e,{id:"first_name",name:"user.first_name",value:l.user.first_name,onChange:v,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"last_name",children:"Last Name"}),s.jsx($e,{id:"last_name",name:"user.last_name",value:l.user.last_name,onChange:v,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"email",children:"Email Address"}),s.jsx($e,{id:"email",name:"user.email",type:"email",value:l.user.email,onChange:v,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"phone_number",children:"Phone Number"}),s.jsx($e,{id:"phone_number",name:"user.phone_number",value:l.user.phone_number,onChange:v,placeholder:"+254XXXXXXXXX",required:!0,className:(w=d.user)!=null&&w.phone_number?"border-red-500":""}),((N=d.user)==null?void 0:N.phone_number)&&s.jsx("p",{className:"text-sm text-red-500",children:d.user.phone_number})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{id:"password",name:"user.password",type:h?"text":"password",value:l.user.password,onChange:v,required:!0,className:(k=d.user)!=null&&k.password?"border-red-500":""}),s.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:h?s.jsx(z0,{size:20}):s.jsx(qr,{size:20})})]}),((P=d.user)==null?void 0:P.password)&&s.jsx("p",{className:"text-sm text-red-500",children:d.user.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"confirm_password",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{id:"confirm_password",name:"user.confirm_password",type:f?"text":"password",value:l.user.confirm_password,onChange:v,required:!0,className:(E=d.user)!=null&&E.confirm_password?"border-red-500":""}),s.jsx("button",{type:"button",onClick:()=>y(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:f?s.jsx(z0,{size:20}):s.jsx(qr,{size:20})})]}),((I=d.user)==null?void 0:I.confirm_password)&&s.jsx("p",{className:"text-sm text-red-500",children:d.user.confirm_password})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ue,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white",children:"Add Staff"})]})]})]})})}const lQ=["manage_staff","manage_students","manage_transport","manage_security","view_reports","manage_finance","manage_attendance","manage_timetable","manage_exams","manage_parents","manage_vehicles","manage_routes","manage_trips","manage_grades","manage_settings"];function cQ({isOpen:e,onClose:t,schoolId:r,onSubmit:n}){const[a,i]=g.useState({name:"",description:"",school:r||1,permissions:[],is_system_role:!1,parent_role:void 0}),o=c=>{c.preventDefault(),n(a)},l=c=>{i(d=>({...d,permissions:d.permissions.includes(c)?d.permissions.filter(u=>u!==c):[...d.permissions,c]}))};return g.useEffect(()=>{r&&i(c=>({...c,school:r}))},[r]),s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Create New Role"})}),s.jsxs("form",{onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"name",children:"Role Name"}),s.jsx($e,{id:"name",value:a.name,onChange:c=>i(d=>({...d,name:c.target.value})),placeholder:"e.g., school_admin",required:!0})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"description",children:"Description"}),s.jsx(Kn,{id:"description",value:a.description,onChange:c=>i(d=>({...d,description:c.target.value})),placeholder:"Enter role description",required:!0})]}),s.jsxs("div",{children:[s.jsx(de,{children:"Permissions"}),s.jsx("div",{className:"grid grid-cols-2 gap-4 mt-2",children:lQ.map(c=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ud,{id:c,checked:a.permissions.includes(c),onCheckedChange:()=>l(c)}),s.jsx("label",{htmlFor:c,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:c.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")})]},c))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ud,{id:"is_system_role",checked:a.is_system_role,onCheckedChange:c=>i(d=>({...d,is_system_role:c}))}),s.jsx("label",{htmlFor:"is_system_role",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"System Role"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ue,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white",children:"Create Role"})]})]})]})})}function dQ(){var oe;const e=rr(),{staff:t,loading:r,error:n}=jt(ae=>ae.staff),{roles:a}=jt(ae=>ae.roles),{schools:i}=jt(ae=>ae.schools),l=JSON.parse(localStorage.getItem("profile")||"{}"),[c,d]=g.useState(!1),[u,h]=g.useState(!1),[p,f]=g.useState("staff"),[y,x]=g.useState(null),[j,v]=g.useState(null),[w,N]=g.useState(!1),[k,P]=g.useState(!1),[E,I]=g.useState([]);let T=(i==null?void 0:i.filter(ae=>ae.admin===(l==null?void 0:l.id)))||[];T.length===0&&i&&i.length>0&&(T=i.filter(ae=>{var U;return((U=ae.admin_details)==null?void 0:U.id)===(l==null?void 0:l.id)})||[],T.length===0&&(T=[i[0]]));const R=y||((oe=T[0])==null?void 0:oe.id);g.useEffect(()=>{R?(e(xu({schoolId:R})),e(gu(R))):e(Ul()).catch(ae=>{})},[e,R]),g.useEffect(()=>{T.length>0&&!y&&x(T[0].id)},[T,y]);const X=async ae=>{if(!R){ns.error("Error","No school found for the current admin");return}try{const U=await e(Yh({...ae,school:R}));if(Yh.fulfilled.match(U))ns.success("Staff member added successfully"),d(!1);else if(Yh.rejected.match(U)){const Z=typeof U.payload=="string"?U.payload:"Failed to add staff member";ns.error("Error",Z)}}catch(U){let Z="Failed to add staff member";if(U instanceof Error)try{const W=JSON.parse(U.message);typeof W=="object"&&W!==null?Z=JSON.stringify(W,null,2):Z=U.message}catch{Z=U.message}else Z=String(U);ns.error("Error",Z)}},D=async ae=>{if(!R){`${l==null?void 0:l.id}${JSON.stringify(i)}`,ns.error("Error","No school found for the current admin. Please check your account setup.");return}try{const U=await e(Jh({...ae,school:R}));if(Jh.fulfilled.match(U))ns.success("Role created successfully"),h(!1),e(gu(R));else if(Jh.rejected.match(U)){const Z=typeof U.payload=="string"?U.payload:"Failed to create role";ns.error("Error",Z)}}catch{ns.error("Error","Failed to create role")}},C=async()=>{if(!R){`${l==null?void 0:l.id}${JSON.stringify(i)}`,ns.error("Error","No school found for the current admin. Please check your account setup.");return}try{const ae=await e(Zh(R));if(Zh.fulfilled.match(ae))ns.success("Default roles created successfully"),e(gu(R));else if(Zh.rejected.match(ae)){const U=typeof ae.payload=="string"?ae.payload:"Failed to create default roles";ns.error("Error",U)}}catch{ns.error("Error","Failed to create default roles")}},$=ae=>{const U=a==null?void 0:a.find(Z=>Z.id===ae);return U?U.name:"Unknown Role"},B=async ae=>{try{if(!R)throw new Error("School ID not found");let U=0,Z=0;const W=[];for(let ve=0;ve<ae.length;ve++){const A=ae[ve];try{const z=await Px(A,"staffs");z.success?(U+=z.created_count||0,Z+=z.skipped_count||0,z.errors&&z.errors.length>0&&z.errors.forEach(M=>{typeof M=="string"?W.push(M):M.row&&M.field&&M.message?W.push(`Row ${M.row}, ${M.field}: ${M.message}`):W.push(JSON.stringify(M))})):(Z+=1,W.push(`File "${A.name}": ${z.message}`))}catch(z){Z+=1;const M=z instanceof Error?z.message:"Unknown error";W.push(`File "${A.name}": ${M}`)}}U>0&&ns.success(`Successfully created ${U} staff member(s).${Z>0?` ${Z} skipped.`:""}`),Z>0&&ns.error(`${Z} records were skipped. Check the console for details.`),e(xu({schoolId:R})),N(!1)}catch(U){throw ns.error(U instanceof Error?U.message:"CSV upload failed"),U}},Q=ae=>{I(ae),P(!0)};if(j)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"bg-card rounded-lg shadow p-8 max-w-md text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-destructive mb-4",children:"Something went wrong"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:j}),s.jsx("button",{onClick:()=>{v(null),window.location.reload()},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded",children:"Refresh Page"})]})});try{return s.jsxs("div",{className:"min-h-screen bg-background flex w-full",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-8 py-6 bg-background",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ws,{className:"text-[#f7c624]",size:32}),s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Staff Management"}),!1]}),i&&i.length>1&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-foreground",children:"Select School:"}),s.jsx("select",{value:y||R||"",onChange:ae=>{const U=parseInt(ae.target.value);x(U)},className:"border border-border rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 bg-background text-foreground",children:i.map(ae=>s.jsx("option",{value:ae.id,children:ae.name},ae.id))})]}),s.jsxs("div",{className:"flex gap-4",children:[p==="staff"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:"bg-[#10213f] hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded shadow flex items-center gap-2",onClick:()=>N(!0),children:[s.jsx(pn,{size:20}),"Bulk Upload"]}),s.jsx("button",{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white font-semibold px-5 py-2 rounded shadow",onClick:()=>d(!0),children:"Add New Staff"})]}),p==="roles"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:"bg-[#10213f] hover:bg-[#10213f] text-white font-semibold px-5 py-2 rounded shadow flex items-center gap-2",onClick:C,children:[s.jsx(Ln,{size:20}),"Create Default Roles"]}),s.jsxs("button",{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white font-semibold px-5 py-2 rounded shadow flex items-center gap-2",onClick:()=>h(!0),children:[s.jsx(Ln,{size:20}),"Create Custom Role"]})]})]})]}),s.jsxs("div",{className:"flex border-b border-border mb-6",children:[s.jsx("button",{onClick:()=>f("staff"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${p==="staff"?"border-[#f7c624] text-[#f7c624]":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:s.jsxs("div",{className:"flex text-[#f7c624] items-center gap-2",children:[s.jsx(ws,{size:20}),"Staff Members (",(t==null?void 0:t.length)||0,")"]})}),s.jsx("button",{onClick:()=>f("roles"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${p==="roles"?"border-[#f7c624] text-[#f7c624]":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ln,{size:20}),"Roles (",(a==null?void 0:a.length)||0,")"]})})]}),r&&s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading..."}),n&&s.jsx("div",{className:"text-destructive text-center py-4",children:n}),p==="staff"&&s.jsxs("div",{className:"bg-card rounded-lg shadow p-0 overflow-x-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b bg-muted/50",children:s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Staff Members"})}),!t||t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ws,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No staff members"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding your first staff member."}),s.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded shadow",onClick:()=>d(!0),children:"Add New Staff"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("table",{className:"min-w-full divide-y divide-border",children:[s.jsx("thead",{className:"bg-muted/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"First Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Last Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Phone Number"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Email Address"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Role"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-card divide-y divide-border",children:t==null?void 0:t.map(ae=>{var U,Z,W,ve;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((U=ae.user)==null?void 0:U.first_name)||"N/A"}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((Z=ae.user)==null?void 0:Z.last_name)||"N/A"}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((W=ae.user)==null?void 0:W.phone_number)||"N/A"}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((ve=ae.user)==null?void 0:ve.email)||"N/A"}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:$(ae.role)}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ae.status==="active"?"bg-green-100 text-green-600":"bg-red-100 text-red-500"}`,children:ae.status||"Unknown"})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:s.jsx("button",{className:"p-2 rounded-full hover:bg-muted/30",children:s.jsx(B0,{size:20})})})]},ae.employee_id)})})]}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t bg-muted/50 text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Showing 1-",(t==null?void 0:t.length)||0," of ",(t==null?void 0:t.length)||0]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-1 rounded hover:bg-muted/30",disabled:!0,children:s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{className:"p-1 rounded hover:bg-muted/30",children:s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]}),p==="roles"&&s.jsxs("div",{className:"bg-card rounded-lg shadow p-0 overflow-x-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b bg-muted/50",children:s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Available Roles"})}),!a||a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ln,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No roles available"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Create default roles or add custom roles to get started."}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-4 py-2 rounded shadow flex items-center gap-2",onClick:C,children:[s.jsx(Ln,{size:16}),"Create Default Roles"]}),s.jsxs("button",{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded shadow flex items-center gap-2",onClick:()=>h(!0),children:[s.jsx(Ln,{size:16}),"Create Custom Role"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("table",{className:"min-w-full divide-y divide-border",children:[s.jsx("thead",{className:"bg-muted/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Role Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Description"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Type"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Permissions"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-card divide-y divide-border",children:a==null?void 0:a.map(ae=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("div",{className:"font-medium text-foreground",children:ae.name||"Unnamed Role"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm text-muted-foreground max-w-xs",children:ae.description||"No description available"})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ae.is_system_role?"bg-purple-100 text-purple-600":"bg-blue-100 text-blue-600"}`,children:ae.is_system_role?"System":"Custom"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[ae.permissions&&ae.permissions.slice(0,3).map(U=>s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:U.replace("_"," ")},U)),ae.permissions&&ae.permissions.length>3&&s.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded",children:["+",ae.permissions.length-3," more"]})]})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:s.jsx("button",{className:"p-2 rounded-full hover:bg-muted/30",children:s.jsx(B0,{size:20})})})]},ae.id))})]}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t bg-muted/50 text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Showing 1-",(a==null?void 0:a.length)||0," of ",(a==null?void 0:a.length)||0]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-1 rounded hover:bg-muted/30",disabled:!0,children:s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{className:"p-1 rounded hover:bg-muted/30",children:s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]})]})}),s.jsx(oQ,{isOpen:c,onClose:()=>d(!1),onSubmit:X}),s.jsx(cQ,{isOpen:u,onClose:()=>h(!1),schoolId:R,onSubmit:D}),s.jsx(Ex,{isOpen:w,onClose:()=>N(!1),title:"Bulk Upload Staff",description:"Upload multiple staff members at once using CSV document. Required fields: First Name, Last Name, Employee Number, Email, Mobile Number, Role.",acceptedFileTypes:[".csv"],maxFileSize:10,maxFiles:5,onUpload:B,onPreview:Q,uploadType:"staffs"}),s.jsx(Lx,{isOpen:k,onClose:()=>P(!1),data:E,title:"Staff Data Preview",columns:["First Name","Middle Name","Last Name","Employee Number","Gender","Mobile Number","Email","Status","Role","Can Manage Routes","Can Manage Vehicles","Can Manage Staff","Can Manage Student Trips","Is On Duty","School ID"]})]})}catch(ae){return v(ae instanceof Error?ae.message:"An unexpected error occurred"),null}}function uQ({parent:e,isOpen:t,onClose:r}){var a,i,o,l,c,d;if(!e)return null;const n=u=>({email:"bg-blue-100 text-blue-800",phone:"bg-green-100 text-green-800",sms:"bg-purple-100 text-purple-800"})[u]||"bg-gray-100 text-gray-800";return s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(Ja,{className:"h-5 w-5 text-green-600"}),"Parent Details"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"First Name"}),s.jsx("p",{className:"mt-1 text-gray-900",children:((a=e.user_data)==null?void 0:a.first_name)||((i=e.user_full_name)==null?void 0:i.split(" ")[0])||"-"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Last Name"}),s.jsx("p",{className:"mt-1 text-gray-900",children:((o=e.user_data)==null?void 0:o.last_name)||((l=e.user_full_name)==null?void 0:l.split(" ").slice(1).join(" "))||"-"})]})]})]}),s.jsx(sf,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(Za,{className:"h-4 w-4"}),"Contact Information"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(de,{className:"text-sm font-medium text-gray-600 flex items-center gap-1",children:[s.jsx(ga,{className:"h-3 w-3"}),"Email Address"]}),s.jsx("p",{className:"mt-1 text-gray-900",children:((c=e.user_data)==null?void 0:c.email)||e.user_email||"-"})]}),s.jsxs("div",{children:[s.jsxs(de,{className:"text-sm font-medium text-gray-600 flex items-center gap-1",children:[s.jsx(Za,{className:"h-3 w-3"}),"Phone Number"]}),s.jsx("p",{className:"mt-1 text-gray-900",children:((d=e.user_data)==null?void 0:d.phone_number)||e.phone_number||"-"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Secondary Phone"}),s.jsx("p",{className:"mt-1 text-gray-900",children:e.secondary_phone||"-"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Emergency Contact"}),s.jsx("p",{className:"mt-1 text-gray-900",children:e.emergency_contact||"-"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Preferred Contact Method"}),s.jsx("div",{className:"mt-1",children:s.jsx(De,{className:n(e.preferred_contact_method||"email"),children:e.preferred_contact_method||"email"})})]})]}),s.jsx(sf,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(Nr,{className:"h-4 w-4"}),"Address"]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Home Address"}),s.jsx("p",{className:"mt-1 text-gray-900",children:e.address||"-"})]})]}),s.jsx(sf,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(ws,{className:"h-4 w-4"}),"Authorized Pickup Persons"]}),(()=>{var h;const u=(h=e.authorized_pickup_persons)==null?void 0:h.persons;return u&&Array.isArray(u)&&u.length>0?s.jsx("div",{className:"space-y-3",children:u.map((p,f)=>s.jsx("div",{className:"p-3 border rounded-lg bg-gray-50",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Name"}),s.jsx("p",{className:"mt-1 text-gray-900",children:p.name||"-"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Relation"}),s.jsx("p",{className:"mt-1 text-gray-900",children:p.relation||"-"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Phone"}),s.jsx("p",{className:"mt-1 text-gray-900",children:p.phone||"-"})]})]})},f))}):s.jsx("p",{className:"text-gray-500 italic",children:"No authorized pickup persons listed"})})()]})]})]})})}function hQ({parent:e,isOpen:t,onClose:r,onSave:n}){var j,v,w,N;const[a,i]=g.useState({}),[o,l]=g.useState([]),[c,d]=g.useState(!1);g.useEffect(()=>{var k,P,E,I,T,R,X,D,C;if(e){i({address:e.address||"",emergency_contact:e.emergency_contact||"",preferred_contact_method:e.preferred_contact_method||"email",secondary_phone:e.secondary_phone||"",user_data:{first_name:((k=e.user_data)==null?void 0:k.first_name)||((P=e.user_full_name)==null?void 0:P.split(" ")[0])||"",last_name:((E=e.user_data)==null?void 0:E.last_name)||((I=e.user_full_name)==null?void 0:I.split(" ").slice(1).join(" "))||"",email:((T=e.user_data)==null?void 0:T.email)||e.user_email||"",phone_number:((R=e.user_data)==null?void 0:R.phone_number)||e.user_phone_number||e.phone_number||"",user_type:((X=e.user_data)==null?void 0:X.user_type)||"parent",profile_image:((D=e.user_data)==null?void 0:D.profile_image)||null},authorized_pickup_persons:e.authorized_pickup_persons||{persons:[]}});const $=(C=e.authorized_pickup_persons)==null?void 0:C.persons;$&&Array.isArray($)?l($):l([])}},[e]);const u=k=>{const{name:P,value:E}=k.target;if(P.startsWith("user_data.")){const I=P.split(".")[1];i(T=>({...T,user_data:{...T.user_data,[I]:E}}))}else i(I=>({...I,[P]:E}))},h=(k,P)=>{i(E=>({...E,[k]:P}))},p=()=>{l([...o,{name:"",relation:"",phone:""}])},f=k=>{l(o.filter((P,E)=>E!==k))},y=(k,P,E)=>{const I=[...o];I[k]={...I[k],[P]:E},l(I),i(T=>({...T,authorized_pickup_persons:{persons:I}}))},x=async k=>{if(k.preventDefault(),!!(e!=null&&e.id)){d(!0);try{await n(e.id,a),r()}catch{}finally{d(!1)}}};return e?s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(xs,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Edit Parent"})}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"user_data.first_name",children:"First Name"}),s.jsx($e,{id:"user_data.first_name",name:"user_data.first_name",value:((j=a.user_data)==null?void 0:j.first_name)||"",onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"user_data.last_name",children:"Last Name"}),s.jsx($e,{id:"user_data.last_name",name:"user_data.last_name",value:((v=a.user_data)==null?void 0:v.last_name)||"",onChange:u,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"user_data.email",children:"Email"}),s.jsx($e,{id:"user_data.email",name:"user_data.email",type:"email",value:((w=a.user_data)==null?void 0:w.email)||"",onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"user_data.phone_number",children:"Phone Number"}),s.jsx($e,{id:"user_data.phone_number",name:"user_data.phone_number",value:((N=a.user_data)==null?void 0:N.phone_number)||"",onChange:u,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"address",children:"Address"}),s.jsx(Kn,{id:"address",name:"address",value:a.address||"",onChange:u,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"emergency_contact",children:"Emergency Contact"}),s.jsx($e,{id:"emergency_contact",name:"emergency_contact",value:a.emergency_contact||"",onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"secondary_phone",children:"Secondary Phone"}),s.jsx($e,{id:"secondary_phone",name:"secondary_phone",value:a.secondary_phone||"",onChange:u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"preferred_contact_method",children:"Preferred Contact Method"}),s.jsxs(es,{value:a.preferred_contact_method||"email",onValueChange:k=>h("preferred_contact_method",k),children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select contact method"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"email",children:"Email"}),s.jsx(Ve,{value:"phone",children:"Phone"}),s.jsx(Ve,{value:"sms",children:"SMS"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(de,{children:"Authorized Pickup Persons"}),s.jsxs(ue,{type:"button",variant:"outline",onClick:p,className:"text-sm",children:[s.jsx(va,{className:"h-4 w-4 mr-2"})," Add Person"]})]}),Array.isArray(o)&&o.map((k,P)=>s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Name"}),s.jsx($e,{value:k.name,onChange:E=>y(P,"name",E.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Relation"}),s.jsx($e,{value:k.relation,onChange:E=>y(P,"relation",E.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Phone"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($e,{value:k.phone,onChange:E=>y(P,"phone",E.target.value),required:!0}),P>0&&s.jsx(ue,{type:"button",variant:"destructive",onClick:()=>f(P),className:"px-2",children:""})]})]})]},P))]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:r,disabled:c,children:"Cancel"}),s.jsx(ue,{type:"submit",className:"bg-green-500 hover:bg-green-600",disabled:c,children:c?"Saving...":"Save Changes"})]})]})]})}):null}function fQ(){var be,fe,ke,We,Ze,xt,lt,ht,Nt,Et,Qt,zt,Kt,Ns,Ts,Yt,Rs,Nn,vr,xn;const e=rr(),{parents:t=[],loading:r,error:n}=jt(qe=>qe.parents);g.useEffect(()=>{const qe=localStorage.getItem("schoolId");qe&&e(Vn({schoolId:parseInt(qe)})).then(Te=>{}).catch(Te=>{})},[]),g.useEffect(()=>{if(t.length===0&&!r){const qe=setTimeout(()=>{const Te=localStorage.getItem("schoolId");Te&&e(Vn({schoolId:parseInt(Te)}))},2e3);return()=>clearTimeout(qe)}},[t.length,r,e]);const[a,i]=g.useState(1),[o]=g.useState(10),[l,c]=g.useState(""),[d,u]=g.useState("all"),[h,p]=g.useState([]),[f,y]=g.useState(!1),[x,j]=g.useState(!1),[v,w]=g.useState(!1),[N,k]=g.useState(!1),[P,E]=g.useState(null),[I,T]=g.useState([{name:"",relation:"",phone:""}]),[R,X]=g.useState({}),[D,C]=g.useState(!1),[$,B]=g.useState(!1),[Q,oe]=g.useState(!1),[ae,U]=g.useState([]),[Z,W]=g.useState({user_data:{first_name:"",last_name:"",email:"",phone_number:"",user_phone_number:"",user_type:"parent",profile_image:null},address:"",emergency_contact:"",school:1,preferred_contact_method:"email",secondary_phone:"",authorized_pickup_persons:{persons:I}}),ve=qe=>{const{name:Te,value:mt}=qe.target;if(Te==="user_data.phone_number"||Te==="secondary_phone"||Te==="emergency_contact")if(Te.startsWith("user_data.")){const Wt=Te.split(".")[1];W(Jt=>({...Jt,user_data:{...Jt.user_data,[Wt]:mt}}))}else W(Wt=>({...Wt,[Te]:mt}));else if(Te.startsWith("user_data.")){const Wt=Te.split(".")[1];W(Jt=>({...Jt,user_data:{...Jt.user_data,[Wt]:mt}}))}else W(Wt=>({...Wt,[Te]:mt}))},A=()=>{const qe=Date.now(),Te=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`+254${`07${(qe.toString().slice(-6)+Te).slice(0,8)}`.slice(1)}`},z=qe=>{if(!qe||!qe.trim())return A();const Te=qe.replace(/\D/g,"");return Te.length===0?A():Te.startsWith("254")&&Te.length===12?`+${Te}`:Te.startsWith("0")&&Te.length===10?`+254${Te.slice(1)}`:Te.length===9?`+254${Te}`:Te.length===12?`+${Te}`:Te.length===11&&Te.startsWith("7")?`+254${Te}`:Te.length>=9?`+254${Te.slice(-9)}`:A()},M=(qe,Te)=>{W(mt=>({...mt,[qe]:Te}))},re=()=>{T([...I,{name:"",relation:"",phone:""}])},te=qe=>{T(I.filter((Te,mt)=>mt!==qe))},O=(qe,Te,mt)=>{const Wt=[...I],Jt=Te==="phone"?z(mt):mt;Wt[qe]={...Wt[qe],[Te]:Jt},T(Wt),W(ks=>({...ks,authorized_pickup_persons:{persons:Wt}}))},ce=async qe=>{try{const Te=localStorage.getItem("schoolId");if(!Te)throw new Error("School ID not found");let mt=0,Wt=0;const Jt=[];for(let ks=0;ks<qe.length;ks++){const us=qe[ks];try{const hs=await Px(us,"parents");hs.success?(mt+=hs.created_count||0,Wt+=hs.skipped_count||0,hs.errors&&hs.errors.length>0&&hs.errors.forEach(Ms=>{typeof Ms=="string"?Jt.push(Ms):Ms.row&&Ms.field&&Ms.message?Jt.push(`Row ${Ms.row}, ${Ms.field}: ${Ms.message}`):Jt.push(JSON.stringify(Ms))}),hs.created_users&&hs.created_users.length>0):(Wt+=1,Jt.push(`File "${us.name}": ${hs.message}`))}catch(hs){Wt+=1;const Ms=hs instanceof Error?hs.message:"Unknown error";Jt.push(`File "${us.name}": ${Ms}`)}}mt>0&&Hs({title:"CSV upload completed",description:`Successfully created ${mt} parents.${Wt>0?` ${Wt} skipped.`:""}`}),Wt>0&&Hs({title:"Some records were skipped",description:`${Wt} records were skipped. Check the console for details.`,variant:"destructive"}),e(Vn({schoolId:parseInt(Te)}))}catch(Te){throw Hs({title:"CSV upload failed",description:Te instanceof Error?Te.message:"Unknown error",variant:"destructive"}),Te}},le=qe=>{if(!qe||typeof qe!="string")return!1;const Te=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,mt=qe.trim();return mt.length===0||mt.length>254?!1:Te.test(mt)},Ee=qe=>{U(qe),oe(!0)},_e=async qe=>{var mt,Wt,Jt,ks,us,hs,Ms,Mr,Ir,Sn,Pe,ot,kt,Vt,fs,ir;if(qe.preventDefault(),D)return;X({}),C(!0);const Te={};if((Wt=(mt=Z.user_data)==null?void 0:mt.first_name)!=null&&Wt.trim()||(Te.user_data={...Te.user_data,first_name:"First name is required"}),(ks=(Jt=Z.user_data)==null?void 0:Jt.last_name)!=null&&ks.trim()||(Te.user_data={...Te.user_data,last_name:"Last name is required"}),(hs=(us=Z.user_data)==null?void 0:us.email)!=null&&hs.trim()?le(Z.user_data.email)||(Te.user_data={...Te.user_data,email:"Please enter a valid email address"}):Te.user_data={...Te.user_data,email:"Email is required"},(Mr=(Ms=Z.user_data)==null?void 0:Ms.phone_number)!=null&&Mr.trim()||(Te.user_data={...Te.user_data,phone_number:"Phone number is required"}),(Ir=Z.address)!=null&&Ir.trim()||(Te.address="Address is required"),(Sn=Z.emergency_contact)!=null&&Sn.trim()||(Te.emergency_contact="Emergency contact is required"),Object.keys(Te).length>0){X(Te),C(!1),Hs({title:"Validation Error",description:"Please check the form for errors",variant:"destructive"});return}try{const $s=localStorage.getItem("schoolId");if(!$s){C(!1),Hs({title:"Error",description:"School ID not found. Please log in again.",variant:"destructive"});return}const As=I.filter(Mn=>Mn.name.trim()&&Mn.relation.trim()&&Mn.phone.trim()),Lt=z(Z.emergency_contact),is=z(Z.secondary_phone),pr=z(((Pe=Z.user_data)==null?void 0:Pe.phone_number)||""),ba={user:{first_name:((ot=Z.user_data)==null?void 0:ot.first_name)||"",last_name:((kt=Z.user_data)==null?void 0:kt.last_name)||"",email:((Vt=Z.user_data)==null?void 0:Vt.email)||"",phone_number:pr,user_phone_number:pr,user_type:((fs=Z.user_data)==null?void 0:fs.user_type)||"parent",profile_image:((ir=Z.user_data)==null?void 0:ir.profile_image)||null},address:Z.address,emergency_contact:Lt,school:parseInt($s),preferred_contact_method:Z.preferred_contact_method,secondary_phone:is,authorized_pickup_persons:{persons:As.map(Mn=>({...Mn,phone:z(Mn.phone)}))}},Qn=await e(bv(ba)).unwrap();C(!1),y(!1),Hs({title:"Success",description:"Parent registered successfully"}),W({user_data:{first_name:"",last_name:"",email:"",phone_number:"",user_phone_number:"",user_type:"parent",profile_image:null},address:"",emergency_contact:"",school:parseInt($s),preferred_contact_method:"email",secondary_phone:"",authorized_pickup_persons:{persons:[{name:"",relation:"",phone:""}]}}),T([{name:"",relation:"",phone:""}]),X({}),e(Vn({schoolId:parseInt($s)}))}catch($s){let As="Failed to register parent. Please try again.",Lt={};try{if(typeof $s=="string"){const is=JSON.parse($s);is.message?As=is.message:is.error?As=is.error:is.non_field_errors?As=Array.isArray(is.non_field_errors)?is.non_field_errors.join(", "):is.non_field_errors:is.user_data?(Lt.user_data=is.user_data,As="Please fix the field errors below"):(Object.keys(is).forEach(pr=>{if(pr.startsWith("user_data.")){const ba=pr.replace("user_data.","");Lt.user_data||(Lt.user_data={}),Lt.user_data[ba]=Array.isArray(is[pr])?is[pr][0]:is[pr]}else Lt[pr]=Array.isArray(is[pr])?is[pr][0]:is[pr]}),Object.keys(Lt).length>0&&(As="Please fix the field errors below"))}else $s!=null&&$s.message&&(As=$s.message)}catch{typeof $s=="string"?As=$s:$s!=null&&$s.message&&(As=$s.message)}Object.keys(Lt).length>0?X(Lt):X({general:As}),C(!1),Hs({title:"Registration Failed",description:As,variant:"destructive"})}},Be=async(qe,Te)=>{try{await e(jv({id:qe,data:Te})).unwrap(),Hs({title:"Success",description:"Parent updated successfully"}),w(!1),E(null);const mt=localStorage.getItem("schoolId");mt&&e(Vn({schoolId:parseInt(mt)}))}catch(mt){let Wt="Failed to update parent. Please try again.";try{if(typeof mt=="string"){const Jt=JSON.parse(mt);Jt.message?Wt=Jt.message:Jt.error?Wt=Jt.error:Jt.non_field_errors&&(Wt=Array.isArray(Jt.non_field_errors)?Jt.non_field_errors.join(", "):Jt.non_field_errors)}else mt!=null&&mt.message&&(Wt=mt.message)}catch{typeof mt=="string"?Wt=mt:mt!=null&&mt.message&&(Wt=mt.message)}Hs({title:"Update Failed",description:Wt,variant:"destructive"})}},Ge=async()=>{if(P!=null&&P.id)try{await e(wv(P.id)).unwrap(),Hs({title:"Success",description:"Parent deleted successfully"}),k(!1),E(null)}catch(qe){let Te="Failed to delete parent. Please try again.";try{if(typeof qe=="string"){const mt=JSON.parse(qe);mt.message?Te=mt.message:mt.error?Te=mt.error:mt.non_field_errors&&(Te=Array.isArray(mt.non_field_errors)?mt.non_field_errors.join(", "):mt.non_field_errors)}else qe!=null&&qe.message&&(Te=qe.message)}catch{typeof qe=="string"?Te=qe:qe!=null&&qe.message&&(Te=qe.message)}Hs({title:"Delete Failed",description:Te,variant:"destructive"})}},ut=qe=>{E(qe),j(!0)},Le=qe=>{E(qe),w(!0)},K=qe=>{E(qe),k(!0)},He=qe=>{p(Te=>Te.includes(qe)?Te.filter(mt=>mt!==qe):[...Te,qe])},xe=()=>{h.length===((t==null?void 0:t.length)||0)?p([]):p(t.map(qe=>qe.id))};localStorage.getItem("schoolId");const ge=t.filter(qe=>{var Wt,Jt,ks,us,hs,Ms;return((((Wt=qe.user_data)==null?void 0:Wt.first_name)||((Jt=qe.user_full_name)==null?void 0:Jt.split(" ")[0])||"").toLowerCase().includes(l.toLowerCase())||(((ks=qe.user_data)==null?void 0:ks.last_name)||((us=qe.user_full_name)==null?void 0:us.split(" ").slice(1).join(" "))||"").toLowerCase().includes(l.toLowerCase())||(((hs=qe.user_data)==null?void 0:hs.email)||qe.user_email||"").toLowerCase().includes(l.toLowerCase())||(((Ms=qe.user_data)==null?void 0:Ms.phone_number)||qe.user_phone_number||qe.phone_number||"").toLowerCase().includes(l.toLowerCase()))&&(d==="all"||d==="active")}),se=Math.ceil(ge.length/o),F=(a-1)*o,ne=F+o,ye=ge.slice(F,ne),je=qe=>{i(qe)},Y=qe=>{c(qe),i(1)},Re=qe=>{u(qe),i(1)},Qe=()=>{c(""),u("all"),i(1)},me=()=>{const qe=localStorage.getItem("schoolId");qe&&e(Vn({schoolId:parseInt(qe)})).then(Te=>{}).catch(Te=>{})};return r&&t.length===0?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#f7c624] mx-auto mb-4"}),s.jsx("p",{className:"text-foreground text-lg font-medium",children:"Loading parents..."}),s.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Please wait while we fetch the data"})]})}):n?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx(ze,{className:"w-full max-w-md bg-card",children:s.jsxs(Ue,{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ws,{className:"w-8 h-8 text-destructive"})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Error Loading Parents"}),s.jsx("p",{className:"text-destructive mb-6",children:n}),s.jsx(ue,{onClick:()=>{const qe=localStorage.getItem("schoolId");qe&&e(Vn({schoolId:parseInt(qe)}))},className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Try Again"})]})})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-2 sm:px-4 py-4 w-full max-w-[98vw] mx-auto",children:[s.jsxs("div",{className:"mb-2 flex justify-between",children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[s.jsx(ws,{className:"w-8 h-8 text-[#f7c624]"})," Parents"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{onClick:()=>B(!0),className:"bg-[#10213f] hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(pn,{className:"mr-2 h-4 w-4"})," Bulk Upload"]}),s.jsxs(js,{open:f,onOpenChange:qe=>{!qe&&D||y(qe)},children:[s.jsx(Jf,{asChild:!0,children:s.jsxs(ue,{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(va,{className:"mr-2 h-4 w-4"})," Add New Parent"]})}),s.jsxs(xs,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Add New Parent"})}),s.jsxs("form",{onSubmit:_e,className:"space-y-2",children:[R.general&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Registration Error"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:R.general})})]})]})}),Object.keys(R).length>0&&!R.general&&s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Please fix the following errors:"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[((be=R.user_data)==null?void 0:be.first_name)&&s.jsxs("li",{children:["First name:"," ",R.user_data.first_name]}),((fe=R.user_data)==null?void 0:fe.last_name)&&s.jsxs("li",{children:["Last name:"," ",R.user_data.last_name]}),((ke=R.user_data)==null?void 0:ke.email)&&s.jsxs("li",{children:["Email: ",R.user_data.email]}),((We=R.user_data)==null?void 0:We.phone_number)&&s.jsxs("li",{children:["Phone number:"," ",R.user_data.phone_number]}),R.address&&s.jsxs("li",{children:["Address: ",R.address]}),R.emergency_contact&&s.jsxs("li",{children:["Emergency contact:"," ",R.emergency_contact]}),R.secondary_phone&&s.jsxs("li",{children:["Secondary phone:"," ",R.secondary_phone]}),R.preferred_contact_method&&s.jsxs("li",{children:["Preferred contact method:"," ",R.preferred_contact_method]}),R.authorized_pickup_persons&&s.jsxs("li",{children:["Authorized pickup persons:"," ",R.authorized_pickup_persons]})]})})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"user_data.first_name",children:"First Name"}),s.jsx($e,{id:"user_data.first_name",name:"user_data.first_name",value:((Ze=Z.user_data)==null?void 0:Ze.first_name)||"",onChange:ve,required:!0,className:(xt=R.user_data)!=null&&xt.first_name?"border-red-500":""}),((lt=R.user_data)==null?void 0:lt.first_name)&&s.jsx("p",{className:"text-sm text-red-500",children:R.user_data.first_name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"user_data.last_name",children:"Last Name"}),s.jsx($e,{id:"user_data.last_name",name:"user_data.last_name",value:((ht=Z.user_data)==null?void 0:ht.last_name)||"",onChange:ve,required:!0,className:(Nt=R.user_data)!=null&&Nt.last_name?"border-red-500":""}),((Et=R.user_data)==null?void 0:Et.last_name)&&s.jsx("p",{className:"text-sm text-red-500",children:R.user_data.last_name})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"user_data.email",children:"Email"}),s.jsx($e,{id:"user_data.email",name:"user_data.email",type:"email",value:((Qt=Z.user_data)==null?void 0:Qt.email)||"",onChange:ve,required:!0,className:(zt=R.user_data)!=null&&zt.email?"border-red-500":""}),((Kt=R.user_data)==null?void 0:Kt.email)&&s.jsx("p",{className:"text-sm text-red-500",children:R.user_data.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"user_data.phone_number",children:"Phone Number"}),s.jsx($e,{id:"user_data.phone_number",name:"user_data.phone_number",value:((Ns=Z.user_data)==null?void 0:Ns.phone_number)||"",onChange:ve,placeholder:"e.g., 0722858508 or +254722858508",required:!0,className:(Ts=R.user_data)!=null&&Ts.phone_number?"border-red-500":""}),((Yt=R.user_data)==null?void 0:Yt.phone_number)&&s.jsx("p",{className:"text-sm text-red-500",children:R.user_data.phone_number})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"address",children:"Address"}),s.jsx(Kn,{id:"address",name:"address",value:Z.address,onChange:ve,required:!0,rows:2,className:R.address?"border-red-500 min-h-[60px]":"min-h-[60px]"}),R.address&&s.jsx("p",{className:"text-sm text-red-500",children:R.address})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"emergency_contact",children:"Emergency Contact"}),s.jsx($e,{id:"emergency_contact",name:"emergency_contact",value:Z.emergency_contact,onChange:ve,placeholder:"e.g., 0722858508 or +254722858508",required:!0,className:R.emergency_contact?"border-red-500":""}),R.emergency_contact&&s.jsx("p",{className:"text-sm text-red-500",children:R.emergency_contact})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"secondary_phone",children:"Secondary Phone"}),s.jsx($e,{id:"secondary_phone",name:"secondary_phone",value:Z.secondary_phone,onChange:ve,placeholder:"e.g., 0722858508 or +254722858508",className:R.secondary_phone?"border-red-500":""}),R.secondary_phone&&s.jsx("p",{className:"text-sm text-red-500",children:R.secondary_phone})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"preferred_contact_method",children:"Preferred Contact Method"}),s.jsxs(es,{value:Z.preferred_contact_method,onValueChange:qe=>M("preferred_contact_method",qe),children:[s.jsx(Zt,{className:R.preferred_contact_method?"border-red-500":"",children:s.jsx(ts,{placeholder:"Select contact method"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"email",children:"Email"}),s.jsx(Ve,{value:"phone",children:"Phone"}),s.jsx(Ve,{value:"sms",children:"SMS"})]})]}),R.preferred_contact_method&&s.jsx("p",{className:"text-sm text-red-500",children:R.preferred_contact_method})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(de,{children:"Authorized Pickup Persons"}),s.jsxs(ue,{type:"button",variant:"outline",onClick:re,className:"text-sm",children:[s.jsx(va,{className:"h-4 w-4 mr-2"})," Add Person"]})]}),R.authorized_pickup_persons&&s.jsx("p",{className:"text-sm text-red-500",children:R.authorized_pickup_persons}),I.map((qe,Te)=>s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Name"}),s.jsx($e,{value:qe.name,onChange:mt=>O(Te,"name",mt.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Relation"}),s.jsx($e,{value:qe.relation,onChange:mt=>O(Te,"relation",mt.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Phone"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($e,{value:qe.phone,onChange:mt=>O(Te,"phone",mt.target.value),placeholder:"e.g., 0722858508 or +254722858508",required:!0}),Te>0&&s.jsx(ue,{type:"button",variant:"destructive",onClick:()=>te(Te),className:"px-2",children:""})]})]})]},Te))]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:()=>{y(!1),C(!1),X({})},children:"Cancel"}),s.jsx(ue,{type:"submit",disabled:D,className:"bg-[#f7c624] hover:bg-[#f7c624]/90 disabled:opacity-50 disabled:cursor-not-allowed",children:D?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding Parent..."]}):"Add Parent"})]})]})]})]})]})]}),s.jsxs(ze,{className:"bg-card border-0 rounded-xl",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-2"}),s.jsx("div",{className:"bg-card",children:s.jsx(Ue,{className:"",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx($e,{placeholder:"Search parents by name, email, or phone...",value:l,onChange:qe=>Y(qe.target.value),className:"pl-10 pr-4 py-2 focus:border-[#f7c624] focus:ring-[#f7c624] rounded-full shadow-sm"})]}),s.jsxs(es,{value:d,onValueChange:Re,children:[s.jsx(Zt,{className:"w-full sm:w-40 rounded-full shadow-sm",children:s.jsx(ts,{placeholder:"Filter by status"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Parents"}),s.jsx(Ve,{value:"active",children:"Active"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ue,{variant:"outline",onClick:Qe,className:"px-3 py-2 rounded-full shadow-sm",children:"Clear Filters"}),s.jsx(ue,{variant:"outline",onClick:me,className:"px-3 py-2 rounded-full shadow-sm",children:"Refresh Parents"}),s.jsx(zu,{data:{headers:["Name","Email","Phone Number","Address","Emergency Contact","Secondary Phone","Preferred Contact Method","Authorized Pickup Persons"],data:ge.map(qe=>{var Wt,Jt,ks,us,hs,Ms,Mr;const Te=Array.isArray((Wt=qe.authorized_pickup_persons)==null?void 0:Wt.persons)?qe.authorized_pickup_persons.persons.map(Ir=>`${Ir.name} (${Ir.relation})`).join("; "):"None",mt=((Jt=qe.user_data)==null?void 0:Jt.phone_number)||qe.user_phone_number||qe.phone_number||"";return{name:`${((ks=qe.user_data)==null?void 0:ks.first_name)||((us=qe.user_full_name)==null?void 0:us.split(" ")[0])||""} ${((hs=qe.user_data)==null?void 0:hs.last_name)||((Ms=qe.user_full_name)==null?void 0:Ms.split(" ").slice(1).join(" "))||""}`,email:((Mr=qe.user_data)==null?void 0:Mr.email)||qe.user_email||"",phone_number:mt,address:qe.address||"",emergency_contact:qe.emergency_contact||"",secondary_phone:qe.secondary_phone||"",preferred_contact_method:qe.preferred_contact_method||"",authorized_pickup_persons:Te}}),fileName:"parents_export",title:"Parents Directory"},className:"rounded-full shadow-sm"})]})]})})})]}),s.jsx(Ue,{className:"p-0",children:(ye==null?void 0:ye.length)>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[800px]",children:[s.jsx("thead",{className:"bg-muted/50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"w-10 px-4 py-3 text-left",children:s.jsx("input",{type:"checkbox",checked:h.length===ye.length&&ye.length>0,onChange:xe,className:"rounded text-[#f7c624] focus:ring-[#f7c624]"})}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Phone Number"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Address"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:ye.map((qe,Te)=>{var mt,Wt,Jt,ks,us,hs,Ms,Mr,Ir;return s.jsxs("tr",{className:`transition-colors duration-200 ${Te%2===0?"bg-card":"bg-muted/30"}`,children:[s.jsx("td",{className:"w-10 px-4 py-3",children:s.jsx("input",{type:"checkbox",checked:h.includes(qe.id),onChange:()=>He(qe.id),className:"rounded text-[#f7c624] focus:ring-[#f7c624]"})}),s.jsxs("td",{className:"px-4 py-3 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f7c624]/20 flex items-center justify-center text-[#f7c624] font-bold",children:((Wt=(mt=qe.user_data)==null?void 0:mt.first_name)==null?void 0:Wt[0])||((Jt=qe.user_full_name)==null?void 0:Jt[0])||"?"}),s.jsxs("div",{className:"font-medium text-foreground text-sm",children:[((ks=qe.user_data)==null?void 0:ks.first_name)||((us=qe.user_full_name)==null?void 0:us.split(" ")[0])||"-"," ",((hs=qe.user_data)==null?void 0:hs.last_name)||((Ms=qe.user_full_name)==null?void 0:Ms.split(" ").slice(1).join(" "))||""]})]}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm text-foreground",children:((Mr=qe.user_data)==null?void 0:Mr.email)||qe.user_email||"-"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm text-foreground",children:((Ir=qe.user_data)==null?void 0:Ir.phone_number)||qe.user_phone_number||qe.phone_number||"-"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm text-foreground max-w-xs truncate",children:qe.address||"No address provided"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-[#f7c624]/20 text-[#f7c624] text-xs font-semibold",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-[#f7c624] inline-block"}),"Active"]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ue,{size:"icon",variant:"ghost",onClick:()=>ut(qe),title:"View",children:s.jsx(qr,{className:"h-4 w-4"})}),s.jsx(ue,{size:"icon",variant:"ghost",onClick:()=>Le(qe),title:"Edit",children:s.jsx(jn,{className:"h-4 w-4"})}),s.jsx(ue,{className:"h-6 mt-2 w-6",size:"icon",variant:"destructive",onClick:()=>K(qe),title:"Delete",children:s.jsx(Ea,{className:"h-2.5 w-2.5"})})]})})]},qe.id)})})]})}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border bg-muted/30 rounded-b-xl",children:[s.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:s.jsxs("span",{children:["Showing ",F+1," to"," ",Math.min(ne,ge.length)," of"," ",ge.length," parents"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>je(a-1),disabled:a===1,className:"h-8 px-3 rounded-full",children:[s.jsx(od,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,se)},(qe,Te)=>{let mt;return se<=5||a<=3?mt=Te+1:a>=se-2?mt=se-4+Te:mt=a-2+Te,s.jsx(ue,{variant:a===mt?"default":"outline",size:"sm",onClick:()=>je(mt),className:a===mt?"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white h-8 w-8 p-0 rounded-full":"h-8 w-8 p-0 rounded-full",children:mt},mt)})}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>je(a+1),disabled:a===se,className:"h-8 px-3 rounded-full",children:["Next",s.jsx(Hl,{className:"h-4 w-4"})]})]})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[s.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center mb-4",children:s.jsx(ws,{className:"w-10 h-10 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:l||d!=="all"?"No matching parents found":"No Parents Found"}),s.jsx("p",{className:"text-muted-foreground text-center mb-4 max-w-md text-sm",children:l||d!=="all"?"Try adjusting your search or filter criteria.":"There are no parents registered in your school yet. Add the first parent to get started."}),l||d!=="all"?s.jsx(ue,{onClick:Qe,variant:"outline",className:"rounded-full",children:"Clear Filters"}):s.jsxs(ue,{onClick:()=>y(!0),className:"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(va,{className:"mr-2 h-4 w-4"}),"Add First Parent"]})]})})]})]})}),s.jsx(Ex,{isOpen:$,onClose:()=>B(!1),title:"Bulk Upload Parents",description:"Upload multiple parents at once using CSV document.",acceptedFileTypes:[".csv"],maxFileSize:10,maxFiles:5,onUpload:ce,onPreview:Ee,uploadType:"parents"}),s.jsx(Lx,{isOpen:Q,onClose:()=>oe(!1),data:ae,title:"Parent Data Preview",columns:["Name","Email","Phone Number","Address","Emergency Contact","Secondary Phone","Preferred Contact Method","Authorized Pickup Persons","School ID"]}),s.jsx(uQ,{parent:P,isOpen:x,onClose:()=>{j(!1),E(null)}}),s.jsx(hQ,{parent:P,isOpen:v,onClose:()=>{w(!1),E(null)},onSave:Be}),s.jsx(nc,{open:N,onOpenChange:k,children:s.jsxs(ll,{children:[s.jsxs(cl,{children:[s.jsx(ul,{children:"Are you sure?"}),s.jsxs(hl,{children:['This action cannot be undone. This will permanently delete the parent "',((Rs=P==null?void 0:P.user_data)==null?void 0:Rs.first_name)||((Nn=P==null?void 0:P.user_full_name)==null?void 0:Nn.split(" ")[0])," ",((vr=P==null?void 0:P.user_data)==null?void 0:vr.last_name)||((xn=P==null?void 0:P.user_full_name)==null?void 0:xn.split(" ").slice(1).join(" ")),'" and remove their data from our servers.']})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Cancel"}),s.jsx(fl,{onClick:Ge,className:"bg-red-600 hover:bg-red-700",children:"Delete Parent"})]})]})})]})}const mQ=()=>{var K,He,xe,ge,se,F,ne,ye,je;const e=rr(),{drivers:t,loading:r,error:n}=jt(Y=>Y.drivers),{user:a}=xa(Y=>Y.auth),{schools:i,loading:o,error:l}=jt(Y=>Y.schools),{toast:c}=mr(),[d,u]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:""}),[h,p]=g.useState(!1);g.useRef(null);const f=()=>{u({firstName:"",lastName:"",email:"",phoneNumber:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:""})},y=Y=>{p(Y),Y||f()},[x,j]=g.useState(""),[v,w]=g.useState("all"),[N,k]=g.useState(1),[P]=g.useState(10),[E,I]=g.useState(null),[T,R]=g.useState(!1),[X,D]=g.useState(!1),[C,$]=g.useState(!1),[B,Q]=g.useState(!1),[oe,ae]=g.useState(!1),[U,Z]=g.useState([]),W=Y=>{I(Y),R(!0)},ve=Y=>{I(Y),D(!0)},A=Y=>{I(Y),$(!0)},z=async()=>{try{if(!E){c({title:"Error",description:"No driver selected for deletion",variant:"destructive"});return}await e(Sv(E.id)).unwrap(),c({title:"Success",description:"Driver deleted successfully"}),$(!1),I(null)}catch(Y){let Re="Failed to delete driver";Y instanceof Error?Re=Y.message:typeof Y=="string"&&(Re=Y),c({title:"Error",description:Re,variant:"destructive"})}},M=async Y=>{try{if(!localStorage.getItem("schoolId"))throw new Error("School ID not found");let Qe=0,me=0;const be=[];for(let fe=0;fe<Y.length;fe++){const ke=Y[fe];try{const We=await Px(ke,"drivers");We.success?(Qe+=We.created_count||0,me+=We.skipped_count||0,We.errors&&We.errors.length>0&&We.errors.forEach(Ze=>{typeof Ze=="string"?be.push(Ze):Ze.row&&Ze.field&&Ze.message?be.push(`Row ${Ze.row}, ${Ze.field}: ${Ze.message}`):be.push(JSON.stringify(Ze))}),We.created_users&&We.created_users.length>0):(me+=1,be.push(`File "${ke.name}": ${We.message}`))}catch(We){me+=1;const Ze=We instanceof Error?We.message:"Unknown error";be.push(`File "${ke.name}": ${Ze}`)}}Qe>0&&c({title:"CSV upload completed",description:`Successfully created ${Qe} drivers.${me>0?` ${me} skipped.`:""}`}),me>0&&c({title:"Some records were skipped",description:`${me} records were skipped. Check the console for details.`,variant:"destructive"}),e(Hn())}catch(Re){throw c({title:"CSV upload failed",description:Re instanceof Error?Re.message:"Unknown error",variant:"destructive"}),Re}},re=Y=>{Z(Y),ae(!0)};g.useEffect(()=>{(async()=>{try{await e(Hn()).unwrap();try{const Re=await e(Ul()).unwrap();Array.isArray(Re)}catch{}}catch{}})()},[e]),g.useEffect(()=>{},[l]);const O=(K=((i==null?void 0:i.filter(Y=>Y.admin===(a==null?void 0:a.id)))||[])[0])==null?void 0:K.id,ce=(t==null?void 0:t.filter(Y=>Y&&Y.school===O))||[],le=ce.filter(Y=>{if(!Y||!Y.user_details)return!1;const Re=(Y.user_details.first_name||"").toLowerCase().includes(x.toLowerCase())||(Y.user_details.last_name||"").toLowerCase().includes(x.toLowerCase())||(Y.user_details.email||"").toLowerCase().includes(x.toLowerCase())||(Y.phone_number||Y.user_details.phone_number||"").toLowerCase().includes(x.toLowerCase())||(Y.license_number||"").toLowerCase().includes(x.toLowerCase()),Qe=v==="all"||v==="available"&&Y.is_available||v==="unavailable"&&!Y.is_available;return Re&&Qe}),Ee=Math.ceil(ce.length/P),_e=(N-1)*P,Be=_e+P,Ge=ce.slice(_e,Be);g.useEffect(()=>{k(1)},[x,v]);const ut=()=>{const[Y,Re]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:""}),[Qe,me]=g.useState(!1),be=We=>{const{name:Ze,value:xt}=We.target;if(Ze==="phoneNumber"){let lt=xt.trim();lt=lt.replace(/[\s-]/g,""),lt.startsWith("0")?lt="+254"+lt.substring(1):lt.startsWith("254")&&!lt.startsWith("+")?lt="+"+lt:!lt.startsWith("+")&&lt.length===9&&(lt="+254"+lt),Re(ht=>({...ht,[Ze]:lt}))}else Re(lt=>({...lt,[Ze]:xt}))},fe=We=>{const Ze=new Date().toISOString().split("T")[0];Re(xt=>({...xt,[We]:Ze}))},ke=async We=>{if(We.preventDefault(),Qe)return;me(!0);const Ze=[{field:"firstName",label:"First Name"},{field:"lastName",label:"Last Name"},{field:"email",label:"Email"},{field:"phoneNumber",label:"Phone Number"},{field:"licenseNumber",label:"License Number"},{field:"licenseClass",label:"License Class"},{field:"licenseExpiry",label:"License Expiry"},{field:"lastHealthCheck",label:"Last Health Check"},{field:"lastBackgroundCheck",label:"Last Background Check"}];for(const{field:ht,label:Nt}of Ze)if(!Y[ht]||Y[ht]===""){c({title:"Error",description:`${Nt} is required`,variant:"destructive"}),me(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y.email)){c({title:"Error",description:"Please enter a valid email address",variant:"destructive"}),me(!1);return}const lt={user_data:{first_name:Y.firstName,last_name:Y.lastName,email:Y.email,phone_number:Y.phoneNumber,user_type:"driver",profile_image:null},license_number:Y.licenseNumber,license_expiry:Y.licenseExpiry,license_class:Y.licenseClass,school:O||1,is_available:!0,current_location:{latitude:-1.286389,longitude:36.817223},safety_rating:4.8,on_time_rating:4.9,last_health_check:Y.lastHealthCheck,last_background_check:Y.lastBackgroundCheck};try{await e(Nv(lt)).unwrap(),c({title:"Success",description:"Driver added successfully"}),Re({firstName:"",lastName:"",email:"",phoneNumber:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:""}),me(!1),p(!1),e(Hn())}catch(ht){me(!1);let Nt="Failed to add driver";if(ht instanceof Error)try{const Et=JSON.parse(ht.message);typeof Et=="object"&&Et!==null?Et.email?Nt=`Email: ${Et.email.join(", ")}`:Et.phone_number?Nt=`Phone: ${Et.phone_number.join(", ")}`:Et.license_number?Nt=`License: ${Et.license_number.join(", ")}`:Et.message?Nt=Et.message:Nt=JSON.stringify(Et,null,2):Nt=ht.message}catch{Nt=ht.message}else Nt=String(ht);c({title:"Error",description:Nt,variant:"destructive"})}};return s.jsxs("form",{onSubmit:ke,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"firstName",className:"text-sm font-medium",children:"First Name"}),s.jsx("input",{id:"firstName",name:"firstName",value:Y.firstName,onChange:be,type:"text",placeholder:"Enter first name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"lastName",className:"text-sm font-medium",children:"Last Name"}),s.jsx("input",{id:"lastName",name:"lastName",value:Y.lastName,onChange:be,type:"text",placeholder:"Enter last name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),s.jsx("input",{id:"email",name:"email",value:Y.email,onChange:be,type:"email",placeholder:"Enter email address",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium",children:"Phone Number"}),s.jsx("input",{id:"phoneNumber",name:"phoneNumber",value:Y.phoneNumber,onChange:be,type:"tel",placeholder:"Enter phone number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"licenseNumber",className:"text-sm font-medium",children:"License Number"}),s.jsx("input",{id:"licenseNumber",name:"licenseNumber",value:Y.licenseNumber,onChange:be,type:"text",placeholder:"Enter license number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"licenseClass",className:"text-sm font-medium",children:"License Class"}),s.jsx("input",{id:"licenseClass",name:"licenseClass",value:Y.licenseClass,onChange:be,type:"text",placeholder:"Enter license class",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"licenseExpiry",className:"text-sm font-medium",children:"License Expiry"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"licenseExpiry",name:"licenseExpiry",value:Y.licenseExpiry,onChange:be,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),s.jsx(ue,{type:"button",variant:"outline",size:"sm",onClick:()=>fe("licenseExpiry"),className:"whitespace-nowrap",children:"Today"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"lastHealthCheck",className:"text-sm font-medium",children:"Last Health Check"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"lastHealthCheck",name:"lastHealthCheck",value:Y.lastHealthCheck,onChange:be,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),s.jsx(ue,{type:"button",variant:"outline",size:"sm",onClick:()=>fe("lastHealthCheck"),className:"whitespace-nowrap",children:"Today"})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"lastBackgroundCheck",className:"text-sm font-medium",children:"Last Background Check"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"lastBackgroundCheck",name:"lastBackgroundCheck",value:Y.lastBackgroundCheck,onChange:be,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),s.jsx(ue,{type:"button",variant:"outline",size:"sm",onClick:()=>fe("lastBackgroundCheck"),className:"whitespace-nowrap",children:"Today"})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:()=>p(!1),className:"flex-1",disabled:Qe,children:"Cancel"}),s.jsx(ue,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90 flex-1",disabled:Qe,children:Qe?s.jsxs(s.Fragment,{children:[s.jsx(Wl,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding Driver..."]}):"Add Driver"})]})]})},Le=()=>{var Ze,xt,lt;const[Y,Re]=g.useState({firstName:((Ze=E==null?void 0:E.user_details)==null?void 0:Ze.first_name)||"",lastName:((xt=E==null?void 0:E.user_details)==null?void 0:xt.last_name)||"",email:((lt=E==null?void 0:E.user_details)==null?void 0:lt.email)||"",phoneNumber:(E==null?void 0:E.phone_number)||"",licenseNumber:(E==null?void 0:E.license_number)||"",licenseClass:(E==null?void 0:E.license_class)||"",licenseExpiry:(E==null?void 0:E.license_expiry)||"",lastHealthCheck:(E==null?void 0:E.last_health_check)||"",lastBackgroundCheck:(E==null?void 0:E.last_background_check)||"",latitude:"-1.286389",longitude:"36.817223"}),[Qe,me]=g.useState(!1);g.useEffect(()=>{var ht,Nt,Et;if(E){let Qt=-1.286389,zt=36.817223;if(E.current_location){if(typeof E.current_location=="object"){const Kt=E.current_location;Kt.coordinates&&Array.isArray(Kt.coordinates)?(zt=Kt.coordinates[0]??36.817223,Qt=Kt.coordinates[1]??-1.286389):Kt.latitude!==void 0&&Kt.longitude!==void 0&&(Qt=Kt.latitude,zt=Kt.longitude)}else if(typeof E.current_location=="string"){const Kt=E.current_location.match(/POINT \(([^ ]+) ([^)]+)\)/);Kt&&(zt=parseFloat(Kt[1])||36.817223,Qt=parseFloat(Kt[2])||-1.286389)}}Re({firstName:((ht=E.user_details)==null?void 0:ht.first_name)||"",lastName:((Nt=E.user_details)==null?void 0:Nt.last_name)||"",email:((Et=E.user_details)==null?void 0:Et.email)||"",phoneNumber:E.phone_number||"",licenseNumber:E.license_number||"",licenseClass:E.license_class||"",licenseExpiry:E.license_expiry||"",lastHealthCheck:E.last_health_check||"",lastBackgroundCheck:E.last_background_check||"",latitude:(Qt??-1.286389).toString(),longitude:(zt??36.817223).toString()})}},[E]);const be=ht=>{const{name:Nt,value:Et}=ht.target;if(Nt==="phoneNumber"){let Qt=Et.trim();Qt=Qt.replace(/[\s-]/g,""),Qt.startsWith("0")?Qt="+254"+Qt.substring(1):Qt.startsWith("254")&&!Qt.startsWith("+")?Qt="+"+Qt:!Qt.startsWith("+")&&Qt.length===9&&(Qt="+254"+Qt),Re(zt=>({...zt,[Nt]:Qt}))}else Re(Qt=>({...Qt,[Nt]:Et}))},fe=ht=>{const Nt=new Date().toISOString().split("T")[0];Re(Et=>({...Et,[ht]:Nt}))},ke=async ht=>{if(ht.preventDefault(),Qe)return;if(me(!0),!E){c({title:"Error",description:"No driver selected for editing",variant:"destructive"}),me(!1);return}const Nt=[{field:"firstName",label:"First Name"},{field:"lastName",label:"Last Name"},{field:"email",label:"Email"},{field:"phoneNumber",label:"Phone Number"},{field:"licenseNumber",label:"License Number"},{field:"licenseClass",label:"License Class"},{field:"licenseExpiry",label:"License Expiry"},{field:"lastHealthCheck",label:"Last Health Check"},{field:"lastBackgroundCheck",label:"Last Background Check"}];for(const{field:zt,label:Kt}of Nt)if(!Y[zt]||Y[zt]===""){c({title:"Error",description:`${Kt} is required`,variant:"destructive"}),me(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y.email)){c({title:"Error",description:"Please enter a valid email address",variant:"destructive"}),me(!1);return}const Qt={user_data:{first_name:Y.firstName,last_name:Y.lastName,email:Y.email,phone_number:Y.phoneNumber,user_type:"driver",profile_image:null},license_number:Y.licenseNumber,license_expiry:Y.licenseExpiry,license_class:Y.licenseClass,school:O||1,is_available:E.is_available,current_location:{latitude:Number(Y.latitude),longitude:Number(Y.longitude)},safety_rating:E.safety_rating,on_time_rating:E.on_time_rating,last_health_check:Y.lastHealthCheck,last_background_check:Y.lastBackgroundCheck};try{await e(_v({id:E.id,data:Qt})).unwrap(),c({title:"Success",description:"Driver updated successfully"}),me(!1),D(!1),I(null),e(Hn())}catch(zt){me(!1);let Kt="Failed to update driver";if(zt instanceof Error)try{const Ns=JSON.parse(zt.message);typeof Ns=="object"&&Ns!==null?Ns.email?Kt=`Email: ${Ns.email.join(", ")}`:Ns.phone_number?Kt=`Phone: ${Ns.phone_number.join(", ")}`:Ns.license_number?Kt=`License: ${Ns.license_number.join(", ")}`:Ns.message?Kt=Ns.message:Kt=JSON.stringify(Ns,null,2):Kt=zt.message}catch{Kt=zt.message}else Kt=String(zt);c({title:"Error",description:Kt,variant:"destructive"})}},We=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(ht=>{Re(Nt=>({...Nt,latitude:ht.coords.latitude.toString(),longitude:ht.coords.longitude.toString()})),c({title:"Success",description:"Current location updated"})},ht=>{c({title:"Error",description:"Failed to get current location: "+ht.message,variant:"destructive"})}):c({title:"Error",description:"Geolocation is not supported by your browser",variant:"destructive"})};return s.jsxs("form",{onSubmit:ke,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editFirstName",className:"text-sm font-medium",children:"First Name"}),s.jsx("input",{id:"editFirstName",name:"firstName",value:Y.firstName,onChange:be,type:"text",placeholder:"Enter first name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLastName",className:"text-sm font-medium",children:"Last Name"}),s.jsx("input",{id:"editLastName",name:"lastName",value:Y.lastName,onChange:be,type:"text",placeholder:"Enter last name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editEmail",className:"text-sm font-medium",children:"Email"}),s.jsx("input",{id:"editEmail",name:"email",value:Y.email,onChange:be,type:"email",placeholder:"Enter email address",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editPhoneNumber",className:"text-sm font-medium",children:"Phone Number"}),s.jsx("input",{id:"editPhoneNumber",name:"phoneNumber",value:Y.phoneNumber,onChange:be,type:"tel",placeholder:"Enter phone number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLicenseNumber",className:"text-sm font-medium",children:"License Number"}),s.jsx("input",{id:"editLicenseNumber",name:"licenseNumber",value:Y.licenseNumber,onChange:be,type:"text",placeholder:"Enter license number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLicenseClass",className:"text-sm font-medium",children:"License Class"}),s.jsx("input",{id:"editLicenseClass",name:"licenseClass",value:Y.licenseClass,onChange:be,type:"text",placeholder:"Enter license class",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLicenseExpiry",className:"text-sm font-medium",children:"License Expiry"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"editLicenseExpiry",name:"licenseExpiry",value:Y.licenseExpiry,onChange:be,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),s.jsx(ue,{type:"button",variant:"outline",size:"sm",onClick:()=>fe("licenseExpiry"),className:"whitespace-nowrap",children:"Today"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLastHealthCheck",className:"text-sm font-medium",children:"Last Health Check"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"editLastHealthCheck",name:"lastHealthCheck",value:Y.lastHealthCheck,onChange:be,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),s.jsx(ue,{type:"button",variant:"outline",size:"sm",onClick:()=>fe("lastHealthCheck"),className:"whitespace-nowrap",children:"Today"})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLastBackgroundCheck",className:"text-sm font-medium",children:"Last Background Check"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"editLastBackgroundCheck",name:"lastBackgroundCheck",value:Y.lastBackgroundCheck,onChange:be,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),s.jsx(ue,{type:"button",variant:"outline",size:"sm",onClick:()=>fe("lastBackgroundCheck"),className:"whitespace-nowrap",children:"Today"})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLatitude",className:"text-sm font-medium",children:"Latitude"}),s.jsx("input",{id:"editLatitude",name:"latitude",value:Y.latitude,onChange:be,type:"number",step:"any",placeholder:"Enter latitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLongitude",className:"text-sm font-medium",children:"Longitude"}),s.jsx("input",{id:"editLongitude",name:"longitude",value:Y.longitude,onChange:be,type:"number",step:"any",placeholder:"Enter longitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(ue,{type:"button",onClick:We,className:"bg-blue-600 hover:bg-blue-700 mb-4 flex items-center gap-2",children:[s.jsx(Wl,{className:"h-4 w-4"}),"Get Current Location"]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:()=>D(!1),className:"flex-1",disabled:Qe,children:"Cancel"}),s.jsx(ue,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 flex-1",disabled:Qe,children:Qe?s.jsxs(s.Fragment,{children:[s.jsx(Wl,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating Driver..."]}):"Update Driver"})]})]})};return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-0 px-0 sm:px-0 py-0 w-full max-w-[98vw] mx-auto",children:[s.jsxs(ze,{className:"bg-card shadow-lg border-0 rounded-xl",children:[s.jsxs(Xe,{className:" border-b border-border flex flex-row w-full items-center justify-between",children:[s.jsxs(tt,{className:"text-xl font-bold text-foreground flex items-center",children:[s.jsx(ws,{className:"w-6 h-6 text-[#f7c624]"}),"Drivers List"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{onClick:()=>Q(!0),className:"bg-[#10213f] hover:bg-[#10213f] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(pn,{className:"mr-2 h-4 w-4"})," Bulk Upload"]}),s.jsxs(js,{open:h,onOpenChange:y,children:[s.jsx(Jf,{asChild:!0,children:s.jsxs(ue,{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(va,{className:"mr-2 h-4 w-4"})," Add Driver"]})}),s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Add New Driver"})}),s.jsx(ut,{})]})]})]})]}),s.jsxs(Ue,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx($e,{placeholder:"Search drivers by name, email, phone, or license...",value:x,onChange:Y=>j(Y.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ld,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs(es,{value:v,onValueChange:w,children:[s.jsx(Zt,{className:"w-[180px]",children:s.jsx(ts,{placeholder:"Filter by status"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Drivers"}),s.jsx(Ve,{value:"available",children:"Available"}),s.jsx(Ve,{value:"unavailable",children:"Unavailable"})]})]}),s.jsx(zu,{data:{headers:["Name","Email","Phone Number","License Number","License Class","License Expiry","Status","Safety Rating","On-time Rating","Last Health Check","Last Background Check"],data:le.map(Y=>{var Re,Qe,me,be,fe,ke;return{name:`${((Re=Y.user_details)==null?void 0:Re.first_name)||""} ${((Qe=Y.user_details)==null?void 0:Qe.last_name)||""}`,email:((me=Y.user_details)==null?void 0:me.email)||"",phone_number:Y.phone_number||((be=Y.user_details)==null?void 0:be.phone_number)||"",license_number:Y.license_number||"",license_class:Y.license_class||"",license_expiry:Y.license_expiry||"",status:Y.is_available?"Available":"Unavailable",safety_rating:((fe=Y.safety_rating)==null?void 0:fe.toString())||"",on_time_rating:((ke=Y.on_time_rating)==null?void 0:ke.toString())||"",last_health_check:Y.last_health_check||"",last_background_check:Y.last_background_check||""}}),fileName:"drivers_export",title:"Drivers Directory"},className:"border-border hover:bg-accent px-3 py-2"})]})]}),r?s.jsx("div",{className:"text-center py-4 text-foreground",children:"Loading drivers..."}):n?s.jsx("div",{className:"text-center py-4 text-destructive",children:n}):s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"Name"}),s.jsx(yt,{children:"Email"}),s.jsx(yt,{children:"Phone"}),s.jsx(yt,{children:"License"}),s.jsx(yt,{children:"Status"}),s.jsx(yt,{children:"Safety Rating"}),s.jsx(yt,{children:"On-time Rating"}),s.jsx(yt,{children:"Actions"})]})}),s.jsx(si,{children:Ge&&Ge.length>0?Ge.map(Y=>{var Re,Qe,me,be,fe,ke;return s.jsxs(hr,{children:[s.jsxs(vt,{children:[((Re=Y.user_details)==null?void 0:Re.first_name)||"N/A"," ",((Qe=Y.user_details)==null?void 0:Qe.last_name)||"N/A"]}),s.jsx(vt,{children:((me=Y.user_details)==null?void 0:me.email)||"N/A"}),s.jsx(vt,{children:Y.phone_number||((be=Y.user_details)==null?void 0:be.phone_number)||"N/A"}),s.jsxs(vt,{children:[Y.license_number||"N/A"," (",Y.license_class||"N/A",")"]}),s.jsx(vt,{children:s.jsx(De,{variant:Y.is_available?"default":"secondary",children:Y.is_available?"Available":"Unavailable"})}),s.jsx(vt,{children:((fe=Y.safety_rating)==null?void 0:fe.toString())||"N/A"}),s.jsx(vt,{children:((ke=Y.on_time_rating)==null?void 0:ke.toString())||"N/A"}),s.jsx(vt,{children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsxs(Ut,{onClick:()=>W(Y),children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"View"]}),s.jsxs(Ut,{onClick:()=>ve(Y),children:[s.jsx(jn,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(Ut,{onClick:()=>A(Y),className:"text-red-600",children:[s.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},Y.id)}):s.jsx(hr,{children:s.jsx(vt,{colSpan:8,className:"text-center",children:"No drivers found"})})})]}),s.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-border",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",_e+1,"-",Math.min(Be,le.length)," of"," ",le.length," drivers",x&&` matching "${x}"`,v!=="all"&&` (${v})`]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>k(N-1),disabled:N===1,children:[s.jsx(od,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Ee},(Y,Re)=>Re+1).map(Y=>s.jsx(ue,{variant:N===Y?"default":"outline",size:"sm",onClick:()=>k(Y),className:"w-8 h-8 p-0",children:Y},Y))}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>k(N+1),disabled:N===Ee,children:["Next",s.jsx(Hl,{className:"h-4 w-4"})]})]})]})]})]}),s.jsx(js,{open:T,onOpenChange:R,children:s.jsxs(xs,{className:"max-w-2xl",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Driver Details"})}),E&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Name"}),s.jsxs("p",{children:[((He=E.user_details)==null?void 0:He.first_name)||"N/A"," ",((xe=E.user_details)==null?void 0:xe.last_name)||"N/A"]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Email"}),s.jsx("p",{children:((ge=E.user_details)==null?void 0:ge.email)||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Phone"}),s.jsx("p",{children:E.phone_number||((se=E.user_details)==null?void 0:se.phone_number)||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"License Number"}),s.jsx("p",{children:E.license_number||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"License Class"}),s.jsx("p",{children:E.license_class||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"License Expiry"}),s.jsx("p",{children:E.license_expiry||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Status"}),s.jsx(De,{variant:E.is_available?"default":"secondary",children:E.is_available?"Available":"Unavailable"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Safety Rating"}),s.jsx("p",{children:((F=E.safety_rating)==null?void 0:F.toString())||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"On-time Rating"}),s.jsx("p",{children:((ne=E.on_time_rating)==null?void 0:ne.toString())||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Last Health Check"}),s.jsx("p",{children:E.last_health_check||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Last Background Check"}),s.jsx("p",{children:E.last_background_check||"N/A"})]})]})})]})}),s.jsx(js,{open:X,onOpenChange:D,children:s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Edit Driver"})}),E&&s.jsx(Le,{})]})}),s.jsx(nc,{open:C,onOpenChange:$,children:s.jsxs(ll,{children:[s.jsxs(cl,{children:[s.jsx(ul,{children:"Are you sure?"}),s.jsxs(hl,{children:["This action cannot be undone. This will permanently delete the driver",E&&` "${((ye=E.user_details)==null?void 0:ye.first_name)||"Unknown"} ${((je=E.user_details)==null?void 0:je.last_name)||"Driver"}"`,"."]})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Cancel"}),s.jsx(fl,{onClick:z,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),s.jsx(Ex,{isOpen:B,onClose:()=>Q(!1),title:"Bulk Upload Drivers",description:"Upload multiple drivers at once using CSV document.",acceptedFileTypes:[".csv"],maxFileSize:10,maxFiles:5,onUpload:M,onPreview:re,uploadType:"drivers"}),s.jsx(Lx,{isOpen:oe,onClose:()=>ae(!1),data:U,title:"Driver Data Preview",columns:["Name","Email","Phone Number","License Number","License Class","License Expiry","Is Assistant Driver","Last Health Check","Last Background Check","School ID"]})]})})})},$3=({formData:e,setFormData:t,onSubmit:r,loading:n,filteredDrivers:a,driversLoading:i,isEditing:o=!1})=>{var d,u,h;const l=p=>{const{name:f,value:y,type:x}=p.target;t(j=>({...j,[f]:x==="number"?Number(y):y}))},c=(p,f)=>{t(y=>({...y,[p]:p==="driver"?Number(f):f}))};return s.jsxs("form",{onSubmit:r,className:"",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"registration_number",children:"Registration Number"}),s.jsx($e,{id:"registration_number",name:"registration_number",value:e.registration_number,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"vehicle_type",children:"Vehicle Type"}),s.jsxs(es,{value:e.vehicle_type,onValueChange:p=>c("vehicle_type",p),children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select vehicle type"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"bus",children:"Bus"}),s.jsx(Ve,{value:"van",children:"Van"}),s.jsx(Ve,{value:"car",children:"Car"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"capacity",children:"Capacity"}),s.jsx($e,{id:"capacity",name:"capacity",type:"number",value:e.capacity,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"driver",children:"Driver"}),s.jsxs(Ko,{children:[s.jsx(Yo,{asChild:!0,children:s.jsxs(ue,{variant:"outline",role:"combobox",className:"w-full justify-between",disabled:i,children:[e.driver===0?"Select driver...":a.find(p=>(p.user_details.id||p.id)===e.driver)?`${(d=a.find(p=>(p.user_details.id||p.id)===e.driver))==null?void 0:d.user_details.first_name} ${(u=a.find(p=>(p.user_details.id||p.id)===e.driver))==null?void 0:u.user_details.last_name} (${(h=a.find(p=>(p.user_details.id||p.id)===e.driver))==null?void 0:h.phone_number})`:"Select driver...",s.jsx(Wo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fo,{className:"w-full p-0",children:s.jsxs(mo,{children:[s.jsx(po,{placeholder:"Search drivers..."}),s.jsxs(xo,{children:[s.jsx(go,{children:"No driver found."}),s.jsx(vo,{children:i?s.jsx(hi,{disabled:!0,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(In,{className:"h-4 w-4 animate-spin"}),"Loading drivers..."]})}):a.length===0?s.jsx(hi,{disabled:!0,children:"No drivers available"}):a.map(p=>s.jsxs(hi,{value:`${p.user_details.first_name} ${p.user_details.last_name} ${p.phone_number||""}`,onSelect:()=>c("driver",(p.user_details.id||p.id).toString()),children:[s.jsx(Or,{className:`mr-2 h-4 w-4 ${e.driver===(p.user_details.id||p.id)?"opacity-100":"opacity-0"}`}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{children:[p.user_details.first_name," ",p.user_details.last_name]}),p.phone_number&&s.jsx("span",{className:"text-xs text-muted-foreground",children:p.phone_number})]})]},p.id))})]})]})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"manufacturer",children:"Manufacturer"}),s.jsx($e,{id:"manufacturer",name:"manufacturer",value:e.manufacturer,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"model",children:"Model"}),s.jsx($e,{id:"model",name:"model",value:e.model,onChange:l,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"year",children:"Year"}),s.jsx($e,{id:"year",name:"year",type:"number",value:e.year,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"fuel_type",children:"Fuel Type"}),s.jsxs(es,{value:e.fuel_type,onValueChange:p=>c("fuel_type",p),children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select fuel type"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"diesel",children:"Diesel"}),s.jsx(Ve,{value:"petrol",children:"Petrol"}),s.jsx(Ve,{value:"electric",children:"Electric"})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"mileage",children:"Mileage"}),s.jsx($e,{id:"mileage",name:"mileage",type:"number",value:e.mileage,onChange:l,required:!0})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Features"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"has_gps",checked:e.has_gps,onChange:p=>t(f=>({...f,has_gps:p.target.checked}))}),s.jsx(de,{htmlFor:"has_gps",children:"GPS"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"has_camera",checked:e.has_camera,onChange:p=>t(f=>({...f,has_camera:p.target.checked}))}),s.jsx(de,{htmlFor:"has_camera",children:"Camera"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"has_emergency_button",checked:e.has_emergency_button,onChange:p=>t(f=>({...f,has_emergency_button:p.target.checked}))}),s.jsx(de,{htmlFor:"has_emergency_button",children:"Emergency Button"})]})]})]}),s.jsx(ue,{type:"submit",disabled:n,className:"w-full bg-[#f7c624] hover:bg-[#f7c624]/90 text-white mt-1",children:n?s.jsxs(s.Fragment,{children:[s.jsx(In,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Updating Vehicle...":"Adding Vehicle..."]}):s.jsx(s.Fragment,{children:o?"Update Vehicle":"Add Vehicle"})})]})};function pQ(){var K,He,xe,ge,se;const e=rr(),{toast:t}=mr(),[r,n]=g.useState(!1),{vehicles:a,loading:i,error:o}=jt(F=>F.vehicles),{user:l}=xa(F=>F.auth),{schools:c}=jt(F=>F.schools),{drivers:d,loading:u}=jt(F=>F.drivers),[h,p]=g.useState(""),[f,y]=g.useState("all"),[x,j]=g.useState(1),[v,w]=g.useState(10),[N,k]=g.useState(null),[P,E]=g.useState(!1),[I,T]=g.useState(!1),[R,X]=g.useState(!1),[D,C]=g.useState(!1),[$,B]=g.useState(!1),[Q,oe]=g.useState(!1),[ae,U]=g.useState([]),Z=(c==null?void 0:c.filter(F=>F.admin===(l==null?void 0:l.id)))||[],W=(K=Z[0])==null?void 0:K.id,ve=(d==null?void 0:d.filter(F=>(F==null?void 0:F.school)===W))||[];g.useEffect(()=>{(async()=>{try{if(W){const ne=await e(pu({schoolId:W}))}await e(Hn())}catch{}})()},[e,W]),g.useEffect(()=>{},[l,W,c,d,Z,ve,u]);const A=a.filter(F=>{var je,Y,Re,Qe;if(!F)return!1;const ne=(F.registration_number||"").toLowerCase().includes(h.toLowerCase())||(F.manufacturer||"").toLowerCase().includes(h.toLowerCase())||(F.model||"").toLowerCase().includes(h.toLowerCase())||(F.vehicle_type||"").toLowerCase().includes(h.toLowerCase())||(((Y=(je=ve.find(me=>(me==null?void 0:me.id)===F.driver))==null?void 0:je.user_details)==null?void 0:Y.first_name)||"").toLowerCase().includes(h.toLowerCase())||(((Qe=(Re=ve.find(me=>(me==null?void 0:me.id)===F.driver))==null?void 0:Re.user_details)==null?void 0:Qe.last_name)||"").toLowerCase().includes(h.toLowerCase()),ye=f==="all"||f==="active"&&F.is_active||f==="inactive"&&!F.is_active;return ne&&ye}),z=Math.ceil(A.length/v),M=(x-1)*v,re=M+v,te=A.slice(M,re);g.useEffect(()=>{j(1)},[h,f,v]);const O=F=>{k(F),E(!0)},ce=F=>{k(F),ut({registration_number:F.registration_number||"",vehicle_type:F.vehicle_type||"bus",capacity:F.capacity||40,school:W,driver:F.driver||0,manufacturer:F.manufacturer||"",model:F.model||"",year:F.year||new Date().getFullYear(),fuel_type:F.fuel_type||"diesel",is_active:F.is_active??!0,mileage:F.mileage||0,has_gps:F.has_gps??!0,has_camera:F.has_camera??!0,has_emergency_button:F.has_emergency_button??!0}),T(!0)},le=F=>{k(F),X(!0)},Ee=async()=>{try{if(!N){t({title:"Error",description:"No vehicle selected for deletion",variant:"destructive"});return}if(!N.id){t({title:"Error",description:"Vehicle ID is missing",variant:"destructive"});return}const F=typeof N.id=="string"?parseInt(N.id):N.id;await e(Av(F)).unwrap(),t({title:"Success",description:"Vehicle deleted successfully"}),X(!1),k(null)}catch(F){let ne="Failed to delete vehicle";F instanceof Error?ne=F.message:typeof F=="string"&&(ne=F),t({title:"Error",description:ne,variant:"destructive"})}},_e=async F=>{try{const ne=localStorage.getItem("schoolId");if(!ne)throw new Error("School ID not found");let ye=0,je=0;const Y=[];for(let Re=0;Re<F.length;Re++){const Qe=F[Re];try{const me=await Px(Qe,"vehicles");me.success?(ye+=me.created_count||0,je+=me.skipped_count||0,me.errors&&me.errors.length>0&&me.errors.forEach(be=>{typeof be=="string"?Y.push(be):be.row&&be.field&&be.message?Y.push(`Row ${be.row}, ${be.field}: ${be.message}`):Y.push(JSON.stringify(be))})):(je+=1,Y.push(`File ${Qe.name}: ${me.message}`))}catch(me){je+=1,Y.push(`File ${Qe.name}: ${me.message||"Upload failed"}`)}}ne&&await e(pu({schoolId:parseInt(ne)})),ye>0&&t({title:"Upload Complete",description:`Successfully uploaded ${ye} vehicle(s). ${je>0?`${je} failed.`:""}`}),Y.length>0&&t({title:"Upload Errors",description:`${Y.length} error(s) occurred. Check console for details.`,variant:"destructive"}),B(!1)}catch(ne){t({title:"Upload Failed",description:ne.message||"Failed to upload vehicles",variant:"destructive"})}},Be=F=>{U(F),oe(!0)},[Ge,ut]=g.useState({registration_number:"",vehicle_type:"bus",capacity:40,school:W||null,driver:0,manufacturer:"",model:"",year:new Date().getFullYear(),fuel_type:"diesel",is_active:!0,mileage:0,has_gps:!0,has_camera:!0,has_emergency_button:!0});g.useEffect(()=>{W&&ut(F=>({...F,school:W}))},[W]);const Le=async F=>{if(F.preventDefault(),!D){if(C(!0),!W){t({title:"Error",description:"No school found. Please contact your administrator.",variant:"destructive"}),C(!1);return}try{N&&N.id?(await e(kv({id:N.id,data:Ge})).unwrap(),t({title:"Success",description:"Vehicle updated successfully"}),T(!1),k(null)):(await e(Cv(Ge)).unwrap(),t({title:"Success",description:"Vehicle added successfully"}),n(!1)),ut({registration_number:"",vehicle_type:"bus",capacity:40,school:W,driver:0,manufacturer:"",model:"",year:new Date().getFullYear(),fuel_type:"diesel",is_active:!0,mileage:0,has_gps:!0,has_camera:!0,has_emergency_button:!0})}catch(ne){let ye=N?"Failed to update vehicle":"Failed to add vehicle";if(ne&&typeof ne=="object"){const je=ne;if(je.message)try{const Y=JSON.parse(je.message);typeof Y=="object"&&Y!==null?ye=Object.entries(Y).map(([Qe,me])=>`${Qe.replace(/_/g," ").replace(/\b\w/g,fe=>fe.toUpperCase())}: ${Array.isArray(me)?me.join(", "):me}`).join("; "):ye=je.message}catch{ye=je.message}else je.detail&&(ye=je.detail)}else typeof ne=="string"?ye=ne:ne instanceof Error&&(ye=ne.message);t({title:"Error",description:ye,variant:"destructive",duration:6e3})}finally{C(!1)}}};return i?s.jsx("div",{className:"min-h-screen bg-background p-3 flex w-full",children:s.jsx("div",{className:"flex-1",children:s.jsx("main",{className:"flex-1 bg-background",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(In,{className:"h-5 w-5 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading vehicles..."})]})})})})}):o?s.jsx("div",{className:"min-h-screen bg-background p-3 flex w-full",children:s.jsx("div",{className:"flex-1",children:s.jsx("main",{className:"flex-1 bg-background",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-destructive mb-4",children:o}),s.jsx(ue,{onClick:()=>window.location.reload(),children:"Try Again"})]})})})})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-2 sm:px-4 py-4 w-full max-w-[98vw] mx-auto",children:[s.jsxs("div",{className:"mb-2 flex justify-between",children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[s.jsx(Vl,{className:"w-8 h-8 text-[#f7c624]"})," Vehicles"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{onClick:()=>B(!0),className:"bg-[#10213f] hover:bg-[#10213f] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",disabled:!W,title:W?"":"No school found. Please contact your administrator.",children:[s.jsx(pn,{className:"mr-2 h-4 w-4"})," Bulk Upload"]}),s.jsxs(js,{open:r,onOpenChange:n,children:[s.jsx(Jf,{asChild:!0,children:s.jsxs(ue,{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",disabled:!W,title:W?"":"No school found. Please contact your administrator.",children:[s.jsx(va,{className:"mr-2 h-4 w-4"})," Add Vehicle"]})}),s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Add New Vehicle"})}),s.jsx($3,{formData:Ge,setFormData:ut,onSubmit:Le,loading:D,filteredDrivers:ve,driversLoading:u,isEditing:!1})]})]})]})]}),s.jsxs(ze,{className:"bg-card border-0 rounded-xl",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-2"}),s.jsx("div",{className:"bg-card",children:s.jsx(Ue,{className:"",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx($e,{placeholder:"Search vehicles by registration, manufacturer, model, or driver...",value:h,onChange:F=>p(F.target.value),className:"pl-10 pr-4 py-2 focus:border-[#f7c624] focus:ring-[#f7c624] rounded-full shadow-sm"}),h&&s.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Found ",A.length," vehicle",A.length!==1?"s":""]})]}),s.jsxs(es,{value:f,onValueChange:y,children:[s.jsx(Zt,{className:"w-full sm:w-40 rounded-full shadow-sm",children:s.jsx(ts,{placeholder:"Filter by status"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Vehicles"}),s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"inactive",children:"Inactive"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ue,{variant:"outline",onClick:()=>{p(""),y("all"),j(1)},className:"px-3 py-2 rounded-full shadow-sm",children:"Clear Filters"}),s.jsx(zu,{data:{headers:["Registration Number","Driver","Vehicle Type","Capacity","Manufacturer","Model","Year","Fuel Type","Status","Mileage","GPS","Camera","Emergency Button"],data:A.map(F=>{var ne,ye,je,Y,Re,Qe,me;return{registration_number:F.registration_number||"",driver:ve.find(be=>(be==null?void 0:be.id)===F.driver)?`${((ye=(ne=ve.find(be=>(be==null?void 0:be.id)===F.driver))==null?void 0:ne.user_details)==null?void 0:ye.first_name)||""} ${((Y=(je=ve.find(be=>(be==null?void 0:be.id)===F.driver))==null?void 0:je.user_details)==null?void 0:Y.last_name)||""}`:"Not Assigned",vehicle_type:F.vehicle_type||"",capacity:((Re=F.capacity)==null?void 0:Re.toString())||"",manufacturer:F.manufacturer||"",model:F.model||"",year:((Qe=F.year)==null?void 0:Qe.toString())||"",fuel_type:F.fuel_type||"",status:F.is_active?"Active":"Inactive",mileage:((me=F.mileage)==null?void 0:me.toString())||"",gps:F.has_gps?"Yes":"No",camera:F.has_camera?"Yes":"No",emergency_button:F.has_emergency_button?"Yes":"No"}}),fileName:"vehicles_export",title:"Vehicles Directory"},className:"rounded-full shadow-sm"})]})]})})})]}),s.jsx(Ue,{className:"p-0",children:i?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(In,{className:"h-5 w-5 animate-spin text-primary"}),s.jsx("span",{className:"text-muted-foreground",children:"Loading vehicles..."})]})}):o?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-destructive mb-4",children:o}),s.jsx(ue,{onClick:()=>window.location.reload(),children:"Try Again"})]})}):a.length===0?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx(Vl,{className:"h-12 w-12 text-muted-foreground/50"}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"No vehicles found"}),s.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Get started by adding your first vehicle"})]}),s.jsxs(ue,{onClick:()=>n(!0),className:"mt-2",disabled:!W,children:[s.jsx(va,{className:"mr-2 h-4 w-4"}),"Add Vehicle"]})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[800px]",children:[s.jsx("thead",{className:"bg-muted/50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Registration No."}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Driver"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Type"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Capacity"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-foreground text-sm",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:te.map((F,ne)=>{var Y,Re;if(!F)return null;const ye=ve.find(Qe=>(Qe==null?void 0:Qe.id)===F.driver),je=ye?`${((Y=ye.user_details)==null?void 0:Y.first_name)||""} ${((Re=ye.user_details)==null?void 0:Re.last_name)||""}`.trim():"Not Assigned";return s.jsxs("tr",{className:`transition-colors duration-200 ${ne%2===0?"bg-card":"bg-muted/30"} hover:bg-[#f7c624]/10`,children:[s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center text-blue-700 dark:text-blue-400 font-bold",children:s.jsx(Vl,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-foreground text-sm",children:F.registration_number||"N/A"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[F.manufacturer," ",F.model]})]})]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f7c624]/20 flex items-center justify-center text-[#f7c624] font-bold",children:je.split(" ").map(Qe=>Qe[0]).join("").toUpperCase()}),s.jsx("div",{className:"text-sm text-foreground",children:je})]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx(De,{variant:"outline",className:"capitalize font-medium",children:F.vehicle_type||"N/A"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"text-sm font-medium text-foreground",children:F.capacity||"N/A"}),s.jsx("div",{className:"text-xs text-muted-foreground ml-1",children:"seats"})]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${F.is_active?"bg-[#f7c624]/20 text-[#f7c624]":"bg-muted text-muted-foreground"}`,children:[s.jsx("span",{className:`w-2 h-2 rounded-full inline-block ${F.is_active?"bg-[#f7c624]":"bg-muted-foreground"}`}),F.is_active?"Active":"Inactive"]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ue,{size:"icon",variant:"ghost",onClick:()=>O(F),title:"View Details",children:s.jsx(qr,{className:"h-4 w-4"})}),s.jsx(ue,{size:"icon",variant:"ghost",onClick:()=>ce(F),title:"Edit Vehicle",children:s.jsx(jn,{className:"h-4 w-4"})}),s.jsx(ue,{className:"h-6 mt-2 w-6",size:"icon",variant:"destructive",onClick:()=>le(F),title:"Delete Vehicle",children:s.jsx(Ea,{className:"h-4 w-4"})})]})})]},F.id)})})]})}),s.jsx("div",{className:"bg-card border-t border-border",children:s.jsxs("div",{className:"px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Showing"}),s.jsx("span",{className:"bg-muted px-2 py-1 rounded-md font-semibold text-foreground",children:M+1}),s.jsx("span",{children:"to"}),s.jsx("span",{className:"bg-muted px-2 py-1 rounded-md font-semibold text-foreground",children:Math.min(re,A.length)}),s.jsx("span",{children:"of"}),s.jsx("span",{className:"bg-muted px-2 py-1 rounded-md font-semibold text-foreground",children:A.length}),s.jsx("span",{children:"vehicles"})]}),A.length>0&&s.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["Page ",x," of ",z]})]})]}),z>1&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:x===1,className:"h-9 px-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(od,{className:"h-4 w-4 mr-1"}),s.jsx(od,{className:"h-4 w-4 -ml-2"})]}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>j(x-1),disabled:x===1,className:"h-9 px-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(od,{className:"h-4 w-4 mr-1"}),"Previous"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[x>3&&z>5&&s.jsxs(s.Fragment,{children:[s.jsx(ue,{variant:"outline",size:"sm",onClick:()=>j(1),className:"h-9 w-9 p-0 font-medium",children:"1"}),x>4&&s.jsx("span",{className:"px-2 text-muted-foreground",children:"..."})]}),Array.from({length:z},(F,ne)=>ne+1).filter(F=>z<=5?!0:x<=3?F<=5:x>=z-2?F>=z-4:Math.abs(F-x)<=1).map(F=>s.jsx(ue,{variant:x===F?"default":"outline",size:"sm",onClick:()=>j(F),className:`h-9 w-9 p-0 font-medium transition-all duration-200 ${x===F?"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white shadow-md":""}`,children:F},F)),x<z-2&&z>5&&s.jsxs(s.Fragment,{children:[x<z-3&&s.jsx("span",{className:"px-2 text-muted-foreground",children:"..."}),s.jsx(ue,{variant:"outline",size:"sm",onClick:()=>j(z),className:"h-9 w-9 p-0 font-medium",children:z})]})]}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>j(x+1),disabled:x===z,className:"h-9 px-3 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",s.jsx(Hl,{className:"h-4 w-4 ml-1"})]}),s.jsxs(ue,{variant:"outline",size:"sm",onClick:()=>j(z),disabled:x===z,className:"h-9 px-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Hl,{className:"h-4 w-4 ml-1"}),s.jsx(Hl,{className:"h-4 w-4 -mr-2"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx("span",{children:"Show:"}),s.jsxs(es,{value:v.toString(),onValueChange:F=>{w(parseInt(F))},children:[s.jsx(Zt,{className:"h-8 w-16 text-xs",children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"5",children:"5"}),s.jsx(Ve,{value:"10",children:"10"}),s.jsx(Ve,{value:"20",children:"20"}),s.jsx(Ve,{value:"50",children:"50"})]})]}),s.jsx("span",{children:"per page"})]})]})})]})})]})]})}),s.jsx(js,{open:P,onOpenChange:E,children:s.jsxs(xs,{className:"max-w-2xl",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Vehicle Details"})}),N&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Registration Number"}),s.jsx("p",{children:N.registration_number||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Vehicle Type"}),s.jsx("p",{className:"capitalize",children:N.vehicle_type||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Manufacturer"}),s.jsx("p",{children:N.manufacturer||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Model"}),s.jsx("p",{children:N.model||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Year"}),s.jsx("p",{children:N.year||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Capacity"}),s.jsxs("p",{children:[N.capacity||"N/A"," passengers"]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Fuel Type"}),s.jsx("p",{className:"capitalize",children:N.fuel_type||"N/A"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Mileage"}),s.jsxs("p",{children:[N.mileage||"N/A"," km"]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Status"}),s.jsx(De,{variant:N.is_active?"default":"secondary",children:N.is_active?"Active":"Inactive"})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Driver"}),s.jsxs("p",{children:[((xe=(He=ve.find(F=>{var ne;return((ne=F==null?void 0:F.user_details)==null?void 0:ne.id)===N.driver}))==null?void 0:He.user_details)==null?void 0:xe.first_name)||""," ",((se=(ge=ve.find(F=>{var ne;return((ne=F==null?void 0:F.user_details)==null?void 0:ne.id)===N.driver}))==null?void 0:ge.user_details)==null?void 0:se.last_name)||"Not assigned"]})]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"font-semibold",children:"Features"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[N.has_gps&&s.jsx(De,{variant:"outline",children:"GPS"}),N.has_camera&&s.jsx(De,{variant:"outline",children:"Camera"}),N.has_emergency_button&&s.jsx(De,{variant:"outline",children:"Emergency Button"})]})]})]})]})}),s.jsx(js,{open:I,onOpenChange:T,children:s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Edit Vehicle"})}),s.jsx($3,{formData:Ge,setFormData:ut,onSubmit:Le,loading:D,filteredDrivers:ve,driversLoading:u,isEditing:!0})]})}),s.jsx(nc,{open:R,onOpenChange:X,children:s.jsxs(ll,{children:[s.jsxs(cl,{children:[s.jsx(ul,{children:"Are you sure?"}),s.jsxs(hl,{children:["This action cannot be undone. This will permanently delete the vehicle",N&&` "${N.registration_number}"`,"."]})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Cancel"}),s.jsx(fl,{onClick:Ee,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),s.jsx(Ex,{isOpen:$,onClose:()=>B(!1),title:"Bulk Upload Vehicles",description:"Upload multiple vehicles at once using CSV document. Download the template to see the correct format. Required fields: registration_number, school_id, vehicle_type, capacity, model, year, fuel_type, manufacturer, is_active, has_gps, has_camera, has_emergency_button, driver_phone_number.",acceptedFileTypes:[".csv"],maxFileSize:10,maxFiles:5,onUpload:_e,onPreview:Be,uploadType:"vehicles"}),s.jsx(Lx,{isOpen:Q,onClose:()=>oe(!1),data:ae,title:"Vehicle Data Preview",columns:["Registration Number","Vehicle Type","Capacity","Model","Year","Fuel Type","Manufacturer","Is Active","Has GPS","Has Camera","Has Emergency Button","Driver Phone Number"]})]})}const xQ=()=>{const{trips:e}=jt(f=>f.trips),{schools:t}=jt(f=>f.schools),{parents:r}=jt(f=>f.parents),{drivers:n}=jt(f=>f.drivers),{students:a}=jt(f=>f.students),{vehicles:i}=jt(f=>f.vehicles),{routes:o}=jt(f=>f.routes),[l,c]=g.useState("week"),d={totalTrips:e.length,completedTrips:e.filter(f=>f.status==="completed").length,activeTrips:e.filter(f=>f.status==="ongoing").length,delayedTrips:e.filter(f=>f.status==="delayed").length,morningTrips:e.filter(f=>f.trip_type==="morning").length,afternoonTrips:e.filter(f=>f.trip_type==="afternoon").length,eveningTrips:e.filter(f=>f.trip_type==="evening").length,scheduledTrips:e.filter(f=>f.status==="scheduled").length,cancelledTrips:e.filter(f=>f.status==="cancelled").length,totalSchools:t.length,totalParents:r.length,totalDrivers:n.length,totalStudents:a.length,totalVehicles:i.length,totalRoutes:o.length,completionRate:e.length>0?(e.filter(f=>f.status==="completed").length/e.length*100).toFixed(1):"0",delayRate:e.length>0?(e.filter(f=>f.status==="delayed").length/e.length*100).toFixed(1):"0",cancellationRate:e.length>0?(e.filter(f=>f.status==="cancelled").length/e.length*100).toFixed(1):"0"},u=[...e].sort((f,y)=>new Date(y.created_at||"").getTime()-new Date(f.created_at||"").getTime()).slice(0,5),h=f=>{try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return f}},p=f=>{switch(f.toLowerCase()){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"ongoing":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"delayed":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return s.jsxs("div",{className:"space-y-6 w-full",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Completion Rate"}),s.jsx(_o,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[d.completionRate,"%"]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.completedTrips," of ",d.totalTrips," trips"]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Delay Rate"}),s.jsx(fn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[d.delayRate,"%"]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.delayedTrips," delayed trips"]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Active Operations"}),s.jsx(qi,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.activeTrips}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Fleet"}),s.jsx(Nr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:d.totalVehicles}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Available vehicles"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(uE,{className:"h-5 w-5"}),"Trip Type Distribution"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Morning"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.morningTrips}),s.jsxs(De,{variant:"outline",children:[(d.morningTrips/d.totalTrips*100).toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Afternoon"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.afternoonTrips}),s.jsxs(De,{variant:"outline",children:[(d.afternoonTrips/d.totalTrips*100).toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Evening"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.eveningTrips}),s.jsxs(De,{variant:"outline",children:[(d.eveningTrips/d.totalTrips*100).toFixed(1),"%"]})]})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(ib,{className:"h-5 w-5"}),"Trip Status Distribution"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Completed"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.completedTrips}),s.jsxs(De,{variant:"outline",children:[d.completionRate,"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Scheduled"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.scheduledTrips}),s.jsxs(De,{variant:"outline",children:[(d.scheduledTrips/d.totalTrips*100).toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Delayed"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.delayedTrips}),s.jsxs(De,{variant:"outline",children:[d.delayRate,"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Cancelled"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.cancelledTrips}),s.jsxs(De,{variant:"outline",children:[d.cancellationRate,"%"]})]})]})]})})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(ws,{className:"h-5 w-5"}),"School Overview"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d.totalStudents}),s.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Students"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:d.totalParents}),s.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Parents"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:d.totalDrivers}),s.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Drivers"})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:d.totalVehicles}),s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Vehicles"})]}),s.jsxs("div",{className:"text-center p-4 bg-indigo-50 dark:bg-indigo-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:d.totalRoutes}),s.jsx("div",{className:"text-sm text-indigo-600 dark:text-indigo-400",children:"Routes"})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(pa,{className:"h-5 w-5"}),"Recent Trip Activity"]}),s.jsxs(ue,{variant:"outline",size:"sm",children:[s.jsx(pn,{className:"h-4 w-4 mr-2"}),"Export Data"]})]})}),s.jsx(Ue,{children:s.jsx("div",{className:"space-y-4",children:u.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(pa,{className:"mx-auto h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-foreground",children:"No recent trips"}),s.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Trip activity will appear here once trips are created."})]}):u.map(f=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qi,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:f.route_name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ja,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:f.driver_name})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(De,{className:p(f.status),children:f.status}),s.jsx("span",{className:"text-sm text-muted-foreground",children:f.created_at?h(f.created_at):"N/A"})]})]},f.id))})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(jq,{className:"h-5 w-5"}),"Quick Analytics Actions"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(ue,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[s.jsx(_o,{className:"h-6 w-6"}),s.jsx("span",{children:"Performance Report"})]}),s.jsxs(ue,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[s.jsx(ws,{className:"h-6 w-6"}),s.jsx("span",{children:"User Analytics"})]}),s.jsxs(ue,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[s.jsx(Nr,{className:"h-6 w-6"}),s.jsx("span",{children:"Route Analysis"})]})]})})]})]})};function gQ({status:e}){if(!e)return s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-muted text-muted-foreground",children:"Unknown"});let t="";return e==="ongoing"?t="bg-yellow-200 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":e==="completed"?t="bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":e==="cancelled"?t="bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400":e==="delayed"?t="bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":t="bg-muted text-muted-foreground",s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t}`,children:e.charAt(0).toUpperCase()+e.slice(1)})}function Vg({title:e,value:t,icon:r,color:n}){return s.jsx("div",{className:"bg-card rounded-lg p-6 shadow border border-border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),s.jsx("p",{className:"text-2xl font-bold text-foreground",children:t})]}),s.jsx("div",{className:`p-3 rounded-full ${n}`,children:s.jsx(r,{className:"h-6 w-6 text-white"})})]})})}function vQ(){const e=lc(),{reports:t,metrics:r,pagination:n,loading:a,error:i}=xa(v=>v.reports),[o,l]=g.useState(""),[c,d]=g.useState({start_date:"",end_date:""});g.useEffect(()=>{e($c(c))},[e]);const u=(v,w)=>{const N={...c,[v]:w};d(N)},h=()=>{e($c(c))},p=()=>{d({start_date:"",end_date:""}),e(zU()),e($c({}))},f=v=>v?new Date(v).toLocaleString():"",y=v=>{if(v==null)return"N/A";const w=Math.floor(v/60),N=v%60;return`${w}h ${N}m`},x=v=>v==null?"N/A":`${v.toFixed(1)} km/h`,j=v=>{if(!v)return null;const w=v.split(":");if(w.length<2)return null;const N=parseInt(w[0])||0,k=parseInt(w[1])||0,P=parseFloat(w[2])||0;return N*60+k+P/60};return s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx(Rn,{className:"text-[#f7c624]",size:32}),s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Reports & Analytics"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Statistics Overview"}),s.jsx(HL,{})]}),s.jsx("div",{className:"border-t border-border my-8"}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Performance Analytics"}),s.jsx(xQ,{})]}),s.jsx("div",{className:"border-t border-border my-8"}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Recent Trips Activity"}),s.jsx(WL,{})]}),s.jsx("div",{className:"border-t border-border my-8"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Detailed Trip Reports"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"View detailed trip reports with filters and performance metrics"})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-center mb-6",children:[s.jsxs("div",{className:"flex items-center bg-card rounded-full px-4 py-2 shadow w-80 border border-border",children:[s.jsx(mn,{className:"text-muted-foreground mr-2",size:18}),s.jsx("input",{className:"outline-none bg-transparent flex-1 text-sm placeholder-muted-foreground text-foreground",placeholder:"Search reports, trips, students...",value:o,onChange:v=>l(v.target.value)})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-card rounded-lg px-4 py-2 shadow border border-border",children:[s.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"From:"}),s.jsx(pa,{className:"text-muted-foreground mr-1",size:16}),s.jsx("input",{type:"date",className:"text-xs bg-transparent outline-none w-28 text-foreground",value:c.start_date,onChange:v=>u("start_date",v.target.value)})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-card rounded-lg px-4 py-2 shadow border border-border",children:[s.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"To:"}),s.jsx(pa,{className:"text-muted-foreground mr-1",size:16}),s.jsx("input",{type:"date",className:"text-xs bg-transparent outline-none w-28 text-foreground",value:c.end_date,onChange:v=>u("end_date",v.target.value)})]}),s.jsxs("button",{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white rounded-lg px-6 py-2 flex items-center gap-2 text-sm font-semibold shadow",onClick:h,disabled:a,children:[a?"Loading...":"Run Query"," ",s.jsx(q0,{size:16})]}),s.jsx("button",{className:"bg-muted hover:bg-muted/80 text-muted-foreground rounded-lg px-4 py-2 text-sm font-semibold shadow",onClick:p,children:"Clear Filters"})]}),i&&s.jsx("div",{className:"bg-destructive/10 border border-destructive text-destructive px-4 py-3 rounded mb-6",children:i}),r&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(Vg,{title:"Total Reports",value:r.summary.total_reports,icon:Rn,color:"bg-blue-500"}),s.jsx(Vg,{title:"Completion Rate",value:`${r.summary.completion_rate}%`,icon:_o,color:"bg-green-500"}),s.jsx(Vg,{title:"Students Picked Up",value:r.students.total_picked_up,icon:ws,color:"bg-purple-500"}),s.jsx(Vg,{title:"Emergencies",value:r.safety.total_emergencies,icon:$i,color:"bg-red-500"})]}),r&&s.jsxs("div",{className:"bg-card rounded-xl shadow p-6 mb-8 border border-border",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Performance Overview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Efficiency Score"}),s.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[r.performance.avg_efficiency_score.toFixed(1),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"On-time Pickup Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[r.performance.on_time_pickup_rate.toFixed(1),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"On-time Dropoff Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[r.performance.on_time_dropoff_rate.toFixed(1),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration Efficiency"}),s.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[r.performance.duration_efficiency.toFixed(1),"%"]})]})]})]}),s.jsxs("div",{className:"bg-card rounded-xl shadow border border-border mb-8",children:[s.jsxs("div",{className:"p-6 border-b border-border",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Trip Reports"}),n&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Showing ",t.length," of ",n.total_reports," reports"]})]}),a?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#f7c624] mx-auto"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Loading reports..."})]}):t.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Rn,{className:"text-muted-foreground mx-auto mb-2",size:48}),s.jsx("p",{className:"text-muted-foreground",children:"No reports found"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-muted/50 text-muted-foreground",children:[s.jsx("th",{className:"px-6 py-3 text-left",children:"Trip ID"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Route"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"School"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Students"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Efficiency"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Duration"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Max Speed"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Generated"})]})}),s.jsx("tbody",{children:t.map(v=>s.jsxs("tr",{className:"border-b border-border last:border-0 hover:bg-muted/30",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-foreground",children:v.trip}),s.jsx("td",{className:"px-6 py-4 text-foreground",children:v.trip_route||"N/A"}),s.jsx("td",{className:"px-6 py-4 text-foreground",children:v.school_name||"N/A"}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(gQ,{status:v.is_complete?"completed":"ongoing"})}),s.jsxs("td",{className:"px-6 py-4",children:[v.students_picked_up,"/",v.total_students]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:`font-semibold ${v.efficiency_score>=80?"text-green-600 dark:text-green-400":v.efficiency_score>=60?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[v.efficiency_score,"%"]})}),s.jsx("td",{className:"px-6 py-4",children:y(v.actual_duration_str?j(v.actual_duration_str):null)}),s.jsx("td",{className:"px-6 py-4",children:x(v.max_speed)}),s.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:f(v.generated_at)})]},v.id))})]})})]}),n&&n.total_pages>1&&s.jsxs("div",{className:"flex items-center justify-between bg-card rounded-lg shadow p-4 border border-border",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",n.current_page," of ",n.total_pages]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-3 py-1 text-sm border border-border rounded disabled:opacity-50 bg-background text-foreground hover:bg-muted/30",disabled:!n.has_previous,onClick:()=>e($c({...c,page:n.previous_page})),children:"Previous"}),s.jsx("button",{className:"px-3 py-1 text-sm border border-border rounded disabled:opacity-50 bg-background text-foreground hover:bg-muted/30",disabled:!n.has_next,onClick:()=>e($c({...c,page:n.next_page})),children:"Next"})]})]})]})}const yQ=["School Details","Notification Settings","Email Settings","Push Notifications","School Policies","Personalization"],bQ=[{label:"SMS Notifications"},{label:"Email Notifications"},{label:"Push Notifications"}],jQ=[{label:"Parents"},{label:"Drivers"},{label:"Staff"}],wQ=[{title:"Trip Started",recipient:"Parents"},{title:"Trip Ended",recipient:"Parents"},{title:"SOS Alert",recipient:"Parents"},{title:"Trip Delayed",recipient:"Parents"},{title:"Trip Started",recipient:"Driver"},{title:"Trip Ended",recipient:"Driver"},{title:"Trip Delayed",recipient:"Driver"}];function NQ(){const[e,t]=g.useState(0),[r,n]=g.useState(0),[a,i]=g.useState(!1),[o,l]=g.useState({name:"",location:"",description:"",contact_number:"",email:"",operating_hours_start:"08:00",operating_hours_end:"16:00",notification_enabled:!0,allow_parent_tracking:!0,is_active:!0,longitude_point:null,latitude_point:null,school_longitude:null,school_latitude:null}),[c,d]=g.useState(!1),u=g.useRef(null),h=g.useRef(null),p=rr(),{schools:f,loading:y}=jt(T=>T.schools),{user:x}=jt(T=>T.auth),{preferences:j={showAnalytics:!0,showRecentActivity:!0,showNotificationsPanel:!0,allowDataExport:!0,autoBackup:!0,theme:"light",language:"en"},loading:v}=jt(T=>T.preferences),{theme:w,setTheme:N}=H5();mr();const k=zl,P=f.find(T=>T.admin===(x==null?void 0:x.id));g.useEffect(()=>{p(Ul()),p(bp())},[p]),g.useEffect(()=>{if(window.google&&window.google.maps){E();return}const T=document.createElement("script");return T.src=`https://maps.googleapis.com/maps/api/js?key=${k}&libraries=places`,T.async=!0,T.defer=!0,T.onload=()=>{d(!0),E()},document.head.appendChild(T),()=>{const R=document.querySelector('script[src*="maps.googleapis.com"]');R&&R.remove()}},[]),g.useEffect(()=>{c&&(u.current||h.current)&&E()},[c,e]);const E=()=>{const T=document.createElement("style");if(T.textContent=`
      .pac-container {
        border-radius: 0.5rem;
        margin-top: 0.5rem;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        border: 1px solid #e5e7eb;
        background-color: white;
        z-index: 1000;
        max-height: 300px;
        overflow-y: auto;
      }
      .pac-item {
        padding: 0.75rem 1rem;
        cursor: pointer;
        font-size: 0.875rem;
        line-height: 1.25rem;
        border-bottom: 1px solid #f3f4f6;
        transition: background-color 0.2s;
      }
      .pac-item:last-child {
        border-bottom: none;
      }
      .pac-item:hover {
        background-color: #f3f4f6;
      }
      .pac-item-query {
        font-size: 0.875rem;
        color: #1f2937;
        font-weight: 500;
      }
      .pac-icon {
        margin-right: 0.75rem;
        color: #6b7280;
      }
      .pac-matched {
        font-weight: 600;
        color: #2563eb;
      }
    `,document.head.appendChild(T),u.current){const R=new google.maps.places.Autocomplete(u.current,{fields:["geometry","formatted_address","name"]});R.addListener("place_changed",()=>{var D,C;const X=R.getPlace();if(X.geometry){const $=((D=X.geometry.location)==null?void 0:D.lat())||0,B=((C=X.geometry.location)==null?void 0:C.lng())||0;l(Q=>({...Q,latitude_point:$,longitude_point:B,location:X.formatted_address||X.name||Q.location}))}}),u.current.addEventListener("keydown",X=>{X.key==="Enter"&&X.preventDefault()})}if(h.current){const R=new google.maps.places.Autocomplete(h.current,{types:["establishment"],fields:["geometry","formatted_address","name"]});R.addListener("place_changed",()=>{var D,C;const X=R.getPlace();if(X.geometry){const $=((D=X.geometry.location)==null?void 0:D.lat())||0,B=((C=X.geometry.location)==null?void 0:C.lng())||0;l(Q=>({...Q,school_latitude:$,school_longitude:B}))}}),h.current.addEventListener("keydown",X=>{X.key==="Enter"&&X.preventDefault()})}};g.useEffect(()=>{var T,R;P&&l({name:P.name||"",location:P.location||"",description:P.description||"",contact_number:P.contact_number||"",email:P.email||"",operating_hours_start:((T=P.operating_hours_start)==null?void 0:T.substring(0,5))||"08:00",operating_hours_end:((R=P.operating_hours_end)==null?void 0:R.substring(0,5))||"16:00",notification_enabled:P.notification_enabled||!0,allow_parent_tracking:P.allow_parent_tracking||!0,is_active:P.is_active||!0,longitude_point:P.longitude_point||null,latitude_point:P.latitude_point||null,school_longitude:P.school_longitude||null,school_latitude:P.school_latitude||null})},[P]);const I=T=>T==null?"Not set":typeof T=="object"?"Complex data (not displayed)":String(T);return s.jsx("div",{className:"min-h-screen bg-background flex w-full",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-8 py-6 bg-background overflow-y-auto",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx(Fi,{style:{color:"#f7c624"},size:32}),s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Settings"})]}),s.jsx("div",{className:"flex gap-8 border-b mb-6 overflow-x-auto bg-background sticky top-0 z-10 py-2",children:yQ.map((T,R)=>s.jsx("button",{className:`pb-2 text-lg font-medium transition-colors whitespace-nowrap ${R===e?"border-b-2":"text-muted-foreground"}`,style:{borderColor:R===e?"#f7c624":void 0,color:R===e?"#f7c624":void 0},onMouseEnter:X=>{R!==e&&(X.currentTarget.style.color="#f7c624")},onMouseLeave:X=>{R!==e&&(X.currentTarget.style.color="")},onClick:()=>t(R),children:T},T))}),e===0&&s.jsx("div",{className:"space-y-6 overflow-y-auto max-h-[calc(100vh-200px)] pr-4",children:s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(kr,{style:{color:"#f7c624"},size:24}),"School Information"]})}),s.jsx(Ue,{children:y?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(In,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading school details..."})]}):P?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"name",children:"School Name"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"location",children:"Location"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.location})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nr,{className:"h-5 w-5",style:{color:"#f7c624"}}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"School Location Search"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"school_location",children:"School Location Coordinates"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:typeof o.school_latitude=="number"&&typeof o.school_longitude=="number"?`${I(o.school_latitude)}, ${I(o.school_longitude)}`:"Not set"}),s.jsx("p",{className:"text-sm text-gray-500",children:"School-specific coordinates for precise location tracking"})]})]}),(o.latitude_point||o.longitude_point)&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Nr,{className:"h-4 w-4",style:{color:"#f7c624"}}),s.jsx("span",{children:"General coordinates set"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"latitude",children:"Latitude"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:I(o.latitude_point)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"longitude",children:"Longitude"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:I(o.longitude_point)})]})]})]}),(o.school_latitude||o.school_longitude)&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Nr,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{children:"School-specific coordinates set"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"school_latitude",children:"School Latitude"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:I(o.school_latitude)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"school_longitude",children:"School Longitude"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:I(o.school_longitude)})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"description",children:"Description"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700 min-h-[80px]",children:o.description||"No description available"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"contact_number",children:"Contact Number"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.contact_number})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"email",children:"Email"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.email})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"operating_hours_start",children:"Operating Hours Start"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.operating_hours_start})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"operating_hours_end",children:"Operating Hours End"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.operating_hours_end})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"School Features"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"notification_enabled",children:"Enable Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow the school to send notifications to parents and drivers"})]}),s.jsx("div",{className:"p-2 bg-gray-50 border rounded-md",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${o.notification_enabled?"text-green-800":"bg-red-100 text-red-800"}`,style:{backgroundColor:o.notification_enabled?"#f7c624":void 0},children:o.notification_enabled?"Enabled":"Disabled"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"allow_parent_tracking",children:"Allow Parent Tracking"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow parents to track their children's bus location"})]}),s.jsx("div",{className:"p-2 bg-gray-50 border rounded-md",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${o.allow_parent_tracking?"text-green-800":"bg-red-100 text-red-800"}`,style:{backgroundColor:o.allow_parent_tracking?"#f7c624":void 0},children:o.allow_parent_tracking?"Enabled":"Disabled"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"is_active",children:"School Active"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Enable or disable the school account"})]}),s.jsx("div",{className:"p-2 bg-gray-50 border rounded-md",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${o.is_active?"text-green-800":"bg-red-100 text-red-800"}`,style:{backgroundColor:o.is_active?"#f7c624":void 0},children:o.is_active?"Active":"Inactive"})})]})]})]}),s.jsx("div",{className:"flex justify-end pt-6",children:s.jsx("div",{className:"text-sm text-gray-500 italic",children:"School information is read-only. Contact your administrator for updates."})})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(kr,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No school found"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have access to any school details."})]})})]})}),e===1&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap gap-12 mb-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Notification Types"}),s.jsx("div",{className:"flex flex-col gap-3",children:bQ.map(T=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center",style:{backgroundColor:"#f7c624"},children:s.jsx("span",{className:"w-3 h-3 bg-white rounded-full block"})}),s.jsx("span",{className:"text-gray-700",children:T.label})]},T.label))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Notification Recipients"}),s.jsx("div",{className:"flex flex-col gap-3",children:jQ.map((T,R)=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:R<2,readOnly:!0,className:"w-4 h-4",style:{accentColor:"#f7c624"}}),s.jsx("span",{className:"text-gray-700",children:T.label})]},T.label))})]}),s.jsx("div",{className:"flex-1 flex justify-end items-start",children:s.jsx("button",{className:"text-white px-4 py-2 rounded transition",style:{backgroundColor:"#f7c624"},onMouseEnter:T=>T.currentTarget.style.backgroundColor="#e6b91a",onMouseLeave:T=>T.currentTarget.style.backgroundColor="#f7c624",children:"New Message"})})]}),s.jsx("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:wQ.map((T,R)=>s.jsxs("div",{className:`border rounded-lg p-4 flex justify-between items-center cursor-pointer transition ${r===R?"shadow-lg":"border-gray-200"}`,style:{borderColor:r===R?"#f7c624":void 0},onClick:()=>n(R),children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-800",children:T.title}),s.jsx("div",{className:"text-xs text-gray-500",children:T.recipient})]}),s.jsxs("button",{className:"flex items-center gap-1 hover:underline",style:{color:"#f7c624"},children:["Edit ",s.jsx(Tq,{size:16})]})]},T.title+T.recipient))}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-4",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"SMS"}),s.jsx("div",{className:"font-bold text-lg text-gray-800 mb-2",children:"Trip Started"}),s.jsx("div",{className:"text-gray-700",children:"Your child's trip has started. The bus has departed from [Starting Location] and is en route. Track live updates in the app. "})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{className:"bg-white border px-8 py-2 rounded transition",style:{borderColor:"#f7c624",color:"#f7c624"},onMouseEnter:T=>T.currentTarget.style.backgroundColor="#f7c624",onMouseLeave:T=>T.currentTarget.style.backgroundColor="white",children:"Save"})})]}),e===2&&s.jsx("div",{className:"space-y-6",children:s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(Fi,{style:{color:"#f7c624"},size:24}),"Email Configuration"]})}),s.jsxs(Ue,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"smtp_server",children:"SMTP Server"}),s.jsx($e,{id:"smtp_server",placeholder:"smtp.gmail.com",defaultValue:"smtp.gmail.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"smtp_port",children:"SMTP Port"}),s.jsx($e,{id:"smtp_port",placeholder:"587",defaultValue:"587"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"email_username",children:"Email Username"}),s.jsx($e,{id:"email_username",placeholder:"your-email@gmail.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"email_password",children:"Email Password"}),s.jsx($e,{id:"email_password",type:"password",placeholder:"Enter email password"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Email Templates"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"welcome_email",children:"Welcome Email"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send welcome email to new parents"})]}),s.jsx(Zs,{id:"welcome_email",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"trip_notifications",children:"Trip Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send email notifications for trip updates"})]}),s.jsx(Zs,{id:"trip_notifications",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"weekly_reports",children:"Weekly Reports"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send weekly trip reports to parents"})]}),s.jsx(Zs,{id:"weekly_reports"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ue,{className:"text-white",style:{backgroundColor:"#f7c624"},onMouseEnter:T=>T.currentTarget.style.backgroundColor="#e6b91a",onMouseLeave:T=>T.currentTarget.style.backgroundColor="#f7c624",children:"Save Email Settings"})})]})]})}),e===3&&s.jsx("div",{className:"space-y-6",children:s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(Fi,{style:{color:"#f7c624"},size:24}),"Push Notification Settings"]})}),s.jsxs(Ue,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notification Types"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"trip_started",children:"Trip Started"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify when bus trip begins"})]}),s.jsx(Zs,{id:"trip_started",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"trip_ended",children:"Trip Ended"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify when bus trip ends"})]}),s.jsx(Zs,{id:"trip_ended",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"trip_delayed",children:"Trip Delayed"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify when bus is delayed"})]}),s.jsx(Zs,{id:"trip_delayed",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"sos_alerts",children:"SOS Alerts"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Emergency notifications"})]}),s.jsx(Zs,{id:"sos_alerts",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"route_changes",children:"Route Changes"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify about route modifications"})]}),s.jsx(Zs,{id:"route_changes"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notification Schedule"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"quiet_hours_start",children:"Quiet Hours Start"}),s.jsx($e,{id:"quiet_hours_start",type:"time",defaultValue:"22:00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"quiet_hours_end",children:"Quiet Hours End"}),s.jsx($e,{id:"quiet_hours_end",type:"time",defaultValue:"07:00"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ue,{className:"text-white",style:{backgroundColor:"#f7c624"},onMouseEnter:T=>T.currentTarget.style.backgroundColor="#e6b91a",onMouseLeave:T=>T.currentTarget.style.backgroundColor="#f7c624",children:"Save Push Settings"})})]})]})}),e===4&&s.jsx("div",{className:"space-y-6",children:s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(Fi,{style:{color:"#f7c624"},size:24}),"School Policies"]})}),s.jsxs(Ue,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Transportation Policies"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"pickup_time",children:"Maximum Pickup Wait Time (minutes)"}),s.jsx($e,{id:"pickup_time",type:"number",placeholder:"15",defaultValue:"15"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"late_policy",children:"Late Student Policy"}),s.jsx(Kn,{id:"late_policy",placeholder:"Enter late student policy...",rows:3,defaultValue:"Students who are more than 5 minutes late for pickup will be left behind and parents will be notified immediately."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"safety_policy",children:"Safety Policy"}),s.jsx(Kn,{id:"safety_policy",placeholder:"Enter safety policy...",rows:3,defaultValue:"All students must wear seatbelts. No eating or drinking on the bus. Students must remain seated during the journey."})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Communication Policies"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"parent_notifications",children:"Parent Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow parents to receive notifications"})]}),s.jsx(Zs,{id:"parent_notifications",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"driver_communication",children:"Driver Communication"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow direct communication with drivers"})]}),s.jsx(Zs,{id:"driver_communication"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"emergency_contacts",children:"Emergency Contact Access"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow access to emergency contact information"})]}),s.jsx(Zs,{id:"emergency_contacts",defaultChecked:!0})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ue,{className:"text-white",style:{backgroundColor:"#f7c624"},onMouseEnter:T=>T.currentTarget.style.backgroundColor="#e6b91a",onMouseLeave:T=>T.currentTarget.style.backgroundColor="#f7c624",children:"Save Policies"})})]})]})}),e===5&&s.jsx("div",{className:"space-y-6",children:s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(Fi,{style:{color:"#f7c624"},size:24}),"Personalization Settings"]})}),s.jsx(Ue,{className:"space-y-6",children:v?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(In,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading preferences..."})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Theme & Appearance"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"theme",children:"Theme"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose how the application theme should behave. Light/Dark will override your system setting, while System will follow your OS preference."}),s.jsxs("select",{id:"theme",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 outline-none bg-background border-border text-foreground",style:{"--tw-ring-color":"#f7c624"},value:w,onChange:T=>N(T.target.value),children:[s.jsx("option",{value:"light",children:"Light Theme"}),s.jsx("option",{value:"dark",children:"Dark Theme"}),s.jsx("option",{value:"auto",children:"System"})]})]})})]})})})]})})]})})})}const SQ=void 0,_Q=()=>{const e=rr(),t=Ia(),{toast:r}=mr(),{profile:n,loading:a,error:i}=jt(I=>I.profile),{user:o,token:l}=jt(I=>I.auth),[c,d]=g.useState(null),[u,h]=g.useState(!1),[p,f]=g.useState(!1),[y,x]=g.useState({first_name:"",last_name:"",email:"",phone_number:"",user_type:""}),[j,v]=g.useState({current_password:"",new_password:"",confirm_password:""});g.useEffect(()=>{o&&(d(o),x({first_name:o.first_name||"",last_name:o.last_name||"",email:o.email||"",phone_number:o.phone_number||"",user_type:o.user_type||""}))},[o]),g.useEffect(()=>{e(gp())},[e]);const w=I=>{const{name:T,value:R}=I.target;x(X=>({...X,[T]:R}))},N=I=>{const{name:T,value:R}=I.target;v(X=>({...X,[T]:R}))},k=async I=>{I.preventDefault();try{const T=await e(Dv(y)).unwrap();d(T),r({title:"Profile Updated",description:"Your profile has been updated successfully."}),h(!1)}catch(T){r({title:"Error",description:T instanceof Error?T.message:"Failed to update profile",variant:"destructive"})}},P=async I=>{var T,R;I.preventDefault();try{if(!l){r({title:"Error",description:"No authentication token found. Please log in again.",variant:"destructive"});return}await Rr.post(`${SQ}/api/change-password/`,j,{headers:{Authorization:`Bearer ${l}`}}),r({title:"Password Changed",description:"Your password has been changed successfully."}),f(!1),v({current_password:"",new_password:"",confirm_password:""})}catch(X){r({title:"Error",description:((R=(T=X.response)==null?void 0:T.data)==null?void 0:R.message)||"Failed to change password",variant:"destructive"})}},E=async()=>{try{await e(aE()).unwrap(),t("/login")}catch{r({title:"Error",description:"Failed to logout. Please try again.",variant:"destructive"})}};return a&&!n?s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})}):i&&!n?s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-500 mb-4",children:i}),s.jsx(ue,{onClick:()=>e(gp()),children:"Retry"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-100 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Profile"}),s.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),s.jsxs(ue,{variant:"outline",className:"flex items-center gap-2",onClick:E,children:[s.jsx(kq,{className:"w-4 h-4"}),"Logout"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(ze,{className:"md:col-span-1",children:[s.jsx(Xe,{children:s.jsx(tt,{children:"Profile Overview"})}),s.jsx(Ue,{children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center",children:c!=null&&c.profile_image?s.jsx("img",{src:c.profile_image,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):s.jsx(Ja,{className:"w-16 h-16 text-gray-400"})}),s.jsxs("div",{className:"text-center",children:[s.jsxs("h3",{className:"text-xl font-semibold",children:[c==null?void 0:c.first_name," ",c==null?void 0:c.last_name]}),s.jsx("p",{className:"text-gray-600 capitalize",children:c==null?void 0:c.user_type})]})]})})]}),s.jsxs(ze,{className:"md:col-span-2",children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between",children:[s.jsx(tt,{children:"Profile Details"}),s.jsxs("div",{className:"space-x-2",children:[s.jsxs(ue,{variant:"outline",onClick:()=>f(!p),children:[s.jsx(xE,{className:"w-4 h-4 mr-2"}),"Change Password"]}),s.jsx(ue,{variant:"outline",onClick:()=>h(!u),children:u?"Cancel":"Edit Profile"})]})]}),s.jsx(Ue,{children:p?s.jsxs("form",{onSubmit:P,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"current_password",children:"Current Password"}),s.jsx($e,{id:"current_password",name:"current_password",type:"password",value:j.current_password,onChange:N,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"new_password",children:"New Password"}),s.jsx($e,{id:"new_password",name:"new_password",type:"password",value:j.new_password,onChange:N,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"confirm_password",children:"Confirm New Password"}),s.jsx($e,{id:"confirm_password",name:"confirm_password",type:"password",value:j.confirm_password,onChange:N,required:!0})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),s.jsx(ue,{type:"submit",children:"Change Password"})]})]}):s.jsxs("form",{onSubmit:k,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"first_name",children:"First Name"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ja,{className:"w-5 h-5 text-gray-400"}),s.jsx($e,{id:"first_name",name:"first_name",value:y.first_name,onChange:w,disabled:!u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"last_name",children:"Last Name"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ja,{className:"w-5 h-5 text-gray-400"}),s.jsx($e,{id:"last_name",name:"last_name",value:y.last_name,onChange:w,disabled:!u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"email",children:"Email"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ga,{className:"w-5 h-5 text-gray-400"}),s.jsx($e,{id:"email",name:"email",type:"email",value:y.email,onChange:w,disabled:!u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"phone_number",children:"Phone Number"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Za,{className:"w-5 h-5 text-gray-400"}),s.jsx($e,{id:"phone_number",name:"phone_number",value:y.phone_number,onChange:w,disabled:!u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"user_type",children:"Role"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ln,{className:"w-5 h-5 text-gray-400"}),s.jsx($e,{id:"user_type",value:y.user_type,disabled:!0,className:"bg-gray-100"})]})]})]}),u&&s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),s.jsx(ue,{type:"submit",disabled:a,children:a?"Saving...":"Save Changes"})]})]})})]})]})]})})},CQ=[{id:"starter",name:"Starter",description:"Perfect for small schools getting started",price:2900,billingCycle:"month",icon:Vl,color:"bg-blue-500",maxStudents:50,maxDrivers:5,maxVehicles:3,features:["Up to 50 students","5 drivers","3 vehicles","Basic route management","Email support","Mobile app access","Real-time tracking","Basic reporting"]},{id:"professional",name:"Professional",description:"Ideal for growing schools with more students",price:7900,billingCycle:"month",icon:ws,color:"bg-[#f7c624]",maxStudents:200,maxDrivers:15,maxVehicles:10,popular:!0,features:["Up to 200 students","15 drivers","10 vehicles","Advanced route optimization","Priority email support","Custom branding","Advanced analytics","Parent notifications","Driver performance tracking","GPS tracking"]},{id:"enterprise",name:"Enterprise",description:"For large school districts and organizations",price:19900,billingCycle:"month",icon:fE,color:"bg-[#f7c624]",maxStudents:1e3,maxDrivers:50,maxVehicles:30,features:["Up to 1000 students","50 drivers","30 vehicles","Multi-school management","24/7 phone support","Custom integrations","Advanced security","White-label solution","API access","Dedicated account manager"]},{id:"premium",name:"Premium",description:"Ultimate solution for premium schools",price:39900,billingCycle:"month",icon:Ef,color:"bg-[#f7c624]",maxStudents:2500,maxDrivers:100,maxVehicles:75,features:["Up to 2500 students","100 drivers","75 vehicles","AI-powered route optimization","Premium support","Custom development","Advanced security features","Multi-language support","Advanced reporting suite","Predictive analytics"]},{id:"unlimited",name:"Unlimited",description:"Unlimited everything for the biggest organizations",price:79900,billingCycle:"month",icon:Aw,color:"bg-[#f7c624]",maxStudents:-1,maxDrivers:-1,maxVehicles:-1,features:["Unlimited students","Unlimited drivers","Unlimited vehicles","Enterprise-grade security","Custom SLA","On-premise deployment option","Full source code access","Custom training","Dedicated support team","Priority feature development"]},{id:"custom",name:"Custom",description:"Tailored solution for your specific needs",price:0,billingCycle:"custom",icon:Fi,color:"bg-[#f7c624]",features:["Custom pricing","Custom features","Custom integrations","Custom deployment","Custom training","Custom support","Custom branding","Custom reporting","Custom security","Custom everything"]}];function kQ(){const e=lc(),{plans:t,loading:r,error:n}=xa(y=>y.subscription),[a,i]=g.useState(null),[o,l]=g.useState("month"),{toast:c}=mr();g.useEffect(()=>{e(sl())},[e]);const d=y=>{var x;i(y),c({title:"Subscription Selected",description:`You've selected the ${(x=f.find(j=>j.id===y))==null?void 0:x.name} plan. Redirecting to payment...`})},u=y=>o==="year"?Math.round(y*12*.8):y,h=y=>y.id==="custom"?"Contact us":o==="year"?`KSH ${u(y.price).toLocaleString()}/year`:`KSH ${y.price.toLocaleString()}/${y.billingCycle}`,p=y=>{const x=parseFloat(y.base_price),j=parseFloat(y.price_per_student),v=parseFloat(y.price_per_bus),w=x+y.features_json.max_students*j+y.features_json.max_buses*v;return{id:y.name,name:y.name.replace(/_/g," ").replace(/\b\w/g,N=>N.toUpperCase()),description:y.description,price:w,billingCycle:y.default_billing_cycle==="annually"?"year":"month",icon:Vl,color:"bg-blue-500",maxStudents:y.features_json.max_students,maxDrivers:y.features_json.max_buses,maxVehicles:y.features_json.max_buses,features:[`Up to ${y.features_json.max_students} students`,`${y.features_json.max_buses} buses`,y.features_json.sms_notifications?"SMS notifications":null,y.features_json.whatsapp_integration?"WhatsApp integration":null,y.features_json.realtime_tracking?"Real-time tracking":null,y.features_json.parent_app_access?"Parent app access":null,y.features_json.basic_reports?"Basic reports":null,y.features_json.driver_management?"Driver management":null,y.features_json.route_optimization?"Route optimization":null,y.features_json.advanced_analytics?"Advanced analytics":null,y.features_json.api_access?"API access":null].filter(Boolean)}},f=t.length>0?t.map(p):CQ;return r?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Loading Subscription Plans"}),s.jsx("p",{children:"Please wait while we fetch the latest plans..."})]})})})}):n?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("h2",{className:"text-red-800 font-semibold",children:"Error Loading Subscription Plans"}),s.jsx("p",{className:"text-red-600",children:n}),s.jsx(ue,{onClick:()=>e(sl()),className:"mt-2",children:"Retry"})]})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:" mb-3",children:s.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Choose Your Subscripthhhhion Plan"})}),s.jsx("div",{className:"flex justify- mb-4",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1 shadow-sm border dark:border-gray-700",children:s.jsxs("div",{className:"flex",children:[s.jsx("button",{onClick:()=>l("month"),className:`px-6 py-2 rounded-md text-sm font-medium transition-colors ${o==="month"?"bg-[#f7c624] text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,children:"Monthly"}),s.jsxs("button",{onClick:()=>l("year"),className:`px-6 py-2 rounded-md text-sm font-medium transition-colors ${o==="year"?"bg-[#f7c624] text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,children:["Yearly",s.jsx(De,{variant:"secondary",className:"ml-2 text-xs",children:"Save 20%"})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[f.map(y=>s.jsxs(ze,{className:`relative overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-105 flex flex-col h-full ${y.popular?"ring-2 ring-[#f7c624] shadow-lg bg-gradient-to-br from-[#f7c624]/20 to-white":"hover:ring-2 hover:ring-blue-200"}`,children:[y.popular&&s.jsx("div",{className:"absolute top-0 mb-3 right-0 bg-[#f7c624] text-white px-3 py-1 text-xs font-medium rounded-bl-lg",children:"Most Popular"}),s.jsxs(Xe,{className:"text-center mt-1 pb-4",children:[s.jsxs("div",{className:`inline-flex items-center gap-2 p-3 rounded-full ${y.color} text-white mb-4`,children:[s.jsx(y.icon,{className:"h-6 w-6"}),s.jsxs(tt,{className:`text-2xl ${y.color} font-bold`,children:[y.name," "]})]}),s.jsxs(Ws,{className:"text-gray-600 dark:text-gray-300",children:[y.description," "]})]}),s.jsxs(Ue,{className:"space-y-6 flex-1",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:[y.id==="custom"?"Custom":`KSH ${u(y.price).toLocaleString()}`," "]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:h(y)}),o==="year"&&y.id!=="custom"&&s.jsxs("div",{className:"text-sm text-[#f7c624] font-medium mt-1",children:["Save KSH"," ",(y.price*12-u(y.price)).toLocaleString(),"/year"]})," "]}),y.maxStudents!==-1&&s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center text-sm",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[y.maxStudents===-1?"":y.maxStudents," "]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Students"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[y.maxDrivers===-1?"":y.maxDrivers," "]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Drivers"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[y.maxVehicles===-1?"":y.maxVehicles," "]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Vehicles"})]})]}),s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Features:"}),s.jsxs("ul",{className:"space-y-2",children:[y.features.map((x,j)=>s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(Or,{className:"h-4 w-4 text-[#f7c624] mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:x})]},j))," "]})]})]}),s.jsx(K5,{children:s.jsxs(ue,{onClick:()=>d(y.id),className:`w-full ${y.popular,"bg-[#f7c624] hover:bg-[#f7c624]/90"}`,variant:(y.popular,"default"),children:[y.id==="custom"?"Contact Sales":"Choose Plan"," "]})})]},y.id))," "]}),s.jsx("div",{className:"mt-16 text-center",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 shadow-sm border dark:border-gray-700",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"All Plans Include"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ln,{className:"h-6 w-6 text-[#f7c624]"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Security"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Enterprise-grade security"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(U0,{className:"h-6 w-6 text-[#f7c624]"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Real-time Tracking"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Live GPS tracking"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Rn,{className:"h-6 w-6 text-[#f7c624]"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Reports"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Comprehensive analytics"})]})]})]})]})})]})})}function AQ(){const e=lc(),{plans:t,loading:r,error:n}=xa(i=>i.subscription);g.useEffect(()=>{e(sl())},[e]);const a=i=>parseFloat(i).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2});return r?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx(wr,{className:"h-8 w-64 mb-6"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(i=>s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(wr,{className:"h-6 w-32 mb-2"}),s.jsx(wr,{className:"h-4 w-48"})]}),s.jsxs(Ue,{children:[s.jsx(wr,{className:"h-8 w-24 mb-4"}),s.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(o=>s.jsx(wr,{className:"h-4 w-full"},o))})]})]},i))})]})}):n?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("h2",{className:"text-red-800 font-semibold",children:"Error Loading Subscription Plans"}),s.jsx("p",{className:"text-red-600",children:n}),s.jsx(ue,{onClick:()=>e(sl()),className:"mt-2",children:"Retry"})]})})}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Subscription Plans Management"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View and manage available subscription plans for schools"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>s.jsxs(ze,{className:"relative",children:[!i.is_active&&s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx(De,{variant:"secondary",children:"Inactive"})}),s.jsxs(Xe,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tt,{className:"text-xl font-semibold",children:i.name.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())}),i.is_active&&s.jsx(De,{variant:"default",className:"bg-[#f7c624]",children:"Active"})]}),s.jsx(Ws,{className:"text-sm",children:i.description})]}),s.jsxs(Ue,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Base Price:"}),s.jsx("span",{className:"font-semibold",children:a(i.base_price)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Per Student:"}),s.jsx("span",{className:"font-semibold",children:a(i.price_per_student)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Per Bus:"}),s.jsx("span",{className:"font-semibold",children:a(i.price_per_bus)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Limits"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold",children:i.features_json.max_students}),s.jsx("div",{className:"text-gray-500",children:"Students"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold",children:i.features_json.max_parents}),s.jsx("div",{className:"text-gray-500",children:"Parents"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold",children:i.features_json.max_buses}),s.jsx("div",{className:"text-gray-500",children:"Buses"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Features"}),s.jsx("div",{className:"space-y-1",children:Object.entries(i.features_json).map(([o,l])=>typeof l=="boolean"?s.jsx("div",{className:"flex items-center justify-between text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[l?s.jsx(Or,{className:"h-4 w-4 text-[#f7c624]"}):s.jsx(il,{className:"h-4 w-4 text-red-500"}),s.jsx("span",{className:"capitalize",children:o.replace(/_/g," ")})]})},o):null)})]}),s.jsx("div",{className:"pt-2 border-t",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Billing Cycle:"}),s.jsx(De,{variant:"outline",className:"capitalize",children:i.default_billing_cycle})]})})]})]},i.id))}),t.length===0&&!r&&s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[s.jsx(Ln,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Subscription Plans Found"}),s.jsx("p",{children:"No subscription plans are currently available."})]})})]})})}const PQ="modulepreload",EQ=function(e){return"/"+e},B3={},tN=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=EQ(c),c in B3)return;B3[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":PQ,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var ma=Uint8Array,pi=Uint16Array,US=Int32Array,Hb=new ma([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wb=new ma([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sN=new ma([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u7=function(e,t){for(var r=new pi(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new US(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},h7=u7(Hb,2),f7=h7.b,rN=h7.r;f7[28]=258,rN[258]=28;var m7=u7(Wb,0),LQ=m7.b,z3=m7.r,nN=new pi(32768);for(var Lr=0;Lr<32768;++Lr){var Pc=(Lr&43690)>>1|(Lr&21845)<<1;Pc=(Pc&52428)>>2|(Pc&13107)<<2,Pc=(Pc&61680)>>4|(Pc&3855)<<4,nN[Lr]=((Pc&65280)>>8|(Pc&255)<<8)>>1}var al=function(e,t,r){for(var n=e.length,a=0,i=new pi(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new pi(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new pi(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],u=t-e[a],h=o[e[a]-1]++<<u,p=h|(1<<u)-1;h<=p;++h)l[nN[h]>>c]=d}else for(l=new pi(n),a=0;a<n;++a)e[a]&&(l[a]=nN[o[e[a]-1]++]>>15-e[a]);return l},Nd=new ma(288);for(var Lr=0;Lr<144;++Lr)Nd[Lr]=8;for(var Lr=144;Lr<256;++Lr)Nd[Lr]=9;for(var Lr=256;Lr<280;++Lr)Nd[Lr]=7;for(var Lr=280;Lr<288;++Lr)Nd[Lr]=8;var ax=new ma(32);for(var Lr=0;Lr<32;++Lr)ax[Lr]=5;var TQ=al(Nd,9,0),RQ=al(Nd,9,1),IQ=al(ax,5,0),FQ=al(ax,5,1),Qj=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Qi=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},e2=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},qS=function(e){return(e+7)/8|0},p7=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new ma(e.subarray(t,r))},DQ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ro=function(e,t,r){var n=new Error(t||DQ[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,ro),!r)throw n;return n},OQ=function(e,t,r,n){var a=e.length,i=0;if(!a||t.f&&!t.l)return r||new ma(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new ma(a*3));var d=function(_e){var Be=r.length;if(_e>Be){var Ge=new ma(Math.max(Be*2,_e));Ge.set(r),r=Ge}},u=t.f||0,h=t.p||0,p=t.b||0,f=t.l,y=t.d,x=t.m,j=t.n,v=a*8;do{if(!f){u=Qi(e,h,1);var w=Qi(e,h+1,3);if(h+=3,w)if(w==1)f=RQ,y=FQ,x=9,j=5;else if(w==2){var E=Qi(e,h,31)+257,I=Qi(e,h+10,15)+4,T=E+Qi(e,h+5,31)+1;h+=14;for(var R=new ma(T),X=new ma(19),D=0;D<I;++D)X[sN[D]]=Qi(e,h+D*3,7);h+=I*3;for(var C=Qj(X),$=(1<<C)-1,B=al(X,C,1),D=0;D<T;){var Q=B[Qi(e,h,$)];h+=Q&15;var N=Q>>4;if(N<16)R[D++]=N;else{var oe=0,ae=0;for(N==16?(ae=3+Qi(e,h,3),h+=2,oe=R[D-1]):N==17?(ae=3+Qi(e,h,7),h+=3):N==18&&(ae=11+Qi(e,h,127),h+=7);ae--;)R[D++]=oe}}var U=R.subarray(0,E),Z=R.subarray(E);x=Qj(U),j=Qj(Z),f=al(U,x,1),y=al(Z,j,1)}else ro(1);else{var N=qS(h)+4,k=e[N-4]|e[N-3]<<8,P=N+k;if(P>a){c&&ro(0);break}l&&d(p+k),r.set(e.subarray(N,P),p),t.b=p+=k,t.p=h=P*8,t.f=u;continue}if(h>v){c&&ro(0);break}}l&&d(p+131072);for(var W=(1<<x)-1,ve=(1<<j)-1,A=h;;A=h){var oe=f[e2(e,h)&W],z=oe>>4;if(h+=oe&15,h>v){c&&ro(0);break}if(oe||ro(2),z<256)r[p++]=z;else if(z==256){A=h,f=null;break}else{var M=z-254;if(z>264){var D=z-257,re=Hb[D];M=Qi(e,h,(1<<re)-1)+f7[D],h+=re}var te=y[e2(e,h)&ve],O=te>>4;te||ro(3),h+=te&15;var Z=LQ[O];if(O>3){var re=Wb[O];Z+=e2(e,h)&(1<<re)-1,h+=re}if(h>v){c&&ro(0);break}l&&d(p+131072);var ce=p+M;if(p<Z){var le=i-Z,Ee=Math.min(Z,ce);for(le+p<0&&ro(3);p<Ee;++p)r[p]=n[le+p]}for(;p<ce;++p)r[p]=r[p-Z]}}t.l=f,t.p=A,t.b=p,t.f=u,f&&(u=1,t.m=x,t.d=y,t.n=j)}while(!u);return p!=r.length&&o?p7(r,0,p):r.subarray(0,p)},Ll=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Hm=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},t2=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:g7,l:0};if(a==1){var o=new ma(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(P,E){return P.f-E.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=a-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var p=i[0].s,n=1;n<a;++n)i[n].s>p&&(p=i[n].s);var f=new pi(p+1),y=aN(r[u-1],f,0);if(y>t){var n=0,x=0,j=y-t,v=1<<j;for(i.sort(function(E,I){return f[I.s]-f[E.s]||E.f-I.f});n<a;++n){var w=i[n].s;if(f[w]>t)x+=v-(1<<y-f[w]),f[w]=t;else break}for(x>>=j;x>0;){var N=i[n].s;f[N]<t?x-=1<<t-f[N]++-1:++n}for(;n>=0&&x;--n){var k=i[n].s;f[k]==t&&(--f[k],++x)}y=t}return{t:new ma(f),l:y}},aN=function(e,t,r){return e.s==-1?Math.max(aN(e.l,t,r+1),aN(e.r,t,r+1)):t[e.s]=r},U3=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new pi(++t),n=0,a=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Wm=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},x7=function(e,t,r){var n=r.length,a=qS(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},q3=function(e,t,r,n,a,i,o,l,c,d,u){Ll(t,u++,r),++a[256];for(var h=t2(a,15),p=h.t,f=h.l,y=t2(i,15),x=y.t,j=y.l,v=U3(p),w=v.c,N=v.n,k=U3(x),P=k.c,E=k.n,I=new pi(19),T=0;T<w.length;++T)++I[w[T]&31];for(var T=0;T<P.length;++T)++I[P[T]&31];for(var R=t2(I,7),X=R.t,D=R.l,C=19;C>4&&!X[sN[C-1]];--C);var $=d+5<<3,B=Wm(a,Nd)+Wm(i,ax)+o,Q=Wm(a,p)+Wm(i,x)+o+14+3*C+Wm(I,X)+2*I[16]+3*I[17]+7*I[18];if(c>=0&&$<=B&&$<=Q)return x7(t,u,e.subarray(c,c+d));var oe,ae,U,Z;if(Ll(t,u,1+(Q<B)),u+=2,Q<B){oe=al(p,f,0),ae=p,U=al(x,j,0),Z=x;var W=al(X,D,0);Ll(t,u,N-257),Ll(t,u+5,E-1),Ll(t,u+10,C-4),u+=14;for(var T=0;T<C;++T)Ll(t,u+3*T,X[sN[T]]);u+=3*C;for(var ve=[w,P],A=0;A<2;++A)for(var z=ve[A],T=0;T<z.length;++T){var M=z[T]&31;Ll(t,u,W[M]),u+=X[M],M>15&&(Ll(t,u,z[T]>>5&127),u+=z[T]>>12)}}else oe=TQ,ae=Nd,U=IQ,Z=ax;for(var T=0;T<l;++T){var re=n[T];if(re>255){var M=re>>18&31;Hm(t,u,oe[M+257]),u+=ae[M+257],M>7&&(Ll(t,u,re>>23&31),u+=Hb[M]);var te=re&31;Hm(t,u,U[te]),u+=Z[te],te>3&&(Hm(t,u,re>>5&8191),u+=Wb[te])}else Hm(t,u,oe[re]),u+=ae[re]}return Hm(t,u,oe[256]),u+ae[256]},MQ=new US([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),g7=new ma(0),$Q=function(e,t,r,n,a,i){var o=i.z||e.length,l=new ma(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=MQ[t-1],p=h>>13,f=h&8191,y=(1<<r)-1,x=i.p||new pi(32768),j=i.h||new pi(y+1),v=Math.ceil(r/3),w=2*v,N=function(ut){return(e[ut]^e[ut+1]<<v^e[ut+2]<<w)&y},k=new US(25e3),P=new pi(288),E=new pi(32),I=0,T=0,R=i.i||0,X=0,D=i.w||0,C=0;R+2<o;++R){var $=N(R),B=R&32767,Q=j[$];if(x[B]=Q,j[$]=B,D<=R){var oe=o-R;if((I>7e3||X>24576)&&(oe>423||!d)){u=q3(e,c,0,k,P,E,T,X,C,R-C,u),X=I=T=0,C=R;for(var ae=0;ae<286;++ae)P[ae]=0;for(var ae=0;ae<30;++ae)E[ae]=0}var U=2,Z=0,W=f,ve=B-Q&32767;if(oe>2&&$==N(R-ve))for(var A=Math.min(p,oe)-1,z=Math.min(32767,R),M=Math.min(258,oe);ve<=z&&--W&&B!=Q;){if(e[R+U]==e[R+U-ve]){for(var re=0;re<M&&e[R+re]==e[R+re-ve];++re);if(re>U){if(U=re,Z=ve,re>A)break;for(var te=Math.min(ve,re-2),O=0,ae=0;ae<te;++ae){var ce=R-ve+ae&32767,le=x[ce],Ee=ce-le&32767;Ee>O&&(O=Ee,Q=ce)}}}B=Q,Q=x[B],ve+=B-Q&32767}if(Z){k[X++]=268435456|rN[U]<<18|z3[Z];var _e=rN[U]&31,Be=z3[Z]&31;T+=Hb[_e]+Wb[Be],++P[257+_e],++E[Be],D=R+U,++I}else k[X++]=e[R],++P[e[R]]}}for(R=Math.max(R,D);R<o;++R)k[X++]=e[R],++P[e[R]];u=q3(e,c,d,k,P,E,T,X,C,R-C,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=j,i.p=x,i.i=R,i.w=D)}else{for(var R=i.w||0;R<o+d;R+=65535){var Ge=R+65535;Ge>=o&&(c[u/8|0]=d,Ge=o),u=x7(c,u+1,e.subarray(R,Ge))}i.i=o}return p7(l,0,n+qS(u)+a)},v7=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},BQ=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new ma(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return $Q(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},y7=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},zQ=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=v7();a.p(t.dictionary),y7(e,2,a.d())}},UQ=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&ro(6,"invalid zlib data"),(e[1]>>5&1)==1&&ro(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function iN(e,t){t||(t={});var r=v7();r.p(e);var n=BQ(e,t,t.dictionary?6:2,4);return zQ(n,t),y7(n,n.length-4,r.d()),n}function qQ(e,t){return OQ(e.subarray(UQ(e),-4),{i:2},t,t)}var VQ=typeof TextDecoder<"u"&&new TextDecoder,HQ=0;try{VQ.decode(g7,{stream:!0}),HQ=1}catch{}var as=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function s2(){as.console&&typeof as.console.log=="function"&&as.console.log.apply(as.console,arguments)}var jr={log:s2,warn:function(e){as.console&&(typeof as.console.warn=="function"?as.console.warn.apply(as.console,arguments):s2.call(null,arguments))},error:function(e){as.console&&(typeof as.console.error=="function"?as.console.error.apply(as.console,arguments):s2(e))}};function r2(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Xd(n.response,t,r)},n.onerror=function(){jr.error("could not download file")},n.send()}function V3(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Hg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Cp,oN,Xd=as.saveAs||((typeof window>"u"?"undefined":sr(window))!=="object"||window!==as?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=as.URL||as.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?V3(a.href)?r2(e,t,r):Hg(a,a.target="_blank"):Hg(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Hg(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(V3(e))r2(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Hg(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:sr(i)!=="object"&&(jr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return r2(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(as.HTMLElement)||as.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":sr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(e)}else{var c=as.URL||as.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function b7(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function n2(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=aa(r,n,a,i,t[0],7,-680876936),i=aa(i,r,n,a,t[1],12,-389564586),a=aa(a,i,r,n,t[2],17,606105819),n=aa(n,a,i,r,t[3],22,-1044525330),r=aa(r,n,a,i,t[4],7,-176418897),i=aa(i,r,n,a,t[5],12,1200080426),a=aa(a,i,r,n,t[6],17,-1473231341),n=aa(n,a,i,r,t[7],22,-45705983),r=aa(r,n,a,i,t[8],7,1770035416),i=aa(i,r,n,a,t[9],12,-1958414417),a=aa(a,i,r,n,t[10],17,-42063),n=aa(n,a,i,r,t[11],22,-1990404162),r=aa(r,n,a,i,t[12],7,1804603682),i=aa(i,r,n,a,t[13],12,-40341101),a=aa(a,i,r,n,t[14],17,-1502002290),r=ia(r,n=aa(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=ia(i,r,n,a,t[6],9,-1069501632),a=ia(a,i,r,n,t[11],14,643717713),n=ia(n,a,i,r,t[0],20,-373897302),r=ia(r,n,a,i,t[5],5,-701558691),i=ia(i,r,n,a,t[10],9,38016083),a=ia(a,i,r,n,t[15],14,-660478335),n=ia(n,a,i,r,t[4],20,-405537848),r=ia(r,n,a,i,t[9],5,568446438),i=ia(i,r,n,a,t[14],9,-1019803690),a=ia(a,i,r,n,t[3],14,-187363961),n=ia(n,a,i,r,t[8],20,1163531501),r=ia(r,n,a,i,t[13],5,-1444681467),i=ia(i,r,n,a,t[2],9,-51403784),a=ia(a,i,r,n,t[7],14,1735328473),r=oa(r,n=ia(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=oa(i,r,n,a,t[8],11,-2022574463),a=oa(a,i,r,n,t[11],16,1839030562),n=oa(n,a,i,r,t[14],23,-35309556),r=oa(r,n,a,i,t[1],4,-1530992060),i=oa(i,r,n,a,t[4],11,1272893353),a=oa(a,i,r,n,t[7],16,-155497632),n=oa(n,a,i,r,t[10],23,-1094730640),r=oa(r,n,a,i,t[13],4,681279174),i=oa(i,r,n,a,t[0],11,-358537222),a=oa(a,i,r,n,t[3],16,-722521979),n=oa(n,a,i,r,t[6],23,76029189),r=oa(r,n,a,i,t[9],4,-640364487),i=oa(i,r,n,a,t[12],11,-421815835),a=oa(a,i,r,n,t[15],16,530742520),r=la(r,n=oa(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=la(i,r,n,a,t[7],10,1126891415),a=la(a,i,r,n,t[14],15,-1416354905),n=la(n,a,i,r,t[5],21,-57434055),r=la(r,n,a,i,t[12],6,1700485571),i=la(i,r,n,a,t[3],10,-1894986606),a=la(a,i,r,n,t[10],15,-1051523),n=la(n,a,i,r,t[1],21,-2054922799),r=la(r,n,a,i,t[8],6,1873313359),i=la(i,r,n,a,t[15],10,-30611744),a=la(a,i,r,n,t[6],15,-1560198380),n=la(n,a,i,r,t[13],21,1309151649),r=la(r,n,a,i,t[4],6,-145523070),i=la(i,r,n,a,t[11],10,-1120210379),a=la(a,i,r,n,t[2],15,718787259),n=la(n,a,i,r,t[9],21,-343485551),e[0]=Yc(r,e[0]),e[1]=Yc(n,e[1]),e[2]=Yc(a,e[2]),e[3]=Yc(i,e[3])}function Gb(e,t,r,n,a,i){return t=Yc(Yc(t,e),Yc(n,i)),Yc(t<<a|t>>>32-a,r)}function aa(e,t,r,n,a,i,o){return Gb(t&r|~t&n,e,t,a,i,o)}function ia(e,t,r,n,a,i,o){return Gb(t&n|r&~n,e,t,a,i,o)}function oa(e,t,r,n,a,i,o){return Gb(t^r^n,e,t,a,i,o)}function la(e,t,r,n,a,i,o){return Gb(r^(t|~n),e,t,a,i,o)}function j7(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)n2(n,WQ(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(n2(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,n2(n,a),n}function WQ(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Cp=as.atob.bind(as),oN=as.btoa.bind(as);var H3="0123456789abcdef".split("");function GQ(e){for(var t="",r=0;r<4;r++)t+=H3[e>>8*r+4&15]+H3[e>>8*r&15];return t}function KQ(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function lN(e){return j7(e).map(KQ).join("")}var YQ=function(e){for(var t=0;t<e.length;t++)e[t]=GQ(e[t]);return e.join("")}(j7("hello"))!="5d41402abc4b2a76b9719d911017c592";function Yc(e,t){if(YQ){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function cN(e,t){var r,n,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,n=l}else l=n;var h=t.length,p=0,f=0,y="";for(c=0;c<h;c++)f=(f+(u=l[p=(p+1)%256]))%256,l[p]=l[f],l[f]=u,o=l[(l[p]+l[f])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var W3={print:4,modify:8,copy:16,"annot-forms":32};function Sh(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(W3.perm!==void 0)throw new Error("Invalid permission: "+l);a+=W3[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=lN(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=cN(this.encryptionKey,this.padding)}function _h(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function G3(e){if(sr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){as.console&&jr.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function uy(e){if(!(this instanceof uy))return new uy(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function w7(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Qd(e,t,r,n,a){if(!(this instanceof Qd))return new Qd(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,w7.call(this,n,a)}function Mh(e,t,r,n,a){if(!(this instanceof Mh))return new Mh(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,w7.call(this,n,a)}function rs(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;sr(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=G3;var y="1.3",x=f.__private__.getPdfVersion=function(){return y};f.__private__.setPdfVersion=function(S){y=S};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return j};var v=f.__private__.getPageFormat=function(S){return j[S]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},N=w.COMPAT;function k(){this.saveGraphicsState(),K(new Te(ke,0,0,-ke,0,mc()*ke).toString()+" cm"),this.setFontSize(this.getFontSize()/ke),d="n",N=w.ADVANCED}function P(){this.restoreGraphicsState(),d="S",N=w.COMPAT}var E=f.__private__.combineFontStyleAndFontWeight=function(S,V){if(S=="bold"&&V=="normal"||S=="bold"&&V==400||S=="normal"&&V=="italic"||S=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(S=V==400||V==="normal"?S==="italic"?"italic":"normal":V!=700&&V!=="bold"||S!=="normal"?(V==700?"bold":V)+""+S:"bold"),S};f.advancedAPI=function(S){var V=N===w.COMPAT;return V&&k.call(this),typeof S!="function"||(S(this),V&&P.call(this)),this},f.compatAPI=function(S){var V=N===w.ADVANCED;return V&&P.call(this),typeof S!="function"||(S(this),V&&k.call(this)),this},f.isAdvancedAPI=function(){return N===w.ADVANCED};var I,T=function(S){if(N!==w.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=f.roundToPrecision=f.__private__.roundToPrecision=function(S,V){var pe=t||V;if(isNaN(S)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(pe).replace(/0+$/,"")};I=f.hpf=f.__private__.hpf=typeof c=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return R(S,c)}:c==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return R(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return R(S,16)};var X=f.f2=f.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return R(S,2)},D=f.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return R(S,3)},C=f.scale=f.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return N===w.COMPAT?S*ke:N===w.ADVANCED?S:void 0},$=function(S){return N===w.COMPAT?mc()-S:N===w.ADVANCED?S:void 0},B=function(S){return C($(S))};f.__private__.setPrecision=f.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(t=parseInt(S,10))};var Q,oe="00000000000000000000000000000000",ae=f.__private__.getFileId=function(){return oe},U=f.__private__.setFileId=function(S){return oe=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():oe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(ea=new Sh(u.userPermissions,u.userPassword,u.ownerPassword,oe)),oe};f.setFileId=function(S){return U(S),this},f.getFileId=function(){return ae()};var Z=f.__private__.convertDateToPDFDate=function(S){var V=S.getTimezoneOffset(),pe=V<0?"+":"-",we=Math.floor(Math.abs(V/60)),Fe=Math.abs(V%60),et=[pe,M(we),"'",M(Fe),"'"].join("");return["D:",S.getFullYear(),M(S.getMonth()+1),M(S.getDate()),M(S.getHours()),M(S.getMinutes()),M(S.getSeconds()),et].join("")},W=f.__private__.convertPDFDateToDate=function(S){var V=parseInt(S.substr(2,4),10),pe=parseInt(S.substr(6,2),10)-1,we=parseInt(S.substr(8,2),10),Fe=parseInt(S.substr(10,2),10),et=parseInt(S.substr(12,2),10),dt=parseInt(S.substr(14,2),10);return new Date(V,pe,we,Fe,et,dt,0)},ve=f.__private__.setCreationDate=function(S){var V;if(S===void 0&&(S=new Date),S instanceof Date)V=Z(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=S}return Q=V},A=f.__private__.getCreationDate=function(S){var V=Q;return S==="jsDate"&&(V=W(Q)),V};f.setCreationDate=function(S){return ve(S),this},f.getCreationDate=function(S){return A(S)};var z,M=f.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},re=f.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},te=0,O=[],ce=[],le=0,Ee=[],_e=[],Be=!1,Ge=ce,ut=function(){te=0,le=0,ce=[],O=[],Ee=[],Mr=us(),Ir=us()};f.__private__.setCustomOutputDestination=function(S){Be=!0,Ge=S};var Le=function(S){Be||(Ge=S)};f.__private__.resetCustomOutputDestination=function(){Be=!1,Ge=ce};var K=f.__private__.out=function(S){return S=S.toString(),le+=S.length+1,Ge.push(S),Ge},He=f.__private__.write=function(S){return K(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},xe=f.__private__.getArrayBuffer=function(S){for(var V=S.length,pe=new ArrayBuffer(V),we=new Uint8Array(pe);V--;)we[V]=S.charCodeAt(V);return pe},ge=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ge};var se=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(S){return se=N===w.ADVANCED?S/ke:S,this};var F,ne=f.__private__.getFontSize=f.getFontSize=function(){return N===w.COMPAT?se:se*ke},ye=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(S){return ye=S,this},f.__private__.getR2L=f.getR2L=function(){return ye};var je,Y=f.__private__.setZoomMode=function(S){var V=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))F=S;else if(isNaN(S)){if(V.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');F=S}else F=parseInt(S,10)};f.__private__.getZoomMode=function(){return F};var Re,Qe=f.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');je=S};f.__private__.getPageMode=function(){return je};var me=f.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Re=S};f.__private__.getLayoutMode=function(){return Re},f.__private__.setDisplayMode=f.setDisplayMode=function(S,V,pe){return Y(S),me(V),Qe(pe),this};var be={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(S){if(Object.keys(be).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return be[S]},f.__private__.getDocumentProperties=function(){return be},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(S){for(var V in be)be.hasOwnProperty(V)&&S[V]&&(be[V]=S[V]);return this},f.__private__.setDocumentProperty=function(S,V){if(Object.keys(be).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return be[S]=V};var fe,ke,We,Ze,xt,lt={},ht={},Nt=[],Et={},Qt={},zt={},Kt={},Ns=null,Ts=0,Yt=[],Rs=new G3(f),Nn=e.hotfixes||[],vr={},xn={},qe=[],Te=function S(V,pe,we,Fe,et,dt){if(!(this instanceof S))return new S(V,pe,we,Fe,et,dt);isNaN(V)&&(V=1),isNaN(pe)&&(pe=0),isNaN(we)&&(we=0),isNaN(Fe)&&(Fe=1),isNaN(et)&&(et=0),isNaN(dt)&&(dt=0),this._matrix=[V,pe,we,Fe,et,dt]};Object.defineProperty(Te.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Te.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Te.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Te.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Te.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Te.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Te.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Te.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Te.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Te.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Te.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Te.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Te.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Te.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Te.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Te.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Te.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(S)},Te.prototype.multiply=function(S){var V=S.sx*this.sx+S.shy*this.shx,pe=S.sx*this.shy+S.shy*this.sy,we=S.shx*this.sx+S.sy*this.shx,Fe=S.shx*this.shy+S.sy*this.sy,et=S.tx*this.sx+S.ty*this.shx+this.tx,dt=S.tx*this.shy+S.ty*this.sy+this.ty;return new Te(V,pe,we,Fe,et,dt)},Te.prototype.decompose=function(){var S=this.sx,V=this.shy,pe=this.shx,we=this.sy,Fe=this.tx,et=this.ty,dt=Math.sqrt(S*S+V*V),Rt=(S/=dt)*pe+(V/=dt)*we;pe-=S*Rt,we-=V*Rt;var Gt=Math.sqrt(pe*pe+we*we);return Rt/=Gt,S*(we/=Gt)<V*(pe/=Gt)&&(S=-S,V=-V,Rt=-Rt,dt=-dt),{scale:new Te(dt,0,0,Gt,0,0),translate:new Te(1,0,0,1,Fe,et),rotate:new Te(S,V,-V,S,0,0),skew:new Te(1,0,Rt,1,0,0)}},Te.prototype.toString=function(S){return this.join(" ")},Te.prototype.inversed=function(){var S=this.sx,V=this.shy,pe=this.shx,we=this.sy,Fe=this.tx,et=this.ty,dt=1/(S*we-V*pe),Rt=we*dt,Gt=-V*dt,ys=-pe*dt,ms=S*dt;return new Te(Rt,Gt,ys,ms,-Rt*Fe-ys*et,-Gt*Fe-ms*et)},Te.prototype.applyToPoint=function(S){var V=S.x*this.sx+S.y*this.shx+this.tx,pe=S.x*this.shy+S.y*this.sy+this.ty;return new Yu(V,pe)},Te.prototype.applyToRectangle=function(S){var V=this.applyToPoint(S),pe=this.applyToPoint(new Yu(S.x+S.w,S.y+S.h));return new cm(V.x,V.y,pe.x-V.x,pe.y-V.y)},Te.prototype.clone=function(){var S=this.sx,V=this.shy,pe=this.shx,we=this.sy,Fe=this.tx,et=this.ty;return new Te(S,V,pe,we,Fe,et)},f.Matrix=Te;var mt=f.matrixMult=function(S,V){return V.multiply(S)},Wt=new Te(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Wt;var Jt=function(S,V){if(!Qt[S]){var pe=(V instanceof Qd?"Sh":"P")+(Object.keys(Et).length+1).toString(10);V.id=pe,Qt[S]=pe,Et[pe]=V,Rs.publish("addPattern",V)}};f.ShadingPattern=Qd,f.TilingPattern=Mh,f.addShadingPattern=function(S,V){return T("addShadingPattern()"),Jt(S,V),this},f.beginTilingPattern=function(S){T("beginTilingPattern()"),Ux(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},f.endTilingPattern=function(S,V){T("endTilingPattern()"),V.stream=_e[z].join(`
`),Jt(S,V),Rs.publish("endTilingPattern",V),qe.pop().restore()};var ks=f.__private__.newObject=function(){var S=us();return hs(S,!0),S},us=f.__private__.newObjectDeferred=function(){return te++,O[te]=function(){return le},te},hs=function(S,V){return V=typeof V=="boolean"&&V,O[S]=le,V&&K(S+" 0 obj"),S},Ms=f.__private__.newAdditionalObject=function(){var S={objId:us(),content:""};return Ee.push(S),S},Mr=us(),Ir=us(),Sn=f.__private__.decodeColorString=function(S){var V=S.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length===5&&(V[4]==="k"||V[4]==="K")&&(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var pe=parseFloat(V[0]);V=[pe,pe,pe,"r"]}for(var we="#",Fe=0;Fe<3;Fe++)we+=("0"+Math.floor(255*parseFloat(V[Fe])).toString(16)).slice(-2);return we},Pe=f.__private__.encodeColorString=function(S){var V;typeof S=="string"&&(S={ch1:S});var pe=S.ch1,we=S.ch2,Fe=S.ch3,et=S.ch4,dt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var Rt=new b7(pe);if(Rt.ok)pe=Rt.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var Gt=parseInt(pe.substr(1),16);pe=Gt>>16&255,we=Gt>>8&255,Fe=255&Gt}if(we===void 0||et===void 0&&pe===we&&we===Fe)if(typeof pe=="string")V=pe+" "+dt[0];else switch(S.precision){case 2:V=X(pe/255)+" "+dt[0];break;case 3:default:V=D(pe/255)+" "+dt[0]}else if(et===void 0||sr(et)==="object"){if(et&&!isNaN(et.a)&&et.a===0)return V=["1.","1.","1.",dt[1]].join(" ");if(typeof pe=="string")V=[pe,we,Fe,dt[1]].join(" ");else switch(S.precision){case 2:V=[X(pe/255),X(we/255),X(Fe/255),dt[1]].join(" ");break;default:case 3:V=[D(pe/255),D(we/255),D(Fe/255),dt[1]].join(" ")}}else if(typeof pe=="string")V=[pe,we,Fe,et,dt[2]].join(" ");else switch(S.precision){case 2:V=[X(pe),X(we),X(Fe),X(et),dt[2]].join(" ");break;case 3:default:V=[D(pe),D(we),D(Fe),D(et),dt[2]].join(" ")}return V},ot=f.__private__.getFilters=function(){return o},kt=f.__private__.putStream=function(S){var V=(S=S||{}).data||"",pe=S.filters||ot(),we=S.alreadyAppliedFilters||[],Fe=S.addLength1||!1,et=V.length,dt=S.objectId,Rt=function(ta){return ta};if(u!==null&&dt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Rt=ea.encryptor(dt,0));var Gt={};pe===!0&&(pe=["FlateEncode"]);var ys=S.additionalKeyValues||[],ms=(Gt=rs.API.processDataByFilters!==void 0?rs.API.processDataByFilters(V,pe):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(Gt.data.length!==0&&(ys.push({key:"Length",value:Gt.data.length}),Fe===!0&&ys.push({key:"Length1",value:et})),ms.length!=0)if(ms.split("/").length-1==1)ys.push({key:"Filter",value:ms});else{ys.push({key:"Filter",value:"["+ms+"]"});for(var qs=0;qs<ys.length;qs+=1)if(ys[qs].key==="DecodeParms"){for(var $r=[],Vr=0;Vr<Gt.reverseChain.split("/").length-1;Vr+=1)$r.push("null");$r.push(ys[qs].value),ys[qs].value="["+$r.join(" ")+"]"}}K("<<");for(var on=0;on<ys.length;on++)K("/"+ys[on].key+" "+ys[on].value);K(">>"),Gt.data.length!==0&&(K("stream"),K(Rt(Gt.data)),K("endstream"))},Vt=f.__private__.putPage=function(S){var V=S.number,pe=S.data,we=S.objId,Fe=S.contentsObjId;hs(we,!0),K("<</Type /Page"),K("/Parent "+S.rootDictionaryObjId+" 0 R"),K("/Resources "+S.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(I(S.mediaBox.bottomLeftX))+" "+parseFloat(I(S.mediaBox.bottomLeftY))+" "+I(S.mediaBox.topRightX)+" "+I(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&K("/CropBox ["+I(S.cropBox.bottomLeftX)+" "+I(S.cropBox.bottomLeftY)+" "+I(S.cropBox.topRightX)+" "+I(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&K("/BleedBox ["+I(S.bleedBox.bottomLeftX)+" "+I(S.bleedBox.bottomLeftY)+" "+I(S.bleedBox.topRightX)+" "+I(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&K("/TrimBox ["+I(S.trimBox.bottomLeftX)+" "+I(S.trimBox.bottomLeftY)+" "+I(S.trimBox.topRightX)+" "+I(S.trimBox.topRightY)+"]"),S.artBox!==null&&K("/ArtBox ["+I(S.artBox.bottomLeftX)+" "+I(S.artBox.bottomLeftY)+" "+I(S.artBox.topRightX)+" "+I(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&K("/UserUnit "+S.userUnit),Rs.publish("putPage",{objId:we,pageContext:Yt[V],pageNumber:V,page:pe}),K("/Contents "+Fe+" 0 R"),K(">>"),K("endobj");var et=pe.join(`
`);return N===w.ADVANCED&&(et+=`
Q`),hs(Fe,!0),kt({data:et,filters:ot(),objectId:Fe}),K("endobj"),we},fs=f.__private__.putPages=function(){var S,V,pe=[];for(S=1;S<=Ts;S++)Yt[S].objId=us(),Yt[S].contentsObjId=us();for(S=1;S<=Ts;S++)pe.push(Vt({number:S,data:_e[S],objId:Yt[S].objId,contentsObjId:Yt[S].contentsObjId,mediaBox:Yt[S].mediaBox,cropBox:Yt[S].cropBox,bleedBox:Yt[S].bleedBox,trimBox:Yt[S].trimBox,artBox:Yt[S].artBox,userUnit:Yt[S].userUnit,rootDictionaryObjId:Mr,resourceDictionaryObjId:Ir}));hs(Mr,!0),K("<</Type /Pages");var we="/Kids [";for(V=0;V<Ts;V++)we+=pe[V]+" 0 R ";K(we+"]"),K("/Count "+Ts),K(">>"),K("endobj"),Rs.publish("postPutPages")},ir=function(S){Rs.publish("putFont",{font:S,out:K,newObject:ks,putStream:kt}),S.isAlreadyPutted!==!0&&(S.objectNumber=ks(),K("<<"),K("/Type /Font"),K("/BaseFont /"+_h(S.postScriptName)),K("/Subtype /Type1"),typeof S.encoding=="string"&&K("/Encoding /"+S.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},$s=function(){for(var S in lt)lt.hasOwnProperty(S)&&(h===!1||h===!0&&p.hasOwnProperty(S))&&ir(lt[S])},As=function(S){S.objectNumber=ks();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[I(S.x),I(S.y),I(S.x+S.width),I(S.y+S.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var pe=S.pages[1].join(`
`);kt({data:pe,additionalKeyValues:V,objectId:S.objectNumber}),K("endobj")},Lt=function(){for(var S in vr)vr.hasOwnProperty(S)&&As(vr[S])},is=function(S,V){var pe,we=[],Fe=1/(V-1);for(pe=0;pe<1;pe+=Fe)we.push(pe);if(we.push(1),S[0].offset!=0){var et={offset:0,color:S[0].color};S.unshift(et)}if(S[S.length-1].offset!=1){var dt={offset:1,color:S[S.length-1].color};S.push(dt)}for(var Rt="",Gt=0,ys=0;ys<we.length;ys++){for(pe=we[ys];pe>S[Gt+1].offset;)Gt++;var ms=S[Gt].offset,qs=(pe-ms)/(S[Gt+1].offset-ms),$r=S[Gt].color,Vr=S[Gt+1].color;Rt+=re(Math.round((1-qs)*$r[0]+qs*Vr[0]).toString(16))+re(Math.round((1-qs)*$r[1]+qs*Vr[1]).toString(16))+re(Math.round((1-qs)*$r[2]+qs*Vr[2]).toString(16))}return Rt.trim()},pr=function(S,V){V||(V=21);var pe=ks(),we=is(S.colors,V),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+V+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),kt({data:we,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),K("endobj"),S.objectNumber=ks(),K("<< /ShadingType "+S.type),K("/ColorSpace /DeviceRGB");var et="/Coords ["+I(parseFloat(S.coords[0]))+" "+I(parseFloat(S.coords[1]))+" ";S.type===2?et+=I(parseFloat(S.coords[2]))+" "+I(parseFloat(S.coords[3])):et+=I(parseFloat(S.coords[2]))+" "+I(parseFloat(S.coords[3]))+" "+I(parseFloat(S.coords[4]))+" "+I(parseFloat(S.coords[5])),K(et+="]"),S.matrix&&K("/Matrix ["+S.matrix.toString()+"]"),K("/Function "+pe+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},ba=function(S,V){var pe=us(),we=ks();V.push({resourcesOid:pe,objectOid:we}),S.objectNumber=we;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+S.boundingBox.map(I).join(" ")+"]"}),Fe.push({key:"XStep",value:I(S.xStep)}),Fe.push({key:"YStep",value:I(S.yStep)}),Fe.push({key:"Resources",value:pe+" 0 R"}),S.matrix&&Fe.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),kt({data:S.stream,additionalKeyValues:Fe,objectId:S.objectNumber}),K("endobj")},Qn=function(S){var V;for(V in Et)Et.hasOwnProperty(V)&&(Et[V]instanceof Qd?pr(Et[V]):Et[V]instanceof Mh&&ba(Et[V],S))},Mn=function(S){for(var V in S.objectNumber=ks(),K("<<"),S)switch(V){case"opacity":K("/ca "+X(S[V]));break;case"stroke-opacity":K("/CA "+X(S[V]))}K(">>"),K("endobj")},Jr=function(){var S;for(S in zt)zt.hasOwnProperty(S)&&Mn(zt[S])},ja=function(){for(var S in K("/XObject <<"),vr)vr.hasOwnProperty(S)&&vr[S].objectNumber>=0&&K("/"+S+" "+vr[S].objectNumber+" 0 R");Rs.publish("putXobjectDict"),K(">>")},Oa=function(){ea.oid=ks(),K("<<"),K("/Filter /Standard"),K("/V "+ea.v),K("/R "+ea.r),K("/U <"+ea.toHexString(ea.U)+">"),K("/O <"+ea.toHexString(ea.O)+">"),K("/P "+ea.P),K(">>"),K("endobj")},dc=function(){for(var S in K("/Font <<"),lt)lt.hasOwnProperty(S)&&(h===!1||h===!0&&p.hasOwnProperty(S))&&K("/"+S+" "+lt[S].objectNumber+" 0 R");K(">>")},Ro=function(){if(Object.keys(Et).length>0){for(var S in K("/Shading <<"),Et)Et.hasOwnProperty(S)&&Et[S]instanceof Qd&&Et[S].objectNumber>=0&&K("/"+S+" "+Et[S].objectNumber+" 0 R");Rs.publish("putShadingPatternDict"),K(">>")}},Ni=function(S){if(Object.keys(Et).length>0){for(var V in K("/Pattern <<"),Et)Et.hasOwnProperty(V)&&Et[V]instanceof f.TilingPattern&&Et[V].objectNumber>=0&&Et[V].objectNumber<S&&K("/"+V+" "+Et[V].objectNumber+" 0 R");Rs.publish("putTilingPatternDict"),K(">>")}},H=function(){if(Object.keys(zt).length>0){var S;for(S in K("/ExtGState <<"),zt)zt.hasOwnProperty(S)&&zt[S].objectNumber>=0&&K("/"+S+" "+zt[S].objectNumber+" 0 R");Rs.publish("putGStateDict"),K(">>")}},Ie=function(S){hs(S.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),dc(),Ro(),Ni(S.objectOid),H(),ja(),K(">>"),K("endobj")},Je=function(){var S=[];$s(),Jr(),Lt(),Qn(S),Rs.publish("putResources"),S.forEach(Ie),Ie({resourcesOid:Ir,objectOid:Number.MAX_SAFE_INTEGER}),Rs.publish("postPutResources")},wt=function(){Rs.publish("putAdditionalObjects");for(var S=0;S<Ee.length;S++){var V=Ee[S];hs(V.objId,!0),K(V.content),K("endobj")}Rs.publish("postPutAdditionalObjects")},St=function(S){ht[S.fontName]=ht[S.fontName]||{},ht[S.fontName][S.fontStyle]=S.id},qt=function(S,V,pe,we,Fe){var et={id:"F"+(Object.keys(lt).length+1).toString(10),postScriptName:S,fontName:V,fontStyle:pe,encoding:we,isStandardFont:Fe||!1,metadata:{}};return Rs.publish("addFont",{font:et,instance:this}),lt[et.id]=et,St(et),et.id},os=function(S){for(var V=0,pe=ge.length;V<pe;V++){var we=qt.call(this,S[V][0],S[V][1],S[V][2],ge[V][3],!0);h===!1&&(p[we]=!0);var Fe=S[V][0].split("-");St({id:we,fontName:Fe[0],fontStyle:Fe[1]||""})}Rs.publish("addFonts",{fonts:lt,dictionary:ht})},Qs=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(we){var V=we.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var pe="Error in function "+V.split(`
`)[0].split("<")[0]+": "+we.message;if(!as.console)throw new Error(pe);as.console.error(pe,we),as.alert&&alert(pe)}},S.foo.bar=S,S.foo},nr=function(S,V){var pe,we,Fe,et,dt,Rt,Gt,ys,ms;if(Fe=(V=V||{}).sourceEncoding||"Unicode",dt=V.outputEncoding,(V.autoencode||dt)&&lt[fe].metadata&&lt[fe].metadata[Fe]&&lt[fe].metadata[Fe].encoding&&(et=lt[fe].metadata[Fe].encoding,!dt&&lt[fe].encoding&&(dt=lt[fe].encoding),!dt&&et.codePages&&(dt=et.codePages[0]),typeof dt=="string"&&(dt=et[dt]),dt)){for(Gt=!1,Rt=[],pe=0,we=S.length;pe<we;pe++)(ys=dt[S.charCodeAt(pe)])?Rt.push(String.fromCharCode(ys)):Rt.push(S[pe]),Rt[pe].charCodeAt(0)>>8&&(Gt=!0);S=Rt.join("")}for(pe=S.length;Gt===void 0&&pe!==0;)S.charCodeAt(pe-1)>>8&&(Gt=!0),pe--;if(!Gt)return S;for(Rt=V.noBOM?[]:[254,255],pe=0,we=S.length;pe<we;pe++){if((ms=(ys=S.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rt.push(ms),Rt.push(ys-(ms<<8))}return String.fromCharCode.apply(void 0,Rt)},yr=f.__private__.pdfEscape=f.pdfEscape=function(S,V){return nr(S,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gi=f.__private__.beginPage=function(S){_e[++Ts]=[],Yt[Ts]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Md(Ts),Le(_e[z])},$n=function(S,V){var pe,we,Fe;switch(r=V||r,typeof S=="string"&&(pe=v(S.toLowerCase()),Array.isArray(pe)&&(we=pe[0],Fe=pe[1])),Array.isArray(S)&&(we=S[0]*ke,Fe=S[1]*ke),isNaN(we)&&(we=a[0],Fe=a[1]),(we>14400||Fe>14400)&&(jr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),Fe=Math.min(14400,Fe)),a=[we,Fe],r.substr(0,1)){case"l":Fe>we&&(a=[Fe,we]);break;case"p":we>Fe&&(a=[Fe,we])}Gi(a),Ox(am),K(Ki),om!==0&&K(om+" J"),lm!==0&&K(lm+" j"),Rs.publish("addPage",{pageNumber:Ts})},Od=function(S){S>0&&S<=Ts&&(_e.splice(S,1),Yt.splice(S,1),Ts--,z>Ts&&(z=Ts),this.setPage(z))},Md=function(S){S>0&&S<=Ts&&(z=S)},tm=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return _e.length-1},qu=function(S,V,pe){var we,Fe=void 0;return pe=pe||{},S=S!==void 0?S:lt[fe].fontName,V=V!==void 0?V:lt[fe].fontStyle,we=S.toLowerCase(),ht[we]!==void 0&&ht[we][V]!==void 0?Fe=ht[we][V]:ht[S]!==void 0&&ht[S][V]!==void 0?Fe=ht[S][V]:pe.disableWarning===!1&&jr.warn("Unable to look up font label for font '"+S+"', '"+V+"'. Refer to getFontList() for available fonts."),Fe||pe.noFallback||(Fe=ht.times[V])==null&&(Fe=ht.times.normal),Fe},sm=f.__private__.putInfo=function(){var S=ks(),V=function(we){return we};for(var pe in u!==null&&(V=ea.encryptor(S,0)),K("<<"),K("/Producer ("+yr(V("jsPDF "+rs.version))+")"),be)be.hasOwnProperty(pe)&&be[pe]&&K("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+yr(V(be[pe]))+")");K("/CreationDate ("+yr(V(Q))+")"),K(">>"),K("endobj")},uc=f.__private__.putCatalog=function(S){var V=(S=S||{}).rootDictionaryObjId||Mr;switch(ks(),K("<<"),K("/Type /Catalog"),K("/Pages "+V+" 0 R"),F||(F="fullwidth"),F){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+F;pe.substr(pe.length-1)==="%"&&(F=parseInt(F)/100),typeof F=="number"&&K("/OpenAction [3 0 R /XYZ null null "+X(F)+"]")}switch(Re||(Re="continuous"),Re){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}je&&K("/PageMode /"+je),Rs.publish("putCatalog"),K(">>"),K("endobj")},Xb=f.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(te+1)),K("/Root "+te+" 0 R"),K("/Info "+(te-1)+" 0 R"),u!==null&&K("/Encrypt "+ea.oid+" 0 R"),K("/ID [ <"+oe+"> <"+oe+"> ]"),K(">>")},Qb=f.__private__.putHeader=function(){K("%PDF-"+y),K("%")},e1=f.__private__.putXRef=function(){var S="0000000000";K("xref"),K("0 "+(te+1)),K("0000000000 65535 f ");for(var V=1;V<=te;V++)typeof O[V]=="function"?K((S+O[V]()).slice(-10)+" 00000 n "):O[V]!==void 0?K((S+O[V]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},yl=f.__private__.buildDocument=function(){ut(),Le(ce),Rs.publish("buildDocument"),Qb(),fs(),wt(),Je(),u!==null&&Oa(),sm(),uc();var S=le;return e1(),Xb(),K("startxref"),K(""+S),K("%%EOF"),Le(_e[z]),ce.join(`
`)},Vu=f.__private__.getBlob=function(S){return new Blob([xe(S)],{type:"application/pdf"})},Hu=f.output=f.__private__.output=Qs(function(S,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",S){case void 0:return yl();case"save":f.save(V.filename);break;case"arraybuffer":return xe(yl());case"blob":return Vu(yl());case"bloburi":case"bloburl":if(as.URL!==void 0&&typeof as.URL.createObjectURL=="function")return as.URL&&as.URL.createObjectURL(Vu(yl()))||void 0;jr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",we=yl();try{pe=oN(we)}catch{pe=oN(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+V.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(as)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",et=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(Fe=V.pdfObjectUrl,et="");var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+et+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",Rt=as.open();return Rt!==null&&Rt.document.write(dt),Rt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(as)==="[object Window]"){var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',ys=as.open();if(ys!==null){ys.document.write(Gt);var ms=this;ys.document.documentElement.querySelector("#pdfViewer").onload=function(){ys.document.title=V.filename,ys.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ms.output("bloburl"))}}return ys}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(as)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',$r=as.open();if($r!==null&&($r.document.write(qs),$r.document.title=V.filename),$r||typeof safari>"u")return $r;break;case"datauri":case"dataurl":return as.document.location.href=this.output("datauristring",V);default:return null}}),Rx=function(S){return Array.isArray(Nn)===!0&&Nn.indexOf(S)>-1};switch(n){case"pt":ke=1;break;case"mm":ke=72/25.4;break;case"cm":ke=72/2.54;break;case"in":ke=72;break;case"px":ke=Rx("px_scaling")==1?.75:96/72;break;case"pc":case"em":ke=12;break;case"ex":ke=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ke=n}var ea=null;ve(),U();var t1=function(S){return u!==null?ea.encryptor(S,0):function(V){return V}},Ix=f.__private__.getPageInfo=f.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Yt[S].objId,pageNumber:S,pageContext:Yt[S]}},cs=f.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in Yt)if(Yt[V].objId===S)break;return Ix(V)},s1=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Yt[z].objId,pageNumber:z,pageContext:Yt[z]}};f.addPage=function(){return $n.apply(this,arguments),this},f.setPage=function(){return Md.apply(this,arguments),Le.call(this,_e[z]),this},f.insertPage=function(S){return this.addPage(),this.movePage(z,S),this},f.movePage=function(S,V){var pe,we;if(S>V){pe=_e[S],we=Yt[S];for(var Fe=S;Fe>V;Fe--)_e[Fe]=_e[Fe-1],Yt[Fe]=Yt[Fe-1];_e[V]=pe,Yt[V]=we,this.setPage(V)}else if(S<V){pe=_e[S],we=Yt[S];for(var et=S;et<V;et++)_e[et]=_e[et+1],Yt[et]=Yt[et+1];_e[V]=pe,Yt[V]=we,this.setPage(V)}return this},f.deletePage=function(){return Od.apply(this,arguments),this},f.__private__.text=f.text=function(S,V,pe,we,Fe){var et,dt,Rt,Gt,ys,ms,qs,$r,Vr,on=(we=we||{}).scope||this;if(typeof S=="number"&&typeof V=="number"&&(typeof pe=="string"||Array.isArray(pe))){var ta=pe;pe=V,V=S,S=ta}if(arguments[3]instanceof Te?(T("The transform parameter of text() with a Matrix value"),Vr=Fe):(Rt=arguments[4],Gt=arguments[5],sr(qs=arguments[3])==="object"&&qs!==null||(typeof Rt=="string"&&(Gt=Rt,Rt=null),typeof qs=="string"&&(Gt=qs,qs=null),typeof qs=="number"&&(Rt=qs,qs=null),we={flags:qs,angle:Rt,align:Gt})),isNaN(V)||isNaN(pe)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return on;var _n="",Yi=!1,ai=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:Bd,Do=on.internal.scaleFactor;function qx(Sr){return Sr=Sr.split("	").join(Array(we.TabLen||9).join(" ")),yr(Sr,qs)}function fm(Sr){for(var _r,Xr=Sr.concat(),gn=[],Sl=Xr.length;Sl--;)typeof(_r=Xr.shift())=="string"?gn.push(_r):Array.isArray(Sr)&&(_r.length===1||_r[1]===void 0&&_r[2]===void 0)?gn.push(_r[0]):gn.push([_r[0],_r[1],_r[2]]);return gn}function mm(Sr,_r){var Xr;if(typeof Sr=="string")Xr=_r(Sr)[0];else if(Array.isArray(Sr)){for(var gn,Sl,wm=Sr.concat(),ih=[],Kx=wm.length;Kx--;)typeof(gn=wm.shift())=="string"?ih.push(_r(gn)[0]):Array.isArray(gn)&&typeof gn[0]=="string"&&(Sl=_r(gn[0],gn[1],gn[2]),ih.push([Sl[0],Sl[1],Sl[2]]));Xr=ih}return Xr}var Zu=!1,pm=!0;if(typeof S=="string")Zu=!0;else if(Array.isArray(S)){var xm=S.concat();dt=[];for(var Xu,Bn=xm.length;Bn--;)(typeof(Xu=xm.shift())!="string"||Array.isArray(Xu)&&typeof Xu[0]!="string")&&(pm=!1);Zu=pm}if(Zu===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Qu=se/on.internal.scaleFactor,eh=Qu*(ai-1);switch(we.baseline){case"bottom":pe-=eh;break;case"top":pe+=Qu-eh;break;case"hanging":pe+=Qu-2*eh;break;case"middle":pe+=Qu/2-eh}if((ms=we.maxWidth||0)>0&&(typeof S=="string"?S=on.splitTextToSize(S,ms):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Sr,_r){return Sr.concat(on.splitTextToSize(_r,ms))},[]))),et={text:S,x:V,y:pe,options:we,mutex:{pdfEscape:yr,activeFontKey:fe,fonts:lt,activeFontSize:se}},Rs.publish("preProcessText",et),S=et.text,Rt=(we=et.options).angle,!(Vr instanceof Te)&&Rt&&typeof Rt=="number"){Rt*=Math.PI/180,we.rotationDirection===0&&(Rt=-Rt),N===w.ADVANCED&&(Rt=-Rt);var th=Math.cos(Rt),gm=Math.sin(Rt);Vr=new Te(th,gm,-gm,th,0,0)}else Rt&&Rt instanceof Te&&(Vr=Rt);N!==w.ADVANCED||Vr||(Vr=Wt),(ys=we.charSpace||Ku)!==void 0&&(_n+=I(C(ys))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),($r=we.horizontalScale)!==void 0&&(_n+=I(100*$r)+` Tz
`),we.lang;var Ma=-1,h1=we.renderingMode!==void 0?we.renderingMode:we.stroke,vm=on.internal.getCurrentPageInfo().pageContext;switch(h1){case 0:case!1:case"fill":Ma=0;break;case 1:case!0:case"stroke":Ma=1;break;case 2:case"fillThenStroke":Ma=2;break;case 3:case"invisible":Ma=3;break;case 4:case"fillAndAddForClipping":Ma=4;break;case 5:case"strokeAndAddPathForClipping":Ma=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ma=6;break;case 7:case"addToPathForClipping":Ma=7}var Vx=vm.usedRenderingMode!==void 0?vm.usedRenderingMode:-1;Ma!==-1?_n+=Ma+` Tr
`:Vx!==-1&&(_n+=`0 Tr
`),Ma!==-1&&(vm.usedRenderingMode=Ma),Gt=we.align||"left";var Si,sh=se*ai,Hx=on.internal.pageSize.getWidth(),Wx=lt[fe];ys=we.charSpace||Ku,ms=we.maxWidth||0,qs=Object.assign({autoencode:!0,noBOM:!0},we.flags);var pc=[],qd=function(Sr){return on.getStringUnitWidth(Sr,{font:Wx,charSpace:ys,fontSize:se,doKerning:!1})*se/Do};if(Object.prototype.toString.call(S)==="[object Array]"){var $a;dt=fm(S),Gt!=="left"&&(Si=dt.map(qd));var wa,xc=0;if(Gt==="right"){V-=Si[0],S=[],Bn=dt.length;for(var jl=0;jl<Bn;jl++)jl===0?(wa=Fo(V),$a=bl(pe)):(wa=C(xc-Si[jl]),$a=-sh),S.push([dt[jl],wa,$a]),xc=Si[jl]}else if(Gt==="center"){V-=Si[0]/2,S=[],Bn=dt.length;for(var wl=0;wl<Bn;wl++)wl===0?(wa=Fo(V),$a=bl(pe)):(wa=C((xc-Si[wl])/2),$a=-sh),S.push([dt[wl],wa,$a]),xc=Si[wl]}else if(Gt==="left"){S=[],Bn=dt.length;for(var rh=0;rh<Bn;rh++)S.push(dt[rh])}else if(Gt==="justify"&&Wx.encoding==="Identity-H"){S=[],Bn=dt.length,ms=ms!==0?ms:Hx;for(var Nl=0,Zr=0;Zr<Bn;Zr++)if($a=Zr===0?bl(pe):-sh,wa=Zr===0?Fo(V):Nl,Zr<Bn-1){var ym=C((ms-Si[Zr])/(dt[Zr].split(" ").length-1)),Na=dt[Zr].split(" ");S.push([Na[0]+" ",wa,$a]),Nl=0;for(var _i=1;_i<Na.length;_i++){var nh=(qd(Na[_i-1]+" "+Na[_i])-qd(Na[_i]))*Do+ym;_i==Na.length-1?S.push([Na[_i],nh,0]):S.push([Na[_i]+" ",nh,0]),Nl-=nh}}else S.push([dt[Zr],wa,$a]);S.push(["",Nl,0])}else{if(Gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Bn=dt.length,ms=ms!==0?ms:Hx,Zr=0;Zr<Bn;Zr++)$a=Zr===0?bl(pe):-sh,wa=Zr===0?Fo(V):0,Zr<Bn-1?pc.push(I(C((ms-Si[Zr])/(dt[Zr].split(" ").length-1)))):pc.push(0),S.push([dt[Zr],wa,$a])}}var Gx=typeof we.R2L=="boolean"?we.R2L:ye;Gx===!0&&(S=mm(S,function(Sr,_r,Xr){return[Sr.split("").reverse().join(""),_r,Xr]})),et={text:S,x:V,y:pe,options:we,mutex:{pdfEscape:yr,activeFontKey:fe,fonts:lt,activeFontSize:se}},Rs.publish("postProcessText",et),S=et.text,Yi=et.mutex.isHex||!1;var bm=lt[fe].encoding;bm!=="WinAnsiEncoding"&&bm!=="StandardEncoding"||(S=mm(S,function(Sr,_r,Xr){return[qx(Sr),_r,Xr]})),dt=fm(S),S=[];for(var Vd,Hd,gc,Wd=0,ah=1,Gd=Array.isArray(dt[0])?ah:Wd,vc="",jm=function(Sr,_r,Xr){var gn="";return Xr instanceof Te?(Xr=typeof we.angle=="number"?mt(Xr,new Te(1,0,0,1,Sr,_r)):mt(new Te(1,0,0,1,Sr,_r),Xr),N===w.ADVANCED&&(Xr=mt(new Te(1,0,0,-1,0,0),Xr)),gn=Xr.join(" ")+` Tm
`):gn=I(Sr)+" "+I(_r)+` Td
`,gn},Ci=0;Ci<dt.length;Ci++){switch(vc="",Gd){case ah:gc=(Yi?"<":"(")+dt[Ci][0]+(Yi?">":")"),Vd=parseFloat(dt[Ci][1]),Hd=parseFloat(dt[Ci][2]);break;case Wd:gc=(Yi?"<":"(")+dt[Ci]+(Yi?">":")"),Vd=Fo(V),Hd=bl(pe)}pc!==void 0&&pc[Ci]!==void 0&&(vc=pc[Ci]+` Tw
`),Ci===0?S.push(vc+jm(Vd,Hd,Vr)+gc):Gd===Wd?S.push(vc+gc):Gd===ah&&S.push(vc+jm(Vd,Hd,Vr)+gc)}S=Gd===Wd?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var ki=`BT
/`;return ki+=fe+" "+se+` Tf
`,ki+=I(se*ai)+` TL
`,ki+=zd+`
`,ki+=_n,ki+=S,K(ki+="ET"),p[fe]=!0,on};var r1=f.__private__.clip=f.clip=function(S){return K(S==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return r1("evenodd")},f.__private__.discardPath=f.discardPath=function(){return K("n"),this};var Io=f.__private__.isValidStyle=function(S){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(V=!0),V};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(S){return Io(S)&&(d=S),this};var Fx=f.__private__.getStyle=f.getStyle=function(S){var V=d;switch(S){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=S}return V},Dx=f.close=function(){return K("h"),this};f.stroke=function(){return K("S"),this},f.fill=function(S){return Wu("f",S),this},f.fillEvenOdd=function(S){return Wu("f*",S),this},f.fillStroke=function(S){return Wu("B",S),this},f.fillStrokeEvenOdd=function(S){return Wu("B*",S),this};var Wu=function(S,V){sr(V)==="object"?a1(V,S):K(S)},rm=function(S){S===null||N===w.ADVANCED&&S===void 0||(S=Fx(S),K(S))};function n1(S,V,pe,we,Fe){var et=new Mh(V||this.boundingBox,pe||this.xStep,we||this.yStep,this.gState,Fe||this.matrix);et.stream=this.stream;var dt=S+"$$"+this.cloneIndex+++"$$";return Jt(dt,et),et}var a1=function(S,V){var pe=Qt[S.key],we=Et[pe];if(we instanceof Qd)K("q"),K(i1(V)),we.gState&&f.setGState(we.gState),K(S.matrix.toString()+" cm"),K("/"+pe+" sh"),K("Q");else if(we instanceof Mh){var Fe=new Te(1,0,0,-1,0,mc());S.matrix&&(Fe=Fe.multiply(S.matrix||Wt),pe=n1.call(we,S.key,S.boundingBox,S.xStep,S.yStep,Fe).id),K("q"),K("/Pattern cs"),K("/"+pe+" scn"),we.gState&&f.setGState(we.gState),K(V),K("Q")}},i1=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},nm=f.moveTo=function(S,V){return K(I(C(S))+" "+I(B(V))+" m"),this},$d=f.lineTo=function(S,V){return K(I(C(S))+" "+I(B(V))+" l"),this},hc=f.curveTo=function(S,V,pe,we,Fe,et){return K([I(C(S)),I(B(V)),I(C(pe)),I(B(we)),I(C(Fe)),I(B(et)),"c"].join(" ")),this};f.__private__.line=f.line=function(S,V,pe,we,Fe){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(we)||!Io(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return N===w.COMPAT?this.lines([[pe-S,we-V]],S,V,[1,1],Fe||"S"):this.lines([[pe-S,we-V]],S,V,[1,1]).stroke()},f.__private__.lines=f.lines=function(S,V,pe,we,Fe,et){var dt,Rt,Gt,ys,ms,qs,$r,Vr,on,ta,_n,Yi;if(typeof S=="number"&&(Yi=pe,pe=V,V=S,S=Yi),we=we||[1,1],et=et||!1,isNaN(V)||isNaN(pe)||!Array.isArray(S)||!Array.isArray(we)||!Io(Fe)||typeof et!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(nm(V,pe),dt=we[0],Rt=we[1],ys=S.length,ta=V,_n=pe,Gt=0;Gt<ys;Gt++)(ms=S[Gt]).length===2?(ta=ms[0]*dt+ta,_n=ms[1]*Rt+_n,$d(ta,_n)):(qs=ms[0]*dt+ta,$r=ms[1]*Rt+_n,Vr=ms[2]*dt+ta,on=ms[3]*Rt+_n,ta=ms[4]*dt+ta,_n=ms[5]*Rt+_n,hc(qs,$r,Vr,on,ta,_n));return et&&Dx(),rm(Fe),this},f.path=function(S){for(var V=0;V<S.length;V++){var pe=S[V],we=pe.c;switch(pe.op){case"m":nm(we[0],we[1]);break;case"l":$d(we[0],we[1]);break;case"c":hc.apply(this,we);break;case"h":Dx()}}return this},f.__private__.rect=f.rect=function(S,V,pe,we,Fe){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(we)||!Io(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return N===w.COMPAT&&(we=-we),K([I(C(S)),I(B(V)),I(C(pe)),I(C(we)),"re"].join(" ")),rm(Fe),this},f.__private__.triangle=f.triangle=function(S,V,pe,we,Fe,et,dt){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(we)||isNaN(Fe)||isNaN(et)||!Io(dt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-S,we-V],[Fe-pe,et-we],[S-Fe,V-et]],S,V,[1,1],dt,!0),this},f.__private__.roundedRect=f.roundedRect=function(S,V,pe,we,Fe,et,dt){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(we)||isNaN(Fe)||isNaN(et)||!Io(dt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Rt=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*pe),et=Math.min(et,.5*we),this.lines([[pe-2*Fe,0],[Fe*Rt,0,Fe,et-et*Rt,Fe,et],[0,we-2*et],[0,et*Rt,-Fe*Rt,et,-Fe,et],[2*Fe-pe,0],[-Fe*Rt,0,-Fe,-et*Rt,-Fe,-et],[0,2*et-we],[0,-et*Rt,Fe*Rt,-et,Fe,-et]],S+Fe,V,[1,1],dt,!0),this},f.__private__.ellipse=f.ellipse=function(S,V,pe,we,Fe){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(we)||!Io(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var et=4/3*(Math.SQRT2-1)*pe,dt=4/3*(Math.SQRT2-1)*we;return nm(S+pe,V),hc(S+pe,V-dt,S+et,V-we,S,V-we),hc(S-et,V-we,S-pe,V-dt,S-pe,V),hc(S-pe,V+dt,S-et,V+we,S,V+we),hc(S+et,V+we,S+pe,V+dt,S+pe,V),rm(Fe),this},f.__private__.circle=f.circle=function(S,V,pe,we){if(isNaN(S)||isNaN(V)||isNaN(pe)||!Io(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,V,pe,pe,we)},f.setFont=function(S,V,pe){return pe&&(V=E(V,pe)),fe=qu(S,V,{disableWarning:!1}),this};var o1=f.__private__.getFont=f.getFont=function(){return lt[qu.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var S,V,pe={};for(S in ht)if(ht.hasOwnProperty(S))for(V in pe[S]=[],ht[S])ht[S].hasOwnProperty(V)&&pe[S].push(V);return pe},f.addFont=function(S,V,pe,we,Fe){var et=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&et.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&et.indexOf(arguments[3])==-1&&(pe=E(pe,we)),Fe=Fe||"Identity-H",qt.call(this,S,V,pe,Fe)};var Bd,am=e.lineWidth||.200025,Gu=f.__private__.getLineWidth=f.getLineWidth=function(){return am},Ox=f.__private__.setLineWidth=f.setLineWidth=function(S){return am=S,K(I(C(S))+" w"),this};f.__private__.setLineDash=rs.API.setLineDash=rs.API.setLineDashPattern=function(S,V){if(S=S||[],V=V||0,isNaN(V)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(pe){return I(C(pe))}).join(" "),V=I(C(V)),K("["+S+"] "+V+" d"),this};var Mx=f.__private__.getLineHeight=f.getLineHeight=function(){return se*Bd};f.__private__.getLineHeight=f.getLineHeight=function(){return se*Bd};var $x=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Bd=S),this},Bx=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Bd};$x(e.lineHeight);var Fo=f.__private__.getHorizontalCoordinate=function(S){return C(S)},bl=f.__private__.getVerticalCoordinate=function(S){return N===w.ADVANCED?S:Yt[z].mediaBox.topRightY-Yt[z].mediaBox.bottomLeftY-C(S)},l1=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(S){return I(Fo(S))},fc=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(S){return I(bl(S))},Ki=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Sn(Ki)},f.__private__.setStrokeColor=f.setDrawColor=function(S,V,pe,we){return Ki=Pe({ch1:S,ch2:V,ch3:pe,ch4:we,pdfColorType:"draw",precision:2}),K(Ki),this};var im=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Sn(im)},f.__private__.setFillColor=f.setFillColor=function(S,V,pe,we){return im=Pe({ch1:S,ch2:V,ch3:pe,ch4:we,pdfColorType:"fill",precision:2}),K(im),this};var zd=e.textColor||"0 g",c1=f.__private__.getTextColor=f.getTextColor=function(){return Sn(zd)};f.__private__.setTextColor=f.setTextColor=function(S,V,pe,we){return zd=Pe({ch1:S,ch2:V,ch3:pe,ch4:we,pdfColorType:"text",precision:3}),this};var Ku=e.charSpace,d1=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Ku||0)};f.__private__.setCharSpace=f.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ku=S,this};var om=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(S){var V=f.CapJoinStyles[S];if(V===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return om=V,K(V+" J"),this};var lm=0;f.__private__.setLineJoin=f.setLineJoin=function(S){var V=f.CapJoinStyles[S];if(V===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lm=V,K(V+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(I(C(S))+" M"),this},f.GState=uy,f.setGState=function(S){(S=typeof S=="string"?zt[Kt[S]]:zx(null,S)).equals(Ns)||(K("/"+S.id+" gs"),Ns=S)};var zx=function(S,V){if(!S||!Kt[S]){var pe=!1;for(var we in zt)if(zt.hasOwnProperty(we)&&zt[we].equals(V)){pe=!0;break}if(pe)V=zt[we];else{var Fe="GS"+(Object.keys(zt).length+1).toString(10);zt[Fe]=V,V.id=Fe}return S&&(Kt[S]=V.id),Rs.publish("addGState",V),V}};f.addGState=function(S,V){return zx(S,V),this},f.saveGraphicsState=function(){return K("q"),Nt.push({key:fe,size:se,color:zd}),this},f.restoreGraphicsState=function(){K("Q");var S=Nt.pop();return fe=S.key,se=S.size,zd=S.color,Ns=null,this},f.setCurrentTransformationMatrix=function(S){return K(S.toString()+" cm"),this},f.comment=function(S){return K("#"+S),this};var Yu=function(S,V){var pe=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(et){isNaN(et)||(pe=parseFloat(et))}});var we=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function(et){isNaN(et)||(we=parseFloat(et))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(et){Fe=et.toString()}}),this},cm=function(S,V,pe,we){Yu.call(this,S,V),this.type="rect";var Fe=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(dt){isNaN(dt)||(Fe=parseFloat(dt))}});var et=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return et},set:function(dt){isNaN(dt)||(et=parseFloat(dt))}}),this},dm=function(){this.page=Ts,this.currentPage=z,this.pages=_e.slice(0),this.pagesContext=Yt.slice(0),this.x=We,this.y=Ze,this.matrix=xt,this.width=Ud(z),this.height=mc(z),this.outputDestination=Ge,this.id="",this.objectNumber=-1};dm.prototype.restore=function(){Ts=this.page,z=this.currentPage,Yt=this.pagesContext,_e=this.pages,We=this.x,Ze=this.y,xt=this.matrix,um(z,this.width),hm(z,this.height),Ge=this.outputDestination};var Ux=function(S,V,pe,we,Fe){qe.push(new dm),Ts=z=0,_e=[],We=S,Ze=V,xt=Fe,Gi([pe,we])},u1=function(S){if(xn[S])qe.pop().restore();else{var V=new dm,pe="Xo"+(Object.keys(vr).length+1).toString(10);V.id=pe,xn[S]=pe,vr[pe]=V,Rs.publish("addFormObject",V),qe.pop().restore()}};for(var Ju in f.beginFormObject=function(S,V,pe,we,Fe){return Ux(S,V,pe,we,Fe),this},f.endFormObject=function(S){return u1(S),this},f.doFormObject=function(S,V){var pe=vr[xn[S]];return K("q"),K(V.toString()+" cm"),K("/"+pe.id+" Do"),K("Q"),this},f.getFormObject=function(S){var V=vr[xn[S]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},f.save=function(S,V){return S=S||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(Xd(Vu(yl()),S),typeof Xd.unload=="function"&&as.setTimeout&&setTimeout(Xd.unload,911),this):new Promise(function(pe,we){try{var Fe=Xd(Vu(yl()),S);typeof Xd.unload=="function"&&as.setTimeout&&setTimeout(Xd.unload,911),pe(Fe)}catch(et){we(et.message)}})},rs.API)rs.API.hasOwnProperty(Ju)&&(Ju==="events"&&rs.API.events.length?function(S,V){var pe,we,Fe;for(Fe=V.length-1;Fe!==-1;Fe--)pe=V[Fe][0],we=V[Fe][1],S.subscribe.apply(S,[pe].concat(typeof we=="function"?[we]:we))}(Rs,rs.API.events):f[Ju]=rs.API[Ju]);var Ud=f.getPageWidth=function(S){return(Yt[S=S||z].mediaBox.topRightX-Yt[S].mediaBox.bottomLeftX)/ke},um=f.setPageWidth=function(S,V){Yt[S].mediaBox.topRightX=V*ke+Yt[S].mediaBox.bottomLeftX},mc=f.getPageHeight=function(S){return(Yt[S=S||z].mediaBox.topRightY-Yt[S].mediaBox.bottomLeftY)/ke},hm=f.setPageHeight=function(S,V){Yt[S].mediaBox.topRightY=V*ke+Yt[S].mediaBox.bottomLeftY};return f.internal={pdfEscape:yr,getStyle:Fx,getFont:o1,getFontSize:ne,getCharSpace:d1,getTextColor:c1,getLineHeight:Mx,getLineHeightFactor:Bx,getLineWidth:Gu,write:He,getHorizontalCoordinate:Fo,getVerticalCoordinate:bl,getCoordinateString:l1,getVerticalCoordinateString:fc,collections:{},newObject:ks,newAdditionalObject:Ms,newObjectDeferred:us,newObjectDeferredBegin:hs,getFilters:ot,putStream:kt,events:Rs,scaleFactor:ke,pageSize:{getWidth:function(){return Ud(z)},setWidth:function(S){um(z,S)},getHeight:function(){return mc(z)},setHeight:function(S){hm(z,S)}},encryptionOptions:u,encryption:ea,getEncryptor:t1,output:Hu,getNumberOfPages:tm,pages:_e,out:K,f2:X,f3:D,getPageInfo:Ix,getPageInfoByObjId:cs,getCurrentPageInfo:s1,getPDFVersion:x,Point:Yu,Rectangle:cm,Matrix:Te,hasHotfix:Rx},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Ud(z)},set:function(S){um(z,S)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return mc(z)},set:function(S){hm(z,S)},enumerable:!0,configurable:!0}),os.call(f,ge),fe="F1",$n(a,r),Rs.publish("initialized"),f}Sh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Sh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Sh.prototype.processOwnerPassword=function(e,t){return cN(lN(t).substr(0,5),e)},Sh.prototype.encryptor=function(e,t){var r=lN(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return cN(r,n)}},uy.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||sr(e)!==sr(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},rs.API={events:[]},rs.version="3.0.1";var Gr=rs.API,VS=1,Uu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ps=function(e){return e.toFixed(2)},Ec=function(e){return e.toFixed(5)};Gr.__acroform__={};var ni=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},K3=function(e){return e*VS},Bo=function(e){var t=new S7,r=Mt.internal.getHeight(e)||0,n=Mt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ps(n)),Number(ps(r))],t},JQ=Gr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},ZQ=Gr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},XQ=Gr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},tn=Gr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return XQ(e,t-1)},sn=Gr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return JQ(e,t-1)},rn=Gr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ZQ(e,t-1)},QQ=Gr.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(i)||0,[Number(ps(c.lowerLeft_X)),Number(ps(c.lowerLeft_Y)),Number(ps(c.upperRight_X)),Number(ps(c.upperRight_Y))]},eee=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=dN(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+ps(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Bo(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},dN=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var i=r,o=Mt.internal.getHeight(e)||0;o=o<0?-o:o;var l=Mt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(D,C,$){if(D+1<a.length){var B=C+" "+a[D+1][0];return Wg(B,e,$).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=Wg("3",e,i).height,p=e.multiline?o-i:(o-h)/2,f=p+=2,y=0,x=0,j=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Wg(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",w=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var k=!1;if(a[N].length!==1&&j!==a[N].length-1){if((h+2)*(w+2)+2>o)continue e;v+=a[N][j],k=!0,x=N,N--}else{v=(v+=a[N][j]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var P=parseInt(N),E=c(P,v,i),I=N>=a.length-1;if(E&&!I){v+=" ",j=0;continue}if(E||I){if(I)x=P;else if(e.multiline&&(h+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(w+2)+2>o)continue e;x=P}}for(var T="",R=y;R<=x;R++){var X=a[R];if(e.multiline){if(R===x){T+=X[j]+" ",j=(j+1)%X.length;continue}if(R===y){T+=X[X.length-1]+" ";continue}}T+=X[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,u=Wg(T,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=ps(d)+" "+ps(f)+` Td
`,t+="("+Uu(T)+`) Tj
`,t+=-ps(d)+` 0 Td
`,f=-(i+2),u=0,y=k?x:x+1,w++,v=""}break}return n.text=t,n.fontSize=i,n},Wg=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},tee={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},see=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},ree=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),sr(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},nee=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Lo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(tee)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");VS=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new _7,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&see(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=QQ(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Mt.createDefaultAppearanceStream(l),sr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=eee(l);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var f=l.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var y=f[o];typeof y=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=f)=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&ree(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},N7=Gr.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),sr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Uu(n(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},a2=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Uu(n(e))+")"},Xo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xo.prototype.toString=function(){return this.objId+" 0 R"},Xo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Xo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:N7(a,this.objId,this.scope)}):a instanceof Xo?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var S7=function(){Xo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ni(S7,Xo);var _7=function(){Xo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Uu(r(e))+")"}},set:function(r){e=r}})};ni(_7,Xo);var Lo=function e(){Xo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!tn(t,3)},set:function(v){v?this.F=sn(t,3):this.F=rn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof hy)return;i="FieldObject"+e.FieldNum++}var v=function(w){return w};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Uu(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/VS:d},set:function(v){d=v}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof hy||this instanceof bu))return a2(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=v}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Pn?p:a2(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=this instanceof Pn?v:v.substr(0,1)==="("?vh(v.substr(1,v.length-2)):vh(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pn?vh(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof Pn?"/"+v:v}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Pn?f:a2(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=this instanceof Pn?v:v.substr(0,1)==="("?vh(v.substr(1,v.length-2)):vh(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pn?vh(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof Pn?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(v){v=!!v,x=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(v){y=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,1)},set:function(v){v?this.Ff=sn(this.Ff,1):this.Ff=rn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,2)},set:function(v){v?this.Ff=sn(this.Ff,2):this.Ff=rn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,3)},set:function(v){v?this.Ff=sn(this.Ff,3):this.Ff=rn(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');j=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(j){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};ni(Lo,Xo);var af=function(){Lo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return N7(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,18)},set:function(r){r?this.Ff=sn(this.Ff,18):this.Ff=rn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=sn(this.Ff,19):this.Ff=rn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,20)},set:function(r){r?(this.Ff=sn(this.Ff,20),t.sort()):this.Ff=rn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,22)},set:function(r){r?this.Ff=sn(this.Ff,22):this.Ff=rn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,23)},set:function(r){r?this.Ff=sn(this.Ff,23):this.Ff=rn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,27)},set:function(r){r?this.Ff=sn(this.Ff,27):this.Ff=rn(this.Ff,27)}}),this.hasAppearanceStream=!1};ni(af,Lo);var of=function(){af.call(this),this.fontName="helvetica",this.combo=!1};ni(of,af);var lf=function(){of.call(this),this.combo=!0};ni(lf,of);var r0=function(){lf.call(this),this.edit=!0};ni(r0,lf);var Pn=function(){Lo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,15)},set:function(r){r?this.Ff=sn(this.Ff,15):this.Ff=rn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,16)},set:function(r){r?this.Ff=sn(this.Ff,16):this.Ff=rn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,17)},set:function(r){r?this.Ff=sn(this.Ff,17):this.Ff=rn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,26)},set:function(r){r?this.Ff=sn(this.Ff,26):this.Ff=rn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Uu(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){sr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ni(Pn,Lo);var n0=function(){Pn.call(this),this.pushButton=!0};ni(n0,Pn);var cf=function(){Pn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ni(cf,Pn);var hy=function(){var e,t;Lo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Uu(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){sr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Mt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ni(hy,Lo),cf.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},cf.prototype.createOption=function(e){var t=new hy;return t.Parent=this,t.optionName=e,this.Kids.push(t),aee.call(this.scope,t),t};var a0=function(){Pn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Mt.CheckBox.createAppearanceStream()};ni(a0,Pn);var bu=function(){Lo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,13)},set:function(t){t?this.Ff=sn(this.Ff,13):this.Ff=rn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,21)},set:function(t){t?this.Ff=sn(this.Ff,21):this.Ff=rn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,23)},set:function(t){t?this.Ff=sn(this.Ff,23):this.Ff=rn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,24)},set:function(t){t?this.Ff=sn(this.Ff,24):this.Ff=rn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,25)},set:function(t){t?this.Ff=sn(this.Ff,25):this.Ff=rn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,26)},set:function(t){t?this.Ff=sn(this.Ff,26):this.Ff=rn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ni(bu,Lo);var i0=function(){bu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!tn(this.Ff,14)},set:function(e){e?this.Ff=sn(this.Ff,14):this.Ff=rn(this.Ff,14)}}),this.password=!0};ni(i0,bu);var Mt={CheckBox:{createAppearanceStream:function(){return{N:{On:Mt.CheckBox.YesNormal},D:{On:Mt.CheckBox.YesPushDown,Off:Mt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Bo(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=dN(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+ps(Mt.internal.getWidth(e))+" "+ps(Mt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+ps(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Bo(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Mt.internal.getHeight(e),o=Mt.internal.getWidth(e),l=dN(e,e.caption);return a.push("1 g"),a.push("0 0 "+ps(o)+" "+ps(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+ps(o-1)+" "+ps(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+ps(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Bo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ps(Mt.internal.getWidth(e))+" "+ps(Mt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Mt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Mt.RadioButton.Circle.YesNormal,t.D[e]=Mt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Bo(e);t.scope=e.scope;var r=[],n=Mt.internal.getWidth(e)<=Mt.internal.getHeight(e)?Mt.internal.getWidth(e)/4:Mt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Mt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ec(Mt.internal.getWidth(e)/2)+" "+Ec(Mt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Bo(e);t.scope=e.scope;var r=[],n=Mt.internal.getWidth(e)<=Mt.internal.getHeight(e)?Mt.internal.getWidth(e)/4:Mt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Mt.internal.Bezier_C).toFixed(5)),o=Number((n*Mt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ec(Mt.internal.getWidth(e)/2)+" "+Ec(Mt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ec(Mt.internal.getWidth(e)/2)+" "+Ec(Mt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Bo(e);t.scope=e.scope;var r=[],n=Mt.internal.getWidth(e)<=Mt.internal.getHeight(e)?Mt.internal.getWidth(e)/4:Mt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Mt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ec(Mt.internal.getWidth(e)/2)+" "+Ec(Mt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Mt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Mt.RadioButton.Cross.YesNormal,t.D[e]=Mt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Bo(e);t.scope=e.scope;var r=[],n=Mt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+ps(Mt.internal.getWidth(e)-2)+" "+ps(Mt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ps(n.x1.x)+" "+ps(n.x1.y)+" m"),r.push(ps(n.x2.x)+" "+ps(n.x2.y)+" l"),r.push(ps(n.x4.x)+" "+ps(n.x4.y)+" m"),r.push(ps(n.x3.x)+" "+ps(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Bo(e);t.scope=e.scope;var r=Mt.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+ps(Mt.internal.getWidth(e))+" "+ps(Mt.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ps(Mt.internal.getWidth(e)-2)+" "+ps(Mt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ps(r.x1.x)+" "+ps(r.x1.y)+" m"),n.push(ps(r.x2.x)+" "+ps(r.x2.y)+" l"),n.push(ps(r.x4.x)+" "+ps(r.x4.y)+" m"),n.push(ps(r.x3.x)+" "+ps(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Bo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ps(Mt.internal.getWidth(e))+" "+ps(Mt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Mt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Mt.internal.getWidth(e),r=Mt.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Mt.internal.getWidth=function(e){var t=0;return sr(e)==="object"&&(t=K3(e.Rect[2])),t},Mt.internal.getHeight=function(e){var t=0;return sr(e)==="object"&&(t=K3(e.Rect[3])),t};var aee=Gr.addField=function(e){if(nee(this,e),!(e instanceof Lo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Gr.AcroFormChoiceField=af,Gr.AcroFormListBox=of,Gr.AcroFormComboBox=lf,Gr.AcroFormEditBox=r0,Gr.AcroFormButton=Pn,Gr.AcroFormPushButton=n0,Gr.AcroFormRadioButton=cf,Gr.AcroFormCheckBox=a0,Gr.AcroFormTextField=bu,Gr.AcroFormPasswordField=i0,Gr.AcroFormAppearance=Mt,Gr.AcroForm={ChoiceField:af,ListBox:of,ComboBox:lf,EditBox:r0,Button:Pn,PushButton:n0,RadioButton:cf,CheckBox:a0,TextField:bu,PasswordField:i0,Appearance:Mt},rs.AcroForm={ChoiceField:af,ListBox:of,ComboBox:lf,EditBox:r0,Button:Pn,PushButton:n0,RadioButton:cf,CheckBox:a0,TextField:bu,PasswordField:i0,Appearance:Mt};rs.AcroForm;function C7(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(D,C){var $,B,Q,oe,ae,U=t;if((C=C||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(E(D))for(ae in r)for(Q=r[ae],$=0;$<Q.length;$+=1){for(oe=!0,B=0;B<Q[$].length;B+=1)if(Q[$][B]!==void 0&&Q[$][B]!==D[B]){oe=!1;break}if(oe===!0){U=ae;break}}else for(ae in r)for(Q=r[ae],$=0;$<Q.length;$+=1){for(oe=!0,B=0;B<Q[$].length;B+=1)if(Q[$][B]!==void 0&&Q[$][B]!==D.charCodeAt(B)){oe=!1;break}if(oe===!0){U=ae;break}}return U===t&&C!==t&&(U=C),U},a=function D(C){for(var $=this.internal.write,B=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var oe=[];if(oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Image"}),oe.push({key:"Width",value:C.width}),oe.push({key:"Height",value:C.height}),C.colorSpace===j.INDEXED?oe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(oe.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===j.DEVICE_CMYK&&oe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),oe.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&oe.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)){for(var ae="",U=0,Z=C.transparency.length;U<Z;U++)ae+=C.transparency[U]+" "+C.transparency[U]+" ";oe.push({key:"Mask",value:"["+ae+"]"})}C.sMask!==void 0&&oe.push({key:"SMask",value:C.objectId+1+" 0 R"});var W=C.filter!==void 0?["/"+C.filter]:void 0;if(B({data:C.data,additionalKeyValues:oe,alreadyAppliedFilters:W,objectId:C.objectId}),$("endobj"),"sMask"in C&&C.sMask!==void 0){var ve="/Predictor "+C.predictor+" /Colors 1 /BitsPerComponent "+C.bitsPerComponent+" /Columns "+C.width,A={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:C.bitsPerComponent,decodeParameters:ve,data:C.sMask};"filter"in C&&(A.filter=C.filter),D.call(this,A)}if(C.colorSpace===j.INDEXED){var z=this.internal.newObject();B({data:T(new Uint8Array(C.palette)),objectId:z}),$("endobj")}},i=function(){var D=this.internal.collections.addImage_images;for(var C in D)a.call(this,D[C])},o=function(){var D,C=this.internal.collections.addImage_images,$=this.internal.write;for(var B in C)$("/I"+(D=C[B]).index,D.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var D=this.internal.collections.addImage_images;return l.call(this),D},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(D){return typeof e["process"+D.toUpperCase()]=="function"},h=function(D){return sr(D)==="object"&&D.nodeType===1},p=function(D,C){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var $=""+D.getAttribute("src");if($.indexOf("data:image/")===0)return Cp(unescape($).split("base64,").pop());var B=e.loadFile($,!0);if(B!==void 0)return B}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var Q;switch(C){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;case"JPEG":case"JPG":default:Q="image/jpeg"}return Cp(D.toDataURL(Q,1).split("base64,").pop())}},f=function(D){var C=this.internal.collections.addImage_images;if(C){for(var $ in C)if(D===C[$].alias)return C[$]}},y=function(D,C,$){return D||C||(D=-96,C=-96),D<0&&(D=-1*$.width*72/D/this.internal.scaleFactor),C<0&&(C=-1*$.height*72/C/this.internal.scaleFactor),D===0&&(D=C*$.width/$.height),C===0&&(C=D*$.height/$.width),[D,C]},x=function(D,C,$,B,Q,oe){var ae=y.call(this,$,B,Q),U=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,W=c.call(this);if($=ae[0],B=ae[1],W[Q.index]=Q,oe){oe*=Math.PI/180;var ve=Math.cos(oe),A=Math.sin(oe),z=function(re){return re.toFixed(4)},M=[z(ve),z(A),z(-1*A),z(ve),0,0,"cm"]}this.internal.write("q"),oe?(this.internal.write([1,"0","0",1,U(D),Z(C+B),"cm"].join(" ")),this.internal.write(M.join(" ")),this.internal.write([U($),"0","0",U(B),"0","0","cm"].join(" "))):this.internal.write([U($),"0","0",U(B),U(D),Z(C+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(D){var C,$,B=0;if(typeof D=="string")for($=D.length,C=0;C<$;C++)B=(B<<5)-B+D.charCodeAt(C),B|=0;else if(E(D))for($=D.byteLength/2,C=0;C<$;C++)B=(B<<5)-B+D[C],B|=0;return B},N=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var C=!0;return D.length===0&&(C=!1),D.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(C=!1),C},k=e.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var C=D.indexOf(",");return C<0?null:D.substring(0,C).trim().endsWith("base64")?D.substring(C+1):null},P=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return P()&&D instanceof ArrayBuffer};var E=e.__addimage__.isArrayBufferView=function(D){return P()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},I=e.__addimage__.binaryStringToUint8Array=function(D){for(var C=D.length,$=new Uint8Array(C),B=0;B<C;B++)$[B]=D.charCodeAt(B);return $},T=e.__addimage__.arrayBufferToBinaryString=function(D){for(var C="",$=E(D)?D:new Uint8Array(D),B=0;B<$.length;B+=8192)C+=String.fromCharCode.apply(null,$.subarray(B,B+8192));return C};e.addImage=function(){var D,C,$,B,Q,oe,ae,U,Z;if(typeof arguments[1]=="number"?(C=t,$=arguments[1],B=arguments[2],Q=arguments[3],oe=arguments[4],ae=arguments[5],U=arguments[6],Z=arguments[7]):(C=arguments[1],$=arguments[2],B=arguments[3],Q=arguments[4],oe=arguments[5],ae=arguments[6],U=arguments[7],Z=arguments[8]),sr(D=arguments[0])==="object"&&!h(D)&&"imageData"in D){var W=D;D=W.imageData,C=W.format||C||t,$=W.x||$||0,B=W.y||B||0,Q=W.w||W.width||Q,oe=W.h||W.height||oe,ae=W.alias||ae,U=W.compression||U,Z=W.rotation||W.angle||Z}var ve=this.internal.getFilters();if(U===void 0&&ve.indexOf("FlateEncode")!==-1&&(U="SLOW"),isNaN($)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var A=R.call(this,D,C,ae,U);return x.call(this,$,B,Q,oe,A,Z),this};var R=function(D,C,$,B){var Q,oe,ae;if(typeof D=="string"&&n(D)===t){D=unescape(D);var U=X(D,!1);(U!==""||(U=e.loadFile(D,!0))!==void 0)&&(D=U)}if(h(D)&&(D=p(D,C)),C=n(D,C),!u(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((ae=$)==null||ae.length===0)&&($=function(Z){return typeof Z=="string"||E(Z)?w(Z):E(Z.data)?w(Z.data):null}(D)),(Q=f.call(this,$))||(P()&&(D instanceof Uint8Array||C==="RGBA"||(oe=D,D=I(D))),Q=this["process"+C.toUpperCase()](D,d.call(this),$,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in e.image_compression?Z:v.NONE}(B),oe)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},X=e.__addimage__.convertBase64ToBinaryString=function(D,C){C=typeof C!="boolean"||C;var $,B="";if(typeof D=="string"){var Q;$=(Q=k(D))!==null&&Q!==void 0?Q:D;try{B=Cp($)}catch(oe){if(C)throw N($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+oe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};e.getImageProperties=function(D){var C,$,B="";if(h(D)&&(D=p(D)),typeof D=="string"&&n(D)===t&&((B=X(D,!1))===""&&(B=e.loadFile(D)||""),D=B),$=n(D),!u($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(!P()||D instanceof Uint8Array||(D=I(D)),!(C=this["process"+$.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=$,C}})(rs.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};rs.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((n=d[h]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){n=d[p];var f=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(x.objId),w=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(v(n.contents))+")",i+=" /Popup "+j.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+f(v(w))+") >>",x.content=i;var N=x.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",j.content=i,this.internal.write(x.objId,"0 R",j.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var P=this.annotations._nameMap[n.options.name];n.options.pageNumber=P.page,n.options.top=P.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var E=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+E+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+a),h:d(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,a,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,n,a,i),a+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-d,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(rs.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(x){var j=0,v=r,w="",N=0;for(j=0;j<x.length;j+=1)v[x.charCodeAt(j)]!==void 0?(N++,typeof(v=v[x.charCodeAt(j)])=="number"&&(w+=String.fromCharCode(v),v=r,N=0),j===x.length-1&&(v=r,w+=x.charAt(j-(N-1)),j-=N-1,N=0)):(v=r,w+=x.charAt(j-N),j-=N,N=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(x,j,v){return o(x)?i(x)===!1?-1:!d(x)||!o(j)&&!o(v)||!o(v)&&l(j)||l(x)&&!o(j)||l(x)&&c(j)||l(x)&&l(j)?0:u(x)&&o(j)&&!l(j)&&o(v)&&d(v)?3:l(x)||!o(v)?1:2:-1},f=function(x){var j=0,v=0,w=0,N="",k="",P="",E=(x=x||"").split("\\s+"),I=[];for(j=0;j<E.length;j+=1){for(I.push(""),v=0;v<E[j].length;v+=1)N=E[j][v],k=E[j][v-1],P=E[j][v+1],o(N)?(w=p(N,k,P),I[j]+=w!==-1?String.fromCharCode(t[N.charCodeAt(0)][w]):N):I[j]+=N;I[j]=h(I[j])}return I.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var x,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(j)){var w=0;for(v=[],w=0;w<j.length;w+=1)Array.isArray(j[w])?v.push([f(j[w][0]),j[w][1],j[w][2]]):v.push([f(j[w])]);x=v}else x=f(j);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",y])}(rs.API),rs.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(rs.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(x){y=x}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,f=0,y=0,x=0,j=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=d.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,k){return N.concat(j.splitTextToSize(k,v))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)f<(x=this.getStringUnitWidth(c[w],{font:h})*u)&&(f=x);return f!==0&&(y=c.length),{w:f/=p,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,f&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,p){if(n.call(this),!u)throw new Error("No data for PDF table.");var f,y,x,j,v=[],w=[],N=[],k={},P={},E=[],I=[],T=(p=p||{}).autoSize||!1,R=p.printHeaders!==!1,X=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,D=p.margins||Object.assign({width:this.getPageWidth()},t),C=typeof p.padding=="number"?p.padding:3,$=p.headerBackgroundColor||"#c8c8c8",B=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=X,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=B,this.setFontSize(X),h==null)w=v=Object.keys(u[0]),N=v.map(function(){return"left"});else if(Array.isArray(h)&&sr(h[0])==="object")for(v=h.map(function(W){return W.name}),w=h.map(function(W){return W.prompt||W.name||""}),N=h.map(function(W){return W.align||"left"}),f=0;f<h.length;f+=1)P[h[f].name]=h[f].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(w=v=h,N=v.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<v.length;f+=1){for(k[j=v[f]]=u.map(function(W){return W[j]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(w[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=k[j],this.setFont(void 0,"normal"),x=0;x<y.length;x+=1)E.push(this.getTextDimensions(y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[j]=Math.max.apply(null,E)+C+C,E=[]}if(R){var Q={};for(f=0;f<v.length;f+=1)Q[v[f]]={},Q[v[f]].text=w[f],Q[v[f]].align=N[f];var oe=l.call(this,Q,P);I=v.map(function(W){return new i(c,d,P[W],oe,Q[W].text,void 0,Q[W].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var ae=h.reduce(function(W,ve){return W[ve.name]=ve.align,W},{});for(f=0;f<u.length;f+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:f,data:u[f]},this);var U=l.call(this,u[f],P);for(x=0;x<v.length;x+=1){var Z=u[f][v[x]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:f,col:x,data:Z},this),o.call(this,new i(c,d,P[v[x]],U,Z,f+2,ae[v[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(f){var y=c[f];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/p+u+u},this).reduce(function(f,y){return Math.max(f,y)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(rs.API);var k7={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},A7=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],uN=C7(A7),P7=[100,200,300,400,500,600,700,800,900],iee=C7(P7);function hN(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return k7[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof uN[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function Y3(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var oee={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},J3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Z3(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function lee(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},oee,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(a[(i=hN(t[l])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+Z3(i)+"' and default family '"+n+"'.");if(o=function(c,d){if(d[c])return d[c];var u=uN[c],h=u<=uN.normal?-1:1,p=Y3(d,A7,u,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+c);return p}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=k7[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=iee[c],h=Y3(d,P7,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Z3(i)+"'.");return o}function X3(e){return e.trimLeft()}function cee(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function dee(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Gg,Q3,ek,i2=["times"];(function(e){var t,r,n,a,i,o,l,c,d,u=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new c,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new o,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new o,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=A;Object.defineProperty(this,"pdf",{get:function(){return z}});var M=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return M},set:function(Le){M=!!Le}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Le){re=!!Le}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(Le){isNaN(Le)||(te=Le)}});var O=0;Object.defineProperty(this,"posY",{get:function(){return O},set:function(Le){isNaN(Le)||(O=Le)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Le){var K;typeof Le=="number"?K=[Le,Le,Le,Le]:((K=new Array(4))[0]=Le[0],K[1]=Le.length>=2?Le[1]:K[0],K[2]=Le.length>=3?Le[2]:K[0],K[3]=Le.length>=4?Le[3]:K[1]),d.margin=K}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(Le){ce=Le}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(Le){le=Le}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(Le){Ee=Le}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Le){Le instanceof u&&(d=Le)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Le){d.path=Le}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(Le){_e=Le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Le){var K;K=p(Le),this.ctx.fillStyle=K.style,this.ctx.isFillTransparent=K.a===0,this.ctx.fillOpacity=K.a,this.pdf.setFillColor(K.r,K.g,K.b,{a:K.a}),this.pdf.setTextColor(K.r,K.g,K.b,{a:K.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Le){var K=p(Le);this.ctx.strokeStyle=K.style,this.ctx.isStrokeTransparent=K.a===0,this.ctx.strokeOpacity=K.a,K.a===0?this.pdf.setDrawColor(255,255,255):(K.a,this.pdf.setDrawColor(K.r,K.g,K.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Le){["butt","round","square"].indexOf(Le)!==-1&&(this.ctx.lineCap=Le,this.pdf.setLineCap(Le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Le){isNaN(Le)||(this.ctx.lineWidth=Le,this.pdf.setLineWidth(Le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Le){["bevel","round","miter"].indexOf(Le)!==-1&&(this.ctx.lineJoin=Le,this.pdf.setLineJoin(Le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Le){isNaN(Le)||(this.ctx.miterLimit=Le,this.pdf.setMiterLimit(Le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Le){this.ctx.textBaseline=Le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Le){["right","end","center","left","start"].indexOf(Le)!==-1&&(this.ctx.textAlign=Le)}});var Be=null;function Ge(Le,K){if(Be===null){var He=function(xe){var ge=[];return Object.keys(xe).forEach(function(se){xe[se].forEach(function(F){var ne=null;switch(F){case"bold":ne={family:se,weight:"bold"};break;case"italic":ne={family:se,style:"italic"};break;case"bolditalic":ne={family:se,weight:"bold",style:"italic"};break;case"":case"normal":ne={family:se}}ne!==null&&(ne.ref={name:se,style:F},ge.push(ne))})}),ge}(Le.getFontList());Be=function(xe){for(var ge={},se=0;se<xe.length;++se){var F=hN(xe[se]),ne=F.family,ye=F.stretch,je=F.style,Y=F.weight;ge[ne]=ge[ne]||{},ge[ne][ye]=ge[ne][ye]||{},ge[ne][ye][je]=ge[ne][ye][je]||{},ge[ne][ye][je][Y]=F}return ge}(He.concat(K))}return Be}var ut=null;Object.defineProperty(this,"fontFaces",{get:function(){return ut},set:function(Le){Be=null,ut=Le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Le){var K;if(this.ctx.font=Le,(K=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Le))!==null){var He=K[1];K[2];var xe=K[3],ge=K[4];K[5];var se=K[6],F=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ge)[2];ge=Math.floor(F==="px"?parseFloat(ge)*this.pdf.internal.scaleFactor:F==="em"?parseFloat(ge)*this.pdf.getFontSize():parseFloat(ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ge);var ne=function(be){var fe,ke,We=[],Ze=be.trim();if(Ze==="")return i2;if(Ze in J3)return[J3[Ze]];for(;Ze!=="";){switch(ke=null,fe=(Ze=X3(Ze)).charAt(0)){case'"':case"'":ke=cee(Ze.substring(1),fe);break;default:ke=dee(Ze)}if(ke===null||(We.push(ke[0]),(Ze=X3(ke[1]))!==""&&Ze.charAt(0)!==","))return i2;Ze=Ze.replace(/^,/,"")}return We}(se);if(this.fontFaces){var ye=lee(Ge(this.pdf,this.fontFaces),ne.map(function(be){return{family:be,stretch:"normal",weight:xe,style:He}}));this.pdf.setFont(ye.ref.name,ye.ref.style)}else{var je="";(xe==="bold"||parseInt(xe,10)>=700||He==="bold")&&(je="bold"),He==="italic"&&(je+="italic"),je.length===0&&(je="normal");for(var Y="",Re={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qe=0;Qe<ne.length;Qe++){if(this.pdf.internal.getFont(ne[Qe],je,{noFallback:!0,disableWarning:!0})!==void 0){Y=ne[Qe];break}if(je==="bolditalic"&&this.pdf.internal.getFont(ne[Qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Y=ne[Qe],je="bold";else if(this.pdf.internal.getFont(ne[Qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Y=ne[Qe],je="normal";break}}if(Y===""){for(var me=0;me<ne.length;me++)if(Re[ne[me]]){Y=Re[ne[me]];break}}Y=Y===""?"Times":Y,this.pdf.setFont(Y,je)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Le){this.ctx.globalCompositeOperation=Le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Le){this.ctx.globalAlpha=Le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Le){this.ctx.lineDashOffset=Le,ve.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Le){this.ctx.lineDash=Le,ve.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Le){this.ctx.ignoreClearRect=!!Le}})};h.prototype.setLineDash=function(A){this.lineDash=A},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(A,z){if(isNaN(A)||isNaN(z))throw jr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var M=this.ctx.transform.applyToPoint(new o(A,z));this.path.push({type:"mt",x:M.x,y:M.y}),this.ctx.lastPoint=new o(A,z)},h.prototype.closePath=function(){var A=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&sr(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){A=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(A.x,A.y)},h.prototype.lineTo=function(A,z){if(isNaN(A)||isNaN(z))throw jr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var M=this.ctx.transform.applyToPoint(new o(A,z));this.path.push({type:"lt",x:M.x,y:M.y}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(A,z,M,re){if(isNaN(M)||isNaN(re)||isNaN(A)||isNaN(z))throw jr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(M,re)),O=this.ctx.transform.applyToPoint(new o(A,z));this.path.push({type:"qct",x1:O.x,y1:O.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},h.prototype.bezierCurveTo=function(A,z,M,re,te,O){if(isNaN(te)||isNaN(O)||isNaN(A)||isNaN(z)||isNaN(M)||isNaN(re))throw jr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new o(te,O)),le=this.ctx.transform.applyToPoint(new o(A,z)),Ee=this.ctx.transform.applyToPoint(new o(M,re));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:Ee.x,y2:Ee.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},h.prototype.arc=function(A,z,M,re,te,O){if(isNaN(A)||isNaN(z)||isNaN(M)||isNaN(re)||isNaN(te))throw jr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(O=!!O,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new o(A,z));A=ce.x,z=ce.y;var le=this.ctx.transform.applyToPoint(new o(0,M)),Ee=this.ctx.transform.applyToPoint(new o(0,0));M=Math.sqrt(Math.pow(le.x-Ee.x,2)+Math.pow(le.y-Ee.y,2))}Math.abs(te-re)>=2*Math.PI&&(re=0,te=2*Math.PI),this.path.push({type:"arc",x:A,y:z,radius:M,startAngle:re,endAngle:te,counterclockwise:O})},h.prototype.arcTo=function(A,z,M,re,te){throw new Error("arcTo not implemented.")},h.prototype.rect=function(A,z,M,re){if(isNaN(A)||isNaN(z)||isNaN(M)||isNaN(re))throw jr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,z),this.lineTo(A+M,z),this.lineTo(A+M,z+re),this.lineTo(A,z+re),this.lineTo(A,z),this.lineTo(A+M,z),this.lineTo(A,z)},h.prototype.fillRect=function(A,z,M,re){if(isNaN(A)||isNaN(z)||isNaN(M)||isNaN(re))throw jr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,z,M,re),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},h.prototype.strokeRect=function(A,z,M,re){if(isNaN(A)||isNaN(z)||isNaN(M)||isNaN(re))throw jr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(A,z,M,re),this.stroke())},h.prototype.clearRect=function(A,z,M,re){if(isNaN(A)||isNaN(z)||isNaN(M)||isNaN(re))throw jr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,z,M,re))},h.prototype.save=function(A){A=typeof A!="boolean"||A;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},h.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("Q");this.pdf.setPage(z),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(A){var z,M,re,te;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))z=0,M=0,re=0,te=0;else{var O=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(O!==null)z=parseInt(O[1]),M=parseInt(O[2]),re=parseInt(O[3]),te=1;else if((O=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)z=parseInt(O[1]),M=parseInt(O[2]),re=parseInt(O[3]),te=parseFloat(O[4]);else{if(te=1,typeof A=="string"&&A.charAt(0)!=="#"){var ce=new b7(A);A=ce.ok?ce.toHex():"#000000"}A.length===4?(z=A.substring(1,2),z+=z,M=A.substring(2,3),M+=M,re=A.substring(3,4),re+=re):(z=A.substring(1,3),M=A.substring(3,5),re=A.substring(5,7)),z=parseInt(z,16),M=parseInt(M,16),re=parseInt(re,16)}}return{r:z,g:M,b:re,a:te,style:A}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(A,z,M,re){if(isNaN(z)||isNaN(M)||typeof A!="string")throw jr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!f.call(this)){var te=U(this.ctx.transform.rotation),O=this.ctx.transform.scaleX;C.call(this,{text:A,x:z,y:M,scale:O,angle:te,align:this.textAlign,maxWidth:re})}},h.prototype.strokeText=function(A,z,M,re){if(isNaN(z)||isNaN(M)||typeof A!="string")throw jr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){re=isNaN(re)?void 0:re;var te=U(this.ctx.transform.rotation),O=this.ctx.transform.scaleX;C.call(this,{text:A,x:z,y:M,scale:O,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:re})}},h.prototype.measureText=function(A){if(typeof A!="string")throw jr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,M=this.pdf.internal.scaleFactor,re=z.internal.getFontSize(),te=z.getStringUnitWidth(A)*re/z.internal.scaleFactor,O=function(ce){var le=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return le}}),this};return new O({width:te*=Math.round(96*M/72*1e4)/1e4})},h.prototype.scale=function(A,z){if(isNaN(A)||isNaN(z))throw jr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var M=new c(A,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(M)},h.prototype.rotate=function(A){if(isNaN(A))throw jr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new c(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},h.prototype.translate=function(A,z){if(isNaN(A)||isNaN(z))throw jr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var M=new c(1,0,0,1,A,z);this.ctx.transform=this.ctx.transform.multiply(M)},h.prototype.transform=function(A,z,M,re,te,O){if(isNaN(A)||isNaN(z)||isNaN(M)||isNaN(re)||isNaN(te)||isNaN(O))throw jr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new c(A,z,M,re,te,O);this.ctx.transform=this.ctx.transform.multiply(ce)},h.prototype.setTransform=function(A,z,M,re,te,O){A=isNaN(A)?1:A,z=isNaN(z)?0:z,M=isNaN(M)?0:M,re=isNaN(re)?1:re,te=isNaN(te)?0:te,O=isNaN(O)?0:O,this.ctx.transform=new c(A,z,M,re,te,O)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(A,z,M,re,te,O,ce,le,Ee){var _e=this.pdf.getImageProperties(A),Be=1,Ge=1,ut=1,Le=1;re!==void 0&&le!==void 0&&(ut=le/re,Le=Ee/te,Be=_e.width/re*le/re,Ge=_e.height/te*Ee/te),O===void 0&&(O=z,ce=M,z=0,M=0),re!==void 0&&le===void 0&&(le=re,Ee=te),re===void 0&&le===void 0&&(le=_e.width,Ee=_e.height);for(var K,He=this.ctx.transform.decompose(),xe=U(He.rotate.shx),ge=new c,se=(ge=(ge=(ge=ge.multiply(He.translate)).multiply(He.skew)).multiply(He.scale)).applyToRectangle(new l(O-z*ut,ce-M*Le,re*Be,te*Ge)),F=j.call(this,se),ne=[],ye=0;ye<F.length;ye+=1)ne.indexOf(F[ye])===-1&&ne.push(F[ye]);if(N(ne),this.autoPaging)for(var je=ne[0],Y=ne[ne.length-1],Re=je;Re<Y+1;Re++){this.pdf.setPage(Re);var Qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],me=Re===1?this.posY+this.margin[0]:this.margin[0],be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ke=Re===1?0:be+(Re-2)*fe;if(this.ctx.clip_path.length!==0){var We=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(K,this.posX+this.margin[3],-ke+me+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=We}var Ze=JSON.parse(JSON.stringify(se));Ze=w([Ze],this.posX+this.margin[3],-ke+me+this.ctx.prevPageLastElemOffset)[0];var xt=(Re>je||Re<Y)&&x.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,fe,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,xe),xt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(A,"JPEG",se.x,se.y,se.w,se.h,null,null,xe)};var j=function(A,z,M){var re=[];z=z||this.pdf.internal.pageSize.width,M=M||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":re.push(Math.floor((A.y+te)/M)+1);break;case"arc":re.push(Math.floor((A.y+te-A.radius)/M)+1),re.push(Math.floor((A.y+te+A.radius)/M)+1);break;case"qct":var O=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);re.push(Math.floor((O.y+te)/M)+1),re.push(Math.floor((O.y+O.h+te)/M)+1);break;case"bct":var ce=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);re.push(Math.floor((ce.y+te)/M)+1),re.push(Math.floor((ce.y+ce.h+te)/M)+1);break;case"rect":re.push(Math.floor((A.y+te)/M)+1),re.push(Math.floor((A.y+A.h+te)/M)+1)}for(var le=0;le<re.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<re[le];)v.call(this);return re},v=function(){var A=this.fillStyle,z=this.strokeStyle,M=this.font,re=this.lineCap,te=this.lineWidth,O=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=z,this.font=M,this.lineCap=re,this.lineWidth=te,this.lineJoin=O},w=function(A,z,M){for(var re=0;re<A.length;re++)switch(A[re].type){case"bct":A[re].x2+=z,A[re].y2+=M;case"qct":A[re].x1+=z,A[re].y1+=M;case"mt":case"lt":case"arc":default:A[re].x+=z,A[re].y+=M}return A},N=function(A){return A.sort(function(z,M){return z-M})},k=function(A,z){for(var M,re,te=this.fillStyle,O=this.strokeStyle,ce=this.lineCap,le=this.lineWidth,Ee=Math.abs(le*this.ctx.transform.scaleX),_e=this.lineJoin,Be=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),ut=[],Le=0;Le<Ge.length;Le++)if(Ge[Le].x!==void 0)for(var K=j.call(this,Ge[Le]),He=0;He<K.length;He+=1)ut.indexOf(K[He])===-1&&ut.push(K[He]);for(var xe=0;xe<ut.length;xe++)for(;this.pdf.internal.getNumberOfPages()<ut[xe];)v.call(this);if(N(ut),this.autoPaging)for(var ge=ut[0],se=ut[ut.length-1],F=ge;F<se+1;F++){this.pdf.setPage(F),this.fillStyle=te,this.strokeStyle=O,this.lineCap=ce,this.lineWidth=Ee,this.lineJoin=_e;var ne=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ye=F===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Y=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Re=F===1?0:je+(F-2)*Y;if(this.ctx.clip_path.length!==0){var Qe=this.path;M=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(M,this.posX+this.margin[3],-Re+ye+this.ctx.prevPageLastElemOffset),P.call(this,A,!0),this.path=Qe}if(re=JSON.parse(JSON.stringify(Be)),this.path=w(re,this.posX+this.margin[3],-Re+ye+this.ctx.prevPageLastElemOffset),z===!1||F===0){var me=(F>ge||F<se)&&x.call(this);me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ne,Y,null).clip().discardPath()),P.call(this,A,z),me&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=Ee,P.call(this,A,z),this.lineWidth=le;this.path=Be},P=function(A,z){if((A!=="stroke"||z||!y.call(this))&&(A==="stroke"||z||!f.call(this))){for(var M,re,te=[],O=this.path,ce=0;ce<O.length;ce++){var le=O[ce];switch(le.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:le,deltas:[],abs:[]});break;case"lt":var Ee=te.length;if(O[ce-1]&&!isNaN(O[ce-1].x)&&(M=[le.x-O[ce-1].x,le.y-O[ce-1].y],Ee>0)){for(;Ee>=0;Ee--)if(te[Ee-1].close!==!0&&te[Ee-1].begin!==!0){te[Ee-1].deltas.push(M),te[Ee-1].abs.push(le);break}}break;case"bct":M=[le.x1-O[ce-1].x,le.y1-O[ce-1].y,le.x2-O[ce-1].x,le.y2-O[ce-1].y,le.x-O[ce-1].x,le.y-O[ce-1].y],te[te.length-1].deltas.push(M);break;case"qct":var _e=O[ce-1].x+2/3*(le.x1-O[ce-1].x),Be=O[ce-1].y+2/3*(le.y1-O[ce-1].y),Ge=le.x+2/3*(le.x1-le.x),ut=le.y+2/3*(le.y1-le.y),Le=le.x,K=le.y;M=[_e-O[ce-1].x,Be-O[ce-1].y,Ge-O[ce-1].x,ut-O[ce-1].y,Le-O[ce-1].x,K-O[ce-1].y],te[te.length-1].deltas.push(M);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(le)}}re=z?null:A==="stroke"?"stroke":"fill";for(var He=!1,xe=0;xe<te.length;xe++)if(te[xe].arc)for(var ge=te[xe].abs,se=0;se<ge.length;se++){var F=ge[se];F.type==="arc"?T.call(this,F.x,F.y,F.radius,F.startAngle,F.endAngle,F.counterclockwise,void 0,z,!He):$.call(this,F.x,F.y),He=!0}else if(te[xe].close===!0)this.pdf.internal.out("h"),He=!1;else if(te[xe].begin!==!0){var ne=te[xe].start.x,ye=te[xe].start.y;B.call(this,te[xe].deltas,ne,ye),He=!0}re&&R.call(this,re),z&&X.call(this)}},E=function(A){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,M=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-M;case"top":return A+z-M;case"hanging":return A+z-2*M;case"middle":return A+z/2-M;case"ideographic":return A;case"alphabetic":default:return A}},I=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(z,M){this.colorStops.push([z,M])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(A,z,M,re,te,O,ce,le,Ee){for(var _e=oe.call(this,M,re,te,O),Be=0;Be<_e.length;Be++){var Ge=_e[Be];Be===0&&(Ee?D.call(this,Ge.x1+A,Ge.y1+z):$.call(this,Ge.x1+A,Ge.y1+z)),Q.call(this,A,z,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}le?X.call(this):R.call(this,ce)},R=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},X=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(A,z){this.pdf.internal.out(r(A)+" "+n(z)+" m")},C=function(A){var z;switch(A.align){case"right":case"end":z="right";break;case"center":z="center";break;case"left":case"start":default:z="left"}var M=this.pdf.getTextDimensions(A.text),re=E.call(this,A.y),te=I.call(this,re)-M.h,O=this.ctx.transform.applyToPoint(new o(A.x,re)),ce=this.ctx.transform.decompose(),le=new c;le=(le=(le=le.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var Ee,_e,Be,Ge=this.ctx.transform.applyToRectangle(new l(A.x,re,M.w,M.h)),ut=le.applyToRectangle(new l(A.x,te,M.w,M.h)),Le=j.call(this,ut),K=[],He=0;He<Le.length;He+=1)K.indexOf(Le[He])===-1&&K.push(Le[He]);if(N(K),this.autoPaging)for(var xe=K[0],ge=K[K.length-1],se=xe;se<ge+1;se++){this.pdf.setPage(se);var F=se===1?this.posY+this.margin[0]:this.margin[0],ne=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ye=this.pdf.internal.pageSize.height-this.margin[2],je=ye-this.margin[0],Y=this.pdf.internal.pageSize.width-this.margin[1],Re=Y-this.margin[3],Qe=se===1?0:ne+(se-2)*je;if(this.ctx.clip_path.length!==0){var me=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Ee,this.posX+this.margin[3],-1*Qe+F),P.call(this,"fill",!0),this.path=me}var be=w([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-Qe+F+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*A.scale),Be=this.lineWidth,this.lineWidth=Be*A.scale);var fe=this.autoPaging!=="text";if(fe||be.y+be.h<=ye){if(fe||be.y>=F&&be.x<=Y){var ke=fe?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||Y-be.x)[0],We=w([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-Qe+F+this.ctx.prevPageLastElemOffset)[0],Ze=fe&&(se>xe||se<ge)&&x.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,je,null).clip().discardPath()),this.pdf.text(ke,We.x,We.y,{angle:A.angle,align:z,renderingMode:A.renderingMode}),Ze&&this.pdf.restoreGraphicsState()}}else be.y<ye&&(this.ctx.prevPageLastElemOffset+=ye-be.y);A.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Be)}else A.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*A.scale),Be=this.lineWidth,this.lineWidth=Be*A.scale),this.pdf.text(A.text,O.x+this.posX,O.y+this.posY,{angle:A.angle,align:z,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Be)},$=function(A,z,M,re){M=M||0,re=re||0,this.pdf.internal.out(r(A+M)+" "+n(z+re)+" l")},B=function(A,z,M){return this.pdf.lines(A,z,M,null,null)},Q=function(A,z,M,re,te,O,ce,le){this.pdf.internal.out([t(a(M+A)),t(i(re+z)),t(a(te+A)),t(i(O+z)),t(a(ce+A)),t(i(le+z)),"c"].join(" "))},oe=function(A,z,M,re){for(var te=2*Math.PI,O=Math.PI/2;z>M;)z-=te;var ce=Math.abs(M-z);ce<te&&re&&(ce=te-ce);for(var le=[],Ee=re?-1:1,_e=z;ce>1e-5;){var Be=_e+Ee*Math.min(ce,O);le.push(ae.call(this,A,_e,Be)),ce-=Math.abs(Be-_e),_e=Be}return le},ae=function(A,z,M){var re=(M-z)/2,te=A*Math.cos(re),O=A*Math.sin(re),ce=te,le=-O,Ee=ce*ce+le*le,_e=Ee+ce*te+le*O,Be=4/3*(Math.sqrt(2*Ee*_e)-_e)/(ce*O-le*te),Ge=ce-Be*le,ut=le+Be*ce,Le=Ge,K=-ut,He=re+z,xe=Math.cos(He),ge=Math.sin(He);return{x1:A*Math.cos(z),y1:A*Math.sin(z),x2:Ge*xe-ut*ge,y2:Ge*ge+ut*xe,x3:Le*xe-K*ge,y3:Le*ge+K*xe,x4:A*Math.cos(M),y4:A*Math.sin(M)}},U=function(A){return 180*A/Math.PI},Z=function(A,z,M,re,te,O){var ce=A+.5*(M-A),le=z+.5*(re-z),Ee=te+.5*(M-te),_e=O+.5*(re-O),Be=Math.min(A,te,ce,Ee),Ge=Math.max(A,te,ce,Ee),ut=Math.min(z,O,le,_e),Le=Math.max(z,O,le,_e);return new l(Be,ut,Ge-Be,Le-ut)},W=function(A,z,M,re,te,O,ce,le){var Ee,_e,Be,Ge,ut,Le,K,He,xe,ge,se,F,ne,ye,je=M-A,Y=re-z,Re=te-M,Qe=O-re,me=ce-te,be=le-O;for(_e=0;_e<41;_e++)xe=(K=(Be=A+(Ee=_e/40)*je)+Ee*((ut=M+Ee*Re)-Be))+Ee*(ut+Ee*(te+Ee*me-ut)-K),ge=(He=(Ge=z+Ee*Y)+Ee*((Le=re+Ee*Qe)-Ge))+Ee*(Le+Ee*(O+Ee*be-Le)-He),_e==0?(se=xe,F=ge,ne=xe,ye=ge):(se=Math.min(se,xe),F=Math.min(F,ge),ne=Math.max(ne,xe),ye=Math.max(ye,ge));return new l(Math.round(se),Math.round(F),Math.round(ne-se),Math.round(ye-F))},ve=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,z,M=(A=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:z}));this.prevLineDash!==M&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=M)}}})(rs.API),function(e){var t=function(i){var o,l,c,d,u,h,p,f,y,x;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(x=u%85))/85)-(y=u%85))/85)-(f=u%85))/85)-(p=u%85))/85)%85,l.push(h+33,p+33,f+33,y+33,x+33)):l.push(122);return function(j,v){for(var w=v;w>0;w--)j.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,h=String,p="length",f=255,y="charCodeAt",x="slice",j="replace";for(i[x](-2),i=i[x](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[x](i[p]%5||5))[p];u>d;d+=5)l=52200625*(i[y](d)-33)+614125*(i[y](d+1)-33)+7225*(i[y](d+2)-33)+85*(i[y](d+3)-33)+(i[y](d+4)-33),c.push(f&l>>24,f&l>>16,f&l>>8,f&l);return function(v,w){for(var N=w;N>0;N--)v.pop()}(c,o[p]),h.fromCharCode.apply(h,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=iN(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(rs.API),function(e){e.loadFile=function(t,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,p=0,f=function(y){var x=y.length,j=[],v=String.fromCharCode;for(p=0;p<x;p+=1)j.push(v(255&y.charCodeAt(p)));return j.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return f(h.responseText)}(a,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(rs.API),function(e){function t(){return(as.html2canvas?Promise.resolve(as.html2canvas):tN(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(as.DOMPurify?Promise.resolve(as.DOMPurify):tN(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=sr(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(c(p,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var p=0;p<d.length;++p){var f=d[p],y=f.src.find(function(x){return x.format==="truetype"});y&&c.addFont(y.url,f.ref.name,f.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||rs.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,rs.getPageSize=function(o,l,c){if(sr(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var f,y=0,x=0;if(p.hasOwnProperty(h))y=p[h][1]/u,x=p[h][0]/u;else try{y=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>y&&(f=x,x=y,y=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>x&&(f=x,x=y,y=f)}return{width:x,height:y,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(hN):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(rs.API),rs.API.addJS=function(e){return ek=e,this.internal.events.subscribe("postPutResources",function(){Gg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Gg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Q3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ek+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Gg!==void 0&&Q3!==void 0&&this.internal.out("/Names <</JavaScript "+Gg+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=r.internal.newObject();u.push(h);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(rs.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var p,f=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,x={width:0,height:0,numcomponents:1},j=4;j<y;j+=2){if(j+=f,t.indexOf(h.charCodeAt(j+1))!==-1){p=256*h.charCodeAt(j+5)+h.charCodeAt(j+6),x={width:256*h.charCodeAt(j+7)+h.charCodeAt(j+8),height:p,numcomponents:h.charCodeAt(j+9)};break}f=256*h.charCodeAt(j+2)+h.charCodeAt(j+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:a}}return u}}(rs.API);var yh,Kg,tk,sk,rk,uee=function(){var e,t,r;function n(i){var o,l,c,d,u,h,p,f,y,x,j,v,w,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),y=(function(){var k,P;for(P=[],k=0;k<4;++k)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),i=(h!=null?h.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":p=(j=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,j.slice(0,p)),this.text[f]=String.fromCharCode.apply(String,j.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,p,f,y){var x,j,v,w,N,k,P,E,I,T,R,X,D,C,$,B,Q,oe,ae,U,Z,W=Math.ceil((d.width-h)/f),ve=Math.ceil((d.height-p)/y),A=d.width==W&&d.height==ve;for(C=o*W,X=A?l:new Uint8Array(C*ve),k=i.length,D=0,j=0;D<ve&&c<k;){switch(i[c++]){case 0:for(w=Q=0;Q<C;w=Q+=1)X[j++]=i[c++];break;case 1:for(w=oe=0;oe<C;w=oe+=1)x=i[c++],N=w<o?0:X[j-o],X[j++]=(x+N)%256;break;case 2:for(w=ae=0;ae<C;w=ae+=1)x=i[c++],v=(w-w%o)/o,$=D&&X[(D-1)*C+v*o+w%o],X[j++]=($+x)%256;break;case 3:for(w=U=0;U<C;w=U+=1)x=i[c++],v=(w-w%o)/o,N=w<o?0:X[j-o],$=D&&X[(D-1)*C+v*o+w%o],X[j++]=(x+Math.floor((N+$)/2))%256;break;case 4:for(w=Z=0;Z<C;w=Z+=1)x=i[c++],v=(w-w%o)/o,N=w<o?0:X[j-o],D===0?$=B=0:($=X[(D-1)*C+v*o+w%o],B=v&&X[(D-1)*C+(v-1)*o+w%o]),P=N+$-B,E=Math.abs(P-N),T=Math.abs(P-$),R=Math.abs(P-B),I=E<=T&&E<=R?N:T<=R?$:B,X[j++]=(x+I)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!A){var z=((p+D*y)*d.width+h)*o,M=D*C;for(w=0;w<W;w+=1){for(var re=0;re<o;re+=1)l[z++]=X[M++];z+=(f-1)*o}}D++}}return i=qQ(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,d,u,h,p,f;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,p=l.length;h<p;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(f=u[i++])!=null?f:255;return d},n.prototype.copyToImageData=function(i,o){var l,c,d,u,h,p,f,y,x,j,v;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(d=i.data||i).length,h=x||o,u=p=0,c===1)for(;u<y;)f=x?4*o[u/4]:p,j=h[f++],d[u++]=j,d[u++]=j,d[u++]=j,d[u++]=l?h[f++]:255,p=f;else for(;u<y;)f=x?4*o[u/4]:p,d[u++]=h[f++],d[u++]=h[f++],d[u++]=h[f++],d[u++]=l?h[f++]:255,p=f},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(as)==="[object Window]"){try{t=as.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,d,u,h,p,f;if(this.animation){for(f=[],l=u=0,h=(p=this.animation.frames).length;u<h;l=++u)o=p[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,f.push(o.image=e(c));return f}},n.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,d,u,h,p=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var f,y;if(f=l++%d,y=c[f],p.renderFrame(i,f),d>1&&l/d<u)return p.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function hee(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,p=null,f=0,y=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];h=e[t++]|e[t++]<<8,p=e[t++],!(1&x)&&(p=null),f=x>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var j=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,k=e[t++],P=k>>6&1,E=1<<(7&k)+1,I=l,T=c,R=!1;k>>7&&(R=!0,I=t,T=E,t+=3*E);var X=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}u.push({x:j,y:v,width:w,height:N,has_local_palette:R,palette_offset:I,palette_size:T,data_offset:X,data_length:t-X,transparent_index:p,interlaced:!!P,delay:h,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(C){if(C<0||C>=u.length)throw new Error("Frame index out of range.");return u[C]},this.decodeAndBlitFrameBGRA=function(C,$){var B=this.frameInfo(C),Q=B.width*B.height,oe=new Uint8Array(Q);nk(e,B.data_offset,oe,Q);var ae=B.palette_offset,U=B.transparent_index;U===null&&(U=256);var Z=B.width,W=r-Z,ve=Z,A=4*(B.y*r+B.x),z=4*((B.y+B.height)*r+B.x),M=A,re=4*W;B.interlaced===!0&&(re+=4*r*7);for(var te=8,O=0,ce=oe.length;O<ce;++O){var le=oe[O];if(ve===0&&(ve=Z,(M+=re)>=z&&(re=4*W+4*r*(te-1),M=A+(Z+W)*(te<<1),te>>=1)),le===U)M+=4;else{var Ee=e[ae+3*le],_e=e[ae+3*le+1],Be=e[ae+3*le+2];$[M++]=Be,$[M++]=_e,$[M++]=Ee,$[M++]=255}--ve}},this.decodeAndBlitFrameRGBA=function(C,$){var B=this.frameInfo(C),Q=B.width*B.height,oe=new Uint8Array(Q);nk(e,B.data_offset,oe,Q);var ae=B.palette_offset,U=B.transparent_index;U===null&&(U=256);var Z=B.width,W=r-Z,ve=Z,A=4*(B.y*r+B.x),z=4*((B.y+B.height)*r+B.x),M=A,re=4*W;B.interlaced===!0&&(re+=4*r*7);for(var te=8,O=0,ce=oe.length;O<ce;++O){var le=oe[O];if(ve===0&&(ve=Z,(M+=re)>=z&&(re=4*W+4*r*(te-1),M=A+(Z+W)*(te<<1),te>>=1)),le===U)M+=4;else{var Ee=e[ae+3*le],_e=e[ae+3*le+1],Be=e[ae+3*le+2];$[M++]=Ee,$[M++]=_e,$[M++]=Be,$[M++]=255}--ve}}}function nk(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,u=0,h=0,p=0,f=e[t++],y=new Int32Array(4096),x=null;;){for(;u<16&&f!==0;)h|=e[t++]<<u,u+=8,f===1?f=e[t++]:--f;if(u<c)break;var j=h&d;if(h>>=c,u-=c,j!==i){if(j===o)break;for(var v=j<l?j:x,w=0,N=v;N>i;)N=y[N]>>8,++w;var k=N;if(p+w+(v!==j?1:0)>n)return void jr.log("Warning, gif stream longer than expected.");r[p++]=k;var P=p+=w;for(v!==j&&(r[p++]=k),N=v;w--;)N=y[N],r[--P]=255&N,N>>=8;x!==null&&l<4096&&(y[l++]=x<<8|k,l>=d+1&&c<12&&(++c,d=d<<1|1)),x=j}else l=o+1,d=(1<<(c=a+1))-1,x=null}return p!==n&&jr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function o2(e){var t,r,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),p=new Array(65535),f=new Array(64),y=new Array(64),x=[],j=0,v=7,w=new Array(64),N=new Array(64),k=new Array(64),P=new Array(256),E=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function oe(A,z){for(var M=0,re=0,te=new Array,O=1;O<=16;O++){for(var ce=1;ce<=A[O];ce++)te[z[re]]=[],te[z[re]][0]=M,te[z[re]][1]=O,re++,M++;M*=2}return te}function ae(A){for(var z=A[0],M=A[1]-1;M>=0;)z&1<<M&&(j|=1<<v),M--,--v<0&&(j==255?(U(255),U(0)):U(j),v=7,j=0)}function U(A){x.push(A)}function Z(A){U(A>>8&255),U(255&A)}function W(A,z,M,re,te){for(var O,ce=te[0],le=te[240],Ee=function(ge,se){var F,ne,ye,je,Y,Re,Qe,me,be,fe,ke=0;for(be=0;be<8;++be){F=ge[ke],ne=ge[ke+1],ye=ge[ke+2],je=ge[ke+3],Y=ge[ke+4],Re=ge[ke+5],Qe=ge[ke+6];var We=F+(me=ge[ke+7]),Ze=F-me,xt=ne+Qe,lt=ne-Qe,ht=ye+Re,Nt=ye-Re,Et=je+Y,Qt=je-Y,zt=We+Et,Kt=We-Et,Ns=xt+ht,Ts=xt-ht;ge[ke]=zt+Ns,ge[ke+4]=zt-Ns;var Yt=.707106781*(Ts+Kt);ge[ke+2]=Kt+Yt,ge[ke+6]=Kt-Yt;var Rs=.382683433*((zt=Qt+Nt)-(Ts=lt+Ze)),Nn=.5411961*zt+Rs,vr=1.306562965*Ts+Rs,xn=.707106781*(Ns=Nt+lt),qe=Ze+xn,Te=Ze-xn;ge[ke+5]=Te+Nn,ge[ke+3]=Te-Nn,ge[ke+1]=qe+vr,ge[ke+7]=qe-vr,ke+=8}for(ke=0,be=0;be<8;++be){F=ge[ke],ne=ge[ke+8],ye=ge[ke+16],je=ge[ke+24],Y=ge[ke+32],Re=ge[ke+40],Qe=ge[ke+48];var mt=F+(me=ge[ke+56]),Wt=F-me,Jt=ne+Qe,ks=ne-Qe,us=ye+Re,hs=ye-Re,Ms=je+Y,Mr=je-Y,Ir=mt+Ms,Sn=mt-Ms,Pe=Jt+us,ot=Jt-us;ge[ke]=Ir+Pe,ge[ke+32]=Ir-Pe;var kt=.707106781*(ot+Sn);ge[ke+16]=Sn+kt,ge[ke+48]=Sn-kt;var Vt=.382683433*((Ir=Mr+hs)-(ot=ks+Wt)),fs=.5411961*Ir+Vt,ir=1.306562965*ot+Vt,$s=.707106781*(Pe=hs+ks),As=Wt+$s,Lt=Wt-$s;ge[ke+40]=Lt+fs,ge[ke+24]=Lt-fs,ge[ke+8]=As+ir,ge[ke+56]=As-ir,ke++}for(be=0;be<64;++be)fe=ge[be]*se[be],f[be]=fe>0?fe+.5|0:fe-.5|0;return f}(A,z),_e=0;_e<64;++_e)y[I[_e]]=Ee[_e];var Be=y[0]-M;M=y[0],Be==0?ae(re[0]):(ae(re[p[O=32767+Be]]),ae(h[O]));for(var Ge=63;Ge>0&&y[Ge]==0;)Ge--;if(Ge==0)return ae(ce),M;for(var ut,Le=1;Le<=Ge;){for(var K=Le;y[Le]==0&&Le<=Ge;)++Le;var He=Le-K;if(He>=16){ut=He>>4;for(var xe=1;xe<=ut;++xe)ae(le);He&=15}O=32767+y[Le],ae(te[(He<<4)+p[O]]),ae(h[O]),Le++}return Ge!=63&&ae(ce),M}function ve(A){A=Math.min(Math.max(A,1),100),i!=A&&(function(z){for(var M=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var te=o((M[re]*z+50)/100);te=Math.min(Math.max(te,1),255),l[I[re]]=te}for(var O=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var le=o((O[ce]*z+50)/100);le=Math.min(Math.max(le,1),255),c[I[ce]]=le}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Be=0;Be<8;Be++)for(var Ge=0;Ge<8;Ge++)d[_e]=1/(l[I[_e]]*Ee[Be]*Ee[Ge]*8),u[_e]=1/(c[I[_e]]*Ee[Be]*Ee[Ge]*8),_e++}(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),i=A)}this.encode=function(A,z){z&&ve(z),x=new Array,j=0,v=7,Z(65496),Z(65504),Z(16),U(74),U(70),U(73),U(70),U(0),U(1),U(1),U(0),Z(1),Z(1),U(0),U(0),function(){Z(65499),Z(132),U(0);for(var ne=0;ne<64;ne++)U(l[ne]);U(1);for(var ye=0;ye<64;ye++)U(c[ye])}(),function(ne,ye){Z(65472),Z(17),U(8),Z(ye),Z(ne),U(3),U(1),U(17),U(0),U(2),U(17),U(1),U(3),U(17),U(1)}(A.width,A.height),function(){Z(65476),Z(418),U(0);for(var ne=0;ne<16;ne++)U(T[ne+1]);for(var ye=0;ye<=11;ye++)U(R[ye]);U(16);for(var je=0;je<16;je++)U(X[je+1]);for(var Y=0;Y<=161;Y++)U(D[Y]);U(1);for(var Re=0;Re<16;Re++)U(C[Re+1]);for(var Qe=0;Qe<=11;Qe++)U($[Qe]);U(17);for(var me=0;me<16;me++)U(B[me+1]);for(var be=0;be<=161;be++)U(Q[be])}(),Z(65498),Z(12),U(3),U(1),U(0),U(2),U(17),U(3),U(17),U(0),U(63),U(0);var M=0,re=0,te=0;j=0,v=7,this.encode.displayName="_encode_";for(var O,ce,le,Ee,_e,Be,Ge,ut,Le,K=A.data,He=A.width,xe=A.height,ge=4*He,se=0;se<xe;){for(O=0;O<ge;){for(_e=ge*se+O,Ge=-1,ut=0,Le=0;Le<64;Le++)Be=_e+(ut=Le>>3)*ge+(Ge=4*(7&Le)),se+ut>=xe&&(Be-=ge*(se+1+ut-xe)),O+Ge>=ge&&(Be-=O+Ge-ge+4),ce=K[Be++],le=K[Be++],Ee=K[Be++],w[Le]=(E[ce]+E[le+256>>0]+E[Ee+512>>0]>>16)-128,N[Le]=(E[ce+768>>0]+E[le+1024>>0]+E[Ee+1280>>0]>>16)-128,k[Le]=(E[ce+1280>>0]+E[le+1536>>0]+E[Ee+1792>>0]>>16)-128;M=W(w,d,M,t,n),re=W(N,u,re,r,a),te=W(k,u,te,r,a),O+=32}se+=8}if(v>=0){var F=[];F[1]=v+1,F[0]=(1<<v+1)-1,ae(F)}return Z(65497),new Uint8Array(x)},e=e||50,function(){for(var A=String.fromCharCode,z=0;z<256;z++)P[z]=A(z)}(),t=oe(T,R),r=oe(C,$),n=oe(X,D),a=oe(B,Q),function(){for(var A=1,z=2,M=1;M<=15;M++){for(var re=A;re<z;re++)p[32767+re]=M,h[32767+re]=[],h[32767+re][1]=M,h[32767+re][0]=re;for(var te=-(z-1);te<=-A;te++)p[32767+te]=M,h[32767+te]=[],h[32767+te][1]=M,h[32767+te][0]=z-1+te;A<<=1,z<<=1}}(),function(){for(var A=0;A<256;A++)E[A]=19595*A,E[A+256>>0]=38470*A,E[A+512>>0]=7471*A+32768,E[A+768>>0]=-11059*A,E[A+1024>>0]=-21709*A,E[A+1280>>0]=32768*A+8421375,E[A+1536>>0]=-27439*A,E[A+1792>>0]=-5329*A}(),ve(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function eo(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ak(e){function t(T){if(!T)throw Error("assert :P")}function r(T,R,X){for(var D=0;4>D;D++)if(T[R+D]!=X.charCodeAt(D))return!0;return!1}function n(T,R,X,D,C){for(var $=0;$<C;$++)T[R+$]=X[D+$]}function a(T,R,X,D){for(var C=0;C<D;C++)T[R+C]=X}function i(T){return new Int32Array(T)}function o(T,R){for(var X=[],D=0;D<T;D++)X.push(new R);return X}function l(T,R){var X=[];return function D(C,$,B){for(var Q=B[$],oe=0;oe<Q&&(C.push(B.length>$+1?[]:new R),!(B.length<$+1));oe++)D(C[oe],$+1,B)}(X,0,T),X}var c=function(){var T=this;function R(m,b){for(var _=1<<b-1>>>0;m&_;)_>>>=1;return _?(m&_-1)+_:m}function X(m,b,_,L,q){t(!(L%_));do m[b+(L-=_)]=q;while(0<L)}function D(m,b,_,L,q){if(t(2328>=q),512>=q)var G=i(512);else if((G=i(q))==null)return 0;return function(J,ee,ie,he,Ne,Oe){var Me,Ae,it=ee,Ye=1<<ie,Se=i(16),Ce=i(16);for(t(Ne!=0),t(he!=null),t(J!=null),t(0<ie),Ae=0;Ae<Ne;++Ae){if(15<he[Ae])return 0;++Se[he[Ae]]}if(Se[0]==Ne)return 0;for(Ce[1]=0,Me=1;15>Me;++Me){if(Se[Me]>1<<Me)return 0;Ce[Me+1]=Ce[Me]+Se[Me]}for(Ae=0;Ae<Ne;++Ae)Me=he[Ae],0<he[Ae]&&(Oe[Ce[Me]++]=Ae);if(Ce[15]==1)return(he=new C).g=0,he.value=Oe[0],X(J,it,1,Ye,he),Ye;var st,ct=-1,at=Ye-1,Ft=0,_t=1,ss=1,At=1<<ie;for(Ae=0,Me=1,Ne=2;Me<=ie;++Me,Ne<<=1){if(_t+=ss<<=1,0>(ss-=Se[Me]))return 0;for(;0<Se[Me];--Se[Me])(he=new C).g=Me,he.value=Oe[Ae++],X(J,it+Ft,Ne,At,he),Ft=R(Ft,Me)}for(Me=ie+1,Ne=2;15>=Me;++Me,Ne<<=1){if(_t+=ss<<=1,0>(ss-=Se[Me]))return 0;for(;0<Se[Me];--Se[Me]){if(he=new C,(Ft&at)!=ct){for(it+=At,st=1<<(ct=Me)-ie;15>ct&&!(0>=(st-=Se[ct]));)++ct,st<<=1;Ye+=At=1<<(st=ct-ie),J[ee+(ct=Ft&at)].g=st+ie,J[ee+ct].value=it-ee-ct}he.g=Me-ie,he.value=Oe[Ae++],X(J,it+(Ft>>ie),Ne,At,he),Ft=R(Ft,Me)}}return _t!=2*Ce[15]-1?0:Ye}(m,b,_,L,q,G)}function C(){this.value=this.g=0}function $(){this.value=this.g=0}function B(){this.G=o(5,C),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Bn,$)}function Q(m,b,_,L){t(m!=null),t(b!=null),t(2147483648>L),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=b,m.pa=_,m.Jd=b,m.Yc=_+L,m.Zc=4<=L?_+L-4+1:_,O(m)}function oe(m,b){for(var _=0;0<b--;)_|=le(m,128)<<b;return _}function ae(m,b){var _=oe(m,b);return ce(m)?-_:_}function U(m,b,_,L){var q,G=0;for(t(m!=null),t(b!=null),t(4294967288>L),m.Sb=L,m.Ra=0,m.u=0,m.h=0,4<L&&(L=4),q=0;q<L;++q)G+=b[_+q]<<8*q;m.Ra=G,m.bb=L,m.oa=b,m.pa=_}function Z(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<th-8>>>0,++m.bb,m.u-=8;M(m)&&(m.h=1,m.u=0)}function W(m,b){if(t(0<=b),!m.h&&b<=eh){var _=z(m)&Qu[b];return m.u+=b,Z(m),_}return m.h=1,m.u=0}function ve(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function A(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(m){return m.Ra>>>(m.u&th-1)>>>0}function M(m){return t(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>th}function re(m,b){m.u=b,m.h=M(m)}function te(m){m.u>=gm&&(t(m.u>=gm),Z(m))}function O(m){t(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(t(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function ce(m){return oe(m,1)}function le(m,b){var _=m.Ca;0>m.b&&O(m);var L=m.b,q=_*b>>>8,G=(m.I>>>L>q)+0;for(G?(_-=q,m.I-=q+1<<L>>>0):_=q+1,L=_,q=0;256<=L;)q+=8,L>>=8;return L=7^q+Ma[L],m.b-=L,m.Ca=(_<<L)-1,G}function Ee(m,b,_){m[b+0]=_>>24&255,m[b+1]=_>>16&255,m[b+2]=_>>8&255,m[b+3]=_>>0&255}function _e(m,b){return m[b+0]<<0|m[b+1]<<8}function Be(m,b){return _e(m,b)|m[b+2]<<16}function Ge(m,b){return _e(m,b)|_e(m,b+2)<<16}function ut(m,b){var _=1<<b;return t(m!=null),t(0<b),m.X=i(_),m.X==null?0:(m.Mb=32-b,m.Xa=b,1)}function Le(m,b){t(m!=null),t(b!=null),t(m.Xa==b.Xa),n(b.X,0,m.X,0,1<<b.Xa)}function K(){this.X=[],this.Xa=this.Mb=0}function He(m,b,_,L){t(_!=null),t(L!=null);var q=_[0],G=L[0];return q==0&&(q=(m*G+b/2)/b),G==0&&(G=(b*q+m/2)/m),0>=q||0>=G?0:(_[0]=q,L[0]=G,1)}function xe(m,b){return m+(1<<b)-1>>>b}function ge(m,b){return((4278255360&m)+(4278255360&b)>>>0&4278255360)+((16711935&m)+(16711935&b)>>>0&16711935)>>>0}function se(m,b){T[b]=function(_,L,q,G,J,ee,ie){var he;for(he=0;he<J;++he){var Ne=T[m](ee[ie+he-1],q,G+he);ee[ie+he]=ge(_[L+he],Ne)}}}function F(){this.ud=this.hd=this.jd=0}function ne(m,b){return((4278124286&(m^b))>>>1)+(m&b)>>>0}function ye(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function je(m,b){return ye(m+(m-b+.5>>1))}function Y(m,b,_){return Math.abs(b-_)-Math.abs(m-_)}function Re(m,b,_,L,q,G,J){for(L=G[J-1],_=0;_<q;++_)G[J+_]=L=ge(m[b+_],L)}function Qe(m,b,_,L,q){var G;for(G=0;G<_;++G){var J=m[b+G],ee=J>>8&255,ie=16711935&(ie=(ie=16711935&J)+((ee<<16)+ee));L[q+G]=(4278255360&J)+ie>>>0}}function me(m,b){b.jd=m>>0&255,b.hd=m>>8&255,b.ud=m>>16&255}function be(m,b,_,L,q,G){var J;for(J=0;J<L;++J){var ee=b[_+J],ie=ee>>>8,he=ee,Ne=255&(Ne=(Ne=ee>>>16)+((m.jd<<24>>24)*(ie<<24>>24)>>>5));he=255&(he=(he=he+((m.hd<<24>>24)*(ie<<24>>24)>>>5))+((m.ud<<24>>24)*(Ne<<24>>24)>>>5)),q[G+J]=(4278255360&ee)+(Ne<<16)+he}}function fe(m,b,_,L,q){T[b]=function(G,J,ee,ie,he,Ne,Oe,Me,Ae){for(ie=Oe;ie<Me;++ie)for(Oe=0;Oe<Ae;++Oe)he[Ne++]=q(ee[L(G[J++])])},T[m]=function(G,J,ee,ie,he,Ne,Oe){var Me=8>>G.b,Ae=G.Ea,it=G.K[0],Ye=G.w;if(8>Me)for(G=(1<<G.b)-1,Ye=(1<<Me)-1;J<ee;++J){var Se,Ce=0;for(Se=0;Se<Ae;++Se)Se&G||(Ce=L(ie[he++])),Ne[Oe++]=q(it[Ce&Ye]),Ce>>=Me}else T["VP8LMapColor"+_](ie,he,it,Ye,Ne,Oe,J,ee,Ae)}}function ke(m,b,_,L,q){for(_=b+_;b<_;){var G=m[b++];L[q++]=G>>16&255,L[q++]=G>>8&255,L[q++]=G>>0&255}}function We(m,b,_,L,q){for(_=b+_;b<_;){var G=m[b++];L[q++]=G>>16&255,L[q++]=G>>8&255,L[q++]=G>>0&255,L[q++]=G>>24&255}}function Ze(m,b,_,L,q){for(_=b+_;b<_;){var G=(J=m[b++])>>16&240|J>>12&15,J=J>>0&240|J>>28&15;L[q++]=G,L[q++]=J}}function xt(m,b,_,L,q){for(_=b+_;b<_;){var G=(J=m[b++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;L[q++]=G,L[q++]=J}}function lt(m,b,_,L,q){for(_=b+_;b<_;){var G=m[b++];L[q++]=G>>0&255,L[q++]=G>>8&255,L[q++]=G>>16&255}}function ht(m,b,_,L,q,G){if(G==0)for(_=b+_;b<_;)Ee(L,((G=m[b++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),q+=32;else n(L,q,m,b,_)}function Nt(m,b){T[b][0]=T[m+"0"],T[b][1]=T[m+"1"],T[b][2]=T[m+"2"],T[b][3]=T[m+"3"],T[b][4]=T[m+"4"],T[b][5]=T[m+"5"],T[b][6]=T[m+"6"],T[b][7]=T[m+"7"],T[b][8]=T[m+"8"],T[b][9]=T[m+"9"],T[b][10]=T[m+"10"],T[b][11]=T[m+"11"],T[b][12]=T[m+"12"],T[b][13]=T[m+"13"],T[b][14]=T[m+"0"],T[b][15]=T[m+"0"]}function Et(m){return m==p1||m==x1||m==eg||m==g1}function Qt(){this.eb=[],this.size=this.A=this.fb=0}function zt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Kt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qt,this.f.kb=new zt,this.sd=null}function Ns(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ts(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Yt(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Rs(m,b){var _=m.T,L=b.ba.f.RGBA,q=L.eb,G=L.fb+m.ka*L.A,J=Pi[b.ba.S],ee=m.y,ie=m.O,he=m.f,Ne=m.N,Oe=m.ea,Me=m.W,Ae=b.cc,it=b.dc,Ye=b.Mc,Se=b.Nc,Ce=m.ka,st=m.ka+m.T,ct=m.U,at=ct+1>>1;for(Ce==0?J(ee,ie,null,null,he,Ne,Oe,Me,he,Ne,Oe,Me,q,G,null,null,ct):(J(b.ec,b.fc,ee,ie,Ae,it,Ye,Se,he,Ne,Oe,Me,q,G-L.A,q,G,ct),++_);Ce+2<st;Ce+=2)Ae=he,it=Ne,Ye=Oe,Se=Me,Ne+=m.Rc,Me+=m.Rc,G+=2*L.A,J(ee,(ie+=2*m.fa)-m.fa,ee,ie,Ae,it,Ye,Se,he,Ne,Oe,Me,q,G-L.A,q,G,ct);return ie+=m.fa,m.j+st<m.o?(n(b.ec,b.fc,ee,ie,ct),n(b.cc,b.dc,he,Ne,at),n(b.Mc,b.Nc,Oe,Me,at),_--):1&st||J(ee,ie,null,null,he,Ne,Oe,Me,he,Ne,Oe,Me,q,G+L.A,null,null,ct),_}function Nn(m,b,_){var L=m.F,q=[m.J];if(L!=null){var G=m.U,J=b.ba.S,ee=J==Qx||J==eg;b=b.ba.f.RGBA;var ie=[0],he=m.ka;ie[0]=m.T,m.Kb&&(he==0?--ie[0]:(--he,q[0]-=m.width),m.j+m.ka+m.T==m.o&&(ie[0]=m.o-m.j-he));var Ne=b.eb;he=b.fb+he*b.A,m=_r(L,q[0],m.width,G,ie,Ne,he+(ee?0:3),b.A),t(_==ie),m&&Et(J)&&ki(Ne,he,ee,G,ie,b.A)}return 0}function vr(m){var b=m.ma,_=b.ba.S,L=11>_,q=_==Zx||_==Xx||_==Qx||_==m1||_==12||Et(_);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!pm(b.Oa,m,q?11:12))return 0;if(q&&Et(_)&&dt(),m.da)alert("todo:use_scaling");else{if(L){if(b.Ib=Yt,m.Kb){if(_=m.U+1>>1,b.memory=i(m.U+2*_),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+m.U,b.Mc=b.cc,b.Nc=b.dc+_,b.Ib=Rs,dt()}}else alert("todo:EmitYUV");q&&(b.Jb=Nn,L&&Fe())}if(L&&!o_){for(m=0;256>m;++m)HI[m]=89858*(m-128)+sg>>tg,KI[m]=-22014*(m-128)+sg,GI[m]=-45773*(m-128),WI[m]=113618*(m-128)+sg>>tg;for(m=Sm;m<b1;++m)b=76283*(m-16)+sg>>tg,YI[m-Sm]=ai(b,255),JI[m-Sm]=ai(b+8>>4,15);o_=1}return 1}function xn(m){var b=m.ma,_=m.U,L=m.T;return t(!(1&m.ka)),0>=_||0>=L?0:(_=b.Ib(m,b),b.Jb!=null&&b.Jb(m,b,_),b.Dc+=_,1)}function qe(m){m.ma.memory=null}function Te(m,b,_,L){return W(m,8)!=47?0:(b[0]=W(m,14)+1,_[0]=W(m,14)+1,L[0]=W(m,1),W(m,3)!=0?0:!m.h)}function mt(m,b){if(4>m)return m+1;var _=m-2>>1;return(2+(1&m)<<_)+W(b,_)+1}function Wt(m,b){return 120<b?b-120:1<=(_=((_=LI[b-1])>>4)*m+(8-(15&_)))?_:1;var _}function Jt(m,b,_){var L=z(_),q=m[b+=255&L].g-8;return 0<q&&(re(_,_.u+8),L=z(_),b+=m[b].value,b+=L&(1<<q)-1),re(_,_.u+m[b].g),m[b].value}function ks(m,b,_){return _.g+=m.g,_.value+=m.value<<b>>>0,t(8>=_.g),m.g}function us(m,b,_){var L=m.xc;return t((b=L==0?0:m.vc[m.md*(_>>L)+(b>>L)])<m.Wb),m.Ya[b]}function hs(m,b,_,L){var q=m.ab,G=m.c*b,J=m.C;b=J+b;var ee=_,ie=L;for(L=m.Ta,_=m.Ua;0<q--;){var he=m.gc[q],Ne=J,Oe=b,Me=ee,Ae=ie,it=(ie=L,ee=_,he.Ea);switch(t(Ne<Oe),t(Oe<=he.nc),he.hc){case 2:Vx(Me,Ae,(Oe-Ne)*it,ie,ee);break;case 0:var Ye=Ne,Se=Oe,Ce=ie,st=ee,ct=(At=he).Ea;Ye==0&&(h1(Me,Ae,null,null,1,Ce,st),Re(Me,Ae+1,0,0,ct-1,Ce,st+1),Ae+=ct,st+=ct,++Ye);for(var at=1<<At.b,Ft=at-1,_t=xe(ct,At.b),ss=At.K,At=At.w+(Ye>>At.b)*_t;Ye<Se;){var ar=ss,lr=At,Ks=1;for(vm(Me,Ae,Ce,st-ct,1,Ce,st);Ks<ct;){var Bs=(Ks&~Ft)+at;Bs>ct&&(Bs=ct),(0,pc[ar[lr++]>>8&15])(Me,Ae+ +Ks,Ce,st+Ks-ct,Bs-Ks,Ce,st+Ks),Ks=Bs}Ae+=ct,st+=ct,++Ye&Ft||(At+=_t)}Oe!=he.nc&&n(ie,ee-it,ie,ee+(Oe-Ne-1)*it,it);break;case 1:for(it=Me,Se=Ae,ct=(Me=he.Ea)-(st=Me&~(Ce=(Ae=1<<he.b)-1)),Ye=xe(Me,he.b),at=he.K,he=he.w+(Ne>>he.b)*Ye;Ne<Oe;){for(Ft=at,_t=he,ss=new F,At=Se+st,ar=Se+Me;Se<At;)me(Ft[_t++],ss),qd(ss,it,Se,Ae,ie,ee),Se+=Ae,ee+=Ae;Se<ar&&(me(Ft[_t++],ss),qd(ss,it,Se,ct,ie,ee),Se+=ct,ee+=ct),++Ne&Ce||(he+=Ye)}break;case 3:if(Me==ie&&Ae==ee&&0<he.b){for(Se=ie,Me=it=ee+(Oe-Ne)*it-(st=(Oe-Ne)*xe(he.Ea,he.b)),Ae=ie,Ce=ee,Ye=[],st=(ct=st)-1;0<=st;--st)Ye[st]=Ae[Ce+st];for(st=ct-1;0<=st;--st)Se[Me+st]=Ye[st];Si(he,Ne,Oe,ie,it,ie,ee)}else Si(he,Ne,Oe,Me,Ae,ie,ee)}ee=L,ie=_}ie!=_&&n(L,_,ee,ie,G)}function Ms(m,b){var _=m.V,L=m.Ba+m.c*m.C,q=b-m.C;if(t(b<=m.l.o),t(16>=q),0<q){var G=m.l,J=m.Ta,ee=m.Ua,ie=G.width;if(hs(m,q,_,L),q=ee=[ee],t((_=m.C)<(L=b)),t(G.v<G.va),L>G.o&&(L=G.o),_<G.j){var he=G.j-_;_=G.j,q[0]+=he*ie}if(_>=L?_=0:(q[0]+=4*G.v,G.ka=_-G.j,G.U=G.va-G.v,G.T=L-_,_=1),_){if(ee=ee[0],11>(_=m.ca).S){var Ne=_.f.RGBA,Oe=(L=_.S,q=G.U,G=G.T,he=Ne.eb,Ne.A),Me=G;for(Ne=Ne.fb+m.Ma*Ne.A;0<Me--;){var Ae=J,it=ee,Ye=q,Se=he,Ce=Ne;switch(L){case Jx:$a(Ae,it,Ye,Se,Ce);break;case Zx:wa(Ae,it,Ye,Se,Ce);break;case p1:wa(Ae,it,Ye,Se,Ce),ki(Se,Ce,0,Ye,1,0);break;case XS:wl(Ae,it,Ye,Se,Ce);break;case Xx:ht(Ae,it,Ye,Se,Ce,1);break;case x1:ht(Ae,it,Ye,Se,Ce,1),ki(Se,Ce,0,Ye,1,0);break;case Qx:ht(Ae,it,Ye,Se,Ce,0);break;case eg:ht(Ae,it,Ye,Se,Ce,0),ki(Se,Ce,1,Ye,1,0);break;case m1:xc(Ae,it,Ye,Se,Ce);break;case g1:xc(Ae,it,Ye,Se,Ce),Sr(Se,Ce,Ye,1,0);break;case QS:jl(Ae,it,Ye,Se,Ce);break;default:t(0)}ee+=ie,Ne+=Oe}m.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");t(m.Ma<=_.height)}}m.C=b,t(m.C<=m.i)}function Mr(m){var b;if(0<m.ua)return 0;for(b=0;b<m.Wb;++b){var _=m.Ya[b].G,L=m.Ya[b].H;if(0<_[1][L[1]+0].g||0<_[2][L[2]+0].g||0<_[3][L[3]+0].g)return 0}return 1}function Ir(m,b,_,L,q,G){if(m.Z!=0){var J=m.qd,ee=m.rd;for(t(bc[m.Z]!=null);b<_;++b)bc[m.Z](J,ee,L,q,L,q,G),J=L,ee=q,q+=G;m.qd=J,m.rd=ee}}function Sn(m,b){var _=m.l.ma,L=_.Z==0||_.Z==1?m.l.j:m.C;if(L=m.C<L?L:m.C,t(b<=m.l.o),b>L){var q=m.l.width,G=_.ca,J=_.tb+q*L,ee=m.V,ie=m.Ba+m.c*L,he=m.gc;t(m.ab==1),t(he[0].hc==3),Hx(he[0],L,b,ee,ie,G,J),Ir(_,L,b,G,J,q)}m.C=m.Ma=b}function Pe(m,b,_,L,q,G,J){var ee=m.$/L,ie=m.$%L,he=m.m,Ne=m.s,Oe=_+m.$,Me=Oe;q=_+L*q;var Ae=_+L*G,it=280+Ne.ua,Ye=m.Pb?ee:16777216,Se=0<Ne.ua?Ne.Wa:null,Ce=Ne.wc,st=Oe<Ae?us(Ne,ie,ee):null;t(m.C<G),t(Ae<=q);var ct=!1;e:for(;;){for(;ct||Oe<Ae;){var at=0;if(ee>=Ye){var Ft=Oe-_;t((Ye=m).Pb),Ye.wd=Ye.m,Ye.xd=Ft,0<Ye.s.ua&&Le(Ye.s.Wa,Ye.s.vb),Ye=ee+RI}if(ie&Ce||(st=us(Ne,ie,ee)),t(st!=null),st.Qb&&(b[Oe]=st.qb,ct=!0),!ct)if(te(he),st.jc){at=he,Ft=b;var _t=Oe,ss=st.pd[z(at)&Bn-1];t(st.jc),256>ss.g?(re(at,at.u+ss.g),Ft[_t]=ss.value,at=0):(re(at,at.u+ss.g-256),t(256<=ss.value),at=ss.value),at==0&&(ct=!0)}else at=Jt(st.G[0],st.H[0],he);if(he.h)break;if(ct||256>at){if(!ct)if(st.nd)b[Oe]=(st.qb|at<<8)>>>0;else{if(te(he),ct=Jt(st.G[1],st.H[1],he),te(he),Ft=Jt(st.G[2],st.H[2],he),_t=Jt(st.G[3],st.H[3],he),he.h)break;b[Oe]=(_t<<24|ct<<16|at<<8|Ft)>>>0}if(ct=!1,++Oe,++ie>=L&&(ie=0,++ee,J!=null&&ee<=G&&!(ee%16)&&J(m,ee),Se!=null))for(;Me<Oe;)at=b[Me++],Se.X[(506832829*at&4294967295)>>>Se.Mb]=at}else if(280>at){if(at=mt(at-256,he),Ft=Jt(st.G[4],st.H[4],he),te(he),Ft=Wt(L,Ft=mt(Ft,he)),he.h)break;if(Oe-_<Ft||q-Oe<at)break e;for(_t=0;_t<at;++_t)b[Oe+_t]=b[Oe+_t-Ft];for(Oe+=at,ie+=at;ie>=L;)ie-=L,++ee,J!=null&&ee<=G&&!(ee%16)&&J(m,ee);if(t(Oe<=q),ie&Ce&&(st=us(Ne,ie,ee)),Se!=null)for(;Me<Oe;)at=b[Me++],Se.X[(506832829*at&4294967295)>>>Se.Mb]=at}else{if(!(at<it))break e;for(ct=at-280,t(Se!=null);Me<Oe;)at=b[Me++],Se.X[(506832829*at&4294967295)>>>Se.Mb]=at;at=Oe,t(!(ct>>>(Ft=Se).Xa)),b[at]=Ft.X[ct],ct=!0}ct||t(he.h==M(he))}if(m.Pb&&he.h&&Oe<q)t(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Le(m.s.vb,m.s.Wa);else{if(he.h)break e;J!=null&&J(m,ee>G?G:ee),m.a=0,m.$=Oe-_}return 1}return m.a=3,0}function ot(m){t(m!=null),m.vc=null,m.yc=null,m.Ya=null;var b=m.Wa;b!=null&&(b.X=null),m.vb=null,t(m!=null)}function kt(){var m=new u1;return m==null?null:(m.a=0,m.xb=s_,Nt("Predictor","VP8LPredictors"),Nt("Predictor","VP8LPredictors_C"),Nt("PredictorAdd","VP8LPredictorsAdd"),Nt("PredictorAdd","VP8LPredictorsAdd_C"),Vx=Qe,qd=be,$a=ke,wa=We,xc=Ze,jl=xt,wl=lt,T.VP8LMapColor32b=sh,T.VP8LMapColor8b=Wx,m)}function Vt(m,b,_,L,q){var G=1,J=[m],ee=[b],ie=L.m,he=L.s,Ne=null,Oe=0;e:for(;;){if(_)for(;G&&W(ie,1);){var Me=J,Ae=ee,it=L,Ye=1,Se=it.m,Ce=it.gc[it.ab],st=W(Se,2);if(it.Oc&1<<st)G=0;else{switch(it.Oc|=1<<st,Ce.hc=st,Ce.Ea=Me[0],Ce.nc=Ae[0],Ce.K=[null],++it.ab,t(4>=it.ab),st){case 0:case 1:Ce.b=W(Se,3)+2,Ye=Vt(xe(Ce.Ea,Ce.b),xe(Ce.nc,Ce.b),0,it,Ce.K),Ce.K=Ce.K[0];break;case 3:var ct,at=W(Se,8)+1,Ft=16<at?0:4<at?1:2<at?2:3;if(Me[0]=xe(Ce.Ea,Ft),Ce.b=Ft,ct=Ye=Vt(at,1,0,it,Ce.K)){var _t,ss=at,At=Ce,ar=1<<(8>>At.b),lr=i(ar);if(lr==null)ct=0;else{var Ks=At.K[0],Bs=At.w;for(lr[0]=At.K[0][0],_t=1;_t<1*ss;++_t)lr[_t]=ge(Ks[Bs+_t],lr[_t-1]);for(;_t<4*ar;++_t)lr[_t]=0;At.K[0]=null,At.K[0]=lr,ct=1}}Ye=ct;break;case 2:break;default:t(0)}G=Ye}}if(J=J[0],ee=ee[0],G&&W(ie,1)&&!(G=1<=(Oe=W(ie,4))&&11>=Oe)){L.a=3;break e}var br;if(br=G)t:{var xr,Ss,ln,Ba=L,cn=J,za=ee,cr=Oe,oi=_,li=Ba.m,Cn=Ba.s,zn=[null],Sa=1,Ei=0,Oo=TI[cr];s:for(;;){if(oi&&W(li,1)){var kn=W(li,3)+2,Cl=xe(cn,kn),Kd=xe(za,kn),oh=Cl*Kd;if(!Vt(Cl,Kd,0,Ba,zn))break s;for(zn=zn[0],Cn.xc=kn,xr=0;xr<oh;++xr){var jc=zn[xr]>>8&65535;zn[xr]=jc,jc>=Sa&&(Sa=jc+1)}}if(li.h)break s;for(Ss=0;5>Ss;++Ss){var Hr=e_[Ss];!Ss&&0<cr&&(Hr+=1<<cr),Ei<Hr&&(Ei=Hr)}var j1=o(Sa*Oo,C),d_=Sa,u_=o(d_,B);if(u_==null)var ng=null;else t(65536>=d_),ng=u_;var _m=i(Ei);if(ng==null||_m==null||j1==null){Ba.a=1;break s}var ag=j1;for(xr=ln=0;xr<Sa;++xr){var Zi=ng[xr],lh=Zi.G,ch=Zi.H,h_=0,ig=1,f_=0;for(Ss=0;5>Ss;++Ss){Hr=e_[Ss],lh[Ss]=ag,ch[Ss]=ln,!Ss&&0<cr&&(Hr+=1<<cr);n:{var og,w1=Hr,lg=Ba,Cm=_m,QI=ag,eF=ln,N1=0,wc=lg.m,tF=W(wc,1);if(a(Cm,0,0,w1),tF){var sF=W(wc,1)+1,rF=W(wc,1),m_=W(wc,rF==0?1:8);Cm[m_]=1,sF==2&&(Cm[m_=W(wc,8)]=1);var cg=1}else{var p_=i(19),x_=W(wc,4)+4;if(19<x_){lg.a=3;var dg=0;break n}for(og=0;og<x_;++og)p_[EI[og]]=W(wc,3);var S1=void 0,km=void 0,g_=lg,nF=p_,ug=w1,v_=Cm,_1=0,Nc=g_.m,y_=8,b_=o(128,C);r:for(;D(b_,0,7,nF,19);){if(W(Nc,1)){var aF=2+2*W(Nc,3);if((S1=2+W(Nc,aF))>ug)break r}else S1=ug;for(km=0;km<ug&&S1--;){te(Nc);var j_=b_[0+(127&z(Nc))];re(Nc,Nc.u+j_.g);var dh=j_.value;if(16>dh)v_[km++]=dh,dh!=0&&(y_=dh);else{var iF=dh==16,w_=dh-16,oF=AI[w_],N_=W(Nc,kI[w_])+oF;if(km+N_>ug)break r;for(var lF=iF?y_:0;0<N_--;)v_[km++]=lF}}_1=1;break r}_1||(g_.a=3),cg=_1}(cg=cg&&!wc.h)&&(N1=D(QI,eF,8,Cm,w1)),cg&&N1!=0?dg=N1:(lg.a=3,dg=0)}if(dg==0)break s;if(ig&&PI[Ss]==1&&(ig=ag[ln].g==0),h_+=ag[ln].g,ln+=dg,3>=Ss){var Am,C1=_m[0];for(Am=1;Am<Hr;++Am)_m[Am]>C1&&(C1=_m[Am]);f_+=C1}}if(Zi.nd=ig,Zi.Qb=0,ig&&(Zi.qb=(lh[3][ch[3]+0].value<<24|lh[1][ch[1]+0].value<<16|lh[2][ch[2]+0].value)>>>0,h_==0&&256>lh[0][ch[0]+0].value&&(Zi.Qb=1,Zi.qb+=lh[0][ch[0]+0].value<<8)),Zi.jc=!Zi.Qb&&6>f_,Zi.jc){var hg,kl=Zi;for(hg=0;hg<Bn;++hg){var Sc=hg,_c=kl.pd[Sc],fg=kl.G[0][kl.H[0]+Sc];256<=fg.value?(_c.g=fg.g+256,_c.value=fg.value):(_c.g=0,_c.value=0,Sc>>=ks(fg,8,_c),Sc>>=ks(kl.G[1][kl.H[1]+Sc],16,_c),Sc>>=ks(kl.G[2][kl.H[2]+Sc],0,_c),ks(kl.G[3][kl.H[3]+Sc],24,_c))}}}Cn.vc=zn,Cn.Wb=Sa,Cn.Ya=ng,Cn.yc=j1,br=1;break t}br=0}if(!(G=br)){L.a=3;break e}if(0<Oe){if(he.ua=1<<Oe,!ut(he.Wa,Oe)){L.a=1,G=0;break e}}else he.ua=0;var k1=L,S_=J,cF=ee,A1=k1.s,P1=A1.xc;if(k1.c=S_,k1.i=cF,A1.md=xe(S_,P1),A1.wc=P1==0?-1:(1<<P1)-1,_){L.xb=BI;break e}if((Ne=i(J*ee))==null){L.a=1,G=0;break e}G=(G=Pe(L,Ne,0,J,ee,ee,null))&&!ie.h;break e}return G?(q!=null?q[0]=Ne:(t(Ne==null),t(_)),L.$=0,_||ot(he)):ot(he),G}function fs(m,b){var _=m.c*m.i,L=_+b+16*b;return t(m.c<=b),m.V=i(L),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+_+b,1)}function ir(m,b){var _=m.C,L=b-_,q=m.V,G=m.Ba+m.c*_;for(t(b<=m.l.o);0<L;){var J=16<L?16:L,ee=m.l.ma,ie=m.l.width,he=ie*J,Ne=ee.ca,Oe=ee.tb+ie*_,Me=m.Ta,Ae=m.Ua;hs(m,J,q,G),Xr(Me,Ae,Ne,Oe,he),Ir(ee,_,_+J,Ne,Oe,ie),L-=J,q+=J*m.c,_+=J}t(_==b),m.C=m.Ma=b}function $s(){this.ub=this.yd=this.td=this.Rb=0}function As(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Lt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function is(){this.Yb=function(){var m=[];return function b(_,L,q){for(var G=q[L],J=0;J<G&&(_.push(q.length>L+1?[]:0),!(q.length<L+1));J++)b(_[J],L+1,q)}(m,0,[3,11]),m}()}function pr(){this.jb=i(3),this.Wc=l([4,8],is),this.Xc=l([4,17],is)}function ba(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Qn(){this.ld=this.La=this.dd=this.tc=0}function Mn(){this.Na=this.la=0}function Jr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ja(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Oa(){this.uc=this.M=this.Nb=0,this.wa=Array(new Qn),this.Y=0,this.ya=Array(new ja),this.aa=0,this.l=new Ni}function dc(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ro(){this.cb=this.a=0,this.sc="",this.m=new ve,this.Od=new $s,this.Kc=new As,this.ed=new ba,this.Qa=new Lt,this.Ic=this.$c=this.Aa=0,this.D=new Oa,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ve),this.ia=0,this.pb=o(4,Jr),this.Pa=new pr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new dc),this.Hd=0,this.rb=Array(new Mn),this.sb=0,this.wa=Array(new Qn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ja),this.L=this.aa=0,this.gd=l([4,2],Qn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ni(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function H(){var m=new Ro;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Nm||(Nm=St)),m}function Ie(m,b,_){return m.a==0&&(m.a=b,m.sc=_,m.cb=0),0}function Je(m,b,_){return 3<=_&&m[b+0]==157&&m[b+1]==1&&m[b+2]==42}function wt(m,b){if(m==null)return 0;if(m.a=0,m.sc="OK",b==null)return Ie(m,2,"null VP8Io passed to VP8GetHeaders()");var _=b.data,L=b.w,q=b.ha;if(4>q)return Ie(m,7,"Truncated header.");var G=_[L+0]|_[L+1]<<8|_[L+2]<<16,J=m.Od;if(J.Rb=!(1&G),J.td=G>>1&7,J.yd=G>>4&1,J.ub=G>>5,3<J.td)return Ie(m,3,"Incorrect keyframe parameters.");if(!J.yd)return Ie(m,4,"Frame not displayable.");L+=3,q-=3;var ee=m.Kc;if(J.Rb){if(7>q)return Ie(m,7,"cannot parse picture header");if(!Je(_,L,q))return Ie(m,3,"Bad code word");ee.c=16383&(_[L+4]<<8|_[L+3]),ee.Td=_[L+4]>>6,ee.i=16383&(_[L+6]<<8|_[L+5]),ee.Ud=_[L+6]>>6,L+=7,q-=7,m.za=ee.c+15>>4,m.Ub=ee.i+15>>4,b.width=ee.c,b.height=ee.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,a((G=m.Pa).jb,0,255,G.jb.length),t((G=m.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,a(G.Zb,0,0,G.Zb.length),a(G.Lb,0,0,G.Lb)}if(J.ub>q)return Ie(m,7,"bad partition length");Q(G=m.m,_,L,J.ub),L+=J.ub,q-=J.ub,J.Rb&&(ee.Ld=ce(G),ee.Kd=ce(G)),ee=m.Qa;var ie,he=m.Pa;if(t(G!=null),t(ee!=null),ee.Cb=ce(G),ee.Cb){if(ee.Bb=ce(G),ce(G)){for(ee.Fb=ce(G),ie=0;4>ie;++ie)ee.Zb[ie]=ce(G)?ae(G,7):0;for(ie=0;4>ie;++ie)ee.Lb[ie]=ce(G)?ae(G,6):0}if(ee.Bb)for(ie=0;3>ie;++ie)he.jb[ie]=ce(G)?oe(G,8):255}else ee.Bb=0;if(G.Ka)return Ie(m,3,"cannot parse segment header");if((ee=m.ed).zd=ce(G),ee.Tb=oe(G,6),ee.wb=oe(G,3),ee.Pc=ce(G),ee.Pc&&ce(G)){for(he=0;4>he;++he)ce(G)&&(ee.vd[he]=ae(G,6));for(he=0;4>he;++he)ce(G)&&(ee.od[he]=ae(G,6))}if(m.L=ee.Tb==0?0:ee.zd?1:2,G.Ka)return Ie(m,3,"cannot parse filter header");var Ne=q;if(q=ie=L,L=ie+Ne,ee=Ne,m.Xb=(1<<oe(m.m,2))-1,Ne<3*(he=m.Xb))_=7;else{for(ie+=3*he,ee-=3*he,Ne=0;Ne<he;++Ne){var Oe=_[q+0]|_[q+1]<<8|_[q+2]<<16;Oe>ee&&(Oe=ee),Q(m.Jc[+Ne],_,ie,Oe),ie+=Oe,ee-=Oe,q+=3}Q(m.Jc[+he],_,ie,ee),_=ie<L?0:5}if(_!=0)return Ie(m,_,"cannot parse partitions");for(_=oe(ie=m.m,7),q=ce(ie)?ae(ie,4):0,L=ce(ie)?ae(ie,4):0,ee=ce(ie)?ae(ie,4):0,he=ce(ie)?ae(ie,4):0,ie=ce(ie)?ae(ie,4):0,Ne=m.Qa,Oe=0;4>Oe;++Oe){if(Ne.Cb){var Me=Ne.Zb[Oe];Ne.Fb||(Me+=_)}else{if(0<Oe){m.pb[Oe]=m.pb[0];continue}Me=_}var Ae=m.pb[Oe];Ae.Sc[0]=v1[ai(Me+q,127)],Ae.Sc[1]=y1[ai(Me+0,127)],Ae.Eb[0]=2*v1[ai(Me+L,127)],Ae.Eb[1]=101581*y1[ai(Me+ee,127)]>>16,8>Ae.Eb[1]&&(Ae.Eb[1]=8),Ae.Qc[0]=v1[ai(Me+he,117)],Ae.Qc[1]=y1[ai(Me+ie,127)],Ae.lc=Me+ie}if(!J.Rb)return Ie(m,4,"Not a key frame.");for(ce(G),J=m.Pa,_=0;4>_;++_){for(q=0;8>q;++q)for(L=0;3>L;++L)for(ee=0;11>ee;++ee)he=le(G,MI[_][q][L][ee])?oe(G,8):DI[_][q][L][ee],J.Wc[_][q].Yb[L][ee]=he;for(q=0;17>q;++q)J.Xc[_][q]=J.Wc[_][$I[q]]}return m.kc=ce(G),m.kc&&(m.Bd=oe(G,8)),m.cb=1}function St(m,b,_,L,q,G,J){var ee=b[q].Yb[_];for(_=0;16>q;++q){if(!le(m,ee[_+0]))return q;for(;!le(m,ee[_+1]);)if(ee=b[++q].Yb[0],_=0,q==16)return 16;var ie=b[q+1].Yb;if(le(m,ee[_+2])){var he=m,Ne=0;if(le(he,(Me=ee)[(Oe=_)+3]))if(le(he,Me[Oe+6])){for(ee=0,Oe=2*(Ne=le(he,Me[Oe+8]))+(Me=le(he,Me[Oe+9+Ne])),Ne=0,Me=II[Oe];Me[ee];++ee)Ne+=Ne+le(he,Me[ee]);Ne+=3+(8<<Oe)}else le(he,Me[Oe+7])?(Ne=7+2*le(he,165),Ne+=le(he,145)):Ne=5+le(he,159);else Ne=le(he,Me[Oe+4])?3+le(he,Me[Oe+5]):2;ee=ie[2]}else Ne=1,ee=ie[1];ie=J+FI[q],0>(he=m).b&&O(he);var Oe,Me=he.b,Ae=(Oe=he.Ca>>1)-(he.I>>Me)>>31;--he.b,he.Ca+=Ae,he.Ca|=1,he.I-=(Oe+1&Ae)<<Me,G[ie]=((Ne^Ae)-Ae)*L[(0<q)+0]}return 16}function qt(m){var b=m.rb[m.sb-1];b.la=0,b.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function os(m,b){if(m==null)return 0;if(b==null)return Ie(m,2,"NULL VP8Io parameter in VP8Decode().");if(!m.cb&&!wt(m,b))return 0;if(t(m.cb),b.ac==null||b.ac(b)){b.ob&&(m.L=0);var _=rg[m.L];if(m.L==2?(m.yb=0,m.zb=0):(m.yb=b.v-_>>4,m.zb=b.j-_>>4,0>m.yb&&(m.yb=0),0>m.zb&&(m.zb=0)),m.Va=b.o+15+_>>4,m.Hb=b.va+15+_>>4,m.Hb>m.za&&(m.Hb=m.za),m.Va>m.Ub&&(m.Va=m.Ub),0<m.L){var L=m.ed;for(_=0;4>_;++_){var q;if(m.Qa.Cb){var G=m.Qa.Lb[_];m.Qa.Fb||(G+=L.Tb)}else G=L.Tb;for(q=0;1>=q;++q){var J=m.gd[_][q],ee=G;if(L.Pc&&(ee+=L.vd[0],q&&(ee+=L.od[0])),0<(ee=0>ee?0:63<ee?63:ee)){var ie=ee;0<L.wb&&(ie=4<L.wb?ie>>2:ie>>1)>9-L.wb&&(ie=9-L.wb),1>ie&&(ie=1),J.dd=ie,J.tc=2*ee+ie,J.ld=40<=ee?2:15<=ee?1:0}else J.tc=0;J.La=q}}}_=0}else Ie(m,6,"Frame setup failed"),_=m.a;if(_=_==0){if(_){m.$c=0,0<m.Aa||(m.Ic=XI);e:{_=m.Ic,L=4*(ie=m.za);var he=32*ie,Ne=ie+1,Oe=0<m.L?ie*(0<m.Aa?2:1):0,Me=(m.Aa==2?2:1)*ie;if((J=L+832+(q=3*(16*_+rg[m.L])/2*he)+(G=m.Fa!=null&&0<m.Fa.length?m.Kc.c*m.Kc.i:0))!=J)_=0;else{if(J>m.Vb){if(m.Vb=0,m.Ec=i(J),m.Fc=0,m.Ec==null){_=Ie(m,1,"no memory during frame initialization.");break e}m.Vb=J}J=m.Ec,ee=m.Fc,m.Ac=J,m.Bc=ee,ee+=L,m.Gd=o(he,dc),m.Hd=0,m.rb=o(Ne+1,Mn),m.sb=1,m.wa=Oe?o(Oe,Qn):null,m.Y=0,m.D.Nb=0,m.D.wa=m.wa,m.D.Y=m.Y,0<m.Aa&&(m.D.Y+=ie),t(!0),m.oc=J,m.pc=ee,ee+=832,m.ya=o(Me,ja),m.aa=0,m.D.ya=m.ya,m.D.aa=m.aa,m.Aa==2&&(m.D.aa+=ie),m.R=16*ie,m.B=8*ie,ie=(he=rg[m.L])*m.R,he=he/2*m.B,m.sa=J,m.ta=ee+ie,m.qa=m.sa,m.ra=m.ta+16*_*m.R+he,m.Ha=m.qa,m.Ia=m.ra+8*_*m.B+he,m.$c=0,ee+=q,m.mb=G?J:null,m.nb=G?ee:null,t(ee+G<=m.Fc+m.Vb),qt(m),a(m.Ac,m.Bc,0,L),_=1}}if(_){if(b.ka=0,b.y=m.sa,b.O=m.ta,b.f=m.qa,b.N=m.ra,b.ea=m.Ha,b.Vd=m.Ia,b.fa=m.R,b.Rc=m.B,b.F=null,b.J=0,!Kx){for(_=-255;255>=_;++_)gn[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)Sl[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)wm[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)ih[255+_]=0>_?0:255<_?255:_;Kx=1}rh=sm,Nl=Od,ym=Md,Na=tm,_i=qu,Zr=$n,nh=im,Gx=zd,bm=d1,Vd=om,Hd=c1,gc=Ku,Wd=lm,ah=zx,Gd=Bx,vc=Fo,jm=bl,Ci=l1,Ji[0]=Io,Ji[1]=Xb,Ji[2]=s1,Ji[3]=r1,Ji[4]=Fx,Ji[5]=Wu,Ji[6]=Dx,Ji[7]=rm,Ji[8]=a1,Ji[9]=n1,yc[0]=Rx,yc[1]=e1,yc[2]=yl,yc[3]=Vu,yc[4]=ea,yc[5]=t1,yc[6]=Ix,_l[0]=hc,_l[1]=Qb,_l[2]=i1,_l[3]=nm,_l[4]=Bd,_l[5]=o1,_l[6]=am,_=1}else _=0}_&&(_=function(Ae,it){for(Ae.M=0;Ae.M<Ae.Va;++Ae.M){var Ye,Se=Ae.Jc[Ae.M&Ae.Xb],Ce=Ae.m,st=Ae;for(Ye=0;Ye<st.za;++Ye){var ct=Ce,at=st,Ft=at.Ac,_t=at.Bc+4*Ye,ss=at.zc,At=at.ya[at.aa+Ye];if(at.Qa.Bb?At.$b=le(ct,at.Pa.jb[0])?2+le(ct,at.Pa.jb[2]):le(ct,at.Pa.jb[1]):At.$b=0,at.kc&&(At.Ad=le(ct,at.Bd)),At.Za=!le(ct,145)+0,At.Za){var ar=At.Ob,lr=0;for(at=0;4>at;++at){var Ks,Bs=ss[0+at];for(Ks=0;4>Ks;++Ks){Bs=OI[Ft[_t+Ks]][Bs];for(var br=t_[le(ct,Bs[0])];0<br;)br=t_[2*br+le(ct,Bs[br])];Bs=-br,Ft[_t+Ks]=Bs}n(ar,lr,Ft,_t,4),lr+=4,ss[0+at]=Bs}}else Bs=le(ct,156)?le(ct,128)?1:3:le(ct,163)?2:0,At.Ob[0]=Bs,a(Ft,_t,Bs,4),a(ss,0,Bs,4);At.Dd=le(ct,142)?le(ct,114)?le(ct,183)?1:3:2:0}if(st.m.Ka)return Ie(Ae,7,"Premature end-of-partition0 encountered.");for(;Ae.ja<Ae.za;++Ae.ja){if(st=Se,ct=(Ce=Ae).rb[Ce.sb-1],Ft=Ce.rb[Ce.sb+Ce.ja],Ye=Ce.ya[Ce.aa+Ce.ja],_t=Ce.kc?Ye.Ad:0)ct.la=Ft.la=0,Ye.Za||(ct.Na=Ft.Na=0),Ye.Hc=0,Ye.Gc=0,Ye.ia=0;else{var xr,Ss;if(ct=Ft,Ft=st,_t=Ce.Pa.Xc,ss=Ce.ya[Ce.aa+Ce.ja],At=Ce.pb[ss.$b],at=ss.ad,ar=0,lr=Ce.rb[Ce.sb-1],Bs=Ks=0,a(at,ar,0,384),ss.Za)var ln=0,Ba=_t[3];else{br=i(16);var cn=ct.Na+lr.Na;if(cn=Nm(Ft,_t[1],cn,At.Eb,0,br,0),ct.Na=lr.Na=(0<cn)+0,1<cn)rh(br,0,at,ar);else{var za=br[0]+3>>3;for(br=0;256>br;br+=16)at[ar+br]=za}ln=1,Ba=_t[0]}var cr=15&ct.la,oi=15&lr.la;for(br=0;4>br;++br){var li=1&oi;for(za=Ss=0;4>za;++za)cr=cr>>1|(li=(cn=Nm(Ft,Ba,cn=li+(1&cr),At.Sc,ln,at,ar))>ln)<<7,Ss=Ss<<2|(3<cn?3:1<cn?2:at[ar+0]!=0),ar+=16;cr>>=4,oi=oi>>1|li<<7,Ks=(Ks<<8|Ss)>>>0}for(Ba=cr,ln=oi>>4,xr=0;4>xr;xr+=2){for(Ss=0,cr=ct.la>>4+xr,oi=lr.la>>4+xr,br=0;2>br;++br){for(li=1&oi,za=0;2>za;++za)cn=li+(1&cr),cr=cr>>1|(li=0<(cn=Nm(Ft,_t[2],cn,At.Qc,0,at,ar)))<<3,Ss=Ss<<2|(3<cn?3:1<cn?2:at[ar+0]!=0),ar+=16;cr>>=2,oi=oi>>1|li<<5}Bs|=Ss<<4*xr,Ba|=cr<<4<<xr,ln|=(240&oi)<<xr}ct.la=Ba,lr.la=ln,ss.Hc=Ks,ss.Gc=Bs,ss.ia=43690&Bs?0:At.ia,_t=!(Ks|Bs)}if(0<Ce.L&&(Ce.wa[Ce.Y+Ce.ja]=Ce.gd[Ye.$b][Ye.Za],Ce.wa[Ce.Y+Ce.ja].La|=!_t),st.Ka)return Ie(Ae,7,"Premature end-of-file encountered.")}if(qt(Ae),Ce=it,st=1,Ye=(Se=Ae).D,ct=0<Se.L&&Se.M>=Se.zb&&Se.M<=Se.Va,Se.Aa==0)e:{if(Ye.M=Se.M,Ye.uc=ct,mm(Se,Ye),st=1,Ye=(Ss=Se.D).Nb,ct=(Bs=rg[Se.L])*Se.R,Ft=Bs/2*Se.B,br=16*Ye*Se.R,za=8*Ye*Se.B,_t=Se.sa,ss=Se.ta-ct+br,At=Se.qa,at=Se.ra-Ft+za,ar=Se.Ha,lr=Se.Ia-Ft+za,oi=(cr=Ss.M)==0,Ks=cr>=Se.Va-1,Se.Aa==2&&mm(Se,Ss),Ss.uc)for(li=(cn=Se).D.M,t(cn.D.uc),Ss=cn.yb;Ss<cn.Hb;++Ss){ln=Ss,Ba=li;var Cn=(zn=(Hr=cn).D).Nb;xr=Hr.R;var zn=zn.wa[zn.Y+ln],Sa=Hr.sa,Ei=Hr.ta+16*Cn*xr+16*ln,Oo=zn.dd,kn=zn.tc;if(kn!=0)if(t(3<=kn),Hr.L==1)0<ln&&vc(Sa,Ei,xr,kn+4),zn.La&&Ci(Sa,Ei,xr,kn),0<Ba&&Gd(Sa,Ei,xr,kn+4),zn.La&&jm(Sa,Ei,xr,kn);else{var Cl=Hr.B,Kd=Hr.qa,oh=Hr.ra+8*Cn*Cl+8*ln,jc=Hr.Ha,Hr=Hr.Ia+8*Cn*Cl+8*ln;Cn=zn.ld,0<ln&&(Gx(Sa,Ei,xr,kn+4,Oo,Cn),Vd(Kd,oh,jc,Hr,Cl,kn+4,Oo,Cn)),zn.La&&(gc(Sa,Ei,xr,kn,Oo,Cn),ah(Kd,oh,jc,Hr,Cl,kn,Oo,Cn)),0<Ba&&(nh(Sa,Ei,xr,kn+4,Oo,Cn),bm(Kd,oh,jc,Hr,Cl,kn+4,Oo,Cn)),zn.La&&(Hd(Sa,Ei,xr,kn,Oo,Cn),Wd(Kd,oh,jc,Hr,Cl,kn,Oo,Cn))}}if(Se.ia&&alert("todo:DitherRow"),Ce.put!=null){if(Ss=16*cr,cr=16*(cr+1),oi?(Ce.y=Se.sa,Ce.O=Se.ta+br,Ce.f=Se.qa,Ce.N=Se.ra+za,Ce.ea=Se.Ha,Ce.W=Se.Ia+za):(Ss-=Bs,Ce.y=_t,Ce.O=ss,Ce.f=At,Ce.N=at,Ce.ea=ar,Ce.W=lr),Ks||(cr-=Bs),cr>Ce.o&&(cr=Ce.o),Ce.F=null,Ce.J=null,Se.Fa!=null&&0<Se.Fa.length&&Ss<cr&&(Ce.J=hm(Se,Ce,Ss,cr-Ss),Ce.F=Se.mb,Ce.F==null&&Ce.F.length==0)){st=Ie(Se,3,"Could not decode alpha data.");break e}Ss<Ce.j&&(Bs=Ce.j-Ss,Ss=Ce.j,t(!(1&Bs)),Ce.O+=Se.R*Bs,Ce.N+=Se.B*(Bs>>1),Ce.W+=Se.B*(Bs>>1),Ce.F!=null&&(Ce.J+=Ce.width*Bs)),Ss<cr&&(Ce.O+=Ce.v,Ce.N+=Ce.v>>1,Ce.W+=Ce.v>>1,Ce.F!=null&&(Ce.J+=Ce.v),Ce.ka=Ss-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=cr-Ss,st=Ce.put(Ce))}Ye+1!=Se.Ic||Ks||(n(Se.sa,Se.ta-ct,_t,ss+16*Se.R,ct),n(Se.qa,Se.ra-Ft,At,at+8*Se.B,Ft),n(Se.Ha,Se.Ia-Ft,ar,lr+8*Se.B,Ft))}if(!st)return Ie(Ae,6,"Output aborted.")}return 1}(m,b)),b.bc!=null&&b.bc(b),_&=1}return _?(m.cb=0,_):0}function Qs(m,b,_,L,q){q=m[b+_+32*L]+(q>>3),m[b+_+32*L]=-256&q?0>q?0:255:q}function nr(m,b,_,L,q,G){Qs(m,b,0,_,L+q),Qs(m,b,1,_,L+G),Qs(m,b,2,_,L-G),Qs(m,b,3,_,L-q)}function yr(m){return(20091*m>>16)+m}function Gi(m,b,_,L){var q,G=0,J=i(16);for(q=0;4>q;++q){var ee=m[b+0]+m[b+8],ie=m[b+0]-m[b+8],he=(35468*m[b+4]>>16)-yr(m[b+12]),Ne=yr(m[b+4])+(35468*m[b+12]>>16);J[G+0]=ee+Ne,J[G+1]=ie+he,J[G+2]=ie-he,J[G+3]=ee-Ne,G+=4,b++}for(q=G=0;4>q;++q)ee=(m=J[G+0]+4)+J[G+8],ie=m-J[G+8],he=(35468*J[G+4]>>16)-yr(J[G+12]),Qs(_,L,0,0,ee+(Ne=yr(J[G+4])+(35468*J[G+12]>>16))),Qs(_,L,1,0,ie+he),Qs(_,L,2,0,ie-he),Qs(_,L,3,0,ee-Ne),G++,L+=32}function $n(m,b,_,L){var q=m[b+0]+4,G=35468*m[b+4]>>16,J=yr(m[b+4]),ee=35468*m[b+1]>>16;nr(_,L,0,q+J,m=yr(m[b+1]),ee),nr(_,L,1,q+G,m,ee),nr(_,L,2,q-G,m,ee),nr(_,L,3,q-J,m,ee)}function Od(m,b,_,L,q){Gi(m,b,_,L),q&&Gi(m,b+16,_,L+4)}function Md(m,b,_,L){Nl(m,b+0,_,L,1),Nl(m,b+32,_,L+128,1)}function tm(m,b,_,L){var q;for(m=m[b+0]+4,q=0;4>q;++q)for(b=0;4>b;++b)Qs(_,L,b,q,m)}function qu(m,b,_,L){m[b+0]&&Na(m,b+0,_,L),m[b+16]&&Na(m,b+16,_,L+4),m[b+32]&&Na(m,b+32,_,L+128),m[b+48]&&Na(m,b+48,_,L+128+4)}function sm(m,b,_,L){var q,G=i(16);for(q=0;4>q;++q){var J=m[b+0+q]+m[b+12+q],ee=m[b+4+q]+m[b+8+q],ie=m[b+4+q]-m[b+8+q],he=m[b+0+q]-m[b+12+q];G[0+q]=J+ee,G[8+q]=J-ee,G[4+q]=he+ie,G[12+q]=he-ie}for(q=0;4>q;++q)J=(m=G[0+4*q]+3)+G[3+4*q],ee=G[1+4*q]+G[2+4*q],ie=G[1+4*q]-G[2+4*q],he=m-G[3+4*q],_[L+0]=J+ee>>3,_[L+16]=he+ie>>3,_[L+32]=J-ee>>3,_[L+48]=he-ie>>3,L+=64}function uc(m,b,_){var L,q=b-32,G=ii,J=255-m[q-1];for(L=0;L<_;++L){var ee,ie=G,he=J+m[b-1];for(ee=0;ee<_;++ee)m[b+ee]=ie[he+m[q+ee]];b+=32}}function Xb(m,b){uc(m,b,4)}function Qb(m,b){uc(m,b,8)}function e1(m,b){uc(m,b,16)}function yl(m,b){var _;for(_=0;16>_;++_)n(m,b+32*_,m,b-32,16)}function Vu(m,b){var _;for(_=16;0<_;--_)a(m,b,m[b-1],16),b+=32}function Hu(m,b,_){var L;for(L=0;16>L;++L)a(b,_+32*L,m,16)}function Rx(m,b){var _,L=16;for(_=0;16>_;++_)L+=m[b-1+32*_]+m[b+_-32];Hu(L>>5,m,b)}function ea(m,b){var _,L=8;for(_=0;16>_;++_)L+=m[b-1+32*_];Hu(L>>4,m,b)}function t1(m,b){var _,L=8;for(_=0;16>_;++_)L+=m[b+_-32];Hu(L>>4,m,b)}function Ix(m,b){Hu(128,m,b)}function cs(m,b,_){return m+2*b+_+2>>2}function s1(m,b){var _,L=b-32;for(L=new Uint8Array([cs(m[L-1],m[L+0],m[L+1]),cs(m[L+0],m[L+1],m[L+2]),cs(m[L+1],m[L+2],m[L+3]),cs(m[L+2],m[L+3],m[L+4])]),_=0;4>_;++_)n(m,b+32*_,L,0,L.length)}function r1(m,b){var _=m[b-1],L=m[b-1+32],q=m[b-1+64],G=m[b-1+96];Ee(m,b+0,16843009*cs(m[b-1-32],_,L)),Ee(m,b+32,16843009*cs(_,L,q)),Ee(m,b+64,16843009*cs(L,q,G)),Ee(m,b+96,16843009*cs(q,G,G))}function Io(m,b){var _,L=4;for(_=0;4>_;++_)L+=m[b+_-32]+m[b-1+32*_];for(L>>=3,_=0;4>_;++_)a(m,b+32*_,L,4)}function Fx(m,b){var _=m[b-1+0],L=m[b-1+32],q=m[b-1+64],G=m[b-1-32],J=m[b+0-32],ee=m[b+1-32],ie=m[b+2-32],he=m[b+3-32];m[b+0+96]=cs(L,q,m[b-1+96]),m[b+1+96]=m[b+0+64]=cs(_,L,q),m[b+2+96]=m[b+1+64]=m[b+0+32]=cs(G,_,L),m[b+3+96]=m[b+2+64]=m[b+1+32]=m[b+0+0]=cs(J,G,_),m[b+3+64]=m[b+2+32]=m[b+1+0]=cs(ee,J,G),m[b+3+32]=m[b+2+0]=cs(ie,ee,J),m[b+3+0]=cs(he,ie,ee)}function Dx(m,b){var _=m[b+1-32],L=m[b+2-32],q=m[b+3-32],G=m[b+4-32],J=m[b+5-32],ee=m[b+6-32],ie=m[b+7-32];m[b+0+0]=cs(m[b+0-32],_,L),m[b+1+0]=m[b+0+32]=cs(_,L,q),m[b+2+0]=m[b+1+32]=m[b+0+64]=cs(L,q,G),m[b+3+0]=m[b+2+32]=m[b+1+64]=m[b+0+96]=cs(q,G,J),m[b+3+32]=m[b+2+64]=m[b+1+96]=cs(G,J,ee),m[b+3+64]=m[b+2+96]=cs(J,ee,ie),m[b+3+96]=cs(ee,ie,ie)}function Wu(m,b){var _=m[b-1+0],L=m[b-1+32],q=m[b-1+64],G=m[b-1-32],J=m[b+0-32],ee=m[b+1-32],ie=m[b+2-32],he=m[b+3-32];m[b+0+0]=m[b+1+64]=G+J+1>>1,m[b+1+0]=m[b+2+64]=J+ee+1>>1,m[b+2+0]=m[b+3+64]=ee+ie+1>>1,m[b+3+0]=ie+he+1>>1,m[b+0+96]=cs(q,L,_),m[b+0+64]=cs(L,_,G),m[b+0+32]=m[b+1+96]=cs(_,G,J),m[b+1+32]=m[b+2+96]=cs(G,J,ee),m[b+2+32]=m[b+3+96]=cs(J,ee,ie),m[b+3+32]=cs(ee,ie,he)}function rm(m,b){var _=m[b+0-32],L=m[b+1-32],q=m[b+2-32],G=m[b+3-32],J=m[b+4-32],ee=m[b+5-32],ie=m[b+6-32],he=m[b+7-32];m[b+0+0]=_+L+1>>1,m[b+1+0]=m[b+0+64]=L+q+1>>1,m[b+2+0]=m[b+1+64]=q+G+1>>1,m[b+3+0]=m[b+2+64]=G+J+1>>1,m[b+0+32]=cs(_,L,q),m[b+1+32]=m[b+0+96]=cs(L,q,G),m[b+2+32]=m[b+1+96]=cs(q,G,J),m[b+3+32]=m[b+2+96]=cs(G,J,ee),m[b+3+64]=cs(J,ee,ie),m[b+3+96]=cs(ee,ie,he)}function n1(m,b){var _=m[b-1+0],L=m[b-1+32],q=m[b-1+64],G=m[b-1+96];m[b+0+0]=_+L+1>>1,m[b+2+0]=m[b+0+32]=L+q+1>>1,m[b+2+32]=m[b+0+64]=q+G+1>>1,m[b+1+0]=cs(_,L,q),m[b+3+0]=m[b+1+32]=cs(L,q,G),m[b+3+32]=m[b+1+64]=cs(q,G,G),m[b+3+64]=m[b+2+64]=m[b+0+96]=m[b+1+96]=m[b+2+96]=m[b+3+96]=G}function a1(m,b){var _=m[b-1+0],L=m[b-1+32],q=m[b-1+64],G=m[b-1+96],J=m[b-1-32],ee=m[b+0-32],ie=m[b+1-32],he=m[b+2-32];m[b+0+0]=m[b+2+32]=_+J+1>>1,m[b+0+32]=m[b+2+64]=L+_+1>>1,m[b+0+64]=m[b+2+96]=q+L+1>>1,m[b+0+96]=G+q+1>>1,m[b+3+0]=cs(ee,ie,he),m[b+2+0]=cs(J,ee,ie),m[b+1+0]=m[b+3+32]=cs(_,J,ee),m[b+1+32]=m[b+3+64]=cs(L,_,J),m[b+1+64]=m[b+3+96]=cs(q,L,_),m[b+1+96]=cs(G,q,L)}function i1(m,b){var _;for(_=0;8>_;++_)n(m,b+32*_,m,b-32,8)}function nm(m,b){var _;for(_=0;8>_;++_)a(m,b,m[b-1],8),b+=32}function $d(m,b,_){var L;for(L=0;8>L;++L)a(b,_+32*L,m,8)}function hc(m,b){var _,L=8;for(_=0;8>_;++_)L+=m[b+_-32]+m[b-1+32*_];$d(L>>4,m,b)}function o1(m,b){var _,L=4;for(_=0;8>_;++_)L+=m[b+_-32];$d(L>>3,m,b)}function Bd(m,b){var _,L=4;for(_=0;8>_;++_)L+=m[b-1+32*_];$d(L>>3,m,b)}function am(m,b){$d(128,m,b)}function Gu(m,b,_){var L=m[b-_],q=m[b+0],G=3*(q-L)+f1[1020+m[b-2*_]-m[b+_]],J=Yx[112+(G+4>>3)];m[b-_]=ii[255+L+Yx[112+(G+3>>3)]],m[b+0]=ii[255+q-J]}function Ox(m,b,_,L){var q=m[b+0],G=m[b+_];return Ai[255+m[b-2*_]-m[b-_]]>L||Ai[255+G-q]>L}function Mx(m,b,_,L){return 4*Ai[255+m[b-_]-m[b+0]]+Ai[255+m[b-2*_]-m[b+_]]<=L}function $x(m,b,_,L,q){var G=m[b-3*_],J=m[b-2*_],ee=m[b-_],ie=m[b+0],he=m[b+_],Ne=m[b+2*_],Oe=m[b+3*_];return 4*Ai[255+ee-ie]+Ai[255+J-he]>L?0:Ai[255+m[b-4*_]-G]<=q&&Ai[255+G-J]<=q&&Ai[255+J-ee]<=q&&Ai[255+Oe-Ne]<=q&&Ai[255+Ne-he]<=q&&Ai[255+he-ie]<=q}function Bx(m,b,_,L){var q=2*L+1;for(L=0;16>L;++L)Mx(m,b+L,_,q)&&Gu(m,b+L,_)}function Fo(m,b,_,L){var q=2*L+1;for(L=0;16>L;++L)Mx(m,b+L*_,1,q)&&Gu(m,b+L*_,1)}function bl(m,b,_,L){var q;for(q=3;0<q;--q)Bx(m,b+=4*_,_,L)}function l1(m,b,_,L){var q;for(q=3;0<q;--q)Fo(m,b+=4,_,L)}function fc(m,b,_,L,q,G,J,ee){for(G=2*G+1;0<q--;){if($x(m,b,_,G,J))if(Ox(m,b,_,ee))Gu(m,b,_);else{var ie=m,he=b,Ne=_,Oe=ie[he-2*Ne],Me=ie[he-Ne],Ae=ie[he+0],it=ie[he+Ne],Ye=ie[he+2*Ne],Se=27*(st=f1[1020+3*(Ae-Me)+f1[1020+Oe-it]])+63>>7,Ce=18*st+63>>7,st=9*st+63>>7;ie[he-3*Ne]=ii[255+ie[he-3*Ne]+st],ie[he-2*Ne]=ii[255+Oe+Ce],ie[he-Ne]=ii[255+Me+Se],ie[he+0]=ii[255+Ae-Se],ie[he+Ne]=ii[255+it-Ce],ie[he+2*Ne]=ii[255+Ye-st]}b+=L}}function Ki(m,b,_,L,q,G,J,ee){for(G=2*G+1;0<q--;){if($x(m,b,_,G,J))if(Ox(m,b,_,ee))Gu(m,b,_);else{var ie=m,he=b,Ne=_,Oe=ie[he-Ne],Me=ie[he+0],Ae=ie[he+Ne],it=Yx[112+((Ye=3*(Me-Oe))+4>>3)],Ye=Yx[112+(Ye+3>>3)],Se=it+1>>1;ie[he-2*Ne]=ii[255+ie[he-2*Ne]+Se],ie[he-Ne]=ii[255+Oe+Ye],ie[he+0]=ii[255+Me-it],ie[he+Ne]=ii[255+Ae-Se]}b+=L}}function im(m,b,_,L,q,G){fc(m,b,_,1,16,L,q,G)}function zd(m,b,_,L,q,G){fc(m,b,1,_,16,L,q,G)}function c1(m,b,_,L,q,G){var J;for(J=3;0<J;--J)Ki(m,b+=4*_,_,1,16,L,q,G)}function Ku(m,b,_,L,q,G){var J;for(J=3;0<J;--J)Ki(m,b+=4,1,_,16,L,q,G)}function d1(m,b,_,L,q,G,J,ee){fc(m,b,q,1,8,G,J,ee),fc(_,L,q,1,8,G,J,ee)}function om(m,b,_,L,q,G,J,ee){fc(m,b,1,q,8,G,J,ee),fc(_,L,1,q,8,G,J,ee)}function lm(m,b,_,L,q,G,J,ee){Ki(m,b+4*q,q,1,8,G,J,ee),Ki(_,L+4*q,q,1,8,G,J,ee)}function zx(m,b,_,L,q,G,J,ee){Ki(m,b+4,1,q,8,G,J,ee),Ki(_,L+4,1,q,8,G,J,ee)}function Yu(){this.ba=new Kt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ts,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function cm(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function dm(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ux(){this.ua=0,this.Wa=new K,this.vb=new K,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new C}function u1(){this.xb=this.a=0,this.l=new Ni,this.ca=new Kt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new A,this.Pb=0,this.wd=new A,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ux,this.ab=0,this.gc=o(4,dm),this.Oc=0}function Ju(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ni,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ud(m,b,_,L,q,G,J){for(m=m==null?0:m[b+0],b=0;b<J;++b)q[G+b]=m+_[L+b]&255,m=q[G+b]}function um(m,b,_,L,q,G,J){var ee;if(m==null)Ud(null,null,_,L,q,G,J);else for(ee=0;ee<J;++ee)q[G+ee]=m[b+ee]+_[L+ee]&255}function mc(m,b,_,L,q,G,J){if(m==null)Ud(null,null,_,L,q,G,J);else{var ee,ie=m[b+0],he=ie,Ne=ie;for(ee=0;ee<J;++ee)he=Ne+(ie=m[b+ee])-he,Ne=_[L+ee]+(-256&he?0>he?0:255:he)&255,he=ie,q[G+ee]=Ne}}function hm(m,b,_,L){var q=b.width,G=b.o;if(t(m!=null&&b!=null),0>_||0>=L||_+L>G)return null;if(!m.Cc){if(m.ga==null){var J;if(m.ga=new Ju,(J=m.ga==null)||(J=b.width*b.o,t(m.Gb.length==0),m.Gb=i(J),m.Uc=0,m.Gb==null?J=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,J=1),J=!J),!J){J=m.ga;var ee=m.Fa,ie=m.P,he=m.qc,Ne=m.mb,Oe=m.nb,Me=ie+1,Ae=he-1,it=J.l;if(t(ee!=null&&Ne!=null&&b!=null),bc[0]=null,bc[1]=Ud,bc[2]=um,bc[3]=mc,J.ca=Ne,J.tb=Oe,J.c=b.width,J.i=b.height,t(0<J.c&&0<J.i),1>=he)b=0;else if(J.$a=ee[ie+0]>>0&3,J.Z=ee[ie+0]>>2&3,J.Lc=ee[ie+0]>>4&3,ie=ee[ie+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||ie)b=0;else if(it.put=xn,it.ac=vr,it.bc=qe,it.ma=J,it.width=b.width,it.height=b.height,it.Da=b.Da,it.v=b.v,it.va=b.va,it.j=b.j,it.o=b.o,J.$a)e:{t(J.$a==1),b=kt();t:for(;;){if(b==null){b=0;break e}if(t(J!=null),J.mc=b,b.c=J.c,b.i=J.i,b.l=J.l,b.l.ma=J,b.l.width=J.c,b.l.height=J.i,b.a=0,U(b.m,ee,Me,Ae),!Vt(J.c,J.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&Mr(b.s)?(J.ic=1,ee=b.c*b.i,b.Ta=null,b.Ua=0,b.V=i(ee),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(J.ic=0,b=fs(b,J.c)),!b))break t;b=1;break e}J.mc=null,b=0}else b=Ae>=J.c*J.i;J=!b}if(J)return null;m.ga.Lc!=1?m.Ga=0:L=G-_}t(m.ga!=null),t(_+L<=G);e:{if(b=(ee=m.ga).c,G=ee.l.o,ee.$a==0){if(Me=m.rc,Ae=m.Vc,it=m.Fa,ie=m.P+1+_*b,he=m.mb,Ne=m.nb+_*b,t(ie<=m.P+m.qc),ee.Z!=0)for(t(bc[ee.Z]!=null),J=0;J<L;++J)bc[ee.Z](Me,Ae,it,ie,he,Ne,b),Me=he,Ae=Ne,Ne+=b,ie+=b;else for(J=0;J<L;++J)n(he,Ne,it,ie,b),Me=he,Ae=Ne,Ne+=b,ie+=b;m.rc=Me,m.Vc=Ae}else{if(t(ee.mc!=null),b=_+L,t((J=ee.mc)!=null),t(b<=J.i),J.C>=b)b=1;else if(ee.ic||Fe(),ee.ic){ee=J.V,Me=J.Ba,Ae=J.c;var Ye=J.i,Se=(it=1,ie=J.$/Ae,he=J.$%Ae,Ne=J.m,Oe=J.s,J.$),Ce=Ae*Ye,st=Ae*b,ct=Oe.wc,at=Se<st?us(Oe,he,ie):null;t(Se<=Ce),t(b<=Ye),t(Mr(Oe));t:for(;;){for(;!Ne.h&&Se<st;){if(he&ct||(at=us(Oe,he,ie)),t(at!=null),te(Ne),256>(Ye=Jt(at.G[0],at.H[0],Ne)))ee[Me+Se]=Ye,++Se,++he>=Ae&&(he=0,++ie<=b&&!(ie%16)&&Sn(J,ie));else{if(!(280>Ye)){it=0;break t}Ye=mt(Ye-256,Ne);var Ft,_t=Jt(at.G[4],at.H[4],Ne);if(te(Ne),!(Se>=(_t=Wt(Ae,_t=mt(_t,Ne)))&&Ce-Se>=Ye)){it=0;break t}for(Ft=0;Ft<Ye;++Ft)ee[Me+Se+Ft]=ee[Me+Se+Ft-_t];for(Se+=Ye,he+=Ye;he>=Ae;)he-=Ae,++ie<=b&&!(ie%16)&&Sn(J,ie);Se<st&&he&ct&&(at=us(Oe,he,ie))}t(Ne.h==M(Ne))}Sn(J,ie>b?b:ie);break t}!it||Ne.h&&Se<Ce?(it=0,J.a=Ne.h?5:3):J.$=Se,b=it}else b=Pe(J,J.V,J.Ba,J.c,J.i,b,ir);if(!b){L=0;break e}}_+L>=G&&(m.Cc=1),L=1}if(!L)return null;if(m.Cc&&((L=m.ga)!=null&&(L.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+_*q}function S(m,b,_,L,q,G){for(;0<q--;){var J,ee=m,ie=b+(_?1:0),he=m,Ne=b+(_?0:3);for(J=0;J<L;++J){var Oe=he[Ne+4*J];Oe!=255&&(Oe*=32897,ee[ie+4*J+0]=ee[ie+4*J+0]*Oe>>23,ee[ie+4*J+1]=ee[ie+4*J+1]*Oe>>23,ee[ie+4*J+2]=ee[ie+4*J+2]*Oe>>23)}b+=G}}function V(m,b,_,L,q){for(;0<L--;){var G;for(G=0;G<_;++G){var J=m[b+2*G+0],ee=15&(he=m[b+2*G+1]),ie=4369*ee,he=(240&he|he>>4)*ie>>16;m[b+2*G+0]=(240&J|J>>4)*ie>>16&240|(15&J|J<<4)*ie>>16>>4&15,m[b+2*G+1]=240&he|ee}b+=q}}function pe(m,b,_,L,q,G,J,ee){var ie,he,Ne=255;for(he=0;he<q;++he){for(ie=0;ie<L;++ie){var Oe=m[b+ie];G[J+4*ie]=Oe,Ne&=Oe}b+=_,J+=ee}return Ne!=255}function we(m,b,_,L,q){var G;for(G=0;G<q;++G)_[L+G]=m[b+G]>>8}function Fe(){ki=S,Sr=V,_r=pe,Xr=we}function et(m,b,_){T[m]=function(L,q,G,J,ee,ie,he,Ne,Oe,Me,Ae,it,Ye,Se,Ce,st,ct){var at,Ft=ct-1>>1,_t=ee[ie+0]|he[Ne+0]<<16,ss=Oe[Me+0]|Ae[it+0]<<16;t(L!=null);var At=3*_t+ss+131074>>2;for(b(L[q+0],255&At,At>>16,Ye,Se),G!=null&&(At=3*ss+_t+131074>>2,b(G[J+0],255&At,At>>16,Ce,st)),at=1;at<=Ft;++at){var ar=ee[ie+at]|he[Ne+at]<<16,lr=Oe[Me+at]|Ae[it+at]<<16,Ks=_t+ar+ss+lr+524296,Bs=Ks+2*(ar+ss)>>3;At=Bs+_t>>1,_t=(Ks=Ks+2*(_t+lr)>>3)+ar>>1,b(L[q+2*at-1],255&At,At>>16,Ye,Se+(2*at-1)*_),b(L[q+2*at-0],255&_t,_t>>16,Ye,Se+(2*at-0)*_),G!=null&&(At=Ks+ss>>1,_t=Bs+lr>>1,b(G[J+2*at-1],255&At,At>>16,Ce,st+(2*at-1)*_),b(G[J+2*at+0],255&_t,_t>>16,Ce,st+(2*at+0)*_)),_t=ar,ss=lr}1&ct||(At=3*_t+ss+131074>>2,b(L[q+ct-1],255&At,At>>16,Ye,Se+(ct-1)*_),G!=null&&(At=3*ss+_t+131074>>2,b(G[J+ct-1],255&At,At>>16,Ce,st+(ct-1)*_)))}}function dt(){Pi[Jx]=zI,Pi[Zx]=r_,Pi[XS]=UI,Pi[Xx]=n_,Pi[Qx]=a_,Pi[m1]=i_,Pi[QS]=qI,Pi[p1]=r_,Pi[x1]=n_,Pi[eg]=a_,Pi[g1]=i_}function Rt(m){return m&-16384?0>m?0:255:m>>VI}function Gt(m,b){return Rt((19077*m>>8)+(26149*b>>8)-14234)}function ys(m,b,_){return Rt((19077*m>>8)-(6419*b>>8)-(13320*_>>8)+8708)}function ms(m,b){return Rt((19077*m>>8)+(33050*b>>8)-17685)}function qs(m,b,_,L,q){L[q+0]=Gt(m,_),L[q+1]=ys(m,b,_),L[q+2]=ms(m,b)}function $r(m,b,_,L,q){L[q+0]=ms(m,b),L[q+1]=ys(m,b,_),L[q+2]=Gt(m,_)}function Vr(m,b,_,L,q){var G=ys(m,b,_);b=G<<3&224|ms(m,b)>>3,L[q+0]=248&Gt(m,_)|G>>5,L[q+1]=b}function on(m,b,_,L,q){var G=240&ms(m,b)|15;L[q+0]=240&Gt(m,_)|ys(m,b,_)>>4,L[q+1]=G}function ta(m,b,_,L,q){L[q+0]=255,qs(m,b,_,L,q+1)}function _n(m,b,_,L,q){$r(m,b,_,L,q),L[q+3]=255}function Yi(m,b,_,L,q){qs(m,b,_,L,q),L[q+3]=255}function ai(m,b){return 0>m?0:m>b?b:m}function Do(m,b,_){T[m]=function(L,q,G,J,ee,ie,he,Ne,Oe){for(var Me=Ne+(-2&Oe)*_;Ne!=Me;)b(L[q+0],G[J+0],ee[ie+0],he,Ne),b(L[q+1],G[J+0],ee[ie+0],he,Ne+_),q+=2,++J,++ie,Ne+=2*_;1&Oe&&b(L[q+0],G[J+0],ee[ie+0],he,Ne)}}function qx(m,b,_){return _==0?m==0?b==0?6:5:b==0?4:0:_}function fm(m,b,_,L,q){switch(m>>>30){case 3:Nl(b,_,L,q,0);break;case 2:Zr(b,_,L,q);break;case 1:Na(b,_,L,q)}}function mm(m,b){var _,L,q=b.M,G=b.Nb,J=m.oc,ee=m.pc+40,ie=m.oc,he=m.pc+584,Ne=m.oc,Oe=m.pc+600;for(_=0;16>_;++_)J[ee+32*_-1]=129;for(_=0;8>_;++_)ie[he+32*_-1]=129,Ne[Oe+32*_-1]=129;for(0<q?J[ee-1-32]=ie[he-1-32]=Ne[Oe-1-32]=129:(a(J,ee-32-1,127,21),a(ie,he-32-1,127,9),a(Ne,Oe-32-1,127,9)),L=0;L<m.za;++L){var Me=b.ya[b.aa+L];if(0<L){for(_=-1;16>_;++_)n(J,ee+32*_-4,J,ee+32*_+12,4);for(_=-1;8>_;++_)n(ie,he+32*_-4,ie,he+32*_+4,4),n(Ne,Oe+32*_-4,Ne,Oe+32*_+4,4)}var Ae=m.Gd,it=m.Hd+L,Ye=Me.ad,Se=Me.Hc;if(0<q&&(n(J,ee-32,Ae[it].y,0,16),n(ie,he-32,Ae[it].f,0,8),n(Ne,Oe-32,Ae[it].ea,0,8)),Me.Za){var Ce=J,st=ee-32+16;for(0<q&&(L>=m.za-1?a(Ce,st,Ae[it].y[15],4):n(Ce,st,Ae[it+1].y,0,4)),_=0;4>_;_++)Ce[st+128+_]=Ce[st+256+_]=Ce[st+384+_]=Ce[st+0+_];for(_=0;16>_;++_,Se<<=2)Ce=J,st=ee+l_[_],Ji[Me.Ob[_]](Ce,st),fm(Se,Ye,16*+_,Ce,st)}else if(Ce=qx(L,q,Me.Ob[0]),yc[Ce](J,ee),Se!=0)for(_=0;16>_;++_,Se<<=2)fm(Se,Ye,16*+_,J,ee+l_[_]);for(_=Me.Gc,Ce=qx(L,q,Me.Dd),_l[Ce](ie,he),_l[Ce](Ne,Oe),Se=Ye,Ce=ie,st=he,255&(Me=_>>0)&&(170&Me?ym(Se,256,Ce,st):_i(Se,256,Ce,st)),Me=Ne,Se=Oe,255&(_>>=8)&&(170&_?ym(Ye,320,Me,Se):_i(Ye,320,Me,Se)),q<m.Ub-1&&(n(Ae[it].y,0,J,ee+480,16),n(Ae[it].f,0,ie,he+224,8),n(Ae[it].ea,0,Ne,Oe+224,8)),_=8*G*m.B,Ae=m.sa,it=m.ta+16*L+16*G*m.R,Ye=m.qa,Me=m.ra+8*L+_,Se=m.Ha,Ce=m.Ia+8*L+_,_=0;16>_;++_)n(Ae,it+_*m.R,J,ee+32*_,16);for(_=0;8>_;++_)n(Ye,Me+_*m.B,ie,he+32*_,8),n(Se,Ce+_*m.B,Ne,Oe+32*_,8)}}function Zu(m,b,_,L,q,G,J,ee,ie){var he=[0],Ne=[0],Oe=0,Me=ie!=null?ie.kd:0,Ae=ie??new cm;if(m==null||12>_)return 7;Ae.data=m,Ae.w=b,Ae.ha=_,b=[b],_=[_],Ae.gb=[Ae.gb];e:{var it=b,Ye=_,Se=Ae.gb;if(t(m!=null),t(Ye!=null),t(Se!=null),Se[0]=0,12<=Ye[0]&&!r(m,it[0],"RIFF")){if(r(m,it[0]+8,"WEBP")){Se=3;break e}var Ce=Ge(m,it[0]+4);if(12>Ce||4294967286<Ce){Se=3;break e}if(Me&&Ce>Ye[0]-8){Se=7;break e}Se[0]=Ce,it[0]+=12,Ye[0]-=12}Se=0}if(Se!=0)return Se;for(Ce=0<Ae.gb[0],_=_[0];;){e:{var st=m;Ye=b,Se=_;var ct=he,at=Ne,Ft=it=[0];if((At=Oe=[Oe])[0]=0,8>Se[0])Se=7;else{if(!r(st,Ye[0],"VP8X")){if(Ge(st,Ye[0]+4)!=10){Se=3;break e}if(18>Se[0]){Se=7;break e}var _t=Ge(st,Ye[0]+8),ss=1+Be(st,Ye[0]+12);if(2147483648<=ss*(st=1+Be(st,Ye[0]+15))){Se=3;break e}Ft!=null&&(Ft[0]=_t),ct!=null&&(ct[0]=ss),at!=null&&(at[0]=st),Ye[0]+=18,Se[0]-=18,At[0]=1}Se=0}}if(Oe=Oe[0],it=it[0],Se!=0)return Se;if(Ye=!!(2&it),!Ce&&Oe)return 3;if(G!=null&&(G[0]=!!(16&it)),J!=null&&(J[0]=Ye),ee!=null&&(ee[0]=0),J=he[0],it=Ne[0],Oe&&Ye&&ie==null){Se=0;break}if(4>_){Se=7;break}if(Ce&&Oe||!Ce&&!Oe&&!r(m,b[0],"ALPH")){_=[_],Ae.na=[Ae.na],Ae.P=[Ae.P],Ae.Sa=[Ae.Sa];e:{_t=m,Se=b,Ce=_;var At=Ae.gb;ct=Ae.na,at=Ae.P,Ft=Ae.Sa,ss=22,t(_t!=null),t(Ce!=null),st=Se[0];var ar=Ce[0];for(t(ct!=null),t(Ft!=null),ct[0]=null,at[0]=null,Ft[0]=0;;){if(Se[0]=st,Ce[0]=ar,8>ar){Se=7;break e}var lr=Ge(_t,st+4);if(4294967286<lr){Se=3;break e}var Ks=8+lr+1&-2;if(ss+=Ks,0<At&&ss>At){Se=3;break e}if(!r(_t,st,"VP8 ")||!r(_t,st,"VP8L")){Se=0;break e}if(ar[0]<Ks){Se=7;break e}r(_t,st,"ALPH")||(ct[0]=_t,at[0]=st+8,Ft[0]=lr),st+=Ks,ar-=Ks}}if(_=_[0],Ae.na=Ae.na[0],Ae.P=Ae.P[0],Ae.Sa=Ae.Sa[0],Se!=0)break}_=[_],Ae.Ja=[Ae.Ja],Ae.xa=[Ae.xa];e:if(At=m,Se=b,Ce=_,ct=Ae.gb[0],at=Ae.Ja,Ft=Ae.xa,_t=Se[0],st=!r(At,_t,"VP8 "),ss=!r(At,_t,"VP8L"),t(At!=null),t(Ce!=null),t(at!=null),t(Ft!=null),8>Ce[0])Se=7;else{if(st||ss){if(At=Ge(At,_t+4),12<=ct&&At>ct-12){Se=3;break e}if(Me&&At>Ce[0]-8){Se=7;break e}at[0]=At,Se[0]+=8,Ce[0]-=8,Ft[0]=ss}else Ft[0]=5<=Ce[0]&&At[_t+0]==47&&!(At[_t+4]>>5),at[0]=Ce[0];Se=0}if(_=_[0],Ae.Ja=Ae.Ja[0],Ae.xa=Ae.xa[0],b=b[0],Se!=0)break;if(4294967286<Ae.Ja)return 3;if(ee==null||Ye||(ee[0]=Ae.xa?2:1),J=[J],it=[it],Ae.xa){if(5>_){Se=7;break}ee=J,Me=it,Ye=G,m==null||5>_?m=0:5<=_&&m[b+0]==47&&!(m[b+4]>>5)?(Ce=[0],At=[0],ct=[0],U(at=new A,m,b,_),Te(at,Ce,At,ct)?(ee!=null&&(ee[0]=Ce[0]),Me!=null&&(Me[0]=At[0]),Ye!=null&&(Ye[0]=ct[0]),m=1):m=0):m=0}else{if(10>_){Se=7;break}ee=it,m==null||10>_||!Je(m,b+3,_-3)?m=0:(Me=m[b+0]|m[b+1]<<8|m[b+2]<<16,Ye=16383&(m[b+7]<<8|m[b+6]),m=16383&(m[b+9]<<8|m[b+8]),1&Me||3<(Me>>1&7)||!(Me>>4&1)||Me>>5>=Ae.Ja||!Ye||!m?m=0:(J&&(J[0]=Ye),ee&&(ee[0]=m),m=1))}if(!m||(J=J[0],it=it[0],Oe&&(he[0]!=J||Ne[0]!=it)))return 3;ie!=null&&(ie[0]=Ae,ie.offset=b-ie.w,t(4294967286>b-ie.w),t(ie.offset==ie.ha-_));break}return Se==0||Se==7&&Oe&&ie==null?(G!=null&&(G[0]|=Ae.na!=null&&0<Ae.na.length),L!=null&&(L[0]=J),q!=null&&(q[0]=it),0):Se}function pm(m,b,_){var L=b.width,q=b.height,G=0,J=0,ee=L,ie=q;if(b.Da=m!=null&&0<m.Da,b.Da&&(ee=m.cd,ie=m.bd,G=m.v,J=m.j,11>_||(G&=-2,J&=-2),0>G||0>J||0>=ee||0>=ie||G+ee>L||J+ie>q))return 0;if(b.v=G,b.j=J,b.va=G+ee,b.o=J+ie,b.U=ee,b.T=ie,b.da=m!=null&&0<m.da,b.da){if(!He(ee,ie,_=[m.ib],G=[m.hb]))return 0;b.ib=_[0],b.hb=G[0]}return b.ob=m!=null&&m.ob,b.Kb=m==null||!m.Sd,b.da&&(b.ob=b.ib<3*L/4&&b.hb<3*q/4,b.Kb=0),1}function xm(m){if(m==null)return 2;if(11>m.S){var b=m.f.RGBA;b.fb+=(m.height-1)*b.A,b.A=-b.A}else b=m.f.kb,m=m.height,b.O+=(m-1)*b.fa,b.fa=-b.fa,b.N+=(m-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(m-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(m-1)*b.lb,b.lb=-b.lb);return 0}function Xu(m,b,_,L){if(L==null||0>=m||0>=b)return 2;if(_!=null){if(_.Da){var q=_.cd,G=_.bd,J=-2&_.v,ee=-2&_.j;if(0>J||0>ee||0>=q||0>=G||J+q>m||ee+G>b)return 2;m=q,b=G}if(_.da){if(!He(m,b,q=[_.ib],G=[_.hb]))return 2;m=q[0],b=G[0]}}L.width=m,L.height=b;e:{var ie=L.width,he=L.height;if(m=L.S,0>=ie||0>=he||!(m>=Jx&&13>m))m=2;else{if(0>=L.Rd&&L.sd==null){J=G=q=b=0;var Ne=(ee=ie*c_[m])*he;if(11>m||(G=(he+1)/2*(b=(ie+1)/2),m==12&&(J=(q=ie)*he)),(he=i(Ne+2*G+J))==null){m=1;break e}L.sd=he,11>m?((ie=L.f.RGBA).eb=he,ie.fb=0,ie.A=ee,ie.size=Ne):((ie=L.f.kb).y=he,ie.O=0,ie.fa=ee,ie.Fd=Ne,ie.f=he,ie.N=0+Ne,ie.Ab=b,ie.Cd=G,ie.ea=he,ie.W=0+Ne+G,ie.Db=b,ie.Ed=G,m==12&&(ie.F=he,ie.J=0+Ne+2*G),ie.Tc=J,ie.lb=q)}if(b=1,q=L.S,G=L.width,J=L.height,q>=Jx&&13>q)if(11>q)m=L.f.RGBA,b&=(ee=Math.abs(m.A))*(J-1)+G<=m.size,b&=ee>=G*c_[q],b&=m.eb!=null;else{m=L.f.kb,ee=(G+1)/2,Ne=(J+1)/2,ie=Math.abs(m.fa),he=Math.abs(m.Ab);var Oe=Math.abs(m.Db),Me=Math.abs(m.lb),Ae=Me*(J-1)+G;b&=ie*(J-1)+G<=m.Fd,b&=he*(Ne-1)+ee<=m.Cd,b=(b&=Oe*(Ne-1)+ee<=m.Ed)&ie>=G&he>=ee&Oe>=ee,b&=m.y!=null,b&=m.f!=null,b&=m.ea!=null,q==12&&(b&=Me>=G,b&=Ae<=m.Tc,b&=m.F!=null)}else b=0;m=b?0:2}}return m!=0||_!=null&&_.fd&&(m=xm(L)),m}var Bn=64,Qu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],eh=24,th=32,gm=8,Ma=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];se("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(m){return m},T.Predictor2=function(m,b,_){return b[_+0]},T.Predictor3=function(m,b,_){return b[_+1]},T.Predictor4=function(m,b,_){return b[_-1]},T.Predictor5=function(m,b,_){return ne(ne(m,b[_+1]),b[_+0])},T.Predictor6=function(m,b,_){return ne(m,b[_-1])},T.Predictor7=function(m,b,_){return ne(m,b[_+0])},T.Predictor8=function(m,b,_){return ne(b[_-1],b[_+0])},T.Predictor9=function(m,b,_){return ne(b[_+0],b[_+1])},T.Predictor10=function(m,b,_){return ne(ne(m,b[_-1]),ne(b[_+0],b[_+1]))},T.Predictor11=function(m,b,_){var L=b[_+0];return 0>=Y(L>>24&255,m>>24&255,(b=b[_-1])>>24&255)+Y(L>>16&255,m>>16&255,b>>16&255)+Y(L>>8&255,m>>8&255,b>>8&255)+Y(255&L,255&m,255&b)?L:m},T.Predictor12=function(m,b,_){var L=b[_+0];return(ye((m>>24&255)+(L>>24&255)-((b=b[_-1])>>24&255))<<24|ye((m>>16&255)+(L>>16&255)-(b>>16&255))<<16|ye((m>>8&255)+(L>>8&255)-(b>>8&255))<<8|ye((255&m)+(255&L)-(255&b)))>>>0},T.Predictor13=function(m,b,_){var L=b[_-1];return(je((m=ne(m,b[_+0]))>>24&255,L>>24&255)<<24|je(m>>16&255,L>>16&255)<<16|je(m>>8&255,L>>8&255)<<8|je(m>>0&255,L>>0&255))>>>0};var h1=T.PredictorAdd0;T.PredictorAdd1=Re,se("Predictor2","PredictorAdd2"),se("Predictor3","PredictorAdd3"),se("Predictor4","PredictorAdd4"),se("Predictor5","PredictorAdd5"),se("Predictor6","PredictorAdd6"),se("Predictor7","PredictorAdd7"),se("Predictor8","PredictorAdd8"),se("Predictor9","PredictorAdd9"),se("Predictor10","PredictorAdd10"),se("Predictor11","PredictorAdd11"),se("Predictor12","PredictorAdd12"),se("Predictor13","PredictorAdd13");var vm=T.PredictorAdd2;fe("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),fe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Vx,Si=T.ColorIndexInverseTransform,sh=T.MapARGB,Hx=T.VP8LColorIndexInverseTransformAlpha,Wx=T.MapAlpha,pc=T.VP8LPredictorsAdd=[];pc.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var qd,$a,wa,xc,jl,wl,rh,Nl,Zr,ym,Na,_i,nh,Gx,bm,Vd,Hd,gc,Wd,ah,Gd,vc,jm,Ci,ki,Sr,_r,Xr,gn=i(511),Sl=i(2041),wm=i(225),ih=i(767),Kx=0,f1=Sl,Yx=wm,ii=ih,Ai=gn,Jx=0,Zx=1,XS=2,Xx=3,Qx=4,m1=5,QS=6,p1=7,x1=8,eg=9,g1=10,kI=[2,3,7],AI=[3,3,11],e_=[280,256,256,256,40],PI=[0,1,1,1,0],EI=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],LI=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],TI=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],RI=8,v1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],y1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Nm=null,II=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],FI=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],t_=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],DI=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],OI=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],MI=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$I=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],yc=[],Ji=[],_l=[],BI=1,s_=2,bc=[],Pi=[];et("UpsampleRgbLinePair",qs,3),et("UpsampleBgrLinePair",$r,3),et("UpsampleRgbaLinePair",Yi,4),et("UpsampleBgraLinePair",_n,4),et("UpsampleArgbLinePair",ta,4),et("UpsampleRgba4444LinePair",on,2),et("UpsampleRgb565LinePair",Vr,2);var zI=T.UpsampleRgbLinePair,UI=T.UpsampleBgrLinePair,r_=T.UpsampleRgbaLinePair,n_=T.UpsampleBgraLinePair,a_=T.UpsampleArgbLinePair,i_=T.UpsampleRgba4444LinePair,qI=T.UpsampleRgb565LinePair,tg=16,sg=1<<tg-1,Sm=-227,b1=482,VI=6,o_=0,HI=i(256),WI=i(256),GI=i(256),KI=i(256),YI=i(b1-Sm),JI=i(b1-Sm);Do("YuvToRgbRow",qs,3),Do("YuvToBgrRow",$r,3),Do("YuvToRgbaRow",Yi,4),Do("YuvToBgraRow",_n,4),Do("YuvToArgbRow",ta,4),Do("YuvToRgba4444Row",on,2),Do("YuvToRgb565Row",Vr,2);var l_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rg=[0,2,8],ZI=[8,7,6,4,4,2,2,2,1,1,1,1],XI=1;this.WebPDecodeRGBA=function(m,b,_,L,q){var G=Zx,J=new Yu,ee=new Kt;J.ba=ee,ee.S=G,ee.width=[ee.width],ee.height=[ee.height];var ie=ee.width,he=ee.height,Ne=new Ns;if(Ne==null||m==null)var Oe=2;else t(Ne!=null),Oe=Zu(m,b,_,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(Oe!=0?ie=0:(ie!=null&&(ie[0]=Ne.width[0]),he!=null&&(he[0]=Ne.height[0]),ie=1),ie){ee.width=ee.width[0],ee.height=ee.height[0],L!=null&&(L[0]=ee.width),q!=null&&(q[0]=ee.height);e:{if(L=new Ni,(q=new cm).data=m,q.w=b,q.ha=_,q.kd=1,b=[0],t(q!=null),((m=Zu(q.data,q.w,q.ha,null,null,null,b,null,q))==0||m==7)&&b[0]&&(m=4),(b=m)==0){if(t(J!=null),L.data=q.data,L.w=q.w+q.offset,L.ha=q.ha-q.offset,L.put=xn,L.ac=vr,L.bc=qe,L.ma=J,q.xa){if((m=kt())==null){J=1;break e}if(function(Me,Ae){var it=[0],Ye=[0],Se=[0];t:for(;;){if(Me==null)return 0;if(Ae==null)return Me.a=2,0;if(Me.l=Ae,Me.a=0,U(Me.m,Ae.data,Ae.w,Ae.ha),!Te(Me.m,it,Ye,Se)){Me.a=3;break t}if(Me.xb=s_,Ae.width=it[0],Ae.height=Ye[0],!Vt(it[0],Ye[0],1,Me,null))break t;return 1}return t(Me.a!=0),0}(m,L)){if(L=(b=Xu(L.width,L.height,J.Oa,J.ba))==0){t:{L=m;s:for(;;){if(L==null){L=0;break t}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((_=L.l)!=null),t((q=_.ma)!=null),L.xb!=0){if(L.ca=q.ba,L.tb=q.tb,t(L.ca!=null),!pm(q.Oa,_,Xx)){L.a=2;break s}if(!fs(L,_.width)||_.da)break s;if((_.da||Et(L.ca.S))&&Fe(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&Fe()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!ut(L.s.vb,L.s.Wa.Xa)){L.a=1;break s}L.xb=0}if(!Pe(L,L.V,L.Ba,L.c,L.i,_.o,Ms))break s;q.Dc=L.Ma,L=1;break t}t(L.a!=0),L=0}L=!L}L&&(b=m.a)}else b=m.a}else{if((m=new H)==null){J=1;break e}if(m.Fa=q.na,m.P=q.P,m.qc=q.Sa,wt(m,L)){if((b=Xu(L.width,L.height,J.Oa,J.ba))==0){if(m.Aa=0,_=J.Oa,t((q=m)!=null),_!=null){if(0<(ie=0>(ie=_.Md)?0:100<ie?255:255*ie/100)){for(he=Ne=0;4>he;++he)12>(Oe=q.pb[he]).lc&&(Oe.ia=ie*ZI[0>Oe.lc?0:Oe.lc]>>3),Ne|=Oe.ia;Ne&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=_.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}os(m,L)||(b=m.a)}}else b=m.a}b==0&&J.Oa!=null&&J.Oa.fd&&(b=xm(J.ba))}J=b}G=J!=0?null:11>G?ee.f.RGBA.eb:ee.f.kb.y}else G=null;return G};var c_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(T,R){for(var X="",D=0;D<4;D++)X+=String.fromCharCode(T[R++]);return X}function u(T,R){return(T[R+0]<<0|T[R+1]<<8|T[R+2]<<16)>>>0}function h(T,R){return(T[R+0]<<0|T[R+1]<<8|T[R+2]<<16|T[R+3]<<24)>>>0}new c;var p=[0],f=[0],y=[],x=new c,j=e,v=function(T,R){var X={},D=0,C=!1,$=0,B=0;if(X.frames=[],!function(z,M,re,te){for(var O=0;O<te;O++)if(z[M+O]!=re.charCodeAt(O))return!0;return!1}(T,R,"RIFF",4)){for(h(T,R+=4),R+=8;R<T.length;){var Q=d(T,R),oe=h(T,R+=4);R+=4;var ae=oe+(1&oe);switch(Q){case"VP8 ":case"VP8L":X.frames[D]===void 0&&(X.frames[D]={}),(W=X.frames[D]).src_off=C?B:R-8,W.src_size=$+oe+8,D++,C&&(C=!1,$=0,B=0);break;case"VP8X":(W=X.header={}).feature_flags=T[R];var U=R+4;W.canvas_width=1+u(T,U),U+=3,W.canvas_height=1+u(T,U),U+=3;break;case"ALPH":C=!0,$=ae+8,B=R-8;break;case"ANIM":(W=X.header).bgcolor=h(T,R),U=R+4,W.loop_count=(ve=T)[(A=U)+0]<<0|ve[A+1]<<8,U+=2;break;case"ANMF":var Z,W;(W=X.frames[D]={}).offset_x=2*u(T,R),R+=3,W.offset_y=2*u(T,R),R+=3,W.width=1+u(T,R),R+=3,W.height=1+u(T,R),R+=3,W.duration=u(T,R),R+=3,Z=T[R++],W.dispose=1&Z,W.blend=Z>>1&1}Q!="ANMF"&&(R+=ae)}var ve,A;return X}}(j,0);v.response=j,v.rgbaoutput=!0,v.dataurl=!1;var w=v.header?v.header:null,N=v.frames?v.frames:null;if(w){w.loop_counter=w.loop_count,p=[w.canvas_height],f=[w.canvas_width];for(var k=0;k<N.length&&N[k].blend!=0;k++);}var P=N[0],E=x.WebPDecodeRGBA(j,P.src_off,P.src_size,f,p);P.rgba=E,P.imgwidth=f[0],P.imgheight=p[0];for(var I=0;I<f[0]*p[0]*4;I++)y[I]=E[I];return this.width=f,this.height=p,this.data=y,this}(function(e){var t=function(){return typeof iN=="function"},r=function(p,f,y,x){var j=4,v=o;switch(x){case e.image_compression.FAST:j=1,v=i;break;case e.image_compression.MEDIUM:j=6,v=l;break;case e.image_compression.SLOW:j=9,v=c}p=n(p,f,y,v);var w=iN(p,{level:j});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(p,f,y,x){for(var j,v,w,N=p.length/f,k=new Uint8Array(p.length+N),P=u(),E=0;E<N;E+=1){if(w=E*f,j=p.subarray(w,w+f),x)k.set(x(j,y,v),w+E);else{for(var I,T=P.length,R=[];I<T;I+=1)R[I]=P[I](j,y,v);var X=h(R.concat());k.set(R[X],w+E)}v=j}return k},a=function(p){var f=Array.apply([],p);return f.unshift(0),f},i=function(p,f){var y,x=[],j=p.length;x[0]=1;for(var v=0;v<j;v+=1)y=p[v-f]||0,x[v+1]=p[v]-y+256&255;return x},o=function(p,f,y){var x,j=[],v=p.length;j[0]=2;for(var w=0;w<v;w+=1)x=y&&y[w]||0,j[w+1]=p[w]-x+256&255;return j},l=function(p,f,y){var x,j,v=[],w=p.length;v[0]=3;for(var N=0;N<w;N+=1)x=p[N-f]||0,j=y&&y[N]||0,v[N+1]=p[N]+256-(x+j>>>1)&255;return v},c=function(p,f,y){var x,j,v,w,N=[],k=p.length;N[0]=4;for(var P=0;P<k;P+=1)x=p[P-f]||0,j=y&&y[P]||0,v=y&&y[P-f]||0,w=d(x,j,v),N[P+1]=p[P]-w+256&255;return N},d=function(p,f,y){if(p===f&&f===y)return p;var x=Math.abs(f-y),j=Math.abs(p-y),v=Math.abs(p+f-y-y);return x<=j&&x<=v?p:j<=v?f:y},u=function(){return[a,i,o,l,c]},h=function(p){var f=p.map(function(y){return y.reduce(function(x,j){return x+Math.abs(j)},0)});return f.indexOf(Math.min.apply(null,f))};e.processPNG=function(p,f,y,x){var j,v,w,N,k,P,E,I,T,R,X,D,C,$,B,Q=this.decode.FLATE_DECODE,oe="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(w=new uee(p)).imgData,v=w.bits,j=w.colorSpace,k=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){T=(I=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,X=new Uint8Array(T*w.colors),R=new Uint8Array(T);var ae,U=w.pixelBitlength-w.bits;for($=0,B=0;$<T;$++){for(C=I[$],ae=0;ae<U;)X[B++]=C>>>ae&255,ae+=w.bits;R[$]=C>>>ae&255}}if(w.bits===16){T=(I=new Uint32Array(w.decodePixels().buffer)).length,X=new Uint8Array(T*(32/w.pixelBitlength)*w.colors),R=new Uint8Array(T*(32/w.pixelBitlength)),D=w.colors>1,$=0,B=0;for(var Z=0;$<T;)C=I[$++],X[B++]=C>>>0&255,D&&(X[B++]=C>>>16&255,C=I[$++],X[B++]=C>>>0&255),R[Z++]=C>>>16&255;v=8}x!==e.image_compression.NONE&&t()?(p=r(X,w.width*w.colors,w.colors,x),E=r(R,w.width,1,x)):(p=X,E=R,Q=void 0)}if(w.colorType===3&&(j=this.color_spaces.INDEXED,P=w.palette,w.transparency.indexed)){var W=w.transparency.indexed,ve=0;for($=0,T=W.length;$<T;++$)ve+=W[$];if((ve/=255)===T-1&&W.indexOf(0)!==-1)N=[W.indexOf(0)];else if(ve!==T){for(I=w.decodePixels(),R=new Uint8Array(I.length),$=0,T=I.length;$<T;$++)R[$]=W[I[$]];E=r(R,w.width,1)}}var A=function(z){var M;switch(z){case e.image_compression.FAST:M=11;break;case e.image_compression.MEDIUM:M=13;break;case e.image_compression.SLOW:M=14;break;default:M=12}return M}(x);return Q===this.decode.FLATE_DECODE&&(oe="/Predictor "+A+" "),oe+="/Colors "+k+" /BitsPerComponent "+v+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:y,data:p,index:f,filter:Q,decodeParameters:oe,transparency:N,palette:P,sMask:E,predictor:A,width:w.width,height:w.height,bitsPerComponent:v,colorSpace:j}}}})(rs.API),function(e){e.processGIF89A=function(t,r,n,a){var i=new hee(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new o2(100).encode(d,100);return e.processJPEG.call(this,u,r,n,a)},e.processGIF87A=e.processGIF89A}(rs.API),eo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},eo.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){jr.log("bit decode error:"+r)}},eo.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},eo.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},eo.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},eo.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},eo.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},eo.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},eo.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},eo.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new eo(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new o2(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}}(rs.API),ak.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new ak(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new o2(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}}(rs.API),rs.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var u=n[d],h=n[d+1],p=n[d+2],f=n[d+3];i[l++]=u,i[l++]=h,i[l++]=p,o[c++]=f}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},rs.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},yh=rs.API,Kg=yh.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,p=0,f=e.length,y=0,x=l[0]||c,j=[];for(r=0;r<f;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?j.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(p=h&&sr(d[n])==="object"&&!isNaN(parseInt(d[n][y],10))?d[n][y]/u:0,j.push((l[n]||x)/c+p)),y=n;return j},tk=yh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return yh.processArabic&&(e=yh.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Kg.apply(this,arguments).reduce(function(i,o){return i+o},0)},sk=function(e,t,r,n){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},rk=function(e,t,r){r||(r={});var n,a,i,o,l,c,d,u=[],h=[u],p=r.textIndent||0,f=0,y=0,x=e.split(" "),j=Kg.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),w=[];x.map(function(k){(k=k.split(/\s*\n/)).length>1?w=w.concat(k.map(function(P,E){return(E&&P.length?`
`:"")+P})):w.push(k[0])}),x=w,c=tk.apply(this,[v,r])}for(i=0,o=x.length;i<o;i++){var N=0;if(n=x[i],c&&n[0]==`
`&&(n=n.substr(1),N=1),p+f+(y=(a=Kg.apply(this,[n,r])).reduce(function(k,P){return k+P},0))>t||N){if(y>t){for(l=sk.apply(this,[n,a,t-(p+f),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);y=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(k,P){return k+P},0)}else u=[n];h.push(u),p=y+c,f=j}else u.push(n),p+=f+y,f=j}return d=c?function(k,P){return(P?v:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(d)},yh.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(rk.apply(this,[n[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var p,f,y,x,j=["{"];for(var v in h){if(p=h[v],isNaN(parseInt(v,10))?f="'"+v+"'":(v=parseInt(v,10),f=(f=i(v).slice(2)).slice(0,-1)+n[f.slice(-1)]),typeof p=="number")p<0?(y=i(p).slice(3),x="-"):(y=i(p).slice(2),x=""),y=x+y.slice(0,-1)+n[y.slice(-1)];else{if(sr(p)!=="object")throw new Error("Don't know what to do with value type "+sr(p)+".");y=o(p)}j.push(f+y)}return j.push("}"),j.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,f,y,x,j={},v=1,w=j,N=[],k="",P="",E=h.length-1,I=1;I<E;I+=1)(x=h[I])=="'"?p?(y=p.join(""),p=void 0):p=[]:p?p.push(x):x=="{"?(N.push([w,y]),w={},y=void 0):x=="}"?((f=N.pop())[0][f[1]]=w,y=void 0,w=f[0]):x=="-"?v=-1:y===void 0?r.hasOwnProperty(x)?(k+=r[x],y=parseInt(k,16)*v,v=1,k=""):k+=x:r.hasOwnProperty(x)?(P+=r[x],w[y]=parseInt(P,16)*v,v=1,y=void 0,P=""):P+=x;return j},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var p=h.font,f=u.Unicode[p.postScriptName];f&&(p.metadata.Unicode={},p.metadata.Unicode.widths=f.widths,p.metadata.Unicode.kerning=f.kerning);var y=d.Unicode[p.postScriptName];y&&(p.metadata.Unicode.encoding=y,p.encoding=y.codePages[0])}])}(rs.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Cp(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(rs),function(e){function t(){return(as.canvg?Promise.resolve(as.canvg):tN(()=>import("./index.es-fv0eWIG9.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}rs.API.addSvgAsImage=function(r,n,a,i,o,l,c,d){if(isNaN(n)||isNaN(a))throw jr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw jr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return t().then(function(y){return y.fromString(h,r,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(p)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),n,a,i,o,c,d)})}}(),rs.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},rs.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function p(y,x){var j,v=!1;for(j=0;j<y.length;j+=1)y[j]===x&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=l.length;for(h=0;h<f;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(sr(e)==="object"){for(a in e)if(i=e[a],p(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&p(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,x=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?x.push("/"+y+" /"+r[y].value):x.push("/"+y+" "+r[y].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(rs.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,p=i.length;h<p;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},n=function(i){var o,l,c,d,u,h,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,p=(l=Object.keys(i).sort(function(f,y){return f-y})).length;h<p;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",y=0;y<p.length;y++)f+=String.fromCharCode(p[y]);var x=d();u({data:f,addLength1:!0,objectId:x}),c("endobj");var j=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var v=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+_h(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+_h(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+j+" 0 R"),c("/BaseFont /"+_h(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,p="",f=0;f<h.length;f++)p+=String.fromCharCode(h[f]);var y=d();u({data:p,addLength1:!0,objectId:y}),c("endobj");var x=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var j=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+_h(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+_h(l.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},p=h.pdfEscape,f=h.activeFontKey,y=h.fonts,x=f,j="",v=0,w="",N=y[x].encoding;if(y[x].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(w=l,x=f,Array.isArray(l)&&(w=l[0]),v=0;v<w.length;v+=1)y[x].metadata.hasOwnProperty("cmap")&&(o=y[x].metadata.cmap.unicode.codeMap[w[v].charCodeAt(0)]),o||w[v].charCodeAt(0)<256&&y[x].metadata.hasOwnProperty("Unicode")?j+=w[v]:j+="";var k="";return parseInt(x.slice(1))<14||N==="WinAnsiEncoding"?k=p(j,x).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(k=r(j,y[x])),h.isHex=!0,{text:k,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(rs),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(rs.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,l,c,d,u,h=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,N=0;this.__bidiEngine__={};var k=function(D){var C=D.charCodeAt(),$=C>>8,B=x[$];return B!==void 0?h[256*B+(255&C)]:$===252||$===253?"AL":v.test($)?"L":$===8?"R":"N"},P=function(D){for(var C,$=0;$<D.length;$++){if((C=k(D.charAt($)))==="L")return!1;if(C==="R")return!0}return!1},E=function(D,C,$,B){var Q,oe,ae,U,Z=C[B];switch(Z){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(Z="AN");break;case"AL":w=!0,Z="R";break;case"WS":Z="N";break;case"CS":B<1||B+1>=C.length||(Q=$[B-1])!=="EN"&&Q!=="AN"||(oe=C[B+1])!=="EN"&&oe!=="AN"?Z="N":w&&(oe="AN"),Z=oe===Q?oe:"N";break;case"ES":Z=(Q=B>0?$[B-1]:"B")==="EN"&&B+1<C.length&&C[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&$[B-1]==="EN"){Z="EN";break}if(w){Z="N";break}for(ae=B+1,U=C.length;ae<U&&C[ae]==="ET";)ae++;Z=ae<U&&C[ae]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(U=C.length,ae=B+1;ae<U&&C[ae]==="NSM";)ae++;if(ae<U){var W=D[B],ve=W>=1425&&W<=2303||W===64286;if(Q=C[ae],ve&&(Q==="R"||Q==="AL")){Z="R";break}}}Z=B<1||(Q=C[B-1])==="B"?"N":$[B-1];break;case"B":w=!1,a=!0,Z=N;break;case"S":i=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":Z="N"}return Z},I=function(D,C,$){var B=D.split("");return $&&T(B,$,{hiLevel:N}),B.reverse(),C&&C.reverse(),B.join("")},T=function(D,C,$){var B,Q,oe,ae,U,Z=-1,W=D.length,ve=0,A=[],z=N?f:p,M=[];for(w=!1,a=!1,i=!1,Q=0;Q<W;Q++)M[Q]=k(D[Q]);for(oe=0;oe<W;oe++){if(U=ve,A[oe]=E(D,M,A,oe),B=240&(ve=z[U][y[A[oe]]]),ve&=15,C[oe]=ae=z[ve][5],B>0)if(B===16){for(Q=Z;Q<oe;Q++)C[Q]=1;Z=-1}else Z=-1;if(z[ve][6])Z===-1&&(Z=oe);else if(Z>-1){for(Q=Z;Q<oe;Q++)C[Q]=ae;Z=-1}M[oe]==="B"&&(C[oe]=0),$.hiLevel|=ae}i&&function(re,te,O){for(var ce=0;ce<O;ce++)if(re[ce]==="S"){te[ce]=N;for(var le=ce-1;le>=0&&re[le]==="WS";le--)te[le]=N}}(M,C,W)},R=function(D,C,$,B,Q){if(!(Q.hiLevel<D)){if(D===1&&N===1&&!a)return C.reverse(),void($&&$.reverse());for(var oe,ae,U,Z,W=C.length,ve=0;ve<W;){if(B[ve]>=D){for(U=ve+1;U<W&&B[U]>=D;)U++;for(Z=ve,ae=U-1;Z<ae;Z++,ae--)oe=C[Z],C[Z]=C[ae],C[ae]=oe,$&&(oe=$[Z],$[Z]=$[ae],$[ae]=oe);ve=U}ve++}}},X=function(D,C,$){var B=D.split(""),Q={hiLevel:N};return $||($=[]),T(B,$,Q),function(oe,ae,U){if(U.hiLevel!==0&&u)for(var Z,W=0;W<oe.length;W++)ae[W]===1&&(Z=j.indexOf(oe[W]))>=0&&(oe[W]=j[Z+1])}(B,$,Q),R(2,B,C,$,Q),R(1,B,C,$,Q),B.join("")};return this.__bidiEngine__.doBidiReorder=function(D,C,$){if(function(Q,oe){if(oe)for(var ae=0;ae<Q.length;ae++)oe[ae]=ae;l===void 0&&(l=P(Q)),d===void 0&&(d=P(Q))}(D,C),o||!c||d)if(o&&c&&l^d)N=l?1:0,D=I(D,C,$);else if(!o&&c&&d)N=l?1:0,D=X(D,C,$),D=I(D,C);else if(!o||l||c||d){if(o&&!c&&l^d)D=I(D,C),l?(N=0,D=X(D,C,$)):(N=1,D=X(D,C,$),D=I(D,C));else if(o&&l&&!c&&d)N=1,D=X(D,C,$),D=I(D,C);else if(!o&&!c&&l^d){var B=u;l?(N=1,D=X(D,C,$),N=0,u=!1,D=X(D,C,$),u=B):(N=0,D=X(D,C,$),D=I(D,C),N=1,u=!1,D=X(D,C,$),u=B,D=I(D,C))}}else N=0,D=X(D,C,$);else N=l?1:0,D=X(D,C,$);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,c=D.isOutputVisual,l=D.isInputRtl,d=D.isOutputRtl,u=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(rs),rs.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Sd(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new kee(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new fee(this.contents),this.head=new pee(this),this.name=new bee(this),this.cmap=new E7(this),this.toUnicode={},this.hhea=new xee(this),this.maxp=new jee(this),this.hmtx=new wee(this),this.post=new vee(this),this.os2=new gee(this),this.loca=new Cee(this),this.glyf=new Nee(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var To,Sd=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),fee=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,o,l,c,d,u,h,p,f,y,x;for(x in f=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(f)/c),o=Math.floor(h/c),u=16*f-h,(a=new Sd).writeInt(this.scalarType),a.writeShort(f),a.writeShort(h),a.writeShort(o),a.writeShort(u),i=16*f,d=a.pos+i,l=null,y=[],r)for(p=r[x],a.writeString(x),a.writeInt(e(p)),a.writeInt(d),a.writeInt(p.length),y=y.concat(p),x==="head"&&(l=d),d+=p.length;d%4;)y.push(0),d++;return a.write(y),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,o;for(r=L7.call(r);r.length%4;)r.push(0);for(i=new Sd(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),mee={}.hasOwnProperty,vl=function(e,t){for(var r in t)mee.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};To=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var pee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Sd).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),ik=function(){function e(t,r){var n,a,i,o,l,c,d,u,h,p,f,y,x,j,v,w,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),p=f/2,t.pos+=6,i=function(){var k,P;for(P=[],c=k=0;0<=p?k<p:k>p;c=0<=p?++k:--k)P.push(t.readUInt16());return P}(),t.pos+=2,x=function(){var k,P;for(P=[],c=k=0;0<=p?k<p:k>p;c=0<=p?++k:--k)P.push(t.readUInt16());return P}(),d=function(){var k,P;for(P=[],c=k=0;0<=p?k<p:k>p;c=0<=p?++k:--k)P.push(t.readUInt16());return P}(),u=function(){var k,P;for(P=[],c=k=0;0<=p?k<p:k>p;c=0<=p?++k:--k)P.push(t.readUInt16());return P}(),a=(this.length-t.pos+this.offset)/2,l=function(){var k,P;for(P=[],c=k=0;0<=a?k<a:k>a;c=0<=a?++k:--k)P.push(t.readUInt16());return P}(),c=v=0,N=i.length;v<N;c=++v)for(j=i[c],n=w=y=x[c];y<=j?w<=j:w>=j;n=y<=j?++w:--w)u[c]===0?o=n+d[c]:(o=l[u[c]/2+(n-y)-(p-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=h}return e.encode=function(t,r){var n,a,i,o,l,c,d,u,h,p,f,y,x,j,v,w,N,k,P,E,I,T,R,X,D,C,$,B,Q,oe,ae,U,Z,W,ve,A,z,M,re,te,O,ce,le,Ee,_e,Be;switch(B=new Sd,o=Object.keys(t).sort(function(Ge,ut){return Ge-ut}),r){case"macroman":for(x=0,j=function(){var Ge=[];for(y=0;y<256;++y)Ge.push(0);return Ge}(),w={0:0},i={},Q=0,Z=o.length;Q<Z;Q++)w[le=t[a=o[Q]]]==null&&(w[le]=++x),i[a]={old:t[a],new:w[t[a]]},j[a]=w[t[a]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(j),{charMap:i,subtable:B.data,maxGlyphID:x+1};case"unicode":for(C=[],h=[],N=0,w={},n={},v=d=null,oe=0,W=o.length;oe<W;oe++)w[P=t[a=o[oe]]]==null&&(w[P]=++N),n[a]={old:P,new:w[P]},l=w[P]-a,v!=null&&l===d||(v&&h.push(v),C.push(a),d=l),v=a;for(v&&h.push(v),h.push(65535),C.push(65535),X=2*(R=C.length),T=2*Math.pow(Math.log(R)/Math.LN2,2),p=Math.log(T/2)/Math.LN2,I=2*R-T,c=[],E=[],f=[],y=ae=0,ve=C.length;ae<ve;y=++ae){if(D=C[y],u=h[y],D===65535){c.push(0),E.push(0);break}if(D-($=n[D].new)>=32768)for(c.push(0),E.push(2*(f.length+R-y)),a=U=D;D<=u?U<=u:U>=u;a=D<=u?++U:--U)f.push(n[a].new);else c.push($-D),E.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*R+2*f.length),B.writeUInt16(0),B.writeUInt16(X),B.writeUInt16(T),B.writeUInt16(p),B.writeUInt16(I),O=0,A=h.length;O<A;O++)a=h[O],B.writeUInt16(a);for(B.writeUInt16(0),ce=0,z=C.length;ce<z;ce++)a=C[ce],B.writeUInt16(a);for(Ee=0,M=c.length;Ee<M;Ee++)l=c[Ee],B.writeUInt16(l);for(_e=0,re=E.length;_e<re;_e++)k=E[_e],B.writeUInt16(k);for(Be=0,te=f.length;Be<te;Be++)x=f[Be],B.writeUInt16(x);return{charMap:n,subtable:B.data,maxGlyphID:N+1}}},e}(),E7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new ik(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,i;return n==null&&(n="macroman"),a=ik.encode(r,n),(i=new Sd).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),xee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),gee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),vee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),yee=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},bee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,i,o,l,c,d,u,h,p,f;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=h=0,p=a.length;h<p;o=++h)i=a[o],r.pos=i.offset,u=r.readString(i.length),l=new yee(u,i),d[f=i.nameID]==null&&(d[f]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),jee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),wee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,p,f;for(f=[],u=0,h=(p=this.metrics).length;u<h;u++)o=p[u],f.push(o.advance);return f}).call(this),a=this.widths[this.widths.length-1],d=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),L7=[].slice,Nee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,i,o,l,c,d,u,h,p;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Sd(n.read(i))).readShort(),u=c.readShort(),p=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new _ee(c,u,p,d,h):new See(c,l,u,p,d,h),this.cache[r]))},t.prototype.encode=function(r,n,a){var i,o,l,c,d;for(l=[],o=[],c=0,d=n.length;c<d;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),See=function(){function e(t,r,n,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),_ee=function(){function e(t,r,n,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Sd(L7.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Cee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vl(t,To),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<n.length&&n[o]==l){++o,a[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*a.length),h=0;h<a.length;++h)u[4*h+3]=255&a[h],u[4*h+2]=(65280&a[h])>>8,u[4*h+1]=(16711680&a[h])>>16,u[4*h]=(4278190080&a[h])>>24;return u},t}(),kee=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,o,l,c,d,u,h,p,f,y,x,j,v;for(a in n=E7.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},v=n.charMap)f[(c=v[a]).old]=c.new;for(y in p=n.maxGlyphID,o)y in f||(f[y]=p++);return u=function(w){var N,k;for(N in k={},w)k[w[N]]=N;return k}(f),h=Object.keys(u).sort(function(w,N){return w-N}),x=function(){var w,N,k;for(k=[],w=0,N=h.length;w<N;w++)l=h[w],k.push(u[l]);return k}(),i=this.font.glyf.encode(o,x,f),d=this.font.loca.encode(i.offsets,x),j={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},e}();rs.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function T7(e,t,r,n,a){n=n||{};var i=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():i,d=l*c,u=/\r\n|\r|\n/g,h="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof e=="string"?e.split(u):e,p=h.length||1),r+=l*(2-i),n.valign==="middle"?r-=p/2*d:n.valign==="bottom"&&(r-=p*d),n.halign==="center"||n.halign==="right"){var f=l;if(n.halign==="center"&&(f*=.5),h&&p>=1){for(var y=0;y<h.length;y++)a.text(h[y],t-a.getStringUnitWidth(h[y])*f,r),r+=d;return a}t-=a.getStringUnitWidth(e)*f}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var ok={},df=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:ok=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var u=e.unifyColor(t.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=e.unifyColor(t.textColor),u&&(a=this.jsPDFDocument).setTextColor.apply(a,u),u=e.unifyColor(t.lineColor),u&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return ok||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),fN=function(e,t){return fN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},fN(e,t)};function R7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");fN(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var I7=function(e){R7(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function Aee(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Pee(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function fy(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return a}function F7(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var o=D7(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function D7(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Kb(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function O7(e,t){var r=Kb(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function Eee(e,t,r,n,a){var i={},o=1.3333333333333333,l=l2(t,function(N){return a.getComputedStyle(N).backgroundColor});l!=null&&(i.fillColor=l);var c=l2(t,function(N){return a.getComputedStyle(N).color});c!=null&&(i.textColor=c);var d=Tee(n,r);d&&(i.cellPadding=d);var u="borderTopColor",h=o*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var f=(parseFloat(p)||0)/h;f&&(i.lineWidth=f)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var y=l2(t,function(N){return a.getComputedStyle(N)[u]});y!=null&&(i.lineColor=y);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var j=parseInt(n.fontSize||"");isNaN(j)||(i.fontSize=j/o);var v=Lee(n);v&&(i.fontStyle=v);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(i.font=w),i}function Lee(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function l2(e,t){var r=M7(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function M7(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:M7(e.parentElement,t):r}function Tee(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/n}),o=Kb(i,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function $7(e,t,r,n,a){var i,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],h=[],p=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:p};for(var f=0;f<l.rows.length;f++){var y=l.rows[f],x=(o=(i=y==null?void 0:y.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),j=Ree(c,d,r,y,n,a);j&&(x==="thead"?u.push(j):x==="tfoot"?p.push(j):h.push(j))}return{head:u,body:h,foot:p}}function Ree(e,t,r,n,a,i){for(var o=new I7(n),l=0;l<n.cells.length;l++){var c=n.cells[l],d=r.getComputedStyle(c);if(a||d.display!=="none"){var u=void 0;i&&(u=Eee(e,c,t,d,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:Iee(c)})}}var h=r.getComputedStyle(n);if(o.length>0&&(a||h.display!=="none"))return o}function Iee(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Fee(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function $l(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function B7(e,t){var r=new df(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Fee(a,n,t);var i=$l({},a,n,t),o;typeof window<"u"&&(o=window);var l=Dee(a,n,t),c=Oee(a,n,t),d=Mee(r,i),u=Bee(r,i,o);return{id:t.tableId,content:u,hooks:c,styles:l,settings:d}}function Dee(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var d=e[c],u=t[c],h=r[c];n.columnStyles=$l({},d,u,h)}else{var p=[e,t,r],f=p.map(function(y){return y[c]||{}});n[c]=$l({},f[0],f[1],f[2])}},i=0,o=Object.keys(n);i<o.length;i++){var l=o[i];a(l)}return n}function Oee(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var l=o[i];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function Mee(e,t){var r,n,a,i,o,l,c,d,u,h,p,f,y=Kb(t.margin,40/e.scaleFactor()),x=(r=$ee(e,t.startY))!==null&&r!==void 0?r:y.top,j;t.showFoot===!0?j="everyPage":t.showFoot===!1?j="never":j=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var v;t.showHead===!0?v="everyPage":t.showHead===!1?v="never":v=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(i=t.useCss)!==null&&i!==void 0?i:!1,N=t.theme||(w?"plain":"striped"),k=!!t.horizontalPageBreak,P=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:w,theme:N,startY:x,margin:y,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:v,showFoot:j,tableLineWidth:(h=t.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:k,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(f=t.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function $ee(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function Bee(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=$7(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||zee(n,a,i);return{columns:c,head:n,body:a,foot:i}}function zee(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(n)?l=n[parseInt(i)]:l=n[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(n)?d=a.length:d=i+(c>0?"_".concat(c):"");var u={dataKey:d};a.push(u)}}),a}var mN=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Uee=function(e){R7(t,e);function t(r,n,a,i,o,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=i,c.column=o,c.section=i.section,c}return t}(mN),qee=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,o){for(var l=0,c=r;l<c.length;l++){var d=c[l],u=new Uee(t,this,n,a,i,o),h=d(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new mN(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new mN(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),z7=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof I7&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var o=n.cells[i.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>a?d:a},0)},e}(),U7=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Kb(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Vee=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function Hee(e,t){Wee(e,t);var r=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=pN(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=pN(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Kee(t),Yee(t,e),Gee(t)}function Wee(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=O7(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,i,c,null);var h=d.padding("horizontal");d.contentWidth=fy(d.text,d.styles,e)+h;var p=fy(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=p+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||n===!0)d.contentWidth>a?(d.minWidth=a,d.wrappedWidth=a):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var f=10/r;d.minWidth=d.styles.minCellWidth||f,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function pN(e,t,r){for(var n=t,a=e.reduce(function(f,y){return f+y.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/a,c=n*l,d=o.width+c,u=r(o),h=d<u?u:d;t-=h-o.width,o.width=h}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(f){return t<0?f.width>r(f):!0});p.length&&(t=pN(p,t,r))}return t}function Gee(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,r=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var u=i.cells[c.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var h=n.length-a,p=u.rowSpan>h?h:u.rowSpan;t[c.index]={cell:u,left:p,row:i}}}}}function Kee(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete n.cells[c.index];else if(a){var d=a;delete n.cells[c.index],a=null,d.width=c.width+i}else{var d=n.cells[c.index];if(!d)continue;if(o=d.colSpan,i=0,d.colSpan>1){a=d,i+=c.width;continue}d.width=c.width+i}}}function Yee(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=lk(d.text,u,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=lk(d.text,u,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var h=d.styles.overflow(d.text,u);typeof h=="string"?d.text=[h]:d.text=h}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<p*d.rowSpan?r={height:p,count:d.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>i.height&&(i.height=p)}}r.count--}}function lk(e,t,r,n,a){return e.map(function(i){return Jee(i,t,r,n,a)})}function Jee(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=fy(e,r,n))return e;for(;t<fy(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function q7(e,t){var r=new df(e),n=Zee(t,r.scaleFactor()),a=new qee(t,n);return Hee(r,a),r.applyStyles(r.userStyles),a}function Zee(e,t){var r=e.content,n=Qee(r.columns);if(r.head.length===0){var a=ck(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=ck(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,o=e.styles;return{columns:n,head:c2("head",r.head,n,o,i,t),body:c2("body",r.body,n,o,i,t),foot:c2("foot",r.foot,n,o,i,t)}}function c2(e,t,r,n,a,i){var o={},l=t.map(function(c,d){for(var u=0,h={},p=0,f=0,y=0,x=r;y<x.length;y++){var j=x[y];if(o[j.index]==null||o[j.index].left===0)if(f===0){var v=void 0;Array.isArray(c)?v=c[j.index-p-u]:v=c[j.dataKey];var w={};typeof v=="object"&&!Array.isArray(v)&&(w=(v==null?void 0:v.styles)||{});var N=ete(e,j,d,a,n,i,w),k=new U7(v,N,e);h[j.dataKey]=k,h[j.index]=k,f=k.colSpan-1,o[j.index]={left:k.rowSpan-1,times:f}}else f--,p++;else o[j.index].left--,f=o[j.index].times,u++}return new z7(c,d,e,h)});return l}function ck(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Xee(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Xee(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Qee(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new Vee(a,t,r)})}function ete(e,t,r,n,a,i,o){var l=Pee(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var d=$l({},l.table,l[e],a.styles,c),u=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},h=e==="body"?u:{},p=e==="body"&&r%2===0?$l({},l.alternateRow,a.alternateRowStyles):{},f=Aee(i),y=$l({},f,d,p,h);return $l(y,o)}function tte(e,t,r){var n;r===void 0&&(r={});var a=O7(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var f=t.columns.find(function(y){return y.dataKey===p||y.index===p});f&&!i.has(f.index)&&(i.set(f.index,!0),o.push(f.index),l.push(t.columns[f.index]),a-=f.wrappedWidth)});for(var d=!0,u=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;u<t.columns.length;){if(i.has(u)){u++;continue}var h=t.columns[u].wrappedWidth;if(d||a>=h)d=!1,o.push(u),l.push(t.columns[u]),a-=h;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function ste(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=tte(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function V7(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(p,f){return p+f.height},0);l+=d}var u=new df(e);(r.pageBreak==="always"||r.startY!=null&&l>u.pageSize().height)&&(W7(u),i.y=a.top),t.callWillDrawPageHooks(u,i);var h=$l({},i);t.startPageNumber=u.pageNumber(),r.horizontalPageBreak?rte(u,t,h,i):(u.applyStyles(u.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(p){return ic(u,t,p,i,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(p,f){var y=f===t.body.length-1;my(u,t,p,y,h,i,t.columns)}),u.applyStyles(u.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(p){return ic(u,t,p,i,t.columns)})),F7(u,t,h,i),t.callEndPageHooks(u,i),t.finalY=i.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function rte(e,t,r,n){var a=ste(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(d,u){e.applyStyles(e.userStyles),u>0?kp(e,t,r,n,d.columns,!0):dk(e,t,n,d.columns),nte(e,t,r,n,d.columns),d2(e,t,n,d.columns)});else for(var o=-1,l=a[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var u=l.columns;o>=0?kp(e,t,r,n,u,!0):dk(e,t,n,u),d=uk(e,t,o+1,n,u),d2(e,t,n,u)}var h=d-o;a.slice(1).forEach(function(p){e.applyStyles(e.userStyles),kp(e,t,r,n,p.columns,!0),uk(e,t,o+1,n,p.columns,h),d2(e,t,n,p.columns)}),o=d};o<t.body.length-1;)c()}function dk(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return ic(e,t,i,r,n)})}function nte(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;my(e,t,i,l,r,n,a)})}function uk(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,d){var u=r+d===t.body.length-1,h=H7(e,t,u,n);c.canEntireRowFit(h,a)&&(ic(e,t,c,n,a),l=r+d)}),l}function d2(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return ic(e,t,i,r,n)})}function ate(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function ite(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new U7(d.raw,d.styles,d.section);u=$l(u,d),u.text=[];var h=ate(d,t,n);d.text.length>h&&(u.text=d.text.splice(h,d.text.length));var p=n.scaleFactor(),f=n.getLineHeightFactor();d.contentHeight=d.getContentHeight(p,f),d.contentHeight>=t&&(d.contentHeight=t,u.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),u.contentHeight=u.getContentHeight(p,f),u.contentHeight>i&&(i=u.contentHeight),a[c.index]=u}}var y=new z7(e.raw,-1,e.section,a,!0);y.height=i;for(var x=0,j=r.columns;x<j.length;x++){var c=j[x],u=y.cells[c.index];u&&(u.height=y.height);var d=e.cells[c.index];d&&(d.height=e.height)}return y}function ote(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),d=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=t.hasRowSpan(n.columns),h=t.getMaxCellHeight(n.columns)>l;return h?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function my(e,t,r,n,a,i,o){var l=H7(e,t,n,i);if(r.canEntireRowFit(l,o))ic(e,t,r,i,o);else if(ote(e,r,l,t)){var c=ite(r,l,t,e);ic(e,t,r,i,o),kp(e,t,a,i,o),my(e,t,c,n,a,i,o)}else kp(e,t,a,i,o),my(e,t,r,n,a,i,o)}function ic(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,o=a;i<o.length;i++){var l=o[i],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(d===!1){n.x+=l.width;continue}lte(e,c,n);var u=c.getTextPos();T7(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function lte(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=D7(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),cte(e,t,r,n.lineWidth))}function cte(e,t,r,n){var a,i,o,l;n.top&&(a=r.x,i=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,o,l)),n.bottom&&(a=r.x,i=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,o,l)),n.left&&(a=r.x,i=r.y,o=r.x,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,i,o,l)),n.right&&(a=r.x+t.width,i=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,i,o,l));function c(d,u,h,p,f){e.getDocument().setLineWidth(d),e.getDocument().line(u,h,p,f,"S")}}function H7(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function kp(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return ic(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;F7(e,t,r,n),W7(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return ic(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function W7(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function dte(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=B7(this,n),i=q7(this,a);return V7(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){T7(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return df.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){df.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new df(this),i=$7(a,t,window,r,!1),o=i.head,l=i.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var u2;function G7(e,t){var r=B7(e,t),n=q7(e,r);V7(e,n)}try{if(typeof window<"u"&&window){var hk=window,fk=hk.jsPDF||((u2=hk.jspdf)===null||u2===void 0?void 0:u2.jsPDF);fk&&dte(fk)}}catch(e){console.error("Could not apply autoTable plugin",e)}const HS=e=>{const t=new rs;return t.setFontSize(20),t.setTextColor(0,0,0),t.text(e.title,14,22),e.subtitle&&(t.setFontSize(12),t.setTextColor(100,100,100),t.text(e.subtitle,14,32)),t.setFontSize(10),t.setTextColor(100,100,100),t.text(`Generated on: ${new Date().toLocaleDateString()}`,14,42),G7(t,{head:[e.headers],body:e.rows,startY:50,styles:{fontSize:10,cellPadding:5},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),t},K7=e=>{const t=new rs;t.setFontSize(24),t.text("INVOICE",105,20,{align:"center"}),t.setFontSize(12),t.text(`Invoice ID: ${e.invoice_id||e.id}`,14,40),t.text(`Status: ${e.status.toUpperCase()}`,14,50),t.text(`School: ${e.school_name||`School ${e.school}`}`,14,60),t.text(`Subscription Plan: ${e.subscription_plan||"N/A"}`,14,70),t.text(`Invoice Date: ${new Date(e.invoice_date).toLocaleDateString()}`,14,80),t.text(`Due Date: ${new Date(e.due_date).toLocaleDateString()}`,14,90),e.paid_at&&t.text(`Paid Date: ${new Date(e.paid_at).toLocaleDateString()}`,14,100),t.text(`Amount Due: ${e.currency} ${e.amount_due}`,14,110),parseFloat(e.amount_paid)>0&&t.text(`Amount Paid: ${e.currency} ${e.amount_paid}`,14,120);const r=e.line_items.map(a=>[a.description,a.quantity.toString(),`${e.currency} ${a.unit_price}`,`${e.currency} ${a.total}`]);G7(t,{head:[["Description","Quantity","Unit Price","Total"]],body:r,startY:140,styles:{fontSize:10,cellPadding:5},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"}});const n=e.line_items.reduce((a,i)=>a+i.total,0);return t.setFontSize(14),t.text(`Total Amount: ${e.currency} ${n}`,14,200),t},WS=e=>{const t=new rs;return t.setFontSize(24),t.text("SUBSCRIPTION DETAILS",105,20,{align:"center"}),t.setFontSize(12),t.text(`Subscription ID: ${e.id}`,14,40),t.text(`School: ${e.school_name}`,14,50),t.text(`Plan: ${e.plan_name}`,14,60),t.text(`Status: ${e.status.toUpperCase()}`,14,70),t.text(`Billing Cycle: ${e.billing_cycle}`,14,80),t.text(`Price: ${e.price_charged}`,14,90),t.setFontSize(14),t.text("Usage Statistics",14,110),t.setFontSize(12),t.text(`Students: ${e.current_students_count}`,14,120),t.text(`Buses: ${e.current_buses_count}`,14,130),t.text(`Parents: ${e.current_parents_count}`,14,140),t},_d=(e,t)=>{e.save(t)},ute=()=>{const e=rr(),{subscriptions:t,loading:r,error:n}=jt(W=>W.schoolSubscriptions),{schools:a}=jt(W=>W.schools),{user:i}=jt(W=>W.auth),{toast:o}=mr(),[l,c]=g.useState(""),[d,u]=g.useState("all"),[h,p]=g.useState("all"),[f,y]=g.useState("all"),[x,j]=g.useState(null),[v,w]=g.useState(!1),N=g.useMemo(()=>{const W=localStorage.getItem("schoolId");if(W&&W!=="")return W;if(a.length>0&&(i!=null&&i.id)){const ve=a.find(A=>A.admin===i.id);if(ve!=null&&ve.id)return localStorage.setItem("schoolId",ve.id.toString()),ve.id.toString()}return null},[a,i==null?void 0:i.id]),P=(()=>{try{const W=localStorage.getItem("user");if(W){const ve=JSON.parse(W);return ve.role==="admin"||ve.role==="super_admin"}}catch{}return!1})();g.useEffect(()=>{(async()=>{try{await e(ql()).unwrap(),N&&y(N);const z=oe("2025-07-31T23:07:35+03:00","quarterly")}catch(ve){const A=ve instanceof Error?ve.message:"Failed to load subscriptions";A.includes("Rate limited")||A.includes("throttled")?o({title:"Rate Limited",description:A,variant:"destructive"}):o({title:"Error",description:A,variant:"destructive"})}})()},[e,o,N]);const E=W=>{j(W),w(!0)},I=()=>{w(!1),j(null)},T=()=>{c(""),u("all"),p("all"),y(N||"all")},R=W=>{try{const ve=WS(W);_d(ve,`subscription-${W.id}-${new Date().toISOString().split("T")[0]}.pdf`),o({title:"Subscription Downloaded",description:"Subscription PDF has been downloaded successfully."})}catch{o({title:"Error",description:"Failed to generate subscription PDF. Please try again.",variant:"destructive"})}},D=t.filter(W=>W.school.toString()===N).filter(W=>{const ve=W.school_name.toLowerCase().includes(l.toLowerCase())||W.plan_name.toLowerCase().includes(l.toLowerCase()),A=d==="all"||W.status===d,z=h==="all"||W.billing_cycle===h,M=f==="all"||W.school.toString()===f;return ve&&A&&z&&M}),C=W=>{switch(W){case"active":return s.jsx(De,{className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:"Active"});case"pending":return s.jsx(De,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",children:"Pending"});case"cancelled":return s.jsx(De,{className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:"Cancelled"});case"expired":return s.jsx(De,{className:"bg-muted text-muted-foreground",children:"Expired"});default:return s.jsx(De,{variant:"outline",children:W})}},$=W=>{switch(W){case"monthly":return s.jsx(De,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:"Monthly"});case"quarterly":return s.jsx(De,{className:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",children:"Quarterly"});case"annually":return s.jsx(De,{className:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:"Annually"});case"yearly":return s.jsx(De,{className:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:"Yearly"});default:return s.jsx(De,{variant:"outline",children:W})}},B=W=>new Date(W).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Q=W=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KES"}).format(parseFloat(W)),oe=(W,ve)=>{if(!W||!ve)return null;const A=new Date(W);switch(ve.toLowerCase()){case"monthly":return new Date(A.getFullYear(),A.getMonth()+1,A.getDate());case"quarterly":return new Date(A.getFullYear(),A.getMonth()+3,A.getDate());case"annually":return new Date(A.getFullYear()+1,A.getMonth(),A.getDate());case"yearly":return new Date(A.getFullYear()+1,A.getMonth(),A.getDate());default:return null}},ae=()=>{const W=new Map;return t.forEach(A=>{W.has(A.school)||W.set(A.school,A.school_name)}),Array.from(W.entries()).map(([A,z])=>({id:A.toString(),name:z}))},U=W=>{let ve=null;if(W.end_date?ve=new Date(W.end_date):ve=oe(W.start_date,W.billing_cycle),!ve)return{status:"no_expiry",days:0};const A=new Date,z=Math.ceil((ve.getTime()-A.getTime())/(1e3*60*60*24));return z<0?{status:"expired",days:Math.abs(z)}:z<=30?{status:"expiring_soon",days:z}:{status:"active",days:z}},Z=W=>{const ve=U(W);switch(ve.status){case"expired":return s.jsxs(De,{variant:"destructive",children:["Expired ",ve.days," days ago"]});case"expiring_soon":return s.jsxs(De,{className:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",children:["Expires in ",ve.days," days"]});case"active":return s.jsxs(De,{className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:["Active (",ve.days," days left)"]});case"no_expiry":const A=oe(W.start_date,W.billing_cycle);if(A){const z=Math.ceil((A.getTime()-new Date().getTime())/864e5);return z<0?s.jsx(De,{variant:"destructive",children:"Expired (calculated)"}):z<=30?s.jsxs(De,{className:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",children:["Expires in ",z," days (calculated)"]}):s.jsxs(De,{className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:["Active (",z," days left, calculated)"]})}return s.jsx(De,{variant:"outline",children:"No expiry date"});default:return s.jsx(De,{variant:"outline",children:"Unknown"})}};return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading subscriptions..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"School Subscriptions"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor school subscription plans"})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Subscriptions"}),s.jsx(Gn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:D.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All school subscriptions"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(Es,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:D.filter(W=>W.status==="active").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active plans"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Expiring Soon"}),s.jsx(fn,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:D.filter(W=>U(W).status==="expiring_soon").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Within 30 days"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(ld,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Q(D.reduce((W,ve)=>W+parseFloat(ve.price_charged),0).toString())}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"From all subscriptions"})]})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsx(tt,{children:"Filters"})}),s.jsxs(Ue,{children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx($e,{placeholder:"Search by school or plan...",value:l,onChange:W=>c(W.target.value)})}),s.jsxs(es,{value:f,onValueChange:y,children:[s.jsx(Zt,{className:"w-48",children:s.jsx(ts,{placeholder:"Filter by school"})}),s.jsxs(Xt,{children:[P&&s.jsx(Ve,{value:"all",children:"All Schools"}),ae().map(W=>s.jsxs(Ve,{value:W.id,children:[W.name," (ID: ",W.id,")"]},W.id))]})]}),f!=="all"&&s.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950/20 px-2 py-1 rounded",children:["Selected School ID: ",f]}),s.jsxs(es,{value:d,onValueChange:u,children:[s.jsx(Zt,{className:"w-48",children:s.jsx(ts,{placeholder:"Filter by status"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Status"}),s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"pending",children:"Pending"}),s.jsx(Ve,{value:"cancelled",children:"Cancelled"}),s.jsx(Ve,{value:"expired",children:"Expired"})]})]}),s.jsxs(es,{value:h,onValueChange:p,children:[s.jsx(Zt,{className:"w-48",children:s.jsx(ts,{placeholder:"Filter by billing cycle"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Cycles"}),s.jsx(Ve,{value:"monthly",children:"Monthly"}),s.jsx(Ve,{value:"quarterly",children:"Quarterly"}),s.jsx(Ve,{value:"annually",children:"Annually"}),s.jsx(Ve,{value:"yearly",children:"Yearly"})]})]}),s.jsx(ue,{variant:"outline",onClick:T,children:"Clear Filters"})]}),(l||f!=="all"||d!=="all"||h!=="all")&&s.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-foreground mb-2",children:"Active Filters:"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[l&&s.jsxs(De,{variant:"secondary",children:['Search: "',l,'"']}),f!=="all"&&s.jsxs(De,{variant:"secondary",children:["School ID: ",f,N===f&&" (Your School)"]}),d!=="all"&&s.jsxs(De,{variant:"secondary",children:["Status: ",d]}),h!=="all"&&s.jsxs(De,{variant:"secondary",children:["Billing: ",h]})]})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsxs(tt,{children:["School Subscriptions (",D.length," of"," ",D.length,")"]}),s.jsxs(Ws,{children:["All school subscriptions and their current status",l&&s.jsxs("span",{className:"block text-sm text-blue-600 dark:text-blue-400",children:[' Filtered by: "',l,'"']}),f!=="all"&&s.jsxs("span",{className:"block text-sm text-blue-600 dark:text-blue-400",children:[" School ID: ",f,N===f&&" (Your School)"]}),d!=="all"&&s.jsxs("span",{className:"block text-sm text-blue-600 dark:text-blue-400",children:[" Status: ",d]}),h!=="all"&&s.jsxs("span",{className:"block text-sm text-blue-600 dark:text-blue-400",children:[" Billing: ",h]})]})]}),s.jsx(Ue,{children:n?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(un,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Subscriptions"}),s.jsx("p",{className:"text-muted-foreground",children:n})]}):D.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Gn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Subscriptions Found"}),s.jsx("p",{className:"text-muted-foreground",children:D.length===0?"No subscriptions have been created yet.":"No subscriptions match your current filters."})]}):s.jsx("div",{className:"rounded-md border",children:s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"School"}),s.jsx(yt,{children:"Plan"}),s.jsx(yt,{children:"Status"}),s.jsx(yt,{children:"Billing Cycle"}),s.jsx(yt,{children:"Price"}),s.jsx(yt,{children:"Expiry Status"}),s.jsx(yt,{children:"Usage"}),s.jsx(yt,{className:"text-right",children:"Actions"})]})}),s.jsx(si,{children:D.map(W=>s.jsxs(hr,{children:[s.jsx(vt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kr,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:W.school_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",W.school]})]})]})}),s.jsx(vt,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:W.plan_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",W.plan]})]})}),s.jsx(vt,{children:C(W.status)}),s.jsx(vt,{children:$(W.billing_cycle)}),s.jsxs(vt,{children:[s.jsx("div",{className:"font-medium",children:Q(W.price_charged)}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Calculated:"," ",Q(W.calculated_cost.toString())]})]}),s.jsx(vt,{children:Z(W)}),s.jsx(vt,{children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ws,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-sm",children:W.current_students_count})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qi,{className:"h-3 w-3 text-green-600"}),s.jsx("span",{className:"text-sm",children:W.current_buses_count})]})]})}),s.jsx(vt,{className:"text-right",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsxs(ue,{variant:"ghost",className:"h-8 w-8 p-0",children:[s.jsx("span",{className:"sr-only",children:"Open menu"}),s.jsx(qr,{className:"h-4 w-4"})]})}),s.jsxs(Dn,{align:"end",children:[s.jsx(Rd,{children:"Actions"}),s.jsxs(Ut,{onClick:()=>E(W),children:[s.jsx(qr,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Ut,{onClick:()=>R(W),children:[s.jsx(pn,{className:"mr-2 h-4 w-4"}),"Download PDF"]})]})]})})]},W.id))})]})})})]}),x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-card rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Subscription Details"}),s.jsx(ue,{variant:"ghost",size:"sm",onClick:I,children:""})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-3 text-foreground",children:"Subscription Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Subscription ID:"}),s.jsx("p",{className:"font-medium text-foreground",children:x.id})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[C(x.status),Z(x)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Plan:"}),s.jsx("p",{className:"font-medium text-foreground",children:x.plan_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Billing Cycle:"}),$(x.billing_cycle)]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"School:"}),s.jsx("p",{className:"font-medium text-foreground",children:x.school_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Price Charged:"}),s.jsx("p",{className:"font-medium text-foreground",children:Q(x.price_charged)})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-3 text-foreground",children:"Usage Statistics"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 border border-border rounded-lg",children:[s.jsx(ws,{className:"h-8 w-8 mx-auto mb-2 text-blue-600 dark:text-blue-400"}),s.jsx("div",{className:"text-2xl font-bold text-foreground",children:x.current_students_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Students"})]}),s.jsxs("div",{className:"text-center p-4 border border-border rounded-lg",children:[s.jsx(qi,{className:"h-8 w-8 mx-auto mb-2 text-green-600 dark:text-green-400"}),s.jsx("div",{className:"text-2xl font-bold text-foreground",children:x.current_buses_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Buses"})]}),s.jsxs("div",{className:"text-center p-4 border border-border rounded-lg",children:[s.jsx(ws,{className:"h-8 w-8 mx-auto mb-2 text-purple-600 dark:text-purple-400"}),s.jsx("div",{className:"text-2xl font-bold text-foreground",children:x.current_parents_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Parents"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-3 text-foreground",children:"Important Dates"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pa,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Start Date:"}),s.jsx("span",{className:"font-medium text-foreground",children:B(x.start_date)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pa,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"End Date:"}),s.jsxs("span",{className:"font-medium text-foreground",children:[x.end_date?B(x.end_date):oe(x.start_date,x.billing_cycle)?B(oe(x.start_date,x.billing_cycle).toISOString()):"Not calculated",!x.end_date&&oe(x.start_date,x.billing_cycle)&&s.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(Calculated from ",x.billing_cycle," cycle)"]})]})]}),x.next_billing_date&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fn,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Next Billing:"}),s.jsx("span",{className:"font-medium text-foreground",children:B(x.next_billing_date)})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[s.jsxs(ue,{variant:"outline",onClick:()=>R(x),children:[s.jsx(pn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(ue,{variant:"outline",children:[s.jsx(kr,{className:"mr-2 h-4 w-4"}),"View School"]}),x.status==="pending"&&s.jsxs(ue,{children:[s.jsx(Es,{className:"mr-2 h-4 w-4"}),"Activate"]}),x.status==="active"&&s.jsxs(ue,{variant:"outline",children:[s.jsx(ec,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})]})})]})},hte=zb({alert_type:Di().min(1,"Alert type is required"),severity:I3(["low","medium","high"]),title:Di().min(3,"Title must be at least 3 characters"),message:Di().min(10,"Message must be at least 10 characters"),description:Di().optional(),scenario:I3(["student_specific","school_wide","trip_specific"]),student_id:bn().optional(),trip_id:bn().optional(),recipients:FS(bn()).optional(),requires_immediate_action:nx().optional(),address:Di().optional(),metadata:_X(SX()).optional()}),fte=[{value:"SOS",label:"SOS Emergency"},{value:"medical_emergency",label:"Medical Emergency"},{value:"bus_breakdown",label:"Bus Breakdown"},{value:"route_deviation",label:"Route Deviation"},{value:"student_missing",label:"Student Missing"},{value:"late_pickup",label:"Late Pickup"},{value:"traffic_delay",label:"Traffic Delay"},{value:"weather_alert",label:"Weather Alert"},{value:"security_threat",label:"Security Threat"},{value:"accident",label:"Accident"},{value:"driver_issue",label:"Driver Issue"},{value:"maintenance_required",label:"Maintenance Required"},{value:"geofence_violation",label:"Geofence Violation"},{value:"speed_violation",label:"Speed Violation"},{value:"fuel_low",label:"Low Fuel"},{value:"battery_low",label:"Battery Low"},{value:"device_offline",label:"Device Offline"},{value:"system_error",label:"System Error"},{value:"parent_notification",label:"Parent Notification"},{value:"attendance_alert",label:"Attendance Alert"}],Yg=[{value:"low",label:"Low",icon:Cq,color:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"},{value:"medium",label:"Medium",icon:$i,color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"},{value:"high",label:"High",icon:$i,color:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}],mte=[{value:"student_specific",label:"Student Specific"},{value:"school_wide",label:"School Wide Alert"},{value:"trip_specific",label:"Trip Specific"}];function pte(){var te;const e=rr(),{notifications:t,loading:r,error:n}=jt(O=>O.notifications),{parents:a}=jt(O=>O.parents),{students:i}=jt(O=>O.students),{trips:o}=jt(O=>O.trips),{drivers:l}=jt(O=>O.drivers),{staff:c}=jt(O=>O.staff),{toast:d}=mr(),h=JSON.parse(localStorage.getItem("profile")||"{}"),p=localStorage.getItem("schoolId");h.user||h.id;const[f,y]=g.useState(""),[x,j]=g.useState("all"),[v,w]=g.useState(1),[N]=g.useState(10),[k,P]=g.useState(!1),[E,I]=g.useState(null),[T,R]=g.useState(!1),[X,D]=g.useState(""),C=sy({resolver:ry(hte),defaultValues:{alert_type:"parent_notification",severity:"low",title:"",message:"",description:"",scenario:"school_wide",student_id:void 0,trip_id:void 0,recipients:[],requires_immediate_action:!1,address:"",metadata:{}}});g.useEffect(()=>{const O=C.watch((ce,{name:le})=>{le==="scenario"&&(C.setValue("recipients",[]),C.setValue("student_id",void 0),C.setValue("trip_id",void 0),D("")),le==="trip_id"&&(C.setValue("recipients",[]),D(""))});return()=>O.unsubscribe()},[C]);const $=(a==null?void 0:a.filter(O=>O.school===parseInt(p||"0")))||[],B=(i==null?void 0:i.filter(O=>O.school===parseInt(p||"0")))||[],Q=(()=>{const O=(o==null?void 0:o.filter(ce=>{var Ee,_e;return(ce.school||((_e=(Ee=ce.route_details)==null?void 0:Ee.school)==null?void 0:_e.id))===parseInt(p||"0")}))||[];return o&&o.length>0,O})(),oe=(t==null?void 0:t.filter(O=>{var Ee,_e,Be,Ge,ut;const ce=((Ee=O.message)==null?void 0:Ee.toLowerCase().includes(f.toLowerCase()))||((_e=O.title)==null?void 0:_e.toLowerCase().includes(f.toLowerCase()))||((Be=O.alert_type)==null?void 0:Be.toLowerCase().includes(f.toLowerCase()))||((Ge=O.description)==null?void 0:Ge.toLowerCase().includes(f.toLowerCase())),le=x==="all"||((ut=O.severity)==null?void 0:ut.toLowerCase())===x.toLowerCase();return ce&&le}))||[],ae=Math.ceil(oe.length/N),U=(v-1)*N,Z=U+N,W=(oe==null?void 0:oe.slice(U,Z))||[];if(g.useEffect(()=>{w(1)},[f,x]),g.useEffect(()=>{p&&(e(Qh({schoolId:parseInt(p)})),e(Vn({schoolId:parseInt(p)})),e(fa({schoolId:parseInt(p)})),e(Xh({schoolId:parseInt(p)})),e(Hn()),e(xu({schoolId:parseInt(p)})))},[e,p]),!t)return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-2 sm:px-1 py-0 w-full max-w-[98vw] mx-auto",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#f7c624]"})})})})});const ve=async O=>{try{if(!localStorage.getItem("schoolId")){d({title:"Error",description:"School ID not found",variant:"destructive"});return}const le={alert_type:O.alert_type,severity:O.severity,title:O.title,message:O.message,description:O.description||"",requires_immediate_action:O.requires_immediate_action||!1,metadata:O.metadata||{}};if(O.scenario==="student_specific"){if(!O.student_id){d({title:"Error",description:"Student is required for student-specific alerts",variant:"destructive"});return}if(le.student_id=O.student_id,le.recipients=O.recipients||[],le.recipients.length===0){d({title:"Error",description:"At least one recipient is required for student-specific alerts",variant:"destructive"});return}}else if(O.scenario==="school_wide")le.recipients=[],O.address&&(le.address=O.address);else if(O.scenario==="trip_specific"){if(!O.trip_id){d({title:"Error",description:"Trip is required for trip-specific alerts",variant:"destructive"});return}le.trip_id=O.trip_id,le.recipients=O.recipients||[],O.address&&(le.address=O.address)}const Ee=await e(jp(le)).unwrap();d({title:"Success",description:"Alert created successfully"}),C.reset(),D(""),P(!1)}catch{d({title:"Error",description:"Failed to create alert",variant:"destructive"})}},A=O=>{I(O),R(!0)},z=O=>Yg.find(ce=>ce.value===O)||Yg[0],M=O=>new Date(O).toLocaleString(),re=O=>{const ce=B.find(le=>le.id===O);return ce?`${ce.first_name} ${ce.last_name}`:"Unknown Student"};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-2 sm:px-1 py-0 w-full max-w-[98vw] mx-auto",children:[n&&n.includes("not available")&&s.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx($i,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-400",children:"Demo Mode - Notifications API Coming Soon"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"The notifications API is not yet available on the server. You can explore the interface with demo data, and create notifications that will be saved when the backend is implemented."})]})]})}),s.jsxs(ze,{className:"bg-card shadow-lg border-0 rounded-xl",children:[s.jsxs(Xe,{className:"border-b border-border flex flex-row w-full items-center justify-between py-4",children:[s.jsxs(tt,{className:"text-xl font-bold text-foreground flex items-center gap-2",children:[s.jsx(mi,{className:"w-6 h-6 text-[#f7c624]"}),"Notifications"]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs(js,{open:k,onOpenChange:O=>{P(O),O||(C.reset(),D(""))},children:[s.jsx(Jf,{asChild:!0,children:s.jsxs(ue,{className:"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white font-semibold px-6 py-2 rounded-lg shadow disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:n&&n.includes("not available"),children:[s.jsx(va,{className:"mr-2 h-4 w-4"}),"Create Notification"]})}),s.jsxs(xs,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsx(vs,{children:"Create New Notification"})}),s.jsx(_p,{...C,children:s.jsxs("form",{onSubmit:C.handleSubmit(ve),className:"space-y-4",children:[s.jsx(Js,{control:C.control,name:"scenario",render:({field:O})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Alert Scenario"}),s.jsxs(es,{onValueChange:O.onChange,value:O.value,children:[s.jsx(Vs,{children:s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select scenario"})})}),s.jsx(Xt,{children:mte.map(ce=>s.jsx(Ve,{value:ce.value,children:ce.label},ce.value))})]}),s.jsx(Er,{})]})}),s.jsx(Js,{control:C.control,name:"alert_type",render:({field:O})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Alert Type"}),s.jsxs(es,{onValueChange:O.onChange,value:O.value,children:[s.jsx(Vs,{children:s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select alert type"})})}),s.jsx(Xt,{children:fte.map(ce=>s.jsx(Ve,{value:ce.value,children:ce.label},ce.value))})]}),s.jsx(Er,{})]})}),s.jsx(Js,{control:C.control,name:"severity",render:({field:O})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Severity"}),s.jsxs(es,{onValueChange:O.onChange,value:O.value,children:[s.jsx(Vs,{children:s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select severity"})})}),s.jsx(Xt,{children:Yg.map(ce=>s.jsx(Ve,{value:ce.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ce.icon,{className:"h-4 w-4"}),ce.label]})},ce.value))})]}),s.jsx(Er,{})]})}),s.jsx(Js,{control:C.control,name:"title",render:({field:O})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Title"}),s.jsx(Vs,{children:s.jsx($e,{placeholder:"Enter alert title",...O})}),s.jsx(Er,{})]})}),s.jsx(Js,{control:C.control,name:"message",render:({field:O})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Message"}),s.jsx(Vs,{children:s.jsx(Kn,{placeholder:"Enter alert message",rows:3,...O})}),s.jsx(Er,{})]})}),s.jsx(Js,{control:C.control,name:"description",render:({field:O})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Description (Optional)"}),s.jsx(Vs,{children:s.jsx(Kn,{placeholder:"Enter additional details",rows:2,...O})}),s.jsx(Er,{})]})}),C.watch("scenario")==="student_specific"&&s.jsx(Js,{control:C.control,name:"student_id",render:({field:O})=>{var ce;return s.jsxs(Ds,{children:[s.jsx(Os,{children:"Select Student *"}),s.jsxs(es,{onValueChange:le=>O.onChange(parseInt(le)),value:(ce=O.value)==null?void 0:ce.toString(),children:[s.jsx(Vs,{children:s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select student"})})}),s.jsx(Xt,{children:B.map(le=>s.jsxs(Ve,{value:le.id.toString(),children:[le.first_name," ",le.last_name]},le.id))})]}),s.jsx(Er,{})]})}}),C.watch("scenario")==="trip_specific"&&s.jsx(Js,{control:C.control,name:"trip_id",render:({field:O})=>{var ce;return s.jsxs(Ds,{children:[s.jsx(Os,{children:"Select Trip *"}),Q.length===0?s.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-400",children:"No trips available. Please create a trip first or check that trips exist for this school."})}):s.jsxs(es,{onValueChange:le=>O.onChange(parseInt(le)),value:(ce=O.value)==null?void 0:ce.toString(),children:[s.jsx(Vs,{children:s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select trip"})})}),s.jsx(Xt,{children:Q.map(le=>s.jsxs(Ve,{value:le.id.toString(),children:["Trip #",le.id," - ",le.route_name||"N/A"," (",le.trip_type,")"]},le.id))})]}),s.jsx(Er,{})]})}}),(C.watch("scenario")==="student_specific"||C.watch("scenario")==="trip_specific")&&s.jsx(Js,{control:C.control,name:"recipients",render:({field:O})=>{var ut,Le,K;const ce=C.watch("trip_id"),le=ce?Q.find(He=>He.id===ce):null;let Ee=[];if(C.watch("scenario")==="trip_specific"&&le){const He=le.students||[],xe=B.filter(ne=>He.includes(ne.id)),ge=new Set(xe.map(ne=>ne.parent).filter(Boolean)),se=$.filter(ne=>ge.has(ne.id)),F=l==null?void 0:l.find(ne=>ne.id===le.driver);Ee=[...se.map(ne=>{var ye,je;return{id:ne.id,name:ne.user_full_name||`${(ye=ne.user_data)==null?void 0:ye.first_name} ${(je=ne.user_data)==null?void 0:je.last_name}`,type:"Parent"}}),...F?[{id:F.id,name:`${F.user_details.first_name} ${F.user_details.last_name}`,type:"Driver"}]:[],...((ut=c==null?void 0:c.filter(ne=>ne.school===parseInt(p||"0")))==null?void 0:ut.map(ne=>{var ye,je,Y;return{id:(ye=ne.user)==null?void 0:ye.id,name:`${(je=ne.user)==null?void 0:je.first_name} ${(Y=ne.user)==null?void 0:Y.last_name}`,type:"Staff"}}).filter(ne=>ne.id))||[]]}else Ee=[...$.map(He=>{var xe,ge;return{id:He.id,name:He.user_full_name||`${(xe=He.user_data)==null?void 0:xe.first_name} ${(ge=He.user_data)==null?void 0:ge.last_name}`,type:"Parent"}}),...((Le=l==null?void 0:l.filter(He=>He.school===parseInt(p||"0")))==null?void 0:Le.map(He=>({id:He.id,name:`${He.user_details.first_name} ${He.user_details.last_name}`,type:"Driver"})))||[],...((K=c==null?void 0:c.filter(He=>He.school===parseInt(p||"0")))==null?void 0:K.map(He=>{var xe,ge,se;return{id:(xe=He.user)==null?void 0:xe.id,name:`${(ge=He.user)==null?void 0:ge.first_name} ${(se=He.user)==null?void 0:se.last_name}`,type:"Staff"}}).filter(He=>He.id))||[]];const _e=Ee.filter(He=>He.name.toLowerCase().includes(X.toLowerCase())||He.type.toLowerCase().includes(X.toLowerCase())),Be=()=>{const He=_e.map(xe=>xe.id);O.onChange(He)},Ge=()=>{O.onChange([])};return s.jsxs(Ds,{children:[s.jsxs(Os,{children:["Select Recipients ",C.watch("scenario")==="student_specific"&&"*"]}),s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:C.watch("scenario")==="trip_specific"&&le?s.jsxs(s.Fragment,{children:["Showing recipients for Trip #",ce," - ",le.route_name,s.jsx("div",{className:"text-xs mt-1",children:"(Parents of trip students, trip driver, and staff)"})]}):"Select parents, drivers, or staff members to notify"}),s.jsxs("div",{className:"space-y-2",children:[C.watch("scenario")==="trip_specific"&&!le&&s.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-400",children:"Please select a trip first to see available recipients"})}),s.jsxs("div",{className:"relative",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx($e,{placeholder:"Search recipients...",value:X,onChange:He=>D(He.target.value),className:"pl-10",disabled:C.watch("scenario")==="trip_specific"&&!le})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{type:"button",variant:"outline",size:"sm",onClick:Be,className:"flex-1",disabled:C.watch("scenario")==="trip_specific"&&!le,children:["Select All (",_e.length,")"]}),s.jsx(ue,{type:"button",variant:"outline",size:"sm",onClick:Ge,className:"flex-1",disabled:C.watch("scenario")==="trip_specific"&&!le,children:"Clear Selection"})]}),s.jsx("div",{className:"border rounded-lg max-h-64 overflow-y-auto",children:_e.length===0?s.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No recipients found"}):s.jsx("div",{className:"divide-y",children:_e.map(He=>{var ge;const xe=((ge=O.value)==null?void 0:ge.includes(He.id))||!1;return s.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-muted/50 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:xe,onChange:()=>{const se=O.value||[],F=xe?se.filter(ne=>ne!==He.id):[...se,He.id];O.onChange(F)},className:"h-4 w-4 rounded border-gray-300"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-foreground",children:He.name}),s.jsx(De,{variant:"secondary",className:"text-xs mt-1",children:He.type})]})]},He.id)})})}),O.value&&O.value.length>0&&s.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[s.jsx("span",{className:"font-medium",children:O.value.length})," recipient(s) selected"]})]}),s.jsx(Er,{})]})}}),(C.watch("scenario")==="school_wide"||C.watch("scenario")==="trip_specific")&&s.jsx(Js,{control:C.control,name:"address",render:({field:O})=>s.jsxs(Ds,{children:[s.jsx(Os,{children:"Address (Optional)"}),s.jsx(Vs,{children:s.jsx($e,{placeholder:"Enter location address",...O})}),s.jsx(Er,{})]})}),s.jsx(Js,{control:C.control,name:"requires_immediate_action",render:({field:O})=>s.jsxs(Ds,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Os,{className:"text-base",children:"Requires Immediate Action"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Mark this alert as requiring urgent attention"})]}),s.jsx(Vs,{children:s.jsx("input",{type:"checkbox",checked:O.value,onChange:O.onChange,className:"h-4 w-4"})})]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ue,{type:"button",variant:"outline",onClick:()=>{C.reset(),D(""),P(!1)},children:"Cancel"}),s.jsx(ue,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Create Alert"})]})]})})]})]})})]}),s.jsx("div",{className:"p-4 border-b border-border",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx($e,{placeholder:"Search notifications by description or message...",value:f,onChange:O=>y(O.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ld,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs(es,{value:x,onValueChange:j,children:[s.jsx(Zt,{className:"w-[180px]",children:s.jsx(ts,{placeholder:"Filter by severity"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Severities"}),Yg.map(O=>s.jsx(Ve,{value:O.value,children:O.label},O.value))]})]}),s.jsx(zu,{data:{headers:["Description","Type","Message","Parent","Student","Trip","Created At","Expires At"],data:oe.map(O=>({description:O.description||O.route_name||"",type:"Trip",message:`Route: ${O.route_name||""} - Driver: ${O.driver_name||""} - Vehicle: ${O.vehicle_number||""}`,parent:"N/A",student:"N/A",trip:O.route_name||"Unknown Route",created_at:O.scheduled_start_time?M(O.scheduled_start_time):"",expires_at:O.scheduled_end_time?M(O.scheduled_end_time):"No expiration"})),fileName:"notifications_export",title:"Notifications Directory"},className:"border-border hover:bg-muted/30 px-3 py-2"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-muted/50 border-b border-border",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground uppercase tracking-wider",children:"Alert"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground uppercase tracking-wider",children:"Severity"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground uppercase tracking-wider",children:"Details"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground uppercase tracking-wider",children:"Created"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-foreground uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-card divide-y divide-border",children:r?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#f7c624]"}),s.jsx("span",{className:"text-muted-foreground font-medium",children:"Loading notifications..."})]})})}):n?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx($i,{className:"w-8 h-8 text-blue-500 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Demo Mode Active"}),s.jsx("p",{className:"text-blue-500 dark:text-blue-300 text-sm",children:"Showing demo notifications. The API will be available soon."}),s.jsx("p",{className:"text-muted-foreground text-xs mt-2",children:n})]})]})})}):oe.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:s.jsx(mi,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-foreground font-medium",children:"No notifications found"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Create your first notification to get started"})]})]})})}):W.map((O,ce)=>{var _e,Be;const le=z(O.severity||"low"),Ee=le.icon;return s.jsxs("tr",{className:`hover:bg-muted/30 transition-colors duration-200 ${ce%2===0?"bg-card":"bg-muted/30"}`,children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-[#f7c624] rounded-full mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-foreground",children:O.title||O.message||"Alert"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:((_e=O.alert_type)==null?void 0:_e.replace(/_/g," "))||"N/A"})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs(De,{className:le.color,children:[s.jsx(Ee,{className:"w-3 h-3 mr-1"}),((Be=O.severity)==null?void 0:Be.toUpperCase())||"LOW"]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"text-sm text-foreground truncate",children:O.message||"No message"}),O.description&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:O.description}),O.student_id&&s.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Student: ",re(O.student_id)]}),O.trip_id&&s.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Trip #",O.trip_id]}),O.recipients&&O.recipients.length>0&&s.jsxs("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:[O.recipients.length," recipient(s)"]}),O.recipients&&O.recipients.length===0&&s.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Broadcast to all"}),O.requires_immediate_action&&s.jsx(De,{variant:"destructive",className:"text-xs mt-1",children:"Urgent"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(fn,{className:"w-4 h-4 text-muted-foreground mr-2"}),s.jsx("div",{children:s.jsx("div",{className:"text-sm text-foreground",children:O.created_at?M(O.created_at):"N/A"})})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-muted/30 rounded-full",children:s.jsx(B0,{className:"h-4 w-4 text-muted-foreground"})})}),s.jsx(Dn,{align:"end",className:"w-48",children:s.jsxs(Ut,{onClick:()=>A(O),className:"cursor-pointer",children:[s.jsx(qr,{className:"h-4 w-4 mr-2 text-blue-600"}),s.jsx("span",{children:"View Details"})]})})]})})]},O.id)})})]})}),ae>1&&s.jsx("div",{className:"flex items-center justify-between p-4 border-t border-border",children:s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",U+1,"-",Math.min(Z,oe.length)," ","of ",oe.length," notifications",f&&` matching "${f}"`]})})]})]})}),s.jsx(js,{open:T,onOpenChange:R,children:s.jsxs(xs,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsx(gs,{children:s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(mi,{className:"w-5 h-5 text-[#f7c624]"}),"Notification Details"]})}),E&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[(()=>{var le;const O=z(E.severity||"low"),ce=O.icon;return s.jsxs(De,{className:O.color,children:[s.jsx(ce,{className:"w-3 h-3 mr-1"}),((le=E.severity)==null?void 0:le.toUpperCase())||"LOW"]})})(),s.jsx(De,{variant:"outline",children:((te=E.alert_type)==null?void 0:te.replace(/_/g," "))||"N/A"}),E.requires_immediate_action&&s.jsx(De,{variant:"destructive",children:"Requires Immediate Action"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["ID: ",E.id]})]}),E.title&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Title"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-foreground font-semibold",children:E.title})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Message"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-foreground",children:E.message})})]}),E.description&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Description"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-foreground",children:E.description})})]}),E.student_id&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Associated Student"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsxs("p",{className:"text-foreground",children:[re(E.student_id)," (ID: ",E.student_id,")"]})})]}),E.trip_id&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Associated Trip"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsxs("p",{className:"text-foreground",children:["Trip #",E.trip_id]})})]}),E.address&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Location"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-foreground",children:E.address})})]}),E.recipients&&E.recipients.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium text-foreground mb-2",children:["Recipients (",E.recipients.length,")"]}),s.jsx("div",{className:"p-3 bg-muted rounded-lg space-y-2 max-h-48 overflow-y-auto",children:E.recipients.map(O=>{var Ge,ut,Le,K;const ce=$.find(He=>He.id===O),le=l==null?void 0:l.find(He=>He.id===O),Ee=c==null?void 0:c.find(He=>{var xe;return((xe=He.user)==null?void 0:xe.id)===O});let _e=`User ID: ${O}`,Be="User";return ce?(_e=ce.user_full_name||`${(Ge=ce.user_data)==null?void 0:Ge.first_name} ${(ut=ce.user_data)==null?void 0:ut.last_name}`,Be="Parent"):le?(_e=`${le.user_details.first_name} ${le.user_details.last_name}`,Be="Driver"):Ee&&(_e=`${(Le=Ee.user)==null?void 0:Le.first_name} ${(K=Ee.user)==null?void 0:K.last_name}`,Be="Staff"),s.jsxs("div",{className:"text-sm text-foreground flex items-center gap-2",children:[s.jsx(De,{variant:"secondary",className:"text-xs",children:Be}),s.jsx("span",{children:_e})]},O)})})]}),E.recipients&&E.recipients.length===0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Broadcast Type"}),s.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:s.jsx("p",{className:"text-orange-800 dark:text-orange-400",children:"This alert was sent to all users in the school"})})]}),E.metadata&&Object.keys(E.metadata).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Additional Information"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg space-y-1",children:Object.entries(E.metadata).map(([O,ce])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:[O.replace(/_/g," "),":"]}),s.jsx("span",{className:"text-sm text-foreground",children:typeof ce=="object"?JSON.stringify(ce):String(ce)})]},O))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Created"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-foreground text-sm",children:E.created_at?M(E.created_at):"N/A"})})]}),E.updated_at&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-foreground mb-2",children:"Updated"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-foreground text-sm",children:M(E.updated_at)})})]})]})]})]})})]})}const xte=()=>{const e=Ia(),[t,r]=g.useState("terms"),n=[{id:"terms",label:"Terms & Conditions",icon:Rn},{id:"system",label:"System Policies",icon:Ln},{id:"payment",label:"Payment & Use Terms",icon:Gn},{id:"privacy",label:"Privacy & Data",icon:Fi},{id:"updates",label:"Policy Updates",icon:Rn}],a=()=>{switch(t){case"terms":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Terms & Conditions"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"1. Acceptance of Terms"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"By accessing and using the Shule Track School Administration System, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions. These terms constitute a legally binding agreement between you and Shule Track."}),s.jsx("p",{className:"text-muted-foreground",children:"If you do not agree with any part of these terms, you must not use our services."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"2. Definitions"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:'"Service"'})," refers to the Shule Track School Administration System"]}),s.jsxs("li",{children:[s.jsx("strong",{children:'"User"'})," refers to any individual accessing the system"]}),s.jsxs("li",{children:[s.jsx("strong",{children:'"School"'})," refers to the educational institution using our services"]}),s.jsxs("li",{children:[s.jsx("strong",{children:'"Data"'})," refers to all information processed through our system"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"3. Permitted Use"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"The Service is intended for legitimate educational administration purposes only. You may use the Service to:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Manage student information and records"}),s.jsx("li",{children:"Coordinate transportation and route management"}),s.jsx("li",{children:"Process payments and billing"}),s.jsx("li",{children:"Generate reports and analytics"}),s.jsx("li",{children:"Communicate with parents and staff"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"4. Prohibited Activities"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"You agree not to:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Use the Service for any unlawful or unauthorized purpose"}),s.jsx("li",{children:"Attempt to gain unauthorized access to any part of the Service"}),s.jsx("li",{children:"Share login credentials with unauthorized individuals"}),s.jsx("li",{children:"Upload malicious software or harmful content"}),s.jsx("li",{children:"Interfere with the proper functioning of the Service"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"5. Intellectual Property"}),s.jsx("p",{className:"text-muted-foreground",children:"All content, features, and functionality of the Service are owned by Shule Track and are protected by international copyright, trademark, and other intellectual property laws. You may not reproduce, distribute, or create derivative works without our express written consent."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"6. Liability and Disclaimers"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:'The Service is provided "as is" without warranties of any kind. Shule Track disclaims all warranties, express or implied, including but not limited to:'}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Warranties of merchantability and fitness for a particular purpose"}),s.jsx("li",{children:"Warranties regarding accuracy, reliability, or completeness of data"}),s.jsx("li",{children:"Warranties that the Service will be uninterrupted or error-free"}),s.jsx("li",{children:"Warranties regarding third-party content or services"})]}),s.jsx("p",{className:"text-muted-foreground mt-3",children:"In no event shall Shule Track be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, or business opportunities, arising from your use of the Service."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"7. Termination and Suspension"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Either party may terminate this agreement at any time with 30 days written notice. Shule Track reserves the right to suspend or terminate your access immediately if:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"You breach any terms of this agreement"}),s.jsx("li",{children:"You engage in fraudulent or illegal activities"}),s.jsx("li",{children:"You fail to pay fees when due"}),s.jsx("li",{children:"You pose a security risk to the Service or other users"})]}),s.jsx("p",{className:"text-muted-foreground mt-3",children:"Upon termination, your right to use the Service ceases immediately, and we may delete your data after a 90-day grace period."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"8. Governing Law and Dispute Resolution"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"This agreement shall be governed by the laws of Kenya. Any disputes arising from this agreement shall be resolved through:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"First, through good faith negotiations between the parties"}),s.jsx("li",{children:"If negotiations fail, through binding arbitration in Nairobi, Kenya"}),s.jsx("li",{children:"Arbitration shall be conducted in English and governed by Kenyan arbitration law"}),s.jsx("li",{children:"Each party shall bear their own legal costs unless otherwise determined by the arbitrator"})]})]})]})]})});case"system":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"System Policies"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Account Management"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Each user is responsible for maintaining the security and confidentiality of their account credentials. Schools are responsible for managing user access and permissions within their organization."}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Use strong passwords and enable two-factor authentication where available"}),s.jsx("li",{children:"Report suspected unauthorized access immediately"}),s.jsx("li",{children:"Regular review and update of user permissions"}),s.jsx("li",{children:"Prompt removal of access for departing staff members"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Data Backup & Recovery"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Shule Track maintains robust backup systems to protect your data:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Daily automated backups with 30-day retention"}),s.jsx("li",{children:"Geographic redundancy across multiple data centers"}),s.jsx("li",{children:"99.9% uptime guarantee with 24/7 monitoring"}),s.jsx("li",{children:"Disaster recovery procedures tested quarterly"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"System Maintenance"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Scheduled maintenance windows are announced 48 hours in advance. Emergency maintenance may occur with minimal notice to address security vulnerabilities or critical issues."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Security Measures"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"End-to-end encryption for data transmission"}),s.jsx("li",{children:"Regular security audits and penetration testing"}),s.jsx("li",{children:"GDPR and COPPA compliance measures"}),s.jsx("li",{children:"Role-based access controls"}),s.jsx("li",{children:"Audit logs for all system activities"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Acceptable Use Policy"}),s.jsx("p",{className:"text-muted-foreground",children:"The system must be used in accordance with educational best practices and applicable laws. Any misuse, including attempts to circumvent security measures or access unauthorized data, will result in immediate account suspension and may be reported to relevant authorities."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Compliance and Legal Requirements"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Shule Track is committed to maintaining compliance with applicable laws and regulations:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"FERPA Compliance:"})," Family Educational Rights and Privacy Act compliance for student data protection"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"COPPA Compliance:"})," Children's Online Privacy Protection Act compliance for users under 13"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"GDPR Compliance:"})," General Data Protection Regulation compliance for EU data subjects"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Kenyan Data Protection Act:"})," Compliance with local data protection regulations"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Educational Standards:"})," Adherence to national and international educational technology standards"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Support and Service Level Agreement"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We provide comprehensive support to ensure your success with our platform:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Uptime Guarantee:"})," 99.9% uptime with 24/7 monitoring"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Response Times:"})," Critical issues within 2 hours, general support within 24 hours"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Support Channels:"})," Email, phone, and in-app chat support"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Training Resources:"})," Comprehensive documentation, video tutorials, and webinars"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Dedicated Support:"})," Enterprise customers receive dedicated account managers"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Maintenance Windows:"})," Scheduled maintenance with advance notice"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"System Monitoring and Performance"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Our systems are continuously monitored to ensure optimal performance:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Real-time performance monitoring and alerting"}),s.jsx("li",{children:"Automated scaling based on usage patterns"}),s.jsx("li",{children:"Regular performance optimization and updates"}),s.jsx("li",{children:"Capacity planning and resource management"}),s.jsx("li",{children:"Incident response and resolution procedures"})]})]})]})]})});case"payment":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Payment & Use Terms"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Subscription Plans"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Shule Track offers flexible subscription plans to meet the needs of educational institutions of all sizes:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Basic Plan:"})," Core features for small schools (up to 200 students)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Professional Plan:"})," Advanced features for medium schools (up to 1,000 students)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Enterprise Plan:"})," Full feature set for large institutions (unlimited students)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Custom Plans:"})," Tailored solutions for specific requirements"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Billing Terms"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Subscriptions are billed monthly or annually in advance"}),s.jsx("li",{children:"Annual subscriptions receive a 15% discount"}),s.jsx("li",{children:"Payment is due within 30 days of invoice date"}),s.jsx("li",{children:"Late payments may incur a 1.5% monthly service charge"}),s.jsx("li",{children:"Failed payments may result in service suspension after 7 days"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Payment Methods"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We accept the following payment methods:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Credit cards (Visa, MasterCard, American Express)"}),s.jsx("li",{children:"Bank transfers (ACH/Wire)"}),s.jsx("li",{children:"Purchase orders for qualified institutions"}),s.jsx("li",{children:"Digital wallets (PayPal, Apple Pay, Google Pay)"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Refund Policy"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We offer a 30-day money-back guarantee for new subscriptions. Refund requests must be submitted within 30 days of initial purchase."}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Pro-rated refunds available for annual subscriptions"}),s.jsx("li",{children:"No refunds for partial months of service"}),s.jsx("li",{children:"Refunds processed within 5-10 business days"}),s.jsx("li",{children:"Custom development work is non-refundable"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Price Changes"}),s.jsx("p",{className:"text-muted-foreground",children:"Shule Track reserves the right to modify pricing with 60 days advance notice. Existing subscribers will maintain their current pricing for the remainder of their billing period."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Cancellation"}),s.jsx("p",{className:"text-muted-foreground",children:"Subscriptions may be cancelled at any time with 30 days notice. Upon cancellation, you will retain access to the service until the end of your current billing period. Data export options are available for 90 days post-cancellation."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Taxes and Fees"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"All prices are exclusive of applicable taxes. You are responsible for:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Value Added Tax (VAT) and other applicable taxes"}),s.jsx("li",{children:"Bank transfer fees and currency conversion charges"}),s.jsx("li",{children:"Late payment penalties and interest charges"}),s.jsx("li",{children:"Any additional fees imposed by payment processors"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Usage Limits and Overages"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Each subscription plan includes specific usage limits:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Student capacity limits based on your plan"}),s.jsx("li",{children:"Storage limits for documents and media"}),s.jsx("li",{children:"API call limits for integrations"}),s.jsx("li",{children:"Support ticket limits per month"})]}),s.jsx("p",{className:"text-muted-foreground mt-3",children:"Overage charges may apply if you exceed your plan limits. We will notify you before applying overage charges and provide options to upgrade your plan."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Enterprise and Custom Agreements"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"For large institutions and custom requirements, we offer:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Custom pricing based on specific needs"}),s.jsx("li",{children:"Dedicated support and account management"}),s.jsx("li",{children:"Custom integrations and development work"}),s.jsx("li",{children:"On-premise deployment options"}),s.jsx("li",{children:"Volume discounts for multiple schools or districts"})]})]})]})]})});case"privacy":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Privacy & Data Protection"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Information We Collect"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We collect information necessary to provide our educational administration services:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Student Information:"})," Names, grades, contact details, academic records"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Parent/Guardian Data:"})," Contact information, billing details, communication preferences"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Staff Information:"})," Employee records, roles, permissions, contact details"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"System Data:"})," Usage logs, performance metrics, security events"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Financial Data:"})," Payment information, billing history, transaction records"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"How We Use Your Information"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Provide and maintain our educational services"}),s.jsx("li",{children:"Process payments and manage subscriptions"}),s.jsx("li",{children:"Send important service notifications and updates"}),s.jsx("li",{children:"Improve system performance and user experience"}),s.jsx("li",{children:"Ensure security and prevent fraudulent activity"}),s.jsx("li",{children:"Comply with legal and regulatory requirements"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Student Privacy Protection"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We are committed to protecting student privacy in accordance with FERPA, COPPA, and other applicable education privacy laws:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Student data is used solely for educational purposes"}),s.jsx("li",{children:"No advertising or marketing to students"}),s.jsx("li",{children:"Parental consent for data collection where required"}),s.jsx("li",{children:"Right to access, correct, or delete student information"}),s.jsx("li",{children:"Secure data handling and storage practices"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Data Security"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"AES-256 encryption for data at rest"}),s.jsx("li",{children:"TLS 1.3 encryption for data in transit"}),s.jsx("li",{children:"Multi-factor authentication for admin accounts"}),s.jsx("li",{children:"Regular security audits and vulnerability assessments"}),s.jsx("li",{children:"Employee background checks and security training"}),s.jsx("li",{children:"Incident response procedures and breach notification"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Data Retention"}),s.jsx("p",{className:"text-muted-foreground",children:"We retain data only as long as necessary to provide services or as required by law. Student records are typically retained for 7 years after graduation or transfer. Financial records are kept for 7 years for tax and audit purposes."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Rights"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Right to access your personal information"}),s.jsx("li",{children:"Right to correct inaccurate data"}),s.jsx("li",{children:"Right to delete data (subject to legal requirements)"}),s.jsx("li",{children:"Right to data portability"}),s.jsx("li",{children:"Right to opt-out of non-essential communications"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Data Export and Migration"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We understand that data portability is important for educational institutions. We provide comprehensive data export capabilities:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Export Formats:"})," CSV, Excel, JSON, and PDF formats available"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data Categories:"})," Student records, financial data, reports, and system configurations"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Export Frequency:"})," On-demand exports or scheduled automated exports"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Migration Support:"})," Assistance with data migration to other systems"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data Validation:"})," Export validation to ensure data integrity"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Retention Period:"})," Export data available for 90 days post-cancellation"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Third-Party Services and Integrations"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Our platform may integrate with third-party services to enhance functionality. These integrations are subject to their own privacy policies:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Payment Processors:"})," Secure payment processing through certified providers"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Communication Services:"})," SMS and email services for notifications"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Analytics Services:"})," Usage analytics to improve our services"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Cloud Storage:"})," Secure cloud storage for data backup and redundancy"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Educational Tools:"})," Integration with learning management systems and educational software"]})]}),s.jsx("p",{className:"text-muted-foreground mt-3",children:"We carefully vet all third-party providers to ensure they meet our security and privacy standards. Data shared with third parties is limited to what is necessary for service functionality."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"International Data Transfers"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Your data may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Standard Contractual Clauses (SCCs) for EU data transfers"}),s.jsx("li",{children:"Adequacy decisions where applicable"}),s.jsx("li",{children:"Data processing agreements with all service providers"}),s.jsx("li",{children:"Regular audits of international data handling practices"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Breach Notification"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"In the unlikely event of a data breach, we have comprehensive response procedures:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Immediate containment and assessment of the breach"}),s.jsx("li",{children:"Notification to affected users within 72 hours"}),s.jsx("li",{children:"Cooperation with relevant authorities and regulators"}),s.jsx("li",{children:"Detailed incident reports and remediation plans"}),s.jsx("li",{children:"Credit monitoring services for affected individuals when appropriate"})]})]})]})]})});case"updates":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Policy Updates and Changes"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Policy Modification Rights"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Shule Track reserves the right to modify these Terms and Policies at any time. We will notify users of significant changes through:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Email notifications to registered users"}),s.jsx("li",{children:"In-app notifications and banners"}),s.jsx("li",{children:"Updates to our website and documentation"}),s.jsx("li",{children:"Direct communication for enterprise customers"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Change Notification Timeline"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Minor Changes:"})," 7 days advance notice for clarifications and minor updates"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Moderate Changes:"})," 30 days advance notice for policy modifications"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Major Changes:"})," 60 days advance notice for significant policy changes"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Emergency Changes:"})," Immediate implementation for security or legal compliance"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Acceptance of Changes"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Continued use of our services after policy changes constitutes acceptance of the new terms. If you do not agree with the changes, you may:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Cancel your subscription within the notice period"}),s.jsx("li",{children:"Contact us to discuss alternative arrangements"}),s.jsx("li",{children:"Request a data export before cancellation"}),s.jsx("li",{children:"Negotiate custom terms for enterprise customers"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Version Control and History"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We maintain a complete history of all policy changes:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Versioned policy documents with change tracking"}),s.jsx("li",{children:"Detailed change logs with effective dates"}),s.jsx("li",{children:"Archive of previous policy versions"}),s.jsx("li",{children:"Summary of changes for each update"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Feedback and Suggestions"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We welcome feedback on our policies and procedures:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Submit feedback through our support channels"}),s.jsx("li",{children:"Participate in user surveys and focus groups"}),s.jsx("li",{children:"Join our user advisory board (for enterprise customers)"}),s.jsx("li",{children:"Provide input during policy review periods"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Recent Updates"}),s.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[s.jsx("strong",{children:"Last Updated:"})," ",new Date().toLocaleDateString()]}),s.jsxs("ul",{className:"text-sm space-y-1",children:[s.jsx("li",{children:" Enhanced data protection measures in compliance with new regulations"}),s.jsx("li",{children:" Updated payment terms to include new payment methods"}),s.jsx("li",{children:" Improved support response times and escalation procedures"}),s.jsx("li",{children:" Added new data export formats and migration tools"}),s.jsx("li",{children:" Clarified international data transfer procedures"})]})]})]})]})]})});default:return null}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"bg-primary text-primary-foreground",children:s.jsxs("div",{className:"container mx-auto px-6 py-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx(ue,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"text-primary-foreground hover:bg-primary-foreground/20",children:s.jsx(Jp,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Terms and Policies"}),s.jsxs("p",{className:"text-primary-foreground/80",children:["Last updated: ",new Date().toLocaleDateString()]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(i=>{const o=i.icon;return s.jsxs(ue,{variant:t===i.id?"secondary":"ghost",className:`flex items-center gap-2 ${t===i.id?"bg-background text-foreground":"text-primary-foreground hover:bg-primary-foreground/20"}`,onClick:()=>r(i.id),children:[s.jsx(o,{className:"h-4 w-4"}),i.label]},i.id)})})]})}),s.jsxs("div",{className:"container mx-auto px-6 py-8 max-w-4xl",children:[s.jsx(ze,{children:s.jsx(Ue,{className:"p-8",children:a()})}),s.jsxs(ze,{className:"mt-8",children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(Fi,{className:"h-5 w-5"}),"Contact Information"]})}),s.jsxs(Ue,{children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"If you have any questions about these Terms and Policies, please contact us:"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:"General Support"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email: support@shuletrack.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone: +254 113281424"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:"General Information"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email: info@shuletrack.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone: +254 113281424"})]})]}),s.jsx(sf,{className:"my-4"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:"Mailing Address"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Shule Track Education Technology",s.jsx("br",{}),"Gesora Road, Utawala",s.jsx("br",{}),"Nairobi, Kenya"]})]})]})]})]})]})},gte=()=>{const e=Vi();return g.useEffect(()=>{},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4 text-foreground",children:"404"}),s.jsx("p",{className:"text-xl text-muted-foreground mb-4",children:"Oops! Page not found"}),s.jsx(dr,{to:"/",className:"text-primary hover:text-primary/80 underline",children:"Return to Home"})]})})},vte=[{label:"Dashboard",icon:V5,href:"/super-admin"},{label:"Users",icon:ws,href:"/super-admin/users"},{label:"Schools",icon:kr,href:"/super-admin/schools"},{label:"Subscriptions",icon:Gn,href:"/super-admin/subscriptions"},{label:"School Subscriptions",icon:Gn,href:"/super-admin/school-subscriptions"},{label:"Invoices",icon:Rn,href:"/super-admin/invoices"},{label:"Customer Support",icon:Cw,href:"/super-admin/support"},{label:"Analytics",icon:ib,href:"/super-admin/analytics"},{label:"Settings",icon:Fi,href:"/super-admin/settings"}];function yte(){const e=Vi(),t=r=>r==="/super-admin"?e.pathname==="/super-admin":e.pathname.startsWith(r);return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(dr,{to:"/super-admin",children:s.jsx("div",{className:"p-6 flex items-center gap-2",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/shuletrack_landscape_logo_wfussl.png",alt:"logo",className:"h-20"})})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:s.jsx("nav",{className:"space-y-1",children:vte.map(r=>{const n=t(r.href);return s.jsxs(dr,{to:r.href,className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${n?"bg-[#f7c624]/90 text-white":"text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[s.jsx(r.icon,{size:20,className:n?"text-white":"text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"font-medium",children:r.label})]},r.label)})})}),s.jsx("div",{className:"p-4",children:s.jsxs(dr,{to:"/super-admin/settings",className:`flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-700 dark:text-gray-300 w-full ${t("/super-admin/settings")?"bg-[#f7c624]/90 text-white":""}`,children:[s.jsx(Fi,{size:20,className:t("/super-admin/settings")?"text-white":"text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"font-medium",children:"Settings"})]})})]})}const bte=()=>{Vi();const{openMobile:e,setOpenMobile:t,toggleSidebar:r}=Qf(),[n,a]=g.useState(!1),i=g.useRef(null);return g.useEffect(()=>{const o=()=>{if(i.current){const c=i.current.scrollTop;a(c>0)}},l=i.current;if(l)return l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)},[]),s.jsxs("div",{className:"h-screen w-screen bg-background",children:[e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>t(!1)}),s.jsxs("div",{className:"flex h-full w-full overflow-hidden",children:[s.jsx("div",{className:`fixed md:static inset-y-0 left-0 z-50 w-64 transform transition-transform duration-200 ease-in-out ${e?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:s.jsx("div",{className:"h-full bg-card border-r",children:s.jsx(yte,{})})}),s.jsxs("div",{className:"flex-1 flex flex-col w-full overflow-hidden",children:[s.jsx(VL,{onMenuClick:r,isScrolled:n}),s.jsx("main",{ref:i,className:"flex-1 overflow-y-auto bg-background",children:s.jsx("div",{className:"h-full w-full",children:s.jsx("div",{className:"h-full w-full",children:s.jsx(tP,{})})})})]})]})]})},jte=()=>s.jsx(q8,{children:s.jsx(bte,{})});class wte{constructor(){mg(this,"baseUrl",Dt.SCHOOLS)}async getAllSchools(){try{const t=await fetch(this.baseUrl,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();let n=r.data||r;return Array.isArray(n)?n.map((i,o)=>{var l,c,d,u;return!i||typeof i!="object"?null:{_id:((l=i.id)==null?void 0:l.toString())||i._id||`temp-${o}`,name:i.name||i.school_name||"Unknown School",address:i.address||i.location||"",phone:i.phone||i.contact_number||"",email:i.email||"",principal:{name:((c=i.principal)==null?void 0:c.name)||"School Administrator",phone:((d=i.principal)==null?void 0:d.phone)||i.contact_number||"",email:((u=i.principal)==null?void 0:u.email)||i.email||""},isActive:i.is_active!==void 0?i.is_active:!0,location:i.location||"",type:i.type||"primary",capacity:i.capacity||0,currentStudents:i.current_students||i.students||0,createdAt:i.created_at||i.createdAt||new Date().toISOString(),updatedAt:i.updated_at||i.updatedAt||new Date().toISOString(),subscription:i.subscription||"Basic",staff:i.staff||0,lastActive:i.last_active||i.lastActive||"Never"}}).filter(Boolean):[]}catch(t){throw t}}async getSchoolById(t){var r,n,a,i;try{const o=await fetch(`${this.baseUrl}/${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();let c=l.data||l;if(!c||typeof c!="object")throw new Error("Invalid school data received");return{_id:((r=c.id)==null?void 0:r.toString())||c._id||t,name:c.name||c.school_name||"Unknown School",address:c.address||c.location||"",phone:c.phone||c.contact_number||"",email:c.email||"",principal:{name:((n=c.principal)==null?void 0:n.name)||"School Administrator",phone:((a=c.principal)==null?void 0:a.phone)||c.contact_number||"",email:((i=c.principal)==null?void 0:i.email)||c.email||""},isActive:c.is_active!==void 0?c.is_active:!0,location:c.location||"",type:c.type||"primary",capacity:c.capacity||0,currentStudents:c.current_students||c.students||0,createdAt:c.created_at||c.createdAt||new Date().toISOString(),updatedAt:c.updated_at||c.updatedAt||new Date().toISOString(),subscription:c.subscription||"Basic",staff:c.staff||0,lastActive:c.last_active||c.lastActive||"Never"}}catch(o){throw o}}async createSchool(t){try{const r=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw r}}async updateSchool(t,r){try{const n=await fetch(`${this.baseUrl}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch(n){throw n}}async deleteSchool(t){try{const r=await fetch(`${this.baseUrl}/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`)}catch(r){throw r}}async toggleSchoolStatus(t){try{const r=await fetch(`${this.baseUrl}/${t}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw r}}async getDashboardStats(){try{const t=await fetch(`${this.baseUrl}/stats`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();return r.data||r}catch{return{totalUsers:1247,totalSchools:89,activeSubscriptions:76,revenue:45600,pendingApprovals:12,activeUsers:1189,inactiveUsers:58,premiumSchools:23}}}}const hd=new wte;class Nte{constructor(){mg(this,"baseUrl",Dt.STAFF)}async getAllStaff(){try{const t=await fetch(this.baseUrl,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();return r.data||r}catch(t){throw t}}async addStaff(t){try{const r=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw r}}async updateStaff(t,r){try{const n=await fetch(`${this.baseUrl}${t}/`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch(n){throw n}}async deleteStaff(t){try{const r=await fetch(`${this.baseUrl}${t}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`)}catch(r){throw r}}async getStaffById(t){try{const r=await fetch(`${this.baseUrl}${t}/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw r}}}const Y7=new Nte,Ste=()=>{const e=Ia(),t=rr(),{toast:r}=mr(),{invoices:n}=jt(p=>p.invoices),{subscriptions:a}=jt(p=>p.schoolSubscriptions),[i,o]=g.useState({totalUsers:0,totalSchools:0,activeSubscriptions:0,revenue:0,pendingApprovals:0,activeUsers:0,inactiveUsers:0,premiumSchools:0,activeSchools:0,inactiveSchools:0}),[l,c]=g.useState(!0);g.useEffect(()=>{(async()=>{c(!0);try{await Promise.all([t(vu()),t(ql())]);const[f,y]=await Promise.all([hd.getAllSchools(),Y7.getAllStaff()]),x=n.reduce((E,I)=>E+parseFloat(I.amount_due||"0"),0),j=n.filter(E=>E.status==="paid"),v=n.filter(E=>E.status==="pending"),w=y.length,N=f.reduce((E,I)=>E+(I.currentStudents||0),0),k=w+N,P={totalSchools:f.length,activeSchools:f.filter(E=>E.isActive).length,inactiveSchools:f.filter(E=>!E.isActive).length,premiumSchools:a.filter(E=>E.status==="active").length,totalUsers:k,activeSubscriptions:a.filter(E=>E.status==="active").length,revenue:x,pendingApprovals:f.filter(E=>!E.isActive).length,activeUsers:k,inactiveUsers:0};o(P)}catch{o({totalUsers:1247,totalSchools:89,activeSubscriptions:76,revenue:45600,pendingApprovals:12,activeUsers:1189,inactiveUsers:58,premiumSchools:23,activeSchools:67,inactiveSchools:22})}finally{c(!1)}})()},[t]);const d=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p),u=()=>{try{const p=["Metric","Value","Description"],f=[["Total Users",i.totalUsers.toLocaleString(),"All registered users (staff + students)"],["Total Schools",i.totalSchools.toString(),"All registered schools"],["Active Subscriptions",i.activeSubscriptions.toString(),"Premium subscriptions"],["Total Revenue",d(i.revenue),"From all invoices"],["Pending Approvals",i.pendingApprovals.toString(),"Schools awaiting approval"],["Active Users",i.activeUsers.toLocaleString(),"Users active this month"],["Premium Schools",i.premiumSchools.toString(),"Schools with premium plans"],["Total Invoices",n.length.toString(),"All invoices"],["Paid Invoices",n.filter(x=>x.status==="paid").length.toString(),"Successfully paid"],["Pending Invoices",n.filter(x=>x.status==="pending").length.toString(),"Awaiting payment"],["School Subscriptions",a.length.toString(),"All subscriptions"]],y=HS({headers:p,rows:f,title:"Super Admin Dashboard Report",subtitle:`Generated on ${new Date().toLocaleDateString()}`});_d(y,`dashboard-report-${new Date().toISOString().split("T")[0]}.pdf`),r({title:"Dashboard Report Downloaded",description:"Dashboard report has been downloaded successfully."})}catch{r({title:"Error",description:"Failed to generate dashboard PDF. Please try again.",variant:"destructive"})}},h=({title:p,value:f,description:y,icon:x,trend:j,color:v="default"})=>s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:p}),s.jsx(x,{size:20,className:`${v==="success"?"text-green-600":v==="warning"?"text-yellow-600":v==="danger"?"text-red-600":"text-blue-600"}`})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:f}),y&&s.jsx("p",{className:"text-xs text-muted-foreground",children:y}),j&&s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsxs(De,{variant:j.isPositive?"default":"secondary",className:`text-xs ${j.isPositive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[j.isPositive?"+":"-",j.value,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"from last month"})]})]})]});return l?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(8)].map((p,f)=>s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})}),s.jsx(Ue,{children:s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})})]},f))})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Super Admin Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Overview of all schools, users, and subscriptions"})]}),s.jsx(ue,{onClick:u,children:"Export Report"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(h,{title:"Total Users",value:i.totalUsers.toLocaleString(),description:"All registered users",icon:ws,trend:{value:12,isPositive:!0},color:"default"}),s.jsx(h,{title:"Total Schools",value:i.totalSchools,description:`${i.activeSchools} active, ${i.inactiveSchools} inactive`,icon:kr,trend:{value:8,isPositive:!0},color:"success"}),s.jsx(h,{title:"Active Subscriptions",value:i.activeSubscriptions,description:"Premium subscriptions",icon:Gn,trend:{value:5,isPositive:!0},color:"warning"}),s.jsx(h,{title:"Total Revenue",value:d(i.revenue),description:"From all invoices",icon:ld,trend:{value:23,isPositive:!0},color:"success"})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-5 w-5"}),"Revenue Overview"]}),s.jsx(Ws,{children:"Invoice and revenue statistics from all schools"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ue,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/invoices"),children:"View All Invoices"}),s.jsx(ue,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/school-subscriptions"),children:"View Subscriptions"})]})]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Invoices"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.filter(p=>p.status==="paid").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Paid Invoices"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.filter(p=>p.status==="pending").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Invoices"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"School Subscriptions"})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(kr,{className:"h-5 w-5"}),"Schools Overview"]}),s.jsx(Ws,{children:"Real-time statistics from all registered schools"})]}),s.jsx(ue,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/schools"),children:"View All Schools"})]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.totalSchools}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Schools"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.activeSchools}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Schools"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.inactiveSchools}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Inactive Schools"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.premiumSchools}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Premium Schools"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(h,{title:"Active Users",value:i.activeUsers.toLocaleString(),description:"Users active this month",icon:Es,color:"success"}),s.jsx(h,{title:"Pending Approvals",value:i.pendingApprovals,description:"Schools awaiting approval",icon:un,color:"warning"}),s.jsx(h,{title:"Premium Schools",value:i.premiumSchools,description:"Schools with premium plans",icon:_o,color:"success"})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Quick Actions"}),s.jsx(Ws,{children:"Common administrative tasks"})]}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs(ue,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/users"),children:[s.jsx(ws,{size:24}),s.jsx("span",{children:"Manage Users"})]}),s.jsxs(ue,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/schools"),children:[s.jsx(kr,{size:24}),s.jsx("span",{children:"Manage Schools"})]}),s.jsxs(ue,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/school-subscriptions"),children:[s.jsx(Gn,{size:24}),s.jsx("span",{children:"Subscriptions"})]}),s.jsxs(ue,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/invoices"),children:[s.jsx(Rn,{size:24}),s.jsx("span",{children:"Invoices"})]})]})})]})]})};class _te{constructor(){mg(this,"baseUrl",`${Ys}/all-users/`)}async getAllUsers(){try{const t=await fetch(this.baseUrl,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();return r.data||r}catch(t){throw console.error("Error fetching all users:",t),t}}async getUserById(t){try{const r=await fetch(`${this.baseUrl}${t}/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw console.error("Error fetching user by ID:",r),r}}async updateUser(t,r){try{const n=await fetch(`${this.baseUrl}${t}/`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch(n){throw console.error("Error updating user:",n),n}}async softDeleteUser(t){try{const r=await fetch(`${Ys}/delete-user/${t}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`)}catch(r){throw console.error("Error soft deleting user:",r),r}}async restoreUser(t){try{const r=await fetch(`${Ys}/restore-user/${t}/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`)}catch(r){throw console.error("Error restoring user:",r),r}}}const o0=new _te,Cte=({user:e,isOpen:t,onClose:r})=>{if(!e)return null;const n=(l,c)=>c?s.jsx(De,{variant:"destructive",children:"Deleted"}):l?s.jsx(De,{className:"bg-green-100 text-green-800",children:"Active"}):s.jsx(De,{variant:"secondary",children:"Inactive"}),a=l=>{if(!l)return s.jsx(De,{className:"bg-gray-100 text-gray-800",children:"Unknown"});const c={staff:"bg-blue-100 text-blue-800",student:"bg-purple-100 text-purple-800",parent:"bg-green-100 text-green-800",admin:"bg-red-100 text-red-800"};return s.jsx(De,{className:c[l]||"bg-gray-100 text-gray-800",children:l.charAt(0).toUpperCase()+l.slice(1)})},i=l=>l?s.jsxs(De,{className:"bg-green-100 text-green-800",children:[s.jsx(Es,{className:"w-3 h-3 mr-1"}),"Verified"]}):s.jsxs(De,{variant:"secondary",children:[s.jsx(ec,{className:"w-3 h-3 mr-1"}),"Unverified"]}),o=l=>l?s.jsxs(De,{className:"bg-blue-100 text-blue-800",children:[s.jsx(Ln,{className:"w-3 h-3 mr-1"}),"Enabled"]}):s.jsxs(De,{variant:"outline",children:[s.jsx(un,{className:"w-3 h-3 mr-1"}),"Disabled"]});return s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(xs,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsxs(vs,{className:"flex items-center gap-3",children:[s.jsx(Ja,{className:"h-6 w-6"}),"User Details"]}),s.jsxs(En,{children:["Complete information about ",e.first_name," ",e.last_name]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(Ja,{className:"h-5 w-5"}),"Basic Information"]})}),s.jsx(Ue,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),s.jsxs("p",{className:"text-lg font-semibold",children:[e.first_name," ",e.last_name]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"User Type"}),s.jsx("div",{className:"mt-1",children:a(e.user_type)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(ga,{className:"h-4 w-4"}),e.email]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(Za,{className:"h-4 w-4"}),e.phone_number||"Not provided"]})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"h-5 w-5"}),"Account Status"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),s.jsx("div",{className:"mt-1",children:n(e.is_active,e.is_deleted)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Verification"}),s.jsx("div",{className:"mt-1",children:i(e.account_verified)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"2FA"}),s.jsx("div",{className:"mt-1",children:o(e.two_factor_enabled)})]})]})})]}),(e.school||e.role)&&s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(kr,{className:"h-5 w-5"}),"School & Role Information"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.school&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"School"}),s.jsx("p",{className:"font-semibold",children:e.school.name}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Nr,{className:"h-3 w-3"}),e.school.location]})]}),e.role&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Role"}),s.jsx("p",{className:"font-semibold",children:e.role.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.role.description})]})]})})]}),(e.staff_profile||e.student_profile||e.parent_profile)&&s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsx(tt,{children:"Profile Information"})}),s.jsxs(Ue,{children:[e.staff_profile&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Employee ID:"}),s.jsx("span",{children:e.staff_profile.employee_id})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(De,{variant:e.staff_profile.status==="active"?"default":"secondary",children:e.staff_profile.status})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"On Duty:"}),s.jsx(De,{variant:e.staff_profile.is_on_duty?"default":"secondary",children:e.staff_profile.is_on_duty?"Yes":"No"})]})]}),e.student_profile&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Student ID:"}),s.jsx("span",{children:e.student_profile.student_id})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Grade:"}),s.jsx("span",{children:e.student_profile.grade})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(De,{variant:e.student_profile.status==="active"?"default":"secondary",children:e.student_profile.status})]})]}),e.parent_profile&&s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(De,{variant:e.parent_profile.status==="active"?"default":"secondary",children:e.parent_profile.status})]})})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(fn,{className:"h-5 w-5"}),"Activity Information"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date Joined"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(pa,{className:"h-4 w-4"}),new Date(e.date_joined).toLocaleDateString()]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Login"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(fn,{className:"h-4 w-4"}),e.last_login?new Date(e.last_login).toLocaleString():"Never"]})]}),e.last_login_ip&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Login IP"}),s.jsx("p",{className:"font-mono text-sm",children:e.last_login_ip})]}),e.failed_login_attempts>0&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Failed Login Attempts"}),s.jsx("p",{className:"text-red-600 font-semibold",children:e.failed_login_attempts})]})]})})]})]})]})})},kte=({user:e,isOpen:t,onClose:r,onUserUpdated:n})=>{const{toast:a}=mr(),[i,o]=g.useState(!1),[l,c]=g.useState({first_name:"",last_name:"",email:"",phone_number:"",account_verified:!1,two_factor_enabled:!1,is_active:!0});g.useEffect(()=>{e&&c({first_name:e.first_name,last_name:e.last_name,email:e.email,phone_number:e.phone_number,account_verified:e.account_verified,two_factor_enabled:e.two_factor_enabled,is_active:e.is_active})},[e]);const d=(p,f)=>{c(y=>({...y,[p]:f}))},u=async p=>{if(p.preventDefault(),!!e){o(!0);try{const f=await o0.updateUser(e.id,l);n(f),a({title:"User Updated",description:"User information has been updated successfully."}),r()}catch{a({title:"Error",description:"Failed to update user. Please try again.",variant:"destructive"})}finally{o(!1)}}},h=()=>{i||r()};return e?s.jsx(js,{open:t,onOpenChange:h,children:s.jsxs(xs,{className:"max-w-2xl",children:[s.jsxs(gs,{children:[s.jsx(vs,{children:"Edit User"}),s.jsxs(En,{children:["Update information for ",e.first_name," ",e.last_name]})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"first_name",children:"First Name"}),s.jsx($e,{id:"first_name",value:l.first_name,onChange:p=>d("first_name",p.target.value),required:!0,disabled:i})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"last_name",children:"Last Name"}),s.jsx($e,{id:"last_name",value:l.last_name,onChange:p=>d("last_name",p.target.value),required:!0,disabled:i})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"email",children:"Email"}),s.jsx($e,{id:"email",type:"email",value:l.email,onChange:p=>d("email",p.target.value),required:!0,disabled:i})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"phone_number",children:"Phone Number"}),s.jsx($e,{id:"phone_number",value:l.phone_number,onChange:p=>d("phone_number",p.target.value),disabled:i})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{htmlFor:"account_verified",children:"Account Verified"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark this user's account as verified"})]}),s.jsx(Zs,{id:"account_verified",checked:l.account_verified,onCheckedChange:p=>d("account_verified",p),disabled:i})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{htmlFor:"two_factor_enabled",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable 2FA for this user"})]}),s.jsx(Zs,{id:"two_factor_enabled",checked:l.two_factor_enabled,onCheckedChange:p=>d("two_factor_enabled",p),disabled:i})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{htmlFor:"is_active",children:"Account Active"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable this user's account"})]}),s.jsx(Zs,{id:"is_active",checked:l.is_active,onCheckedChange:p=>d("is_active",p),disabled:i})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsxs(ue,{type:"button",variant:"outline",onClick:h,disabled:i,children:[s.jsx(il,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(ue,{type:"submit",disabled:i,children:[i?s.jsx(In,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(bh,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})}):null},Ate=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[a,i]=g.useState(""),[o,l]=g.useState("all"),[c,d]=g.useState("all"),[u,h]=g.useState(null),[p,f]=g.useState(!1),[y,x]=g.useState(!1),[j,v]=g.useState(!1),[w,N]=g.useState(null),{toast:k}=mr();g.useEffect(()=>{(async()=>{n(!0);try{const oe=await o0.getAllUsers();t(oe)}catch{k({title:"Error",description:"Failed to fetch users. Please try again.",variant:"destructive"})}finally{n(!1)}})()},[k]);const P=e.filter(Q=>{var W;const ae=`${Q.first_name||""} ${Q.last_name||""}`.toLowerCase().includes(a.toLowerCase())||Q.email&&Q.email.toLowerCase().includes(a.toLowerCase())||((W=Q.school)==null?void 0:W.name)&&Q.school.name.toLowerCase().includes(a.toLowerCase()),U=o==="all"||Q.user_type===o,Z=c==="all"||c==="active"&&Q.is_active&&!Q.is_deleted||c==="inactive"&&!Q.is_active&&!Q.is_deleted||c==="deleted"&&Q.is_deleted;return ae&&U&&Z}),E=Q=>Q.is_deleted?s.jsx(De,{variant:"destructive",children:"Deleted"}):Q.is_active?s.jsx(De,{className:"bg-green-100 text-green-800",children:"Active"}):s.jsx(De,{variant:"secondary",children:"Inactive"}),I=Q=>{if(!Q)return s.jsx(De,{className:"bg-gray-100 text-gray-800",children:"Unknown"});const oe={staff:"bg-blue-100 text-blue-800",student:"bg-purple-100 text-purple-800",parent:"bg-green-100 text-green-800",admin:"bg-red-100 text-red-800"};return s.jsx(De,{className:oe[Q]||"bg-gray-100 text-gray-800",children:Q.charAt(0).toUpperCase()+Q.slice(1)})},T=Q=>{h(Q),f(!0)},R=Q=>{h(Q),x(!0)},X=Q=>{N(Q),v(!0)},D=async()=>{if(w)try{await o0.softDeleteUser(w.id),t(e.map(Q=>Q.id===w.id?{...Q,is_deleted:!0,is_active:!1}:Q)),k({title:"User Deleted",description:"User has been soft deleted successfully."})}catch{k({title:"Error",description:"Failed to delete user. Please try again.",variant:"destructive"})}finally{v(!1),N(null)}},C=async Q=>{try{await o0.restoreUser(Q.id),t(e.map(oe=>oe.id===Q.id?{...oe,is_deleted:!1,is_active:!0}:oe)),k({title:"User Restored",description:"User has been restored successfully."})}catch{k({title:"Error",description:"Failed to restore user. Please try again.",variant:"destructive"})}},$=Q=>{t(e.map(oe=>oe.id===Q.id?Q:oe))},B=()=>{i(""),l("all"),d("all")};return r?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((Q,oe)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},oe))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage all users across all schools"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{variant:"outline",children:[s.jsx(pn,{size:16,className:"mr-2"}),"Export"]}),s.jsxs(ue,{children:[s.jsx($q,{size:16,className:"mr-2"}),"Add User"]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Filters"}),s.jsx(Ws,{children:"Filter users by various criteria"})]}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(mn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx($e,{placeholder:"Search users...",value:a,onChange:Q=>i(Q.target.value),className:"pl-10"})]}),s.jsxs(es,{value:o,onValueChange:l,children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Filter by user type"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Types"}),s.jsx(Ve,{value:"staff",children:"Staff"}),s.jsx(Ve,{value:"student",children:"Student"}),s.jsx(Ve,{value:"parent",children:"Parent"}),s.jsx(Ve,{value:"admin",children:"Admin"})]})]}),s.jsxs(es,{value:c,onValueChange:d,children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Filter by status"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Status"}),s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"inactive",children:"Inactive"}),s.jsx(Ve,{value:"deleted",children:"Deleted"})]})]}),s.jsxs(ue,{variant:"outline",className:"flex items-center gap-2",onClick:B,children:[s.jsx(Ld,{size:16}),"Clear Filters"]})]})})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsxs(tt,{children:["Users (",P.length,")"]}),s.jsx(Ws,{children:"All registered users in the system"})]}),s.jsx(Ue,{children:s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"Name"}),s.jsx(yt,{children:"Email"}),s.jsx(yt,{children:"User Type"}),s.jsx(yt,{children:"School"}),s.jsx(yt,{children:"Status"}),s.jsx(yt,{children:"Last Login"}),s.jsx(yt,{children:"Created"}),s.jsx(yt,{className:"text-right",children:"Actions"})]})}),s.jsx(si,{children:P.map(Q=>{var oe;return s.jsxs(hr,{children:[s.jsx(vt,{className:"font-medium",children:`${Q.first_name||""} ${Q.last_name||""}`.trim()||"Unknown User"}),s.jsx(vt,{children:Q.email||"N/A"}),s.jsx(vt,{children:I(Q.user_type)}),s.jsx(vt,{children:((oe=Q.school)==null?void 0:oe.name)||"N/A"}),s.jsx(vt,{children:E(Q)}),s.jsx(vt,{children:Q.last_login?new Date(Q.last_login).toLocaleString():"Never"}),s.jsx(vt,{children:Q.date_joined?new Date(Q.date_joined).toLocaleDateString():"N/A"}),s.jsx(vt,{className:"text-right",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsx(Rd,{children:"Actions"}),s.jsxs(Ut,{onClick:()=>T(Q),children:[s.jsx(qr,{className:"mr-2 h-4 w-4"}),"View Details"]}),!Q.is_deleted&&s.jsxs(Ut,{onClick:()=>R(Q),children:[s.jsx(jn,{className:"mr-2 h-4 w-4"}),"Edit User"]}),s.jsx(bd,{}),Q.is_deleted?s.jsxs(Ut,{className:"text-green-600",onClick:()=>C(Q),children:[s.jsx(Iq,{className:"mr-2 h-4 w-4"}),"Restore User"]}):s.jsxs(Ut,{className:"text-red-600",onClick:()=>X(Q),children:[s.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Delete User"]})]})]})})]},Q.id)})})]})})]}),s.jsx(Cte,{user:u,isOpen:p,onClose:()=>{f(!1),h(null)}}),s.jsx(kte,{user:u,isOpen:y,onClose:()=>{x(!1),h(null)},onUserUpdated:$}),s.jsx(nc,{open:j,onOpenChange:v,children:s.jsxs(ll,{children:[s.jsxs(cl,{children:[s.jsx(ul,{children:"Delete User"}),s.jsxs(hl,{children:["Are you sure you want to delete ",(w==null?void 0:w.first_name)||""," ",(w==null?void 0:w.last_name)||"","? This action will soft delete the user and can be reversed later."]})]}),s.jsxs(dl,{children:[s.jsx(ml,{children:"Cancel"}),s.jsx(fl,{onClick:D,className:"bg-red-600 hover:bg-red-700",children:"Delete User"})]})]})})]})},Pte=()=>{const e=Ia(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[i,o]=g.useState(""),[l,c]=g.useState("all"),[d,u]=g.useState("all");g.useEffect(()=>{(async()=>{a(!0);try{const j=await hd.getAllSchools();Array.isArray(j)&&j.length>0?r(j):r([{_id:"1",name:"Springfield High School",address:"123 Main St, Springfield, IL",phone:"+1-555-0123",email:"info@springfield.edu",principal:{name:"John Doe",phone:"+1-555-0124",email:"john.doe@springfield.edu"},isActive:!0,location:"Springfield, IL",type:"secondary",capacity:1500,currentStudents:1250,createdAt:"2023-09-15T00:00:00.000Z",updatedAt:"2024-01-15T10:30:00.000Z",subscription:"Premium",staff:85,lastActive:"2024-01-15 10:30 AM"},{_id:"2",name:"Lincoln Elementary",address:"456 Oak Ave, Lincoln, NE",phone:"+1-555-0125",email:"info@lincoln.edu",principal:{name:"Jane Smith",phone:"+1-555-0126",email:"jane.smith@lincoln.edu"},isActive:!0,location:"Lincoln, NE",type:"primary",capacity:500,currentStudents:450,createdAt:"2023-10-20T00:00:00.000Z",updatedAt:"2024-01-14T14:15:00.000Z",subscription:"Basic",staff:32,lastActive:"2024-01-14 02:15 PM"}])}catch{r([{_id:"1",name:"Springfield High School",address:"123 Main St, Springfield, IL",phone:"+1-555-0123",email:"info@springfield.edu",principal:{name:"John Doe",phone:"+1-555-0124",email:"john.doe@springfield.edu"},isActive:!0,location:"Springfield, IL",type:"secondary",capacity:1500,currentStudents:1250,createdAt:"2023-09-15T00:00:00.000Z",updatedAt:"2024-01-15T10:30:00.000Z",subscription:"Premium",staff:85,lastActive:"2024-01-15 10:30 AM"},{_id:"2",name:"Lincoln Elementary",address:"456 Oak Ave, Lincoln, NE",phone:"+1-555-0125",email:"info@lincoln.edu",principal:{name:"Jane Smith",phone:"+1-555-0126",email:"jane.smith@lincoln.edu"},isActive:!0,location:"Lincoln, NE",type:"primary",capacity:500,currentStudents:450,createdAt:"2023-10-20T00:00:00.000Z",updatedAt:"2024-01-14T14:15:00.000Z",subscription:"Basic",staff:32,lastActive:"2024-01-14 02:15 PM"}])}finally{a(!1)}})()},[]);const h=t.filter(x=>{var N;if(!x||!x.name)return!1;const j=(x.name||"").toLowerCase().includes(i.toLowerCase())||(((N=x.principal)==null?void 0:N.name)||"").toLowerCase().includes(i.toLowerCase())||(x.location||"").toLowerCase().includes(i.toLowerCase()),v=l==="all"||l==="active"&&(x.isActive||!1)||l==="inactive"&&!x.isActive||l==="pending"&&!x.isActive||l==="suspended"&&!x.isActive,w=d==="all"||(x.subscription||"Basic")===d;return j&&v&&w}),p=x=>x?s.jsx(De,{className:"bg-green-100 text-green-800",children:"Active"}):s.jsx(De,{className:"bg-red-100 text-red-800",children:"Inactive"}),f=x=>{switch(x){case"Premium":return s.jsx(De,{className:"bg-purple-100 text-purple-800",children:"Premium"});case"Basic":return s.jsx(De,{className:"bg-blue-100 text-blue-800",children:"Basic"});default:return s.jsx(De,{variant:"outline",children:x})}},y=async x=>{try{await hd.toggleSchoolStatus(x);const j=await hd.getAllSchools();r(j)}catch{}};return n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((x,j)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},j))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Schools Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage all registered schools and their subscriptions"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{variant:"outline",children:[s.jsx(pn,{size:16,className:"mr-2"}),"Export"]}),s.jsxs(ue,{children:[s.jsx(kr,{size:16,className:"mr-2"}),"Add School"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Schools"}),s.jsx(kr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last month"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Active Schools"}),s.jsx(Es,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(x=>x.isActive).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Inactive Schools"}),s.jsx(fn,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(x=>!x.isActive).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently inactive"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Premium Schools"}),s.jsx(De,{className:"bg-purple-100 text-purple-800",children:"Premium"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(x=>x.subscription==="Premium").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Premium subscriptions"})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Filters"}),s.jsx(Ws,{children:"Filter schools by various criteria"})]}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(mn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx($e,{placeholder:"Search schools...",value:i,onChange:x=>o(x.target.value),className:"pl-10"})]}),s.jsxs(es,{value:l,onValueChange:c,children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Filter by status"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Status"}),s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"inactive",children:"Inactive"}),s.jsx(Ve,{value:"pending",children:"Pending"}),s.jsx(Ve,{value:"suspended",children:"Suspended"})]})]}),s.jsxs(es,{value:d,onValueChange:u,children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Filter by subscription"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Subscriptions"}),s.jsx(Ve,{value:"Premium",children:"Premium"}),s.jsx(Ve,{value:"Basic",children:"Basic"})]})]}),s.jsxs(ue,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Ld,{size:16}),"Clear Filters"]})]})})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsxs(tt,{children:["Schools (",h.length,")"]}),s.jsx(Ws,{children:"All registered schools in the system"})]}),s.jsx(Ue,{children:h.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(kr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Schools Found"}),s.jsx("p",{className:"text-muted-foreground",children:t.length===0?"No schools are currently registered in the system.":"No schools match your current filters."})]}):s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"School Name"}),s.jsx(yt,{children:"Principal"}),s.jsx(yt,{children:"Location"}),s.jsx(yt,{children:"Status"}),s.jsx(yt,{children:"Subscription"}),s.jsx(yt,{children:"Students"}),s.jsx(yt,{children:"Staff"}),s.jsx(yt,{children:"Last Active"}),s.jsx(yt,{className:"text-right",children:"Actions"})]})}),s.jsx(si,{children:h.map(x=>{var j,v,w;return s.jsxs(hr,{children:[s.jsx(vt,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:x.name||"Unknown School"}),s.jsx(ue,{variant:"ghost",size:"sm",onClick:()=>e(`/super-admin/schools/${x._id}`),className:"h-6 w-6 p-0",children:s.jsx(qr,{className:"h-3 w-3"})})]})}),s.jsx(vt,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:((j=x.principal)==null?void 0:j.name)||"N/A"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:((v=x.principal)==null?void 0:v.email)||"N/A"})]})}),s.jsx(vt,{children:x.location||"N/A"}),s.jsx(vt,{children:p(x.isActive||!1)}),s.jsx(vt,{children:f(x.subscription||"Basic")}),s.jsx(vt,{children:(x.currentStudents||0).toLocaleString()}),s.jsx(vt,{children:((w=x.staff)==null?void 0:w.toLocaleString())||"N/A"}),s.jsx(vt,{children:x.lastActive||"Never"}),s.jsx(vt,{className:"text-right",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsx(Rd,{children:"Actions"}),s.jsxs(Ut,{onClick:()=>e(`/super-admin/schools/${x._id}`),children:[s.jsx(qr,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Ut,{children:[s.jsx(jn,{className:"mr-2 h-4 w-4"}),"Edit School"]}),s.jsx(Ut,{onClick:()=>y(x._id),children:x.isActive?s.jsxs(s.Fragment,{children:[s.jsx(ec,{className:"mr-2 h-4 w-4"}),"Deactivate School"]}):s.jsxs(s.Fragment,{children:[s.jsx(Es,{className:"mr-2 h-4 w-4"}),"Activate School"]})}),s.jsx(bd,{}),s.jsxs(Ut,{className:"text-red-600",children:[s.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Delete School"]})]})]})})]},x._id)})})]})})]})]})},Ete=()=>{var p;const{id:e}=pM(),t=Ia(),[r,n]=g.useState(null),[a,i]=g.useState(!0),[o,l]=g.useState(null);g.useEffect(()=>{(async()=>{if(e){i(!0);try{const y=await hd.getSchoolById(e);n(y),l(null)}catch{l("Failed to load school details")}finally{i(!1)}}})()},[e]);const c=async()=>{if(r)try{await hd.toggleSchoolStatus(r._id);const f=await hd.getSchoolById(r._id);n(f)}catch{}},d=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),u=f=>f?s.jsx(De,{className:"bg-green-100 text-green-800",children:"Active"}):s.jsx(De,{className:"bg-red-100 text-red-800",children:"Inactive"}),h=f=>{switch(f){case"Premium":return s.jsx(De,{className:"bg-purple-100 text-purple-800",children:"Premium"});case"Basic":return s.jsx(De,{className:"bg-blue-100 text-blue-800",children:"Basic"});default:return s.jsx(De,{variant:"outline",children:f})}};return a?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(4)].map((f,y)=>s.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},y))})]})}):o||!r?s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center gap-4 mb-6",children:s.jsxs(ue,{variant:"outline",onClick:()=>t(-1),children:[s.jsx(Jp,{className:"mr-2 h-4 w-4"}),"Back"]})}),s.jsx(ze,{children:s.jsx(Ue,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(un,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"School Not Found"}),s.jsx("p",{className:"text-muted-foreground",children:o||"The requested school could not be found."})]})})})]}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(ue,{variant:"outline",onClick:()=>t(-1),children:[s.jsx(Jp,{className:"mr-2 h-4 w-4"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:r.name}),s.jsx("p",{className:"text-muted-foreground",children:"School Details"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{variant:"outline",children:[s.jsx(jn,{className:"mr-2 h-4 w-4"}),"Edit School"]}),s.jsx(ue,{variant:r.isActive?"destructive":"default",onClick:c,children:r.isActive?s.jsxs(s.Fragment,{children:[s.jsx(ec,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):s.jsxs(s.Fragment,{children:[s.jsx(Es,{className:"mr-2 h-4 w-4"}),"Activate"]})})]})]}),s.jsxs("div",{className:"flex gap-4",children:[u(r.isActive),h(r.subscription||"Basic")]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(kr,{className:"h-5 w-5"}),"School Information"]})}),s.jsx(Ue,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"School Name"}),s.jsx("p",{className:"text-lg font-semibold",children:r.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"School Type"}),s.jsx("p",{className:"text-lg capitalize",children:r.type})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),s.jsx("p",{className:"text-lg",children:r.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),s.jsx("p",{className:"text-lg",children:r.location})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),s.jsx("p",{className:"text-lg",children:r.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),s.jsx("p",{className:"text-lg",children:r.email})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(Ja,{className:"h-5 w-5"}),"Principal Information"]})}),s.jsx(Ue,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Principal Name"}),s.jsx("p",{className:"text-lg font-semibold",children:r.principal.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Principal Phone"}),s.jsx("p",{className:"text-lg",children:r.principal.phone})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Principal Email"}),s.jsx("p",{className:"text-lg",children:r.principal.email})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center gap-2",children:[s.jsx(_o,{className:"h-5 w-5"}),"School Statistics"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.capacity.toLocaleString()}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Capacity"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.currentStudents.toLocaleString()}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Students"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((p=r.staff)==null?void 0:p.toLocaleString())||"N/A"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Staff Members"})]})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsx(tt,{children:"Quick Actions"})}),s.jsxs(Ue,{className:"space-y-2",children:[s.jsxs(ue,{variant:"outline",className:"w-full justify-start",children:[s.jsx(jn,{className:"mr-2 h-4 w-4"}),"Edit School"]}),s.jsxs(ue,{variant:"outline",className:"w-full justify-start",children:[s.jsx(ws,{className:"mr-2 h-4 w-4"}),"View Students"]}),s.jsxs(ue,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Ja,{className:"mr-2 h-4 w-4"}),"View Staff"]}),s.jsxs(ue,{variant:"outline",className:"w-full justify-start",children:[s.jsx(kr,{className:"mr-2 h-4 w-4"}),"Manage Routes"]})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsx(tt,{children:"Timeline"})}),s.jsxs(Ue,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"School Created"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d(r.createdAt)})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Last Updated"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d(r.updatedAt)})]})]}),r.lastActive&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Last Active"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r.lastActive})]})]})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsx(tt,{children:"Contact Information"})}),s.jsxs(Ue,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Za,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:r.phone})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ga,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:r.email})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:r.address})]})]})]})]})]})]})},Jg={async getSubscriptionPlans(){try{return(await Tt.get("/subscription-plans/")).data}catch(e){throw e}},async createSubscriptionPlan(e){try{return(await Tt.post("/subscription-plans/",e)).data}catch(t){throw t}},async updateSubscriptionPlan(e,t){try{return(await Tt.put(`/subscription-plans/${e}/`,t)).data}catch(r){throw r}},async deleteSubscriptionPlan(e){try{await Tt.delete(`/subscription-plans/${e}/`)}catch(t){throw t}},async getSubscriptionPlan(e){try{return(await Tt.get(`/subscription-plans/${e}/`)).data}catch(t){throw t}}},mk=[{value:"monthly",label:"Monthly"},{value:"annually",label:"Annually"},{value:"quarterly",label:"Quarterly"}],Lte=()=>{const{toast:e}=mr(),[t,r]=g.useState([]),[n,a]=g.useState([]),[i,o]=g.useState(!0),[l,c]=g.useState("plans"),[d,u]=g.useState(!1),[h,p]=g.useState(!1),[f,y]=g.useState(!1),[x,j]=g.useState(!1),[v,w]=g.useState(!1),[N,k]=g.useState(null),[P,E]=g.useState(null),[I,T]=g.useState(null),[R,X]=g.useState(!1),[D,C]=g.useState(!1),[$,B]=g.useState(!1),[Q,oe]=g.useState(null),[ae,U]=g.useState(null),[Z,W]=g.useState(null),[ve,A]=g.useState({name:"",description:"",base_price:"",price_per_student:"",price_per_bus:"",default_billing_cycle:"monthly",is_active:!0,features:{max_students:100,max_parents:100,max_buses:5,sms_notifications:!1,whatsapp_integration:!1,realtime_tracking:!1,parent_app_access:!1,basic_reports:!1,driver_management:!1,route_optimization:!1,advanced_analytics:!1,api_access:!1,geofencing:!1,speed_monitoring:!1,fuel_tracking:!1,maintenance_tracking:!1,custom_integrations:!1,priority_support:!1}});g.useEffect(()=>{z(),M()},[]);const z=async()=>{try{o(!0);const xe=await Jg.getSubscriptionPlans(),ge=Array.isArray(xe)?xe:(xe==null?void 0:xe.results)||(xe==null?void 0:xe.data)||[];r(ge||[]),ge&&ge.length>0&&e({title:"Success",description:"Subscription plans loaded successfully!"})}catch{e({title:"Error",description:"Failed to load subscription plans. Using mock data.",variant:"destructive"}),r([{id:"1",name:"premium_school",description:"Comprehensive solution for large schools with advanced requirements. Full API access, fuel tracking, and priority support.",base_price:"10000.00",price_per_student:"12.00",price_per_bus:"500.00",features_json:{max_students:1e3,max_parents:1e3,max_buses:15,sms_notifications:!0,whatsapp_integration:!0,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!0,advanced_analytics:!0,api_access:!0,geofencing:!0,speed_monitoring:!0,fuel_tracking:!0,maintenance_tracking:!0,custom_integrations:!0,priority_support:!0},is_active:!0,default_billing_cycle:"annually"},{id:"2",name:"basic_school",description:"Essential features for small to medium schools. Basic tracking and reporting capabilities.",base_price:"5000.00",price_per_student:"8.00",price_per_bus:"300.00",features_json:{max_students:500,max_parents:500,max_buses:8,sms_notifications:!0,whatsapp_integration:!1,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!1,advanced_analytics:!1,api_access:!1,geofencing:!1,speed_monitoring:!1,fuel_tracking:!1,maintenance_tracking:!1,custom_integrations:!1,priority_support:!1},is_active:!0,default_billing_cycle:"monthly"}])}finally{o(!1)}},M=async()=>{a([{id:"1",schoolName:"Springfield High School",plan:"premium_school",status:"active",amount:299.99,billingCycle:"Monthly",nextBilling:"2024-02-15",startDate:"2023-09-15",endDate:"2024-09-15",features:["Unlimited Students","Advanced Analytics","Priority Support"],paymentMethod:"Credit Card",lastPayment:"2024-01-15"},{id:"2",schoolName:"Lincoln Elementary",plan:"basic_school",status:"active",amount:99.99,billingCycle:"Monthly",nextBilling:"2024-02-20",startDate:"2023-10-20",endDate:"2024-10-20",features:["Up to 500 Students","Basic Analytics"],paymentMethod:"Credit Card",lastPayment:"2024-01-20"}]),o(!1)},re=async()=>{try{p(!0),await Jg.createSubscriptionPlan({...ve,features_json:ve.features}),u(!1),z(),e({title:"Success",description:"Subscription plan created successfully!"}),A({name:"",description:"",base_price:"",price_per_student:"",price_per_bus:"",default_billing_cycle:"monthly",is_active:!0,features:{max_students:100,max_parents:100,max_buses:5,sms_notifications:!1,whatsapp_integration:!1,realtime_tracking:!1,parent_app_access:!1,basic_reports:!1,driver_management:!1,route_optimization:!1,advanced_analytics:!1,api_access:!1,geofencing:!1,speed_monitoring:!1,fuel_tracking:!1,maintenance_tracking:!1,custom_integrations:!1,priority_support:!1}})}catch{e({title:"Error",description:"Failed to create subscription plan. Please try again.",variant:"destructive"})}finally{p(!1)}},te=xe=>{k(xe),y(!0)},O=xe=>{E(xe),j(!0)},ce=async()=>{if(N)try{p(!0),await Jg.updateSubscriptionPlan(N.id,{name:N.name,description:N.description,base_price:N.base_price,price_per_student:N.price_per_student,price_per_bus:N.price_per_bus,features_json:N.features_json,is_active:N.is_active,default_billing_cycle:N.default_billing_cycle}),y(!1),k(null),z(),e({title:"Success",description:"Subscription plan updated successfully!"})}catch{e({title:"Error",description:"Failed to update subscription plan. Please try again.",variant:"destructive"})}finally{p(!1)}},le=async xe=>{try{w(!0),await Jg.deleteSubscriptionPlan(xe),T(null),z(),e({title:"Success",description:"Subscription plan deleted successfully!"})}catch{e({title:"Error",description:"Failed to delete subscription plan. Please try again.",variant:"destructive"})}finally{w(!1)}},Ee=xe=>{oe(xe),X(!0)},_e=xe=>{U(xe),C(!0)},Be=async()=>{if(Q)try{p(!0),a(xe=>xe.map(ge=>ge.id===Q.id?Q:ge)),X(!1),oe(null),e({title:"Success",description:"School subscription updated successfully!"})}catch{e({title:"Error",description:"Failed to update school subscription. Please try again.",variant:"destructive"})}finally{p(!1)}},Ge=async xe=>{try{B(!0),a(ge=>ge.filter(se=>se.id!==xe)),W(null),e({title:"Success",description:"School subscription deleted successfully!"})}catch{e({title:"Error",description:"Failed to delete school subscription. Please try again.",variant:"destructive"})}finally{B(!1)}},ut=async xe=>{try{p(!0),a(ge=>ge.map(se=>se.id===xe?{...se,status:"cancelled"}:se)),e({title:"Success",description:"School subscription cancelled successfully!"})}catch{e({title:"Error",description:"Failed to cancel school subscription. Please try again.",variant:"destructive"})}finally{p(!1)}},Le=xe=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(xe)),K=xe=>{switch(xe){case"active":return s.jsx(De,{className:"bg-green-100 text-green-800",children:"Active"});case"expired":return s.jsx(De,{className:"bg-red-100 text-red-800",children:"Expired"});case"cancelled":return s.jsx(De,{variant:"secondary",children:"Cancelled"});case"pending":return s.jsx(De,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});default:return s.jsx(De,{variant:"outline",children:xe})}},He=xe=>{switch(xe){case"premium_school":return s.jsx(De,{className:"bg-purple-100 text-purple-800",children:"Premium"});case"basic_school":return s.jsx(De,{className:"bg-blue-100 text-blue-800",children:"Basic"});default:return s.jsx(De,{variant:"outline",children:xe})}};return i?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((xe,ge)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},ge))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subscriptions Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage subscription plans and school subscriptions"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{variant:"outline",children:[s.jsx(pn,{size:16,className:"mr-2"}),"Export"]}),s.jsxs(js,{open:d,onOpenChange:u,children:[s.jsx(Jf,{asChild:!0,children:s.jsxs(ue,{children:[s.jsx(va,{size:16,className:"mr-2"}),"Create Plan"]})}),s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsx(vs,{children:"Create New Subscription Plan"}),s.jsx(En,{children:"Define a new subscription plan with features and pricing"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"planName",children:"Plan Name"}),s.jsx($e,{id:"planName",value:ve.name,onChange:xe=>A(ge=>({...ge,name:xe.target.value})),placeholder:"e.g., premium_school"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"billingCycle",children:"Default Billing Cycle"}),s.jsxs(es,{value:ve.default_billing_cycle,onValueChange:xe=>A(ge=>({...ge,default_billing_cycle:xe})),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsx(Xt,{children:mk.map(xe=>s.jsx(Ve,{value:xe.value,children:xe.label},xe.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"basePrice",children:"Base Price"}),s.jsx($e,{id:"basePrice",type:"number",value:ve.base_price,onChange:xe=>A(ge=>({...ge,base_price:xe.target.value})),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"pricePerStudent",children:"Price per Student"}),s.jsx($e,{id:"pricePerStudent",type:"number",value:ve.price_per_student,onChange:xe=>A(ge=>({...ge,price_per_student:xe.target.value})),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"pricePerBus",children:"Price per Bus"}),s.jsx($e,{id:"pricePerBus",type:"number",value:ve.price_per_bus,onChange:xe=>A(ge=>({...ge,price_per_bus:xe.target.value})),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"maxStudents",children:"Max Students"}),s.jsx($e,{id:"maxStudents",type:"number",value:ve.features.max_students,onChange:xe=>A(ge=>({...ge,features:{...ge.features,max_students:parseInt(xe.target.value)}}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"description",children:"Description"}),s.jsx(Kn,{id:"description",value:ve.description,onChange:xe=>A(ge=>({...ge,description:xe.target.value})),rows:3})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(de,{children:"Features"}),s.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg p-4",children:s.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(ve.features).map(([xe,ge])=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zs,{checked:typeof ge=="boolean"?ge:!1,onCheckedChange:se=>A(F=>({...F,features:{...F.features,[xe]:se}}))}),s.jsx(de,{className:"text-sm capitalize",children:xe.replace(/_/g," ")})]},xe))})})]}),s.jsxs(lo,{children:[s.jsx(ue,{variant:"outline",onClick:()=>u(!1),disabled:h,children:"Cancel"}),s.jsx(ue,{onClick:re,disabled:h,children:h?"Creating...":"Create Plan"})]})]})]}),s.jsx(js,{open:f,onOpenChange:y,children:s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsx(vs,{children:"Edit Subscription Plan"}),s.jsx(En,{children:"Update the subscription plan details and features"})]}),N&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editPlanName",children:"Plan Name"}),s.jsx($e,{id:"editPlanName",value:N.name,onChange:xe=>k(ge=>ge?{...ge,name:xe.target.value}:null),placeholder:"e.g., premium_school"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editBillingCycle",children:"Default Billing Cycle"}),s.jsxs(es,{value:N.default_billing_cycle,onValueChange:xe=>k(ge=>ge?{...ge,default_billing_cycle:xe}:null),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsx(Xt,{children:mk.map(xe=>s.jsx(Ve,{value:xe.value,children:xe.label},xe.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editBasePrice",children:"Base Price"}),s.jsx($e,{id:"editBasePrice",type:"number",value:N.base_price,onChange:xe=>k(ge=>ge?{...ge,base_price:xe.target.value}:null),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editPricePerStudent",children:"Price per Student"}),s.jsx($e,{id:"editPricePerStudent",type:"number",value:N.price_per_student,onChange:xe=>k(ge=>ge?{...ge,price_per_student:xe.target.value}:null),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editPricePerBus",children:"Price per Bus"}),s.jsx($e,{id:"editPricePerBus",type:"number",value:N.price_per_bus,onChange:xe=>k(ge=>ge?{...ge,price_per_bus:xe.target.value}:null),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editMaxStudents",children:"Max Students"}),s.jsx($e,{id:"editMaxStudents",type:"number",value:N.features_json.max_students,onChange:xe=>k(ge=>ge?{...ge,features_json:{...ge.features_json,max_students:parseInt(xe.target.value)}}:null)})]})]}),N&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editDescription",children:"Description"}),s.jsx(Kn,{id:"editDescription",value:N.description,onChange:xe=>k(ge=>ge?{...ge,description:xe.target.value}:null),rows:3})]}),N&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(de,{children:"Features"}),s.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg p-4",children:s.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(N.features_json).map(([xe,ge])=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zs,{checked:typeof ge=="boolean"?ge:!1,onCheckedChange:se=>k(F=>F?{...F,features_json:{...F.features_json,[xe]:se}}:null)}),s.jsx(de,{className:"text-sm capitalize",children:xe.replace(/_/g," ")})]},xe))})})]}),s.jsxs(lo,{children:[s.jsx(ue,{variant:"outline",onClick:()=>{y(!1),k(null)},disabled:h,children:"Cancel"}),s.jsx(ue,{onClick:ce,disabled:h,children:h?"Updating...":"Update Plan"})]})]})}),s.jsx(js,{open:x,onOpenChange:j,children:s.jsxs(xs,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsx(vs,{children:"Subscription Plan Details"}),s.jsx(En,{children:"Complete information about the subscription plan"})]}),P&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:P.name.replace(/_/g," ").toUpperCase()}),s.jsx("p",{className:"text-gray-600 mt-1",children:P.description})]}),s.jsx(De,{variant:P.is_active?"default":"secondary",children:P.is_active?"Active":"Inactive"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsxs(tt,{className:"text-sm font-medium flex items-center",children:[s.jsx(ld,{className:"h-4 w-4 mr-2"}),"Base Price"]})}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Le(P.base_price)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Monthly base cost"})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsxs(tt,{className:"text-sm font-medium flex items-center",children:[s.jsx(ws,{className:"h-4 w-4 mr-2"}),"Per Student"]})}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Le(P.price_per_student)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Per student per month"})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsxs(tt,{className:"text-sm font-medium flex items-center",children:[s.jsx(qi,{className:"h-4 w-4 mr-2"}),"Per Bus"]})}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Le(P.price_per_bus)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Per bus per month"})]})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center",children:[s.jsx(pa,{className:"h-4 w-4 mr-2"}),"Billing Information"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium",children:"Default Billing Cycle"}),s.jsx("p",{className:"text-lg capitalize",children:P.default_billing_cycle})]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium",children:"Plan Status"}),s.jsx("p",{className:"text-lg",children:P.is_active?"Active":"Inactive"})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center",children:[s.jsx(Aw,{className:"h-4 w-4 mr-2"}),"Features & Limits"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Limits"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:"Max Students"}),s.jsx("span",{className:"font-semibold",children:P.features_json.max_students})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:"Max Parents"}),s.jsx("span",{className:"font-semibold",children:P.features_json.max_parents})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:"Max Buses"}),s.jsx("span",{className:"font-semibold",children:P.features_json.max_buses})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Features"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(P.features_json).map(([xe,ge])=>typeof ge=="boolean"?s.jsxs("div",{className:"flex items-center space-x-2 p-2",children:[ge?s.jsx(Es,{className:"h-4 w-4 text-green-600"}):s.jsx(un,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm capitalize",children:xe.replace(/_/g," ")})]},xe):null)})]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center",children:[s.jsx(_o,{className:"h-4 w-4 mr-2"}),"Plan Statistics"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Subscriptions"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:Le("0")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"0%"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Conversion Rate"})]})]})})]})]}),s.jsxs(lo,{children:[s.jsx(ue,{variant:"outline",onClick:()=>{j(!1),E(null)},children:"Close"}),s.jsxs(ue,{onClick:()=>{j(!1),E(null),P&&te(P)},children:[s.jsx(jn,{className:"h-4 w-4 mr-2"}),"Edit Plan"]})]})]})}),s.jsx(js,{open:!!I,onOpenChange:()=>T(null),children:s.jsxs(xs,{children:[s.jsxs(gs,{children:[s.jsx(vs,{children:"Delete Subscription Plan"}),s.jsx(En,{children:"Are you sure you want to delete this subscription plan? This action cannot be undone."})]}),s.jsxs(lo,{children:[s.jsx(ue,{variant:"outline",onClick:()=>T(null),disabled:v,children:"Cancel"}),s.jsx(ue,{variant:"destructive",onClick:()=>I&&le(I),disabled:v,children:v?"Deleting...":"Delete Plan"})]})]})}),s.jsx(js,{open:R,onOpenChange:X,children:s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsx(vs,{children:"Edit School Subscription"}),s.jsx(En,{children:"Update the school subscription details"})]}),Q&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editSchoolName",children:"School Name"}),s.jsx($e,{id:"editSchoolName",value:Q.schoolName,onChange:xe=>oe(ge=>ge?{...ge,schoolName:xe.target.value}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editPlan",children:"Plan"}),s.jsxs(es,{value:Q.plan,onValueChange:xe=>oe(ge=>ge?{...ge,plan:xe}:null),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"premium_school",children:"Premium School"}),s.jsx(Ve,{value:"basic_school",children:"Basic School"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editStatus",children:"Status"}),s.jsxs(es,{value:Q.status,onValueChange:xe=>oe(ge=>ge?{...ge,status:xe}:null),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"expired",children:"Expired"}),s.jsx(Ve,{value:"cancelled",children:"Cancelled"}),s.jsx(Ve,{value:"pending",children:"Pending"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editAmount",children:"Amount"}),s.jsx($e,{id:"editAmount",type:"number",value:Q.amount,onChange:xe=>oe(ge=>ge?{...ge,amount:parseFloat(xe.target.value)}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editBillingCycle",children:"Billing Cycle"}),s.jsxs(es,{value:Q.billingCycle,onValueChange:xe=>oe(ge=>ge?{...ge,billingCycle:xe}:null),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"Monthly",children:"Monthly"}),s.jsx(Ve,{value:"Annually",children:"Annually"}),s.jsx(Ve,{value:"Quarterly",children:"Quarterly"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editPaymentMethod",children:"Payment Method"}),s.jsx($e,{id:"editPaymentMethod",value:Q.paymentMethod,onChange:xe=>oe(ge=>ge?{...ge,paymentMethod:xe.target.value}:null)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editStartDate",children:"Start Date"}),s.jsx($e,{id:"editStartDate",type:"date",value:Q.startDate,onChange:xe=>oe(ge=>ge?{...ge,startDate:xe.target.value}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editEndDate",children:"End Date"}),s.jsx($e,{id:"editEndDate",type:"date",value:Q.endDate,onChange:xe=>oe(ge=>ge?{...ge,endDate:xe.target.value}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editNextBilling",children:"Next Billing"}),s.jsx($e,{id:"editNextBilling",type:"date",value:Q.nextBilling,onChange:xe=>oe(ge=>ge?{...ge,nextBilling:xe.target.value}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editLastPayment",children:"Last Payment"}),s.jsx($e,{id:"editLastPayment",type:"date",value:Q.lastPayment,onChange:xe=>oe(ge=>ge?{...ge,lastPayment:xe.target.value}:null)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"editFeatures",children:"Features"}),s.jsx(Kn,{id:"editFeatures",value:Q.features.join(", "),onChange:xe=>oe(ge=>ge?{...ge,features:xe.target.value.split(", ")}:null),placeholder:"Enter features separated by commas"})]})]}),s.jsxs(lo,{children:[s.jsx(ue,{variant:"outline",onClick:()=>{X(!1),oe(null)},disabled:h,children:"Cancel"}),s.jsx(ue,{onClick:Be,disabled:h,children:h?"Updating...":"Update Subscription"})]})]})}),s.jsx(js,{open:D,onOpenChange:C,children:s.jsxs(xs,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsx(vs,{children:"School Subscription Details"}),s.jsx(En,{children:"Complete information about the school subscription"})]}),ae&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:ae.schoolName}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Subscription Details"})]}),K(ae.status)]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsxs(tt,{className:"text-sm font-medium flex items-center",children:[s.jsx(ld,{className:"h-4 w-4 mr-2"}),"Amount"]})}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Le(ae.amount.toString())}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[ae.billingCycle," billing"]})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsxs(tt,{className:"text-sm font-medium flex items-center",children:[s.jsx(pa,{className:"h-4 w-4 mr-2"}),"Next Billing"]})}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:new Date(ae.nextBilling).toLocaleDateString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Due date"})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{className:"pb-2",children:s.jsxs(tt,{className:"text-sm font-medium flex items-center",children:[s.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Payment Method"]})}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:ae.paymentMethod}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last payment: ",ae.lastPayment]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center",children:[s.jsx(Aw,{className:"h-4 w-4 mr-2"}),"Plan Information"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Plan:"}),He(ae.plan)]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Billing Cycle:"}),s.jsx("span",{children:ae.billingCycle})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Status:"}),K(ae.status)]})]})})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center",children:[s.jsx(pa,{className:"h-4 w-4 mr-2"}),"Date Information"]})}),s.jsx(Ue,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Start Date:"}),s.jsx("span",{children:new Date(ae.startDate).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"End Date:"}),s.jsx("span",{children:new Date(ae.endDate).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Last Payment:"}),s.jsx("span",{children:new Date(ae.lastPayment).toLocaleDateString()})]})]})})]})]}),s.jsxs(ze,{children:[s.jsx(Xe,{children:s.jsxs(tt,{className:"flex items-center",children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Features"]})}),s.jsx(Ue,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:ae.features.map((xe,ge)=>s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[s.jsx(Es,{className:"h-3 w-3 text-green-600"}),s.jsx("span",{className:"text-sm",children:xe})]},ge))})})]})]}),s.jsxs(lo,{children:[s.jsx(ue,{variant:"outline",onClick:()=>{C(!1),U(null)},children:"Close"}),s.jsxs(ue,{onClick:()=>{C(!1),U(null),ae&&Ee(ae)},children:[s.jsx(jn,{className:"h-4 w-4 mr-2"}),"Edit Subscription"]})]})]})}),s.jsx(js,{open:!!Z,onOpenChange:()=>W(null),children:s.jsxs(xs,{children:[s.jsxs(gs,{children:[s.jsx(vs,{children:"Delete School Subscription"}),s.jsx(En,{children:"Are you sure you want to delete this school subscription? This action cannot be undone."})]}),s.jsxs(lo,{children:[s.jsx(ue,{variant:"outline",onClick:()=>W(null),disabled:$,children:"Cancel"}),s.jsx(ue,{variant:"destructive",onClick:()=>Z&&Ge(Z),disabled:$,children:$?"Deleting...":"Delete Subscription"})]})]})})]})]}),s.jsxs("div",{className:"flex space-x-4 border-b",children:[s.jsx("button",{className:`px-4 py-2 font-medium ${l==="plans"?"border-b-2 border-purple-500 text-purple-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>c("plans"),children:"Subscription Plans"}),s.jsx("button",{className:`px-4 py-2 font-medium ${l==="schools"?"border-b-2 border-purple-500 text-purple-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>c("schools"),children:"School Subscriptions"})]}),l==="plans"?s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(!t||!Array.isArray(t)?[]:t).map(xe=>s.jsxs(ze,{className:"relative",children:[s.jsxs(Xe,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tt,{className:"text-lg",children:xe.name.replace(/_/g," ").toUpperCase()}),s.jsx(De,{variant:xe.is_active?"default":"secondary",children:xe.is_active?"Active":"Inactive"})]}),s.jsx(Ws,{children:xe.description})]}),s.jsxs(Ue,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Base Price:"}),s.jsx("span",{className:"font-medium",children:Le(xe.base_price)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Per Student:"}),s.jsx("span",{className:"font-medium",children:Le(xe.price_per_student)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Per Bus:"}),s.jsx("span",{className:"font-medium",children:Le(xe.price_per_bus)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Billing Cycle:"}),s.jsx("span",{className:"font-medium capitalize",children:xe.default_billing_cycle})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Features:"}),s.jsx("div",{className:"grid grid-cols-1 gap-1",children:Object.entries(xe.features_json).map(([ge,se])=>typeof se=="boolean"&&se?s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Es,{className:"h-3 w-3 text-green-600"}),s.jsx("span",{className:"capitalize",children:ge.replace(/_/g," ")})]},ge):typeof se=="number"&&se>0?s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(ws,{className:"h-3 w-3 text-blue-600"}),s.jsxs("span",{className:"capitalize",children:[ge.replace(/_/g," "),": ",se]})]},ge):null)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>te(xe),children:[s.jsx(jn,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsxs(ue,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(So,{className:"h-3 w-3 mr-1"}),"More"]})}),s.jsxs(Dn,{align:"end",children:[s.jsxs(Ut,{onClick:()=>O(xe),children:[s.jsx(qr,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Ut,{onClick:()=>te(xe),children:[s.jsx(jn,{className:"mr-2 h-4 w-4"}),"Edit Plan"]}),s.jsx(bd,{}),s.jsxs(Ut,{className:"text-red-600",onClick:()=>T(xe.id),children:[s.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Delete Plan"]})]})]})]})]})]},xe.id))})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(ld,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Le(n.reduce((xe,ge)=>xe+ge.amount,0).toString())}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(Es,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.filter(xe=>xe.status==="active").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Monthly Revenue"}),s.jsx(_o,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Le(n.filter(xe=>xe.billingCycle==="Monthly").reduce((xe,ge)=>xe+ge.amount,0).toString())}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This month's revenue"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Expiring Soon"}),s.jsx(un,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.filter(xe=>{const ge=new Date(xe.nextBilling),se=new Date;return Math.ceil((ge.getTime()-se.getTime())/(1e3*60*60*24))<=30&&xe.status==="active"}).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsxs(tt,{children:["School Subscriptions (",n.length,")"]}),s.jsx(Ws,{children:"All active school subscriptions"})]}),s.jsx(Ue,{children:s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"School"}),s.jsx(yt,{children:"Plan"}),s.jsx(yt,{children:"Status"}),s.jsx(yt,{children:"Amount"}),s.jsx(yt,{children:"Billing Cycle"}),s.jsx(yt,{children:"Next Billing"}),s.jsx(yt,{children:"Payment Method"}),s.jsx(yt,{children:"Last Payment"}),s.jsx(yt,{className:"text-right",children:"Actions"})]})}),s.jsx(si,{children:n.map(xe=>s.jsxs(hr,{children:[s.jsx(vt,{className:"font-medium",children:xe.schoolName}),s.jsx(vt,{children:He(xe.plan)}),s.jsx(vt,{children:K(xe.status)}),s.jsx(vt,{children:Le(xe.amount.toString())}),s.jsx(vt,{children:xe.billingCycle}),s.jsx(vt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pa,{className:"h-4 w-4 text-muted-foreground"}),xe.nextBilling]})}),s.jsx(vt,{children:xe.paymentMethod}),s.jsx(vt,{children:xe.lastPayment}),s.jsx(vt,{className:"text-right",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsx(Rd,{children:"Actions"}),s.jsxs(Ut,{onClick:()=>_e(xe),children:[s.jsx(qr,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Ut,{onClick:()=>Ee(xe),children:[s.jsx(jn,{className:"mr-2 h-4 w-4"}),"Edit Subscription"]}),s.jsxs(Ut,{children:[s.jsx(Gn,{className:"mr-2 h-4 w-4"}),"Manage Billing"]}),s.jsx(bd,{}),s.jsxs(Ut,{className:"text-orange-600",onClick:()=>ut(xe.id),children:[s.jsx(un,{className:"mr-2 h-4 w-4"}),"Cancel Subscription"]}),s.jsxs(Ut,{className:"text-red-600",onClick:()=>W(xe.id),children:[s.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Delete Subscription"]})]})]})})]},xe.id))})]})})]})]})]})},Tte=({isOpen:e,onClose:t})=>{const r=rr(),{toast:n}=mr(),{schools:a}=jt(u=>u.schools),{creating:i}=jt(u=>u.schoolSubscriptions),[o,l]=g.useState({school:"",plan:"",billing_cycle:"monthly",start_date:""});g.useEffect(()=>{e&&r(Ul())},[e,r]);const c=(u,h)=>{l(p=>({...p,[u]:h}))},d=async u=>{if(u.preventDefault(),!o.school||!o.plan||!o.start_date){n({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{const h={...o,school:parseInt(o.school)};await r(Wv(h)).unwrap(),n({title:"Subscription Created",description:"School subscription has been created successfully."}),l({school:"",plan:"",billing_cycle:"monthly",start_date:""}),t()}catch(h){let p="Failed to create subscription. Please try again.";if(h&&typeof h=="object"){const f=h;f.message?p=f.message:f.detail&&(p=f.detail)}else typeof h=="string"&&(p=h);n({title:"Error",description:p,variant:"destructive"})}};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"max-w-md",children:[s.jsxs(gs,{children:[s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),"Create New Subscription"]}),s.jsx(En,{children:"Create a new subscription for a school."})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"school",children:"School"}),s.jsxs(es,{value:o.school,onValueChange:u=>c("school",u),children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select a school"})}),s.jsx(Xt,{children:a.map(u=>s.jsx(Ve,{value:u.id.toString(),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kr,{className:"h-4 w-4"}),u.name]})},u.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"plan",children:"Plan"}),s.jsxs(es,{value:o.plan,onValueChange:u=>c("plan",u),children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select a plan"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"basic_school",children:"Basic School Plan"}),s.jsx(Ve,{value:"premium_school",children:"Premium School Plan"}),s.jsx(Ve,{value:"enterprise_school",children:"Enterprise School Plan"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"billing_cycle",children:"Billing Cycle"}),s.jsxs(es,{value:o.billing_cycle,onValueChange:u=>c("billing_cycle",u),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"monthly",children:"Monthly"}),s.jsx(Ve,{value:"annually",children:"Annually"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"start_date",children:"Start Date"}),s.jsx($e,{id:"start_date",type:"date",value:o.start_date,onChange:u=>c("start_date",u.target.value),required:!0})]}),s.jsxs(lo,{children:[s.jsx(ue,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ue,{type:"submit",disabled:i,children:i?"Creating...":"Create Subscription"})]})]})]})})},Rte=({subscription:e,isOpen:t,onClose:r})=>{if(!e)return null;const n=c=>{try{return c?new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(c)):"N/A"}catch{return"N/A"}},a=c=>{try{return c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}catch{return"N/A"}},i=c=>{switch(c){case"active":return s.jsx(De,{className:"bg-green-100 text-green-800",children:"Active"});case"pending":return s.jsx(De,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return s.jsx(De,{className:"bg-red-100 text-red-800",children:"Cancelled"});case"expired":return s.jsx(De,{className:"bg-gray-100 text-gray-800",children:"Expired"});default:return s.jsx(De,{variant:"outline",children:c})}},o=c=>{switch(c){case"monthly":return s.jsx(De,{className:"bg-blue-100 text-blue-800",children:"Monthly"});case"annually":return s.jsx(De,{className:"bg-purple-100 text-purple-800",children:"Annually"});default:return s.jsx(De,{variant:"outline",children:c})}},l=()=>{try{const c=WS(e);_d(c,`subscription-${e.id}-${new Date().toISOString().split("T")[0]}.pdf`)}catch{}};return s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),"Subscription Details"]}),s.jsxs(En,{children:["Detailed view of subscription ",e.id]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Subscription Information"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subscription ID:"}),s.jsx("span",{className:"font-medium",children:e.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status:"}),i(e.status)]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),s.jsx("span",{className:"font-medium",children:e.plan_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Billing Cycle:"}),o(e.billing_cycle)]})]})]})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"School Information"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"School:"}),s.jsx("span",{className:"font-medium",children:e.school_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"School ID:"}),s.jsx("span",{className:"font-medium",children:e.school})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Price Charged:"}),s.jsx("span",{className:"font-medium",children:n(e.price_charged)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Calculated Cost:"}),s.jsx("span",{className:"font-medium",children:n(e.calculated_cost.toString())})]})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Usage Statistics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx(ws,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),s.jsx("div",{className:"text-2xl font-bold",children:e.current_students_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Students"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx(qi,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),s.jsx("div",{className:"text-2xl font-bold",children:e.current_buses_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Buses"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx(ws,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),s.jsx("div",{className:"text-2xl font-bold",children:e.current_parents_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Parents"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Important Dates"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pa,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Start Date:"}),s.jsx("span",{className:"font-medium",children:a(e.start_date)})]}),e.end_date&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pa,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"End Date:"}),s.jsx("span",{className:"font-medium",children:a(e.end_date)})]}),e.next_billing_date&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fn,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Next Billing:"}),s.jsx("span",{className:"font-medium",children:a(e.next_billing_date)})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(ue,{variant:"outline",onClick:l,children:[s.jsx(pn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(ue,{variant:"outline",children:[s.jsx(kr,{className:"mr-2 h-4 w-4"}),"View School"]}),e.status==="pending"&&s.jsxs(ue,{children:[s.jsx(Es,{className:"mr-2 h-4 w-4"}),"Activate"]}),e.status==="active"&&s.jsxs(ue,{variant:"outline",children:[s.jsx(ec,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})]})})},Ite=()=>{const e=rr(),{toast:t}=mr(),{subscriptions:r,loading:n,error:a}=jt(C=>C.schoolSubscriptions),[i,o]=g.useState(""),[l,c]=g.useState("all"),[d,u]=g.useState("all"),[h,p]=g.useState(!1),[f,y]=g.useState(null),[x,j]=g.useState(!1);g.useEffect(()=>{e(ql())},[e]);const v=()=>{p(!1),e(ql())},w=C=>{y(C),j(!0)},N=()=>{j(!1),y(null)},k=()=>{try{const C=["School","Plan","Status","Billing Cycle","Price","Students","Buses","Parents"],$=E.map(Q=>[Q.school_name,Q.plan_name,Q.status,Q.billing_cycle,X(Q.price_charged),Q.current_students_count.toString(),Q.current_buses_count.toString(),Q.current_parents_count.toString()]),B=HS({headers:C,rows:$,title:"School Subscriptions Report",subtitle:`Total Subscriptions: ${E.length}`});_d(B,`subscriptions-report-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"PDF Downloaded",description:"Subscriptions report has been downloaded successfully."})}catch{t({title:"Error",description:"Failed to generate PDF. Please try again.",variant:"destructive"})}},P=C=>{try{const $=WS(C);_d($,`subscription-${C.id}-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"Subscription Downloaded",description:"Subscription PDF has been downloaded successfully."})}catch{t({title:"Error",description:"Failed to generate subscription PDF. Please try again.",variant:"destructive"})}},E=r.filter(C=>{const $=C.school_name.toLowerCase().includes(i.toLowerCase())||C.plan_name.toLowerCase().includes(i.toLowerCase()),B=l==="all"||C.status===l,Q=d==="all"||C.billing_cycle===d;return $&&B&&Q}),I=C=>{switch(C){case"active":return s.jsx(De,{className:"bg-green-100 text-green-800",children:"Active"});case"pending":return s.jsx(De,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return s.jsx(De,{className:"bg-red-100 text-red-800",children:"Cancelled"});case"expired":return s.jsx(De,{className:"bg-gray-100 text-gray-800",children:"Expired"});default:return s.jsx(De,{variant:"outline",children:C})}},T=C=>{switch(C){case"monthly":return s.jsx(De,{className:"bg-blue-100 text-blue-800",children:"Monthly"});case"annually":return s.jsx(De,{className:"bg-purple-100 text-purple-800",children:"Annually"});default:return s.jsx(De,{variant:"outline",children:C})}},R=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),X=C=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(C)),D=async(C,$)=>{try{await e(Gv({id:C,updateData:{status:$}})).unwrap(),t({title:"Status Updated",description:"Subscription status has been updated successfully."})}catch{t({title:"Error",description:"Failed to update subscription status.",variant:"destructive"})}};return n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((C,$)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},$))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"School Subscriptions"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage school subscriptions and billing"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{variant:"outline",onClick:k,children:[s.jsx(pn,{size:16,className:"mr-2"}),"Export All"]}),s.jsxs(ue,{onClick:()=>p(!0),children:[s.jsx(kr,{size:16,className:"mr-2"}),"New Subscription"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Subscriptions"}),s.jsx(Gn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All subscriptions"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(Es,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.filter(C=>C.status==="active").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Pending Subscriptions"}),s.jsx(fn,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.filter(C=>C.status==="pending").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting activation"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(ld,{className:"h-4 w-4 text-emerald-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:X(r.reduce((C,$)=>C+parseFloat($.price_charged),0).toString())}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All time revenue"})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Filters"}),s.jsx(Ws,{children:"Filter subscriptions by various criteria"})]}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(mn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx($e,{placeholder:"Search subscriptions...",value:i,onChange:C=>o(C.target.value),className:"pl-10"})]}),s.jsxs(es,{value:l,onValueChange:c,children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Filter by status"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Status"}),s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"pending",children:"Pending"}),s.jsx(Ve,{value:"cancelled",children:"Cancelled"}),s.jsx(Ve,{value:"expired",children:"Expired"})]})]}),s.jsxs(es,{value:d,onValueChange:u,children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Filter by billing cycle"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Cycles"}),s.jsx(Ve,{value:"monthly",children:"Monthly"}),s.jsx(Ve,{value:"annually",children:"Annually"})]})]}),s.jsxs(ue,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Ld,{size:16}),"Clear Filters"]})]})})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsxs(tt,{children:["School Subscriptions (",E.length,")"]}),s.jsx(Ws,{children:"All school subscriptions and their current status"})]}),s.jsx(Ue,{children:a?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(un,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Subscriptions"}),s.jsx("p",{className:"text-muted-foreground",children:a})]}):E.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Gn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Subscriptions Found"}),s.jsx("p",{className:"text-muted-foreground",children:r.length===0?"No school subscriptions have been created yet.":"No subscriptions match your current filters."})]}):s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"School"}),s.jsx(yt,{children:"Plan"}),s.jsx(yt,{children:"Status"}),s.jsx(yt,{children:"Billing Cycle"}),s.jsx(yt,{children:"Price"}),s.jsx(yt,{children:"Usage"}),s.jsx(yt,{children:"Start Date"}),s.jsx(yt,{className:"text-right",children:"Actions"})]})}),s.jsx(si,{children:E.map(C=>s.jsxs(hr,{children:[s.jsx(vt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:C.school_name})]})}),s.jsx(vt,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:C.plan_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",C.plan]})]})}),s.jsx(vt,{children:I(C.status)}),s.jsx(vt,{children:T(C.billing_cycle)}),s.jsxs(vt,{children:[s.jsx("div",{className:"font-medium",children:X(C.price_charged)}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Calculated:"," ",X(C.calculated_cost.toString())]})]}),s.jsx(vt,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(ws,{className:"h-3 w-3"}),C.current_students_count," students"]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(qi,{className:"h-3 w-3"}),C.current_buses_count," buses"]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(ws,{className:"h-3 w-3"}),C.current_parents_count," parents"]})]})}),s.jsxs(vt,{children:[s.jsx("div",{className:"text-sm",children:R(C.start_date)}),C.next_billing_date&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Next: ",R(C.next_billing_date)]})]}),s.jsx(vt,{className:"text-right",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsx(Rd,{children:"Actions"}),s.jsxs(Ut,{onClick:()=>w(C),children:[s.jsx(qr,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Ut,{onClick:()=>P(C),children:[s.jsx(pn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(Ut,{children:[s.jsx(jn,{className:"mr-2 h-4 w-4"}),"Edit Subscription"]}),C.status==="pending"&&s.jsxs(Ut,{onClick:()=>D(C.id,"active"),children:[s.jsx(Es,{className:"mr-2 h-4 w-4"}),"Activate"]}),C.status==="active"&&s.jsxs(Ut,{onClick:()=>D(C.id,"cancelled"),children:[s.jsx(ec,{className:"mr-2 h-4 w-4"}),"Cancel"]}),s.jsx(bd,{}),s.jsxs(Ut,{children:[s.jsx(Gn,{className:"mr-2 h-4 w-4"}),"Create Invoice"]})]})]})})]},C.id))})]})})]}),s.jsx(Tte,{isOpen:h,onClose:v}),s.jsx(Rte,{subscription:f,isOpen:x,onClose:N})]})},Fte=({isOpen:e,onClose:t})=>{const r=rr(),{toast:n}=mr(),{subscriptions:a}=jt(j=>j.schoolSubscriptions),{creating:i}=jt(j=>j.invoices),[o,l]=g.useState({school:"",subscription:"",amount_due:"",currency:"KES",due_date:"",line_items:[]}),[c,d]=g.useState({description:"",quantity:1,unit_price:0,total:0});g.useEffect(()=>{e&&r(ql())},[e,r]);const u=(j,v)=>{l(w=>({...w,[j]:v}))},h=(j,v)=>{d(w=>{const N={...w,[j]:v};return(j==="quantity"||j==="unit_price")&&(N.total=N.quantity*N.unit_price),N})},p=()=>{c.description&&c.quantity>0&&c.unit_price>0&&(l(j=>({...j,line_items:[...j.line_items,{...c}]})),d({description:"",quantity:1,unit_price:0,total:0}))},f=j=>{l(v=>({...v,line_items:v.line_items.filter((w,N)=>N!==j)}))},y=()=>o.line_items.reduce((j,v)=>j+v.total,0),x=async j=>{if(j.preventDefault(),!o.school||!o.subscription||o.line_items.length===0){n({title:"Validation Error",description:"Please fill in all required fields and add at least one line item.",variant:"destructive"});return}try{const v={...o,school:parseInt(o.school),amount_due:y().toString()};await r(Kv(v)).unwrap(),n({title:"Invoice Created",description:"Invoice has been created successfully."}),l({school:"",subscription:"",amount_due:"",currency:"KES",due_date:"",line_items:[]}),t()}catch{n({title:"Error",description:"Failed to create invoice. Please try again.",variant:"destructive"})}};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(xs,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-5 w-5"}),"Create New Invoice"]}),s.jsx(En,{children:"Create a new invoice for a school subscription."})]}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"school",children:"School"}),s.jsxs(es,{value:o.school,onValueChange:j=>u("school",j),children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select a school"})}),s.jsx(Xt,{children:a.map(j=>s.jsx(Ve,{value:j.school.toString(),children:j.school_name},j.school))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"subscription",children:"Subscription"}),s.jsxs(es,{value:o.subscription,onValueChange:j=>u("subscription",j),children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Select a subscription"})}),s.jsx(Xt,{children:a.filter(j=>j.school.toString()===o.school).map(j=>s.jsxs(Ve,{value:j.id,children:[j.plan_name," - ",j.billing_cycle]},j.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"currency",children:"Currency"}),s.jsxs(es,{value:o.currency,onValueChange:j=>u("currency",j),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"KES",children:"KES (Kenyan Shilling)"}),s.jsx(Ve,{value:"USD",children:"USD (US Dollar)"}),s.jsx(Ve,{value:"EUR",children:"EUR (Euro)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"due_date",children:"Due Date"}),s.jsx($e,{id:"due_date",type:"date",value:o.due_date,onChange:j=>u("due_date",j.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(de,{children:"Line Items"}),s.jsxs(ue,{type:"button",variant:"outline",size:"sm",onClick:p,disabled:!c.description||c.quantity<=0||c.unit_price<=0,children:[s.jsx(va,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"description",children:"Description"}),s.jsx($e,{id:"description",value:c.description,onChange:j=>h("description",j.target.value),placeholder:"Item description"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"quantity",children:"Quantity"}),s.jsx($e,{id:"quantity",type:"number",min:"1",value:c.quantity,onChange:j=>h("quantity",parseInt(j.target.value))})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"unit_price",children:"Unit Price"}),s.jsx($e,{id:"unit_price",type:"number",min:"0",step:"0.01",value:c.unit_price,onChange:j=>h("unit_price",parseFloat(j.target.value))})]}),s.jsxs("div",{children:[s.jsx(de,{children:"Total"}),s.jsx($e,{value:c.total.toFixed(2),readOnly:!0,className:"bg-gray-50"})]})]}),o.line_items.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Added Items"}),s.jsx("div",{className:"space-y-2",children:o.line_items.map((j,v)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:j.description}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[j.quantity,"  ",j.unit_price.toFixed(2)," ="," ",j.total.toFixed(2)]})]}),s.jsx(ue,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(v),children:s.jsx(il,{className:"h-4 w-4"})})]},v))})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Amount"}),s.jsxs("div",{className:"text-2xl font-bold",children:[o.currency," ",y().toFixed(2)]})]})}),s.jsxs(lo,{children:[s.jsx(ue,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ue,{type:"submit",disabled:i||o.line_items.length===0,children:i?"Creating...":"Create Invoice"})]})]})]})})},Dte=({invoice:e,isOpen:t,onClose:r})=>{var c,d;if(!e)return null;const n=(u,h)=>{try{return!u||!h?"N/A":new Intl.NumberFormat("en-KE",{style:"currency",currency:h}).format(parseFloat(u))}catch{return"N/A"}},a=u=>{try{return u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}catch{return"N/A"}},i=u=>{switch(u){case"paid":return s.jsx(De,{className:"bg-green-100 text-green-800",children:"Paid"});case"pending":return s.jsx(De,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"overdue":return s.jsx(De,{className:"bg-red-100 text-red-800",children:"Overdue"});case"cancelled":return s.jsx(De,{className:"bg-gray-100 text-gray-800",children:"Cancelled"});default:return s.jsx(De,{variant:"outline",children:u})}},o=((c=e.line_items)==null?void 0:c.reduce((u,h)=>u+((h==null?void 0:h.total)||0),0))||0,l=()=>{try{const u=K7(e);_d(u,`invoice-${e.id}-${new Date().toISOString().split("T")[0]}.pdf`)}catch{}};return s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(xs,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gs,{children:[s.jsxs(vs,{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-5 w-5"}),"Invoice Details"]}),s.jsxs(En,{children:["Detailed view of invoice ",e.id]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Invoice Information"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Invoice ID:"}),s.jsx("span",{className:"font-medium",children:e.invoice_id||e.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[i(e.status),e.is_overdue&&s.jsx(De,{variant:"destructive",className:"text-xs",children:"Overdue"})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"School:"}),s.jsx("span",{className:"font-medium",children:e.school_name||`School ${e.school}`})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subscription Plan:"}),s.jsx("span",{className:"font-medium",children:e.subscription_plan||"N/A"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Invoice Date:"}),s.jsx("span",{className:"font-medium",children:a(e.invoice_date)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Due Date:"}),s.jsx("span",{className:"font-medium",children:a(e.due_date)})]}),e.paid_at&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Paid Date:"}),s.jsx("span",{className:"font-medium",children:a(e.paid_at)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Currency:"}),s.jsx("span",{className:"font-medium",children:e.currency})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Amount Due:"}),s.jsx("span",{className:"font-medium",children:n(e.amount_due,e.currency)})]}),parseFloat(e.amount_paid||"0")>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Amount Paid:"}),s.jsx("span",{className:"font-medium",children:n(e.amount_paid,e.currency)})]})]})]})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"School Information"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"School ID:"}),s.jsx("span",{className:"font-medium",children:e.school})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subscription:"}),s.jsx("span",{className:"font-medium",children:e.subscription})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Amount Due:"}),s.jsx("span",{className:"font-medium",children:n(e.amount_due,e.currency)})]})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Line Items"}),s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"Description"}),s.jsx(yt,{children:"Quantity"}),s.jsx(yt,{children:"Unit Price"}),s.jsx(yt,{className:"text-right",children:"Total"})]})}),s.jsx(si,{children:(d=e.line_items)==null?void 0:d.map((u,h)=>s.jsxs(hr,{children:[s.jsx(vt,{className:"font-medium",children:u.description}),s.jsx(vt,{children:u.quantity}),s.jsx(vt,{children:n(u.unit_price.toString(),e.currency)}),s.jsx(vt,{className:"text-right font-medium",children:n(u.total.toString(),e.currency)})]},h))})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Amount"}),s.jsx("div",{className:"text-2xl font-bold",children:n(o.toString(),e.currency)})]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(ue,{variant:"outline",onClick:l,children:[s.jsx(pn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(ue,{variant:"outline",children:[s.jsx(lb,{className:"mr-2 h-4 w-4"}),"Send Invoice"]}),e.status==="pending"&&s.jsxs(ue,{children:[s.jsx(Gn,{className:"mr-2 h-4 w-4"}),"Process Payment"]})]})]})]})})},Ote=()=>{const e=rr(),{toast:t}=mr(),{invoices:r,loading:n,error:a}=jt(R=>R.invoices),[i,o]=g.useState(""),[l,c]=g.useState("all"),[d,u]=g.useState(!1),[h,p]=g.useState(null),[f,y]=g.useState(!1);g.useEffect(()=>{e(vu())},[e]),g.useEffect(()=>{r.length>0},[r]);const x=()=>{u(!1),e(vu())},j=R=>{p(R),y(!0)},v=()=>{y(!1),p(null)},w=()=>{try{const R=["Invoice ID","School","Subscription Plan","Amount Due","Amount Paid","Status","Due Date","Overdue","Line Items"],X=k.map(C=>{var $;return[C.invoice_id||C.id||"N/A",C.school_name||`School ${C.school||"N/A"}`,C.subscription_plan||"N/A",I(C.amount_due||"0",C.currency||"KES"),I(C.amount_paid||"0",C.currency||"KES"),C.status||"N/A",C.due_date?E(C.due_date):"N/A",C.is_overdue?"Yes":"No",`${(($=C.line_items)==null?void 0:$.length)||0} items`]}),D=HS({headers:R,rows:X,title:"Invoices Report",subtitle:`Total Invoices: ${k.length}`});_d(D,`invoices-report-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"PDF Downloaded",description:"Invoices report has been downloaded successfully."})}catch{t({title:"Error",description:"Failed to generate PDF. Please try again.",variant:"destructive"})}},N=R=>{try{const X=K7(R);_d(X,`invoice-${R.id}-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"Invoice Downloaded",description:"Invoice PDF has been downloaded successfully."})}catch{t({title:"Error",description:"Failed to generate invoice PDF. Please try again.",variant:"destructive"})}},k=r.filter(R=>{var C,$;const X=(((C=R.id)==null?void 0:C.toLowerCase())||"").includes(i.toLowerCase())||((($=R.currency)==null?void 0:$.toLowerCase())||"").includes(i.toLowerCase()),D=l==="all"||R.status===l;return X&&D}),P=R=>{switch(R){case"paid":return s.jsx(De,{className:"bg-green-100 text-green-800",children:"Paid"});case"pending":return s.jsx(De,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"overdue":return s.jsx(De,{className:"bg-red-100 text-red-800",children:"Overdue"});case"cancelled":return s.jsx(De,{className:"bg-gray-100 text-gray-800",children:"Cancelled"});default:return s.jsx(De,{variant:"outline",children:R})}},E=R=>{try{return R?new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}catch{return"N/A"}},I=(R,X)=>{try{return!R||!X?"N/A":new Intl.NumberFormat("en-KE",{style:"currency",currency:X}).format(parseFloat(R))}catch{return"N/A"}},T=async R=>{if(!R){t({title:"Error",description:"Invoice ID is missing. Cannot process payment.",variant:"destructive"});return}try{await e(Yv({id:R,updateData:{status:"paid"}})).unwrap(),t({title:"Payment Processed",description:"Invoice payment has been processed successfully."})}catch{t({title:"Error",description:"Failed to process payment.",variant:"destructive"})}};return n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((R,X)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},X))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Invoices"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage invoices and payments"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{variant:"outline",onClick:w,children:[s.jsx(pn,{size:16,className:"mr-2"}),"Export All"]}),s.jsxs(ue,{onClick:()=>u(!0),children:[s.jsx(Rn,{size:16,className:"mr-2"}),"Create Invoice"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Invoices"}),s.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All invoices"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Paid Invoices"}),s.jsx(Es,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.filter(R=>R.status==="paid").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully paid"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Pending Invoices"}),s.jsx(fn,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.filter(R=>R.status==="pending").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting payment"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(ld,{className:"h-4 w-4 text-emerald-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:I(r.reduce((R,X)=>R+parseFloat(X.amount_due),0).toString(),"KES")}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All time revenue"})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Filters"}),s.jsx(Ws,{children:"Filter invoices by various criteria"})]}),s.jsx(Ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(mn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx($e,{placeholder:"Search invoices...",value:i,onChange:R=>o(R.target.value),className:"pl-10"})]}),s.jsxs(es,{value:l,onValueChange:c,children:[s.jsx(Zt,{children:s.jsx(ts,{placeholder:"Filter by status"})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"all",children:"All Status"}),s.jsx(Ve,{value:"paid",children:"Paid"}),s.jsx(Ve,{value:"pending",children:"Pending"}),s.jsx(Ve,{value:"overdue",children:"Overdue"}),s.jsx(Ve,{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs(ue,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Ld,{size:16}),"Clear Filters"]})]})})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsxs(tt,{children:["Invoices (",k.length,")"]}),s.jsx(Ws,{children:"All invoices and their payment status"})]}),s.jsx(Ue,{children:a?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(un,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Invoices"}),s.jsx("p",{className:"text-muted-foreground",children:a})]}):k.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Rn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Invoices Found"}),s.jsx("p",{className:"text-muted-foreground",children:r.length===0?"No invoices have been created yet.":"No invoices match your current filters."})]}):s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"Invoice ID"}),s.jsx(yt,{children:"School"}),s.jsx(yt,{children:"Subscription Plan"}),s.jsx(yt,{children:"Amount"}),s.jsx(yt,{children:"Status"}),s.jsx(yt,{children:"Due Date"}),s.jsx(yt,{children:"Line Items"}),s.jsx(yt,{className:"text-right",children:"Actions"})]})}),s.jsx(si,{children:k.map(R=>{var D,C;const X=R.id||R.invoice_id||R.uuid;return s.jsxs(hr,{children:[s.jsxs(vt,{children:[s.jsx("div",{className:"font-medium",children:X||"N/A"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Subscription: ",R.subscription||"N/A"]})]}),s.jsx(vt,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:R.school_name||`School ${R.school}`}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",R.school]})]})}),s.jsx(vt,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:R.subscription_plan||"N/A"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",R.subscription]})]})}),s.jsxs(vt,{children:[s.jsx("div",{className:"font-medium",children:I(R.amount_due||"0",R.currency||"KES")}),parseFloat(R.amount_paid||"0")>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Paid:"," ",I(R.amount_paid||"0",R.currency||"KES")]})]}),s.jsx(vt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[P(R.status),R.is_overdue&&s.jsx(De,{variant:"destructive",className:"text-xs",children:"Overdue"})]})}),s.jsx(vt,{children:s.jsx("div",{className:"text-sm",children:R.due_date?E(R.due_date):"N/A"})}),s.jsxs(vt,{children:[s.jsxs("div",{className:"text-sm",children:[((D=R.line_items)==null?void 0:D.length)||0," items"]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total:"," ",((C=R.line_items)==null?void 0:C.reduce(($,B)=>$+((B==null?void 0:B.total)||0),0))||0]})]}),s.jsx(vt,{className:"text-right",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsx(Rd,{children:"Actions"}),s.jsxs(Ut,{onClick:()=>j(R),children:[s.jsx(qr,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Ut,{onClick:()=>N(R),children:[s.jsx(pn,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(Ut,{children:[s.jsx(lb,{className:"mr-2 h-4 w-4"}),"Send Invoice"]}),R.status==="pending"&&X&&s.jsxs(Ut,{onClick:()=>T(X),children:[s.jsx(Gn,{className:"mr-2 h-4 w-4"}),"Process Payment"]}),s.jsx(bd,{}),s.jsxs(Ut,{children:[s.jsx(jn,{className:"mr-2 h-4 w-4"}),"Edit Invoice"]})]})]})})]},X||R.id)})})]})})]}),s.jsx(Fte,{isOpen:d,onClose:x}),s.jsx(Dte,{invoice:h,isOpen:f,onClose:v})]})},Mte=()=>{const e=rr(),{messages:t,loading:r,error:n}=jt(h=>h.contactMessages),[a,i]=g.useState("");g.useEffect(()=>{e(Vv())},[e]);const o=h=>{e(Hv(h))},l=h=>{switch(h){case"inquiry_message":return s.jsx(De,{className:"bg-blue-100 text-blue-800",children:"Inquiry"});case"demo_request":return s.jsx(De,{className:"bg-purple-100 text-purple-800",children:"Demo Request"});case"support_message":return s.jsx(De,{className:"bg-orange-100 text-orange-800",children:"Support"});default:return s.jsx(De,{variant:"outline",children:h})}},c=h=>h?s.jsx(De,{className:"bg-green-100 text-green-800",children:"Read"}):s.jsx(De,{className:"bg-red-100 text-red-800",children:"Unread"}),d=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=t.filter(h=>h.first_name.toLowerCase().includes(a.toLowerCase())||h.last_name.toLowerCase().includes(a.toLowerCase())||h.school_name.toLowerCase().includes(a.toLowerCase())||h.message.toLowerCase().includes(a.toLowerCase()));return r?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((h,p)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},p))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Customer Support"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage customer inquiries and support messages"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ue,{variant:"outline",children:[s.jsx(Za,{size:16,className:"mr-2"}),"Support Hotline"]}),s.jsxs(ue,{children:[s.jsx(Cw,{size:16,className:"mr-2"}),"New Message"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Messages"}),s.jsx(Cw,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All time messages"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Contact Messages"}),s.jsx(ga,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"From clients"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Unread Messages"}),s.jsx(un,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(h=>!h.is_read).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Need attention"})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Contact Messages"}),s.jsx(Ws,{children:"Messages from potential clients and existing customers"})]}),s.jsx(Ue,{children:s.jsxs("div",{className:"relative",children:[s.jsx(mn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx($e,{placeholder:"Search contact messages...",value:a,onChange:h=>i(h.target.value),className:"pl-10"})]})})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsxs(tt,{children:["Contact Messages (",u.length,")"]}),s.jsx(Ws,{children:"Messages from potential clients and existing customers"})]}),s.jsx(Ue,{children:n?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(un,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Messages"}),s.jsx("p",{className:"text-muted-foreground",children:n})]}):u.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ga,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Contact Messages"}),s.jsx("p",{className:"text-muted-foreground",children:t.length===0?"No contact messages have been received yet.":"No messages match your current search."})]}):s.jsxs(ei,{children:[s.jsx(ti,{children:s.jsxs(hr,{children:[s.jsx(yt,{children:"Contact"}),s.jsx(yt,{children:"School"}),s.jsx(yt,{children:"Message Type"}),s.jsx(yt,{children:"Status"}),s.jsx(yt,{children:"Message"}),s.jsx(yt,{children:"Date"}),s.jsx(yt,{className:"text-right",children:"Actions"})]})}),s.jsx(si,{children:u.map(h=>s.jsxs(hr,{children:[s.jsx(vt,{children:s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[h.first_name," ",h.last_name]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:h.email_address})]})}),s.jsx(vt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:h.school_name})]})}),s.jsx(vt,{children:l(h.message_type)}),s.jsx(vt,{children:c(h.is_read)}),s.jsx(vt,{children:s.jsx("div",{className:"max-w-xs",children:s.jsx("div",{className:"text-sm line-clamp-2",children:h.message})})}),s.jsx(vt,{children:s.jsx("div",{className:"text-sm",children:d(h.created_at)})}),s.jsx(vt,{className:"text-right",children:s.jsxs(Zn,{children:[s.jsx(Xn,{asChild:!0,children:s.jsx(ue,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(So,{className:"h-4 w-4"})})}),s.jsxs(Dn,{align:"end",children:[s.jsx(Rd,{children:"Actions"}),s.jsxs(Ut,{children:[s.jsx(qr,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Ut,{children:[s.jsx(ga,{className:"mr-2 h-4 w-4"}),"Reply"]}),!h.is_read&&s.jsxs(Ut,{onClick:()=>o(h.id),children:[s.jsx(Es,{className:"mr-2 h-4 w-4"}),"Mark as Read"]}),s.jsx(bd,{}),s.jsxs(Ut,{className:"text-red-600",children:[s.jsx(ec,{className:"mr-2 h-4 w-4"}),"Delete Message"]})]})]})})]},h.id))})]})})]})]})},$te=()=>{const e=rr(),{invoices:t}=jt(f=>f.invoices),{subscriptions:r}=jt(f=>f.schoolSubscriptions),[n,a]=g.useState(null),[i,o]=g.useState(!0),[l,c]=g.useState("30d");g.useEffect(()=>{(async()=>{o(!0);const y=setTimeout(()=>{o(!1),Hs({title:"Loading Timeout",description:"Analytics data is taking too long to load. Please refresh the page.",variant:"destructive"})},1e4);try{let x=[],j=[],v=0;try{await Promise.all([e(vu()),e(ql())])}catch{}try{if(x=await hd.getAllSchools(),!x||x.length===0)throw new Error("No schools data received")}catch($){throw new Error(`Failed to fetch schools data: ${$.message}`)}try{if(j=await Y7.getAllStaff(),!j||j.length===0)throw new Error("No staff data received")}catch($){throw new Error(`Failed to fetch staff data: ${$.message}`)}v=t.reduce(($,B)=>$+parseFloat(B.amount_due||"0"),0);const w=j.length,N=x.reduce(($,B)=>$+(B.currentStudents||0),0),k=w+N,P=x.filter($=>$.isActive).length,E=r.filter($=>$.status==="active").length,I=14.6,T=8.2,R=12.5,X=15.2,D=[{month:"Jan",revenue:v*.92,users:Math.floor(k*.92),schools:Math.floor(x.length*.92)},{month:"Feb",revenue:v*.95,users:Math.floor(k*.95),schools:Math.floor(x.length*.95)},{month:"Mar",revenue:v*.97,users:Math.floor(k*.97),schools:Math.floor(x.length*.97)},{month:"Apr",revenue:v*.98,users:Math.floor(k*.98),schools:Math.floor(x.length*.98)},{month:"May",revenue:v*.99,users:Math.floor(k*.99),schools:Math.floor(x.length*.99)},{month:"Jun",revenue:v,users:k,schools:x.length}],C=x.slice(0,5).map(($,B)=>({name:$.name,revenue:parseFloat($.subscription||"99.99"),users:$.currentStudents||0,subscription:$.subscription?"Premium":"Basic"}));if(clearTimeout(y),x.length===0&&j.length===0)throw new Error("No data available from APIs");a({revenue:{current:v,previous:v*.85,growth:I},users:{total:k,active:k,growth:T},schools:{total:x.length,active:P,growth:R},subscriptions:{total:r.length,active:E,growth:X},monthlyData:D,topSchools:C})}catch{clearTimeout(y),Hs({title:"Error",description:"Failed to fetch analytics data. Please check your connection and try again.",variant:"destructive"})}finally{o(!1)}})()},[e,t,r]);const d=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),u=f=>new Intl.NumberFormat("en-US").format(f),h=f=>f>=0?s.jsx(_o,{className:"h-4 w-4 text-green-600"}):s.jsx(Mq,{className:"h-4 w-4 text-red-600"}),p=f=>f>=0?"text-green-600":"text-red-600";return i||!n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((f,y)=>s.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},y))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Comprehensive analytics and insights"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(es,{value:l,onValueChange:c,children:[s.jsx(Zt,{className:"w-32",children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"7d",children:"Last 7 days"}),s.jsx(Ve,{value:"30d",children:"Last 30 days"}),s.jsx(Ve,{value:"90d",children:"Last 90 days"}),s.jsx(Ve,{value:"1y",children:"Last year"})]})]}),s.jsxs(ue,{variant:"outline",children:[s.jsx(pn,{size:16,className:"mr-2"}),"Export Report"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(ld,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:d(n.revenue.current)}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h(n.revenue.growth),s.jsxs("span",{className:`text-sm ${p(n.revenue.growth)}`,children:["+",n.revenue.growth,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Total Users"}),s.jsx(ws,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:u(n.users.total)}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h(n.users.growth),s.jsxs("span",{className:`text-sm ${p(n.users.growth)}`,children:["+",n.users.growth,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Active Schools"}),s.jsx(kr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.schools.active}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h(n.schools.growth),s.jsxs("span",{className:`text-sm ${p(n.schools.growth)}`,children:["+",n.schools.growth,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(Gn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.subscriptions.active}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h(n.subscriptions.growth),s.jsxs("span",{className:`text-sm ${p(n.subscriptions.growth)}`,children:["+",n.subscriptions.growth,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Revenue Trend"}),s.jsx(Ws,{children:"Monthly revenue over the last 6 months"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:n.monthlyData.map((f,y)=>{const x=Math.max(...n.monthlyData.map(v=>v.revenue)),j=x>0?f.revenue/x*180:20;return s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"w-8 bg-blue-500 rounded-t",style:{height:`${Math.max(j,20)}px`,maxHeight:"180px"}}),s.jsx("span",{className:"text-xs text-muted-foreground",children:f.month})]},y)})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("span",{className:"text-sm text-muted-foreground",children:"Revenue in USD"})})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"User Growth"}),s.jsx(Ws,{children:"Monthly user growth over the last 6 months"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:n.monthlyData.map((f,y)=>{const x=Math.max(...n.monthlyData.map(v=>v.users)),j=x>0?f.users/x*180:20;return s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"w-8 bg-green-500 rounded-t",style:{height:`${Math.max(j,20)}px`,maxHeight:"180px"}}),s.jsx("span",{className:"text-xs text-muted-foreground",children:f.month})]},y)})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Users"})})]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Top Performing Schools"}),s.jsx(Ws,{children:"Schools with highest revenue and user engagement"})]}),s.jsx(Ue,{children:s.jsx("div",{className:"space-y-4",children:n.topSchools.map((f,y)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600",children:y+1})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[u(f.users)," users"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(De,{variant:f.subscription==="Premium"?"default":"secondary",className:f.subscription==="Premium"?"bg-purple-100 text-purple-800":"",children:f.subscription}),s.jsx("span",{className:"font-medium",children:d(f.revenue)})]})]},y))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Conversion Rate"}),s.jsx(ib,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n&&n.schools.total>0?`${Math.round(n.subscriptions.active/n.schools.total*100)}%`:"0%"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Schools with active subscriptions"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Average Revenue"}),s.jsx(uE,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n&&n.schools.total>0?d(n.revenue.current/n.schools.total):d(0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Per school per month"})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(tt,{className:"text-sm font-medium",children:"Active Sessions"}),s.jsx(vq,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n?u(n.users.active):"0"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Current active users"})]})]})]})]})},Bte=()=>{const[e,t]=g.useState({siteName:"LuxCab School Admin",siteDescription:"School transportation management system",contactEmail:"admin@luxcab.com",supportPhone:"+1 (555) 123-4567",timezone:"UTC",dateFormat:"MM/DD/YYYY",language:"en"}),[r,n]=g.useState({twoFactorAuth:!0,sessionTimeout:30,passwordPolicy:"strong",loginAttempts:5,ipWhitelist:"",auditLogging:!0}),[a,i]=g.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,systemAlerts:!0,marketingEmails:!1,weeklyReports:!0}),[o,l]=g.useState({maintenanceMode:!1,debugMode:!1,autoBackup:!0,backupFrequency:"daily",maxFileSize:10,maxUsersPerSchool:1e3}),c=d=>{};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Super Admin Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Configure system-wide settings and preferences"})]}),s.jsxs(ue,{children:[s.jsx(bh,{size:16,className:"mr-2"}),"Save All Changes"]})]}),s.jsxs(a7,{defaultValue:"general",className:"space-y-6",children:[s.jsxs($S,{className:"grid w-full grid-cols-4",children:[s.jsxs(au,{value:"general",className:"flex items-center gap-2",children:[s.jsx(Fi,{size:16}),"General"]}),s.jsxs(au,{value:"security",className:"flex items-center gap-2",children:[s.jsx(Ln,{size:16}),"Security"]}),s.jsxs(au,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(mi,{size:16}),"Notifications"]}),s.jsxs(au,{value:"system",className:"flex items-center gap-2",children:[s.jsx(Nq,{size:16}),"System"]})]}),s.jsx(iu,{value:"general",className:"space-y-6",children:s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"General Settings"}),s.jsx(Ws,{children:"Configure basic system information and preferences"})]}),s.jsxs(Ue,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"siteName",children:"Site Name"}),s.jsx($e,{id:"siteName",value:e.siteName,onChange:d=>t(u=>({...u,siteName:d.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"contactEmail",children:"Contact Email"}),s.jsx($e,{id:"contactEmail",type:"email",value:e.contactEmail,onChange:d=>t(u=>({...u,contactEmail:d.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"supportPhone",children:"Support Phone"}),s.jsx($e,{id:"supportPhone",value:e.supportPhone,onChange:d=>t(u=>({...u,supportPhone:d.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"timezone",children:"Timezone"}),s.jsxs(es,{value:e.timezone,onValueChange:d=>t(u=>({...u,timezone:d})),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"UTC",children:"UTC"}),s.jsx(Ve,{value:"EST",children:"Eastern Time"}),s.jsx(Ve,{value:"PST",children:"Pacific Time"}),s.jsx(Ve,{value:"GMT",children:"GMT"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"dateFormat",children:"Date Format"}),s.jsxs(es,{value:e.dateFormat,onValueChange:d=>t(u=>({...u,dateFormat:d})),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),s.jsx(Ve,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),s.jsx(Ve,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"language",children:"Language"}),s.jsxs(es,{value:e.language,onValueChange:d=>t(u=>({...u,language:d})),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"en",children:"English"}),s.jsx(Ve,{value:"es",children:"Spanish"}),s.jsx(Ve,{value:"fr",children:"French"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"siteDescription",children:"Site Description"}),s.jsx(Kn,{id:"siteDescription",value:e.siteDescription,onChange:d=>t(u=>({...u,siteDescription:d.target.value})),rows:3})]}),s.jsxs(ue,{onClick:()=>c(),children:[s.jsx(bh,{size:16,className:"mr-2"}),"Save General Settings"]})]})]})}),s.jsx(iu,{value:"security",className:"space-y-6",children:s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Security Settings"}),s.jsx(Ws,{children:"Configure security policies and authentication settings"})]}),s.jsxs(Ue,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Require 2FA for all users"})]}),s.jsx(Zs,{checked:r.twoFactorAuth,onCheckedChange:d=>n(u=>({...u,twoFactorAuth:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"Audit Logging"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Log all administrative actions"})]}),s.jsx(Zs,{checked:r.auditLogging,onCheckedChange:d=>n(u=>({...u,auditLogging:d}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),s.jsx($e,{id:"sessionTimeout",type:"number",value:r.sessionTimeout,onChange:d=>n(u=>({...u,sessionTimeout:parseInt(d.target.value)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"loginAttempts",children:"Max Login Attempts"}),s.jsx($e,{id:"loginAttempts",type:"number",value:r.loginAttempts,onChange:d=>n(u=>({...u,loginAttempts:parseInt(d.target.value)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"passwordPolicy",children:"Password Policy"}),s.jsxs(es,{value:r.passwordPolicy,onValueChange:d=>n(u=>({...u,passwordPolicy:d})),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"basic",children:"Basic"}),s.jsx(Ve,{value:"strong",children:"Strong"}),s.jsx(Ve,{value:"very-strong",children:"Very Strong"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"ipWhitelist",children:"IP Whitelist (optional)"}),s.jsx(Kn,{id:"ipWhitelist",value:r.ipWhitelist,onChange:d=>n(u=>({...u,ipWhitelist:d.target.value})),placeholder:"Enter IP addresses, one per line",rows:3})]}),s.jsxs(ue,{onClick:()=>c(),children:[s.jsx(bh,{size:16,className:"mr-2"}),"Save Security Settings"]})]})]})}),s.jsx(iu,{value:"notifications",className:"space-y-6",children:s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"Notification Settings"}),s.jsx(Ws,{children:"Configure system-wide notification preferences"})]}),s.jsxs(Ue,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send notifications via email"})]}),s.jsx(Zs,{checked:a.emailNotifications,onCheckedChange:d=>i(u=>({...u,emailNotifications:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"SMS Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send notifications via SMS"})]}),s.jsx(Zs,{checked:a.smsNotifications,onCheckedChange:d=>i(u=>({...u,smsNotifications:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"Push Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send push notifications to mobile apps"})]}),s.jsx(Zs,{checked:a.pushNotifications,onCheckedChange:d=>i(u=>({...u,pushNotifications:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"System Alerts"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Show system alerts and warnings"})]}),s.jsx(Zs,{checked:a.systemAlerts,onCheckedChange:d=>i(u=>({...u,systemAlerts:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"Marketing Emails"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send promotional and marketing emails"})]}),s.jsx(Zs,{checked:a.marketingEmails,onCheckedChange:d=>i(u=>({...u,marketingEmails:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"Weekly Reports"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send weekly system reports"})]}),s.jsx(Zs,{checked:a.weeklyReports,onCheckedChange:d=>i(u=>({...u,weeklyReports:d}))})]})]}),s.jsxs(ue,{onClick:()=>c(),children:[s.jsx(bh,{size:16,className:"mr-2"}),"Save Notification Settings"]})]})]})}),s.jsxs(iu,{value:"system",className:"space-y-6",children:[s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"System Settings"}),s.jsx(Ws,{children:"Configure system performance and maintenance settings"})]}),s.jsxs(Ue,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"Maintenance Mode"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Put the system in maintenance mode"})]}),s.jsx(Zs,{checked:o.maintenanceMode,onCheckedChange:d=>l(u=>({...u,maintenanceMode:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"Debug Mode"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable debug logging and features"})]}),s.jsx(Zs,{checked:o.debugMode,onCheckedChange:d=>l(u=>({...u,debugMode:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(de,{children:"Auto Backup"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically backup system data"})]}),s.jsx(Zs,{checked:o.autoBackup,onCheckedChange:d=>l(u=>({...u,autoBackup:d}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"backupFrequency",children:"Backup Frequency"}),s.jsxs(es,{value:o.backupFrequency,onValueChange:d=>l(u=>({...u,backupFrequency:d})),children:[s.jsx(Zt,{children:s.jsx(ts,{})}),s.jsxs(Xt,{children:[s.jsx(Ve,{value:"daily",children:"Daily"}),s.jsx(Ve,{value:"weekly",children:"Weekly"}),s.jsx(Ve,{value:"monthly",children:"Monthly"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"maxFileSize",children:"Max File Size (MB)"}),s.jsx($e,{id:"maxFileSize",type:"number",value:o.maxFileSize,onChange:d=>l(u=>({...u,maxFileSize:parseInt(d.target.value)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"maxUsersPerSchool",children:"Max Users per School"}),s.jsx($e,{id:"maxUsersPerSchool",type:"number",value:o.maxUsersPerSchool,onChange:d=>l(u=>({...u,maxUsersPerSchool:parseInt(d.target.value)}))})]})]}),s.jsxs(ue,{onClick:()=>c(),children:[s.jsx(bh,{size:16,className:"mr-2"}),"Save System Settings"]})]})]}),s.jsxs(ze,{children:[s.jsxs(Xe,{children:[s.jsx(tt,{children:"System Status"}),s.jsx(Ws,{children:"Current system health and status"})]}),s.jsx(Ue,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Es,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"Database Connection"})]}),s.jsx(De,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Es,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"API Services"})]}),s.jsx(De,{className:"bg-green-100 text-green-800",children:"Online"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Es,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"Email Service"})]}),s.jsx(De,{className:"bg-green-100 text-green-800",children:"Active"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($i,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{children:"Storage Usage"})]}),s.jsx(De,{className:"bg-yellow-100 text-yellow-800",children:"75% Used"})]})]})})]})]})]})]})};var Yb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jb=typeof window>"u"||"Deno"in globalThis;function no(){}function zte(e,t){return typeof e=="function"?e(t):e}function Ute(e){return typeof e=="number"&&e>=0&&e!==1/0}function qte(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xN(e,t){return typeof e=="function"?e(t):e}function Vte(e,t){return typeof e=="function"?e(t):e}function pk(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==GS(o,t.options))return!1}else if(!ox(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function xk(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ix(t.options.mutationKey)!==ix(i))return!1}else if(!ox(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function GS(e,t){return((t==null?void 0:t.queryKeyHashFn)||ix)(e)}function ix(e){return JSON.stringify(e,(t,r)=>gN(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function ox(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>ox(e[r],t[r])):!1}function J7(e,t){if(e===t)return e;const r=gk(e)&&gk(t);if(r||gN(e)&&gN(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let d=0;for(let u=0;u<o;u++){const h=r?u:i[u];(!r&&c.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,d++):(l[h]=J7(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&d++)}return a===o&&d===a?e:l}return t}function gk(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function gN(e){if(!vk(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!vk(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function vk(e){return Object.prototype.toString.call(e)==="[object Object]"}function Hte(e){return new Promise(t=>{setTimeout(t,e)})}function Wte(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?J7(e,t):t}function Gte(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Kte(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var KS=Symbol();function Z7(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===KS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ou,zc,uf,wk,Yte=(wk=class extends Yb{constructor(){super();er(this,ou);er(this,zc);er(this,uf);_s(this,uf,t=>{if(!Jb&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){rt(this,zc)||this.setEventListener(rt(this,uf))}onUnsubscribe(){var t;this.hasListeners()||((t=rt(this,zc))==null||t.call(this),_s(this,zc,void 0))}setEventListener(t){var r;_s(this,uf,t),(r=rt(this,zc))==null||r.call(this),_s(this,zc,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){rt(this,ou)!==t&&(_s(this,ou,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof rt(this,ou)=="boolean"?rt(this,ou):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ou=new WeakMap,zc=new WeakMap,uf=new WeakMap,wk),X7=new Yte,hf,Uc,ff,Nk,Jte=(Nk=class extends Yb{constructor(){super();er(this,hf,!0);er(this,Uc);er(this,ff);_s(this,ff,t=>{if(!Jb&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){rt(this,Uc)||this.setEventListener(rt(this,ff))}onUnsubscribe(){var t;this.hasListeners()||((t=rt(this,Uc))==null||t.call(this),_s(this,Uc,void 0))}setEventListener(t){var r;_s(this,ff,t),(r=rt(this,Uc))==null||r.call(this),_s(this,Uc,t(this.setOnline.bind(this)))}setOnline(t){rt(this,hf)!==t&&(_s(this,hf,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return rt(this,hf)}},hf=new WeakMap,Uc=new WeakMap,ff=new WeakMap,Nk),py=new Jte;function Zte(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function Xte(e){return Math.min(1e3*2**e,3e4)}function Q7(e){return(e??"online")==="online"?py.isOnline():!0}var eI=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function h2(e){return e instanceof eI}function tI(e){let t=!1,r=0,n=!1,a;const i=Zte(),o=x=>{var j;n||(p(new eI(x)),(j=e.abort)==null||j.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>X7.isFocused()&&(e.networkMode==="always"||py.isOnline())&&e.canRun(),u=()=>Q7(e.networkMode)&&e.canRun(),h=x=>{var j;n||(n=!0,(j=e.onSuccess)==null||j.call(e,x),a==null||a(),i.resolve(x))},p=x=>{var j;n||(n=!0,(j=e.onError)==null||j.call(e,x),a==null||a(),i.reject(x))},f=()=>new Promise(x=>{var j;a=v=>{(n||d())&&x(v)},(j=e.onPause)==null||j.call(e)}).then(()=>{var x;a=void 0,n||(x=e.onContinue)==null||x.call(e)}),y=()=>{if(n)return;let x;const j=r===0?e.initialPromise:void 0;try{x=j??e.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(h).catch(v=>{var E;if(n)return;const w=e.retry??(Jb?0:3),N=e.retryDelay??Xte,k=typeof N=="function"?N(r,v):N,P=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,v);if(t||!P){p(v);return}r++,(E=e.onFail)==null||E.call(e,r,v),Hte(k).then(()=>d()?void 0:f()).then(()=>{t?p(v):y()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():f().then(y),i)}}var Qte=e=>setTimeout(e,0);function ese(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=Qte;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Aa=ese(),lu,Sk,sI=(Sk=class{constructor(){er(this,lu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ute(this.gcTime)&&_s(this,lu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Jb?1/0:5*60*1e3))}clearGcTimeout(){rt(this,lu)&&(clearTimeout(rt(this,lu)),_s(this,lu,void 0))}},lu=new WeakMap,Sk),mf,pf,Li,cu,ca,lx,du,ao,Tl,_k,tse=(_k=class extends sI{constructor(t){super();er(this,ao);er(this,mf);er(this,pf);er(this,Li);er(this,cu);er(this,ca);er(this,lx);er(this,du);_s(this,du,!1),_s(this,lx,t.defaultOptions),this.setOptions(t.options),this.observers=[],_s(this,cu,t.client),_s(this,Li,rt(this,cu).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,_s(this,mf,rse(this.options)),this.state=t.state??rt(this,mf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=rt(this,ca))==null?void 0:t.promise}setOptions(t){this.options={...rt(this,lx),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&rt(this,Li).remove(this)}setData(t,r){const n=Wte(this.state.data,t,this.options);return sa(this,ao,Tl).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){sa(this,ao,Tl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=rt(this,ca))==null?void 0:n.promise;return(a=rt(this,ca))==null||a.cancel(t),r?r.then(no).catch(no):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(rt(this,mf))}isActive(){return this.observers.some(t=>Vte(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===KS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>xN(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!qte(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=rt(this,ca))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=rt(this,ca))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),rt(this,Li).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(rt(this,ca)&&(rt(this,du)?rt(this,ca).cancel({revert:!0}):rt(this,ca).cancelRetry()),this.scheduleGc()),rt(this,Li).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||sa(this,ao,Tl).call(this,{type:"invalidate"})}fetch(t,r){var d,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(rt(this,ca))return rt(this,ca).continueRetry(),rt(this,ca).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(f=>f.options.queryFn);p&&this.setOptions(p.options)}const n=new AbortController,a=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(_s(this,du,!0),n.signal)})},i=()=>{const p=Z7(this.options,r),y=(()=>{const x={client:rt(this,cu),queryKey:this.queryKey,meta:this.meta};return a(x),x})();return _s(this,du,!1),this.options.persister?this.options.persister(p,y,this):p(y)},l=(()=>{const p={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:rt(this,cu),state:this.state,fetchFn:i};return a(p),p})();(d=this.options.behavior)==null||d.onFetch(l,this),_s(this,pf,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&sa(this,ao,Tl).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=p=>{var f,y,x,j;h2(p)&&p.silent||sa(this,ao,Tl).call(this,{type:"error",error:p}),h2(p)||((y=(f=rt(this,Li).config).onError)==null||y.call(f,p,this),(j=(x=rt(this,Li).config).onSettled)==null||j.call(x,this.state.data,p,this)),this.scheduleGc()};return _s(this,ca,tI({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:p=>{var f,y,x,j;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(v){c(v);return}(y=(f=rt(this,Li).config).onSuccess)==null||y.call(f,p,this),(j=(x=rt(this,Li).config).onSettled)==null||j.call(x,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,f)=>{sa(this,ao,Tl).call(this,{type:"failed",failureCount:p,error:f})},onPause:()=>{sa(this,ao,Tl).call(this,{type:"pause"})},onContinue:()=>{sa(this,ao,Tl).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),rt(this,ca).start()}},mf=new WeakMap,pf=new WeakMap,Li=new WeakMap,cu=new WeakMap,ca=new WeakMap,lx=new WeakMap,du=new WeakMap,ao=new WeakSet,Tl=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...sse(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return h2(a)&&a.revert&&rt(this,pf)?{...rt(this,pf),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Aa.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),rt(this,Li).notify({query:this,type:"updated",action:t})})},_k);function sse(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Q7(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function rse(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Uo,Ck,nse=(Ck=class extends Yb{constructor(t={}){super();er(this,Uo);this.config=t,_s(this,Uo,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??GS(a,r);let o=this.get(i);return o||(o=new tse({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){rt(this,Uo).has(t.queryHash)||(rt(this,Uo).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=rt(this,Uo).get(t.queryHash);r&&(t.destroy(),r===t&&rt(this,Uo).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Aa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return rt(this,Uo).get(t)}getAll(){return[...rt(this,Uo).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>pk(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>pk(t,n)):r}notify(t){Aa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Aa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Aa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Uo=new WeakMap,Ck),qo,_a,uu,Vo,Tc,kk,ase=(kk=class extends sI{constructor(t){super();er(this,Vo);er(this,qo);er(this,_a);er(this,uu);this.mutationId=t.mutationId,_s(this,_a,t.mutationCache),_s(this,qo,[]),this.state=t.state||ise(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){rt(this,qo).includes(t)||(rt(this,qo).push(t),this.clearGcTimeout(),rt(this,_a).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){_s(this,qo,rt(this,qo).filter(r=>r!==t)),this.scheduleGc(),rt(this,_a).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){rt(this,qo).length||(this.state.status==="pending"?this.scheduleGc():rt(this,_a).remove(this))}continue(){var t;return((t=rt(this,uu))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,d,u,h,p,f,y,x,j,v,w,N,k,P,E,I,T;const r=()=>{sa(this,Vo,Tc).call(this,{type:"continue"})};_s(this,uu,tI({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(R,X)=>{sa(this,Vo,Tc).call(this,{type:"failed",failureCount:R,error:X})},onPause:()=>{sa(this,Vo,Tc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>rt(this,_a).canRun(this)}));const n=this.state.status==="pending",a=!rt(this,uu).canStart();try{if(n)r();else{sa(this,Vo,Tc).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=rt(this,_a).config).onMutate)==null?void 0:o.call(i,t,this));const X=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));X!==this.state.context&&sa(this,Vo,Tc).call(this,{type:"pending",context:X,variables:t,isPaused:a})}const R=await rt(this,uu).start();return await((u=(d=rt(this,_a).config).onSuccess)==null?void 0:u.call(d,R,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,R,t,this.state.context)),await((y=(f=rt(this,_a).config).onSettled)==null?void 0:y.call(f,R,null,this.state.variables,this.state.context,this)),await((j=(x=this.options).onSettled)==null?void 0:j.call(x,R,null,t,this.state.context)),sa(this,Vo,Tc).call(this,{type:"success",data:R}),R}catch(R){try{throw await((w=(v=rt(this,_a).config).onError)==null?void 0:w.call(v,R,t,this.state.context,this)),await((k=(N=this.options).onError)==null?void 0:k.call(N,R,t,this.state.context)),await((E=(P=rt(this,_a).config).onSettled)==null?void 0:E.call(P,void 0,R,this.state.variables,this.state.context,this)),await((T=(I=this.options).onSettled)==null?void 0:T.call(I,void 0,R,t,this.state.context)),R}finally{sa(this,Vo,Tc).call(this,{type:"error",error:R})}}finally{rt(this,_a).runNext(this)}}},qo=new WeakMap,_a=new WeakMap,uu=new WeakMap,Vo=new WeakSet,Tc=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Aa.batch(()=>{rt(this,qo).forEach(n=>{n.onMutationUpdate(t)}),rt(this,_a).notify({mutation:this,type:"updated",action:t})})},kk);function ise(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fl,io,cx,Ak,ose=(Ak=class extends Yb{constructor(t={}){super();er(this,Fl);er(this,io);er(this,cx);this.config=t,_s(this,Fl,new Set),_s(this,io,new Map),_s(this,cx,0)}build(t,r,n){const a=new ase({mutationCache:this,mutationId:++pg(this,cx)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){rt(this,Fl).add(t);const r=Zg(t);if(typeof r=="string"){const n=rt(this,io).get(r);n?n.push(t):rt(this,io).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(rt(this,Fl).delete(t)){const r=Zg(t);if(typeof r=="string"){const n=rt(this,io).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&rt(this,io).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Zg(t);if(typeof r=="string"){const n=rt(this,io).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Zg(t);if(typeof r=="string"){const a=(n=rt(this,io).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Aa.batch(()=>{rt(this,Fl).forEach(t=>{this.notify({type:"removed",mutation:t})}),rt(this,Fl).clear(),rt(this,io).clear()})}getAll(){return Array.from(rt(this,Fl))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>xk(r,n))}findAll(t={}){return this.getAll().filter(r=>xk(t,r))}notify(t){Aa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Aa.batch(()=>Promise.all(t.map(r=>r.continue().catch(no))))}},Fl=new WeakMap,io=new WeakMap,cx=new WeakMap,Ak);function Zg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function yk(e){return{onFetch:(t,r)=>{var u,h,p,f,y;const n=t.options,a=(p=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const j=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},v=Z7(t.options,t.fetchOptions),w=async(N,k,P)=>{if(x)return Promise.reject();if(k==null&&N.pages.length)return Promise.resolve(N);const I=(()=>{const D={client:t.client,queryKey:t.queryKey,pageParam:k,direction:P?"backward":"forward",meta:t.options.meta};return j(D),D})(),T=await v(I),{maxPages:R}=t.options,X=P?Kte:Gte;return{pages:X(N.pages,T,R),pageParams:X(N.pageParams,k,R)}};if(a&&i.length){const N=a==="backward",k=N?lse:bk,P={pages:i,pageParams:o},E=k(n,P);l=await w(P,E,N)}else{const N=e??i.length;do{const k=c===0?o[0]??n.initialPageParam:bk(n,l);if(c>0&&k==null)break;l=await w(l,k),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var x,j;return(j=(x=t.options).persister)==null?void 0:j.call(x,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function bk(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function lse(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Wr,qc,Vc,xf,gf,Hc,vf,yf,Pk,cse=(Pk=class{constructor(e={}){er(this,Wr);er(this,qc);er(this,Vc);er(this,xf);er(this,gf);er(this,Hc);er(this,vf);er(this,yf);_s(this,Wr,e.queryCache||new nse),_s(this,qc,e.mutationCache||new ose),_s(this,Vc,e.defaultOptions||{}),_s(this,xf,new Map),_s(this,gf,new Map),_s(this,Hc,0)}mount(){pg(this,Hc)._++,rt(this,Hc)===1&&(_s(this,vf,X7.subscribe(async e=>{e&&(await this.resumePausedMutations(),rt(this,Wr).onFocus())})),_s(this,yf,py.subscribe(async e=>{e&&(await this.resumePausedMutations(),rt(this,Wr).onOnline())})))}unmount(){var e,t;pg(this,Hc)._--,rt(this,Hc)===0&&((e=rt(this,vf))==null||e.call(this),_s(this,vf,void 0),(t=rt(this,yf))==null||t.call(this),_s(this,yf,void 0))}isFetching(e){return rt(this,Wr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return rt(this,qc).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=rt(this,Wr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=rt(this,Wr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(xN(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return rt(this,Wr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=rt(this,Wr).get(n.queryHash),i=a==null?void 0:a.state.data,o=zte(t,i);if(o!==void 0)return rt(this,Wr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Aa.batch(()=>rt(this,Wr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=rt(this,Wr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=rt(this,Wr);Aa.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=rt(this,Wr);return Aa.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Aa.batch(()=>rt(this,Wr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(no).catch(no)}invalidateQueries(e,t={}){return Aa.batch(()=>(rt(this,Wr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Aa.batch(()=>rt(this,Wr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(no)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(no)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=rt(this,Wr).build(this,t);return r.isStaleByTime(xN(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(no).catch(no)}fetchInfiniteQuery(e){return e.behavior=yk(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(no).catch(no)}ensureInfiniteQueryData(e){return e.behavior=yk(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return py.isOnline()?rt(this,qc).resumePausedMutations():Promise.resolve()}getQueryCache(){return rt(this,Wr)}getMutationCache(){return rt(this,qc)}getDefaultOptions(){return rt(this,Vc)}setDefaultOptions(e){_s(this,Vc,e)}setQueryDefaults(e,t){rt(this,xf).set(ix(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...rt(this,xf).values()],r={};return t.forEach(n=>{ox(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){rt(this,gf).set(ix(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...rt(this,gf).values()],r={};return t.forEach(n=>{ox(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...rt(this,Vc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=GS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===KS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...rt(this,Vc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){rt(this,Wr).clear(),rt(this,qc).clear()}},Wr=new WeakMap,qc=new WeakMap,Vc=new WeakMap,xf=new WeakMap,gf=new WeakMap,Hc=new WeakMap,vf=new WeakMap,yf=new WeakMap,Pk),dse=g.createContext(void 0),use=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(dse.Provider,{value:e,children:t})),YS="ToastProvider",[JS,hse,fse]=kb("Toast"),[rI,xre]=Fa("Toast",[fse]),[mse,Zb]=rI(YS),nI=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=g.useState(null),[d,u]=g.useState(0),h=g.useRef(!1),p=g.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${YS}\`. Expected non-empty \`string\`.`),s.jsx(JS.Provider,{scope:t,children:s.jsx(mse,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>u(f=>f+1),[]),onToastRemove:g.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};nI.displayName=YS;var aI="ToastViewport",pse=["F8"],vN="toast.viewportPause",yN="toast.viewportResume",iI=g.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=pse,label:a="Notifications ({hotkey})",...i}=e,o=Zb(aI,r),l=hse(r),c=g.useRef(null),d=g.useRef(null),u=g.useRef(null),h=g.useRef(null),p=Fs(t,h,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;g.useEffect(()=>{const j=v=>{var N;n.length!==0&&n.every(k=>v[k]||v.code===k)&&((N=h.current)==null||N.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[n]),g.useEffect(()=>{const j=c.current,v=h.current;if(y&&j&&v){const w=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(vN);v.dispatchEvent(E),o.isClosePausedRef.current=!0}},N=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(yN);v.dispatchEvent(E),o.isClosePausedRef.current=!1}},k=E=>{!j.contains(E.relatedTarget)&&N()},P=()=>{j.contains(document.activeElement)||N()};return j.addEventListener("focusin",w),j.addEventListener("focusout",k),j.addEventListener("pointermove",w),j.addEventListener("pointerleave",P),window.addEventListener("blur",w),window.addEventListener("focus",N),()=>{j.removeEventListener("focusin",w),j.removeEventListener("focusout",k),j.removeEventListener("pointermove",w),j.removeEventListener("pointerleave",P),window.removeEventListener("blur",w),window.removeEventListener("focus",N)}}},[y,o.isClosePausedRef]);const x=g.useCallback(({tabbingDirection:j})=>{const w=l().map(N=>{const k=N.ref.current,P=[k,...Ase(k)];return j==="forwards"?P:P.reverse()});return(j==="forwards"?w.reverse():w).flat()},[l]);return g.useEffect(()=>{const j=h.current;if(j){const v=w=>{var P,E,I;const N=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!N){const T=document.activeElement,R=w.shiftKey;if(w.target===j&&R){(P=d.current)==null||P.focus();return}const C=x({tabbingDirection:R?"backwards":"forwards"}),$=C.findIndex(B=>B===T);f2(C.slice($+1))?w.preventDefault():R?(E=d.current)==null||E.focus():(I=u.current)==null||I.focus()}};return j.addEventListener("keydown",v),()=>j.removeEventListener("keydown",v)}},[l,x]),s.jsxs(KV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(bN,{ref:d,onFocusFromOutsideViewport:()=>{const j=x({tabbingDirection:"forwards"});f2(j)}}),s.jsx(JS.Slot,{scope:r,children:s.jsx(Bt.ol,{tabIndex:-1,...i,ref:p})}),y&&s.jsx(bN,{ref:u,onFocusFromOutsideViewport:()=>{const j=x({tabbingDirection:"backwards"});f2(j)}})]})});iI.displayName=aI;var oI="ToastFocusProxy",bN=g.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Zb(oI,r);return s.jsx(Nb,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});bN.displayName=oI;var Tx="Toast",xse="toast.swipeStart",gse="toast.swipeMove",vse="toast.swipeCancel",yse="toast.swipeEnd",lI=g.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Co({prop:n,defaultProp:a??!0,onChange:i,caller:Tx});return s.jsx(Qa,{present:r||l,children:s.jsx(wse,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Xa(e.onPause),onResume:Xa(e.onResume),onSwipeStart:bt(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:bt(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:bt(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:bt(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});lI.displayName=Tx;var[bse,jse]=rI(Tx,{onClose(){}}),wse=g.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...y}=e,x=Zb(Tx,r),[j,v]=g.useState(null),w=Fs(t,B=>v(B)),N=g.useRef(null),k=g.useRef(null),P=a||x.duration,E=g.useRef(0),I=g.useRef(P),T=g.useRef(0),{onToastAdd:R,onToastRemove:X}=x,D=Xa(()=>{var Q;(j==null?void 0:j.contains(document.activeElement))&&((Q=x.viewport)==null||Q.focus()),o()}),C=g.useCallback(B=>{!B||B===1/0||(window.clearTimeout(T.current),E.current=new Date().getTime(),T.current=window.setTimeout(D,B))},[D]);g.useEffect(()=>{const B=x.viewport;if(B){const Q=()=>{C(I.current),d==null||d()},oe=()=>{const ae=new Date().getTime()-E.current;I.current=I.current-ae,window.clearTimeout(T.current),c==null||c()};return B.addEventListener(vN,oe),B.addEventListener(yN,Q),()=>{B.removeEventListener(vN,oe),B.removeEventListener(yN,Q)}}},[x.viewport,P,c,d,C]),g.useEffect(()=>{i&&!x.isClosePausedRef.current&&C(P)},[i,P,x.isClosePausedRef,C]),g.useEffect(()=>(R(),()=>X()),[R,X]);const $=g.useMemo(()=>j?pI(j):null,[j]);return x.viewport?s.jsxs(s.Fragment,{children:[$&&s.jsx(Nse,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),s.jsx(bse,{scope:r,onClose:D,children:Pd.createPortal(s.jsx(JS.ItemSlot,{scope:r,children:s.jsx(GV,{asChild:!0,onEscapeKeyDown:bt(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||D(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Bt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...y,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:bt(e.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:bt(e.onPointerDown,B=>{B.button===0&&(N.current={x:B.clientX,y:B.clientY})}),onPointerMove:bt(e.onPointerMove,B=>{if(!N.current)return;const Q=B.clientX-N.current.x,oe=B.clientY-N.current.y,ae=!!k.current,U=["left","right"].includes(x.swipeDirection),Z=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,W=U?Z(0,Q):0,ve=U?0:Z(0,oe),A=B.pointerType==="touch"?10:2,z={x:W,y:ve},M={originalEvent:B,delta:z};ae?(k.current=z,Xg(gse,h,M,{discrete:!1})):jk(z,x.swipeDirection,A)?(k.current=z,Xg(xse,u,M,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(Q)>A||Math.abs(oe)>A)&&(N.current=null)}),onPointerUp:bt(e.onPointerUp,B=>{const Q=k.current,oe=B.target;if(oe.hasPointerCapture(B.pointerId)&&oe.releasePointerCapture(B.pointerId),k.current=null,N.current=null,Q){const ae=B.currentTarget,U={originalEvent:B,delta:Q};jk(Q,x.swipeDirection,x.swipeThreshold)?Xg(yse,f,U,{discrete:!0}):Xg(vse,p,U,{discrete:!0}),ae.addEventListener("click",Z=>Z.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),Nse=e=>{const{__scopeToast:t,children:r,...n}=e,a=Zb(Tx,t),[i,o]=g.useState(!1),[l,c]=g.useState(!1);return Cse(()=>o(!0)),g.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(Yf,{asChild:!0,children:s.jsx(Nb,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},Sse="ToastTitle",cI=g.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Bt.div,{...n,ref:t})});cI.displayName=Sse;var _se="ToastDescription",dI=g.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Bt.div,{...n,ref:t})});dI.displayName=_se;var uI="ToastAction",hI=g.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(mI,{altText:r,asChild:!0,children:s.jsx(ZS,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${uI}\`. Expected non-empty \`string\`.`),null)});hI.displayName=uI;var fI="ToastClose",ZS=g.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=jse(fI,r);return s.jsx(mI,{asChild:!0,children:s.jsx(Bt.button,{type:"button",...n,ref:t,onClick:bt(e.onClick,a.onClose)})})});ZS.displayName=fI;var mI=g.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Bt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function pI(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),kse(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...pI(n))}}),t}function Xg(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?Y5(a,i):a.dispatchEvent(i)}var jk=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function Cse(e=()=>{}){const t=Xa(e);Jn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function kse(e){return e.nodeType===e.ELEMENT_NODE}function Ase(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function f2(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Pse=nI,xI=iI,gI=lI,vI=cI,yI=dI,bI=hI,jI=ZS;const Ese=Pse,wI=g.forwardRef(({className:e,...t},r)=>s.jsx(xI,{ref:r,className:nt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));wI.displayName=xI.displayName;const Lse=Ou("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),NI=g.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(gI,{ref:n,className:nt(Lse({variant:t}),e),...r}));NI.displayName=gI.displayName;const Tse=g.forwardRef(({className:e,...t},r)=>s.jsx(bI,{ref:r,className:nt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Tse.displayName=bI.displayName;const SI=g.forwardRef(({className:e,...t},r)=>s.jsx(jI,{ref:r,className:nt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(il,{className:"h-4 w-4"})}));SI.displayName=jI.displayName;const _I=g.forwardRef(({className:e,...t},r)=>s.jsx(vI,{ref:r,className:nt("text-sm font-semibold",e),...t}));_I.displayName=vI.displayName;const CI=g.forwardRef(({className:e,...t},r)=>s.jsx(yI,{ref:r,className:nt("text-sm opacity-90",e),...t}));CI.displayName=yI.displayName;function Rse(){const{toasts:e}=mr();return s.jsxs(Ese,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(NI,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(_I,{children:r}),n&&s.jsx(CI,{children:n})]}),a,s.jsx(SI,{})]},t)}),s.jsx(wI,{})]})}const Ise=()=>{const e=rr(),{isOnline:t,retryAttempts:r}=jt(c=>c.error.networkStatus),[n,a]=g.useState(!1),[i,o]=g.useState(!1);g.useEffect(()=>{const c=()=>{e(Ig({isOnline:!0,lastOnlineTime:new Date().toISOString(),retryAttempts:0})),a(!0),ns.success("Connection Restored","You are back online"),setTimeout(()=>a(!1),3e3)},d=()=>{e(Ig({isOnline:!1})),a(!0),ns.error("Connection Lost","You are currently offline")};return window.addEventListener("online",c),window.addEventListener("offline",d),!navigator.onLine&&t&&d(),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}},[e,t]);const l=async()=>{o(!0);try{if((await fetch("/favicon.ico",{method:"HEAD",cache:"no-cache",signal:AbortSignal.timeout(5e3)})).ok)e(Ig({isOnline:!0,lastOnlineTime:new Date().toISOString(),retryAttempts:0})),a(!1),ns.success("Connection Restored","You are back online");else throw new Error("Connection test failed")}catch{e(Ig({retryAttempts:r+1})),ns.error("Connection Failed","Unable to establish connection. Please check your internet.")}finally{o(!1)}};return!n&&t?null:s.jsx("div",{className:"fixed top-4 right-4 z-50",children:s.jsx("div",{className:`
        flex items-center gap-3 px-4 py-2 rounded-lg shadow-lg border
        ${t?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}
      `,children:t?s.jsxs(s.Fragment,{children:[s.jsx(Uq,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Back Online"})]}):s.jsxs(s.Fragment,{children:[s.jsx(zq,{className:"h-4 w-4"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm font-medium",children:"You're Offline"}),s.jsx("span",{className:"text-xs text-red-600",children:"Check your internet connection"})]}),s.jsx(ue,{size:"sm",variant:"outline",onClick:l,disabled:i,className:"ml-2 h-7 text-xs",children:i?s.jsxs(s.Fragment,{children:[s.jsx($i,{className:"h-3 w-3 mr-1 animate-spin"}),"Retrying..."]}):"Retry"})]})})})},Fse=()=>{const e=rr(),{isGlobalErrorVisible:t,errors:r}=jt(c=>c.error),n=r.filter(c=>c.type==="network"||c.type==="auth"),a=()=>{e(Ij(!1))},i=c=>{e(sq(c)),n.filter(u=>u.id!==c).length===0&&e(Ij(!1))},o=c=>{const d=r.find(u=>u.id===c);d&&(d.type==="network"?window.location.reload():d.type==="auth"&&(window.location.href="/login"))},l=()=>{e(Ij(!1)),window.location.href="/"};return!t||n.length===0?null:s.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 p-4",children:s.jsx(ze,{className:"border-red-200 bg-red-50",children:s.jsx(Ue,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($i,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-1",children:"Critical Issues Detected"}),s.jsx("div",{className:"space-y-2",children:n.map(c=>s.jsxs("div",{className:"text-sm text-red-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:c.message}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[c.recoverable&&s.jsxs(ue,{size:"sm",variant:"outline",onClick:()=>o(c.id),className:"h-6 text-xs border-red-300 text-red-700 hover:bg-red-100",children:[s.jsx(Wl,{className:"h-3 w-3 mr-1"}),"Retry"]}),s.jsx(ue,{size:"sm",variant:"ghost",onClick:()=>i(c.id),className:"h-6 w-6 p-0 text-red-600 hover:bg-red-100",children:s.jsx(il,{className:"h-3 w-3"})})]})]}),c.details&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:c.details})]},c.id))})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsxs(ue,{size:"sm",variant:"outline",onClick:l,className:"h-8 text-xs border-red-300 text-red-700 hover:bg-red-100",children:[s.jsx(V5,{className:"h-3 w-3 mr-1"}),"Go Home"]}),s.jsx(ue,{size:"sm",variant:"ghost",onClick:a,className:"h-8 w-8 p-0 text-red-600 hover:bg-red-100",children:s.jsx(il,{className:"h-4 w-4"})})]})]})})})})},Dse=new cse,Ose=()=>{var d;const e=rr(),{token:t,isInitialized:r,user:n,hasLoggedInBefore:a}=jt(u=>u.auth),{schools:i=[],loading:o,error:l}=jt(u=>u.schools),c=(d=i.find(u=>u.admin===(n==null?void 0:n.id)))==null?void 0:d.id;return g.useEffect(()=>{e(Uz())},[e]),g.useEffect(()=>{localStorage.setItem("schoolId",(c==null?void 0:c.toString())||"")},[c]),bs.useEffect(()=>{if(t&&r){const u=setInterval(()=>{e(zz())},6e4);return()=>clearInterval(u)}},[t,r,e]),bs.useEffect(()=>{if(t&&r&&n){let u=0;const h=3,p=async()=>{try{await e(Ul()).unwrap()}catch(f){u++;const y=typeof f=="string"?f:"Unknown error";u<h?setTimeout(()=>{p()},1e3*u):!y.includes("401")&&!y.includes("403")&&!y.includes("Unauthorized")&&!y.includes("Authentication failed")&&e(CC())}};p()}},[t,r,n,e]),bs.useEffect(()=>{!t&&l&&e(CC())},[t,l,e]),s.jsxs(LM,{children:[s.jsx(Is,{path:"/login",element:s.jsx(nW,{})}),s.jsx(Is,{path:"/home",element:s.jsx(aW,{})}),s.jsx(Is,{path:"/about",element:s.jsx(iW,{})}),s.jsx(Is,{path:"/features",element:s.jsx(oW,{})}),s.jsx(Is,{path:"/contact",element:s.jsx(cW,{})}),s.jsx(Is,{path:"/pricing",element:s.jsx(dW,{})}),s.jsx(Is,{path:"/subscription-selection",element:s.jsx(hW,{})}),s.jsx(Is,{path:"/register",element:s.jsx(uW,{})}),s.jsx(Is,{path:"/verification",element:s.jsx(fW,{})}),s.jsx(Is,{path:"/terms-and-policies",element:s.jsx(xte,{})}),s.jsxs(Is,{path:"/",element:t?s.jsx(JY,{}):s.jsx(B4,{to:a?"/login":"/home",replace:!0}),children:[s.jsx(Is,{index:!0,element:s.jsx(QY,{})}),s.jsx(Is,{path:"trips",element:s.jsx(kZ,{})}),s.jsx(Is,{path:"routes",element:s.jsx(BX,{})}),s.jsx(Is,{path:"students",element:s.jsx(iQ,{})}),s.jsx(Is,{path:"staff",element:s.jsx(dQ,{})}),s.jsx(Is,{path:"parents",element:s.jsx(fQ,{})}),s.jsx(Is,{path:"drivers",element:s.jsx(mQ,{})}),s.jsx(Is,{path:"vehicles",element:s.jsx(pQ,{})}),s.jsx(Is,{path:"reports",element:s.jsx(vQ,{})}),s.jsx(Is,{path:"subscription",element:s.jsx(kQ,{})}),s.jsx(Is,{path:"admin/subscription",element:s.jsx(AQ,{})}),s.jsx(Is,{path:"admin/school-subscription",element:s.jsx(ute,{})}),s.jsx(Is,{path:"notifications",element:s.jsx(pte,{})}),s.jsx(Is,{path:"settings",element:s.jsx(NQ,{})}),s.jsx(Is,{path:"profile",element:s.jsx(_Q,{})})]}),s.jsxs(Is,{path:"/super-admin",element:t?s.jsx(jte,{}):s.jsx(B4,{to:"/login",replace:!0}),children:[s.jsx(Is,{index:!0,element:s.jsx(Ste,{})}),s.jsx(Is,{path:"users",element:s.jsx(Ate,{})}),s.jsx(Is,{path:"schools",element:s.jsx(Pte,{})}),s.jsx(Is,{path:"schools/:id",element:s.jsx(Ete,{})}),s.jsx(Is,{path:"subscriptions",element:s.jsx(Lte,{})}),s.jsx(Is,{path:"school-subscriptions",element:s.jsx(Ite,{})}),s.jsx(Is,{path:"invoices",element:s.jsx(Ote,{})}),s.jsx(Is,{path:"support",element:s.jsx(Mte,{})}),s.jsx(Is,{path:"analytics",element:s.jsx($te,{})}),s.jsx(Is,{path:"settings",element:s.jsx(Bte,{})})]}),s.jsx(Is,{path:"*",element:s.jsx(gte,{})})]})},Mse=()=>s.jsx(MM,{children:s.jsx(Ose,{})});function $se(){return s.jsx(Vq,{children:s.jsx(Hq,{children:s.jsx(use,{client:Dse,children:s.jsxs(B8,{children:[s.jsx(Mse,{}),s.jsx(Rse,{}),s.jsx(Ise,{}),s.jsx(Fse,{})]})})})})}VA(document.getElementById("root")).render(s.jsx($se,{}));export{V9 as _,zse as c,Ek as g};
