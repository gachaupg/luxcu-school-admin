var GI=Object.defineProperty;var o_=e=>{throw TypeError(e)};var KI=(e,t,r)=>t in e?GI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Wx=(e,t,r)=>KI(e,typeof t!="symbol"?t+"":t,r),ij=(e,t,r)=>t.has(e)||o_("Cannot "+r);var Qe=(e,t,r)=>(ij(e,t,"read from private field"),r?r.call(e):t.get(e)),Hs=(e,t,r)=>t.has(e)?o_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),fs=(e,t,r,n)=>(ij(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Kn=(e,t,r)=>(ij(e,t,"access private method"),r);var Gx=(e,t,r,n)=>({set _(a){fs(e,t,a,r)},get _(){return Qe(e,t,n)}});function YI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var mse=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mk={exports:{}},Wv={},pk={exports:{}},Ls={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up=Symbol.for("react.element"),JI=Symbol.for("react.portal"),ZI=Symbol.for("react.fragment"),XI=Symbol.for("react.strict_mode"),QI=Symbol.for("react.profiler"),eF=Symbol.for("react.provider"),tF=Symbol.for("react.context"),sF=Symbol.for("react.forward_ref"),rF=Symbol.for("react.suspense"),nF=Symbol.for("react.memo"),aF=Symbol.for("react.lazy"),l_=Symbol.iterator;function iF(e){return e===null||typeof e!="object"?null:(e=l_&&e[l_]||e["@@iterator"],typeof e=="function"?e:null)}var xk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gk=Object.assign,vk={};function Nf(e,t,r){this.props=e,this.context=t,this.refs=vk,this.updater=r||xk}Nf.prototype.isReactComponent={};Nf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yk(){}yk.prototype=Nf.prototype;function Zw(e,t,r){this.props=e,this.context=t,this.refs=vk,this.updater=r||xk}var Xw=Zw.prototype=new yk;Xw.constructor=Zw;gk(Xw,Nf.prototype);Xw.isPureReactComponent=!0;var c_=Array.isArray,jk=Object.prototype.hasOwnProperty,Qw={current:null},bk={key:!0,ref:!0,__self:!0,__source:!0};function wk(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)jk.call(t,n)&&!bk.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Up,type:e,key:i,ref:o,props:a,_owner:Qw.current}}function oF(e,t){return{$$typeof:Up,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eN(e){return typeof e=="object"&&e!==null&&e.$$typeof===Up}function lF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var d_=/\/+/g;function oj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lF(""+e.key):t.toString(36)}function Ag(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Up:case JI:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+oj(o,0):n,c_(a)?(r="",e!=null&&(r=e.replace(d_,"$&/")+"/"),Ag(a,t,r,"",function(d){return d})):a!=null&&(eN(a)&&(a=oF(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(d_,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",c_(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+oj(i,l);o+=Ag(i,t,r,c,a)}else if(c=iF(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+oj(i,l++),o+=Ag(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Kx(e,t,r){if(e==null)return e;var n=[],a=0;return Ag(e,n,"","",function(i){return t.call(r,i,a++)}),n}function cF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wa={current:null},Eg={transition:null},dF={ReactCurrentDispatcher:wa,ReactCurrentBatchConfig:Eg,ReactCurrentOwner:Qw};Ls.Children={map:Kx,forEach:function(e,t,r){Kx(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Kx(e,function(){t++}),t},toArray:function(e){return Kx(e,function(t){return t})||[]},only:function(e){if(!eN(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ls.Component=Nf;Ls.Fragment=ZI;Ls.Profiler=QI;Ls.PureComponent=Zw;Ls.StrictMode=XI;Ls.Suspense=rF;Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dF;Ls.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=gk({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Qw.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)jk.call(t,c)&&!bk.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Up,type:e.type,key:a,ref:i,props:n,_owner:o}};Ls.createContext=function(e){return e={$$typeof:tF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eF,_context:e},e.Consumer=e};Ls.createElement=wk;Ls.createFactory=function(e){var t=wk.bind(null,e);return t.type=e,t};Ls.createRef=function(){return{current:null}};Ls.forwardRef=function(e){return{$$typeof:sF,render:e}};Ls.isValidElement=eN;Ls.lazy=function(e){return{$$typeof:aF,_payload:{_status:-1,_result:e},_init:cF}};Ls.memo=function(e,t){return{$$typeof:nF,type:e,compare:t===void 0?null:t}};Ls.startTransition=function(e){var t=Eg.transition;Eg.transition={};try{e()}finally{Eg.transition=t}};Ls.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ls.useCallback=function(e,t){return wa.current.useCallback(e,t)};Ls.useContext=function(e){return wa.current.useContext(e)};Ls.useDebugValue=function(){};Ls.useDeferredValue=function(e){return wa.current.useDeferredValue(e)};Ls.useEffect=function(e,t){return wa.current.useEffect(e,t)};Ls.useId=function(){return wa.current.useId()};Ls.useImperativeHandle=function(e,t,r){return wa.current.useImperativeHandle(e,t,r)};Ls.useInsertionEffect=function(e,t){return wa.current.useInsertionEffect(e,t)};Ls.useLayoutEffect=function(e,t){return wa.current.useLayoutEffect(e,t)};Ls.useMemo=function(e,t){return wa.current.useMemo(e,t)};Ls.useReducer=function(e,t,r){return wa.current.useReducer(e,t,r)};Ls.useRef=function(e){return wa.current.useRef(e)};Ls.useState=function(e){return wa.current.useState(e)};Ls.useSyncExternalStore=function(e,t,r){return wa.current.useSyncExternalStore(e,t,r)};Ls.useTransition=function(){return wa.current.useTransition()};Ls.version="18.2.0";pk.exports=Ls;var g=pk.exports;const vs=fk(g),tN=YI({__proto__:null,default:vs},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uF=g,hF=Symbol.for("react.element"),fF=Symbol.for("react.fragment"),mF=Object.prototype.hasOwnProperty,pF=uF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xF={key:!0,ref:!0,__self:!0,__source:!0};function Nk(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)mF.call(t,n)&&!xF.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:hF,type:e,key:i,ref:o,props:a,_owner:pF.current}}Wv.Fragment=fF;Wv.jsx=Nk;Wv.jsxs=Nk;mk.exports=Wv;var s=mk.exports,Sk={exports:{}},fi={},_k={exports:{}},Ck={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Q,J){var q=Q.length;Q.push(J);e:for(;0<q;){var Y=q-1>>>1,k=Q[Y];if(0<a(k,J))Q[Y]=J,Q[q]=k,q=Y;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var J=Q[0],q=Q.pop();if(q!==J){Q[0]=q;e:for(var Y=0,k=Q.length,L=k>>>1;Y<L;){var M=2*(Y+1)-1,W=Q[M],se=M+1,ae=Q[se];if(0>a(W,q))se<k&&0>a(ae,W)?(Q[Y]=ae,Q[se]=q,Y=se):(Q[Y]=W,Q[M]=q,Y=M);else if(se<k&&0>a(ae,q))Q[Y]=ae,Q[se]=q,Y=se;else break e}}return J}function a(Q,J){var q=Q.sortIndex-J.sortIndex;return q!==0?q:Q.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,y=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Q){for(var J=r(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=Q)n(d),J.sortIndex=J.expirationTime,t(c,J);else break;J=r(d)}}function C(Q){if(x=!1,N(Q),!y)if(r(c)!==null)y=!0,re(P);else{var J=r(d);J!==null&&pe(C,J.startTime-Q)}}function P(Q,J){y=!1,x&&(x=!1,v(A),A=-1),f=!0;var q=p;try{for(N(J),h=r(c);h!==null&&(!(h.expirationTime>J)||Q&&!F());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,p=h.priorityLevel;var k=Y(h.expirationTime<=J);J=e.unstable_now(),typeof k=="function"?h.callback=k:h===r(c)&&n(c),N(J)}else n(c);h=r(c)}if(h!==null)var L=!0;else{var M=r(d);M!==null&&pe(C,M.startTime-J),L=!1}return L}finally{h=null,p=q,f=!1}}var D=!1,R=null,A=-1,I=5,O=-1;function F(){return!(e.unstable_now()-O<I)}function E(){if(R!==null){var Q=e.unstable_now();O=Q;var J=!0;try{J=R(!0,Q)}finally{J?$():(D=!1,R=null)}}else D=!1}var $;if(typeof b=="function")$=function(){b(E)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,K=U.port2;U.port1.onmessage=E,$=function(){K.postMessage(null)}}else $=function(){w(E,0)};function re(Q){R=Q,D||(D=!0,$())}function pe(Q,J){A=w(function(){Q(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){y||f||(y=!0,re(P))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var q=p;p=J;try{return Q()}finally{p=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,J){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var q=p;p=Q;try{return J()}finally{p=q}},e.unstable_scheduleCallback=function(Q,J,q){var Y=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,Q){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=q+k,Q={id:u++,callback:J,priorityLevel:Q,startTime:q,expirationTime:k,sortIndex:-1},q>Y?(Q.sortIndex=q,t(d,Q),r(c)===null&&Q===r(d)&&(x?(v(A),A=-1):x=!0,pe(C,q-Y))):(Q.sortIndex=k,t(c,Q),y||f||(y=!0,re(P))),Q},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(Q){var J=p;return function(){var q=p;p=J;try{return Q.apply(this,arguments)}finally{p=q}}}})(Ck);_k.exports=Ck;var gF=_k.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk=g,di=gF;function ht(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pk=new Set,lp={};function ju(e,t){af(e,t),af(e+"Capture",t)}function af(e,t){for(lp[e]=t,e=0;e<t.length;e++)Pk.add(t[e])}var Nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hb=Object.prototype.hasOwnProperty,vF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u_={},h_={};function yF(e){return Hb.call(h_,e)?!0:Hb.call(u_,e)?!1:vF.test(e)?h_[e]=!0:(u_[e]=!0,!1)}function jF(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bF(e,t,r,n){if(t===null||typeof t>"u"||jF(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Na(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zn[e]=new Na(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zn[t]=new Na(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zn[e]=new Na(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zn[e]=new Na(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zn[e]=new Na(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zn[e]=new Na(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zn[e]=new Na(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zn[e]=new Na(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zn[e]=new Na(e,5,!1,e.toLowerCase(),null,!1,!1)});var sN=/[\-:]([a-z])/g;function rN(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sN,rN);zn[t]=new Na(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sN,rN);zn[t]=new Na(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sN,rN);zn[t]=new Na(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zn[e]=new Na(e,1,!1,e.toLowerCase(),null,!1,!1)});zn.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zn[e]=new Na(e,1,!1,e.toLowerCase(),null,!0,!0)});function nN(e,t,r,n){var a=zn.hasOwnProperty(t)?zn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bF(t,r,a,n)&&(r=null),n||a===null?yF(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Bl=kk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yx=Symbol.for("react.element"),hh=Symbol.for("react.portal"),fh=Symbol.for("react.fragment"),aN=Symbol.for("react.strict_mode"),Wb=Symbol.for("react.profiler"),Ak=Symbol.for("react.provider"),Ek=Symbol.for("react.context"),iN=Symbol.for("react.forward_ref"),Gb=Symbol.for("react.suspense"),Kb=Symbol.for("react.suspense_list"),oN=Symbol.for("react.memo"),hc=Symbol.for("react.lazy"),Lk=Symbol.for("react.offscreen"),f_=Symbol.iterator;function um(e){return e===null||typeof e!="object"?null:(e=f_&&e[f_]||e["@@iterator"],typeof e=="function"?e:null)}var Rr=Object.assign,lj;function Am(e){if(lj===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);lj=t&&t[1]||""}return`
`+lj+e}var cj=!1;function dj(e,t){if(!e||cj)return"";cj=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{cj=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Am(e):""}function wF(e){switch(e.tag){case 5:return Am(e.type);case 16:return Am("Lazy");case 13:return Am("Suspense");case 19:return Am("SuspenseList");case 0:case 2:case 15:return e=dj(e.type,!1),e;case 11:return e=dj(e.type.render,!1),e;case 1:return e=dj(e.type,!0),e;default:return""}}function Yb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fh:return"Fragment";case hh:return"Portal";case Wb:return"Profiler";case aN:return"StrictMode";case Gb:return"Suspense";case Kb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ek:return(e.displayName||"Context")+".Consumer";case Ak:return(e._context.displayName||"Context")+".Provider";case iN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oN:return t=e.displayName||null,t!==null?t:Yb(e.type)||"Memo";case hc:t=e._payload,e=e._init;try{return Yb(e(t))}catch{}}return null}function NF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yb(t);case 8:return t===aN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function SF(e){var t=Tk(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jx(e){e._valueTracker||(e._valueTracker=SF(e))}function Rk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Tk(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function O0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jb(e,t){var r=t.checked;return Rr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function m_(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Zc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ik(e,t){t=t.checked,t!=null&&nN(e,"checked",t,!1)}function Zb(e,t){Ik(e,t);var r=Zc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xb(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xb(e,t.type,Zc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function p_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xb(e,t,r){(t!=="number"||O0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Em=Array.isArray;function _h(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Zc(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Qb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ht(91));return Rr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function x_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ht(92));if(Em(r)){if(1<r.length)throw Error(ht(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Zc(r)}}function Fk(e,t){var r=Zc(t.value),n=Zc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function g_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Dk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zx,Ok=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zx=Zx||document.createElement("div"),Zx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Mm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_F=["Webkit","ms","Moz","O"];Object.keys(Mm).forEach(function(e){_F.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Mm[t]=Mm[e]})});function Mk(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Mm.hasOwnProperty(e)&&Mm[e]?(""+t).trim():t+"px"}function $k(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Mk(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var CF=Rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function t2(e,t){if(t){if(CF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ht(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ht(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ht(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ht(62))}}function s2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var r2=null;function lN(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var n2=null,Ch=null,kh=null;function v_(e){if(e=Hp(e)){if(typeof n2!="function")throw Error(ht(280));var t=e.stateNode;t&&(t=Zv(t),n2(e.stateNode,e.type,t))}}function Bk(e){Ch?kh?kh.push(e):kh=[e]:Ch=e}function zk(){if(Ch){var e=Ch,t=kh;if(kh=Ch=null,v_(e),t)for(e=0;e<t.length;e++)v_(t[e])}}function Uk(e,t){return e(t)}function qk(){}var uj=!1;function Vk(e,t,r){if(uj)return e(t,r);uj=!0;try{return Uk(e,t,r)}finally{uj=!1,(Ch!==null||kh!==null)&&(qk(),zk())}}function dp(e,t){var r=e.stateNode;if(r===null)return null;var n=Zv(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ht(231,t,typeof r));return r}var a2=!1;if(Nl)try{var hm={};Object.defineProperty(hm,"passive",{get:function(){a2=!0}}),window.addEventListener("test",hm,hm),window.removeEventListener("test",hm,hm)}catch{a2=!1}function kF(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var $m=!1,M0=null,$0=!1,i2=null,PF={onError:function(e){$m=!0,M0=e}};function AF(e,t,r,n,a,i,o,l,c){$m=!1,M0=null,kF.apply(PF,arguments)}function EF(e,t,r,n,a,i,o,l,c){if(AF.apply(this,arguments),$m){if($m){var d=M0;$m=!1,M0=null}else throw Error(ht(198));$0||($0=!0,i2=d)}}function bu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Hk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y_(e){if(bu(e)!==e)throw Error(ht(188))}function LF(e){var t=e.alternate;if(!t){if(t=bu(e),t===null)throw Error(ht(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return y_(a),e;if(i===n)return y_(a),t;i=i.sibling}throw Error(ht(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(ht(189))}}if(r.alternate!==n)throw Error(ht(190))}if(r.tag!==3)throw Error(ht(188));return r.stateNode.current===r?e:t}function Wk(e){return e=LF(e),e!==null?Gk(e):null}function Gk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gk(e);if(t!==null)return t;e=e.sibling}return null}var Kk=di.unstable_scheduleCallback,j_=di.unstable_cancelCallback,TF=di.unstable_shouldYield,RF=di.unstable_requestPaint,Wr=di.unstable_now,IF=di.unstable_getCurrentPriorityLevel,cN=di.unstable_ImmediatePriority,Yk=di.unstable_UserBlockingPriority,B0=di.unstable_NormalPriority,FF=di.unstable_LowPriority,Jk=di.unstable_IdlePriority,Gv=null,Uo=null;function DF(e){if(Uo&&typeof Uo.onCommitFiberRoot=="function")try{Uo.onCommitFiberRoot(Gv,e,void 0,(e.current.flags&128)===128)}catch{}}var oo=Math.clz32?Math.clz32:$F,OF=Math.log,MF=Math.LN2;function $F(e){return e>>>=0,e===0?32:31-(OF(e)/MF|0)|0}var Xx=64,Qx=4194304;function Lm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function z0(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Lm(l):(i&=o,i!==0&&(n=Lm(i)))}else o=r&~a,o!==0?n=Lm(o):i!==0&&(n=Lm(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-oo(t),a=1<<r,n|=e[r],t&=~a;return n}function BF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zF(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-oo(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=BF(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function o2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zk(){var e=Xx;return Xx<<=1,!(Xx&4194240)&&(Xx=64),e}function hj(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-oo(t),e[t]=r}function UF(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-oo(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function dN(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-oo(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var or=0;function Xk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Qk,uN,e6,t6,s6,l2=!1,eg=[],Lc=null,Tc=null,Rc=null,up=new Map,hp=new Map,pc=[],qF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b_(e,t){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Tc=null;break;case"mouseover":case"mouseout":Rc=null;break;case"pointerover":case"pointerout":up.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hp.delete(t.pointerId)}}function fm(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Hp(t),t!==null&&uN(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function VF(e,t,r,n,a){switch(t){case"focusin":return Lc=fm(Lc,e,t,r,n,a),!0;case"dragenter":return Tc=fm(Tc,e,t,r,n,a),!0;case"mouseover":return Rc=fm(Rc,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return up.set(i,fm(up.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,hp.set(i,fm(hp.get(i)||null,e,t,r,n,a)),!0}return!1}function r6(e){var t=$d(e.target);if(t!==null){var r=bu(t);if(r!==null){if(t=r.tag,t===13){if(t=Hk(r),t!==null){e.blockedOn=t,s6(e.priority,function(){e6(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=c2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);r2=n,r.target.dispatchEvent(n),r2=null}else return t=Hp(r),t!==null&&uN(t),e.blockedOn=r,!1;t.shift()}return!0}function w_(e,t,r){Lg(e)&&r.delete(t)}function HF(){l2=!1,Lc!==null&&Lg(Lc)&&(Lc=null),Tc!==null&&Lg(Tc)&&(Tc=null),Rc!==null&&Lg(Rc)&&(Rc=null),up.forEach(w_),hp.forEach(w_)}function mm(e,t){e.blockedOn===t&&(e.blockedOn=null,l2||(l2=!0,di.unstable_scheduleCallback(di.unstable_NormalPriority,HF)))}function fp(e){function t(a){return mm(a,e)}if(0<eg.length){mm(eg[0],e);for(var r=1;r<eg.length;r++){var n=eg[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Lc!==null&&mm(Lc,e),Tc!==null&&mm(Tc,e),Rc!==null&&mm(Rc,e),up.forEach(t),hp.forEach(t),r=0;r<pc.length;r++)n=pc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<pc.length&&(r=pc[0],r.blockedOn===null);)r6(r),r.blockedOn===null&&pc.shift()}var Ph=Bl.ReactCurrentBatchConfig,U0=!0;function WF(e,t,r,n){var a=or,i=Ph.transition;Ph.transition=null;try{or=1,hN(e,t,r,n)}finally{or=a,Ph.transition=i}}function GF(e,t,r,n){var a=or,i=Ph.transition;Ph.transition=null;try{or=4,hN(e,t,r,n)}finally{or=a,Ph.transition=i}}function hN(e,t,r,n){if(U0){var a=c2(e,t,r,n);if(a===null)wj(e,t,n,q0,r),b_(e,n);else if(VF(a,e,t,r,n))n.stopPropagation();else if(b_(e,n),t&4&&-1<qF.indexOf(e)){for(;a!==null;){var i=Hp(a);if(i!==null&&Qk(i),i=c2(e,t,r,n),i===null&&wj(e,t,n,q0,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else wj(e,t,n,null,r)}}var q0=null;function c2(e,t,r,n){if(q0=null,e=lN(n),e=$d(e),e!==null)if(t=bu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Hk(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return q0=e,null}function n6(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IF()){case cN:return 1;case Yk:return 4;case B0:case FF:return 16;case Jk:return 536870912;default:return 16}default:return 16}}var _c=null,fN=null,Tg=null;function a6(){if(Tg)return Tg;var e,t=fN,r=t.length,n,a="value"in _c?_c.value:_c.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Tg=a.slice(e,1<n?1-n:void 0)}function Rg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tg(){return!0}function N_(){return!1}function mi(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?tg:N_,this.isPropagationStopped=N_,this}return Rr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tg)},persist:function(){},isPersistent:tg}),t}var Sf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mN=mi(Sf),Vp=Rr({},Sf,{view:0,detail:0}),KF=mi(Vp),fj,mj,pm,Kv=Rr({},Vp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pN,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pm&&(pm&&e.type==="mousemove"?(fj=e.screenX-pm.screenX,mj=e.screenY-pm.screenY):mj=fj=0,pm=e),fj)},movementY:function(e){return"movementY"in e?e.movementY:mj}}),S_=mi(Kv),YF=Rr({},Kv,{dataTransfer:0}),JF=mi(YF),ZF=Rr({},Vp,{relatedTarget:0}),pj=mi(ZF),XF=Rr({},Sf,{animationName:0,elapsedTime:0,pseudoElement:0}),QF=mi(XF),eD=Rr({},Sf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tD=mi(eD),sD=Rr({},Sf,{data:0}),__=mi(sD),rD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=aD[e])?!!t[e]:!1}function pN(){return iD}var oD=Rr({},Vp,{key:function(e){if(e.key){var t=rD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pN,charCode:function(e){return e.type==="keypress"?Rg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lD=mi(oD),cD=Rr({},Kv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C_=mi(cD),dD=Rr({},Vp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pN}),uD=mi(dD),hD=Rr({},Sf,{propertyName:0,elapsedTime:0,pseudoElement:0}),fD=mi(hD),mD=Rr({},Kv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pD=mi(mD),xD=[9,13,27,32],xN=Nl&&"CompositionEvent"in window,Bm=null;Nl&&"documentMode"in document&&(Bm=document.documentMode);var gD=Nl&&"TextEvent"in window&&!Bm,i6=Nl&&(!xN||Bm&&8<Bm&&11>=Bm),k_=" ",P_=!1;function o6(e,t){switch(e){case"keyup":return xD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mh=!1;function vD(e,t){switch(e){case"compositionend":return l6(t);case"keypress":return t.which!==32?null:(P_=!0,k_);case"textInput":return e=t.data,e===k_&&P_?null:e;default:return null}}function yD(e,t){if(mh)return e==="compositionend"||!xN&&o6(e,t)?(e=a6(),Tg=fN=_c=null,mh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return i6&&t.locale!=="ko"?null:t.data;default:return null}}var jD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jD[e.type]:t==="textarea"}function c6(e,t,r,n){Bk(n),t=V0(t,"onChange"),0<t.length&&(r=new mN("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var zm=null,mp=null;function bD(e){j6(e,0)}function Yv(e){var t=gh(e);if(Rk(t))return e}function wD(e,t){if(e==="change")return t}var d6=!1;if(Nl){var xj;if(Nl){var gj="oninput"in document;if(!gj){var E_=document.createElement("div");E_.setAttribute("oninput","return;"),gj=typeof E_.oninput=="function"}xj=gj}else xj=!1;d6=xj&&(!document.documentMode||9<document.documentMode)}function L_(){zm&&(zm.detachEvent("onpropertychange",u6),mp=zm=null)}function u6(e){if(e.propertyName==="value"&&Yv(mp)){var t=[];c6(t,mp,e,lN(e)),Vk(bD,t)}}function ND(e,t,r){e==="focusin"?(L_(),zm=t,mp=r,zm.attachEvent("onpropertychange",u6)):e==="focusout"&&L_()}function SD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yv(mp)}function _D(e,t){if(e==="click")return Yv(t)}function CD(e,t){if(e==="input"||e==="change")return Yv(t)}function kD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var uo=typeof Object.is=="function"?Object.is:kD;function pp(e,t){if(uo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Hb.call(t,a)||!uo(e[a],t[a]))return!1}return!0}function T_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function R_(e,t){var r=T_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=T_(r)}}function h6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?h6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function f6(){for(var e=window,t=O0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=O0(e.document)}return t}function gN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function PD(e){var t=f6(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&h6(r.ownerDocument.documentElement,r)){if(n!==null&&gN(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=R_(r,i);var o=R_(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var AD=Nl&&"documentMode"in document&&11>=document.documentMode,ph=null,d2=null,Um=null,u2=!1;function I_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;u2||ph==null||ph!==O0(n)||(n=ph,"selectionStart"in n&&gN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Um&&pp(Um,n)||(Um=n,n=V0(d2,"onSelect"),0<n.length&&(t=new mN("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ph)))}function sg(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xh={animationend:sg("Animation","AnimationEnd"),animationiteration:sg("Animation","AnimationIteration"),animationstart:sg("Animation","AnimationStart"),transitionend:sg("Transition","TransitionEnd")},vj={},m6={};Nl&&(m6=document.createElement("div").style,"AnimationEvent"in window||(delete xh.animationend.animation,delete xh.animationiteration.animation,delete xh.animationstart.animation),"TransitionEvent"in window||delete xh.transitionend.transition);function Jv(e){if(vj[e])return vj[e];if(!xh[e])return e;var t=xh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in m6)return vj[e]=t[r];return e}var p6=Jv("animationend"),x6=Jv("animationiteration"),g6=Jv("animationstart"),v6=Jv("transitionend"),y6=new Map,F_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hd(e,t){y6.set(e,t),ju(t,[e])}for(var yj=0;yj<F_.length;yj++){var jj=F_[yj],ED=jj.toLowerCase(),LD=jj[0].toUpperCase()+jj.slice(1);hd(ED,"on"+LD)}hd(p6,"onAnimationEnd");hd(x6,"onAnimationIteration");hd(g6,"onAnimationStart");hd("dblclick","onDoubleClick");hd("focusin","onFocus");hd("focusout","onBlur");hd(v6,"onTransitionEnd");af("onMouseEnter",["mouseout","mouseover"]);af("onMouseLeave",["mouseout","mouseover"]);af("onPointerEnter",["pointerout","pointerover"]);af("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tm));function D_(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,EF(n,t,void 0,e),e.currentTarget=null}function j6(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;D_(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;D_(a,l,d),i=c}}}if($0)throw e=i2,$0=!1,i2=null,e}function wr(e,t){var r=t[x2];r===void 0&&(r=t[x2]=new Set);var n=e+"__bubble";r.has(n)||(b6(t,e,2,!1),r.add(n))}function bj(e,t,r){var n=0;t&&(n|=4),b6(r,e,n,t)}var rg="_reactListening"+Math.random().toString(36).slice(2);function xp(e){if(!e[rg]){e[rg]=!0,Pk.forEach(function(r){r!=="selectionchange"&&(TD.has(r)||bj(r,!1,e),bj(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rg]||(t[rg]=!0,bj("selectionchange",!1,t))}}function b6(e,t,r,n){switch(n6(t)){case 1:var a=WF;break;case 4:a=GF;break;default:a=hN}r=a.bind(null,t,r,e),a=void 0,!a2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function wj(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=$d(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Vk(function(){var d=i,u=lN(r),h=[];e:{var p=y6.get(e);if(p!==void 0){var f=mN,y=e;switch(e){case"keypress":if(Rg(r)===0)break e;case"keydown":case"keyup":f=lD;break;case"focusin":y="focus",f=pj;break;case"focusout":y="blur",f=pj;break;case"beforeblur":case"afterblur":f=pj;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=S_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=JF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=uD;break;case p6:case x6:case g6:f=QF;break;case v6:f=fD;break;case"scroll":f=KF;break;case"wheel":f=pD;break;case"copy":case"cut":case"paste":f=tD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=C_}var x=(t&4)!==0,w=!x&&e==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var b=d,N;b!==null;){N=b;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,v!==null&&(C=dp(b,v),C!=null&&x.push(gp(b,C,N)))),w)break;b=b.return}0<x.length&&(p=new f(p,y,null,r,u),h.push({event:p,listeners:x}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&r!==r2&&(y=r.relatedTarget||r.fromElement)&&($d(y)||y[Sl]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(y=r.relatedTarget||r.toElement,f=d,y=y?$d(y):null,y!==null&&(w=bu(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=d),f!==y)){if(x=S_,C="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(x=C_,C="onPointerLeave",v="onPointerEnter",b="pointer"),w=f==null?p:gh(f),N=y==null?p:gh(y),p=new x(C,b+"leave",f,r,u),p.target=w,p.relatedTarget=N,C=null,$d(u)===d&&(x=new x(v,b+"enter",y,r,u),x.target=N,x.relatedTarget=w,C=x),w=C,f&&y)t:{for(x=f,v=y,b=0,N=x;N;N=Zu(N))b++;for(N=0,C=v;C;C=Zu(C))N++;for(;0<b-N;)x=Zu(x),b--;for(;0<N-b;)v=Zu(v),N--;for(;b--;){if(x===v||v!==null&&x===v.alternate)break t;x=Zu(x),v=Zu(v)}x=null}else x=null;f!==null&&O_(h,p,f,x,!1),y!==null&&w!==null&&O_(h,w,y,x,!0)}}e:{if(p=d?gh(d):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var P=wD;else if(A_(p))if(d6)P=CD;else{P=SD;var D=ND}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=_D);if(P&&(P=P(e,d))){c6(h,P,r,u);break e}D&&D(e,p,d),e==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&Xb(p,"number",p.value)}switch(D=d?gh(d):window,e){case"focusin":(A_(D)||D.contentEditable==="true")&&(ph=D,d2=d,Um=null);break;case"focusout":Um=d2=ph=null;break;case"mousedown":u2=!0;break;case"contextmenu":case"mouseup":case"dragend":u2=!1,I_(h,r,u);break;case"selectionchange":if(AD)break;case"keydown":case"keyup":I_(h,r,u)}var R;if(xN)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else mh?o6(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(i6&&r.locale!=="ko"&&(mh||A!=="onCompositionStart"?A==="onCompositionEnd"&&mh&&(R=a6()):(_c=u,fN="value"in _c?_c.value:_c.textContent,mh=!0)),D=V0(d,A),0<D.length&&(A=new __(A,e,null,r,u),h.push({event:A,listeners:D}),R?A.data=R:(R=l6(r),R!==null&&(A.data=R)))),(R=gD?vD(e,r):yD(e,r))&&(d=V0(d,"onBeforeInput"),0<d.length&&(u=new __("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=R))}j6(h,t)})}function gp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function V0(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=dp(e,r),i!=null&&n.unshift(gp(e,i,a)),i=dp(e,t),i!=null&&n.push(gp(e,i,a))),e=e.return}return n}function Zu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function O_(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=dp(r,i),c!=null&&o.unshift(gp(r,c,l))):a||(c=dp(r,i),c!=null&&o.push(gp(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var RD=/\r\n?/g,ID=/\u0000|\uFFFD/g;function M_(e){return(typeof e=="string"?e:""+e).replace(RD,`
`).replace(ID,"")}function ng(e,t,r){if(t=M_(t),M_(e)!==t&&r)throw Error(ht(425))}function H0(){}var h2=null,f2=null;function m2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var p2=typeof setTimeout=="function"?setTimeout:void 0,FD=typeof clearTimeout=="function"?clearTimeout:void 0,$_=typeof Promise=="function"?Promise:void 0,DD=typeof queueMicrotask=="function"?queueMicrotask:typeof $_<"u"?function(e){return $_.resolve(null).then(e).catch(OD)}:p2;function OD(e){setTimeout(function(){throw e})}function Nj(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),fp(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);fp(t)}function Ic(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function B_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var _f=Math.random().toString(36).slice(2),Ro="__reactFiber$"+_f,vp="__reactProps$"+_f,Sl="__reactContainer$"+_f,x2="__reactEvents$"+_f,MD="__reactListeners$"+_f,$D="__reactHandles$"+_f;function $d(e){var t=e[Ro];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Sl]||r[Ro]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=B_(e);e!==null;){if(r=e[Ro])return r;e=B_(e)}return t}e=r,r=e.parentNode}return null}function Hp(e){return e=e[Ro]||e[Sl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ht(33))}function Zv(e){return e[vp]||null}var g2=[],vh=-1;function fd(e){return{current:e}}function _r(e){0>vh||(e.current=g2[vh],g2[vh]=null,vh--)}function yr(e,t){vh++,g2[vh]=e.current,e.current=t}var Xc={},la=fd(Xc),$a=fd(!1),iu=Xc;function of(e,t){var r=e.type.contextTypes;if(!r)return Xc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ba(e){return e=e.childContextTypes,e!=null}function W0(){_r($a),_r(la)}function z_(e,t,r){if(la.current!==Xc)throw Error(ht(168));yr(la,t),yr($a,r)}function w6(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ht(108,NF(e)||"Unknown",a));return Rr({},r,n)}function G0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xc,iu=la.current,yr(la,e),yr($a,$a.current),!0}function U_(e,t,r){var n=e.stateNode;if(!n)throw Error(ht(169));r?(e=w6(e,t,iu),n.__reactInternalMemoizedMergedChildContext=e,_r($a),_r(la),yr(la,e)):_r($a),yr($a,r)}var ml=null,Xv=!1,Sj=!1;function N6(e){ml===null?ml=[e]:ml.push(e)}function BD(e){Xv=!0,N6(e)}function md(){if(!Sj&&ml!==null){Sj=!0;var e=0,t=or;try{var r=ml;for(or=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ml=null,Xv=!1}catch(a){throw ml!==null&&(ml=ml.slice(e+1)),Kk(cN,md),a}finally{or=t,Sj=!1}}return null}var yh=[],jh=0,K0=null,Y0=0,ki=[],Pi=0,ou=null,xl=1,gl="";function Id(e,t){yh[jh++]=Y0,yh[jh++]=K0,K0=e,Y0=t}function S6(e,t,r){ki[Pi++]=xl,ki[Pi++]=gl,ki[Pi++]=ou,ou=e;var n=xl;e=gl;var a=32-oo(n)-1;n&=~(1<<a),r+=1;var i=32-oo(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,xl=1<<32-oo(t)+a|r<<a|n,gl=i+e}else xl=1<<i|r<<a|n,gl=e}function vN(e){e.return!==null&&(Id(e,1),S6(e,1,0))}function yN(e){for(;e===K0;)K0=yh[--jh],yh[jh]=null,Y0=yh[--jh],yh[jh]=null;for(;e===ou;)ou=ki[--Pi],ki[Pi]=null,gl=ki[--Pi],ki[Pi]=null,xl=ki[--Pi],ki[Pi]=null}var li=null,ii=null,Pr=!1,ro=null;function _6(e,t){var r=Ei(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function q_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,li=e,ii=Ic(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,li=e,ii=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ou!==null?{id:xl,overflow:gl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ei(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,li=e,ii=null,!0):!1;default:return!1}}function v2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function y2(e){if(Pr){var t=ii;if(t){var r=t;if(!q_(e,t)){if(v2(e))throw Error(ht(418));t=Ic(r.nextSibling);var n=li;t&&q_(e,t)?_6(n,r):(e.flags=e.flags&-4097|2,Pr=!1,li=e)}}else{if(v2(e))throw Error(ht(418));e.flags=e.flags&-4097|2,Pr=!1,li=e}}}function V_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;li=e}function ag(e){if(e!==li)return!1;if(!Pr)return V_(e),Pr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!m2(e.type,e.memoizedProps)),t&&(t=ii)){if(v2(e))throw C6(),Error(ht(418));for(;t;)_6(e,t),t=Ic(t.nextSibling)}if(V_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ht(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ii=Ic(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ii=null}}else ii=li?Ic(e.stateNode.nextSibling):null;return!0}function C6(){for(var e=ii;e;)e=Ic(e.nextSibling)}function lf(){ii=li=null,Pr=!1}function jN(e){ro===null?ro=[e]:ro.push(e)}var zD=Bl.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){t=Rr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var J0=fd(null),Z0=null,bh=null,bN=null;function wN(){bN=bh=Z0=null}function NN(e){var t=J0.current;_r(J0),e._currentValue=t}function j2(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ah(e,t){Z0=e,bN=bh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ma=!0),e.firstContext=null)}function Fi(e){var t=e._currentValue;if(bN!==e)if(e={context:e,memoizedValue:t,next:null},bh===null){if(Z0===null)throw Error(ht(308));bh=e,Z0.dependencies={lanes:0,firstContext:e}}else bh=bh.next=e;return t}var Bd=null;function SN(e){Bd===null?Bd=[e]:Bd.push(e)}function k6(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,SN(t)):(r.next=a.next,a.next=r),t.interleaved=r,_l(e,n)}function _l(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fc=!1;function _N(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,qs&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,_l(e,r)}return a=n.interleaved,a===null?(t.next=t,SN(n)):(t.next=a.next,a.next=t),n.interleaved=t,_l(e,r)}function Ig(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dN(e,r)}}function H_(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function X0(e,t,r,n){var a=e.updateQueue;fc=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var p=l.lane,f=l.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,x=l;switch(p=t,f=r,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(f,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,p=typeof y=="function"?y.call(f,h,p):y,p==null)break e;h=Rr({},h,p);break e;case 2:fc=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=f,c=h):u=u.next=f,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);cu|=o,e.lanes=o,e.memoizedState=h}}function W_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ht(191,a));a.call(n)}}}var A6=new kk.Component().refs;function b2(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Rr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Qv={isMounted:function(e){return(e=e._reactInternals)?bu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ya(),a=Oc(e),i=yl(n,a);i.payload=t,r!=null&&(i.callback=r),t=Fc(e,i,a),t!==null&&(lo(t,e,a,n),Ig(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ya(),a=Oc(e),i=yl(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Fc(e,i,a),t!==null&&(lo(t,e,a,n),Ig(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ya(),n=Oc(e),a=yl(r,n);a.tag=2,t!=null&&(a.callback=t),t=Fc(e,a,n),t!==null&&(lo(t,e,n,r),Ig(t,e,n))}};function G_(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!pp(r,n)||!pp(a,i):!0}function E6(e,t,r){var n=!1,a=Xc,i=t.contextType;return typeof i=="object"&&i!==null?i=Fi(i):(a=Ba(t)?iu:la.current,n=t.contextTypes,i=(n=n!=null)?of(e,a):Xc),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qv,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function K_(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Qv.enqueueReplaceState(t,t.state,null)}function w2(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=A6,_N(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Fi(i):(i=Ba(t)?iu:la.current,a.context=of(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(b2(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Qv.enqueueReplaceState(a,a.state,null),X0(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function xm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ht(309));var n=r.stateNode}if(!n)throw Error(ht(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;l===A6&&(l=a.refs={}),o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ht(284));if(!r._owner)throw Error(ht(290,e))}return e}function ig(e,t){throw e=Object.prototype.toString.call(t),Error(ht(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Y_(e){var t=e._init;return t(e._payload)}function L6(e){function t(v,b){if(e){var N=v.deletions;N===null?(v.deletions=[b],v.flags|=16):N.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function a(v,b){return v=Mc(v,b),v.index=0,v.sibling=null,v}function i(v,b,N){return v.index=N,e?(N=v.alternate,N!==null?(N=N.index,N<b?(v.flags|=2,b):N):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,N,C){return b===null||b.tag!==6?(b=Lj(N,v.mode,C),b.return=v,b):(b=a(b,N),b.return=v,b)}function c(v,b,N,C){var P=N.type;return P===fh?u(v,b,N.props.children,C,N.key):b!==null&&(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===hc&&Y_(P)===b.type)?(C=a(b,N.props),C.ref=xm(v,b,N),C.return=v,C):(C=Bg(N.type,N.key,N.props,null,v.mode,C),C.ref=xm(v,b,N),C.return=v,C)}function d(v,b,N,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=Tj(N,v.mode,C),b.return=v,b):(b=a(b,N.children||[]),b.return=v,b)}function u(v,b,N,C,P){return b===null||b.tag!==7?(b=Qd(N,v.mode,C,P),b.return=v,b):(b=a(b,N),b.return=v,b)}function h(v,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Lj(""+b,v.mode,N),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yx:return N=Bg(b.type,b.key,b.props,null,v.mode,N),N.ref=xm(v,null,b),N.return=v,N;case hh:return b=Tj(b,v.mode,N),b.return=v,b;case hc:var C=b._init;return h(v,C(b._payload),N)}if(Em(b)||um(b))return b=Qd(b,v.mode,N,null),b.return=v,b;ig(v,b)}return null}function p(v,b,N,C){var P=b!==null?b.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return P!==null?null:l(v,b,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Yx:return N.key===P?c(v,b,N,C):null;case hh:return N.key===P?d(v,b,N,C):null;case hc:return P=N._init,p(v,b,P(N._payload),C)}if(Em(N)||um(N))return P!==null?null:u(v,b,N,C,null);ig(v,N)}return null}function f(v,b,N,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(N)||null,l(b,v,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Yx:return v=v.get(C.key===null?N:C.key)||null,c(b,v,C,P);case hh:return v=v.get(C.key===null?N:C.key)||null,d(b,v,C,P);case hc:var D=C._init;return f(v,b,N,D(C._payload),P)}if(Em(C)||um(C))return v=v.get(N)||null,u(b,v,C,P,null);ig(b,C)}return null}function y(v,b,N,C){for(var P=null,D=null,R=b,A=b=0,I=null;R!==null&&A<N.length;A++){R.index>A?(I=R,R=null):I=R.sibling;var O=p(v,R,N[A],C);if(O===null){R===null&&(R=I);break}e&&R&&O.alternate===null&&t(v,R),b=i(O,b,A),D===null?P=O:D.sibling=O,D=O,R=I}if(A===N.length)return r(v,R),Pr&&Id(v,A),P;if(R===null){for(;A<N.length;A++)R=h(v,N[A],C),R!==null&&(b=i(R,b,A),D===null?P=R:D.sibling=R,D=R);return Pr&&Id(v,A),P}for(R=n(v,R);A<N.length;A++)I=f(R,v,A,N[A],C),I!==null&&(e&&I.alternate!==null&&R.delete(I.key===null?A:I.key),b=i(I,b,A),D===null?P=I:D.sibling=I,D=I);return e&&R.forEach(function(F){return t(v,F)}),Pr&&Id(v,A),P}function x(v,b,N,C){var P=um(N);if(typeof P!="function")throw Error(ht(150));if(N=P.call(N),N==null)throw Error(ht(151));for(var D=P=null,R=b,A=b=0,I=null,O=N.next();R!==null&&!O.done;A++,O=N.next()){R.index>A?(I=R,R=null):I=R.sibling;var F=p(v,R,O.value,C);if(F===null){R===null&&(R=I);break}e&&R&&F.alternate===null&&t(v,R),b=i(F,b,A),D===null?P=F:D.sibling=F,D=F,R=I}if(O.done)return r(v,R),Pr&&Id(v,A),P;if(R===null){for(;!O.done;A++,O=N.next())O=h(v,O.value,C),O!==null&&(b=i(O,b,A),D===null?P=O:D.sibling=O,D=O);return Pr&&Id(v,A),P}for(R=n(v,R);!O.done;A++,O=N.next())O=f(R,v,A,O.value,C),O!==null&&(e&&O.alternate!==null&&R.delete(O.key===null?A:O.key),b=i(O,b,A),D===null?P=O:D.sibling=O,D=O);return e&&R.forEach(function(E){return t(v,E)}),Pr&&Id(v,A),P}function w(v,b,N,C){if(typeof N=="object"&&N!==null&&N.type===fh&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Yx:e:{for(var P=N.key,D=b;D!==null;){if(D.key===P){if(P=N.type,P===fh){if(D.tag===7){r(v,D.sibling),b=a(D,N.props.children),b.return=v,v=b;break e}}else if(D.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===hc&&Y_(P)===D.type){r(v,D.sibling),b=a(D,N.props),b.ref=xm(v,D,N),b.return=v,v=b;break e}r(v,D);break}else t(v,D);D=D.sibling}N.type===fh?(b=Qd(N.props.children,v.mode,C,N.key),b.return=v,v=b):(C=Bg(N.type,N.key,N.props,null,v.mode,C),C.ref=xm(v,b,N),C.return=v,v=C)}return o(v);case hh:e:{for(D=N.key;b!==null;){if(b.key===D)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){r(v,b.sibling),b=a(b,N.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=Tj(N,v.mode,C),b.return=v,v=b}return o(v);case hc:return D=N._init,w(v,b,D(N._payload),C)}if(Em(N))return y(v,b,N,C);if(um(N))return x(v,b,N,C);ig(v,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,b!==null&&b.tag===6?(r(v,b.sibling),b=a(b,N),b.return=v,v=b):(r(v,b),b=Lj(N,v.mode,C),b.return=v,v=b),o(v)):r(v,b)}return w}var cf=L6(!0),T6=L6(!1),Wp={},qo=fd(Wp),yp=fd(Wp),jp=fd(Wp);function zd(e){if(e===Wp)throw Error(ht(174));return e}function CN(e,t){switch(yr(jp,t),yr(yp,e),yr(qo,Wp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:e2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=e2(t,e)}_r(qo),yr(qo,t)}function df(){_r(qo),_r(yp),_r(jp)}function R6(e){zd(jp.current);var t=zd(qo.current),r=e2(t,e.type);t!==r&&(yr(yp,e),yr(qo,r))}function kN(e){yp.current===e&&(_r(qo),_r(yp))}var Lr=fd(0);function Q0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _j=[];function PN(){for(var e=0;e<_j.length;e++)_j[e]._workInProgressVersionPrimary=null;_j.length=0}var Fg=Bl.ReactCurrentDispatcher,Cj=Bl.ReactCurrentBatchConfig,lu=0,Tr=null,un=null,yn=null,ev=!1,qm=!1,bp=0,UD=0;function Yn(){throw Error(ht(321))}function AN(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!uo(e[r],t[r]))return!1;return!0}function EN(e,t,r,n,a,i){if(lu=i,Tr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fg.current=e===null||e.memoizedState===null?WD:GD,e=r(n,a),qm){i=0;do{if(qm=!1,bp=0,25<=i)throw Error(ht(301));i+=1,yn=un=null,t.updateQueue=null,Fg.current=KD,e=r(n,a)}while(qm)}if(Fg.current=tv,t=un!==null&&un.next!==null,lu=0,yn=un=Tr=null,ev=!1,t)throw Error(ht(300));return e}function LN(){var e=bp!==0;return bp=0,e}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Tr.memoizedState=yn=e:yn=yn.next=e,yn}function Di(){if(un===null){var e=Tr.alternate;e=e!==null?e.memoizedState:null}else e=un.next;var t=yn===null?Tr.memoizedState:yn.next;if(t!==null)yn=t,un=e;else{if(e===null)throw Error(ht(310));un=e,e={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},yn===null?Tr.memoizedState=yn=e:yn=yn.next=e}return yn}function wp(e,t){return typeof t=="function"?t(e):t}function kj(e){var t=Di(),r=t.queue;if(r===null)throw Error(ht(311));r.lastRenderedReducer=e;var n=un,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((lu&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Tr.lanes|=u,cu|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,uo(n,t.memoizedState)||(Ma=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Tr.lanes|=i,cu|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Pj(e){var t=Di(),r=t.queue;if(r===null)throw Error(ht(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);uo(i,t.memoizedState)||(Ma=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function I6(){}function F6(e,t){var r=Tr,n=Di(),a=t(),i=!uo(n.memoizedState,a);if(i&&(n.memoizedState=a,Ma=!0),n=n.queue,TN(M6.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||yn!==null&&yn.memoizedState.tag&1){if(r.flags|=2048,Np(9,O6.bind(null,r,n,a,t),void 0,null),_n===null)throw Error(ht(349));lu&30||D6(r,t,a)}return a}function D6(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Tr.updateQueue,t===null?(t={lastEffect:null,stores:null},Tr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function O6(e,t,r,n){t.value=r,t.getSnapshot=n,$6(t)&&B6(e)}function M6(e,t,r){return r(function(){$6(t)&&B6(e)})}function $6(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!uo(e,r)}catch{return!0}}function B6(e){var t=_l(e,1);t!==null&&lo(t,e,1,-1)}function J_(e){var t=Ao();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:e},t.queue=e,e=e.dispatch=HD.bind(null,Tr,e),[t.memoizedState,e]}function Np(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Tr.updateQueue,t===null?(t={lastEffect:null,stores:null},Tr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function z6(){return Di().memoizedState}function Dg(e,t,r,n){var a=Ao();Tr.flags|=e,a.memoizedState=Np(1|t,r,void 0,n===void 0?null:n)}function ey(e,t,r,n){var a=Di();n=n===void 0?null:n;var i=void 0;if(un!==null){var o=un.memoizedState;if(i=o.destroy,n!==null&&AN(n,o.deps)){a.memoizedState=Np(t,r,i,n);return}}Tr.flags|=e,a.memoizedState=Np(1|t,r,i,n)}function Z_(e,t){return Dg(8390656,8,e,t)}function TN(e,t){return ey(2048,8,e,t)}function U6(e,t){return ey(4,2,e,t)}function q6(e,t){return ey(4,4,e,t)}function V6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function H6(e,t,r){return r=r!=null?r.concat([e]):null,ey(4,4,V6.bind(null,t,e),r)}function RN(){}function W6(e,t){var r=Di();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&AN(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function G6(e,t){var r=Di();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&AN(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function K6(e,t,r){return lu&21?(uo(r,t)||(r=Zk(),Tr.lanes|=r,cu|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ma=!0),e.memoizedState=r)}function qD(e,t){var r=or;or=r!==0&&4>r?r:4,e(!0);var n=Cj.transition;Cj.transition={};try{e(!1),t()}finally{or=r,Cj.transition=n}}function Y6(){return Di().memoizedState}function VD(e,t,r){var n=Oc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},J6(e))Z6(t,r);else if(r=k6(e,t,r,n),r!==null){var a=ya();lo(r,e,n,a),X6(r,t,n)}}function HD(e,t,r){var n=Oc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(J6(e))Z6(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,uo(l,o)){var c=t.interleaved;c===null?(a.next=a,SN(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=k6(e,t,a,n),r!==null&&(a=ya(),lo(r,e,n,a),X6(r,t,n))}}function J6(e){var t=e.alternate;return e===Tr||t!==null&&t===Tr}function Z6(e,t){qm=ev=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function X6(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dN(e,r)}}var tv={readContext:Fi,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useInsertionEffect:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useSyncExternalStore:Yn,useId:Yn,unstable_isNewReconciler:!1},WD={readContext:Fi,useCallback:function(e,t){return Ao().memoizedState=[e,t===void 0?null:t],e},useContext:Fi,useEffect:Z_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Dg(4194308,4,V6.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Dg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dg(4,2,e,t)},useMemo:function(e,t){var r=Ao();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ao();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=VD.bind(null,Tr,e),[n.memoizedState,e]},useRef:function(e){var t=Ao();return e={current:e},t.memoizedState=e},useState:J_,useDebugValue:RN,useDeferredValue:function(e){return Ao().memoizedState=e},useTransition:function(){var e=J_(!1),t=e[0];return e=qD.bind(null,e[1]),Ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Tr,a=Ao();if(Pr){if(r===void 0)throw Error(ht(407));r=r()}else{if(r=t(),_n===null)throw Error(ht(349));lu&30||D6(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Z_(M6.bind(null,n,i,e),[e]),n.flags|=2048,Np(9,O6.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ao(),t=_n.identifierPrefix;if(Pr){var r=gl,n=xl;r=(n&~(1<<32-oo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=bp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=UD++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},GD={readContext:Fi,useCallback:W6,useContext:Fi,useEffect:TN,useImperativeHandle:H6,useInsertionEffect:U6,useLayoutEffect:q6,useMemo:G6,useReducer:kj,useRef:z6,useState:function(){return kj(wp)},useDebugValue:RN,useDeferredValue:function(e){var t=Di();return K6(t,un.memoizedState,e)},useTransition:function(){var e=kj(wp)[0],t=Di().memoizedState;return[e,t]},useMutableSource:I6,useSyncExternalStore:F6,useId:Y6,unstable_isNewReconciler:!1},KD={readContext:Fi,useCallback:W6,useContext:Fi,useEffect:TN,useImperativeHandle:H6,useInsertionEffect:U6,useLayoutEffect:q6,useMemo:G6,useReducer:Pj,useRef:z6,useState:function(){return Pj(wp)},useDebugValue:RN,useDeferredValue:function(e){var t=Di();return un===null?t.memoizedState=e:K6(t,un.memoizedState,e)},useTransition:function(){var e=Pj(wp)[0],t=Di().memoizedState;return[e,t]},useMutableSource:I6,useSyncExternalStore:F6,useId:Y6,unstable_isNewReconciler:!1};function uf(e,t){try{var r="",n=t;do r+=wF(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Aj(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function N2(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var YD=typeof WeakMap=="function"?WeakMap:Map;function Q6(e,t,r){r=yl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){rv||(rv=!0,R2=n),N2(e,t)},r}function eP(e,t,r){r=yl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){N2(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){N2(e,t),typeof n!="function"&&(Dc===null?Dc=new Set([this]):Dc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function X_(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new YD;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=cO.bind(null,e,t,r),t.then(e,e))}function Q_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function e4(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=yl(-1,1),t.tag=2,Fc(r,t,1))),r.lanes|=1),e)}var JD=Bl.ReactCurrentOwner,Ma=!1;function ma(e,t,r,n){t.child=e===null?T6(t,null,r,n):cf(t,e.child,r,n)}function t4(e,t,r,n,a){r=r.render;var i=t.ref;return Ah(t,a),n=EN(e,t,r,n,i,a),r=LN(),e!==null&&!Ma?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cl(e,t,a)):(Pr&&r&&vN(t),t.flags|=1,ma(e,t,n,a),t.child)}function s4(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!zN(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,tP(e,t,i,n,a)):(e=Bg(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:pp,r(o,n)&&e.ref===t.ref)return Cl(e,t,a)}return t.flags|=1,e=Mc(i,n),e.ref=t.ref,e.return=t,t.child=e}function tP(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(pp(i,n)&&e.ref===t.ref)if(Ma=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Ma=!0);else return t.lanes=e.lanes,Cl(e,t,a)}return S2(e,t,r,n,a)}function sP(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yr(Nh,si),si|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yr(Nh,si),si|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,yr(Nh,si),si|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,yr(Nh,si),si|=n;return ma(e,t,a,r),t.child}function rP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function S2(e,t,r,n,a){var i=Ba(r)?iu:la.current;return i=of(t,i),Ah(t,a),r=EN(e,t,r,n,i,a),n=LN(),e!==null&&!Ma?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cl(e,t,a)):(Pr&&n&&vN(t),t.flags|=1,ma(e,t,r,a),t.child)}function r4(e,t,r,n,a){if(Ba(r)){var i=!0;G0(t)}else i=!1;if(Ah(t,a),t.stateNode===null)Og(e,t),E6(t,r,n),w2(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Fi(d):(d=Ba(r)?iu:la.current,d=of(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&K_(t,o,n,d),fc=!1;var p=t.memoizedState;o.state=p,X0(t,n,o,a),c=t.memoizedState,l!==n||p!==c||$a.current||fc?(typeof u=="function"&&(b2(t,r,u,n),c=t.memoizedState),(l=fc||G_(t,r,l,n,p,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,P6(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Ji(t.type,l),o.props=d,h=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Fi(c):(c=Ba(r)?iu:la.current,c=of(t,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&K_(t,o,n,c),fc=!1,p=t.memoizedState,o.state=p,X0(t,n,o,a);var y=t.memoizedState;l!==h||p!==y||$a.current||fc?(typeof f=="function"&&(b2(t,r,f,n),y=t.memoizedState),(d=fc||G_(t,r,d,n,p,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return _2(e,t,r,n,i,a)}function _2(e,t,r,n,a,i){rP(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&U_(t,r,!1),Cl(e,t,i);n=t.stateNode,JD.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=cf(t,e.child,null,i),t.child=cf(t,null,l,i)):ma(e,t,l,i),t.memoizedState=n.state,a&&U_(t,r,!0),t.child}function nP(e){var t=e.stateNode;t.pendingContext?z_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&z_(e,t.context,!1),CN(e,t.containerInfo)}function n4(e,t,r,n,a){return lf(),jN(a),t.flags|=256,ma(e,t,r,n),t.child}var C2={dehydrated:null,treeContext:null,retryLane:0};function k2(e){return{baseLanes:e,cachePool:null,transitions:null}}function aP(e,t,r){var n=t.pendingProps,a=Lr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),yr(Lr,a&1),e===null)return y2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ry(o,n,0,null),e=Qd(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=k2(r),t.memoizedState=C2,e):IN(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return ZD(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Mc(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Mc(l,i):(i=Qd(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?k2(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=C2,n}return i=e.child,e=i.sibling,n=Mc(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function IN(e,t){return t=ry({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function og(e,t,r,n){return n!==null&&jN(n),cf(t,e.child,null,r),e=IN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ZD(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Aj(Error(ht(422))),og(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=ry({mode:"visible",children:n.children},a,0,null),i=Qd(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&cf(t,e.child,null,o),t.child.memoizedState=k2(o),t.memoizedState=C2,i);if(!(t.mode&1))return og(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ht(419)),n=Aj(i,n,void 0),og(e,t,o,n)}if(l=(o&e.childLanes)!==0,Ma||l){if(n=_n,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,_l(e,a),lo(n,e,a,-1))}return BN(),n=Aj(Error(ht(421))),og(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=dO.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ii=Ic(a.nextSibling),li=t,Pr=!0,ro=null,e!==null&&(ki[Pi++]=xl,ki[Pi++]=gl,ki[Pi++]=ou,xl=e.id,gl=e.overflow,ou=t),t=IN(t,n.children),t.flags|=4096,t)}function a4(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),j2(e.return,t,r)}function Ej(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function iP(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ma(e,t,n.children,r),n=Lr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&a4(e,r,t);else if(e.tag===19)a4(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(yr(Lr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Q0(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ej(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Q0(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ej(t,!0,r,null,i);break;case"together":Ej(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Og(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),cu|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ht(153));if(t.child!==null){for(e=t.child,r=Mc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Mc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function XD(e,t,r){switch(t.tag){case 3:nP(t),lf();break;case 5:R6(t);break;case 1:Ba(t.type)&&G0(t);break;case 4:CN(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;yr(J0,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(yr(Lr,Lr.current&1),t.flags|=128,null):r&t.child.childLanes?aP(e,t,r):(yr(Lr,Lr.current&1),e=Cl(e,t,r),e!==null?e.sibling:null);yr(Lr,Lr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return iP(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),yr(Lr,Lr.current),n)break;return null;case 22:case 23:return t.lanes=0,sP(e,t,r)}return Cl(e,t,r)}var oP,P2,lP,cP;oP=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};P2=function(){};lP=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,zd(qo.current);var i=null;switch(r){case"input":a=Jb(e,a),n=Jb(e,n),i=[];break;case"select":a=Rr({},a,{value:void 0}),n=Rr({},n,{value:void 0}),i=[];break;case"textarea":a=Qb(e,a),n=Qb(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=H0)}t2(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(lp.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(lp.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&wr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};cP=function(e,t,r,n){r!==n&&(t.flags|=4)};function gm(e,t){if(!Pr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Jn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function QD(e,t,r){var n=t.pendingProps;switch(yN(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(t),null;case 1:return Ba(t.type)&&W0(),Jn(t),null;case 3:return n=t.stateNode,df(),_r($a),_r(la),PN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ag(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ro!==null&&(D2(ro),ro=null))),P2(e,t),Jn(t),null;case 5:kN(t);var a=zd(jp.current);if(r=t.type,e!==null&&t.stateNode!=null)lP(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ht(166));return Jn(t),null}if(e=zd(qo.current),ag(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ro]=t,n[vp]=i,e=(t.mode&1)!==0,r){case"dialog":wr("cancel",n),wr("close",n);break;case"iframe":case"object":case"embed":wr("load",n);break;case"video":case"audio":for(a=0;a<Tm.length;a++)wr(Tm[a],n);break;case"source":wr("error",n);break;case"img":case"image":case"link":wr("error",n),wr("load",n);break;case"details":wr("toggle",n);break;case"input":m_(n,i),wr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},wr("invalid",n);break;case"textarea":x_(n,i),wr("invalid",n)}t2(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ng(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ng(n.textContent,l,e),a=["children",""+l]):lp.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&wr("scroll",n)}switch(r){case"input":Jx(n),p_(n,i,!0);break;case"textarea":Jx(n),g_(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=H0)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dk(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ro]=t,e[vp]=n,oP(e,t,!1,!1),t.stateNode=e;e:{switch(o=s2(r,n),r){case"dialog":wr("cancel",e),wr("close",e),a=n;break;case"iframe":case"object":case"embed":wr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Tm.length;a++)wr(Tm[a],e);a=n;break;case"source":wr("error",e),a=n;break;case"img":case"image":case"link":wr("error",e),wr("load",e),a=n;break;case"details":wr("toggle",e),a=n;break;case"input":m_(e,n),a=Jb(e,n),wr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Rr({},n,{value:void 0}),wr("invalid",e);break;case"textarea":x_(e,n),a=Qb(e,n),wr("invalid",e);break;default:a=n}t2(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?$k(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ok(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&cp(e,c):typeof c=="number"&&cp(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&wr("scroll",e):c!=null&&nN(e,i,c,o))}switch(r){case"input":Jx(e),p_(e,n,!1);break;case"textarea":Jx(e),g_(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Zc(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?_h(e,!!n.multiple,i,!1):n.defaultValue!=null&&_h(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=H0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jn(t),null;case 6:if(e&&t.stateNode!=null)cP(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ht(166));if(r=zd(jp.current),zd(qo.current),ag(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ro]=t,(i=n.nodeValue!==r)&&(e=li,e!==null))switch(e.tag){case 3:ng(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ng(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ro]=t,t.stateNode=n}return Jn(t),null;case 13:if(_r(Lr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pr&&ii!==null&&t.mode&1&&!(t.flags&128))C6(),lf(),t.flags|=98560,i=!1;else if(i=ag(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ht(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ht(317));i[Ro]=t}else lf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jn(t),i=!1}else ro!==null&&(D2(ro),ro=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Lr.current&1?hn===0&&(hn=3):BN())),t.updateQueue!==null&&(t.flags|=4),Jn(t),null);case 4:return df(),P2(e,t),e===null&&xp(t.stateNode.containerInfo),Jn(t),null;case 10:return NN(t.type._context),Jn(t),null;case 17:return Ba(t.type)&&W0(),Jn(t),null;case 19:if(_r(Lr),i=t.memoizedState,i===null)return Jn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)gm(i,!1);else{if(hn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Q0(e),o!==null){for(t.flags|=128,gm(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return yr(Lr,Lr.current&1|2),t.child}e=e.sibling}i.tail!==null&&Wr()>hf&&(t.flags|=128,n=!0,gm(i,!1),t.lanes=4194304)}else{if(!n)if(e=Q0(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),gm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pr)return Jn(t),null}else 2*Wr()-i.renderingStartTime>hf&&r!==1073741824&&(t.flags|=128,n=!0,gm(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Wr(),t.sibling=null,r=Lr.current,yr(Lr,n?r&1|2:r&1),t):(Jn(t),null);case 22:case 23:return $N(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?si&1073741824&&(Jn(t),t.subtreeFlags&6&&(t.flags|=8192)):Jn(t),null;case 24:return null;case 25:return null}throw Error(ht(156,t.tag))}function eO(e,t){switch(yN(t),t.tag){case 1:return Ba(t.type)&&W0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return df(),_r($a),_r(la),PN(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kN(t),null;case 13:if(_r(Lr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ht(340));lf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _r(Lr),null;case 4:return df(),null;case 10:return NN(t.type._context),null;case 22:case 23:return $N(),null;case 24:return null;default:return null}}var lg=!1,ra=!1,tO=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function wh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){$r(e,t,n)}else r.current=null}function A2(e,t,r){try{r()}catch(n){$r(e,t,n)}}var i4=!1;function sO(e,t){if(h2=U0,e=f6(),gN(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++d===a&&(l=o),p===i&&++u===n&&(c=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(f2={focusedElem:e,selectionRange:r},U0=!1,Ft=t;Ft!==null;)if(t=Ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ft=e;else for(;Ft!==null;){t=Ft;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,w=y.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:Ji(t.type,x),w);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ht(163))}}catch(C){$r(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Ft=e;break}Ft=t.return}return y=i4,i4=!1,y}function Vm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&A2(t,r,i)}a=a.next}while(a!==n)}}function ty(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function E2(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function dP(e){var t=e.alternate;t!==null&&(e.alternate=null,dP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ro],delete t[vp],delete t[x2],delete t[MD],delete t[$D])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uP(e){return e.tag===5||e.tag===3||e.tag===4}function o4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function L2(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=H0));else if(n!==4&&(e=e.child,e!==null))for(L2(e,t,r),e=e.sibling;e!==null;)L2(e,t,r),e=e.sibling}function T2(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(T2(e,t,r),e=e.sibling;e!==null;)T2(e,t,r),e=e.sibling}var Dn=null,to=!1;function ac(e,t,r){for(r=r.child;r!==null;)hP(e,t,r),r=r.sibling}function hP(e,t,r){if(Uo&&typeof Uo.onCommitFiberUnmount=="function")try{Uo.onCommitFiberUnmount(Gv,r)}catch{}switch(r.tag){case 5:ra||wh(r,t);case 6:var n=Dn,a=to;Dn=null,ac(e,t,r),Dn=n,to=a,Dn!==null&&(to?(e=Dn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Dn.removeChild(r.stateNode));break;case 18:Dn!==null&&(to?(e=Dn,r=r.stateNode,e.nodeType===8?Nj(e.parentNode,r):e.nodeType===1&&Nj(e,r),fp(e)):Nj(Dn,r.stateNode));break;case 4:n=Dn,a=to,Dn=r.stateNode.containerInfo,to=!0,ac(e,t,r),Dn=n,to=a;break;case 0:case 11:case 14:case 15:if(!ra&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&A2(r,t,o),a=a.next}while(a!==n)}ac(e,t,r);break;case 1:if(!ra&&(wh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){$r(r,t,l)}ac(e,t,r);break;case 21:ac(e,t,r);break;case 22:r.mode&1?(ra=(n=ra)||r.memoizedState!==null,ac(e,t,r),ra=n):ac(e,t,r);break;default:ac(e,t,r)}}function l4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new tO),t.forEach(function(n){var a=uO.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Wi(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Dn=l.stateNode,to=!1;break e;case 3:Dn=l.stateNode.containerInfo,to=!0;break e;case 4:Dn=l.stateNode.containerInfo,to=!0;break e}l=l.return}if(Dn===null)throw Error(ht(160));hP(i,o,a),Dn=null,to=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){$r(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fP(t,e),t=t.sibling}function fP(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wi(t,e),Co(e),n&4){try{Vm(3,e,e.return),ty(3,e)}catch(x){$r(e,e.return,x)}try{Vm(5,e,e.return)}catch(x){$r(e,e.return,x)}}break;case 1:Wi(t,e),Co(e),n&512&&r!==null&&wh(r,r.return);break;case 5:if(Wi(t,e),Co(e),n&512&&r!==null&&wh(r,r.return),e.flags&32){var a=e.stateNode;try{cp(a,"")}catch(x){$r(e,e.return,x)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ik(a,i),s2(l,o);var d=s2(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?$k(a,h):u==="dangerouslySetInnerHTML"?Ok(a,h):u==="children"?cp(a,h):nN(a,u,h,d)}switch(l){case"input":Zb(a,i);break;case"textarea":Fk(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?_h(a,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?_h(a,!!i.multiple,i.defaultValue,!0):_h(a,!!i.multiple,i.multiple?[]:"",!1))}a[vp]=i}catch(x){$r(e,e.return,x)}}break;case 6:if(Wi(t,e),Co(e),n&4){if(e.stateNode===null)throw Error(ht(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){$r(e,e.return,x)}}break;case 3:if(Wi(t,e),Co(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{fp(t.containerInfo)}catch(x){$r(e,e.return,x)}break;case 4:Wi(t,e),Co(e);break;case 13:Wi(t,e),Co(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ON=Wr())),n&4&&l4(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(ra=(d=ra)||u,Wi(t,e),ra=d):Wi(t,e),Co(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ft=e,u=e.child;u!==null;){for(h=Ft=u;Ft!==null;){switch(p=Ft,f=p.child,p.tag){case 0:case 11:case 14:case 15:Vm(4,p,p.return);break;case 1:wh(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(x){$r(n,r,x)}}break;case 5:wh(p,p.return);break;case 22:if(p.memoizedState!==null){d4(h);continue}}f!==null?(f.return=p,Ft=f):d4(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Mk("display",o))}catch(x){$r(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){$r(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wi(t,e),Co(e),n&4&&l4(e);break;case 21:break;default:Wi(t,e),Co(e)}}function Co(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(uP(r)){var n=r;break e}r=r.return}throw Error(ht(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(cp(a,""),n.flags&=-33);var i=o4(e);T2(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=o4(e);L2(e,l,o);break;default:throw Error(ht(161))}}catch(c){$r(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rO(e,t,r){Ft=e,mP(e)}function mP(e,t,r){for(var n=(e.mode&1)!==0;Ft!==null;){var a=Ft,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||lg;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ra;l=lg;var d=ra;if(lg=o,(ra=c)&&!d)for(Ft=a;Ft!==null;)o=Ft,c=o.child,o.tag===22&&o.memoizedState!==null?u4(a):c!==null?(c.return=o,Ft=c):u4(a);for(;i!==null;)Ft=i,mP(i),i=i.sibling;Ft=a,lg=l,ra=d}c4(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ft=i):c4(e)}}function c4(e){for(;Ft!==null;){var t=Ft;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ra||ty(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ra)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ji(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&W_(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}W_(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&fp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ht(163))}ra||t.flags&512&&E2(t)}catch(p){$r(t,t.return,p)}}if(t===e){Ft=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ft=r;break}Ft=t.return}}function d4(e){for(;Ft!==null;){var t=Ft;if(t===e){Ft=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ft=r;break}Ft=t.return}}function u4(e){for(;Ft!==null;){var t=Ft;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ty(4,t)}catch(c){$r(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){$r(t,a,c)}}var i=t.return;try{E2(t)}catch(c){$r(t,i,c)}break;case 5:var o=t.return;try{E2(t)}catch(c){$r(t,o,c)}}}catch(c){$r(t,t.return,c)}if(t===e){Ft=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ft=l;break}Ft=t.return}}var nO=Math.ceil,sv=Bl.ReactCurrentDispatcher,FN=Bl.ReactCurrentOwner,Ti=Bl.ReactCurrentBatchConfig,qs=0,_n=null,an=null,Bn=0,si=0,Nh=fd(0),hn=0,Sp=null,cu=0,sy=0,DN=0,Hm=null,Oa=null,ON=0,hf=1/0,fl=null,rv=!1,R2=null,Dc=null,cg=!1,Cc=null,nv=0,Wm=0,I2=null,Mg=-1,$g=0;function ya(){return qs&6?Wr():Mg!==-1?Mg:Mg=Wr()}function Oc(e){return e.mode&1?qs&2&&Bn!==0?Bn&-Bn:zD.transition!==null?($g===0&&($g=Zk()),$g):(e=or,e!==0||(e=window.event,e=e===void 0?16:n6(e.type)),e):1}function lo(e,t,r,n){if(50<Wm)throw Wm=0,I2=null,Error(ht(185));qp(e,r,n),(!(qs&2)||e!==_n)&&(e===_n&&(!(qs&2)&&(sy|=r),hn===4&&xc(e,Bn)),za(e,n),r===1&&qs===0&&!(t.mode&1)&&(hf=Wr()+500,Xv&&md()))}function za(e,t){var r=e.callbackNode;zF(e,t);var n=z0(e,e===_n?Bn:0);if(n===0)r!==null&&j_(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&j_(r),t===1)e.tag===0?BD(h4.bind(null,e)):N6(h4.bind(null,e)),DD(function(){!(qs&6)&&md()}),r=null;else{switch(Xk(n)){case 1:r=cN;break;case 4:r=Yk;break;case 16:r=B0;break;case 536870912:r=Jk;break;default:r=B0}r=wP(r,pP.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function pP(e,t){if(Mg=-1,$g=0,qs&6)throw Error(ht(327));var r=e.callbackNode;if(Eh()&&e.callbackNode!==r)return null;var n=z0(e,e===_n?Bn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=av(e,n);else{t=n;var a=qs;qs|=2;var i=gP();(_n!==e||Bn!==t)&&(fl=null,hf=Wr()+500,Xd(e,t));do try{oO();break}catch(l){xP(e,l)}while(!0);wN(),sv.current=i,qs=a,an!==null?t=0:(_n=null,Bn=0,t=hn)}if(t!==0){if(t===2&&(a=o2(e),a!==0&&(n=a,t=F2(e,a))),t===1)throw r=Sp,Xd(e,0),xc(e,n),za(e,Wr()),r;if(t===6)xc(e,n);else{if(a=e.current.alternate,!(n&30)&&!aO(a)&&(t=av(e,n),t===2&&(i=o2(e),i!==0&&(n=i,t=F2(e,i))),t===1))throw r=Sp,Xd(e,0),xc(e,n),za(e,Wr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ht(345));case 2:Fd(e,Oa,fl);break;case 3:if(xc(e,n),(n&130023424)===n&&(t=ON+500-Wr(),10<t)){if(z0(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ya(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=p2(Fd.bind(null,e,Oa,fl),t);break}Fd(e,Oa,fl);break;case 4:if(xc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-oo(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Wr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*nO(n/1960))-n,10<n){e.timeoutHandle=p2(Fd.bind(null,e,Oa,fl),n);break}Fd(e,Oa,fl);break;case 5:Fd(e,Oa,fl);break;default:throw Error(ht(329))}}}return za(e,Wr()),e.callbackNode===r?pP.bind(null,e):null}function F2(e,t){var r=Hm;return e.current.memoizedState.isDehydrated&&(Xd(e,t).flags|=256),e=av(e,t),e!==2&&(t=Oa,Oa=r,t!==null&&D2(t)),e}function D2(e){Oa===null?Oa=e:Oa.push.apply(Oa,e)}function aO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!uo(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xc(e,t){for(t&=~DN,t&=~sy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-oo(t),n=1<<r;e[r]=-1,t&=~n}}function h4(e){if(qs&6)throw Error(ht(327));Eh();var t=z0(e,0);if(!(t&1))return za(e,Wr()),null;var r=av(e,t);if(e.tag!==0&&r===2){var n=o2(e);n!==0&&(t=n,r=F2(e,n))}if(r===1)throw r=Sp,Xd(e,0),xc(e,t),za(e,Wr()),r;if(r===6)throw Error(ht(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fd(e,Oa,fl),za(e,Wr()),null}function MN(e,t){var r=qs;qs|=1;try{return e(t)}finally{qs=r,qs===0&&(hf=Wr()+500,Xv&&md())}}function du(e){Cc!==null&&Cc.tag===0&&!(qs&6)&&Eh();var t=qs;qs|=1;var r=Ti.transition,n=or;try{if(Ti.transition=null,or=1,e)return e()}finally{or=n,Ti.transition=r,qs=t,!(qs&6)&&md()}}function $N(){si=Nh.current,_r(Nh)}function Xd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,FD(r)),an!==null)for(r=an.return;r!==null;){var n=r;switch(yN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&W0();break;case 3:df(),_r($a),_r(la),PN();break;case 5:kN(n);break;case 4:df();break;case 13:_r(Lr);break;case 19:_r(Lr);break;case 10:NN(n.type._context);break;case 22:case 23:$N()}r=r.return}if(_n=e,an=e=Mc(e.current,null),Bn=si=t,hn=0,Sp=null,DN=sy=cu=0,Oa=Hm=null,Bd!==null){for(t=0;t<Bd.length;t++)if(r=Bd[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Bd=null}return e}function xP(e,t){do{var r=an;try{if(wN(),Fg.current=tv,ev){for(var n=Tr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ev=!1}if(lu=0,yn=un=Tr=null,qm=!1,bp=0,FN.current=null,r===null||r.return===null){hn=1,Sp=t,an=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Bn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Q_(o);if(f!==null){f.flags&=-257,e4(f,o,l,i,t),f.mode&1&&X_(i,d,t),t=f,c=d;var y=t.updateQueue;if(y===null){var x=new Set;x.add(c),t.updateQueue=x}else y.add(c);break e}else{if(!(t&1)){X_(i,d,t),BN();break e}c=Error(ht(426))}}else if(Pr&&l.mode&1){var w=Q_(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),e4(w,o,l,i,t),jN(uf(c,l));break e}}i=c=uf(c,l),hn!==4&&(hn=2),Hm===null?Hm=[i]:Hm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=Q6(i,c,t);H_(i,v);break e;case 1:l=c;var b=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Dc===null||!Dc.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=eP(i,l,t);H_(i,C);break e}}i=i.return}while(i!==null)}yP(r)}catch(P){t=P,an===r&&r!==null&&(an=r=r.return);continue}break}while(!0)}function gP(){var e=sv.current;return sv.current=tv,e===null?tv:e}function BN(){(hn===0||hn===3||hn===2)&&(hn=4),_n===null||!(cu&268435455)&&!(sy&268435455)||xc(_n,Bn)}function av(e,t){var r=qs;qs|=2;var n=gP();(_n!==e||Bn!==t)&&(fl=null,Xd(e,t));do try{iO();break}catch(a){xP(e,a)}while(!0);if(wN(),qs=r,sv.current=n,an!==null)throw Error(ht(261));return _n=null,Bn=0,hn}function iO(){for(;an!==null;)vP(an)}function oO(){for(;an!==null&&!TF();)vP(an)}function vP(e){var t=bP(e.alternate,e,si);e.memoizedProps=e.pendingProps,t===null?yP(e):an=t,FN.current=null}function yP(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=eO(r,t),r!==null){r.flags&=32767,an=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hn=6,an=null;return}}else if(r=QD(r,t,si),r!==null){an=r;return}if(t=t.sibling,t!==null){an=t;return}an=t=e}while(t!==null);hn===0&&(hn=5)}function Fd(e,t,r){var n=or,a=Ti.transition;try{Ti.transition=null,or=1,lO(e,t,r,n)}finally{Ti.transition=a,or=n}return null}function lO(e,t,r,n){do Eh();while(Cc!==null);if(qs&6)throw Error(ht(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ht(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(UF(e,i),e===_n&&(an=_n=null,Bn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||cg||(cg=!0,wP(B0,function(){return Eh(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ti.transition,Ti.transition=null;var o=or;or=1;var l=qs;qs|=4,FN.current=null,sO(e,r),fP(r,e),PD(f2),U0=!!h2,f2=h2=null,e.current=r,rO(r),RF(),qs=l,or=o,Ti.transition=i}else e.current=r;if(cg&&(cg=!1,Cc=e,nv=a),i=e.pendingLanes,i===0&&(Dc=null),DF(r.stateNode),za(e,Wr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(rv)throw rv=!1,e=R2,R2=null,e;return nv&1&&e.tag!==0&&Eh(),i=e.pendingLanes,i&1?e===I2?Wm++:(Wm=0,I2=e):Wm=0,md(),null}function Eh(){if(Cc!==null){var e=Xk(nv),t=Ti.transition,r=or;try{if(Ti.transition=null,or=16>e?16:e,Cc===null)var n=!1;else{if(e=Cc,Cc=null,nv=0,qs&6)throw Error(ht(331));var a=qs;for(qs|=4,Ft=e.current;Ft!==null;){var i=Ft,o=i.child;if(Ft.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ft=d;Ft!==null;){var u=Ft;switch(u.tag){case 0:case 11:case 15:Vm(8,u,i)}var h=u.child;if(h!==null)h.return=u,Ft=h;else for(;Ft!==null;){u=Ft;var p=u.sibling,f=u.return;if(dP(u),u===d){Ft=null;break}if(p!==null){p.return=f,Ft=p;break}Ft=f}}}var y=i.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}Ft=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ft=o;else e:for(;Ft!==null;){if(i=Ft,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vm(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ft=v;break e}Ft=i.return}}var b=e.current;for(Ft=b;Ft!==null;){o=Ft;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Ft=N;else e:for(o=b;Ft!==null;){if(l=Ft,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ty(9,l)}}catch(P){$r(l,l.return,P)}if(l===o){Ft=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Ft=C;break e}Ft=l.return}}if(qs=a,md(),Uo&&typeof Uo.onPostCommitFiberRoot=="function")try{Uo.onPostCommitFiberRoot(Gv,e)}catch{}n=!0}return n}finally{or=r,Ti.transition=t}}return!1}function f4(e,t,r){t=uf(r,t),t=Q6(e,t,1),e=Fc(e,t,1),t=ya(),e!==null&&(qp(e,1,t),za(e,t))}function $r(e,t,r){if(e.tag===3)f4(e,e,r);else for(;t!==null;){if(t.tag===3){f4(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Dc===null||!Dc.has(n))){e=uf(r,e),e=eP(t,e,1),t=Fc(t,e,1),e=ya(),t!==null&&(qp(t,1,e),za(t,e));break}}t=t.return}}function cO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ya(),e.pingedLanes|=e.suspendedLanes&r,_n===e&&(Bn&r)===r&&(hn===4||hn===3&&(Bn&130023424)===Bn&&500>Wr()-ON?Xd(e,0):DN|=r),za(e,t)}function jP(e,t){t===0&&(e.mode&1?(t=Qx,Qx<<=1,!(Qx&130023424)&&(Qx=4194304)):t=1);var r=ya();e=_l(e,t),e!==null&&(qp(e,t,r),za(e,r))}function dO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),jP(e,r)}function uO(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ht(314))}n!==null&&n.delete(t),jP(e,r)}var bP;bP=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||$a.current)Ma=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ma=!1,XD(e,t,r);Ma=!!(e.flags&131072)}else Ma=!1,Pr&&t.flags&1048576&&S6(t,Y0,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Og(e,t),e=t.pendingProps;var a=of(t,la.current);Ah(t,r),a=EN(null,t,n,e,a,r);var i=LN();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ba(n)?(i=!0,G0(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,_N(t),a.updater=Qv,t.stateNode=a,a._reactInternals=t,w2(t,n,e,r),t=_2(null,t,n,!0,i,r)):(t.tag=0,Pr&&i&&vN(t),ma(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Og(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=fO(n),e=Ji(n,e),a){case 0:t=S2(null,t,n,e,r);break e;case 1:t=r4(null,t,n,e,r);break e;case 11:t=t4(null,t,n,e,r);break e;case 14:t=s4(null,t,n,Ji(n.type,e),r);break e}throw Error(ht(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ji(n,a),S2(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ji(n,a),r4(e,t,n,a,r);case 3:e:{if(nP(t),e===null)throw Error(ht(387));n=t.pendingProps,i=t.memoizedState,a=i.element,P6(e,t),X0(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=uf(Error(ht(423)),t),t=n4(e,t,n,r,a);break e}else if(n!==a){a=uf(Error(ht(424)),t),t=n4(e,t,n,r,a);break e}else for(ii=Ic(t.stateNode.containerInfo.firstChild),li=t,Pr=!0,ro=null,r=T6(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(lf(),n===a){t=Cl(e,t,r);break e}ma(e,t,n,r)}t=t.child}return t;case 5:return R6(t),e===null&&y2(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,m2(n,a)?o=null:i!==null&&m2(n,i)&&(t.flags|=32),rP(e,t),ma(e,t,o,r),t.child;case 6:return e===null&&y2(t),null;case 13:return aP(e,t,r);case 4:return CN(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=cf(t,null,n,r):ma(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ji(n,a),t4(e,t,n,a,r);case 7:return ma(e,t,t.pendingProps,r),t.child;case 8:return ma(e,t,t.pendingProps.children,r),t.child;case 12:return ma(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,yr(J0,n._currentValue),n._currentValue=o,i!==null)if(uo(i.value,o)){if(i.children===a.children&&!$a.current){t=Cl(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=yl(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),j2(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ht(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),j2(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ma(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ah(t,r),a=Fi(a),n=n(a),t.flags|=1,ma(e,t,n,r),t.child;case 14:return n=t.type,a=Ji(n,t.pendingProps),a=Ji(n.type,a),s4(e,t,n,a,r);case 15:return tP(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ji(n,a),Og(e,t),t.tag=1,Ba(n)?(e=!0,G0(t)):e=!1,Ah(t,r),E6(t,n,a),w2(t,n,a,r),_2(null,t,n,!0,e,r);case 19:return iP(e,t,r);case 22:return sP(e,t,r)}throw Error(ht(156,t.tag))};function wP(e,t){return Kk(e,t)}function hO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(e,t,r,n){return new hO(e,t,r,n)}function zN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fO(e){if(typeof e=="function")return zN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===iN)return 11;if(e===oN)return 14}return 2}function Mc(e,t){var r=e.alternate;return r===null?(r=Ei(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bg(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")zN(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fh:return Qd(r.children,a,i,t);case aN:o=8,a|=8;break;case Wb:return e=Ei(12,r,t,a|2),e.elementType=Wb,e.lanes=i,e;case Gb:return e=Ei(13,r,t,a),e.elementType=Gb,e.lanes=i,e;case Kb:return e=Ei(19,r,t,a),e.elementType=Kb,e.lanes=i,e;case Lk:return ry(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ak:o=10;break e;case Ek:o=9;break e;case iN:o=11;break e;case oN:o=14;break e;case hc:o=16,n=null;break e}throw Error(ht(130,e==null?e:typeof e,""))}return t=Ei(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Qd(e,t,r,n){return e=Ei(7,e,n,t),e.lanes=r,e}function ry(e,t,r,n){return e=Ei(22,e,n,t),e.elementType=Lk,e.lanes=r,e.stateNode={isHidden:!1},e}function Lj(e,t,r){return e=Ei(6,e,null,t),e.lanes=r,e}function Tj(e,t,r){return t=Ei(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mO(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hj(0),this.expirationTimes=hj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hj(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function UN(e,t,r,n,a,i,o,l,c){return e=new mO(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ei(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_N(i),e}function pO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function NP(e){if(!e)return Xc;e=e._reactInternals;e:{if(bu(e)!==e||e.tag!==1)throw Error(ht(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ba(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ht(171))}if(e.tag===1){var r=e.type;if(Ba(r))return w6(e,r,t)}return t}function SP(e,t,r,n,a,i,o,l,c){return e=UN(r,n,!0,e,a,i,o,l,c),e.context=NP(null),r=e.current,n=ya(),a=Oc(r),i=yl(n,a),i.callback=t??null,Fc(r,i,a),e.current.lanes=a,qp(e,a,n),za(e,n),e}function ny(e,t,r,n){var a=t.current,i=ya(),o=Oc(a);return r=NP(r),t.context===null?t.context=r:t.pendingContext=r,t=yl(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Fc(a,t,o),e!==null&&(lo(e,a,o,i),Ig(e,a,o)),o}function iv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function m4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qN(e,t){m4(e,t),(e=e.alternate)&&m4(e,t)}function xO(){return null}var _P=typeof reportError=="function"?reportError:function(e){console.error(e)};function VN(e){this._internalRoot=e}ay.prototype.render=VN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ht(409));ny(e,t,null,null)};ay.prototype.unmount=VN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;du(function(){ny(null,e,null,null)}),t[Sl]=null}};function ay(e){this._internalRoot=e}ay.prototype.unstable_scheduleHydration=function(e){if(e){var t=t6();e={blockedOn:null,target:e,priority:t};for(var r=0;r<pc.length&&t!==0&&t<pc[r].priority;r++);pc.splice(r,0,e),r===0&&r6(e)}};function HN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function iy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function p4(){}function gO(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=iv(o);i.call(d)}}var o=SP(t,n,e,0,null,!1,!1,"",p4);return e._reactRootContainer=o,e[Sl]=o.current,xp(e.nodeType===8?e.parentNode:e),du(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=iv(c);l.call(d)}}var c=UN(e,0,!1,null,null,!1,!1,"",p4);return e._reactRootContainer=c,e[Sl]=c.current,xp(e.nodeType===8?e.parentNode:e),du(function(){ny(t,c,r,n)}),c}function oy(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=iv(o);l.call(c)}}ny(t,o,e,a)}else o=gO(r,t,e,a,n);return iv(o)}Qk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Lm(t.pendingLanes);r!==0&&(dN(t,r|1),za(t,Wr()),!(qs&6)&&(hf=Wr()+500,md()))}break;case 13:du(function(){var n=_l(e,1);if(n!==null){var a=ya();lo(n,e,1,a)}}),qN(e,1)}};uN=function(e){if(e.tag===13){var t=_l(e,134217728);if(t!==null){var r=ya();lo(t,e,134217728,r)}qN(e,134217728)}};e6=function(e){if(e.tag===13){var t=Oc(e),r=_l(e,t);if(r!==null){var n=ya();lo(r,e,t,n)}qN(e,t)}};t6=function(){return or};s6=function(e,t){var r=or;try{return or=e,t()}finally{or=r}};n2=function(e,t,r){switch(t){case"input":if(Zb(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Zv(n);if(!a)throw Error(ht(90));Rk(n),Zb(n,a)}}}break;case"textarea":Fk(e,r);break;case"select":t=r.value,t!=null&&_h(e,!!r.multiple,t,!1)}};Uk=MN;qk=du;var vO={usingClientEntryPoint:!1,Events:[Hp,gh,Zv,Bk,zk,MN]},vm={findFiberByHostInstance:$d,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},yO={bundleType:vm.bundleType,version:vm.version,rendererPackageName:vm.rendererPackageName,rendererConfig:vm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Wk(e),e===null?null:e.stateNode},findFiberByHostInstance:vm.findFiberByHostInstance||xO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{Gv=dg.inject(yO),Uo=dg}catch{}}fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vO;fi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!HN(t))throw Error(ht(200));return pO(e,t,null,r)};fi.createRoot=function(e,t){if(!HN(e))throw Error(ht(299));var r=!1,n="",a=_P;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=UN(e,1,!1,null,null,r,!1,n,a),e[Sl]=t.current,xp(e.nodeType===8?e.parentNode:e),new VN(t)};fi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ht(188)):(e=Object.keys(e).join(","),Error(ht(268,e)));return e=Wk(t),e=e===null?null:e.stateNode,e};fi.flushSync=function(e){return du(e)};fi.hydrate=function(e,t,r){if(!iy(t))throw Error(ht(200));return oy(null,e,t,!0,r)};fi.hydrateRoot=function(e,t,r){if(!HN(e))throw Error(ht(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=_P;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=SP(t,null,e,1,r??null,a,!1,i,o),e[Sl]=t.current,xp(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new ay(t)};fi.render=function(e,t,r){if(!iy(t))throw Error(ht(200));return oy(null,e,t,!1,r)};fi.unmountComponentAtNode=function(e){if(!iy(e))throw Error(ht(40));return e._reactRootContainer?(du(function(){oy(null,null,e,!1,function(){e._reactRootContainer=null,e[Sl]=null})}),!0):!1};fi.unstable_batchedUpdates=MN;fi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!iy(r))throw Error(ht(200));if(e==null||e._reactInternals===void 0)throw Error(ht(38));return oy(e,t,r,!1,n)};fi.version="18.2.0-next-9e3b772b8-20220608";function CP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CP)}catch(e){console.error(e)}}CP(),Sk.exports=fi;var pd=Sk.exports;const jO=fk(pd);var kP,x4=pd;kP=x4.createRoot,x4.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _p(){return _p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_p.apply(this,arguments)}var kc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(kc||(kc={}));const g4="popstate";function bO(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return O2("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:ov(a)}return NO(t,r,null,e)}function Zr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function PP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function wO(){return Math.random().toString(36).substr(2,8)}function v4(e,t){return{usr:e.state,key:e.key,idx:t}}function O2(e,t,r,n){return r===void 0&&(r=null),_p({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Cf(t):t,{state:r,key:t&&t.key||n||wO()})}function ov(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Cf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function NO(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=kc.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(_p({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=kc.Pop;let w=u(),v=w==null?null:w-d;d=w,c&&c({action:l,location:x.location,delta:v})}function p(w,v){l=kc.Push;let b=O2(x.location,w,v);d=u()+1;let N=v4(b,d),C=x.createHref(b);try{o.pushState(N,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(C)}i&&c&&c({action:l,location:x.location,delta:1})}function f(w,v){l=kc.Replace;let b=O2(x.location,w,v);d=u();let N=v4(b,d),C=x.createHref(b);o.replaceState(N,"",C),i&&c&&c({action:l,location:x.location,delta:0})}function y(w){let v=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof w=="string"?w:ov(w);return b=b.replace(/ $/,"%20"),Zr(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let x={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(g4,h),c=w,()=>{a.removeEventListener(g4,h),c=null}},createHref(w){return t(a,w)},createURL:y,encodeLocation(w){let v=y(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:f,go(w){return o.go(w)}};return x}var y4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(y4||(y4={}));function SO(e,t,r){return r===void 0&&(r="/"),_O(e,t,r)}function _O(e,t,r,n){let a=typeof t=="string"?Cf(t):t,i=WN(a.pathname||"/",r);if(i==null)return null;let o=AP(e);CO(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=MO(i);l=FO(o[c],d)}return l}function AP(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Zr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=$c([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Zr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),AP(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:RO(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of EP(i.path))a(i,o,c)}),t}function EP(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=EP(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function CO(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:IO(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const kO=/^:[\w-]+$/,PO=3,AO=2,EO=1,LO=10,TO=-2,j4=e=>e==="*";function RO(e,t){let r=e.split("/"),n=r.length;return r.some(j4)&&(n+=TO),t&&(n+=AO),r.filter(a=>!j4(a)).reduce((a,i)=>a+(kO.test(i)?PO:i===""?EO:LO),n)}function IO(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function FO(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=DO({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:$c([i,h.pathname]),pathnameBase:UO($c([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=$c([i,h.pathnameBase]))}return o}function DO(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=OO(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:p,isOptional:f}=u;if(p==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const y=l[h];return f&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function OO(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),PP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function MO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return PP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function WN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function $O(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Cf(e):e;return{pathname:r?r.startsWith("/")?r:BO(r,t):t,search:qO(n),hash:VO(a)}}function BO(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Rj(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zO(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function GN(e,t){let r=zO(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function KN(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Cf(e):(a=_p({},e),Zr(!a.pathname||!a.pathname.includes("?"),Rj("?","pathname","search",a)),Zr(!a.pathname||!a.pathname.includes("#"),Rj("#","pathname","hash",a)),Zr(!a.search||!a.search.includes("#"),Rj("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;a.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=$O(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const $c=e=>e.join("/").replace(/\/\/+/g,"/"),UO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,VO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function HO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const LP=["post","put","patch","delete"];new Set(LP);const WO=["get",...LP];new Set(WO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cp(){return Cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cp.apply(this,arguments)}const YN=g.createContext(null),GO=g.createContext(null),xd=g.createContext(null),ly=g.createContext(null),Yo=g.createContext({outlet:null,matches:[],isDataRoute:!1}),TP=g.createContext(null);function KO(e,t){let{relative:r}=t===void 0?{}:t;kf()||Zr(!1);let{basename:n,navigator:a}=g.useContext(xd),{hash:i,pathname:o,search:l}=IP(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:$c([n,o])),a.createHref({pathname:c,search:l,hash:i})}function kf(){return g.useContext(ly)!=null}function Mi(){return kf()||Zr(!1),g.useContext(ly).location}function RP(e){g.useContext(xd).static||g.useLayoutEffect(e)}function Sa(){let{isDataRoute:e}=g.useContext(Yo);return e?dM():YO()}function YO(){kf()||Zr(!1);let e=g.useContext(YN),{basename:t,future:r,navigator:n}=g.useContext(xd),{matches:a}=g.useContext(Yo),{pathname:i}=Mi(),o=JSON.stringify(GN(a,r.v7_relativeSplatPath)),l=g.useRef(!1);return RP(()=>{l.current=!0}),g.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=KN(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:$c([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,o,i,e])}const JO=g.createContext(null);function ZO(e){let t=g.useContext(Yo).outlet;return t&&g.createElement(JO.Provider,{value:e},t)}function XO(){let{matches:e}=g.useContext(Yo),t=e[e.length-1];return t?t.params:{}}function IP(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=g.useContext(xd),{matches:a}=g.useContext(Yo),{pathname:i}=Mi(),o=JSON.stringify(GN(a,n.v7_relativeSplatPath));return g.useMemo(()=>KN(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function QO(e,t){return eM(e,t)}function eM(e,t,r,n){kf()||Zr(!1);let{navigator:a}=g.useContext(xd),{matches:i}=g.useContext(Yo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Mi(),u;if(t){var h;let w=typeof t=="string"?Cf(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||Zr(!1),u=w}else u=d;let p=u.pathname||"/",f=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=SO(e,{pathname:f}),x=aM(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:$c([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:$c([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&x?g.createElement(ly.Provider,{value:{location:Cp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:kc.Pop}},x):x}function tM(){let e=cM(),t=HO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:a},r):null,null)}const sM=g.createElement(tM,null);class rM extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(Yo.Provider,{value:this.props.routeContext},g.createElement(TP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nM(e){let{routeContext:t,match:r,children:n}=e,a=g.useContext(YN);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Yo.Provider,{value:t},n)}function aM(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Zr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:p,errors:f}=r,y=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||y){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,p)=>{let f,y=!1,x=null,w=null;r&&(f=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||sM,c&&(d<0&&p===0?(uM("route-fallback"),y=!0,w=null):d===p&&(y=!0,w=h.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,p+1)),b=()=>{let N;return f?N=x:y?N=w:h.route.Component?N=g.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=u,g.createElement(nM,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:N})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?g.createElement(rM,{location:r.location,revalidation:r.revalidation,component:x,error:f,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var FP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(FP||{}),DP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DP||{});function iM(e){let t=g.useContext(YN);return t||Zr(!1),t}function oM(e){let t=g.useContext(GO);return t||Zr(!1),t}function lM(e){let t=g.useContext(Yo);return t||Zr(!1),t}function OP(e){let t=lM(),r=t.matches[t.matches.length-1];return r.route.id||Zr(!1),r.route.id}function cM(){var e;let t=g.useContext(TP),r=oM(),n=OP();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function dM(){let{router:e}=iM(FP.UseNavigateStable),t=OP(DP.UseNavigateStable),r=g.useRef(!1);return RP(()=>{r.current=!0}),g.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Cp({fromRouteId:t},i)))},[e,t])}const b4={};function uM(e,t,r){b4[e]||(b4[e]=!0)}function hM(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function w4(e){let{to:t,replace:r,state:n,relative:a}=e;kf()||Zr(!1);let{future:i,static:o}=g.useContext(xd),{matches:l}=g.useContext(Yo),{pathname:c}=Mi(),d=Sa(),u=KN(t,GN(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(u);return g.useEffect(()=>d(JSON.parse(h),{replace:r,state:n,relative:a}),[d,h,a,r,n]),null}function MP(e){return ZO(e.context)}function Es(e){Zr(!1)}function fM(e){let{basename:t="/",children:r=null,location:n,navigationType:a=kc.Pop,navigator:i,static:o=!1,future:l}=e;kf()&&Zr(!1);let c=t.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:o,future:Cp({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Cf(n));let{pathname:u="/",search:h="",hash:p="",state:f=null,key:y="default"}=n,x=g.useMemo(()=>{let w=WN(u,c);return w==null?null:{location:{pathname:w,search:h,hash:p,state:f,key:y},navigationType:a}},[c,u,h,p,f,y,a]);return x==null?null:g.createElement(xd.Provider,{value:d},g.createElement(ly.Provider,{children:r,value:x}))}function mM(e){let{children:t,location:r}=e;return QO(M2(t),r)}new Promise(()=>{});function M2(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(n,a)=>{if(!g.isValidElement(n))return;let i=[...t,a];if(n.type===g.Fragment){r.push.apply(r,M2(n.props.children,i));return}n.type!==Es&&Zr(!1),!n.props.index||!n.props.children||Zr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=M2(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $2(){return $2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$2.apply(this,arguments)}function pM(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function xM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gM(e,t){return e.button===0&&(!t||t==="_self")&&!xM(e)}const vM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yM="6";try{window.__reactRouterVersion=yM}catch{}const jM="startTransition",N4=tN[jM];function bM(e){let{basename:t,children:r,future:n,window:a}=e,i=g.useRef();i.current==null&&(i.current=bO({window:a,v5Compat:!0}));let o=i.current,[l,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=g.useCallback(h=>{d&&N4?N4(()=>c(h)):c(h)},[c,d]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>hM(n),[n]),g.createElement(fM,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const wM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bc=g.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,p=pM(t,vM),{basename:f}=g.useContext(xd),y,x=!1;if(typeof d=="string"&&NM.test(d)&&(y=d,wM))try{let N=new URL(window.location.href),C=d.startsWith("//")?new URL(N.protocol+d):new URL(d),P=WN(C.pathname,f);C.origin===N.origin&&P!=null?d=P+C.search+C.hash:x=!0}catch{}let w=KO(d,{relative:a}),v=SM(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:h});function b(N){n&&n(N),N.defaultPrevented||v(N)}return g.createElement("a",$2({},p,{href:y||w,onClick:x||i?n:b,ref:r,target:c}))});var S4;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(S4||(S4={}));var _4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_4||(_4={}));function SM(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Sa(),d=Mi(),u=IP(e,{relative:o});return g.useCallback(h=>{if(gM(h,r)){h.preventDefault();let p=n!==void 0?n:ov(d)===ov(u);c(e,{replace:p,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,r,e,i,o,l])}var $P={exports:{}},BP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff=g;function _M(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var CM=typeof Object.is=="function"?Object.is:_M,kM=ff.useState,PM=ff.useEffect,AM=ff.useLayoutEffect,EM=ff.useDebugValue;function LM(e,t){var r=t(),n=kM({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return AM(function(){a.value=r,a.getSnapshot=t,Ij(a)&&i({inst:a})},[e,r,t]),PM(function(){return Ij(a)&&i({inst:a}),e(function(){Ij(a)&&i({inst:a})})},[e]),EM(r),r}function Ij(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!CM(e,r)}catch{return!0}}function TM(e,t){return t()}var RM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?TM:LM;BP.useSyncExternalStore=ff.useSyncExternalStore!==void 0?ff.useSyncExternalStore:RM;$P.exports=BP;var IM=$P.exports,zP={exports:{}},UP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy=g,FM=IM;function DM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var OM=typeof Object.is=="function"?Object.is:DM,MM=FM.useSyncExternalStore,$M=cy.useRef,BM=cy.useEffect,zM=cy.useMemo,UM=cy.useDebugValue;UP.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=$M(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=zM(function(){function c(f){if(!d){if(d=!0,u=f,f=n(f),a!==void 0&&o.hasValue){var y=o.value;if(a(y,f))return h=y}return h=f}if(y=h,OM(u,f))return y;var x=n(f);return a!==void 0&&a(y,x)?(u=f,y):(u=f,h=x)}var d=!1,u,h,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,a]);var l=MM(e,i[0],i[1]);return BM(function(){o.hasValue=!0,o.value=l},[l]),UM(l),l};zP.exports=UP;var qM=zP.exports;function VM(e){e()}let qP=VM;const HM=e=>qP=e,WM=()=>qP,C4=Symbol.for("react-redux-context"),k4=typeof globalThis<"u"?globalThis:{};function GM(){var e;if(!g.createContext)return{};const t=(e=k4[C4])!=null?e:k4[C4]=new Map;let r=t.get(g.createContext);return r||(r=g.createContext(null),t.set(g.createContext,r)),r}const Qc=GM();function JN(e=Qc){return function(){return g.useContext(e)}}const VP=JN(),KM=()=>{throw new Error("uSES not initialized!")};let HP=KM;const YM=e=>{HP=e},JM=(e,t)=>e===t;function ZM(e=Qc){const t=e===Qc?VP:JN(e);return function(n,a={}){const{equalityFn:i=JM,stabilityCheck:o=void 0,noopCheck:l=void 0}=typeof a=="function"?{equalityFn:a}:a,{store:c,subscription:d,getServerState:u,stabilityCheck:h,noopCheck:p}=t();g.useRef(!0);const f=g.useCallback({[n.name](x){return n(x)}}[n.name],[n,h,o]),y=HP(d.addNestedSub,c.getState,u||c.getState,f,i);return g.useDebugValue(y),y}}const ca=ZM();var WP={exports:{}},lr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var En=typeof Symbol=="function"&&Symbol.for,ZN=En?Symbol.for("react.element"):60103,XN=En?Symbol.for("react.portal"):60106,dy=En?Symbol.for("react.fragment"):60107,uy=En?Symbol.for("react.strict_mode"):60108,hy=En?Symbol.for("react.profiler"):60114,fy=En?Symbol.for("react.provider"):60109,my=En?Symbol.for("react.context"):60110,QN=En?Symbol.for("react.async_mode"):60111,py=En?Symbol.for("react.concurrent_mode"):60111,xy=En?Symbol.for("react.forward_ref"):60112,gy=En?Symbol.for("react.suspense"):60113,XM=En?Symbol.for("react.suspense_list"):60120,vy=En?Symbol.for("react.memo"):60115,yy=En?Symbol.for("react.lazy"):60116,QM=En?Symbol.for("react.block"):60121,e9=En?Symbol.for("react.fundamental"):60117,t9=En?Symbol.for("react.responder"):60118,s9=En?Symbol.for("react.scope"):60119;function pi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ZN:switch(e=e.type,e){case QN:case py:case dy:case hy:case uy:case gy:return e;default:switch(e=e&&e.$$typeof,e){case my:case xy:case yy:case vy:case fy:return e;default:return t}}case XN:return t}}}function GP(e){return pi(e)===py}lr.AsyncMode=QN;lr.ConcurrentMode=py;lr.ContextConsumer=my;lr.ContextProvider=fy;lr.Element=ZN;lr.ForwardRef=xy;lr.Fragment=dy;lr.Lazy=yy;lr.Memo=vy;lr.Portal=XN;lr.Profiler=hy;lr.StrictMode=uy;lr.Suspense=gy;lr.isAsyncMode=function(e){return GP(e)||pi(e)===QN};lr.isConcurrentMode=GP;lr.isContextConsumer=function(e){return pi(e)===my};lr.isContextProvider=function(e){return pi(e)===fy};lr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ZN};lr.isForwardRef=function(e){return pi(e)===xy};lr.isFragment=function(e){return pi(e)===dy};lr.isLazy=function(e){return pi(e)===yy};lr.isMemo=function(e){return pi(e)===vy};lr.isPortal=function(e){return pi(e)===XN};lr.isProfiler=function(e){return pi(e)===hy};lr.isStrictMode=function(e){return pi(e)===uy};lr.isSuspense=function(e){return pi(e)===gy};lr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dy||e===py||e===hy||e===uy||e===gy||e===XM||typeof e=="object"&&e!==null&&(e.$$typeof===yy||e.$$typeof===vy||e.$$typeof===fy||e.$$typeof===my||e.$$typeof===xy||e.$$typeof===e9||e.$$typeof===t9||e.$$typeof===s9||e.$$typeof===QM)};lr.typeOf=pi;WP.exports=lr;var r9=WP.exports,KP=r9,n9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},YP={};YP[KP.ForwardRef]=n9;YP[KP.Memo]=a9;var ur={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e5=Symbol.for("react.element"),t5=Symbol.for("react.portal"),jy=Symbol.for("react.fragment"),by=Symbol.for("react.strict_mode"),wy=Symbol.for("react.profiler"),Ny=Symbol.for("react.provider"),Sy=Symbol.for("react.context"),i9=Symbol.for("react.server_context"),_y=Symbol.for("react.forward_ref"),Cy=Symbol.for("react.suspense"),ky=Symbol.for("react.suspense_list"),Py=Symbol.for("react.memo"),Ay=Symbol.for("react.lazy"),o9=Symbol.for("react.offscreen"),JP;JP=Symbol.for("react.module.reference");function $i(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case e5:switch(e=e.type,e){case jy:case wy:case by:case Cy:case ky:return e;default:switch(e=e&&e.$$typeof,e){case i9:case Sy:case _y:case Ay:case Py:case Ny:return e;default:return t}}case t5:return t}}}ur.ContextConsumer=Sy;ur.ContextProvider=Ny;ur.Element=e5;ur.ForwardRef=_y;ur.Fragment=jy;ur.Lazy=Ay;ur.Memo=Py;ur.Portal=t5;ur.Profiler=wy;ur.StrictMode=by;ur.Suspense=Cy;ur.SuspenseList=ky;ur.isAsyncMode=function(){return!1};ur.isConcurrentMode=function(){return!1};ur.isContextConsumer=function(e){return $i(e)===Sy};ur.isContextProvider=function(e){return $i(e)===Ny};ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===e5};ur.isForwardRef=function(e){return $i(e)===_y};ur.isFragment=function(e){return $i(e)===jy};ur.isLazy=function(e){return $i(e)===Ay};ur.isMemo=function(e){return $i(e)===Py};ur.isPortal=function(e){return $i(e)===t5};ur.isProfiler=function(e){return $i(e)===wy};ur.isStrictMode=function(e){return $i(e)===by};ur.isSuspense=function(e){return $i(e)===Cy};ur.isSuspenseList=function(e){return $i(e)===ky};ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jy||e===wy||e===by||e===Cy||e===ky||e===o9||typeof e=="object"&&e!==null&&(e.$$typeof===Ay||e.$$typeof===Py||e.$$typeof===Ny||e.$$typeof===Sy||e.$$typeof===_y||e.$$typeof===JP||e.getModuleId!==void 0)};ur.typeOf=$i;function l9(){const e=WM();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,i=r={callback:n,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const P4={notify(){},get:()=>[]};function c9(e,t){let r,n=P4,a=0,i=!1;function o(x){u();const w=n.subscribe(x);let v=!1;return()=>{v||(v=!0,w(),h())}}function l(){n.notify()}function c(){y.onStateChange&&y.onStateChange()}function d(){return i}function u(){a++,r||(r=e.subscribe(c),n=l9())}function h(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=P4)}function p(){i||(i=!0,u())}function f(){i&&(i=!1,h())}const y={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:f,getListeners:()=>n};return y}const d9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u9=d9?g.useLayoutEffect:g.useEffect;function h9({store:e,context:t,children:r,serverState:n,stabilityCheck:a="once",noopCheck:i="once"}){const o=g.useMemo(()=>{const d=c9(e);return{store:e,subscription:d,getServerState:n?()=>n:void 0,stabilityCheck:a,noopCheck:i}},[e,n,a,i]),l=g.useMemo(()=>e.getState(),[e]);u9(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==e.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,l]);const c=t||Qc;return g.createElement(c.Provider,{value:o},r)}function ZP(e=Qc){const t=e===Qc?VP:JN(e);return function(){const{store:n}=t();return n}}const f9=ZP();function m9(e=Qc){const t=e===Qc?f9:ZP(e);return function(){return t().dispatch}}const zl=m9();YM(qM.useSyncExternalStoreWithSelector);HM(pd.unstable_batchedUpdates);function no(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ed(e){return!!e&&!!e[kr]}function kl(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===N9}(e)||Array.isArray(e)||!!e[F4]||!!(!((t=e.constructor)===null||t===void 0)&&t[F4])||s5(e)||r5(e))}function uu(e,t,r){r===void 0&&(r=!1),Pf(e)===0?(r?Object.keys:Th)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function Pf(e){var t=e[kr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:s5(e)?2:r5(e)?3:0}function Lh(e,t){return Pf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function p9(e,t){return Pf(e)===2?e.get(t):e[t]}function XP(e,t,r){var n=Pf(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function QP(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function s5(e){return b9&&e instanceof Map}function r5(e){return w9&&e instanceof Set}function Dd(e){return e.o||e.t}function n5(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=tA(e);delete t[kr];for(var r=Th(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function a5(e,t){return t===void 0&&(t=!1),i5(e)||ed(e)||!kl(e)||(Pf(e)>1&&(e.set=e.add=e.clear=e.delete=x9),Object.freeze(e),t&&uu(e,function(r,n){return a5(n,!0)},!0)),e}function x9(){no(2)}function i5(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Vo(e){var t=q2[e];return t||no(18,e),t}function g9(e,t){q2[e]||(q2[e]=t)}function B2(){return kp}function Fj(e,t){t&&(Vo("Patches"),e.u=[],e.s=[],e.v=t)}function lv(e){z2(e),e.p.forEach(v9),e.p=null}function z2(e){e===kp&&(kp=e.l)}function A4(e){return kp={p:[],l:kp,h:e,m:!0,_:0}}function v9(e){var t=e[kr];t.i===0||t.i===1?t.j():t.g=!0}function Dj(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||Vo("ES5").S(t,e,n),n?(r[kr].P&&(lv(t),no(4)),kl(e)&&(e=cv(t,e),t.l||dv(t,e)),t.u&&Vo("Patches").M(r[kr].t,e,t.u,t.s)):e=cv(t,r,[]),lv(t),t.u&&t.v(t.u,t.s),e!==eA?e:void 0}function cv(e,t,r){if(i5(t))return t;var n=t[kr];if(!n)return uu(t,function(l,c){return E4(e,n,t,l,c,r)},!0),t;if(n.A!==e)return t;if(!n.P)return dv(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=n5(n.k):n.o,i=a,o=!1;n.i===3&&(i=new Set(a),a.clear(),o=!0),uu(i,function(l,c){return E4(e,n,a,l,c,r,o)}),dv(e,a,!1),r&&e.u&&Vo("Patches").N(n,r,e.u,e.s)}return n.o}function E4(e,t,r,n,a,i,o){if(ed(a)){var l=cv(e,a,i&&t&&t.i!==3&&!Lh(t.R,n)?i.concat(n):void 0);if(XP(r,n,l),!ed(l))return;e.m=!1}else o&&r.add(a);if(kl(a)&&!i5(a)){if(!e.h.D&&e._<1)return;cv(e,a),t&&t.A.l||dv(e,a)}}function dv(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&a5(t,r)}function Oj(e,t){var r=e[kr];return(r?Dd(r):e)[t]}function L4(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function gc(e){e.P||(e.P=!0,e.l&&gc(e.l))}function Mj(e){e.o||(e.o=n5(e.t))}function U2(e,t,r){var n=s5(t)?Vo("MapSet").F(t,r):r5(t)?Vo("MapSet").T(t,r):e.O?function(a,i){var o=Array.isArray(a),l={i:o?1:0,A:i?i.A:B2(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},c=l,d=Pp;o&&(c=[l],d=Rm);var u=Proxy.revocable(c,d),h=u.revoke,p=u.proxy;return l.k=p,l.j=h,p}(t,r):Vo("ES5").J(t,r);return(r?r.A:B2()).p.push(n),n}function y9(e){return ed(e)||no(22,e),function t(r){if(!kl(r))return r;var n,a=r[kr],i=Pf(r);if(a){if(!a.P&&(a.i<4||!Vo("ES5").K(a)))return a.t;a.I=!0,n=T4(r,i),a.I=!1}else n=T4(r,i);return uu(n,function(o,l){a&&p9(a.t,o)===l||XP(n,o,t(l))}),i===3?new Set(n):n}(e)}function T4(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return n5(e)}function j9(){function e(i,o){var l=a[i];return l?l.enumerable=o:a[i]=l={configurable:!0,enumerable:o,get:function(){var c=this[kr];return Pp.get(c,i)},set:function(c){var d=this[kr];Pp.set(d,i,c)}},l}function t(i){for(var o=i.length-1;o>=0;o--){var l=i[o][kr];if(!l.P)switch(l.i){case 5:n(l)&&gc(l);break;case 4:r(l)&&gc(l)}}}function r(i){for(var o=i.t,l=i.k,c=Th(l),d=c.length-1;d>=0;d--){var u=c[d];if(u!==kr){var h=o[u];if(h===void 0&&!Lh(o,u))return!0;var p=l[u],f=p&&p[kr];if(f?f.t!==h:!QP(p,h))return!0}}var y=!!o[kr];return c.length!==Th(o).length+(y?0:1)}function n(i){var o=i.k;if(o.length!==i.t.length)return!0;var l=Object.getOwnPropertyDescriptor(o,o.length-1);if(l&&!l.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var a={};g9("ES5",{J:function(i,o){var l=Array.isArray(i),c=function(u,h){if(u){for(var p=Array(h.length),f=0;f<h.length;f++)Object.defineProperty(p,""+f,e(f,!0));return p}var y=tA(h);delete y[kr];for(var x=Th(y),w=0;w<x.length;w++){var v=x[w];y[v]=e(v,u||!!y[v].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(l,i),d={i:l?5:4,A:o?o.A:B2(),P:!1,I:!1,R:{},l:o,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,kr,{value:d,writable:!0}),c},S:function(i,o,l){l?ed(o)&&o[kr].A===i&&t(i.p):(i.u&&function c(d){if(d&&typeof d=="object"){var u=d[kr];if(u){var h=u.t,p=u.k,f=u.R,y=u.i;if(y===4)uu(p,function(N){N!==kr&&(h[N]!==void 0||Lh(h,N)?f[N]||c(p[N]):(f[N]=!0,gc(u)))}),uu(h,function(N){p[N]!==void 0||Lh(p,N)||(f[N]=!1,gc(u))});else if(y===5){if(n(u)&&(gc(u),f.length=!0),p.length<h.length)for(var x=p.length;x<h.length;x++)f[x]=!1;else for(var w=h.length;w<p.length;w++)f[w]=!0;for(var v=Math.min(p.length,h.length),b=0;b<v;b++)p.hasOwnProperty(b)||(f[b]=!0),f[b]===void 0&&c(p[b])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var R4,kp,o5=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",b9=typeof Map<"u",w9=typeof Set<"u",I4=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",eA=o5?Symbol.for("immer-nothing"):((R4={})["immer-nothing"]=!0,R4),F4=o5?Symbol.for("immer-draftable"):"__$immer_draftable",kr=o5?Symbol.for("immer-state"):"__$immer_state",N9=""+Object.prototype.constructor,Th=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,tA=Object.getOwnPropertyDescriptors||function(e){var t={};return Th(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},q2={},Pp={get:function(e,t){if(t===kr)return e;var r=Dd(e);if(!Lh(r,t))return function(a,i,o){var l,c=L4(i,o);return c?"value"in c?c.value:(l=c.get)===null||l===void 0?void 0:l.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!kl(n)?n:n===Oj(e.t,t)?(Mj(e),e.o[t]=U2(e.A.h,n,e)):n},has:function(e,t){return t in Dd(e)},ownKeys:function(e){return Reflect.ownKeys(Dd(e))},set:function(e,t,r){var n=L4(Dd(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=Oj(Dd(e),t),i=a==null?void 0:a[kr];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(QP(r,a)&&(r!==void 0||Lh(e.t,t)))return!0;Mj(e),gc(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Oj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Mj(e),gc(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Dd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){no(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){no(12)}},Rm={};uu(Pp,function(e,t){Rm[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Rm.deleteProperty=function(e,t){return Rm.set.call(this,e,t,void 0)},Rm.set=function(e,t,r){return Pp.set.call(this,e[0],t,r,e[0])};var S9=function(){function e(r){var n=this;this.O=I4,this.D=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var l=i;i=a;var c=n;return function(x){var w=this;x===void 0&&(x=l);for(var v=arguments.length,b=Array(v>1?v-1:0),N=1;N<v;N++)b[N-1]=arguments[N];return c.produce(x,function(C){var P;return(P=i).call.apply(P,[w,C].concat(b))})}}var d;if(typeof i!="function"&&no(6),o!==void 0&&typeof o!="function"&&no(7),kl(a)){var u=A4(n),h=U2(n,a,void 0),p=!0;try{d=i(h),p=!1}finally{p?lv(u):z2(u)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(x){return Fj(u,o),Dj(x,u)},function(x){throw lv(u),x}):(Fj(u,o),Dj(d,u))}if(!a||typeof a!="object"){if((d=i(a))===void 0&&(d=a),d===eA&&(d=void 0),n.D&&a5(d,!0),o){var f=[],y=[];Vo("Patches").M(a,d,f,y),o(f,y)}return d}no(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(d){for(var u=arguments.length,h=Array(u>1?u-1:0),p=1;p<u;p++)h[p-1]=arguments[p];return n.produceWithPatches(d,function(f){return a.apply(void 0,[f].concat(h))})};var o,l,c=n.produce(a,i,function(d,u){o=d,l=u});return typeof Promise<"u"&&c instanceof Promise?c.then(function(d){return[d,o,l]}):[c,o,l]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){kl(r)||no(8),ed(r)&&(r=y9(r));var n=A4(this),a=U2(this,r,void 0);return a[kr].C=!0,z2(n),a},t.finishDraft=function(r,n){var a=r&&r[kr],i=a.A;return Fj(i,n),Dj(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!I4&&no(20),this.O=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=Vo("Patches").$;return ed(r)?o(r,n):this.produce(r,function(l){return o(l,n)})},e}(),ui=new S9,sA=ui.produce;ui.produceWithPatches.bind(ui);ui.setAutoFreeze.bind(ui);ui.setUseProxies.bind(ui);ui.applyPatches.bind(ui);ui.createDraft.bind(ui);ui.finishDraft.bind(ui);function Gs(e){"@babel/helpers - typeof";return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gs(e)}function _9(e,t){if(Gs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C9(e){var t=_9(e,"string");return Gs(t)=="symbol"?t:t+""}function k9(e,t,r){return(t=C9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D4(Object(r),!0).forEach(function(n){k9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var M4=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),$j=function(){return Math.random().toString(36).substring(7).split("").join(".")},uv={INIT:"@@redux/INIT"+$j(),REPLACE:"@@redux/REPLACE"+$j(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+$j()}};function P9(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function l5(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(sa(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(sa(1));return r(l5)(e,t)}if(typeof e!="function")throw new Error(sa(2));var a=e,i=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function u(){if(c)throw new Error(sa(3));return i}function h(x){if(typeof x!="function")throw new Error(sa(4));if(c)throw new Error(sa(5));var w=!0;return d(),l.push(x),function(){if(w){if(c)throw new Error(sa(6));w=!1,d();var b=l.indexOf(x);l.splice(b,1),o=null}}}function p(x){if(!P9(x))throw new Error(sa(7));if(typeof x.type>"u")throw new Error(sa(8));if(c)throw new Error(sa(9));try{c=!0,i=a(i,x)}finally{c=!1}for(var w=o=l,v=0;v<w.length;v++){var b=w[v];b()}return x}function f(x){if(typeof x!="function")throw new Error(sa(10));a=x,p({type:uv.REPLACE})}function y(){var x,w=h;return x={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(sa(11));function N(){b.next&&b.next(u())}N();var C=w(N);return{unsubscribe:C}}},x[M4]=function(){return this},x}return p({type:uv.INIT}),n={dispatch:p,subscribe:h,getState:u,replaceReducer:f},n[M4]=y,n}function A9(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:uv.INIT});if(typeof n>"u")throw new Error(sa(12));if(typeof r(void 0,{type:uv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(sa(13))})}function E9(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),o;try{A9(r)}catch(l){o=l}return function(c,d){if(c===void 0&&(c={}),o)throw o;for(var u=!1,h={},p=0;p<i.length;p++){var f=i[p],y=r[f],x=c[f],w=y(x,d);if(typeof w>"u")throw d&&d.type,new Error(sa(14));h[f]=w,u=u||w!==x}return u=u||i.length!==Object.keys(c).length,u?h:c}}function hv(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function L9(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(sa(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=hv.apply(void 0,l)(a.dispatch),O4(O4({},a),{},{dispatch:i})}}}function rA(e){var t=function(n){var a=n.dispatch,i=n.getState;return function(o){return function(l){return typeof l=="function"?l(a,i,e):o(l)}}};return t}var V2=rA();V2.withExtraArgument=rA;var nA=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T9=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},mf=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},R9=Object.defineProperty,I9=Object.defineProperties,F9=Object.getOwnPropertyDescriptors,$4=Object.getOwnPropertySymbols,D9=Object.prototype.hasOwnProperty,O9=Object.prototype.propertyIsEnumerable,B4=function(e,t,r){return t in e?R9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},zc=function(e,t){for(var r in t||(t={}))D9.call(t,r)&&B4(e,r,t[r]);if($4)for(var n=0,a=$4(t);n<a.length;n++){var r=a[n];O9.call(t,r)&&B4(e,r,t[r])}return e},Bj=function(e,t){return I9(e,F9(t))},M9=function(e,t,r){return new Promise(function(n,a){var i=function(c){try{l(r.next(c))}catch(d){a(d)}},o=function(c){try{l(r.throw(c))}catch(d){a(d)}},l=function(c){return c.done?n(c.value):Promise.resolve(c.value).then(i,o)};l((r=r.apply(e,t)).next())})},$9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hv:hv.apply(null,arguments)};function B9(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function Uc(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return zc(zc({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var z9=function(e){nA(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,mf([void 0],r[0].concat(this)))):new(t.bind.apply(t,mf([void 0],r.concat(this))))},t}(Array),U9=function(e){nA(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,mf([void 0],r[0].concat(this)))):new(t.bind.apply(t,mf([void 0],r.concat(this))))},t}(Array);function H2(e){return kl(e)?sA(e,function(){}):e}function q9(e){return typeof e=="boolean"}function V9(){return function(t){return H9(t)}}function H9(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new z9;return r&&(q9(r)?n.push(V2):n.push(V2.withExtraArgument(r.extraArgument))),n}function W9(e){var t=V9(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?t():i,l=r.devTools,c=l===void 0?!0:l,d=r.preloadedState,u=d===void 0?void 0:d,h=r.enhancers,p=h===void 0?void 0:h,f;if(typeof a=="function")f=a;else if(B9(a))f=E9(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(t));var x=L9.apply(void 0,y),w=hv;c&&(w=$9(zc({trace:!1},typeof c=="object"&&c)));var v=new U9(x),b=v;Array.isArray(p)?b=mf([x],p):typeof p=="function"&&(b=p(v));var N=w.apply(void 0,b);return l5(f,u,N)}function aA(e){var t={},r=[],n,a={addCase:function(i,o){var l=typeof i=="string"?i:i.type;if(!l)throw new Error("`builder.addCase` cannot be called with an empty action type");if(l in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[l]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return e(a),[t,r,n]}function G9(e){return typeof e=="function"}function K9(e,t,r,n){r===void 0&&(r=[]);var a=typeof t=="function"?aA(t):[t,r,n],i=a[0],o=a[1],l=a[2],c;if(G9(e))c=function(){return H2(e())};else{var d=H2(e);c=function(){return d}}function u(h,p){h===void 0&&(h=c());var f=mf([i[p.type]],o.filter(function(y){var x=y.matcher;return x(p)}).map(function(y){var x=y.reducer;return x}));return f.filter(function(y){return!!y}).length===0&&(f=[l]),f.reduce(function(y,x){if(x)if(ed(y)){var w=y,v=x(w,p);return v===void 0?y:v}else{if(kl(y))return sA(y,function(b){return x(b,p)});var v=x(y,p);if(v===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return y},h)}return u.getInitialState=c,u}function Y9(e,t){return e+"/"+t}function Qr(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:H2(e.initialState),n=e.reducers||{},a=Object.keys(n),i={},o={},l={};a.forEach(function(u){var h=n[u],p=Y9(t,u),f,y;"reducer"in h?(f=h.reducer,y=h.prepare):f=h,i[u]=f,o[p]=f,l[u]=y?Uc(p,y):Uc(p)});function c(){var u=typeof e.extraReducers=="function"?aA(e.extraReducers):[e.extraReducers],h=u[0],p=h===void 0?{}:h,f=u[1],y=f===void 0?[]:f,x=u[2],w=x===void 0?void 0:x,v=zc(zc({},p),o);return K9(r,function(b){for(var N in v)b.addCase(N,v[N]);for(var C=0,P=y;C<P.length;C++){var D=P[C];b.addMatcher(D.matcher,D.reducer)}w&&b.addDefaultCase(w)})}var d;return{name:t,reducer:function(u,h){return d||(d=c()),d(u,h)},actions:l,caseReducers:i,getInitialState:function(){return d||(d=c()),d.getInitialState()}}}var J9="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Z9=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=J9[Math.random()*64|0];return t},X9=["name","message","stack","code"],zj=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),z4=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Q9=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=X9;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}},Pt=function(){function e(t,r,n){var a=Uc(t+"/fulfilled",function(d,u,h,p){return{payload:d,meta:Bj(zc({},p||{}),{arg:h,requestId:u,requestStatus:"fulfilled"})}}),i=Uc(t+"/pending",function(d,u,h){return{payload:void 0,meta:Bj(zc({},h||{}),{arg:u,requestId:d,requestStatus:"pending"})}}),o=Uc(t+"/rejected",function(d,u,h,p,f){return{payload:p,error:(n&&n.serializeError||Q9)(d||"Rejected"),meta:Bj(zc({},f||{}),{arg:h,requestId:u,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"})}}),l=typeof AbortController<"u"?AbortController:function(){function d(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return d.prototype.abort=function(){},d}();function c(d){return function(u,h,p){var f=n!=null&&n.idGenerator?n.idGenerator(d):Z9(),y=new l,x;function w(b){x=b,y.abort()}var v=function(){return M9(this,null,function(){var b,N,C,P,D,R,A;return T9(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),P=(b=n==null?void 0:n.condition)==null?void 0:b.call(n,d,{getState:h,extra:p}),t$(P)?[4,P]:[3,2];case 1:P=I.sent(),I.label=2;case 2:if(P===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return D=new Promise(function(O,F){return y.signal.addEventListener("abort",function(){return F({name:"AbortError",message:x||"Aborted"})})}),u(i(f,d,(N=n==null?void 0:n.getPendingMeta)==null?void 0:N.call(n,{requestId:f,arg:d},{getState:h,extra:p}))),[4,Promise.race([D,Promise.resolve(r(d,{dispatch:u,getState:h,extra:p,requestId:f,signal:y.signal,abort:w,rejectWithValue:function(O,F){return new zj(O,F)},fulfillWithValue:function(O,F){return new z4(O,F)}})).then(function(O){if(O instanceof zj)throw O;return O instanceof z4?a(O.payload,f,d,O.meta):a(O,f,d)})])];case 3:return C=I.sent(),[3,5];case 4:return R=I.sent(),C=R instanceof zj?o(null,f,d,R.payload,R.meta):o(R,f,d),[3,5];case 5:return A=n&&!n.dispatchConditionRejection&&o.match(C)&&C.meta.condition,A||u(C),[2,C]}})})}();return Object.assign(v,{abort:w,requestId:f,arg:d,unwrap:function(){return v.then(e$)}})}}return Object.assign(c,{pending:i,rejected:o,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e}();function e$(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function t$(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var c5="listenerMiddleware";Uc(c5+"/add");Uc(c5+"/removeAll");Uc(c5+"/remove");var U4;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);j9();var d5="persist:",iA="persist/FLUSH",u5="persist/REHYDRATE",oA="persist/PAUSE",lA="persist/PERSIST",cA="persist/PURGE",dA="persist/REGISTER",s$=-1;function zg(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zg=function(r){return typeof r}:zg=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zg(e)}function q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function r$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q4(r,!0).forEach(function(n){n$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q4(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a$(e,t,r,n){n.debug;var a=r$({},r);return e&&zg(e)==="object"&&Object.keys(e).forEach(function(i){i!=="_persist"&&t[i]===r[i]&&(a[i]=e[i])}),a}function i$(e){var t=e.blacklist||null,r=e.whitelist||null,n=e.transforms||[],a=e.throttle||0,i="".concat(e.keyPrefix!==void 0?e.keyPrefix:d5).concat(e.key),o=e.storage,l;e.serialize===!1?l=function(P){return P}:typeof e.serialize=="function"?l=e.serialize:l=o$;var c=e.writeFailHandler||null,d={},u={},h=[],p=null,f=null,y=function(P){Object.keys(P).forEach(function(D){v(D)&&d[D]!==P[D]&&h.indexOf(D)===-1&&h.push(D)}),Object.keys(d).forEach(function(D){P[D]===void 0&&v(D)&&h.indexOf(D)===-1&&d[D]!==void 0&&h.push(D)}),p===null&&(p=setInterval(x,a)),d=P};function x(){if(h.length===0){p&&clearInterval(p),p=null;return}var C=h.shift(),P=n.reduce(function(D,R){return R.in(D,C,d)},d[C]);if(P!==void 0)try{u[C]=l(P)}catch(D){console.error("redux-persist/createPersistoid: error serializing state",D)}else delete u[C];h.length===0&&w()}function w(){Object.keys(u).forEach(function(C){d[C]===void 0&&delete u[C]}),f=o.setItem(i,l(u)).catch(b)}function v(C){return!(r&&r.indexOf(C)===-1&&C!=="_persist"||t&&t.indexOf(C)!==-1)}function b(C){c&&c(C)}var N=function(){for(;h.length!==0;)x();return f||Promise.resolve()};return{update:y,flush:N}}function o$(e){return JSON.stringify(e)}function l$(e){var t=e.transforms||[],r="".concat(e.keyPrefix!==void 0?e.keyPrefix:d5).concat(e.key),n=e.storage;e.debug;var a;return e.deserialize===!1?a=function(o){return o}:typeof e.deserialize=="function"?a=e.deserialize:a=c$,n.getItem(r).then(function(i){if(i)try{var o={},l=a(i);return Object.keys(l).forEach(function(c){o[c]=t.reduceRight(function(d,u){return u.out(d,c,l)},a(l[c]))}),o}catch(c){throw c}else return})}function c$(e){return JSON.parse(e)}function d$(e){var t=e.storage,r="".concat(e.keyPrefix!==void 0?e.keyPrefix:d5).concat(e.key);return t.removeItem(r,u$)}function u$(e){}function V4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V4(r,!0).forEach(function(n){h$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V4(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f$(e,t){if(e==null)return{};var r=m$(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function m$(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var p$=5e3;function uA(e,t){var r=e.version!==void 0?e.version:s$;e.debug;var n=e.stateReconciler===void 0?a$:e.stateReconciler,a=e.getStoredState||l$,i=e.timeout!==void 0?e.timeout:p$,o=null,l=!1,c=!0,d=function(h){return h._persist.rehydrated&&o&&!c&&o.update(h),h};return function(u,h){var p=u||{},f=p._persist,y=f$(p,["_persist"]),x=y;if(h.type===lA){var w=!1,v=function(A,I){w||(h.rehydrate(e.key,A,I),w=!0)};if(i&&setTimeout(function(){!w&&v(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},i),c=!1,o||(o=i$(e)),f)return ll({},t(x,h),{_persist:f});if(typeof h.rehydrate!="function"||typeof h.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return h.register(e.key),a(e).then(function(R){var A=e.migrate||function(I,O){return Promise.resolve(I)};A(R,r).then(function(I){v(I)},function(I){v(void 0,I)})},function(R){v(void 0,R)}),ll({},t(x,h),{_persist:{version:r,rehydrated:!1}})}else{if(h.type===cA)return l=!0,h.result(d$(e)),ll({},t(x,h),{_persist:f});if(h.type===iA)return h.result(o&&o.flush()),ll({},t(x,h),{_persist:f});if(h.type===oA)c=!0;else if(h.type===u5){if(l)return ll({},x,{_persist:ll({},f,{rehydrated:!0})});if(h.key===e.key){var b=t(x,h),N=h.payload,C=n!==!1&&N!==void 0?n(N,u,b,e):b,P=ll({},C,{_persist:ll({},f,{rehydrated:!0})});return d(P)}}}if(!f)return t(u,h);var D=t(x,h);return D===x?u:d(ll({},D,{_persist:f}))}}function H4(e){return v$(e)||g$(e)||x$()}function x$(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g$(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function v$(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function W4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W4(r,!0).forEach(function(n){y$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W4(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hA={registry:[],bootstrapped:!1},j$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hA,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case dA:return W2({},t,{registry:[].concat(H4(t.registry),[r.key])});case u5:var n=t.registry.indexOf(r.key),a=H4(t.registry);return a.splice(n,1),W2({},t,{registry:a,bootstrapped:a.length===0});default:return t}};function b$(e,t,r){var n=l5(j$,hA,void 0),a=function(c){n.dispatch({type:dA,key:c})},i=function(c,d,u){var h={type:u5,payload:d,err:u,key:c};e.dispatch(h),n.dispatch(h)},o=W2({},n,{purge:function(){var c=[];return e.dispatch({type:cA,result:function(u){c.push(u)}}),Promise.all(c)},flush:function(){var c=[];return e.dispatch({type:iA,result:function(u){c.push(u)}}),Promise.all(c)},pause:function(){e.dispatch({type:oA})},persist:function(){e.dispatch({type:lA,register:a,rehydrate:i})}});return o.persist(),o}var h5={},f5={};f5.__esModule=!0;f5.default=S$;function Ug(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ug=function(r){return typeof r}:Ug=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ug(e)}function Uj(){}var w$={getItem:Uj,setItem:Uj,removeItem:Uj};function N$(e){if((typeof self>"u"?"undefined":Ug(self))!=="object"||!(e in self))return!1;try{var t=self[e],r="redux-persist ".concat(e," test");t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch{return!1}return!0}function S$(e){var t="".concat(e,"Storage");return N$(t)?self[t]:w$}h5.__esModule=!0;h5.default=k$;var _$=C$(f5);function C$(e){return e&&e.__esModule?e:{default:e}}function k$(e){var t=(0,_$.default)(e);return{getItem:function(n){return new Promise(function(a,i){a(t.getItem(n))})},setItem:function(n,a){return new Promise(function(i,o){i(t.setItem(n,a))})},removeItem:function(n){return new Promise(function(a,i){a(t.removeItem(n))})}}}var m5=void 0,P$=A$(h5);function A$(e){return e&&e.__esModule?e:{default:e}}var E$=(0,P$.default)("local");m5=E$;function fA(e,t){return function(){return e.apply(t,arguments)}}const{toString:L$}=Object.prototype,{getPrototypeOf:p5}=Object,{iterator:Ey,toStringTag:mA}=Symbol,Ly=(e=>t=>{const r=L$.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),xo=e=>(e=e.toLowerCase(),t=>Ly(t)===e),Ty=e=>t=>typeof t===e,{isArray:Af}=Array,Ap=Ty("undefined");function Gp(e){return e!==null&&!Ap(e)&&e.constructor!==null&&!Ap(e.constructor)&&Ua(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const pA=xo("ArrayBuffer");function T$(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&pA(e.buffer),t}const R$=Ty("string"),Ua=Ty("function"),xA=Ty("number"),Kp=e=>e!==null&&typeof e=="object",I$=e=>e===!0||e===!1,qg=e=>{if(Ly(e)!=="object")return!1;const t=p5(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(mA in e)&&!(Ey in e)},F$=e=>{if(!Kp(e)||Gp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},D$=xo("Date"),O$=xo("File"),M$=xo("Blob"),$$=xo("FileList"),B$=e=>Kp(e)&&Ua(e.pipe),z$=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ua(e.append)&&((t=Ly(e))==="formdata"||t==="object"&&Ua(e.toString)&&e.toString()==="[object FormData]"))},U$=xo("URLSearchParams"),[q$,V$,H$,W$]=["ReadableStream","Request","Response","Headers"].map(xo),G$=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yp(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Af(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Gp(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function gA(e,t){if(Gp(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const Ud=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vA=e=>!Ap(e)&&e!==Ud;function G2(){const{caseless:e}=vA(this)&&this||{},t={},r=(n,a)=>{const i=e&&gA(t,a)||a;qg(t[i])&&qg(n)?t[i]=G2(t[i],n):qg(n)?t[i]=G2({},n):Af(n)?t[i]=n.slice():t[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Yp(arguments[n],r);return t}const K$=(e,t,r,{allOwnKeys:n}={})=>(Yp(t,(a,i)=>{r&&Ua(a)?e[i]=fA(a,r):e[i]=a},{allOwnKeys:n}),e),Y$=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),J$=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Z$=(e,t,r,n)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&p5(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},X$=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Q$=e=>{if(!e)return null;if(Af(e))return e;let t=e.length;if(!xA(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},eB=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&p5(Uint8Array)),tB=(e,t)=>{const n=(e&&e[Ey]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},sB=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},rB=xo("HTMLFormElement"),nB=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),G4=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),aB=xo("RegExp"),yA=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Yp(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},iB=e=>{yA(e,(t,r)=>{if(Ua(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Ua(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},oB=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Af(e)?n(e):n(String(e).split(t)),r},lB=()=>{},cB=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function dB(e){return!!(e&&Ua(e.append)&&e[mA]==="FormData"&&e[Ey])}const uB=e=>{const t=new Array(10),r=(n,a)=>{if(Kp(n)){if(t.indexOf(n)>=0)return;if(Gp(n))return n;if(!("toJSON"in n)){t[a]=n;const i=Af(n)?[]:{};return Yp(n,(o,l)=>{const c=r(o,a+1);!Ap(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return r(e,0)},hB=xo("AsyncFunction"),fB=e=>e&&(Kp(e)||Ua(e))&&Ua(e.then)&&Ua(e.catch),jA=((e,t)=>e?setImmediate:t?((r,n)=>(Ud.addEventListener("message",({source:a,data:i})=>{a===Ud&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),Ud.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ua(Ud.postMessage)),mB=typeof queueMicrotask<"u"?queueMicrotask.bind(Ud):typeof process<"u"&&process.nextTick||jA,pB=e=>e!=null&&Ua(e[Ey]),He={isArray:Af,isArrayBuffer:pA,isBuffer:Gp,isFormData:z$,isArrayBufferView:T$,isString:R$,isNumber:xA,isBoolean:I$,isObject:Kp,isPlainObject:qg,isEmptyObject:F$,isReadableStream:q$,isRequest:V$,isResponse:H$,isHeaders:W$,isUndefined:Ap,isDate:D$,isFile:O$,isBlob:M$,isRegExp:aB,isFunction:Ua,isStream:B$,isURLSearchParams:U$,isTypedArray:eB,isFileList:$$,forEach:Yp,merge:G2,extend:K$,trim:G$,stripBOM:Y$,inherits:J$,toFlatObject:Z$,kindOf:Ly,kindOfTest:xo,endsWith:X$,toArray:Q$,forEachEntry:tB,matchAll:sB,isHTMLForm:rB,hasOwnProperty:G4,hasOwnProp:G4,reduceDescriptors:yA,freezeMethods:iB,toObjectSet:oB,toCamelCase:nB,noop:lB,toFiniteNumber:cB,findKey:gA,global:Ud,isContextDefined:vA,isSpecCompliantForm:dB,toJSONObject:uB,isAsyncFn:hB,isThenable:fB,setImmediate:jA,asap:mB,isIterable:pB};function ms(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}He.inherits(ms,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:He.toJSONObject(this.config),code:this.code,status:this.status}}});const bA=ms.prototype,wA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wA[e]={value:e}});Object.defineProperties(ms,wA);Object.defineProperty(bA,"isAxiosError",{value:!0});ms.from=(e,t,r,n,a,i)=>{const o=Object.create(bA);return He.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),ms.call(o,e.message,t,r,n,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const xB=null;function K2(e){return He.isPlainObject(e)||He.isArray(e)}function NA(e){return He.endsWith(e,"[]")?e.slice(0,-2):e}function K4(e,t,r){return e?e.concat(t).map(function(a,i){return a=NA(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function gB(e){return He.isArray(e)&&!e.some(K2)}const vB=He.toFlatObject(He,{},null,function(t){return/^is[A-Z]/.test(t)});function Ry(e,t,r){if(!He.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=He.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,w){return!He.isUndefined(w[x])});const n=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&He.isSpecCompliantForm(t);if(!He.isFunction(a))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(He.isDate(y))return y.toISOString();if(He.isBoolean(y))return y.toString();if(!c&&He.isBlob(y))throw new ms("Blob is not supported. Use a Buffer instead.");return He.isArrayBuffer(y)||He.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,x,w){let v=y;if(y&&!w&&typeof y=="object"){if(He.endsWith(x,"{}"))x=n?x:x.slice(0,-2),y=JSON.stringify(y);else if(He.isArray(y)&&gB(y)||(He.isFileList(y)||He.endsWith(x,"[]"))&&(v=He.toArray(y)))return x=NA(x),v.forEach(function(N,C){!(He.isUndefined(N)||N===null)&&t.append(o===!0?K4([x],C,i):o===null?x:x+"[]",d(N))}),!1}return K2(y)?!0:(t.append(K4(w,x,i),d(y)),!1)}const h=[],p=Object.assign(vB,{defaultVisitor:u,convertValue:d,isVisitable:K2});function f(y,x){if(!He.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(y),He.forEach(y,function(v,b){(!(He.isUndefined(v)||v===null)&&a.call(t,v,He.isString(b)?b.trim():b,x,p))===!0&&f(v,x?x.concat(b):[b])}),h.pop()}}if(!He.isObject(e))throw new TypeError("data must be an object");return f(e),t}function Y4(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function x5(e,t){this._pairs=[],e&&Ry(e,this,t)}const SA=x5.prototype;SA.append=function(t,r){this._pairs.push([t,r])};SA.toString=function(t){const r=t?function(n){return t.call(this,n,Y4)}:Y4;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function yB(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _A(e,t,r){if(!t)return e;const n=r&&r.encode||yB;He.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=He.isURLSearchParams(t)?t.toString():new x5(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class J4{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){He.forEach(this.handlers,function(n){n!==null&&t(n)})}}const CA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jB=typeof URLSearchParams<"u"?URLSearchParams:x5,bB=typeof FormData<"u"?FormData:null,wB=typeof Blob<"u"?Blob:null,NB={isBrowser:!0,classes:{URLSearchParams:jB,FormData:bB,Blob:wB},protocols:["http","https","file","blob","url","data"]},g5=typeof window<"u"&&typeof document<"u",Y2=typeof navigator=="object"&&navigator||void 0,SB=g5&&(!Y2||["ReactNative","NativeScript","NS"].indexOf(Y2.product)<0),_B=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",CB=g5&&window.location.href||"http://localhost",kB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:g5,hasStandardBrowserEnv:SB,hasStandardBrowserWebWorkerEnv:_B,navigator:Y2,origin:CB},Symbol.toStringTag,{value:"Module"})),na={...kB,...NB};function PB(e,t){return Ry(e,new na.classes.URLSearchParams,{visitor:function(r,n,a,i){return na.isNode&&He.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function AB(e){return He.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function EB(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function kA(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&He.isArray(a)?a.length:o,c?(He.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!He.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&He.isArray(a[o])&&(a[o]=EB(a[o])),!l)}if(He.isFormData(e)&&He.isFunction(e.entries)){const r={};return He.forEachEntry(e,(n,a)=>{t(AB(n),a,r,0)}),r}return null}function LB(e,t,r){if(He.isString(e))try{return(t||JSON.parse)(e),He.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Jp={transitional:CA,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=He.isObject(t);if(i&&He.isHTMLForm(t)&&(t=new FormData(t)),He.isFormData(t))return a?JSON.stringify(kA(t)):t;if(He.isArrayBuffer(t)||He.isBuffer(t)||He.isStream(t)||He.isFile(t)||He.isBlob(t)||He.isReadableStream(t))return t;if(He.isArrayBufferView(t))return t.buffer;if(He.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return PB(t,this.formSerializer).toString();if((l=He.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ry(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),LB(t)):t}],transformResponse:[function(t){const r=this.transitional||Jp.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(He.isResponse(t)||He.isReadableStream(t))return t;if(t&&He.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?ms.from(l,ms.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:na.classes.FormData,Blob:na.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};He.forEach(["delete","get","head","post","put","patch"],e=>{Jp.headers[e]={}});const TB=He.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RB=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&TB[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Z4=Symbol("internals");function ym(e){return e&&String(e).trim().toLowerCase()}function Vg(e){return e===!1||e==null?e:He.isArray(e)?e.map(Vg):String(e)}function IB(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const FB=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function qj(e,t,r,n,a){if(He.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!He.isString(t)){if(He.isString(n))return t.indexOf(n)!==-1;if(He.isRegExp(n))return n.test(t)}}function DB(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function OB(e,t){const r=He.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let qa=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(l,c,d){const u=ym(c);if(!u)throw new Error("header name must be a non-empty string");const h=He.findKey(a,u);(!h||a[h]===void 0||d===!0||d===void 0&&a[h]!==!1)&&(a[h||c]=Vg(l))}const o=(l,c)=>He.forEach(l,(d,u)=>i(d,u,c));if(He.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(He.isString(t)&&(t=t.trim())&&!FB(t))o(RB(t),r);else if(He.isObject(t)&&He.isIterable(t)){let l={},c,d;for(const u of t){if(!He.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?He.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=ym(t),t){const n=He.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return IB(a);if(He.isFunction(r))return r.call(this,a,n);if(He.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=ym(t),t){const n=He.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||qj(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=ym(o),o){const l=He.findKey(n,o);l&&(!r||qj(n,n[l],l,r))&&(delete n[l],a=!0)}}return He.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||qj(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return He.forEach(this,(a,i)=>{const o=He.findKey(n,i);if(o){r[o]=Vg(a),delete r[i];return}const l=t?DB(i):String(i).trim();l!==i&&delete r[i],r[l]=Vg(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return He.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&He.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Z4]=this[Z4]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=ym(o);n[l]||(OB(a,o),n[l]=!0)}return He.isArray(t)?t.forEach(i):i(t),this}};qa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);He.reduceDescriptors(qa.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});He.freezeMethods(qa);function Vj(e,t){const r=this||Jp,n=t||r,a=qa.from(n.headers);let i=n.data;return He.forEach(e,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function PA(e){return!!(e&&e.__CANCEL__)}function Ef(e,t,r){ms.call(this,e??"canceled",ms.ERR_CANCELED,t,r),this.name="CanceledError"}He.inherits(Ef,ms,{__CANCEL__:!0});function AA(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new ms("Request failed with status code "+r.status,[ms.ERR_BAD_REQUEST,ms.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function MB(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function $B(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),r[a]=c,n[a]=d;let h=i,p=0;for(;h!==a;)p+=r[h++],h=h%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const f=u&&d-u;return f?Math.round(p*1e3/f):void 0}}function BB(e,t){let r=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-h)))},()=>a&&o(a)]}const fv=(e,t,r=3)=>{let n=0;const a=$B(50,250);return BB(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),u=o<=l;n=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},r)},X4=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Q4=e=>(...t)=>He.asap(()=>e(...t)),zB=na.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,na.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(na.origin),na.navigator&&/(msie|trident)/i.test(na.navigator.userAgent)):()=>!0,UB=na.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const o=[e+"="+encodeURIComponent(t)];He.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),He.isString(n)&&o.push("path="+n),He.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qB(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function VB(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function EA(e,t,r){let n=!qB(t);return e&&(n||r==!1)?VB(e,t):t}const e3=e=>e instanceof qa?{...e}:e;function hu(e,t){t=t||{};const r={};function n(d,u,h,p){return He.isPlainObject(d)&&He.isPlainObject(u)?He.merge.call({caseless:p},d,u):He.isPlainObject(u)?He.merge({},u):He.isArray(u)?u.slice():u}function a(d,u,h,p){if(He.isUndefined(u)){if(!He.isUndefined(d))return n(void 0,d,h,p)}else return n(d,u,h,p)}function i(d,u){if(!He.isUndefined(u))return n(void 0,u)}function o(d,u){if(He.isUndefined(u)){if(!He.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>a(e3(d),e3(u),h,!0)};return He.forEach(Object.keys({...e,...t}),function(u){const h=c[u]||a,p=h(e[u],t[u],u);He.isUndefined(p)&&h!==l||(r[u]=p)}),r}const LA=e=>{const t=hu({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=qa.from(o),t.url=_A(EA(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(He.isFormData(r)){if(na.hasStandardBrowserEnv||na.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(na.hasStandardBrowserEnv&&(n&&He.isFunction(n)&&(n=n(t)),n||n!==!1&&zB(t.url))){const d=a&&i&&UB.read(i);d&&o.set(a,d)}return t},HB=typeof XMLHttpRequest<"u",WB=HB&&function(e){return new Promise(function(r,n){const a=LA(e);let i=a.data;const o=qa.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,h,p,f,y;function x(){f&&f(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function v(){if(!w)return;const N=qa.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),P={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:N,config:e,request:w};AA(function(R){r(R),x()},function(R){n(R),x()},P),w=null}"onloadend"in w?w.onloadend=v:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(v)},w.onabort=function(){w&&(n(new ms("Request aborted",ms.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new ms("Network Error",ms.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||CA;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),n(new ms(C,P.clarifyTimeoutError?ms.ETIMEDOUT:ms.ECONNABORTED,e,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&He.forEach(o.toJSON(),function(C,P){w.setRequestHeader(P,C)}),He.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),l&&l!=="json"&&(w.responseType=a.responseType),d&&([p,y]=fv(d,!0),w.addEventListener("progress",p)),c&&w.upload&&([h,f]=fv(c),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(u=N=>{w&&(n(!N||N.type?new Ef(null,e,w):N),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const b=MB(a.url);if(b&&na.protocols.indexOf(b)===-1){n(new ms("Unsupported protocol "+b+":",ms.ERR_BAD_REQUEST,e));return}w.send(i||null)})},GB=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof ms?u:new Ef(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new ms(`timeout ${t} of ms exceeded`,ms.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>He.asap(l),c}},KB=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},YB=async function*(e,t){for await(const r of JB(e))yield*KB(r,t)},JB=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},t3=(e,t,r,n)=>{const a=YB(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let p=i+=h;r(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Iy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",TA=Iy&&typeof ReadableStream=="function",ZB=Iy&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),RA=(e,...t)=>{try{return!!e(...t)}catch{return!1}},XB=TA&&RA(()=>{let e=!1;const t=new Request(na.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),s3=64*1024,J2=TA&&RA(()=>He.isReadableStream(new Response("").body)),mv={stream:J2&&(e=>e.body)};Iy&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!mv[t]&&(mv[t]=He.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new ms(`Response type '${t}' is not supported`,ms.ERR_NOT_SUPPORT,n)})})})(new Response);const QB=async e=>{if(e==null)return 0;if(He.isBlob(e))return e.size;if(He.isSpecCompliantForm(e))return(await new Request(na.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(He.isArrayBufferView(e)||He.isArrayBuffer(e))return e.byteLength;if(He.isURLSearchParams(e)&&(e=e+""),He.isString(e))return(await ZB(e)).byteLength},ez=async(e,t)=>{const r=He.toFiniteNumber(e.getContentLength());return r??QB(t)},tz=Iy&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:p}=LA(e);d=d?(d+"").toLowerCase():"text";let f=GB([a,i&&i.toAbortSignal()],o),y;const x=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let w;try{if(c&&XB&&r!=="get"&&r!=="head"&&(w=await ez(u,n))!==0){let P=new Request(t,{method:"POST",body:n,duplex:"half"}),D;if(He.isFormData(n)&&(D=P.headers.get("content-type"))&&u.setContentType(D),P.body){const[R,A]=X4(w,fv(Q4(c)));n=t3(P.body,s3,R,A)}}He.isString(h)||(h=h?"include":"omit");const v="credentials"in Request.prototype;y=new Request(t,{...p,signal:f,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:v?h:void 0});let b=await fetch(y,p);const N=J2&&(d==="stream"||d==="response");if(J2&&(l||N&&x)){const P={};["status","statusText","headers"].forEach(I=>{P[I]=b[I]});const D=He.toFiniteNumber(b.headers.get("content-length")),[R,A]=l&&X4(D,fv(Q4(l),!0))||[];b=new Response(t3(b.body,s3,R,()=>{A&&A(),x&&x()}),P)}d=d||"text";let C=await mv[He.findKey(mv,d)||"text"](b,e);return!N&&x&&x(),await new Promise((P,D)=>{AA(P,D,{data:C,headers:qa.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:y})})}catch(v){throw x&&x(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new ms("Network Error",ms.ERR_NETWORK,e,y),{cause:v.cause||v}):ms.from(v,v&&v.code,e,y)}}),Z2={http:xB,xhr:WB,fetch:tz};He.forEach(Z2,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const r3=e=>`- ${e}`,sz=e=>He.isFunction(e)||e===null||e===!1,IA={getAdapter:e=>{e=He.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let i=0;i<t;i++){r=e[i];let o;if(n=r,!sz(r)&&(n=Z2[(o=String(r)).toLowerCase()],n===void 0))throw new ms(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(r3).join(`
`):" "+r3(i[0]):"as no adapter specified";throw new ms("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Z2};function Hj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ef(null,e)}function n3(e){return Hj(e),e.headers=qa.from(e.headers),e.data=Vj.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),IA.getAdapter(e.adapter||Jp.adapter)(e).then(function(n){return Hj(e),n.data=Vj.call(e,e.transformResponse,n),n.headers=qa.from(n.headers),n},function(n){return PA(n)||(Hj(e),n&&n.response&&(n.response.data=Vj.call(e,e.transformResponse,n.response),n.response.headers=qa.from(n.response.headers))),Promise.reject(n)})}const FA="1.11.0",Fy={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Fy[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const a3={};Fy.transitional=function(t,r,n){function a(i,o){return"[Axios v"+FA+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new ms(a(o," has been removed"+(r?" in "+r:"")),ms.ERR_DEPRECATED);return r&&!a3[o]&&(a3[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};Fy.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function rz(e,t,r){if(typeof e!="object")throw new ms("options must be an object",ms.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new ms("option "+i+" must be "+c,ms.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ms("Unknown option "+i,ms.ERR_BAD_OPTION)}}const Hg={assertOptions:rz,validators:Fy},ko=Hg.validators;let eu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new J4,response:new J4}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=hu(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&Hg.assertOptions(n,{silentJSONParsing:ko.transitional(ko.boolean),forcedJSONParsing:ko.transitional(ko.boolean),clarifyTimeoutError:ko.transitional(ko.boolean)},!1),a!=null&&(He.isFunction(a)?r.paramsSerializer={serialize:a}:Hg.assertOptions(a,{encode:ko.function,serialize:ko.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Hg.assertOptions(r,{baseUrl:ko.spelling("baseURL"),withXsrfToken:ko.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&He.merge(i.common,i[r.method]);i&&He.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),r.headers=qa.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(c=c&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let u,h=0,p;if(!c){const y=[n3.bind(this),void 0];for(y.unshift(...l),y.push(...d),p=y.length,u=Promise.resolve(r);h<p;)u=u.then(y[h++],y[h++]);return u}p=l.length;let f=r;for(h=0;h<p;){const y=l[h++],x=l[h++];try{f=y(f)}catch(w){x.call(this,w);break}}try{u=n3.call(this,f)}catch(y){return Promise.reject(y)}for(h=0,p=d.length;h<p;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=hu(this.defaults,t);const r=EA(t.baseURL,t.url,t.allowAbsoluteUrls);return _A(r,t.params,t.paramsSerializer)}};He.forEach(["delete","get","head","options"],function(t){eu.prototype[t]=function(r,n){return this.request(hu(n||{},{method:t,url:r,data:(n||{}).data}))}});He.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(hu(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}eu.prototype[t]=r(),eu.prototype[t+"Form"]=r(!0)});let nz=class DA{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Ef(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new DA(function(a){t=a}),cancel:t}}};function az(e){return function(r){return e.apply(null,r)}}function iz(e){return He.isObject(e)&&e.isAxiosError===!0}const X2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(X2).forEach(([e,t])=>{X2[t]=e});function OA(e){const t=new eu(e),r=fA(eu.prototype.request,t);return He.extend(r,eu.prototype,t,{allOwnKeys:!0}),He.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return OA(hu(e,a))},r}const Cr=OA(Jp);Cr.Axios=eu;Cr.CanceledError=Ef;Cr.CancelToken=nz;Cr.isCancel=PA;Cr.VERSION=FA;Cr.toFormData=Ry;Cr.AxiosError=ms;Cr.Cancel=Cr.CanceledError;Cr.all=function(t){return Promise.all(t)};Cr.spread=az;Cr.isAxiosError=iz;Cr.mergeConfig=hu;Cr.AxiosHeaders=qa;Cr.formToJSON=e=>kA(He.isHTMLForm(e)?new FormData(e):e);Cr.getAdapter=IA.getAdapter;Cr.HttpStatusCode=X2;Cr.default=Cr;const{Axios:gse,AxiosError:Os,CanceledError:vse,isCancel:yse,CancelToken:jse,VERSION:bse,all:wse,Cancel:Nse,isAxiosError:Sse,spread:_se,toFormData:Cse,AxiosHeaders:kse,HttpStatusCode:Pse,formToJSON:Ase,getAdapter:Ese,mergeConfig:Lse}=Cr,Bs="https://apiv1.shuletrack.com/api",Dy="AIzaSyB6Vd9ueyuXpQNCbSnpjrHLfToa--0VvH8",It={LOGIN:`${Bs}/login/`,VERIFY_OTP:`${Bs}/verify-otp/`,REGISTER:`${Bs}/register/`,SCHOOLS:`${Bs}/schools/`,SCHOOL_REGISTRATION:`${Bs}/school-registration/`,PARENTS:`${Bs}/parents/`,DRIVERS:`${Bs}/drivers/`,VEHICLES:`${Bs}/vehicles/`,ROUTES:`${Bs}/schools/`,ROUTE_STOPS:`${Bs}/schools/`,ROUTE_ASSIGNMENTS:`${Bs}/route-assignments/`,STAFF:`${Bs}/staff/`,SCHOOLS_ROLES:`${Bs}/schools-roles`,STUDENTS:`${Bs}/students/`,TRIPS:`${Bs}/trips/`,GRADES:`${Bs}/grades/`,PREFERENCES:`${Bs}/preferences/`,NOTIFICATIONS:`${Bs}/school-admin-notifications/`,NOTIFICATIONS_CREATE:`${Bs}/school-admin-notifications/`,CSV_UPLOAD:`${Bs}/csv-upload/`,REPORTS:`${Bs}/reports/`,SUBSCRIPTION_PLANS:`${Bs}/subscription-plans/`,CONTACT_MESSAGES:`${Bs}/contact-messages/`,SCHOOL_SUBSCRIPTIONS:`${Bs}/school-subscriptions/`,INVOICES:`${Bs}/invoices/`,ACTIVATE_SCHOOL:`${Bs}/activate-school/`,ALL_USERS:`${Bs}/all-users/`,DELETE_USER:`${Bs}/delete-user/`,RESTORE_USER:`${Bs}/restore-user/`},Lf=async(e,t={},r=3,n=1e3)=>{var i,o,l;let a=null;for(let c=0;c<=r;c++)try{const d=await fetch(e,t);if(d.ok)return d;if(d.status===429){const p=((o=(i=(await d.json().catch(()=>({}))).detail)==null?void 0:i.match(/(\d+) seconds?/))==null?void 0:o[1])||20;if(c<r){await new Promise(f=>setTimeout(f,parseInt(p)*1e3));continue}else throw new Error(`Rate limited. Please wait ${p} seconds before trying again.`)}const u=await d.json().catch(()=>({}));throw new Error(u.message||`HTTP error! status: ${d.status}`)}catch(d){if(a=d,!((l=d.message)!=null&&l.includes("Rate limited"))&&c<r){const u=n*Math.pow(2,c);await new Promise(h=>setTimeout(h,u));continue}throw d}throw a||new Error("Request failed after all retries")},oz=1,lz=1e6;let Wj=0;function cz(){return Wj=(Wj+1)%Number.MAX_SAFE_INTEGER,Wj.toString()}const Gj=new Map,i3=e=>{if(Gj.has(e))return;const t=setTimeout(()=>{Gj.delete(e),Gm({type:"REMOVE_TOAST",toastId:e})},lz);Gj.set(e,t)},dz=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,oz)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?i3(r):e.toasts.forEach(n=>{i3(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Wg=[];let Gg={toasts:[]};function Gm(e){Gg=dz(Gg,e),Wg.forEach(t=>{t(Gg)})}function Fs({...e}){const t=cz(),r=a=>Gm({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Gm({type:"DISMISS_TOAST",toastId:t});return Gm({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function Ar(){const[e,t]=g.useState(Gg);return g.useEffect(()=>(Wg.push(t),()=>{const r=Wg.indexOf(t);r>-1&&Wg.splice(r,1)}),[e]),{...e,toast:Fs,dismiss:r=>Gm({type:"DISMISS_TOAST",toastId:r})}}const Ss={success:(e,t)=>{Fs({title:e,description:t,variant:"default"})},error:(e,t)=>{Fs({title:e,description:t,variant:"destructive"})},warning:(e,t)=>{Fs({title:e,description:t,variant:"warning"})},info:(e,t)=>{Fs({title:e,description:t,variant:"default"})}};let uz=()=>{y5.dispatch(BA()),window.location.href="/login"};const hz=e=>{if(e instanceof Os){if(!e.response)throw Ss.error("Network Error","Please check your connection"),new Error("Network error - please check your connection");const t=e.response.status,r=e.response.data;switch(t){case 400:throw Ss.error("Error Trying to Make The Request",r.message||r.error||"Invalid request"),new Error(r.message||r.error||"Bad request");case 401:uz();return;case 403:throw Ss.error("Forbidden","You don't have permission"),new Error("Forbidden - you don't have permission");case 404:throw Ss.error("Not Found","Resource not found"),new Error("Resource not found");case 500:throw Ss.error("Server Error","Please try again later"),new Error("Server error - please try again later");default:throw Ss.error("Error",r.message||"An error occurred"),new Error(r.message||"An error occurred")}}throw Ss.error("Error",e instanceof Error?e.message:"An unexpected error occurred"),e};class Im extends Error{}Im.prototype.name="InvalidTokenError";function fz(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function mz(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return fz(t)}catch{return atob(t)}}function pz(e,t){if(typeof e!="string")throw new Im("Invalid token specified: must be a string");t||(t={});const r=t.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw new Im(`Invalid token specified: missing part #${r+1}`);let a;try{a=mz(n)}catch(i){throw new Im(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new Im(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}const ug=e=>{try{const t=pz(e),r=Date.now()/1e3;return t.exp<r}catch{return!0}},MA=()=>{let e=localStorage.getItem("token");if(!e)try{const t=localStorage.getItem("persist:auth");if(t){const r=JSON.parse(t);if(r.token){const n=JSON.parse(r.token);e=typeof n=="string"?n:JSON.stringify(n)}}}catch{}return e},Km=()=>{localStorage.removeItem("persist:auth"),localStorage.removeItem("schoolId"),localStorage.removeItem("token")},xz={timeout:3e4,baseURL:Bs},gz={"/parents":{timeout:45e3},"/students":{timeout:45e3}},vz=(e=xz)=>{const t=Cr.create({baseURL:e.baseURL,timeout:e.timeout,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});return t.interceptors.request.use(r=>{const n=r.url||"",a=gz[n];return a&&(r.timeout=a.timeout||e.timeout),r}),t},yz=e=>(e.interceptors.request.use(t=>{const r=MA();return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t)),e),$t=vz();yz($t);let Xu=!1;$t.interceptors.response.use(e=>e,e=>{var t,r;return((t=e.response)==null?void 0:t.status)===401&&!Xu?(Xu=!0,Km(),setTimeout(()=>{Xu=!1},1e3),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(e)):((r=e.response)==null?void 0:r.status)===403&&!Xu?(Xu=!0,Km(),setTimeout(()=>{Xu=!1},1e3),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(e)):(hz(e),Promise.reject(e))});const jz=()=>MA(),bz=()=>{try{const e=localStorage.getItem("persist:auth");if(e){const t=JSON.parse(e);return JSON.parse(t.user||"null")}}catch{}return null},wz={user:null,token:null,loading:!1,error:null,userId:null,verificationStatus:"idle",isInitialized:!1,hasLoggedInBefore:!1},Nz=e=>{const t=e.school_subscription;if(!t||t.school_to_pay||t.parents_to_pay)return null;if(!t.school_to_pay&&!t.parents_to_pay&&t.status!=="active"){let r="Access denied. ";switch(t.status){case"suspended":r+="Your school subscription has been suspended due to payment issues. Please contact your school administrator to resolve this.";break;case"expired":r+="Your school subscription has expired. Please contact your school administrator to renew the subscription.";break;case"cancelled":r+="Your school subscription has been cancelled. Please contact your school administrator to reactivate the subscription.";break;case"pending":r+="Your school subscription is pending activation. Please contact your school administrator.";break;default:r+=`Your school subscription is ${t.status}. Please contact your school administrator to resolve payment issues.`}return r}return null},Kg=Pt("auth/login",async(e,{rejectWithValue:t})=>new Promise((r,n)=>{const a=new XMLHttpRequest;a.open("POST",It.LOGIN,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Accept","application/json"),a.onload=function(){var i;if(a.status>=200&&a.status<300)try{const o=JSON.parse(a.responseText);if((i=o.data)!=null&&i.token){const{token:l,user:c}=o.data,d=Nz(c);if(d){n(t(d));return}r({token:l,user:c})}else n(t("Invalid response from server"))}catch{n(t("Failed to parse server response"))}else try{const o=JSON.parse(a.responseText);n(t(o.message||"Login failed. Please try again."))}catch{n(t("Login failed. Please try again."))}},a.onerror=function(){n(t("Network error occurred"))},a.send(JSON.stringify(e))})),Kj=Pt("auth/verifyOTP",async(e,{rejectWithValue:t})=>{var r,n;try{return(await $t.post(It.VERIFY_OTP,e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"OTP verification failed")}}),Yj=Pt("auth/register",async(e,{rejectWithValue:t})=>{var r,n,a;try{const i=await $t.post(It.REGISTER,e);if((r=i.data.data)!=null&&r.token){const{token:o,user:l}=i.data.data;return{token:o,user:l}}else return t("Invalid response from server")}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Registration failed")}}),$A=Qr({name:"auth",initialState:wz,reducers:{logout:e=>{e.user=null,e.token=null,e.userId=null,e.verificationStatus="idle",e.isInitialized=!0,Km()},clearError:e=>{e.error=null},resetVerificationStatus:e=>{e.verificationStatus="idle"},checkTokenExpiration:e=>{e.token&&ug(e.token)&&(e.user=null,e.token=null,e.userId=null,e.verificationStatus="idle",e.isInitialized=!0,Km())},initializeAuth:e=>{const t=jz(),r=bz();if(t&&r&&!ug(t))e.token=t,e.user=r,e.hasLoggedInBefore=!0;else{t&&ug(t)&&Km();const n=localStorage.getItem("hasLoggedInBefore")==="true";e.hasLoggedInBefore=n,e.token=null,e.user=null,e.userId=null,e.verificationStatus="idle"}e.isInitialized=!0}},extraReducers:e=>{e.addCase("persist/REHYDRATE",(t,r)=>{var n;if((n=r.payload)!=null&&n.auth){const{token:a,user:i}=r.payload.auth;a&&i&&!ug(a)?(t.token=a,t.user=i,t.hasLoggedInBefore=!0):(t.token=null,t.user=null,t.hasLoggedInBefore=!1)}t.isInitialized=!0}).addCase(Kg.pending,t=>{t.loading=!0,t.error=null}).addCase(Kg.fulfilled,(t,r)=>{t.loading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isInitialized=!0,t.hasLoggedInBefore=!0,localStorage.setItem("token",r.payload.token),localStorage.setItem("hasLoggedInBefore","true")}).addCase(Kg.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Login failed. Please try again.",t.isInitialized=!0}).addCase(Kj.pending,t=>{t.loading=!0,t.error=null}).addCase(Kj.fulfilled,(t,r)=>{t.loading=!1,t.user=r.payload.user,t.token=r.payload.token,t.verificationStatus="verified",t.isInitialized=!0,t.hasLoggedInBefore=!0,localStorage.setItem("token",r.payload.token),localStorage.setItem("hasLoggedInBefore","true")}).addCase(Kj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"OTP verification failed",t.verificationStatus="failed",t.isInitialized=!0}).addCase(Yj.pending,t=>{t.loading=!0,t.error=null}).addCase(Yj.fulfilled,(t,r)=>{t.loading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isInitialized=!0,t.hasLoggedInBefore=!0,localStorage.setItem("token",r.payload.token),localStorage.setItem("hasLoggedInBefore","true")}).addCase(Yj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Registration failed",t.isInitialized=!0})}}),{logout:BA,clearError:o3,checkTokenExpiration:Sz,initializeAuth:_z}=$A.actions,Cz=$A.reducer,kz={schools:[],loading:!1,error:null,registrationLoading:!1,registrationError:null,registrationSuccess:!1},jl=Pt("schools/fetchSchools",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await $t.get(It.SCHOOLS);return!o.data||!Array.isArray(o.data)?t("Invalid response format from server"):o.data}catch(o){const l=o;return((r=l.response)==null?void 0:r.status)===401||((n=l.response)==null?void 0:n.status)===403?t("Authentication failed"):l.response?t(((i=(a=l.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch schools"):t("Network error - please check your connection")}}),Yg=Pt("schools/registerSchool",async(e,{rejectWithValue:t})=>{var r,n;try{return(await $t.post(It.SCHOOL_REGISTRATION,e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to register school")}}),zA=Qr({name:"schools",initialState:kz,reducers:{clearSchoolsError:e=>{e.error=null},clearRegistrationError:e=>{e.registrationError=null},clearRegistrationSuccess:e=>{e.registrationSuccess=!1}},extraReducers:e=>{e.addCase(jl.pending,t=>{t.loading=!0,t.error=null}).addCase(jl.fulfilled,(t,r)=>{t.loading=!1,t.schools=r.payload}).addCase(jl.rejected,(t,r)=>{t.loading=!1;const n=r.payload||"Failed to fetch schools";n.includes("Authentication failed")||(t.error=n)}).addCase(Yg.pending,t=>{t.registrationLoading=!0,t.registrationError=null,t.registrationSuccess=!1}).addCase(Yg.fulfilled,t=>{t.registrationLoading=!1,t.registrationSuccess=!0}).addCase(Yg.rejected,(t,r)=>{t.registrationLoading=!1,t.registrationError=r.payload||"Failed to register school"})}}),{clearSchoolsError:l3}=zA.actions,Pz=zA.reducer,Az={parents:[],loading:!1,error:null},Jg=Pt("parents/registerParent",async(e,{rejectWithValue:t})=>{var r,n;try{const a={user_data:{first_name:e.user.first_name,last_name:e.user.last_name,email:e.user.email,phone_number:e.user.phone_number,password:e.user.password,confirm_password:e.user.confirm_password,user_type:e.user.user_type,profile_image:e.user.profile_image,user_phone_number:e.user.user_phone_number},address:e.address,emergency_contact:e.emergency_contact,school:e.school,preferred_contact_method:e.preferred_contact_method,secondary_phone:e.secondary_phone,authorized_pickup_persons:e.authorized_pickup_persons};return(await $t.post(It.PARENTS,a)).data}catch(a){if(a instanceof Os){if((r=a.response)!=null&&r.data){const i=a.response.data,o=JSON.stringify(i);return t(o)}return(n=a.response)!=null&&n.status?t(`Server error (${a.response.status})`):t("Network error - please check your connection")}return t(a instanceof Error?a.message:"Failed to register parent")}}),xa=Pt("parents/fetchParents",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=It.PARENTS;a&&(i+=`?school=${a}`);const o=Date.now();i+=i.includes("?")?`&_t=${o}`:`?_t=${o}`;const l=await $t.get(i);return!l.data||!Array.isArray(l.data)?t("Invalid response format from server"):l.data}catch(a){if(a instanceof Os){if((r=a.response)!=null&&r.data){const i=a.response.data;return typeof i=="object"&&i.message?t(i.message):t(JSON.stringify(i))}return(n=a.response)!=null&&n.status?t(`Server error (${a.response.status})`):t("Network error - please check your connection")}return t(a instanceof Error?a.message:"Failed to fetch parents")}}),Jj=Pt("parents/fetchParentById",async({schoolId:e,parentId:t},{rejectWithValue:r})=>{var n,a;try{const i=await $t.get(`${It.PARENTS}${t}/`);return i.data.data||i.data}catch(i){if(i instanceof Os){if((n=i.response)!=null&&n.data){const o=i.response.data;return typeof o=="object"&&o.message?r(o.message):r(JSON.stringify(o))}return(a=i.response)!=null&&a.status?r(`Server error (${i.response.status})`):r("Network error - please check your connection")}return r(i instanceof Error?i.message:"Failed to fetch parent")}}),Zg=Pt("parents/updateParent",async({id:e,data:t},{rejectWithValue:r})=>{var n,a;try{const i=await $t.put(`${It.PARENTS}${e}/`,t);return i.data.data||i.data}catch(i){if(i instanceof Os){if((n=i.response)!=null&&n.data){const o=i.response.data;return typeof o=="object"&&o.message?r(o.message):r(JSON.stringify(o))}return(a=i.response)!=null&&a.status?r(`Server error (${i.response.status})`):r("Network error - please check your connection")}return r(i instanceof Error?i.message:"Failed to update parent")}}),Xg=Pt("parents/deleteParent",async(e,{rejectWithValue:t})=>{var r,n;try{await $t.delete(`${It.PARENTS}${e}/`)}catch(a){if(a instanceof Os){if((r=a.response)!=null&&r.data){const i=a.response.data;return typeof i=="object"&&i.message?t(i.message):t(JSON.stringify(i))}return(n=a.response)!=null&&n.status?t(`Server error (${a.response.status})`):t("Network error - please check your connection")}return t(a instanceof Error?a.message:"Failed to delete parent")}}),Ez=Qr({name:"parents",initialState:Az,reducers:{clearParentsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Jg.pending,t=>{t.loading=!0,t.error=null}).addCase(Jg.fulfilled,(t,r)=>{t.loading=!1,t.parents.push(r.payload)}).addCase(Jg.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to register parent"}).addCase(xa.pending,t=>{t.loading=!0,t.error=null}).addCase(xa.fulfilled,(t,r)=>{t.loading=!1,t.parents=r.payload}).addCase(xa.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch parents"}).addCase(Jj.pending,t=>{t.loading=!0,t.error=null}).addCase(Jj.fulfilled,(t,r)=>{t.loading=!1;const n=t.parents.findIndex(a=>a.id===r.payload.id);n!==-1?t.parents[n]=r.payload:t.parents.push(r.payload)}).addCase(Jj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Zg.pending,t=>{t.loading=!0,t.error=null}).addCase(Zg.fulfilled,(t,r)=>{t.loading=!1;const n=t.parents.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.parents[n]=r.payload)}).addCase(Zg.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Xg.pending,t=>{t.loading=!0,t.error=null}).addCase(Xg.fulfilled,(t,r)=>{t.loading=!1,t.parents=t.parents.filter(n=>n.id!==r.meta.arg)}).addCase(Xg.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),Lz=Ez.reducer,Tz={drivers:[],loading:!1,error:null},Qg=Pt("drivers/addDriver",async(e,{rejectWithValue:t})=>{var r;try{return(await $t.post(It.DRIVERS,e)).data.data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add driver"}))}}),Mn=Pt("drivers/fetchDrivers",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await $t.get(It.DRIVERS);if(Array.isArray(a.data))return a.data;if(a.data.data&&Array.isArray(a.data.data))return a.data.data;throw new Error("Invalid response format")}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch drivers")}}),e0=Pt("drivers/deleteDriver",async(e,{rejectWithValue:t})=>{var r,n;try{return await $t.delete(`${It.DRIVERS}${e}/`),e}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete driver"):t("Failed to delete driver")}}),t0=Pt("drivers/updateDriver",async({id:e,data:t},{rejectWithValue:r})=>{var n;try{const a=await $t.put(`${It.DRIVERS}${e}/`,t);return a.data.data||a.data}catch(a){return r(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update driver"}))}}),Rz=Qr({name:"drivers",initialState:Tz,reducers:{clearDriversError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Qg.pending,t=>{t.loading=!0,t.error=null}).addCase(Qg.fulfilled,(t,r)=>{t.loading=!1,t.drivers.push(r.payload)}).addCase(Qg.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add driver"}).addCase(Mn.pending,t=>{t.loading=!0,t.error=null}).addCase(Mn.fulfilled,(t,r)=>{t.loading=!1,t.drivers=r.payload}).addCase(Mn.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch drivers"}).addCase(e0.pending,t=>{t.loading=!0,t.error=null}).addCase(e0.fulfilled,(t,r)=>{t.loading=!1,t.drivers=t.drivers.filter(n=>n.id!==r.payload)}).addCase(e0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete driver"}).addCase(t0.pending,t=>{t.loading=!0,t.error=null}).addCase(t0.fulfilled,(t,r)=>{t.loading=!1;const n=t.drivers.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.drivers[n]=r.payload)}).addCase(t0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update driver"})}}),Iz=Rz.reducer,Fz={vehicles:[],loading:!1,error:null},Rh=Pt("vehicles/fetchVehicles",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=It.VEHICLES;a&&(i+=`?school=${a}`);const o=await $t.get(i);return Array.isArray(o.data)?o.data.filter(c=>!(!c||typeof c!="object")):o.data&&o.data.data&&Array.isArray(o.data.data)?o.data.data:[]}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch vehicles")}}),s0=Pt("vehicles/addVehicle",async(e,{rejectWithValue:t})=>{var r;try{return(await $t.post(It.VEHICLES,e)).data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add vehicle"}))}}),r0=Pt("vehicles/deleteVehicle",async(e,{rejectWithValue:t,getState:r})=>{var n,a;try{const o=r().auth.token,l=await $t.delete(`${It.VEHICLES}${e}/`);return e}catch(i){return i instanceof Os?t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to delete vehicle"):t("Failed to delete vehicle")}}),Dz=Qr({name:"vehicles",initialState:Fz,reducers:{clearVehiclesError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Rh.pending,t=>{t.loading=!0,t.error=null}).addCase(Rh.fulfilled,(t,r)=>{t.loading=!1,t.vehicles=r.payload}).addCase(Rh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch vehicles"}).addCase(s0.pending,t=>{t.loading=!0,t.error=null}).addCase(s0.fulfilled,(t,r)=>{t.loading=!1,t.vehicles.push(r.payload)}).addCase(s0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add vehicle"}).addCase(r0.pending,t=>{t.loading=!0,t.error=null}).addCase(r0.fulfilled,(t,r)=>{t.loading=!1,t.vehicles=t.vehicles.filter(n=>n.id!==r.payload)}).addCase(r0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete vehicle"})}}),Oz=Dz.reducer,Mz={routes:[],loading:!1,error:null},n0=Pt("routes/addRoute",async(e,{rejectWithValue:t})=>{var r;try{const n=e.school;return(await $t.post(`${It.ROUTES}${n}/routes/`,e)).data.data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add route"}))}}),Io=Pt("routes/fetchRoutes",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;if(!a)throw new Error("School ID is required");const i=`${It.ROUTES}${a}/routes/`,o=await $t.get(i);if(Array.isArray(o.data))return o.data;if(o.data.data&&Array.isArray(o.data.data))return o.data.data;throw new Error("Invalid response format")}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch routes")}}),a0=Pt("routes/deleteRoute",async(e,{rejectWithValue:t})=>{var r,n;try{return await $t.delete(`/api/routes/${e}/`),e}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete route"):t("Failed to delete route")}}),i0=Pt("routes/updateRoute",async({id:e,routeData:t},{rejectWithValue:r})=>{var n;try{const a=t.school;return(await $t.put(`${It.ROUTES}${a}/routes/${e}/`,t)).data.data}catch(a){return r(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update route"}))}}),o0=Pt("routes/addRouteStop",async(e,{rejectWithValue:t})=>{var r;try{return(await $t.post(`/api/routes/${e.route}/stops/`,e)).data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add route stop"}))}}),Ih=Pt("routes/fetchRouteStops",async(e,{rejectWithValue:t})=>{var r,n;try{return(await $t.get(`/routes/${e}/stops/`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch route stops")}}),$z=Qr({name:"routes",initialState:Mz,reducers:{clearRoutesError:e=>{e.error=null}},extraReducers:e=>{e.addCase(n0.pending,t=>{t.loading=!0,t.error=null}).addCase(n0.fulfilled,(t,r)=>{t.loading=!1,t.routes.push(r.payload)}).addCase(n0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add route"}).addCase(Io.pending,t=>{t.loading=!0,t.error=null}).addCase(Io.fulfilled,(t,r)=>{t.loading=!1,t.routes=r.payload}).addCase(Io.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch routes"}).addCase(a0.pending,t=>{t.loading=!0,t.error=null}).addCase(a0.fulfilled,(t,r)=>{t.loading=!1,t.routes=t.routes.filter(n=>n.id!==r.payload)}).addCase(a0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete route"}).addCase(i0.pending,t=>{t.loading=!0,t.error=null}).addCase(i0.fulfilled,(t,r)=>{t.loading=!1;const n=t.routes.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.routes[n]=r.payload)}).addCase(i0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update route"}).addCase(o0.pending,t=>{t.loading=!0,t.error=null}).addCase(o0.fulfilled,(t,r)=>{t.loading=!1}).addCase(o0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add route stop"}).addCase(Ih.pending,t=>{t.loading=!0,t.error=null}).addCase(Ih.fulfilled,(t,r)=>{t.loading=!1}).addCase(Ih.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch route stops"})}}),Bz=$z.reducer,zz={assignments:[],loading:!1,error:null},l0=Pt("routeAssignments/createAssignment",async(e,{rejectWithValue:t})=>{var r;try{return(await $t.post(It.ROUTE_ASSIGNMENTS,e)).data.data}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to create route assignment"}))}}),Ym=Pt("routeAssignments/fetchAssignments",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=It.ROUTE_ASSIGNMENTS;a&&(i+=`?school=${a}`);const o=await $t.get(i);if(Array.isArray(o.data))return o.data;if(o.data.data&&Array.isArray(o.data.data))return o.data.data;throw new Error("Invalid response format")}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch route assignments")}}),Zj=Pt("routeAssignments/updateAssignment",async({id:e,data:t},{rejectWithValue:r})=>{var n;try{return(await $t.put(`${It.ROUTE_ASSIGNMENTS}${e}/`,t)).data.data}catch(a){return r(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to update route assignment"}))}}),Xj=Pt("routeAssignments/deleteAssignment",async(e,{rejectWithValue:t})=>{var r;try{return await $t.delete(`${It.ROUTE_ASSIGNMENTS}${e}/`),e}catch(n){return t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to delete route assignment"}))}}),Uz=Qr({name:"routeAssignments",initialState:zz,reducers:{clearRouteAssignmentsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(l0.pending,t=>{t.loading=!0,t.error=null}).addCase(l0.fulfilled,(t,r)=>{t.loading=!1,t.assignments.push(r.payload)}).addCase(l0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to create route assignment"}).addCase(Ym.pending,t=>{t.loading=!0,t.error=null}).addCase(Ym.fulfilled,(t,r)=>{t.loading=!1,t.assignments=r.payload}).addCase(Ym.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch route assignments"}).addCase(Zj.pending,t=>{t.loading=!0,t.error=null}).addCase(Zj.fulfilled,(t,r)=>{t.loading=!1;const n=t.assignments.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.assignments[n]=r.payload)}).addCase(Zj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update route assignment"}).addCase(Xj.pending,t=>{t.loading=!0,t.error=null}).addCase(Xj.fulfilled,(t,r)=>{t.loading=!1,t.assignments=t.assignments.filter(n=>n.id!==r.payload)}).addCase(Xj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete route assignment"})}}),qz=Uz.reducer,Vz={staff:[],loading:!1,error:null},Fh=Pt("staff/fetchStaff",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=It.STAFF;return a&&(i+=`?school=${a}`),(await $t.get(i)).data}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch staff"):t("Failed to fetch staff")}}),Dh=Pt("staff/addStaff",async(e,{rejectWithValue:t})=>{var r;try{return(await $t.post(It.STAFF,e)).data}catch(n){return n instanceof Os?t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to add staff"})):t("Failed to add staff")}}),Qj=Pt("staff/updateStaff",async({id:e,staffData:t},{rejectWithValue:r})=>{var n,a;try{return(await $t.patch(`${It.STAFF}${e}/`,t)).data}catch(i){return i instanceof Os?r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update staff"):r("Failed to update staff")}}),eb=Pt("staff/deleteStaff",async(e,{rejectWithValue:t})=>{var r,n;try{return await $t.delete(`${It.STAFF}${e}/`),e}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete staff"):t("Failed to delete staff")}}),Hz=Qr({name:"staff",initialState:Vz,reducers:{clearStaffError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Fh.pending,t=>{t.loading=!0,t.error=null}).addCase(Fh.fulfilled,(t,r)=>{t.loading=!1,t.staff=r.payload}).addCase(Fh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch staff"}).addCase(Dh.pending,t=>{t.loading=!0,t.error=null}).addCase(Dh.fulfilled,(t,r)=>{t.loading=!1,t.staff.push(r.payload)}).addCase(Dh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to add staff"}).addCase(Qj.pending,t=>{t.loading=!0,t.error=null}).addCase(Qj.fulfilled,(t,r)=>{t.loading=!1;const n=t.staff.findIndex(a=>a.employee_id===r.payload.employee_id);n!==-1&&(t.staff[n]=r.payload)}).addCase(Qj.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update staff"}).addCase(eb.pending,t=>{t.loading=!0,t.error=null}).addCase(eb.fulfilled,(t,r)=>{t.loading=!1,t.staff=t.staff.filter(n=>n.employee_id!==r.payload)}).addCase(eb.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete staff"})}}),Wz=Hz.reducer,Gz={name:"school_admin",description:"Full administrative access for school management",school:1,permissions:["manage_staff","manage_students","manage_transport","manage_security","view_reports","manage_finance","manage_attendance","manage_timetable","manage_exams","manage_parents","manage_vehicles","manage_routes","manage_trips","manage_grades","manage_settings"],is_system_role:!1},Kz={name:"teacher",description:"Teacher access for classroom management",school:1,permissions:["manage_students","view_reports","manage_attendance","manage_timetable","manage_exams","manage_grades"],is_system_role:!1},Yz={name:"driver",description:"Driver access for transport management",school:1,permissions:["manage_transport","manage_trips","view_reports"],is_system_role:!1},Jz={name:"security",description:"Security personnel access",school:1,permissions:["manage_security","view_reports"],is_system_role:!1},Zz=e=>[{...Gz,school:e},{...Kz,school:e},{...Yz,school:e},{...Jz,school:e}],Xz={roles:[],selectedRole:null,loading:!1,error:null},tu=Pt("roles/fetchRoles",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await $t.get(`${It.SCHOOLS_ROLES}?school=${e}`);return a.data.data||a.data}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch roles"):t("Failed to fetch roles")}}),tb=Pt("roles/fetchRoleById",async({schoolId:e,roleId:t},{rejectWithValue:r})=>{var n,a;try{const i=await $t.get(`${It.SCHOOLS_ROLES}/${t}/`);return i.data.data||i.data}catch(i){return i instanceof Os?r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch role"):r("Failed to fetch role")}}),Oh=Pt("roles/createRole",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await $t.post(`${It.SCHOOLS_ROLES}/`,e);return a.data.data||a.data}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create role"):t("Failed to create role")}}),sb=Pt("roles/updateRole",async({id:e,data:t},{rejectWithValue:r})=>{var n,a;try{const i=await $t.put(`${It.SCHOOLS_ROLES}/${e}/`,t);return i.data.data||i.data}catch(i){return i instanceof Os?r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update role"):r("Failed to update role")}}),rb=Pt("roles/deleteRole",async(e,{rejectWithValue:t})=>{var r,n;try{await $t.delete(`${It.SCHOOLS_ROLES}/${e}/`)}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete role"):t("Failed to delete role")}}),Mh=Pt("roles/createDefaultRoles",async(e,{rejectWithValue:t})=>{var r,n;try{const a=Zz(e),i=[];for(const o of a)try{const l=await $t.post(`${It.SCHOOLS_ROLES}/`,o);i.push(l.data.data||l.data)}catch{}return i}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create default roles"):t("Failed to create default roles")}}),Qz=Qr({name:"roles",initialState:Xz,reducers:{clearSelectedRole:e=>{e.selectedRole=null}},extraReducers:e=>{e.addCase(tu.pending,t=>{t.loading=!0,t.error=null}).addCase(tu.fulfilled,(t,r)=>{t.loading=!1,t.roles=r.payload}).addCase(tu.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(tb.pending,t=>{t.loading=!0,t.error=null}).addCase(tb.fulfilled,(t,r)=>{t.loading=!1,t.selectedRole=r.payload}).addCase(tb.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Oh.pending,t=>{t.loading=!0,t.error=null}).addCase(Oh.fulfilled,(t,r)=>{t.loading=!1,t.roles.push(r.payload)}).addCase(Oh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(sb.pending,t=>{t.loading=!0,t.error=null}).addCase(sb.fulfilled,(t,r)=>{var a;t.loading=!1;const n=t.roles.findIndex(i=>i.id===r.payload.id);n!==-1&&(t.roles[n]=r.payload),((a=t.selectedRole)==null?void 0:a.id)===r.payload.id&&(t.selectedRole=r.payload)}).addCase(sb.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(rb.pending,t=>{t.loading=!0,t.error=null}).addCase(rb.fulfilled,(t,r)=>{var n;t.loading=!1,t.roles=t.roles.filter(a=>a.id!==r.meta.arg),((n=t.selectedRole)==null?void 0:n.id)===r.meta.arg&&(t.selectedRole=null)}).addCase(rb.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(Mh.pending,t=>{t.loading=!0,t.error=null}).addCase(Mh.fulfilled,(t,r)=>{t.loading=!1,t.roles.push(...r.payload)}).addCase(Mh.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),eU=Qz.reducer,tU={students:[],loading:!1,error:null},c0=Pt("students/createStudent",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await $t.post(It.STUDENTS,e),i=((r=a.data)==null?void 0:r.data)||a.data;return!i||typeof i!="object"?t("Invalid student data received from server"):!i.first_name||!i.last_name?t("Student data missing required fields"):i}catch(a){return a instanceof Os?t(JSON.stringify(((n=a.response)==null?void 0:n.data)||{message:"Failed to create student"})):t("Failed to create student")}}),ai=Pt("students/fetchStudents",async(e,{rejectWithValue:t})=>{var r,n,a;try{const i=typeof e=="object"?e.schoolId:void 0;let o=It.STUDENTS;i&&(o+=`?school=${i}`);const l=await $t.get(o),c=((r=l.data)==null?void 0:r.data)||l.data;return Array.isArray(c)?c:[]}catch(i){return i instanceof Os?t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch students"):t("Failed to fetch students")}}),Jm=Pt("students/updateStudent",async({id:e,data:t},{rejectWithValue:r})=>{var n,a;try{const i=await $t.put(`${It.STUDENTS}${e}/`,t),o=((n=i.data)==null?void 0:n.data)||i.data;return!o||typeof o!="object"?r("Invalid student data received from server"):o}catch(i){return i instanceof Os?r(JSON.stringify(((a=i.response)==null?void 0:a.data)||{message:"Failed to update student"})):r("Failed to update student")}}),Zm=Pt("students/deleteStudent",async(e,{rejectWithValue:t})=>{var r;try{return await $t.delete(`${It.STUDENTS}${e}/`),e}catch(n){return n instanceof Os?t(JSON.stringify(((r=n.response)==null?void 0:r.data)||{message:"Failed to delete student"})):t("Failed to delete student")}}),sU=Qr({name:"students",initialState:tU,reducers:{clearStudentsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(c0.pending,t=>{t.loading=!0,t.error=null}).addCase(c0.fulfilled,(t,r)=>{t.loading=!1,r.payload&&typeof r.payload=="object"&&r.payload.first_name?t.students.push(r.payload):t.error="Invalid student data received"}).addCase(c0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to create student"}).addCase(ai.pending,t=>{t.loading=!0,t.error=null}).addCase(ai.fulfilled,(t,r)=>{t.loading=!1,t.students=Array.isArray(r.payload)?r.payload:[]}).addCase(ai.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch students"}).addCase(Jm.pending,t=>{t.loading=!0,t.error=null}).addCase(Jm.fulfilled,(t,r)=>{t.loading=!1;const n=t.students.findIndex(a=>a.id===r.payload.id);n!==-1?t.students[n]=r.payload:t.students.push(r.payload)}).addCase(Jm.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update student"}).addCase(Zm.pending,t=>{t.loading=!0,t.error=null}).addCase(Zm.fulfilled,(t,r)=>{t.loading=!1,t.students=t.students.filter(n=>n.id!==r.payload)}).addCase(Zm.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete student"})}}),rU=sU.reducer,v5=void 0,nU={profile:null,loading:!1,error:null},Xm=Pt("profile/fetchProfile",async(e,{rejectWithValue:t,getState:r})=>{var n,a;try{const o=r().auth.token;return(await Cr.get(`${v5}/api/user-profile/`,{headers:{Authorization:`Bearer ${o}`}})).data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch profile")}}),d0=Pt("profile/updateProfile",async(e,{rejectWithValue:t,getState:r})=>{var n,a;try{const o=r().auth.token;return(await Cr.patch(`${v5}/api/user-profile/`,e,{headers:{Authorization:`Bearer ${o}`}})).data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update profile")}}),UA=Pt("profile/logout",async(e,{rejectWithValue:t,getState:r})=>{var n,a;try{const o=r().auth.token;return await Cr.post(`${v5}/api/logout/`,{},{headers:{Authorization:`Bearer ${o}`}}),null}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to logout")}}),aU=Qr({name:"profile",initialState:nU,reducers:{clearProfile:e=>{e.profile=null,e.error=null}},extraReducers:e=>{e.addCase(Xm.pending,t=>{t.loading=!0,t.error=null}).addCase(Xm.fulfilled,(t,r)=>{t.loading=!1,t.profile=r.payload}).addCase(Xm.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(d0.pending,t=>{t.loading=!0,t.error=null}).addCase(d0.fulfilled,(t,r)=>{t.loading=!1,t.profile=r.payload}).addCase(d0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(UA.fulfilled,t=>{t.profile=null,t.loading=!1,t.error=null})}}),iU=aU.reducer,c3={stats:{totalStudents:0,totalParents:0,totalStaff:0,totalVehicles:0,totalRoutes:0,activeRoutes:0},loading:!1,error:null,lastUpdated:null},Qm=Pt("overview/fetchOverviewData",async({schoolId:e},{rejectWithValue:t,dispatch:r})=>{try{const[n,a,i,o,l]=await Promise.allSettled([r(ai({schoolId:e})).unwrap(),r(xa({schoolId:e})).unwrap(),r(Fh({schoolId:e})).unwrap(),r(Rh({schoolId:e})).unwrap(),r(Io({schoolId:e})).unwrap()]),c=n.status==="fulfilled"?n.value:[],d=a.status==="fulfilled"?a.value:[],u=i.status==="fulfilled"?i.value:[],h=o.status==="fulfilled"?o.value:[],p=l.status==="fulfilled"?l.value:[];return{totalStudents:c.length,totalParents:d.length,totalStaff:u.length,totalVehicles:h.length,totalRoutes:p.length,activeRoutes:p.filter(y=>y.is_active).length}}catch{return t("Failed to fetch overview data")}}),oU=Qr({name:"overview",initialState:c3,reducers:{clearOverviewError:e=>{e.error=null},resetOverview:e=>{e.stats=c3.stats,e.lastUpdated=null}},extraReducers:e=>{e.addCase(Qm.pending,t=>{t.loading=!0,t.error=null}).addCase(Qm.fulfilled,(t,r)=>{t.loading=!1,t.stats=r.payload,t.lastUpdated=new Date().toISOString()}).addCase(Qm.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch overview data"})}}),lU=oU.reducer,cU={trips:[],loading:!1,error:null},su=Pt("trips/fetchTrips",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=It.TRIPS;a&&(i+=`?school=${a}`);const o=await $t.get(i);let l;return o.data&&o.data.results?l=o.data.results:o.data&&Array.isArray(o.data)?l=o.data:o.data&&o.data.data&&Array.isArray(o.data.data)?l=o.data.data:l=[],Array.isArray(l)?l.map(d=>{var u,h,p;return{...d,route_name:d.route_name||((u=d.route_details)==null?void 0:u.name)||`Route ${d.route}`,vehicle_registration:d.vehicle_number||((h=d.vehicle_details)==null?void 0:h.license_plate)||`Vehicle ${d.vehicle}`,driver_name:d.driver_name||((p=d.driver_details)==null?void 0:p.full_name)||`Driver ${d.driver}`}}):[]}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch trips"):t("Failed to fetch trips")}}),u0=Pt("trips/createTrip",async(e,{rejectWithValue:t})=>{var r,n,a,i,o,l,c,d;try{try{const v=localStorage.getItem("persist:auth");if(v){const b=JSON.parse(v);let N=JSON.parse(b.token||"null");if(typeof N=="string")try{N=JSON.parse(N)}catch{}}}catch{}const u=localStorage.getItem("schoolId"),h={...e,school:e.school||parseInt(u||"0")};let p=null;try{const v=localStorage.getItem("persist:auth");if(v){const b=JSON.parse(v);if(p=JSON.parse(b.token||"null"),typeof p=="string")try{p=JSON.parse(p)}catch{}}}catch{}const f={headers:p?{Authorization:`Bearer ${p}`}:{}},y=await $t.post(It.TRIPS,h,f),x=((r=y.data)==null?void 0:r.data)||y.data;return{...x,route_name:((n=x.route_details)==null?void 0:n.name)||`Route ${x.route}`,vehicle_registration:((a=x.vehicle_details)==null?void 0:a.license_plate)||`Vehicle ${x.vehicle}`,driver_name:((i=x.driver_details)==null?void 0:i.full_name)||`Driver ${x.driver}`}}catch(u){return u instanceof Os?t(((l=(o=u.response)==null?void 0:o.data)==null?void 0:l.message)||((d=(c=u.response)==null?void 0:c.data)==null?void 0:d.detail)||"Failed to create trip"):t("Failed to create trip")}}),h0=Pt("trips/updateTrip",async({id:e,tripData:t},{rejectWithValue:r})=>{var n,a,i,o,l,c;try{const d=await $t.patch(`${It.TRIPS}${e}/`,t),u=((n=d.data)==null?void 0:n.data)||d.data;return{...u,route_name:((a=u.route_details)==null?void 0:a.name)||`Route ${u.route}`,vehicle_registration:((i=u.vehicle_details)==null?void 0:i.license_plate)||`Vehicle ${u.vehicle}`,driver_name:((o=u.driver_details)==null?void 0:o.full_name)||`Driver ${u.driver}`}}catch(d){return d instanceof Os?r(((c=(l=d.response)==null?void 0:l.data)==null?void 0:c.message)||"Failed to update trip"):r("Failed to update trip")}}),f0=Pt("trips/deleteTrip",async(e,{rejectWithValue:t})=>{var r,n;try{return await $t.delete(`${It.TRIPS}${e}/`),e}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete trip"):t("Failed to delete trip")}}),dU=Qr({name:"trips",initialState:cU,reducers:{clearTripsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(su.pending,t=>{t.loading=!0,t.error=null}).addCase(su.fulfilled,(t,r)=>{t.loading=!1,t.trips=Array.isArray(r.payload)?r.payload:[]}).addCase(su.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch trips"}).addCase(u0.pending,t=>{t.loading=!0,t.error=null}).addCase(u0.fulfilled,(t,r)=>{t.loading=!1,t.trips.push(r.payload)}).addCase(u0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to create trip"}).addCase(h0.pending,t=>{t.loading=!0,t.error=null}).addCase(h0.fulfilled,(t,r)=>{t.loading=!1;const n=t.trips.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.trips[n]=r.payload)}).addCase(h0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update trip"}).addCase(f0.pending,t=>{t.loading=!0,t.error=null}).addCase(f0.fulfilled,(t,r)=>{t.loading=!1,t.trips=t.trips.filter(n=>n.id!==r.payload)}).addCase(f0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete trip"})}}),uU=dU.reducer,hU={grades:[],loading:!1,error:null},m0=Pt("grades/createGrade",async(e,{rejectWithValue:t})=>{var r,n;try{return(await $t.post(It.GRADES,e)).data.data}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create grade"):t("Failed to create grade")}}),Fo=Pt("grades/fetchGrades",async(e,{rejectWithValue:t})=>{var r,n;try{const a=typeof e=="object"?e.schoolId:void 0;let i=It.GRADES;a&&(i+=`?school=${a}`);const o=await $t.get(i);let l;return o.data&&typeof o.data=="object"?Array.isArray(o.data)?l=o.data:o.data.data&&Array.isArray(o.data.data)?l=o.data.data:o.data.results&&Array.isArray(o.data.results)?l=o.data.results:l=[]:l=[],l}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch grades"):t("Failed to fetch grades")}}),p0=Pt("grades/updateGrade",async({id:e,data:t},{rejectWithValue:r})=>{var n,a;try{return(await $t.put(`${It.GRADES}${e}/`,t)).data.data}catch(i){return i instanceof Os?r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update grade"):r("Failed to update grade")}}),x0=Pt("grades/deleteGrade",async(e,{rejectWithValue:t})=>{var r,n;try{return await $t.delete(`${It.GRADES}${e}/`),e}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete grade"):t("Failed to delete grade")}}),fU=Qr({name:"grades",initialState:hU,reducers:{clearGradesError:e=>{e.error=null}},extraReducers:e=>{e.addCase(m0.pending,t=>{t.loading=!0,t.error=null}).addCase(m0.fulfilled,(t,r)=>{t.loading=!1,t.grades.push(r.payload)}).addCase(m0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to create grade"}).addCase(Fo.pending,t=>{t.loading=!0,t.error=null}).addCase(Fo.fulfilled,(t,r)=>{t.loading=!1,t.grades=Array.isArray(r.payload)?r.payload:[]}).addCase(Fo.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch grades"}).addCase(p0.pending,t=>{t.loading=!0,t.error=null}).addCase(p0.fulfilled,(t,r)=>{t.loading=!1;const n=t.grades.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.grades[n]=r.payload)}).addCase(p0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to update grade"}).addCase(x0.pending,t=>{t.loading=!0,t.error=null}).addCase(x0.fulfilled,(t,r)=>{t.loading=!1,t.grades=t.grades.filter(n=>n.id!==r.payload)}).addCase(x0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to delete grade"})}}),mU=fU.reducer,Q2={preferences:{showAnalytics:!0,showRecentActivity:!0,showNotificationsPanel:!0,allowDataExport:!0,autoBackup:!0,theme:"light",language:"en"},loading:!1,error:null},ep=Pt("preferences/fetchUserPreferences",async(e,{rejectWithValue:t})=>{try{const r=localStorage.getItem("userPreferences");if(r)try{return JSON.parse(r)}catch{}return Q2.preferences}catch{return t("Failed to fetch preferences")}}),g0=Pt("preferences/updateUserPreferences",async(e,{rejectWithValue:t})=>{try{const n={...JSON.parse(localStorage.getItem("userPreferences")||"{}"),...e};return localStorage.setItem("userPreferences",JSON.stringify(n)),e}catch{return t("Failed to update preferences")}}),pU=Qr({name:"preferences",initialState:Q2,reducers:{setPreference:(e,t)=>{const{key:r,value:n}=t.payload;e.preferences[r]=n},resetPreferences:e=>{e.preferences=Q2.preferences}},extraReducers:e=>{e.addCase(ep.pending,t=>{t.loading=!0,t.error=null}).addCase(ep.fulfilled,(t,r)=>{t.loading=!1,t.preferences={...t.preferences,...r.payload}}).addCase(ep.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}).addCase(g0.pending,t=>{t.loading=!0,t.error=null}).addCase(g0.fulfilled,(t,r)=>{t.loading=!1,t.preferences={...t.preferences,...r.payload}}).addCase(g0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),xU=pU.reducer,gU={notifications:[],loading:!1,error:null},v0=Pt("notifications/createNotification",async(e,{rejectWithValue:t})=>{var r,n;try{let a=localStorage.getItem("token");if(!a){const d=localStorage.getItem("persist:auth");if(d)try{const u=JSON.parse(d);a=JSON.parse(u.user||"{}").token}catch{}}a&&(a.startsWith('"')&&a.endsWith('"')&&(a=JSON.parse(a)),$t.defaults.headers.common.Authorization=`Bearer ${a}`);const i=localStorage.getItem("schoolId"),o={...e,school:e.school||parseInt(i||"0"),message:e.message||"",notification_type:e.notification_type||"INFO",parents:e.parents||[],drivers:e.drivers||[],is_read:!1},l={headers:a?{Authorization:`Bearer ${a}`}:{}};return(await $t.post(It.NOTIFICATIONS_CREATE,o,l)).data}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create notification"):t("Failed to create notification")}}),$h=Pt("notifications/fetchNotifications",async(e,{rejectWithValue:t})=>{var r,n;try{let a=localStorage.getItem("token");if(!a){const u=localStorage.getItem("persist:auth");if(u)try{const h=JSON.parse(u);a=JSON.parse(h.user||"{}").token}catch{}}a&&(a.startsWith('"')&&a.endsWith('"')&&(a=JSON.parse(a)),$t.defaults.headers.common.Authorization=`Bearer ${a}`);const i=typeof e=="object"?e.schoolId:void 0;let o=It.NOTIFICATIONS;i&&(o+=`?school=${i}`);const l={headers:a?{Authorization:`Bearer ${a}`}:{}},c=await $t.get(o,l);let d;return c.data&&c.data.results?d=c.data.results:c.data&&Array.isArray(c.data)?d=c.data:c.data&&c.data.data&&Array.isArray(c.data.data)?d=c.data.data:d=[],d}catch(a){return a instanceof Os?t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch notifications"):t("Failed to fetch notifications")}}),vU=Qr({name:"notifications",initialState:gU,reducers:{clearNotificationsError:e=>{e.error=null}},extraReducers:e=>{e.addCase(v0.pending,t=>{t.loading=!0,t.error=null}).addCase(v0.fulfilled,(t,r)=>{t.loading=!1,t.notifications.unshift(r.payload)}).addCase(v0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to create notification"}).addCase($h.pending,t=>{t.loading=!0,t.error=null}).addCase($h.fulfilled,(t,r)=>{t.loading=!1,t.notifications=Array.isArray(r.payload)?r.payload:[]}).addCase($h.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch notifications"})}}),yU=vU.reducer,jU={reports:[],metrics:null,pagination:null,filters:{},loading:!1,error:null},vc=Pt("reports/fetchReports",async(e,{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;e.school_id&&a.append("school_id",e.school_id.toString()),e.start_date&&a.append("start_date",e.start_date),e.end_date&&a.append("end_date",e.end_date),e.driver_id&&a.append("driver_id",e.driver_id.toString()),e.route_id&&a.append("route_id",e.route_id.toString()),e.status&&a.append("status",e.status),e.page&&a.append("page",e.page.toString());const i=`${It.REPORTS}?${a.toString()}`;return(await $t.get(i)).data}catch(a){const i=a instanceof Os?((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||a.message:"Failed to fetch reports";return t(i)}}),qA=Qr({name:"reports",initialState:jU,reducers:{clearReports:e=>{e.reports=[],e.metrics=null,e.pagination=null,e.error=null},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={}}},extraReducers:e=>{e.addCase(vc.pending,t=>{t.loading=!0,t.error=null}).addCase(vc.fulfilled,(t,r)=>{t.loading=!1,t.reports=r.payload.results,t.metrics=r.payload.metrics,t.pagination=r.payload.pagination,t.error=null}).addCase(vc.rejected,(t,r)=>{t.loading=!1,t.error=r.payload||"Failed to fetch reports"})}}),{clearFilters:bU}=qA.actions,wU=qA.reducer,NU={plans:[],loading:!1,error:null},Ri=Pt("subscription/fetchPlans",async(e,{rejectWithValue:t})=>{var r,n;try{const a=await $t.get("subscription-plans/");return Array.isArray(a.data)?a.data:((r=a.data)==null?void 0:r.results)||((n=a.data)==null?void 0:n.data)||[]}catch(a){const i=a instanceof Error?a.message:"Failed to fetch subscription plans";return t(i)}}),SU=Qr({name:"subscription",initialState:NU,reducers:{clearSubscription:e=>{e.plans=[],e.error=null}},extraReducers:e=>{e.addCase(Ri.pending,t=>{t.loading=!0,t.error=null}).addCase(Ri.fulfilled,(t,r)=>{t.loading=!1,t.plans=r.payload}).addCase(Ri.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),_U=SU.reducer,CU={messages:[],loading:!1,error:null,creating:!1,updating:!1},y0=Pt("contactMessages/fetchContactMessages",async(e,{rejectWithValue:t})=>{try{const r=await fetch(`${It.CONTACT_MESSAGES}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();let a=n.data||n;return Array.isArray(a)?a:[{id:"1",first_name:"Peter",last_name:"Mwangi",email_address:"p.mwangi@brightfutureschool.co.ke",school_name:"Bright Future Academy",message:"Hello, I'm interested in your Smart Shule platform for our school transport management. We have about 300 students and 5 buses. Could you please provide more information about pricing and implementation timeline? We're particularly interested in the parent notification features and real-time tracking capabilities.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T10:30:00Z"},{id:"2",first_name:"Grace",last_name:"Achieng",email_address:"grace.achieng@educationhub.ac.ke",school_name:"Education Hub International",message:"We would like to schedule a demo of your Smart Shule platform. Our school currently uses manual systems for transport management and we're looking for a comprehensive digital solution. We have 450 students across primary and secondary sections with 8 buses operating daily. Please let us know your availability for a presentation.",message_type:"demo_request",is_read:!0,created_at:"2024-01-14T14:20:00Z",updated_at:"2024-01-15T09:15:00Z"},{id:"3",first_name:"David",last_name:"Ochieng",email_address:"d.ochieng@holyrosaryschool.edu",school_name:"Holy Rosary School",message:"We're experiencing some issues with the GPS tracking on two of our buses. The location updates seem to be delayed by about 10-15 minutes. Could someone from your technical team please assist us? Our subscription is active and this is affecting our parent communication.",message_type:"support_message",is_read:!1,created_at:"2024-01-15T08:15:00Z",updated_at:"2024-01-15T08:15:00Z"},{id:"4",first_name:"Sarah",last_name:"Kamau",email_address:"s.kamau@stmarys.edu",school_name:"St. Mary's Preparatory School",message:"We're considering upgrading to the premium plan. Could you please send us detailed information about the additional features and pricing? We currently have 200 students and 3 buses.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-13T11:45:00Z",updated_at:"2024-01-13T11:45:00Z"},{id:"5",first_name:"Michael",last_name:"Onyango",email_address:"m.onyango@kenyacollege.edu",school_name:"Kenya College",message:"We would like to request a custom integration with our existing student management system. Is this possible with your platform? We need to sync student data automatically.",message_type:"demo_request",is_read:!0,created_at:"2024-01-12T16:30:00Z",updated_at:"2024-01-12T16:30:00Z"}]}catch{return[{id:"1",first_name:"Peter",last_name:"Mwangi",email_address:"p.mwangi@brightfutureschool.co.ke",school_name:"Bright Future Academy",message:"Hello, I'm interested in your Smart Shule platform for our school transport management. We have about 300 students and 5 buses. Could you please provide more information about pricing and implementation timeline? We're particularly interested in the parent notification features and real-time tracking capabilities.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T10:30:00Z"},{id:"2",first_name:"Grace",last_name:"Achieng",email_address:"grace.achieng@educationhub.ac.ke",school_name:"Education Hub International",message:"We would like to schedule a demo of your Smart Shule platform. Our school currently uses manual systems for transport management and we're looking for a comprehensive digital solution. We have 450 students across primary and secondary sections with 8 buses operating daily. Please let us know your availability for a presentation.",message_type:"demo_request",is_read:!0,created_at:"2024-01-14T14:20:00Z",updated_at:"2024-01-15T09:15:00Z"},{id:"3",first_name:"David",last_name:"Ochieng",email_address:"d.ochieng@holyrosaryschool.edu",school_name:"Holy Rosary School",message:"We're experiencing some issues with the GPS tracking on two of our buses. The location updates seem to be delayed by about 10-15 minutes. Could someone from your technical team please assist us? Our subscription is active and this is affecting our parent communication.",message_type:"support_message",is_read:!1,created_at:"2024-01-15T08:15:00Z",updated_at:"2024-01-15T08:15:00Z"},{id:"4",first_name:"Sarah",last_name:"Kamau",email_address:"s.kamau@stmarys.edu",school_name:"St. Mary's Preparatory School",message:"We're considering upgrading to the premium plan. Could you please send us detailed information about the additional features and pricing? We currently have 200 students and 3 buses.",message_type:"inquiry_message",is_read:!1,created_at:"2024-01-13T11:45:00Z",updated_at:"2024-01-13T11:45:00Z"},{id:"5",first_name:"Michael",last_name:"Onyango",email_address:"m.onyango@kenyacollege.edu",school_name:"Kenya College",message:"We would like to request a custom integration with our existing student management system. Is this possible with your platform? We need to sync student data automatically.",message_type:"demo_request",is_read:!0,created_at:"2024-01-12T16:30:00Z",updated_at:"2024-01-12T16:30:00Z"}]}}),tp=Pt("contactMessages/createContactMessage",async(e,{rejectWithValue:t})=>{try{const n=["first_name","last_name","email_address","school_name","message"].filter(p=>{var f;return!((f=e[p])!=null&&f.trim())});if(n.length>0)return t(`Missing required fields: ${n.join(", ")}`);const{message_type:a,...i}=e,o={first_name:i.first_name.trim(),last_name:i.last_name.trim(),email_address:i.email_address.trim(),school_name:i.school_name.trim(),message:i.message.trim()},l=localStorage.getItem("token"),c=o,d={"Content-Type":"application/json"};l&&(d.Authorization=`Bearer ${l}`);const u=await fetch(`${It.CONTACT_MESSAGES}`,{method:"POST",headers:d,body:JSON.stringify(c)}),h=await u.json();if(!u.ok){if(u.status===401&&l){const p=await fetch(`${It.CONTACT_MESSAGES}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),f=await p.json();return p.ok?f.data||f:t(f.message||"Failed to create contact message")}return t(h.message||"Failed to create contact message")}return h.data||h}catch{return t("Failed to create contact message")}}),nb=Pt("contactMessages/updateContactMessage",async({id:e,updateData:t},{rejectWithValue:r})=>{try{const n=await fetch(`${It.CONTACT_MESSAGES}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch{return r("Failed to update contact message")}}),j0=Pt("contactMessages/markAsRead",async(e,{rejectWithValue:t,getState:r})=>{try{const n=await fetch(`${It.CONTACT_MESSAGES}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({is_read:!0})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();if(a.data||a)return a.data||a;const o=r().contactMessages.messages.find(l=>l.id===e);if(o)return{...o,is_read:!0,updated_at:new Date().toISOString()};throw new Error("Message not found")}catch{const i=r().contactMessages.messages.find(o=>o.id===e);return i?{...i,is_read:!0,updated_at:new Date().toISOString()}:t("Failed to mark message as read")}}),ab=Pt("contactMessages/fetchContactMessageById",async(e,{rejectWithValue:t})=>{try{const r=await fetch(`${It.CONTACT_MESSAGES}/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch{return t("Failed to fetch contact message")}}),kU=Qr({name:"contactMessages",initialState:CU,reducers:{clearContactMessagesError:e=>{e.error=null},clearContactMessages:e=>{e.messages=[],e.error=null}},extraReducers:e=>{e.addCase(y0.pending,t=>{t.loading=!0,t.error=null}).addCase(y0.fulfilled,(t,r)=>{t.loading=!1,t.messages=r.payload,t.error=null}).addCase(y0.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(tp.pending,t=>{t.creating=!0,t.error=null}).addCase(tp.fulfilled,(t,r)=>{t.creating=!1,t.messages.unshift(r.payload),t.error=null}).addCase(tp.rejected,(t,r)=>{t.creating=!1,t.error=r.payload}),e.addCase(nb.pending,t=>{t.updating=!0,t.error=null}).addCase(nb.fulfilled,(t,r)=>{t.updating=!1;const n=t.messages.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.messages[n]=r.payload),t.error=null}).addCase(nb.rejected,(t,r)=>{t.updating=!1,t.error=r.payload}),e.addCase(j0.pending,t=>{t.updating=!0,t.error=null}).addCase(j0.fulfilled,(t,r)=>{t.updating=!1;const n=t.messages.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.messages[n]=r.payload),t.error=null}).addCase(j0.rejected,(t,r)=>{t.updating=!1,t.error=r.payload}),e.addCase(ab.pending,t=>{t.loading=!0,t.error=null}).addCase(ab.fulfilled,(t,r)=>{t.loading=!1;const n=t.messages.findIndex(a=>a.id===r.payload.id);n!==-1?t.messages[n]=r.payload:t.messages.unshift(r.payload),t.error=null}).addCase(ab.rejected,(t,r)=>{t.loading=!1,t.error=r.payload})}}),PU=kU.reducer,AU={subscriptions:[],loading:!1,error:null,creating:!1,updating:!1},bl=Pt("schoolSubscriptions/fetchSchoolSubscriptions",async(e,{rejectWithValue:t})=>{var r,n,a;try{const i=await Lf(`${It.SCHOOL_SUBSCRIPTIONS}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!i.ok){const l=await i.json().catch(()=>({}));if(i.status===429||(r=l.detail)!=null&&r.includes("throttled")){const c=((a=(n=l.detail)==null?void 0:n.match(/(\d+) seconds?/))==null?void 0:a[1])||20;throw new Error(`Rate limited. Please wait ${c} seconds before trying again.`)}throw l.message?new Error(l.message):new Error(`HTTP error! status: ${i.status}`)}const o=await i.json();return o.data||o}catch{return t("Failed to fetch school subscriptions")}}),ib=Pt("schoolSubscriptions/fetchSchoolSubscriptionById",async(e,{rejectWithValue:t})=>{try{const r=await fetch(`${It.SCHOOL_SUBSCRIPTIONS}/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch{return t("Failed to fetch school subscription")}}),b0=Pt("schoolSubscriptions/createSchoolSubscription",async(e,{rejectWithValue:t})=>{try{const r=await fetch(`${It.SCHOOL_SUBSCRIPTIONS}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)});if(!r.ok){const a=await r.json();throw new Error(a.message||"Failed to create subscription")}const n=await r.json();return n.data||n}catch{return t("Failed to create school subscription")}}),w0=Pt("schoolSubscriptions/updateSchoolSubscription",async({id:e,updateData:t},{rejectWithValue:r})=>{try{const n=await fetch(`${It.SCHOOL_SUBSCRIPTIONS}${e}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!n.ok){const i=await n.json();throw new Error(i.message||"Failed to update subscription")}const a=await n.json();return a.data||a}catch{return r("Failed to update school subscription")}}),EU=Qr({name:"schoolSubscriptions",initialState:AU,reducers:{clearSchoolSubscriptionsError:e=>{e.error=null},clearSchoolSubscriptions:e=>{e.subscriptions=[],e.error=null}},extraReducers:e=>{e.addCase(bl.pending,t=>{t.loading=!0,t.error=null}).addCase(bl.fulfilled,(t,r)=>{t.loading=!1,t.subscriptions=r.payload,t.error=null}).addCase(bl.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(ib.pending,t=>{t.loading=!0,t.error=null}).addCase(ib.fulfilled,(t,r)=>{t.loading=!1;const n=t.subscriptions.findIndex(a=>a.id===r.payload.id);n!==-1?t.subscriptions[n]=r.payload:t.subscriptions.unshift(r.payload),t.error=null}).addCase(ib.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(b0.pending,t=>{t.creating=!0,t.error=null}).addCase(b0.fulfilled,(t,r)=>{t.creating=!1,t.subscriptions.unshift(r.payload),t.error=null}).addCase(b0.rejected,(t,r)=>{t.creating=!1,t.error=r.payload}),e.addCase(w0.pending,t=>{t.updating=!0,t.error=null}).addCase(w0.fulfilled,(t,r)=>{t.updating=!1;const n=t.subscriptions.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.subscriptions[n]=r.payload),t.error=null}).addCase(w0.rejected,(t,r)=>{t.updating=!1,t.error=r.payload})}}),LU=EU.reducer,TU={invoices:[],loading:!1,error:null,creating:!1,updating:!1},ru=Pt("invoices/fetchInvoices",async(e,{rejectWithValue:t})=>{try{const n=await(await Lf(`${It.INVOICES}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();return n.data||n}catch(r){return t(r instanceof Error?r.message:"Failed to fetch invoices")}}),ob=Pt("invoices/fetchInvoiceById",async(e,{rejectWithValue:t})=>{try{const n=await(await Lf(`${It.INVOICES}/${e}/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();return n.data||n}catch(r){return t(r instanceof Error?r.message:"Failed to fetch invoice")}}),N0=Pt("invoices/createInvoice",async(e,{rejectWithValue:t})=>{try{const n=await(await Lf(`${It.INVOICES}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)})).json();return n.data||n}catch(r){return t(r instanceof Error?r.message:"Failed to create invoice")}}),lb=Pt("invoices/processPayment",async(e,{rejectWithValue:t})=>{try{const n=await(await Lf(`${It.INVOICES}${e.invoice_id}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)})).json();return n.data||n}catch(r){return t(r instanceof Error?r.message:"Failed to process payment")}}),S0=Pt("invoices/updateInvoice",async({id:e,updateData:t},{rejectWithValue:r})=>{try{const a=await(await Lf(`${It.INVOICES}/${e}/`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)})).json();return a.data||a}catch(n){return r(n instanceof Error?n.message:"Failed to update invoice")}}),RU=Qr({name:"invoices",initialState:TU,reducers:{clearInvoicesError:e=>{e.error=null},clearInvoices:e=>{e.invoices=[],e.error=null}},extraReducers:e=>{e.addCase(ru.pending,t=>{t.loading=!0,t.error=null}).addCase(ru.fulfilled,(t,r)=>{t.loading=!1,t.invoices=r.payload,t.error=null}).addCase(ru.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(ob.pending,t=>{t.loading=!0,t.error=null}).addCase(ob.fulfilled,(t,r)=>{t.loading=!1;const n=t.invoices.findIndex(a=>a.id===r.payload.id);n!==-1?t.invoices[n]=r.payload:t.invoices.unshift(r.payload),t.error=null}).addCase(ob.rejected,(t,r)=>{t.loading=!1,t.error=r.payload}),e.addCase(N0.pending,t=>{t.creating=!0,t.error=null}).addCase(N0.fulfilled,(t,r)=>{t.creating=!1,t.invoices.unshift(r.payload),t.error=null}).addCase(N0.rejected,(t,r)=>{t.creating=!1,t.error=r.payload}),e.addCase(lb.pending,t=>{t.updating=!0,t.error=null}).addCase(lb.fulfilled,(t,r)=>{t.updating=!1;const n=t.invoices.findIndex(a=>a.id===r.payload.invoice_id);n!==-1&&(t.invoices[n].status="paid"),t.error=null}).addCase(lb.rejected,(t,r)=>{t.updating=!1,t.error=r.payload}),e.addCase(S0.pending,t=>{t.updating=!0,t.error=null}).addCase(S0.fulfilled,(t,r)=>{t.updating=!1;const n=t.invoices.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.invoices[n]=r.payload),t.error=null}).addCase(S0.rejected,(t,r)=>{t.updating=!1,t.error=r.payload})}}),IU=RU.reducer,FU={key:"auth",storage:m5,whitelist:["user","token","userId"]},DU={key:"routes",storage:m5,whitelist:["routes"]},OU=uA(FU,Cz),MU=uA(DU,Bz),$U={auth:OU,schools:Pz,parents:Lz,drivers:Iz,vehicles:Oz,routes:MU,routeAssignments:qz,staff:Wz,roles:eU,students:rU,profile:iU,overview:lU,trips:uU,grades:mU,preferences:xU,notifications:yU,reports:wU,subscription:_U,contactMessages:PU,schoolSubscriptions:LU,invoices:IU},y5=W9({reducer:$U,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]},immutableCheck:!1}),devTools:!1}),BU=b$(y5);function _0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_0=function(r){return typeof r}:_0=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_0(e)}function zU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qU(e,t,r){return t&&UU(e.prototype,t),e}function VU(e,t){return t&&(_0(t)==="object"||typeof t=="function")?t:C0(e)}function ew(e){return ew=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ew(e)}function C0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tw(e,t)}function tw(e,t){return tw=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},tw(e,t)}function k0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var VA=function(e){HU(t,e);function t(){var r,n;zU(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=VU(this,(r=ew(t)).call.apply(r,[this].concat(i))),k0(C0(n),"state",{bootstrapped:!1}),k0(C0(n),"_unsubscribe",void 0),k0(C0(n),"handlePersistorState",function(){var l=n.props.persistor,c=l.getState(),d=c.bootstrapped;d&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return qU(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(g.PureComponent);k0(VA,"defaultProps",{children:null,loading:null});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HA=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...GU,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:HA("lucide",a),...l},[...o.map(([d,u])=>g.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=(e,t)=>{const r=g.forwardRef(({className:n,...a},i)=>g.createElement(KU,{ref:i,iconNode:t,className:HA(`lucide-${WU(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=ft("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=ft("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=ft("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=ft("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=ft("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=ft("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=ft("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=ft("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=ft("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ft("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ft("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=ft("ChartBar",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=ft("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=ft("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=ft("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=ft("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=ft("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=ft("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=ft("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=ft("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=ft("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ft("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ft("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=ft("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=ft("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=ft("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ft("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=ft("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=ft("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=ft("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=ft("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ft("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=ft("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=ft("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ft("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ft("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=ft("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=ft("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=ft("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=ft("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=ft("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=ft("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=ft("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=ft("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=ft("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=ft("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=ft("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=ft("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=ft("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=ft("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=ft("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=ft("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=ft("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=ft("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=ft("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=ft("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=ft("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=ft("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=ft("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=ft("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=ft("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=ft("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=ft("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=ft("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=ft("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=ft("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=ft("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=ft("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=ft("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=ft("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ft("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=ft("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=ft("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ft("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=ft("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=ft("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=ft("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=ft("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=ft("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=ft("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=ft("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ft("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=ft("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=ft("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=ft("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=ft("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=ft("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ft("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ft("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=ft("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=ft("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),yq=()=>s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ba,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{children:"Loading application..."})]})});function jq({children:e}){return s.jsx(h9,{store:y5,children:s.jsx(VA,{loading:s.jsx(yq,{}),persistor:BU,children:e})})}const er=()=>zl(),Ct=ca,tE=g.createContext(void 0),w5=()=>{const e=g.useContext(tE);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},bq=({children:e})=>{const t=er(),{preferences:r}=Ct(u=>u.preferences),[n,a]=g.useState(!1),i=()=>r.theme==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":r.theme,o=u=>{const h=document.documentElement;a(u==="dark"),u==="dark"?(h.classList.add("dark"),h.setAttribute("data-theme","dark")):(h.classList.remove("dark"),h.setAttribute("data-theme","light"))},l=async u=>{if(await t(g0({theme:u})),u==="auto"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches;o(h?"dark":"light")}else o(u)},c=()=>{const u=r.theme;let h;u==="auto"?h=window.matchMedia("(prefers-color-scheme: dark)").matches?"light":"dark":u==="light"?h="dark":h="light",l(h)};g.useEffect(()=>{if(r.theme==="auto"){const u=window.matchMedia("(prefers-color-scheme: dark)"),h=()=>{o(i())};return u.addEventListener("change",h),()=>u.removeEventListener("change",h)}},[r.theme]),g.useEffect(()=>{o(i())},[r.theme]),g.useEffect(()=>{o(i())},[]);const d={theme:r.theme,isDark:n,setTheme:l,toggleTheme:c};return s.jsx(tE.Provider,{value:d,children:e})};function h3(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Pl(...e){return t=>{let r=!1;const n=e.map(a=>{const i=h3(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():h3(e[a],null)}}}}function _s(...e){return g.useCallback(Pl(...e),e)}function td(e){const t=wq(e),r=g.forwardRef((n,a)=>{const{children:i,...o}=n,l=g.Children.toArray(i),c=l.find(Nq);if(c){const d=c.props.children,u=l.map(h=>h===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:a,children:g.isValidElement(d)?g.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var wu=td("Slot");function wq(e){const t=g.forwardRef((r,n)=>{const{children:a,...i}=r;if(g.isValidElement(a)){const o=_q(a),l=Sq(i,a.props);return a.type!==g.Fragment&&(l.ref=n?Pl(n,o):o),g.cloneElement(a,l)}return g.Children.count(a)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var sE=Symbol("radix.slottable");function rE(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=sE,t}function Nq(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===sE}function Sq(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function _q(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function nE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=nE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function aE(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=nE(e))&&(n&&(n+=" "),n+=t);return n}const f3=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,m3=aE,Nu=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return m3(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],h=i==null?void 0:i[d];if(u===null)return null;const p=f3(u)||f3(h);return a[d][p]}),l=r&&Object.entries(r).reduce((d,u)=>{let[h,p]=u;return p===void 0||(d[h]=p),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:p,...f}=u;return Object.entries(f).every(y=>{let[x,w]=y;return Array.isArray(w)?w.includes({...i,...l}[x]):{...i,...l}[x]===w})?[...d,h,p]:d},[]);return m3(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},N5="-",Cq=e=>{const t=Pq(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(N5);return l[0]===""&&l.length!==1&&l.shift(),iE(l,t)||kq(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},iE=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?iE(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(N5);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},p3=/^\[(.+)\]$/,kq=e=>{if(p3.test(e)){const t=p3.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Pq=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Eq(Object.entries(e.classGroups),r).forEach(([i,o])=>{iw(o,n,i,t)}),n},iw=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:x3(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(Aq(a)){iw(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{iw(o,x3(t,i),r,n)})})},x3=(e,t)=>{let r=e;return t.split(N5).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Aq=e=>e.isThemeGetter,Eq=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,Lq=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},oE="!",Tq=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let w=0;w<l.length;w++){let v=l[w];if(d===0){if(v===a&&(n||l.slice(w,w+i)===t)){c.push(l.slice(u,w)),u=w+i;continue}if(v==="/"){h=w;continue}}v==="["?d++:v==="]"&&d--}const p=c.length===0?l:l.substring(u),f=p.startsWith(oE),y=f?p.substring(1):p,x=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:o}):o},Rq=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Iq=e=>({cache:Lq(e.cacheSize),parseClassName:Tq(e),...Cq(e)}),Fq=/\s+/,Dq=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(Fq);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=r(d);let y=!!f,x=n(y?p.substring(0,f):p);if(!x){if(!y){l=d+(l.length>0?" "+l:l);continue}if(x=n(p),!x){l=d+(l.length>0?" "+l:l);continue}y=!1}const w=Rq(u).join(":"),v=h?w+oE:w,b=v+x;if(i.includes(b))continue;i.push(b);const N=a(x,y);for(let C=0;C<N.length;++C){const P=N[C];i.push(v+P)}l=d+(l.length>0?" "+l:l)}return l};function Oq(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=lE(t))&&(n&&(n+=" "),n+=r);return n}const lE=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=lE(e[n]))&&(r&&(r+=" "),r+=t);return r};function Mq(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return r=Iq(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=Dq(c,r);return a(c,u),u}return function(){return i(Oq.apply(null,arguments))}}const br=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},cE=/^\[(?:([a-z-]+):)?(.+)\]$/i,$q=/^\d+\/\d+$/,Bq=new Set(["px","full","screen"]),zq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Uq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Vq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Hq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,cl=e=>Bh(e)||Bq.has(e)||$q.test(e),ic=e=>Tf(e,"length",Qq),Bh=e=>!!e&&!Number.isNaN(Number(e)),hb=e=>Tf(e,"number",Bh),wm=e=>!!e&&Number.isInteger(Number(e)),Wq=e=>e.endsWith("%")&&Bh(e.slice(0,-1)),gs=e=>cE.test(e),oc=e=>zq.test(e),Gq=new Set(["length","size","percentage"]),Kq=e=>Tf(e,Gq,dE),Yq=e=>Tf(e,"position",dE),Jq=new Set(["image","url"]),Zq=e=>Tf(e,Jq,tV),Xq=e=>Tf(e,"",eV),Nm=()=>!0,Tf=(e,t,r)=>{const n=cE.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Qq=e=>Uq.test(e)&&!qq.test(e),dE=()=>!1,eV=e=>Vq.test(e),tV=e=>Hq.test(e),sV=()=>{const e=br("colors"),t=br("spacing"),r=br("blur"),n=br("brightness"),a=br("borderColor"),i=br("borderRadius"),o=br("borderSpacing"),l=br("borderWidth"),c=br("contrast"),d=br("grayscale"),u=br("hueRotate"),h=br("invert"),p=br("gap"),f=br("gradientColorStops"),y=br("gradientColorStopPositions"),x=br("inset"),w=br("margin"),v=br("opacity"),b=br("padding"),N=br("saturate"),C=br("scale"),P=br("sepia"),D=br("skew"),R=br("space"),A=br("translate"),I=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",gs,t],E=()=>[gs,t],$=()=>["",cl,ic],U=()=>["auto",Bh,gs],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",gs],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[Bh,gs];return{cacheSize:500,separator:":",theme:{colors:[Nm],spacing:[cl,ic],blur:["none","",oc,gs],brightness:Y(),borderColor:[e],borderRadius:["none","","full",oc,gs],borderSpacing:E(),borderWidth:$(),contrast:Y(),grayscale:J(),hueRotate:Y(),invert:J(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[Wq,ic],inset:F(),margin:F(),opacity:Y(),padding:E(),saturate:Y(),scale:Y(),sepia:J(),skew:Y(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",gs]}],container:["container"],columns:[{columns:[oc]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),gs]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wm,gs]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gs]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",wm,gs]}],"grid-cols":[{"grid-cols":[Nm]}],"col-start-end":[{col:["auto",{span:["full",wm,gs]},gs]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Nm]}],"row-start-end":[{row:["auto",{span:[wm,gs]},gs]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gs]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gs]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...Q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gs,t]}],"min-w":[{"min-w":[gs,t,"min","max","fit"]}],"max-w":[{"max-w":[gs,t,"none","full","min","max","fit","prose",{screen:[oc]},oc]}],h:[{h:[gs,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gs,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gs,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gs,t,"auto","min","max","fit"]}],"font-size":[{text:["base",oc,ic]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",hb]}],"font-family":[{font:[Nm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gs]}],"line-clamp":[{"line-clamp":["none",Bh,hb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",cl,gs]}],"list-image":[{"list-image":["none",gs]}],"list-style-type":[{list:["none","disc","decimal",gs]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",cl,ic]}],"underline-offset":[{"underline-offset":["auto",cl,gs]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gs]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gs]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),Yq]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Kq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Zq]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:re()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[cl,gs]}],"outline-w":[{outline:[cl,ic]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[cl,ic]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",oc,Xq]}],"shadow-color":[{shadow:[Nm]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...pe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":pe()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",oc,gs]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[N]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gs]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",gs]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",gs]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[wm,gs]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gs]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gs]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gs]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[cl,ic,hb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},rV=Mq(sV);function it(...e){return rV(aE(e))}const S5=Nu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ce=g.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?wu:"button";return s.jsx(o,{className:it(S5({variant:t,size:r,className:e})),ref:i,...a})});ce.displayName="Button";const Ie=g.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:it("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Ie.displayName="Input";const Le=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:it("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Le.displayName="Card";const Be=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:it("flex flex-col space-y-1.5 p-6",e),...t}));Be.displayName="CardHeader";const Ue=g.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:it("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ue.displayName="CardTitle";const ys=g.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:it("text-sm text-muted-foreground",e),...t}));ys.displayName="CardDescription";const Te=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:it("p-6 pt-0",e),...t}));Te.displayName="CardContent";const _5=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:it("flex items-center p-6 pt-0",e),...t}));_5.displayName="CardFooter";var nV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mt=nV.reduce((e,t)=>{const r=td(`Primitive.${t}`),n=g.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function C5(e,t){e&&pd.flushSync(()=>e.dispatchEvent(t))}var aV="Label",uE=g.forwardRef((e,t)=>s.jsx(Mt.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));uE.displayName=aV;var hE=uE;const iV=Nu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ne=g.forwardRef(({className:e,...t},r)=>s.jsx(hE,{ref:r,className:it(iV(),e),...t}));ne.displayName=hE.displayName;const oV=Nu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Wc=g.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:it(oV({variant:t}),e),...r}));Wc.displayName="Alert";const lV=g.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:it("mb-1 font-medium leading-none tracking-tight",e),...t}));lV.displayName="AlertTitle";const Gc=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:it("text-sm [&_p]:leading-relaxed",e),...t}));Gc.displayName="AlertDescription";function gt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function cV(e,t){const r=g.createContext(t),n=i=>{const{children:o,...l}=i,c=g.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=g.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function _a(e,t=[]){let r=[];function n(i,o){const l=g.createContext(o),c=r.length;r=[...r,o];const d=h=>{var v;const{scope:p,children:f,...y}=h,x=((v=p==null?void 0:p[e])==null?void 0:v[c])||l,w=g.useMemo(()=>y,Object.values(y));return s.jsx(x.Provider,{value:w,children:f})};d.displayName=i+"Provider";function u(h,p){var x;const f=((x=p==null?void 0:p[e])==null?void 0:x[c])||l,y=g.useContext(f);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,dV(a,...t)]}function dV(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var qn=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},uV=tN[" useId ".trim().toString()]||(()=>{}),hV=0;function Pn(e){const[t,r]=g.useState(uV());return qn(()=>{r(n=>n??String(hV++))},[e]),t?`radix-${t}`:""}var fV=tN[" useInsertionEffect ".trim().toString()]||qn;function fo({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=mV({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const u=g.useRef(e!==void 0);g.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=g.useCallback(u=>{var h;if(l){const p=pV(u)?u(e):u;p!==e&&((h=o.current)==null||h.call(o,p))}else i(u)},[l,e,i,o]);return[c,d]}function mV({defaultProp:e,onChange:t}){const[r,n]=g.useState(e),a=g.useRef(r),i=g.useRef(t);return fV(()=>{i.current=t},[t]),g.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function pV(e){return typeof e=="function"}function Wa(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function xV(e,t=globalThis==null?void 0:globalThis.document){const r=Wa(e);g.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var gV="DismissableLayer",ow="dismissableLayer.update",vV="dismissableLayer.pointerDownOutside",yV="dismissableLayer.focusOutside",g3,fE=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Su=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=g.useContext(fE),[u,h]=g.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=g.useState({}),y=_s(t,R=>h(R)),x=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(w),b=u?x.indexOf(u):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,C=b>=v,P=bV(R=>{const A=R.target,I=[...d.branches].some(O=>O.contains(A));!C||I||(a==null||a(R),o==null||o(R),R.defaultPrevented||l==null||l())},p),D=wV(R=>{const A=R.target;[...d.branches].some(O=>O.contains(A))||(i==null||i(R),o==null||o(R),R.defaultPrevented||l==null||l())},p);return xV(R=>{b===d.layers.size-1&&(n==null||n(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},p),g.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(g3=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),v3(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=g3)}},[u,p,r,d]),g.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),v3())},[u,d]),g.useEffect(()=>{const R=()=>f({});return document.addEventListener(ow,R),()=>document.removeEventListener(ow,R)},[]),s.jsx(Mt.div,{...c,ref:y,style:{pointerEvents:N?C?"auto":"none":void 0,...e.style},onFocusCapture:gt(e.onFocusCapture,D.onFocusCapture),onBlurCapture:gt(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:gt(e.onPointerDownCapture,P.onPointerDownCapture)})});Su.displayName=gV;var jV="DismissableLayerBranch",mE=g.forwardRef((e,t)=>{const r=g.useContext(fE),n=g.useRef(null),a=_s(t,n);return g.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Mt.div,{...e,ref:a})});mE.displayName=jV;function bV(e,t=globalThis==null?void 0:globalThis.document){const r=Wa(e),n=g.useRef(!1),a=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){pE(vV,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function wV(e,t=globalThis==null?void 0:globalThis.document){const r=Wa(e),n=g.useRef(!1);return g.useEffect(()=>{const a=i=>{i.target&&!n.current&&pE(yV,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function v3(){const e=new CustomEvent(ow);document.dispatchEvent(e)}function pE(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?C5(a,i):a.dispatchEvent(i)}var NV=Su,SV=mE,fb="focusScope.autoFocusOnMount",mb="focusScope.autoFocusOnUnmount",y3={bubbles:!1,cancelable:!0},_V="FocusScope",Xp=g.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=g.useState(null),d=Wa(a),u=Wa(i),h=g.useRef(null),p=_s(t,x=>c(x)),f=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(n){let x=function(N){if(f.paused||!l)return;const C=N.target;l.contains(C)?h.current=C:dc(h.current,{select:!0})},w=function(N){if(f.paused||!l)return;const C=N.relatedTarget;C!==null&&(l.contains(C)||dc(h.current,{select:!0}))},v=function(N){if(document.activeElement===document.body)for(const P of N)P.removedNodes.length>0&&dc(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",w);const b=new MutationObserver(v);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",w),b.disconnect()}}},[n,l,f.paused]),g.useEffect(()=>{if(l){b3.add(f);const x=document.activeElement;if(!l.contains(x)){const v=new CustomEvent(fb,y3);l.addEventListener(fb,d),l.dispatchEvent(v),v.defaultPrevented||(CV(LV(xE(l)),{select:!0}),document.activeElement===x&&dc(l))}return()=>{l.removeEventListener(fb,d),setTimeout(()=>{const v=new CustomEvent(mb,y3);l.addEventListener(mb,u),l.dispatchEvent(v),v.defaultPrevented||dc(x??document.body,{select:!0}),l.removeEventListener(mb,u),b3.remove(f)},0)}}},[l,d,u,f]);const y=g.useCallback(x=>{if(!r&&!n||f.paused)return;const w=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,v=document.activeElement;if(w&&v){const b=x.currentTarget,[N,C]=kV(b);N&&C?!x.shiftKey&&v===C?(x.preventDefault(),r&&dc(N,{select:!0})):x.shiftKey&&v===N&&(x.preventDefault(),r&&dc(C,{select:!0})):v===b&&x.preventDefault()}},[r,n,f.paused]);return s.jsx(Mt.div,{tabIndex:-1,...o,ref:p,onKeyDown:y})});Xp.displayName=_V;function CV(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(dc(n,{select:t}),document.activeElement!==r)return}function kV(e){const t=xE(e),r=j3(t,e),n=j3(t.reverse(),e);return[r,n]}function xE(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function j3(e,t){for(const r of e)if(!PV(r,{upTo:t}))return r}function PV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function AV(e){return e instanceof HTMLInputElement&&"select"in e}function dc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&AV(e)&&t&&e.select()}}var b3=EV();function EV(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=w3(e,t),e.unshift(t)},remove(t){var r;e=w3(e,t),(r=e[0])==null||r.resume()}}}function w3(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function LV(e){return e.filter(t=>t.tagName!=="A")}var TV="Portal",Rf=g.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=g.useState(!1);qn(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?jO.createPortal(s.jsx(Mt.div,{...n,ref:t}),o):null});Rf.displayName=TV;function RV(e,t){return g.useReducer((r,n)=>t[r][n]??r,e)}var Ga=e=>{const{present:t,children:r}=e,n=IV(t),a=typeof r=="function"?r({present:n.isPresent}):g.Children.only(r),i=_s(n.ref,FV(a));return typeof r=="function"||n.isPresent?g.cloneElement(a,{ref:i}):null};Ga.displayName="Presence";function IV(e){const[t,r]=g.useState(),n=g.useRef(null),a=g.useRef(e),i=g.useRef("none"),o=e?"mounted":"unmounted",[l,c]=RV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=hg(n.current);i.current=l==="mounted"?d:"none"},[l]),qn(()=>{const d=n.current,u=a.current;if(u!==e){const p=i.current,f=hg(d);e?c("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&p!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),qn(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=f=>{const x=hg(n.current).includes(f.animationName);if(f.target===t&&x&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=f=>{f.target===t&&(i.current=hg(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function hg(e){return(e==null?void 0:e.animationName)||"none"}function FV(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var pb=0;function $y(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??N3()),document.body.insertAdjacentElement("beforeend",e[1]??N3()),pb++,()=>{pb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),pb--}},[])}function N3(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Do=function(){return Do=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Do.apply(this,arguments)};function gE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function DV(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var P0="right-scroll-bar-position",A0="width-before-scroll-bar",OV="with-scroll-bars-hidden",MV="--removed-body-scroll-bar-size";function xb(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function $V(e,t){var r=g.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var BV=typeof window<"u"?g.useLayoutEffect:g.useEffect,S3=new WeakMap;function zV(e,t){var r=$V(null,function(n){return e.forEach(function(a){return xb(a,n)})});return BV(function(){var n=S3.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||xb(l,null)}),i.forEach(function(l){a.has(l)||xb(l,o)})}S3.set(r,e)},[e]),r}function UV(e){return e}function qV(e,t){t===void 0&&(t=UV);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function VV(e){e===void 0&&(e={});var t=qV(null);return t.options=Do({async:!0,ssr:!1},e),t}var vE=function(e){var t=e.sideCar,r=gE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return g.createElement(n,Do({},r))};vE.isSideCarExport=!0;function HV(e,t){return e.useMedium(t),vE}var yE=VV(),gb=function(){},By=g.forwardRef(function(e,t){var r=g.useRef(null),n=g.useState({onScrollCapture:gb,onWheelCapture:gb,onTouchMoveCapture:gb}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,p=e.sideCar,f=e.noRelative,y=e.noIsolation,x=e.inert,w=e.allowPinchZoom,v=e.as,b=v===void 0?"div":v,N=e.gapMode,C=gE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=p,D=zV([r,t]),R=Do(Do({},C),a);return g.createElement(g.Fragment,null,u&&g.createElement(P,{sideCar:yE,removeScrollBar:d,shards:h,noRelative:f,noIsolation:y,inert:x,setCallbacks:i,allowPinchZoom:!!w,lockRef:r,gapMode:N}),o?g.cloneElement(g.Children.only(l),Do(Do({},R),{ref:D})):g.createElement(b,Do({},R,{className:c,ref:D}),l))});By.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};By.classNames={fullWidth:A0,zeroRight:P0};var WV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function GV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=WV();return t&&e.setAttribute("nonce",t),e}function KV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function YV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var JV=function(){var e=0,t=null;return{add:function(r){e==0&&(t=GV())&&(KV(t,r),YV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ZV=function(){var e=JV();return function(t,r){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},jE=function(){var e=ZV(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},XV={left:0,top:0,right:0,gap:0},vb=function(e){return parseInt(e||"",10)||0},QV=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[vb(r),vb(n),vb(a)]},eH=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return XV;var t=QV(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},tH=jE(),zh="data-scroll-locked",sH=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(OV,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(zh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(P0,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(A0,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(P0," .").concat(P0,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(A0," .").concat(A0,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(zh,`] {
    `).concat(MV,": ").concat(l,`px;
  }
`)},_3=function(){var e=parseInt(document.body.getAttribute(zh)||"0",10);return isFinite(e)?e:0},rH=function(){g.useEffect(function(){return document.body.setAttribute(zh,(_3()+1).toString()),function(){var e=_3()-1;e<=0?document.body.removeAttribute(zh):document.body.setAttribute(zh,e.toString())}},[])},nH=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;rH();var i=g.useMemo(function(){return eH(a)},[a]);return g.createElement(tH,{styles:sH(i,!t,a,r?"":"!important")})},lw=!1;if(typeof window<"u")try{var fg=Object.defineProperty({},"passive",{get:function(){return lw=!0,!0}});window.addEventListener("test",fg,fg),window.removeEventListener("test",fg,fg)}catch{lw=!1}var Qu=lw?{passive:!1}:!1,aH=function(e){return e.tagName==="TEXTAREA"},bE=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!aH(e)&&r[t]==="visible")},iH=function(e){return bE(e,"overflowY")},oH=function(e){return bE(e,"overflowX")},C3=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=wE(e,n);if(a){var i=NE(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},lH=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},cH=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},wE=function(e,t){return e==="v"?iH(t):oH(t)},NE=function(e,t){return e==="v"?lH(t):cH(t)},dH=function(e,t){return e==="h"&&t==="rtl"?-1:1},uH=function(e,t,r,n,a){var i=dH(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),d=!1,u=o>0,h=0,p=0;do{if(!l)break;var f=NE(e,l),y=f[0],x=f[1],w=f[2],v=x-w-i*y;(y||v)&&wE(e,l)&&(h+=v,p+=y);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(h)<1||!u&&Math.abs(p)<1)&&(d=!0),d},mg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},k3=function(e){return[e.deltaX,e.deltaY]},P3=function(e){return e&&"current"in e?e.current:e},hH=function(e,t){return e[0]===t[0]&&e[1]===t[1]},fH=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},mH=0,eh=[];function pH(e){var t=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),a=g.useState(mH++)[0],i=g.useState(jE)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=DV([e.lockRef.current],(e.shards||[]).map(P3),!0).filter(Boolean);return x.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(x,w){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var v=mg(x),b=r.current,N="deltaX"in x?x.deltaX:b[0]-v[0],C="deltaY"in x?x.deltaY:b[1]-v[1],P,D=x.target,R=Math.abs(N)>Math.abs(C)?"h":"v";if("touches"in x&&R==="h"&&D.type==="range")return!1;var A=C3(R,D);if(!A)return!0;if(A?P=R:(P=R==="v"?"h":"v",A=C3(R,D)),!A)return!1;if(!n.current&&"changedTouches"in x&&(N||C)&&(n.current=P),!P)return!0;var I=n.current||P;return uH(I,w,x,I==="h"?N:C)},[]),c=g.useCallback(function(x){var w=x;if(!(!eh.length||eh[eh.length-1]!==i)){var v="deltaY"in w?k3(w):mg(w),b=t.current.filter(function(P){return P.name===w.type&&(P.target===w.target||w.target===P.shadowParent)&&hH(P.delta,v)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var N=(o.current.shards||[]).map(P3).filter(Boolean).filter(function(P){return P.contains(w.target)}),C=N.length>0?l(w,N[0]):!o.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),d=g.useCallback(function(x,w,v,b){var N={name:x,delta:w,target:v,should:b,shadowParent:xH(v)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(C){return C!==N})},1)},[]),u=g.useCallback(function(x){r.current=mg(x),n.current=void 0},[]),h=g.useCallback(function(x){d(x.type,k3(x),x.target,l(x,e.lockRef.current))},[]),p=g.useCallback(function(x){d(x.type,mg(x),x.target,l(x,e.lockRef.current))},[]);g.useEffect(function(){return eh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Qu),document.addEventListener("touchmove",c,Qu),document.addEventListener("touchstart",u,Qu),function(){eh=eh.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,Qu),document.removeEventListener("touchmove",c,Qu),document.removeEventListener("touchstart",u,Qu)}},[]);var f=e.removeScrollBar,y=e.inert;return g.createElement(g.Fragment,null,y?g.createElement(i,{styles:fH(a)}):null,f?g.createElement(nH,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function xH(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const gH=HV(yE,pH);var Qp=g.forwardRef(function(e,t){return g.createElement(By,Do({},e,{ref:t,sideCar:gH}))});Qp.classNames=By.classNames;var vH=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},th=new WeakMap,pg=new WeakMap,xg={},yb=0,SE=function(e){return e&&(e.host||SE(e.parentNode))},yH=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=SE(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},jH=function(e,t,r,n){var a=yH(t,Array.isArray(e)?e:[e]);xg[r]||(xg[r]=new WeakMap);var i=xg[r],o=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))u(p);else try{var f=p.getAttribute(n),y=f!==null&&f!=="false",x=(th.get(p)||0)+1,w=(i.get(p)||0)+1;th.set(p,x),i.set(p,w),o.push(p),x===1&&y&&pg.set(p,!0),w===1&&p.setAttribute(r,"true"),y||p.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return u(t),l.clear(),yb++,function(){o.forEach(function(h){var p=th.get(h)-1,f=i.get(h)-1;th.set(h,p),i.set(h,f),p||(pg.has(h)||h.removeAttribute(n),pg.delete(h)),f||h.removeAttribute(r)}),yb--,yb||(th=new WeakMap,th=new WeakMap,pg=new WeakMap,xg={})}},zy=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=vH(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),jH(n,a,r,"aria-hidden")):function(){return null}},Uy="Dialog",[_E,CE]=_a(Uy),[bH,go]=_E(Uy),kE=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=g.useRef(null),c=g.useRef(null),[d,u]=fo({prop:n,defaultProp:a??!1,onChange:i,caller:Uy});return s.jsx(bH,{scope:t,triggerRef:l,contentRef:c,contentId:Pn(),titleId:Pn(),descriptionId:Pn(),open:d,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};kE.displayName=Uy;var PE="DialogTrigger",AE=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=go(PE,r),i=_s(t,a.triggerRef);return s.jsx(Mt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":A5(a.open),...n,ref:i,onClick:gt(e.onClick,a.onOpenToggle)})});AE.displayName=PE;var k5="DialogPortal",[wH,EE]=_E(k5,{forceMount:void 0}),LE=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=go(k5,t);return s.jsx(wH,{scope:t,forceMount:r,children:g.Children.map(n,o=>s.jsx(Ga,{present:r||i.open,children:s.jsx(Rf,{asChild:!0,container:a,children:o})}))})};LE.displayName=k5;var jv="DialogOverlay",TE=g.forwardRef((e,t)=>{const r=EE(jv,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=go(jv,e.__scopeDialog);return i.modal?s.jsx(Ga,{present:n||i.open,children:s.jsx(SH,{...a,ref:t})}):null});TE.displayName=jv;var NH=td("DialogOverlay.RemoveScroll"),SH=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=go(jv,r);return s.jsx(Qp,{as:NH,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Mt.div,{"data-state":A5(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),fu="DialogContent",RE=g.forwardRef((e,t)=>{const r=EE(fu,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=go(fu,e.__scopeDialog);return s.jsx(Ga,{present:n||i.open,children:i.modal?s.jsx(_H,{...a,ref:t}):s.jsx(CH,{...a,ref:t})})});RE.displayName=fu;var _H=g.forwardRef((e,t)=>{const r=go(fu,e.__scopeDialog),n=g.useRef(null),a=_s(t,r.contentRef,n);return g.useEffect(()=>{const i=n.current;if(i)return zy(i)},[]),s.jsx(IE,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:gt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:gt(e.onFocusOutside,i=>i.preventDefault())})}),CH=g.forwardRef((e,t)=>{const r=go(fu,e.__scopeDialog),n=g.useRef(!1),a=g.useRef(!1);return s.jsx(IE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),IE=g.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=go(fu,r),c=g.useRef(null),d=_s(t,c);return $y(),s.jsxs(s.Fragment,{children:[s.jsx(Xp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Su,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":A5(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(PH,{titleId:l.titleId}),s.jsx(EH,{contentRef:c,descriptionId:l.descriptionId})]})]})}),P5="DialogTitle",FE=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=go(P5,r);return s.jsx(Mt.h2,{id:a.titleId,...n,ref:t})});FE.displayName=P5;var DE="DialogDescription",OE=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=go(DE,r);return s.jsx(Mt.p,{id:a.descriptionId,...n,ref:t})});OE.displayName=DE;var ME="DialogClose",$E=g.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=go(ME,r);return s.jsx(Mt.button,{type:"button",...n,ref:t,onClick:gt(e.onClick,()=>a.onOpenChange(!1))})});$E.displayName=ME;function A5(e){return e?"open":"closed"}var BE="DialogTitleWarning",[kH,zE]=cV(BE,{contentName:fu,titleName:P5,docsSlug:"dialog"}),PH=({titleId:e})=>{const t=zE(BE),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},AH="DialogDescriptionWarning",EH=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zE(AH).contentName}}.`;return g.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},E5=kE,UE=AE,L5=LE,qy=TE,Vy=RE,T5=FE,R5=OE,I5=$E;const js=E5,mu=UE,LH=L5,qE=g.forwardRef(({className:e,...t},r)=>s.jsx(qy,{ref:r,className:it("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));qE.displayName=qy.displayName;const ps=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(LH,{children:[s.jsx(qE,{}),s.jsxs(Vy,{ref:n,className:it("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(I5,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(co,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ps.displayName=Vy.displayName;const bs=({className:e,...t})=>s.jsx("div",{className:it("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});bs.displayName="DialogHeader";const so=({className:e,...t})=>s.jsx("div",{className:it("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});so.displayName="DialogFooter";const xs=g.forwardRef(({className:e,...t},r)=>s.jsx(T5,{ref:r,className:it("text-lg font-semibold leading-none tracking-tight",e),...t}));xs.displayName=T5.displayName;const bn=g.forwardRef(({className:e,...t},r)=>s.jsx(R5,{ref:r,className:it("text-sm text-muted-foreground",e),...t}));bn.displayName=R5.displayName;const TH=Nu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pe({className:e,variant:t,...r}){return s.jsx("div",{className:it(TH({variant:t}),e),...r})}const RH=({isOpen:e,onClose:t})=>{const r=()=>{window.open("/subscription-selection","_blank")},n=()=>{window.open("mailto:support@eujimsolutions.com?subject=Subscription Activation Request","_blank")},a=()=>{window.open("tel:+254113281424","_blank")};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs(bs,{className:"flex-shrink-0",children:[s.jsxs(xs,{className:"flex items-center gap-2 text-lg",children:[s.jsx(jr,{className:"h-5 w-5 text-emerald-600"}),"Subscription Activation Required"]}),s.jsx(bn,{className:"text-sm",children:"Your school subscription is currently inactive. Please activate your subscription to access the LuxCab Admin Dashboard."})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:[s.jsx(Le,{className:"border-red-200 bg-red-50",children:s.jsx(Te,{className:"p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(Pe,{variant:"destructive",className:"text-xs",children:"Subscription Inactive"})}),s.jsx("p",{className:"text-xs text-red-700",children:"Account access is currently disabled"})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs(ce,{onClick:r,className:"bg-emerald-600 hover:bg-emerald-700 h-10",children:[s.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Activate Subscription"]}),s.jsxs(ce,{variant:"outline",onClick:n,className:"h-10",children:[s.jsx(iq,{className:"mr-2 h-4 w-4"}),"Contact Support"]})]}),s.jsx(Le,{children:s.jsxs(Te,{className:"p-3",children:[s.jsxs("h4",{className:"font-semibold text-base mb-2 flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4 text-emerald-600"}),"Contact Information"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(pr,{className:"h-4 w-4 text-gray-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Head Office"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Gesora Road, Utawala, Nairobi"})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(va,{className:"h-4 w-4 text-gray-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Email Support"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Inquiry:"})," ",s.jsx("a",{href:"mailto:info@shuletrack.com ",className:"text-emerald-600 hover:underline",children:"info@shuletrack.com"})]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Support:"})," ",s.jsx("a",{href:"mailto:support@shuletrack.com",className:"text-emerald-600 hover:underline",children:"support@shuletrack.com"})]})]})]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Va,{className:"h-4 w-4 text-gray-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Phone Support"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs text-gray-600",children:s.jsx("a",{href:"tel:+254113281424",className:"text-emerald-600 hover:underline",children:"+254 113281424"})}),s.jsx("p",{className:"text-xs text-gray-600",children:s.jsx("a",{href:"tel:+254718099959",className:"text-emerald-600 hover:underline",children:"+254 718099959"})})]})]})]})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(ce,{variant:"outline",onClick:a,className:"flex-1 h-9",children:[s.jsx(Va,{className:"mr-2 h-3 w-3"}),"Call Now"]}),s.jsxs(ce,{variant:"outline",onClick:n,className:"flex-1 h-9",children:[s.jsx(va,{className:"mr-2 h-3 w-3"}),"Email Support"]})]}),s.jsx("div",{className:"text-center pt-2",children:s.jsx(ce,{variant:"ghost",onClick:t,size:"sm",children:"Close"})})]})]})})},IH=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(""),[a,i]=g.useState(!1),[o,l]=g.useState(!1),c=er(),d=Sa(),{toast:u}=Ar(),{loading:h,error:p,user:f}=Ct(v=>v.auth);g.useEffect(()=>{c(o3())},[c]),g.useEffect(()=>{if(p)if(p.includes("Account is disabled")||p.includes("Authentication failed"))l(!0);else{const b=p.includes("subscription")||p.includes("Access denied");u({variant:"destructive",title:b?"Subscription Issue":"Error",description:p})}},[p,u]),g.useEffect(()=>{f&&d("/")},[f,d]);const y=v=>{const b=v.replace(/\D/g,"");return b?b.startsWith("0757")?"+2527"+b.slice(4):b.startsWith("0")?"+254"+b.slice(1):b.startsWith("254")||b.startsWith("2527")?"+"+b:b.length===9?"+254"+b:v.startsWith("+")?v:"+254"+b:""},x=v=>{const b=v.target.value;t(b)},w=async v=>{v.preventDefault();const b=y(e);if(!b){u({variant:"destructive",title:"Error",description:"Please enter a valid phone number"});return}c(Kg({phone_number:b,password:r}))};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:s.jsxs(Le,{className:"w-full max-w-md shadow-lg",children:[s.jsx(RH,{isOpen:o,onClose:()=>{l(!1),c(o3())}}),s.jsxs(Be,{className:"space-y-1",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/shuletrack_landscape_logo_yc2rnq.svg",alt:"ShuleTrack Logo",className:"h-12 w-auto"})}),s.jsx(Ue,{className:"text-2xl font-bold text-center",children:"Welcome Back"}),s.jsx(ys,{className:"text-center",children:"Sign in to access Smart shule Admin Dashboard"})]}),s.jsxs(Te,{children:[p&&s.jsx(Wc,{variant:"destructive",className:"mb-4",children:s.jsx(Gc,{children:p})}),s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"phone",children:"Phone Number"}),s.jsx(Ie,{id:"phone",type:"tel",placeholder:"Enter your phone number (e.g., 0757198515 or 0757xxxxxx)",value:e,onChange:x,required:!0,className:"w-full"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter local format (e.g. 0757xxxxxx)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"password",type:a?"text":"password",placeholder:"Enter your password",value:r,onChange:v=>n(v.target.value),required:!0,className:"w-full pr-10"}),s.jsx(ce,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?s.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(ir,{className:"h-4 w-4 text-muted-foreground"})})]})]}),s.jsx(ce,{type:"submit",className:"w-full",disabled:h,children:h?s.jsxs(s.Fragment,{children:[s.jsx(ba,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Login"})]})]}),s.jsx(_5,{className:"flex flex-col space-y-4"})]})})},oa=g.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:it("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));oa.displayName="Textarea";const FH=({isOpen:e,onClose:t})=>{const{toast:r}=Ar(),n=er(),[a,i]=g.useState({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",student_count:"",bus_count:"",message:""}),[o,l]=g.useState(!1),c=u=>{const{name:h,value:p}=u.target;i(f=>({...f,[h]:p}))},d=async u=>{u.preventDefault(),l(!0);try{const h={first_name:a.first_name.trim(),last_name:a.last_name.trim(),email_address:a.email_address.trim(),school_name:a.school_name.trim(),message:a.message.trim()},p=Object.entries(h).filter(([w,v])=>!v).map(([w])=>w);if(p.length>0){r({title:"Error",description:`Please fill in all required fields: ${p.join(", ")}`,variant:"destructive"});return}const f=[];a.position&&f.push(`Position: ${a.position}`),a.student_count&&f.push(`Students: ${a.student_count}`),a.bus_count&&f.push(`Buses: ${a.bus_count}`),a.phone_number&&f.push(`Phone: ${a.phone_number}`);const y=a.message+(f.length>0?`

Additional Information:
${f.join(`
`)}`:""),x={first_name:h.first_name,last_name:h.last_name,email_address:h.email_address,school_name:h.school_name,message:y,message_type:"demo_request"};await n(tp(x)).unwrap(),r({title:"Demo Request Sent!",description:"We'll contact you within 24 hours to schedule your demo."}),i({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",student_count:"",bus_count:"",message:""}),t()}catch(h){r({title:"Error",description:typeof h=="string"?h:"Failed to send demo request. Please try again.",variant:"destructive"})}finally{l(!1)}};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsx(xs,{className:"text-xl font-bold text-slate-900",children:"Request Demo"}),s.jsx(bn,{className:"text-slate-600",children:"Get a personalized demo of our school transportation platform. We'll show you how it can transform your operations."})]}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"first_name",className:"text-sm font-medium text-slate-700",children:"First Name *"}),s.jsx(Ie,{id:"first_name",name:"first_name",type:"text",value:a.first_name,onChange:c,placeholder:"John",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"last_name",className:"text-sm font-medium text-slate-700",children:"Last Name *"}),s.jsx(Ie,{id:"last_name",name:"last_name",type:"text",value:a.last_name,onChange:c,placeholder:"Doe",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"email_address",className:"text-sm font-medium text-slate-700",children:"Email Address *"}),s.jsx(Ie,{id:"email_address",name:"email_address",type:"email",value:a.email_address,onChange:c,placeholder:"john@school.edu",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"phone_number",className:"text-sm font-medium text-slate-700",children:"Phone Number"}),s.jsx(Ie,{id:"phone_number",name:"phone_number",type:"tel",value:a.phone_number,onChange:c,placeholder:"+1 (555) 123-4567",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"school_name",className:"text-sm font-medium text-slate-700",children:"School/District Name *"}),s.jsx(Ie,{id:"school_name",name:"school_name",type:"text",value:a.school_name,onChange:c,placeholder:"Your School District",required:!0,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"position",className:"text-sm font-medium text-slate-700",children:"Your Position"}),s.jsx(Ie,{id:"position",name:"position",type:"text",value:a.position,onChange:c,placeholder:"Principal, Admin, etc.",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"student_count",className:"text-sm font-medium text-slate-700",children:"Number of Students"}),s.jsx(Ie,{id:"student_count",name:"student_count",type:"number",value:a.student_count,onChange:c,placeholder:"500",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"bus_count",className:"text-sm font-medium text-slate-700",children:"Number of Buses"}),s.jsx(Ie,{id:"bus_count",name:"bus_count",type:"number",value:a.bus_count,onChange:c,placeholder:"10",className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"message",className:"text-sm font-medium text-slate-700",children:"Additional Information"}),s.jsx(oa,{id:"message",name:"message",value:a.message,onChange:c,placeholder:"Tell us about your transportation needs, specific requirements, or any questions you have...",rows:4,className:"border-slate-300 focus:border-emerald-600 focus:ring-emerald-600 resize-none"})]}),s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(Ht,{className:"h-5 w-5 text-emerald-600"}),s.jsx("span",{className:"font-medium text-emerald-800",children:"What's Included in Your Demo"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm text-emerald-700",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(on,{className:"h-4 w-4"}),s.jsx("span",{children:"30-minute personalized walkthrough"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ns,{className:"h-4 w-4"}),s.jsx("span",{children:"Live platform demonstration"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(wn,{className:"h-4 w-4"}),s.jsx("span",{children:"Security & compliance overview"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ar,{className:"h-4 w-4"}),s.jsx("span",{children:"Q&A session with our experts"})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[s.jsx(ce,{type:"button",variant:"outline",className:"flex-1",onClick:t,children:"Cancel"}),s.jsx(ce,{type:"submit",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(My,{className:"h-4 w-4 mr-2"}),"Request Demo"]})})]}),s.jsx("div",{className:"text-xs text-slate-500 text-center",children:"We'll contact you within 24 hours to schedule your personalized demo."})]})]})})},DH=()=>{const{toast:e}=Ar(),t=er(),[r,n]=g.useState({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",message:""}),[a,i]=g.useState(!1),o=c=>{const{name:d,value:u}=c.target;n(h=>({...h,[d]:u}))},l=async c=>{c.preventDefault(),i(!0);try{const d={first_name:r.first_name.trim(),last_name:r.last_name.trim(),email_address:r.email_address.trim(),school_name:r.school_name.trim(),message:r.message.trim()},u=Object.entries(d).filter(([y,x])=>!x).map(([y])=>y);if(u.length>0){e({title:"Error",description:`Please fill in all required fields: ${u.join(", ")}`,variant:"destructive"});return}const h=[];r.position&&h.push(`Position: ${r.position}`),r.phone_number&&h.push(`Phone: ${r.phone_number}`);const p=r.message+(h.length>0?`

Additional Information:
${h.join(`
`)}`:""),f={first_name:d.first_name,last_name:d.last_name,email_address:d.email_address,school_name:d.school_name,message:p,message_type:"inquiry_message"};await t(tp(f)).unwrap(),e({title:"Message Sent!",description:"We'll get back to you within 24 hours."}),n({first_name:"",last_name:"",email_address:"",phone_number:"",school_name:"",position:"",message:""})}catch(d){e({title:"Error",description:typeof d=="string"?d:"Failed to send message. Please try again.",variant:"destructive"})}finally{i(!1)}};return s.jsxs("form",{onSubmit:l,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"first_name",className:"text-white font-medium",children:"First Name *"}),s.jsx(Ie,{id:"first_name",name:"first_name",type:"text",value:r.first_name,onChange:o,placeholder:"John",required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"last_name",className:"text-white font-medium",children:"Last Name *"}),s.jsx(Ie,{id:"last_name",name:"last_name",type:"text",value:r.last_name,onChange:o,placeholder:"Doe",required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"email_address",className:"text-white font-medium",children:"Email Address *"}),s.jsx(Ie,{id:"email_address",name:"email_address",type:"email",value:r.email_address,onChange:o,placeholder:"john@school.edu",required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"phone_number",className:"text-white font-medium",children:"Phone Number"}),s.jsx(Ie,{id:"phone_number",name:"phone_number",type:"tel",value:r.phone_number,onChange:o,placeholder:"+1 (555) 123-4567",className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"school_name",className:"text-white font-medium",children:"School/District Name *"}),s.jsx(Ie,{id:"school_name",name:"school_name",type:"text",value:r.school_name,onChange:o,placeholder:"Your School District",required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"position",className:"text-white font-medium",children:"Your Position"}),s.jsx(Ie,{id:"position",name:"position",type:"text",value:r.position,onChange:o,placeholder:"Principal, Admin, etc.",className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors placeholder:text-slate-400"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"message",className:"text-white font-medium",children:"Message *"}),s.jsx(oa,{id:"message",name:"message",value:r.message,onChange:o,placeholder:"Tell us about your transportation needs and how we can help...",rows:4,required:!0,className:"border-slate-600 bg-slate-800 text-white focus:border-[#f7c624] focus:ring-[#f7c624] transition-colors resize-none placeholder:text-slate-400"})]}),s.jsx(ce,{type:"submit",className:"w-full bg-[#f7c624] hover:bg-[#f7c624]/90 text-white py-3 rounded-xl font-medium transition-all duration-200 hover:scale-105",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(My,{className:"h-4 w-4 mr-2"}),"Send Message"]})})]})};function Ds({className:e,...t}){return s.jsx("div",{className:it("animate-pulse rounded-md bg-muted",e),...t})}function OH(){const e=zl(),t=Sa(),{plans:r,loading:n,error:a}=ca(y=>y.subscription);g.useEffect(()=>{e(Ri())},[e]);const i=y=>{localStorage.setItem("selectedSubscriptionPlan",JSON.stringify(y)),t("/register",{state:{selectedPlan:y}})},o=y=>parseFloat(y).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2}),l=y=>{const x=y.toLowerCase();return x.includes("basic")||x.includes("starter")?{text:"Starter",variant:"secondary"}:x.includes("standard")?{text:"Popular",variant:"default"}:x.includes("pro")||x.includes("professional")?{text:"Popular",variant:"default"}:x.includes("enterprise")||x.includes("premium")?{text:"Enterprise",variant:"default"}:null},c=y=>{const x=y.toLowerCase();return x.includes("basic")?"Basic Plan":x.includes("standard")?"Standard Plan":x.includes("premium")?"Premium Plan":x.includes("pro")||x.includes("professional")?"Professional Plan":x.includes("enterprise")?"Enterprise Plan":y.replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase())},d=y=>{const x=y.toLowerCase();return x.includes("basic")||x.includes("starter")?s.jsx(ns,{className:"h-6 w-6"}):x.includes("standard")||x.includes("pro")||x.includes("professional")?s.jsx(Oi,{className:"h-6 w-6"}):x.includes("enterprise")||x.includes("premium")?s.jsx(b5,{className:"h-6 w-6"}):s.jsx($n,{className:"h-6 w-6"})};if(n)return s.jsx("section",{className:"py-20 bg-slate-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(Ds,{className:"h-8 w-32 mx-auto mb-4"}),s.jsx(Ds,{className:"h-12 w-96 mx-auto mb-6"}),s.jsx(Ds,{className:"h-6 w-96 mx-auto"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(y=>s.jsxs(Le,{className:"border-0 shadow-lg",children:[s.jsxs(Be,{children:[s.jsx(Ds,{className:"h-6 w-32 mb-2"}),s.jsx(Ds,{className:"h-4 w-48"})]}),s.jsxs(Te,{children:[s.jsx(Ds,{className:"h-8 w-24 mb-4"}),s.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(x=>s.jsx(Ds,{className:"h-4 w-full"},x))})]})]},y))})]})});if(a)return s.jsx("section",{className:"py-20 bg-slate-800",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[s.jsx("h2",{className:"text-red-800 font-semibold text-xl mb-2",children:"Error Loading Subscription Plans"}),s.jsx("p",{className:"text-red-600 mb-4",children:a}),s.jsx(ce,{onClick:()=>e(Ri()),className:"bg-red-600 hover:bg-red-700",children:"Retry"})]})})});const u=Array.isArray(r)?r:[],h=[{id:"1",name:"Basic Plan",description:"Perfect for small schools getting started",base_price:"299.00",price_per_student:"5.00",price_per_bus:"50.00",features_json:{max_students:100,max_parents:200,max_buses:5,sms_notifications:!0,whatsapp_integration:!1,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!1,advanced_analytics:!1,api_access:!1},is_active:!0,default_billing_cycle:"monthly"},{id:"2",name:"Professional Plan",description:"Ideal for medium-sized school districts",base_price:"599.00",price_per_student:"3.00",price_per_bus:"40.00",features_json:{max_students:500,max_parents:1e3,max_buses:20,sms_notifications:!0,whatsapp_integration:!0,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!0,advanced_analytics:!0,api_access:!1},is_active:!0,default_billing_cycle:"monthly"},{id:"3",name:"Enterprise Plan",description:"For large school districts with advanced needs",base_price:"999.00",price_per_student:"2.00",price_per_bus:"30.00",features_json:{max_students:2e3,max_parents:4e3,max_buses:50,sms_notifications:!0,whatsapp_integration:!0,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!0,advanced_analytics:!0,api_access:!0},is_active:!0,default_billing_cycle:"monthly"}],p=u.length>0?u:h,f=u.length===0;return p.length===0?s.jsx("section",{className:"py-20 bg-slate-800",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"text-gray-500",children:[s.jsx(wn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Subscription Plans Available"}),s.jsx("p",{children:"Please check back later for available plans."})]})})})}):s.jsx("section",{className:"py-20 bg-slate-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(Pe,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"Pricing Plans"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Choose Your Perfect",s.jsx("span",{className:"text-[#f7c624] block",children:"Subscription Plan"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed",children:"Flexible pricing options designed to meet the needs of schools of all sizes. Start with what you need and scale as you grow."}),f&&s.jsx("div",{className:"mt-4",children:s.jsx(Pe,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Demo Data"})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:p.map(y=>{const x=l(y.name),w=d(y.name);return s.jsxs(Le,{className:`relative border-2 transition-all duration-300 hover:-translate-y-2 rounded-2xl overflow-hidden ${(x==null?void 0:x.text)==="Popular"?"border-[#f7c624] shadow-xl scale-105":"border-slate-600 shadow-lg hover:shadow-xl"} bg-slate-700`,children:[!y.is_active&&s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx(Pe,{variant:"secondary",children:"Inactive"})}),x&&s.jsx("div",{className:`text-center py-2 text-sm font-medium ${x.text==="Popular"?"bg-[#f7c624] text-white":"bg-slate-600 text-slate-300"}`,children:x.text}),s.jsxs(Be,{className:"text-center pb-6",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-[#f7c624] rounded-xl flex items-center justify-center text-white",children:w})}),s.jsx(Ue,{className:"text-2xl font-bold text-white mb-2",children:c(y.name)}),s.jsx(ys,{className:"text-slate-300",children:y.description})]}),s.jsxs(Te,{className:"pb-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-3xl font-bold text-white",children:o(y.base_price)}),s.jsx("span",{className:"text-slate-300",children:"/month"})]}),s.jsxs("div",{className:"text-sm text-slate-400 space-y-1",children:[s.jsxs("div",{children:["+ ",o(y.price_per_student)," per student"]}),s.jsxs("div",{children:["+ ",o(y.price_per_bus)," per bus"]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"font-medium text-white mb-3 text-center",children:"Plan Limits"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{className:"text-center p-2 bg-slate-600 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:y.features_json.max_students}),s.jsx("div",{className:"text-slate-300 text-xs",children:"Students"})]}),s.jsxs("div",{className:"text-center p-2 bg-slate-600 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:y.features_json.max_parents}),s.jsx("div",{className:"text-slate-300 text-xs",children:"Parents"})]}),s.jsxs("div",{className:"text-center p-2 bg-slate-600 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:y.features_json.max_buses}),s.jsx("div",{className:"text-slate-300 text-xs",children:"Buses"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"font-medium text-white mb-3",children:"Features"}),s.jsx("div",{className:"space-y-2",children:Object.entries(y.features_json).map(([v,b])=>typeof b=="boolean"?s.jsx("div",{className:"flex items-center justify-between text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[b?s.jsx(Sn,{className:"h-4 w-4 text-[#f7c624]"}):s.jsx(co,{className:"h-4 w-4 text-red-500"}),s.jsx("span",{className:"capitalize text-white",children:v.replace(/_/g," ")})]})},v):null)})]}),s.jsx("div",{className:"pt-4 border-t border-slate-600 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-300",children:"Billing Cycle:"}),s.jsx(Pe,{variant:"outline",className:"capitalize",children:y.default_billing_cycle})]})}),s.jsx(ce,{className:`w-full py-3 rounded-xl font-medium transition-all duration-200 ${(x==null?void 0:x.text)==="Popular"?"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white hover:scale-105":"bg-slate-600 hover:bg-[#f7c624] text-slate-300 hover:text-white hover:scale-105"}`,disabled:!y.is_active,onClick:()=>y.is_active&&i(y),children:y.is_active?"Get Started":"Coming Soon"})]})]},y.id)})}),s.jsx("div",{className:"mt-16 text-center",children:s.jsxs("div",{className:"bg-[#f7c624] p-8 rounded-2xl border border-[#f7c624]",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[s.jsx(qd,{className:"h-5 w-5 text-white"}),s.jsx("span",{className:"text-white font-semibold",children:"All plans include:"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-white",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Sn,{className:"h-4 w-4"}),s.jsx("span",{children:"24/7 Support"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Sn,{className:"h-4 w-4"}),s.jsx("span",{children:"Free Setup"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Sn,{className:"h-4 w-4"}),s.jsx("span",{children:"No Hidden Fees"})]})]})]})})]})})}const MH={secondary:"#f7c624"},$H=()=>{const[e,t]=g.useState(null),[r,n]=g.useState(!1),[a,i]=g.useState(!1),[o,l]=g.useState(new Set),c=g.useRef(null),d=Sa(),{token:u,user:h,hasLoggedInBefore:p}=Ct(C=>C.auth),f=!!u&&!!h;g.useEffect(()=>{n(!0),setTimeout(()=>{const C=document.getElementById("stats");C&&(l(D=>new Set([...D,"stats"])),C.querySelectorAll(".card-animate").forEach((D,R)=>{setTimeout(()=>{D.classList.add("animate")},R*100)}))},500)},[]),g.useEffect(()=>{const C=()=>{const P=window.scrollY,D=document.querySelector("nav");D&&(P>10?D.classList.add("shadow-lg","bg-slate-800/95","backdrop-blur-md"):D.classList.remove("shadow-lg","bg-slate-800/95","backdrop-blur-md"))};return window.addEventListener("scroll",C),()=>window.removeEventListener("scroll",C)},[]),g.useEffect(()=>{const C={threshold:.1,rootMargin:"0px 0px -50px 0px"},P=new IntersectionObserver(R=>{R.forEach(A=>{if(A.isIntersecting){const I=A.target.getAttribute("id");I&&!o.has(I)&&l(O=>new Set([...O,I]))}})},C);return document.querySelectorAll("section[id]").forEach(R=>P.observe(R)),()=>P.disconnect()},[o]);const y=[{icon:s.jsx($n,{className:"h-8 w-8 text-[#f7c624]"}),title:"Real-time GPS Tracking",description:"Track every school bus in real-time with precise location data and live updates for parents and administrators.",ticks:["Live location updates every 30 seconds","Route deviation alerts","ETA predictions","Historical route tracking","Multi-device access"]},{icon:s.jsx(wn,{className:"h-8 w-8 text-[#f7c624]"}),title:"Advanced Safety Features",description:"Comprehensive safety monitoring including speed alerts, route compliance, and emergency response systems.",ticks:["Speed monitoring & alerts","Emergency SOS system","Driver behavior tracking","Weather condition alerts","Real-time incident reporting"]},{icon:s.jsx(tq,{className:"h-8 w-8 text-[#f7c624]"}),title:"Biometric Login for Students",description:"Secure biometric authentication for students to check in when dropped off and picked up, ensuring accurate attendance tracking.",ticks:["Fingerprint & facial recognition","Automatic attendance tracking","Drop-off & pick-up verification","Parent notification system","Secure data encryption"]},{icon:s.jsx(ns,{className:"h-8 w-8 text-[#f7c624]"}),title:"Parent Portal",description:"Dedicated mobile app for parents to track their child's bus location and receive real-time notifications.",ticks:["Real-time bus tracking","Push notifications","Multiple child support","Schedule management","Direct communication with drivers"]},{icon:s.jsx(ar,{className:"h-8 w-8 text-[#f7c624]"}),title:"Live Updates",description:"Instant notifications for delays, route changes, and arrival times to keep everyone informed.",ticks:["Delay notifications","Route change alerts","Arrival time updates","Weather-related updates","Emergency announcements"]},{icon:s.jsx(Oi,{className:"h-8 w-8 text-[#f7c624]"}),title:"Analytics Dashboard",description:"Comprehensive reporting and analytics to optimize operations and improve efficiency.",ticks:["Performance metrics","Cost analysis reports","Route optimization data","Safety incident tracking","Custom report generation"]}],x=["Reduce transportation costs by up to 30%","Improve safety with real-time monitoring","Enhance parent satisfaction and communication","Streamline administrative operations","Ensure compliance with transportation regulations","Provide data-driven insights for optimization"],w=[{name:"Sarah Johnson",role:"School Principal",content:"The transportation system has revolutionized how we manage our school buses. Parents love the real-time updates!",rating:5,avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face"},{name:"Michael Chen",role:"Transportation Director",content:"The analytics and reporting features have made our operations so much more efficient. Highly recommended!",rating:5,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face&sat=-100&brightness=0.8&contrast=1.2"},{name:"Lisa Rodriguez",role:"Parent",content:"Knowing exactly where my child's bus is gives me complete peace of mind. The app is fantastic!",rating:5,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face&sat=-100&brightness=0.8&contrast=1.2"}],v=[{question:"How does the GPS tracking work?",answer:"Our system uses advanced GPS technology to provide real-time location data for every school bus. Parents and administrators can track buses through our mobile app or web dashboard with updates every 30 seconds."},{question:"Is the system secure and private?",answer:"Yes, we prioritize security and privacy. All data is encrypted, and we comply with FERPA and other educational privacy regulations. Student information is protected with industry-standard security measures."},{question:"Can parents track multiple children?",answer:"Absolutely! Parents can track multiple children from a single account. Each child's bus location and schedule is clearly displayed with individual notifications and updates."},{question:"What happens during emergencies?",answer:"Our system includes emergency protocols with instant alerts to administrators, drivers, and parents. We provide real-time communication channels and emergency response coordination."},{question:"How long does implementation take?",answer:"Most schools are up and running within 2-3 weeks. Our team handles installation, training, and setup to ensure a smooth transition with minimal disruption to your operations."}],b=[{number:"50+",label:"Schools Trust Us"},{number:"5000+",label:"Students Transported"},{number:"99.9%",label:"Uptime Reliability"},{number:"4.9/5",label:"Customer Rating"}],N=[{icon:s.jsx(pr,{className:"h-6 w-6 text-[#f7c624]"}),title:"Head Office",description:"Visit our headquarters",value:"Gesora Road, Utawala, Nairobi",link:"https://maps.google.com/?q=Gesora+Road,+Utawala,+Nairobi"},{icon:s.jsx(va,{className:"h-6 w-6 text-[#f7c624]"}),title:"Mailing Address",description:"Get in touch with our team",value:"Inquiry:info@shuletrack.com",link:"mailto:info@shuletrack.com"},{icon:s.jsx(va,{className:"h-6 w-6 text-[#f7c624]"}),title:"Support Email",description:"Technical support and assistance",value:"Support: support@shuletrack.com",link:"mailto:support@shuletrack.com"},{icon:s.jsx(Va,{className:"h-6 w-6 text-[#f7c624]"}),title:"Business Talk",description:"Call us anytime",value:"+254 113281424",link:"tel:+254113281424"}];return s.jsxs("div",{className:"min-h-screen bg-slate-900 scroll-smooth",children:[s.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes fadeInLeft {
          from {
            opacity: 0;
            transform: translateX(-30px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        @keyframes fadeInRight {
          from {
            opacity: 0;
            transform: translateX(30px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        @keyframes scaleIn {
          from {
            opacity: 0;
            transform: scale(0.9);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }
        
        .animate-fade-in-up {
          animation: fadeInUp 0.8s ease-out forwards;
        }
        
        .animate-fade-in-left {
          animation: fadeInLeft 0.8s ease-out forwards;
        }
        
        .animate-fade-in-right {
          animation: fadeInRight 0.8s ease-out forwards;
        }
        
        .animate-scale-in {
          animation: scaleIn 0.6s ease-out forwards;
        }
        
        .section-animate {
          opacity: 0;
          transform: translateY(20px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .section-animate.animate {
          opacity: 1;
          transform: translateY(0);
        }
        
        /* Make stats section visible by default */
        #stats.section-animate {
          opacity: 1;
          transform: translateY(0);
        }
        
        .card-animate {
          opacity: 0;
          transform: translateY(30px);
          transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-animate.animate {
          opacity: 1;
          transform: translateY(0);
        }
        
        /* Make stats cards visible by default */
        #stats .card-animate {
          opacity: 1;
          transform: translateY(0);
        }
        
        @keyframes slideInFromBottom {
          from {
            opacity: 0;
            transform: translateY(50px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes slideInFromLeft {
          from {
            opacity: 0;
            transform: translateX(-50px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        @keyframes slideInFromRight {
          from {
            opacity: 0;
            transform: translateX(50px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        .slide-in-bottom {
          animation: slideInFromBottom 0.8s ease-out forwards;
        }
        
        .slide-in-left {
          animation: slideInFromLeft 0.8s ease-out forwards;
        }
        
        .slide-in-right {
          animation: slideInFromRight 0.8s ease-out forwards;
        }
        
        .hover-lift {
          transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .hover-lift:hover {
          transform: translateY(-8px);
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
      `}),s.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-transparent transition-all duration-300 text-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx(Bc,{to:"/home",children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("span",{className:"text-xl w-40 h-30 font-bold transition-colors duration-300",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/shuletrack_landscape_logo-100_gcmpht.jpg",alt:""})})})}),s.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[s.jsx("a",{href:"#about",className:"transition-colors font-medium hover:text-[#f7c624] hover:scale-105 transform duration-200",onClick:C=>{var P;C.preventDefault(),(P=document.getElementById("about"))==null||P.scrollIntoView({behavior:"smooth"})},children:"About Us"}),s.jsx("a",{href:"#features",className:"transition-colors font-medium hover:text-[#f7c624] hover:scale-105 transform duration-200",onClick:C=>{var P;C.preventDefault(),(P=document.getElementById("features"))==null||P.scrollIntoView({behavior:"smooth"})},children:"Features"}),s.jsx("a",{href:"#pricing",className:"transition-colors font-medium hover:text-[#f7c624] hover:scale-105 transform duration-200",onClick:C=>{var P;C.preventDefault(),(P=document.getElementById("pricing"))==null||P.scrollIntoView({behavior:"smooth"})},children:"Pricing"}),s.jsx("a",{href:"#contact",className:"transition-colors font-medium hover:text-[#f7c624] hover:scale-105 transform duration-200",onClick:C=>{var P;C.preventDefault(),(P=document.getElementById("contact"))==null||P.scrollIntoView({behavior:"smooth"})},children:"Contact"})]}),s.jsx(ce,{className:"bg-[#10213f] hover:bg-[#f7c624] text-white border-0 px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105",onClick:()=>{d(f?"/":p?"/login":"/subscription-selection")},children:f?"Dashboard":p?"Login":"Get Started"})]})})}),s.jsxs("section",{ref:c,className:"relative min-h-screen flex items-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.3) 1px, transparent 0)",backgroundSize:"50px 50px"}})}),s.jsx("div",{className:"max-w-7xl mx-auto mt-5 px-4 sm:px-6 lg:px-8 w-full relative z-10",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[s.jsxs("div",{className:"text-left space-y-6",children:[s.jsx("div",{className:"opacity-100 mt-16 sm:mt-8 x:mt-16",children:s.jsxs(Pe,{variant:"secondary",className:"inline-flex items-center bg-[#f7c624] text-white px-4 py-2 rounded-full font-medium",children:[s.jsx(qd,{className:"h-4 w-4 mr-2"}),"Trusted by 50+ Schools Nationwide"]})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white leading-tight",children:[s.jsx("span",{className:"block",children:"Modern School"}),s.jsx("span",{className:"text-[#f7c624] block",children:"Transportation"}),s.jsx("span",{className:"text-xl md:text-2xl font-light text-white/80 block mt-2",children:"Made Simple & Secure"})]})}),s.jsx("p",{className:"text-lg text-white/80 leading-relaxed max-w-xl",children:"Transform your school transportation with our enterprise-grade platform. Real-time GPS tracking, AI-powered route optimization, and complete transparency for parents, drivers, and administrators."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs(ce,{size:"lg",className:"px-8 py-3 bg-[#f7c624] hover:bg-[#f7c624]/90 text-white border-0 rounded-lg font-semibold",onClick:()=>i(!0),children:[s.jsx(nw,{className:"h-4 w-4 mr-2"}),"Request Demo"]}),s.jsxs(ce,{variant:"outline",size:"lg",className:"px-8 py-3 border-2 border-white/40 text-white hover:bg-white/20 rounded-lg font-semibold",onClick:C=>{var P;C.preventDefault(),(P=document.getElementById("about"))==null||P.scrollIntoView({behavior:"smooth"})},children:[s.jsx(j5,{className:"h-4 text-black w-4 mr-2"}),s.jsx("span",{className:"text-black",children:"Learn More"})]})]}),s.jsxs("div",{className:"flex items-center space-x-6 pt-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex -space-x-2",children:[1,2,3,4].map(C=>s.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/20 bg-[#f7c624] flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:C})},C))}),s.jsx("span",{className:"text-white/70 text-sm",children:"Join 50+ schools"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(C=>s.jsx(qd,{className:"h-4 w-4 text-[#f7c624] fill-current"},C))}),s.jsx("span",{className:"text-white/70 text-sm",children:"4.9/5 rating"})]})]})]}),s.jsx("div",{className:"relative flex items-center justify-center",children:s.jsxs("div",{className:"relative w-full max-w-xl",children:[s.jsx("div",{className:"relative",children:s.jsx("div",{className:"relative  rounded-2xl p-8  ",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1756278735/Yellow_School_Bus_on_White_Background_iihnb2.png",alt:"School Bus Transportation",className:"w-full h-auto object-contain"})})}),s.jsx("div",{className:"absolute bottom-4 left-4 bg-black/70 rounded-lg px-4 py-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-[#f7c624] rounded-full"}),s.jsx("span",{className:"text-white text-sm font-medium",children:"Live Tracking Active"})]})}),s.jsx("div",{className:"absolute top-4 right-4 bg-black/70 rounded-lg px-4 py-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-[#f7c624] rounded-full"}),s.jsx("span",{className:"text-white text-sm font-medium",children:"GPS System Online"})]})})]})})]})})]}),s.jsx("section",{id:"stats",className:`py-12 bg-slate-900  ml-10 mr-10 section-animate ${o.has("stats")?"animate":""}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:b.map((C,P)=>s.jsxs("div",{className:`text-center group hover:scale-105 transition-transform duration-300 card-animate ${o.has("stats")?"animate":""}`,style:{transitionDelay:`${P*100}ms`},children:[s.jsx("div",{className:"text-4xl md:text-5xl font-bold text-[#f7c624] mb-3 group-hover:text-[#f7c624]/80 transition-colors",children:C.number}),s.jsx("div",{className:"text-slate-100 group-hover:text-slate-600 transition-colors font-medium",children:C.label})]},P))})})}),s.jsx("section",{id:"about",className:`py-1 bg-slate-900 ml-10 mr-10 section-animate ${o.has("about")?"animate":""}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx(Pe,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"About Us"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Leading the Future of",s.jsx("span",{className:`text-[#f7c624] block ${MH.secondary}`,children:"School Transportation"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-4xl mx-auto leading-relaxed",children:"Shuletrack is a modern school transportation management platform designed to revolutionize how schools handle their transportation operations. Based in Nairobi, Kenya, we serve schools across the country with cutting-edge technology and exceptional support."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-[#f7c624]  to-[#10213f] rounded-xl flex items-center justify-center",children:s.jsx(pq,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Our Mission"})]}),s.jsx("p",{className:"text-lg text-slate-300 leading-relaxed",children:"To provide schools with innovative transportation solutions that enhance safety, improve efficiency, and create peace of mind for parents and administrators through cutting-edge technology and exceptional service."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-300 text-sm",children:"Enhance student safety"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-300 text-sm",children:"Improve operational efficiency"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-300 text-sm",children:"Provide peace of mind"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-[#f7c624] to-[#10213f] rounded-xl flex items-center justify-center",children:s.jsx(ir,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Our Vision"})]}),s.jsx("p",{className:"text-lg text-slate-100 leading-relaxed",children:"To become the leading provider of school transportation technology in Africa, making safe and efficient school transportation accessible to every educational institution while setting global standards for innovation."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Lead African innovation"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Set global standards"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Universal accessibility"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-[#f7c624] to-[#10213f] rounded-xl flex items-center justify-center",children:s.jsx(uq,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-slate-100",children:"Our Future"})]}),s.jsx("p",{className:"text-lg text-slate-100 leading-relaxed",children:"We envision a future where every school in Africa has access to world-class transportation technology, creating safer, more efficient, and environmentally sustainable school transportation systems."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"AI-powered solutions"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Green transportation"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-[#ffffff]"})}),s.jsx("p",{className:"text-slate-100 text-sm",children:"Global expansion"})]})]})]})]}),s.jsxs("div",{className:"mt-16",children:[s.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-8 text-center",children:"Why Choose Shule Track?"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-[#f7c624] rounded-full flex items-center justify-center",children:s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624]"})}),s.jsx("p",{className:"text-slate-100",children:"Local expertise with global standards"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-[#f7c624] rounded-full flex items-center justify-center",children:s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624]"})}),s.jsx("p",{className:"text-slate-100",children:"24/7 customer support in your timezone"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-[#f7c624]/20 rounded-full flex items-center justify-center",children:s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624]"})}),s.jsx("p",{className:"text-slate-100",children:"Customized solutions for African schools"})]})]})]})]})}),s.jsx("section",{id:"features",className:`py-16 bg-slate-900  ml-10 mr-10 section-animate ${o.has("features")?"animate":""}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(Pe,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"Features"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Everything You Need for",s.jsx("span",{className:"text-[#f7c624] block",children:"Safe Transportation"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed bg-slate-800 p-4 rounded-lg",children:"Our comprehensive platform provides all the tools needed to manage school transportation efficiently and safely."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:y.map((C,P)=>s.jsxs(Le,{className:`border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 group bg-slate-700 rounded-2xl overflow-hidden card-animate ${o.has("features")?"animate":""}`,style:{transitionDelay:`${P*100}ms`},children:[s.jsx(Be,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"group-hover:scale-110 transition-transform duration-300",children:C.icon}),s.jsx(Ue,{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:C.title})]})}),s.jsxs(Te,{children:[s.jsx(ys,{className:"text-base group-hover:text-slate-300 transition-colors leading-relaxed text-slate-400 mb-6",children:C.description}),s.jsx("div",{className:"space-y-3",children:C.ticks.map((D,R)=>s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-[#f7c624] rounded-full flex items-center justify-center mt-0.5",children:s.jsx(Ht,{className:"h-3 w-3 text-white"})}),s.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:D})]},R))})]})]},P))})]})}),s.jsx("section",{id:"benefits",className:`py-16 bg-slate-900 ml-10 mr-10 section-animate ${o.has("benefits")?"animate":""}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[s.jsxs("div",{children:[s.jsx(Pe,{className:"mb-6 bg-[#f7c624] text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"Why Choose Shule Track?"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-8 leading-tight",children:["Join hundreds of schools that have",s.jsx("span",{className:"text-[#f7c624] block",children:"transformed their operations"})]}),s.jsx("p",{className:"text-xl text-slate-300 mb-10 leading-relaxed",children:"Our platform has helped schools across the country improve their transportation efficiency, safety, and parent satisfaction."}),s.jsx("div",{className:"space-y-6",children:x.map((C,P)=>s.jsxs("div",{className:`flex items-center space-x-4 group hover:translate-x-2 transition-transform duration-300 ${o.has("benefits")?"opacity-100 translate-x-0":"opacity-0 translate-x-10"}`,style:{transitionDelay:`${P*150}ms`},children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-[#f7c624]/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:s.jsx(Ht,{className:"h-5 w-5 text-[#f7c624]"})}),s.jsx("span",{className:"text-slate-300 group-hover:text-[#f7c624] transition-colors text-lg",children:C})]},P))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1753866768/images__1_-removebg-preview_gkn47i.png",alt:"School Bus Fleet",className:"w-full h-auto rounded-3xl"}),s.jsx(Le,{className:"absolute -bottom-8 -right-8 p-8 shadow-2xl bg-slate-800 rounded-2xl border border-slate-700",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-[#f7c624] mb-2",children:"50+"}),s.jsx("div",{className:"text-lg text-slate-100 mb-3",children:"Schools Trust Us"}),s.jsx("div",{className:"flex justify-center space-x-1 mb-2",children:[...Array(5)].map((C,P)=>s.jsx(qd,{className:"h-5 w-5 text-yellow-400 fill-current"},P))}),s.jsx("p",{className:"text-sm text-slate-500",children:"4.9/5 average rating"})]})})]})]})})}),s.jsx("section",{className:"py-16 bg-slate-900 ml-10 mr-10",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(Pe,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"Fleet Management"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Modern School Bus Fleet",s.jsx("span",{className:"text-[#f7c624] block",children:"Management"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed",children:"See how our platform manages real school bus fleets with advanced tracking and safety features."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs(Le,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden group hover-lift",children:[s.jsxs(Be,{className:"pb-4",children:[s.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:s.jsx($n,{className:"h-12 w-12 text-[#f7c624]"})}),s.jsx(Ue,{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:"GPS Tracking"})]}),s.jsxs(Te,{children:[s.jsx(ys,{className:"text-base group-hover:text-slate-300 transition-colors leading-relaxed text-slate-300",children:"Real-time location monitoring for every school bus with precise GPS coordinates and live updates every 30 seconds."}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Live location updates"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Route history tracking"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Speed monitoring"})]})]})]})]}),s.jsxs(Le,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden group",children:[s.jsxs(Be,{className:"pb-4",children:[s.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:s.jsx(wn,{className:"h-12 w-12 text-[#f7c624]"})}),s.jsx(Ue,{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:"Safety Monitoring"})]}),s.jsxs(Te,{children:[s.jsx(ys,{className:"text-base group-hover:text-slate-300 transition-colors leading-relaxed text-slate-300",children:"Advanced safety protocols with real-time alerts for speed violations, route deviations, and emergency situations."}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Speed limit alerts"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Emergency response"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Driver behavior monitoring"})]})]})]})]}),s.jsxs(Le,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden group",children:[s.jsxs(Be,{className:"pb-4",children:[s.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:s.jsx(pr,{className:"h-12 w-12 text-[#f7c624]"})}),s.jsx(Ue,{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:"Route Optimization"})]}),s.jsxs(Te,{children:[s.jsx(ys,{className:"text-base group-hover:text-slate-300 transition-colors leading-relaxed text-slate-300",children:"AI-powered route planning that optimizes pickups, drop-offs, and fuel efficiency while reducing travel time."}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"AI route planning"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Fuel cost reduction"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Traffic optimization"})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-8",children:[s.jsxs(Le,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden group",children:[s.jsxs(Be,{className:"pb-4",children:[s.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:s.jsx(mq,{className:"h-12 w-12 text-[#f7c624]"})}),s.jsx(Ue,{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:"Mobile App"})]}),s.jsxs(Te,{children:[s.jsx(ys,{className:"text-base group-hover:text-slate-300 transition-colors leading-relaxed text-slate-300",children:"Dedicated mobile applications for drivers, parents, and administrators with real-time notifications and updates."}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Driver app"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Parent portal"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Admin dashboard"})]})]})]})]}),s.jsxs(Le,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden group",children:[s.jsxs(Be,{className:"pb-4",children:[s.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:s.jsx(Oy,{className:"h-12 w-12 text-[#f7c624]"})}),s.jsx(Ue,{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:"Analytics & Reports"})]}),s.jsxs(Te,{children:[s.jsx(ys,{className:"text-base group-hover:text-slate-300 transition-colors leading-relaxed text-slate-300",children:"Comprehensive reporting and analytics to optimize operations, reduce costs, and improve efficiency."}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Performance metrics"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Cost analysis"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Custom reports"})]})]})]})]}),s.jsxs(Le,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-700 rounded-2xl overflow-hidden group",children:[s.jsxs(Be,{className:"pb-4",children:[s.jsx("div",{className:"mb-6 group-hover:scale-110 transition-transform duration-300",children:s.jsx(ZA,{className:"h-12 w-12 text-[#f7c624]"})}),s.jsx(Ue,{className:"text-xl group-hover:text-[#f7c624] transition-colors font-semibold text-white",children:"Security & Compliance"})]}),s.jsxs(Te,{children:[s.jsx(ys,{className:"text-base group-hover:text-slate-700 transition-colors leading-relaxed text-slate-300",children:"Enterprise-grade security with FERPA compliance and data protection for student safety and privacy."}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"FERPA compliant"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Data encryption"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-4 w-4 text-[#f7c624] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-slate-300",children:"Access controls"})]})]})]})]})]})]})}),s.jsx("section",{className:"py-16 bg-slate-900 ml-10 mr-10",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(Pe,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"Testimonials"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["What Our Customers",s.jsx("span",{className:"text-[#f7c624] block",children:"Say"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed",children:"Hear from school administrators, transportation directors, and parents who have transformed their school transportation with Shuletrack."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:w.map((C,P)=>s.jsx(Le,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 bg-slate-800 rounded-2xl overflow-hidden hover-lift",style:{animationDelay:`${P*200}ms`},children:s.jsxs(Te,{className:"p-8",children:[s.jsx("div",{className:"flex items-center space-x-1 mb-6",children:[...Array(C.rating)].map((D,R)=>s.jsx(qd,{className:"h-5 w-5 text-yellow-400 fill-current"},R))}),s.jsxs("p",{className:"text-slate-300 mb-6 leading-relaxed text-lg",children:['"',C.content,'"']}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:C.avatar,alt:C.name,className:"w-12 h-12 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white",children:C.name}),s.jsx("div",{className:"text-slate-300",children:C.role})]})]})]})},P))})]})}),s.jsx("section",{id:"pricing",className:`transition-all duration-1000 ${o.has("pricing")?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:s.jsx(OH,{})}),s.jsx("section",{id:"faq",className:`py-16 bg-slate-900 ml-10 mr-10 section-animate ${o.has("faq")?"animate":""}`,children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(Pe,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"FAQ"}),s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Frequently Asked",s.jsx("span",{className:"text-[#f7c624] block",children:"Questions"})]}),s.jsx("p",{className:"text-xl text-slate-300 max-w-2xl mx-auto leading-relaxed",children:"Find answers to common questions about our school transportation platform."})]}),s.jsx("div",{className:"space-y-4",children:v.map((C,P)=>s.jsxs(Le,{className:`border border-slate-700 bg-slate-800 rounded-2xl overflow-hidden hover:shadow-lg transition-all duration-200 ${o.has("faq")?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,style:{transitionDelay:`${P*100}ms`},children:[s.jsxs("button",{onClick:()=>t(e===P?null:P),className:"w-full p-6 text-left flex items-center justify-between hover:bg-slate-700 transition-colors",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:C.question}),e===P?s.jsx(GA,{className:"h-5 w-5 text-slate-300"}):s.jsx(Zp,{className:"h-5 w-5 text-slate-300"})]}),e===P&&s.jsx("div",{className:"px-6 pb-6",children:s.jsx("p",{className:"text-slate-300 leading-relaxed",children:C.answer})})]},P))})]})}),s.jsx("section",{id:"contact",className:`py-16 bg-slate-900 ml-10 mr-10 section-animate ${o.has("contact")?"animate":""}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-2 lg:px-2",children:[s.jsxs("div",{className:"text-center mb-1",children:[s.jsx(Pe,{className:"mb-4 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/30 px-4 py-2 rounded-full",children:"Contact Us"}),s.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Get in Touch"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Let's Start a Conversation"}),s.jsx("p",{className:"text-lg text-slate-300 leading-relaxed mb-8",children:"Our team is here to help you understand how Shuletrack can transform your school transportation operations. We'll provide a personalized demo and answer all your questions."})]}),s.jsx("div",{className:"space-y-6",children:N.map((C,P)=>s.jsxs("div",{className:`flex items-start space-x-4 group hover:translate-x-2 transition-transform duration-300 ${o.has("contact")?"opacity-100 translate-x-0":"opacity-0 translate-x-10"}`,style:{transitionDelay:`${P*100}ms`},children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-[#f7c624]/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:C.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white text-lg mb-1",children:C.title}),s.jsx("div",{className:"text-slate-300 mb-2",children:C.description}),s.jsx("div",{className:"text-[#f7c624] font-medium",children:C.link?s.jsx("a",{href:C.link,target:C.link.startsWith("http")?"_blank":void 0,rel:C.link.startsWith("http")?"noopener noreferrer":void 0,className:"hover:text-[#f7c624]/80 transition-colors",children:C.value}):C.value})]})]},P))}),s.jsxs("div",{className:"bg-slate-700 p-6 rounded-2xl border border-slate-600",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(sq,{className:"h-6 w-6 text-[#f7c624]"}),s.jsx("h4",{className:"text-lg font-semibold text-white",children:"Expert Support"})]}),s.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Our dedicated support team is available 24/7 to help you with any questions or technical issues. We're committed to your success."})]})]}),s.jsxs(Le,{className:"shadow-xl border-0 rounded-2xl overflow-hidden bg-slate-800",children:[s.jsxs(Be,{className:"bg-slate-700 text-white",children:[s.jsx(Ue,{className:"text-2xl",children:"Send us a Message"}),s.jsx(ys,{className:"text-slate-300",children:"Fill out the form below and we'll get back to you within 24 hours."})]}),s.jsx(Te,{className:"p-8",children:s.jsx(DH,{})})]})]})]})}),s.jsx("section",{id:"cta",className:`py-20 bg-slate-900 ml-10 mr-10 transition-all duration-1000 ${o.has("cta")?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Ready to Transform Your",s.jsx("span",{className:"block",children:"School Transportation?"})]}),s.jsx("p",{className:"text-xl text-slate-300 mb-10 leading-relaxed max-w-2xl mx-auto",children:"Join hundreds of schools that have already improved their transportation operations with Shuletrack. Get started today and see the difference."}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:s.jsxs(ce,{size:"lg",className:"text-lg px-8 py-6 bg-white text-[#f7c624] hover:bg-[#f7c624]/10 hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl rounded-xl font-semibold",onClick:()=>i(!0),children:[s.jsx(nw,{className:"h-5 w-5 mr-3"}),"Request a Demo"]})})]})}),s.jsx("footer",{className:"bg-slate-900 text-white py-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-2",children:[s.jsx("div",{className:"flex items-center space-x-2 mb-6",children:s.jsx("div",{className:"w-28  bg-white rounded-lg flex items-center justify-center",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/shuletrack_landscape_logo-100_gcmpht.jpg",alt:""})})}),s.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed max-w-md",children:"Modern school transportation management platform that helps schools improve safety, efficiency, and parent satisfaction."}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(pr,{className:"h-5 w-5 text-[#f7c624] mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-white mb-1",children:"Head Office"}),s.jsx("p",{className:"text-slate-300 text-sm",children:"Gesora Road, Utawala, Nairobi"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(va,{className:"h-5 w-5 text-[#f7c624] mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-white mb-1",children:"Mailing Address"}),s.jsx("p",{className:"text-slate-300 text-sm",children:s.jsx("a",{href:"mailto:info@eujimsloutions.com",className:"hover:text-[#f7c624] transition-colors",children:"Inquiry: info@eujimsloutions.com"})}),s.jsx("p",{className:"text-slate-300 text-sm",children:s.jsx("a",{href:"mailto:support@eujimsolutions.com",className:"hover:text-[#f7c624] transition-colors",children:"Support: support@eujimsolutions.com"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Va,{className:"h-5 w-5 text-[#f7c624] mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-white mb-1",children:"Business Talk"}),s.jsx("p",{className:"text-slate-300 text-sm",children:s.jsx("a",{href:"tel:+254113281424",className:"hover:text-[#f7c624] transition-colors",children:"+254 113281424"})})]})]})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"tel:+254113281424",className:"text-slate-400 hover:text-[#f7c624] transition-colors",title:"Call us",children:s.jsx(Va,{className:"h-5 w-5"})}),s.jsx("a",{href:"mailto:info@eujimsloutions.com",className:"text-slate-400 hover:text-[#f7c624] transition-colors",title:"Email us",children:s.jsx(va,{className:"h-5 w-5"})}),s.jsx("a",{href:"https://maps.google.com/?q=Gesora+Road,+Utawala,+Nairobi",target:"_blank",rel:"noopener noreferrer",className:"text-slate-400 hover:text-[#f7c624] transition-colors",title:"Visit our office",children:s.jsx(pr,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Product"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsx("li",{children:s.jsx("a",{href:"#features",className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"Features"})}),s.jsx("li",{children:s.jsx("a",{href:"#pricing",className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"Pricing"})}),s.jsx("li",{children:s.jsx("button",{onClick:()=>i(!0),className:"text-slate-300 hover:text-[#f7c624] transition-colors",children:"Demo"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Company"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsx("li",{children:s.jsx("a",{href:"#about",className:"text-slate-300 hover:text-[#f7c624] transition-colors",onClick:C=>{var P;C.preventDefault(),(P=document.getElementById("about"))==null||P.scrollIntoView({behavior:"smooth"})},children:"About Us"})}),s.jsx("li",{children:s.jsx("a",{href:"#contact",className:"text-slate-300 hover:text-[#f7c624] transition-colors",onClick:C=>{var P;C.preventDefault(),(P=document.getElementById("contact"))==null||P.scrollIntoView({behavior:"smooth"})},children:"Contact"})})]})]})]}),s.jsx("div",{className:"border-t border-slate-800 mt-12 pt-8 text-center",children:s.jsxs("p",{className:"text-slate-400",children:[" ",new Date().getFullYear()," Shule Track. Powered by ",s.jsx("a",{href:"https://eujimsolutions.com",target:"_blank",rel:"noopener noreferrer",className:"text-[#f7c624] hover:text-[#f7c624]/80 transition-colors",children:"EUJIM SOLUTIONS"}),"."]})})]})}),s.jsx(FH,{isOpen:a,onClose:()=>i(!1)})]})};function BH(){const e=zl(),t=Sa(),{plans:r,loading:n,error:a}=ca(u=>u.subscription),[i,o]=g.useState("month");g.useEffect(()=>{e(Ri())},[e]);const l=u=>{localStorage.setItem("selectedSubscriptionPlan",JSON.stringify(u)),t("/register",{state:{selectedPlan:u}})},c=u=>i==="year"?Math.round(u*12*.8):u,d=u=>u.id==="custom"?"Contact us":i==="year"?`KSH ${c(u.price).toLocaleString()}/year`:`KSH ${u.price.toLocaleString()}/${u.billingCycle}`;return n?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 pt-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx(Ds,{className:"h-12 w-96 mx-auto mb-4"}),s.jsx(Ds,{className:"h-6 w-2/3 mx-auto"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(u=>s.jsx(Ds,{className:"h-96 w-full"},u))})]})}):a?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 pt-20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Error Loading Pricing"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Unable to load pricing information. Please try again later."}),s.jsx(ce,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 pt-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx(Pe,{variant:"secondary",className:"bg-emerald-100 text-emerald-800 mb-4",children:"Pricing Plans"}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose the Perfect Plan for Your School"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Flexible pricing options designed to meet the needs of schools of all sizes. Start with what you need and scale as you grow."})]}),s.jsx("div",{className:"flex justify-center mb-8",children:s.jsxs("div",{className:"bg-white rounded-lg p-1 shadow-sm border",children:[s.jsx("button",{onClick:()=>o("month"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i==="month"?"bg-emerald-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"}),s.jsxs("button",{onClick:()=>o("year"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i==="year"?"bg-emerald-600 text-white":"text-gray-600 hover:text-gray-900"}`,children:["Yearly",s.jsx("span",{className:"ml-1 text-xs bg-emerald-100 text-emerald-800 px-2 py-0.5 rounded",children:"Save 20%"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(u=>{var h;return s.jsxs(Le,{className:`relative h-full transition-all duration-300 hover:shadow-xl ${u.popular?"ring-2 ring-emerald-500 shadow-lg":"hover:scale-105"}`,children:[u.popular&&s.jsx(Pe,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-emerald-600 text-white",children:"Most Popular"}),s.jsxs(Be,{className:"text-center pb-4",children:[s.jsx(Ue,{className:"text-2xl font-bold text-gray-900",children:u.name}),s.jsx(ys,{className:"text-gray-600",children:u.description})]}),s.jsxs(Te,{className:"space-y-6 flex-1",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-gray-900",children:u.id==="custom"?"Custom":`KSH ${c(u.price).toLocaleString()}`}),s.jsx("div",{className:"text-gray-600",children:d(u)}),i==="year"&&u.id!=="custom"&&s.jsxs("div",{className:"text-sm text-green-600 font-medium mt-1",children:["Save KSH"," ",(u.price*12-c(u.price)).toLocaleString(),"/year"]})]}),s.jsx("div",{className:"space-y-3",children:(h=u.features)==null?void 0:h.map((p,f)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Sn,{className:"h-5 w-5 text-emerald-600 flex-shrink-0"}),s.jsx("span",{className:"text-gray-700",children:p})]},f))}),s.jsxs(ce,{onClick:()=>l(u),className:`w-full ${u.popular?"bg-emerald-600 hover:bg-emerald-700":"bg-gray-900 hover:bg-gray-800"} text-white`,children:[u.id==="custom"?"Contact Sales":"Get Started",s.jsx(j5,{className:"ml-2 h-4 w-4"})]})]})]},u.id)})}),s.jsxs("div",{className:"mt-20",children:[s.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"Frequently Asked Questions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Can I change my plan later?"}),s.jsx("p",{className:"text-gray-600",children:"Yes, you can upgrade or downgrade your plan at any time. Changes will be reflected in your next billing cycle."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Is there a setup fee?"}),s.jsx("p",{className:"text-gray-600",children:"No setup fees for any of our plans. You only pay the monthly or yearly subscription fee."})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What payment methods do you accept?"}),s.jsx("p",{className:"text-gray-600",children:"We accept all major credit cards, bank transfers, and mobile money payments for your convenience."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Do you offer a free trial?"}),s.jsx("p",{className:"text-gray-600",children:"Yes, we offer a 14-day free trial for all plans so you can experience our platform before committing."})]})]})]})]})]})})}const zH=()=>{const e=zl(),{registrationLoading:t,registrationError:r,registrationSuccess:n}=ca(Y=>Y.schools),[a,i]=g.useState({schoolName:"",schoolType:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",website:"",principalName:"",principalPhone:"",principalEmail:"",adminPassword:"",description:"",longitude:"",latitude:"",operatingHoursStart:"06:30",operatingHoursEnd:"18:00",estimatedStudents:"",estimatedBuses:"",estimatedParents:""}),[o,l]=g.useState(null),[c,d]=g.useState({}),[u,h]=g.useState(""),[p,f]=g.useState(!1),[y,x]=g.useState(!1),w=Sa(),v=Mi(),{toast:b}=Ar();g.useEffect(()=>{var L;const Y=localStorage.getItem("selectedSubscriptionPlan"),k=(L=v.state)==null?void 0:L.selectedPlan;k?l(k):Y?l(JSON.parse(Y)):(b({title:"No Plan Selected",description:"Please select a subscription plan first."}),w("/subscription-selection"))},[v.state,w,b]),g.useEffect(()=>{n&&b({title:"Registration Successful",description:"Your school has been registered successfully!"})},[n,b]),g.useEffect(()=>{r&&b({variant:"destructive",title:"Registration Failed",description:r})},[r,b]);const N=Y=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y),C=Y=>{const k=Y.replace(/\D/g,"");return!!(k.startsWith("0")&&k.length===10||k.startsWith("254")&&k.length===12||k.startsWith("7")&&k.length===9||Y.startsWith("+254")&&Y.length===13)},P=Y=>{const k=Y.replace(/\D/g,"");return k.startsWith("0")?"+254"+k.substring(1):k.startsWith("254")?"+"+k:Y.startsWith("+")?Y:k.length===9?"+254"+k:Y},D=(Y,k)=>!Y||Y.trim()===""?`${k} is required`:"",R=()=>{const Y={};return Object.entries({schoolName:"School Name",address:"Address",city:"City",state:"State/Province",phone:"School Phone",email:"School Email",principalName:"Principal Name",principalPhone:"Principal Phone",principalEmail:"Admin Email",adminPassword:"Admin Password",estimatedStudents:"Estimated Number of Students",estimatedBuses:"Estimated Number of Buses",estimatedParents:"Estimated Number of Parents"}).forEach(([L,M])=>{const W=D(a[L],M);W&&(Y[L]=W)}),a.email&&!N(a.email)&&(Y.email="Please enter a valid email address"),a.phone&&!C(a.phone)&&(Y.phone="Please enter a valid phone number"),a.principalPhone&&!C(a.principalPhone)&&(Y.principalPhone="Please enter a valid phone number"),a.principalEmail&&!N(a.principalEmail)&&(Y.principalEmail="Please enter a valid admin email address"),a.adminPassword&&a.adminPassword.length<6&&(Y.adminPassword="Password must be at least 6 characters long"),a.website&&!a.website.match(/^https?:\/\/.+/)&&(Y.website="Please enter a valid website URL (include http:// or https://)"),a.estimatedStudents&&(isNaN(Number(a.estimatedStudents))||Number(a.estimatedStudents)<=0)&&(Y.estimatedStudents="Please enter a valid number of students"),a.estimatedBuses&&(isNaN(Number(a.estimatedBuses))||Number(a.estimatedBuses)<=0)&&(Y.estimatedBuses="Please enter a valid number of buses"),a.estimatedParents&&(isNaN(Number(a.estimatedParents))||Number(a.estimatedParents)<=0)&&(Y.estimatedParents="Please enter a valid number of parents"),d(Y),Object.keys(Y).length===0},[A,I]=g.useState([]),[O,F]=g.useState(!1),[E,$]=g.useState(null),U=Dy;g.useEffect(()=>{const Y=k=>{k.target.closest(".address-search-container")||F(!1)};return document.addEventListener("mousedown",Y),()=>{document.removeEventListener("mousedown",Y)}},[]);const K=Y=>{E&&clearTimeout(E);const k=setTimeout(()=>{Y.length>2?re(Y):(I([]),F(!1))},300);$(k)},re=async Y=>{if(!Y.trim()){I([]),F(!1);return}f(!0);try{const k=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(Y)}&types=establishment&components=country:ke&key=${U}`)}`);if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const L=await k.json();L.predictions&&L.predictions.length>0?(I(L.predictions),F(!0)):(I([]),F(!1))}catch{try{const L=await fetch(`https://corsproxy.io/?${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(Y)}&types=establishment&components=country:ke&key=${U}`)}`);if(L.ok){const M=await L.json();if(M.predictions&&M.predictions.length>0){I(M.predictions),F(!0);return}}}catch{}I([]),F(!1),b({variant:"destructive",title:"Search Error",description:"Could not search for locations. Please try again or enter coordinates manually."})}finally{f(!1)}},pe=async(Y,k)=>{try{const L=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/details/json?place_id=${Y}&fields=formatted_address,geometry&key=${U}`)}`);if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const M=await L.json();if(M.result&&M.result.geometry&&M.result.geometry.location){const{lat:W,lng:se}=M.result.geometry.location;i(ae=>({...ae,longitude:se.toString(),latitude:W.toString(),address:M.result.formatted_address||k})),I([]),F(!1),b({title:"Location Selected",description:"Coordinates have been set based on the selected location."})}else throw new Error("No location data found")}catch{try{const M=await fetch(`https://corsproxy.io/?${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/details/json?place_id=${Y}&fields=formatted_address,geometry&key=${U}`)}`);if(M.ok){const W=await M.json();if(W.result&&W.result.geometry&&W.result.geometry.location){const{lat:se,lng:ae}=W.result.geometry.location;i(ge=>({...ge,longitude:ae.toString(),latitude:se.toString(),address:W.result.formatted_address||k})),I([]),F(!1),b({title:"Location Selected",description:"Coordinates have been set based on the selected location."});return}}}catch{}i(M=>({...M,longitude:"36.689",latitude:"-1.3197",address:k})),I([]),F(!1),b({variant:"destructive",title:"Location Error",description:"Could not get location coordinates. Using default coordinates."})}},Q=Y=>parseFloat(Y).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2}),J=Y=>{const{name:k,value:L}=Y.target;i(M=>({...M,[k]:L}))},q=async Y=>{if(Y.preventDefault(),!R()){b({variant:"destructive",title:"Validation Error",description:"Please fix the errors in the form before submitting."});return}try{const k={school_name:a.schoolName,school_location:`${a.address}, ${a.city}, ${a.state}`,school_description:a.description,school_contact_number:P(a.phone),school_email:a.email,longitude:parseFloat(a.longitude)||36.689,latitude:parseFloat(a.latitude)||-1.3197,operating_hours_start:a.operatingHoursStart,operating_hours_end:a.operatingHoursEnd,admin_first_name:a.principalName.split(" ")[0]||a.principalName,admin_last_name:a.principalName.split(" ").slice(1).join(" ")||a.principalName,admin_phone_number:P(a.principalPhone),admin_email:a.principalEmail,admin_password:a.adminPassword,selected_plan_id:(o==null?void 0:o.id)||"1",billing_cycle:(o==null?void 0:o.default_billing_cycle)||"monthly",estimated_students:parseInt(a.estimatedStudents)||400,estimated_buses:parseInt(a.estimatedBuses)||4,estimated_parents:parseInt(a.estimatedParents)||800},L=await e(Yg(k)).unwrap();b({title:"Registration Submitted",description:"Your school registration has been submitted successfully. You can now log in with your admin credentials."}),localStorage.removeItem("selectedSubscriptionPlan"),w("/login")}catch(k){b({variant:"destructive",title:"Registration Failed",description:k instanceof Error?k.message:"Failed to submit registration. Please try again."})}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-[#f7c624]/10 p-4",children:s.jsxs(Le,{className:"w-full max-w-4xl shadow-xl",children:[s.jsxs(Be,{className:"text-center pb-4",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-[#f7c624]/20 rounded-full flex items-center justify-center mb-3",children:s.jsx(jr,{className:"h-6 w-6 text-[#f7c624]"})}),s.jsx(Ue,{className:"text-2xl font-bold text-slate-900",children:"Register Your School"}),s.jsx(ys,{className:"text-base text-slate-600",children:"Join Shuletrack and transform your school transportation management"})]}),s.jsx(Te,{children:s.jsxs("form",{onSubmit:q,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-base font-semibold text-slate-900 flex items-center",children:[s.jsx(jr,{className:"h-4 w-4 mr-2 text-[#f7c624]"}),"School Information"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"schoolName",children:"School Name *"}),s.jsx(Ie,{id:"schoolName",name:"schoolName",value:a.schoolName,onChange:J,placeholder:"Enter school name",required:!0,className:c.schoolName?"border-red-500":""}),c.schoolName&&s.jsx("p",{className:"text-sm text-red-500",children:c.schoolName})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"schoolType",children:"School Type *"}),s.jsx(Ie,{id:"schoolType",name:"schoolType",value:a.schoolType,onChange:J,placeholder:"Primary, Secondary, etc.",required:!0,className:c.schoolType?"border-red-500":""}),c.schoolType&&s.jsx("p",{className:"text-sm text-red-500",children:c.schoolType})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"website",children:"Website"}),s.jsx(Ie,{id:"website",name:"website",type:"url",value:a.website,onChange:J,placeholder:"https://www.school.edu",className:c.website?"border-red-500":""}),c.website&&s.jsx("p",{className:"text-sm text-red-500",children:c.website})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"address",children:"Address *"}),s.jsxs("div",{className:"relative address-search-container",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{id:"address",name:"address",value:a.address,onChange:Y=>{J(Y),K(Y.target.value)},placeholder:"Search for school location...",required:!0,className:c.address?"border-red-500":""}),p&&s.jsx("div",{className:"absolute right-12 top-1/2 transform -translate-y-1/2",children:s.jsx(ba,{className:"h-4 w-4 animate-spin"})})]}),O&&A.length>0&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:A.map((Y,k)=>{var L,M;return s.jsxs("button",{type:"button",className:"w-full px-4 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>pe(Y.place_id,Y.description),children:[s.jsx("div",{className:"font-medium text-sm",children:((L=Y.structured_formatting)==null?void 0:L.main_text)||Y.description}),s.jsx("div",{className:"text-xs text-gray-500",children:((M=Y.structured_formatting)==null?void 0:M.secondary_text)||""})]},k)})})]}),c.address&&s.jsx("p",{className:"text-sm text-red-500",children:c.address})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"city",children:"City *"}),s.jsx(Ie,{id:"city",name:"city",value:a.city,onChange:J,placeholder:"City",required:!0,className:c.city?"border-red-500":""}),c.city&&s.jsx("p",{className:"text-sm text-red-500",children:c.city})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"state",children:"State/Province *"}),s.jsx(Ie,{id:"state",name:"state",value:a.state,onChange:J,placeholder:"State",required:!0,className:c.state?"border-red-500":""}),c.state&&s.jsx("p",{className:"text-sm text-red-500",children:c.state})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"zipCode",children:"ZIP/Postal Code"}),s.jsx(Ie,{id:"zipCode",name:"zipCode",value:a.zipCode,onChange:J,placeholder:"ZIP code"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"phone",children:"School Phone *"}),s.jsx(Ie,{id:"phone",name:"phone",type:"tel",value:a.phone,onChange:J,placeholder:"e.g., 0723456789",required:!0,className:c.phone?"border-red-500":""}),c.phone&&s.jsx("p",{className:"text-sm text-red-500",children:c.phone})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"email",children:"School Email *"}),s.jsx(Ie,{id:"email",name:"email",type:"email",value:a.email,onChange:J,placeholder:"Email address",required:!0,className:c.email?"border-red-500":""}),c.email&&s.jsx("p",{className:"text-sm text-red-500",children:c.email})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"website",children:"Website"}),s.jsx(Ie,{id:"website",name:"website",type:"url",value:a.website,onChange:J,placeholder:"https://www.school.edu",className:c.website?"border-red-500":""}),c.website&&s.jsx("p",{className:"text-sm text-red-500",children:c.website})]})]}),o&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-base font-semibold text-slate-900 flex items-center",children:[s.jsx(XA,{className:"h-4 w-4 mr-2 text-[#f7c624]"}),"Selected Subscription Plan"]}),s.jsx(Le,{className:"border-[#f7c624]/30 bg-[#f7c624]/10",children:s.jsxs(Te,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-semibold text-[#f7c624]/80 text-sm",children:o.name.replace(/_/g," ").replace(/\b\w/g,Y=>Y.toUpperCase())}),s.jsxs(Pe,{className:"bg-[#f7c624] text-white text-xs",children:[Q(o.base_price),"/month"]})]}),s.jsx("p",{className:"text-xs text-[#f7c624]/70 mb-2",children:o.description}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:o.features_json.max_students}),s.jsx("div",{className:"text-[#f7c624] text-xs",children:"Students"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:o.features_json.max_buses}),s.jsx("div",{className:"text-[#f7c624] text-xs",children:"Buses"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:o.default_billing_cycle}),s.jsx("div",{className:"text-[#f7c624] text-xs",children:"Billing"})]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-base font-semibold text-slate-900 flex items-center",children:[s.jsx(ia,{className:"h-4 w-4 mr-2 text-[#f7c624]"}),"Admin Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"principalName",children:"Admin Name *"}),s.jsx(Ie,{id:"principalName",name:"principalName",value:a.principalName,onChange:J,placeholder:"Admin's full name",required:!0,className:c.principalName?"border-red-500":""}),c.principalName&&s.jsx("p",{className:"text-sm text-red-500",children:c.principalName})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"principalPhone",children:"Admin Phone *"}),s.jsx(Ie,{id:"principalPhone",name:"principalPhone",type:"tel",value:a.principalPhone,onChange:J,placeholder:"e.g., 0723456789",required:!0,className:c.principalPhone?"border-red-500":""}),c.principalPhone&&s.jsx("p",{className:"text-sm text-red-500",children:c.principalPhone})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"principalEmail",children:"Admin Email *"}),s.jsx(Ie,{id:"principalEmail",name:"principalEmail",type:"email",value:a.principalEmail,onChange:J,placeholder:"admin@schoolname.com",required:!0,className:c.principalEmail?"border-red-500":""}),c.principalEmail&&s.jsx("p",{className:"text-sm text-red-500",children:c.principalEmail})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"adminPassword",children:"Admin Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"adminPassword",name:"adminPassword",type:y?"text":"password",value:a.adminPassword,onChange:J,placeholder:"Enter admin password",required:!0,className:`pr-10 ${c.adminPassword?"border-red-500":""}`}),s.jsx(ce,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>x(!y),children:y?s.jsx(Mo,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(ir,{className:"h-4 w-4 text-muted-foreground"})})]}),c.adminPassword&&s.jsx("p",{className:"text-sm text-red-500",children:c.adminPassword})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Additional Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"description",children:"School Description"}),s.jsx(oa,{id:"description",name:"description",value:a.description,onChange:J,placeholder:"Tell us about your school, number of students, transportation needs, etc.",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"operatingHoursStart",children:"Operating Hours Start"}),s.jsx(Ie,{id:"operatingHoursStart",name:"operatingHoursStart",type:"time",value:a.operatingHoursStart,onChange:J})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"operatingHoursEnd",children:"Operating Hours End"}),s.jsx(Ie,{id:"operatingHoursEnd",name:"operatingHoursEnd",type:"time",value:a.operatingHoursEnd,onChange:J})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"estimatedStudents",children:"Estimated Number of Students *"}),s.jsx(Ie,{id:"estimatedStudents",name:"estimatedStudents",type:"number",value:a.estimatedStudents,onChange:J,placeholder:"e.g., 400",required:!0,className:c.estimatedStudents?"border-red-500":""}),c.estimatedStudents&&s.jsx("p",{className:"text-sm text-red-500",children:c.estimatedStudents})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"estimatedBuses",children:"Estimated Number of Buses *"}),s.jsx(Ie,{id:"estimatedBuses",name:"estimatedBuses",type:"number",value:a.estimatedBuses,onChange:J,placeholder:"e.g., 4",required:!0,className:c.estimatedBuses?"border-red-500":""}),c.estimatedBuses&&s.jsx("p",{className:"text-sm text-red-500",children:c.estimatedBuses})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"estimatedParents",children:"Estimated Number of Parents *"}),s.jsx(Ie,{id:"estimatedParents",name:"estimatedParents",type:"number",value:a.estimatedParents,onChange:J,placeholder:"e.g., 800",required:!0,className:c.estimatedParents?"border-red-500":""}),c.estimatedParents&&s.jsx("p",{className:"text-sm text-red-500",children:c.estimatedParents})]})]})]})]}),s.jsx(Wc,{children:s.jsx(Gc,{children:"By submitting this form, you agree to our terms of service and privacy policy. We will review your application and contact you within 24-48 hours."})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(ce,{type:"button",variant:"outline",className:"flex-1",onClick:()=>w("/home"),children:"Cancel"}),s.jsx(ce,{type:"submit",className:"flex-1 bg-[#f7c624] hover:bg-[#f7c624]/80",disabled:t,children:t?s.jsxs(s.Fragment,{children:[s.jsx(ba,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Registration"})]})]})})]})})};function UH(){const e=zl(),t=Sa(),{plans:r,loading:n,error:a}=ca(f=>f.subscription),[i,o]=g.useState(null);g.useEffect(()=>{e(Ri())},[e]);const l=f=>parseFloat(f).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2}),c=f=>{const y=f.toLowerCase();return y.includes("basic")||y.includes("starter")?{text:"Starter",variant:"secondary"}:y.includes("standard")||y.includes("medium")?{text:"Standard",variant:"default"}:y.includes("pro")||y.includes("professional")?{text:"Popular",variant:"default"}:y.includes("enterprise")||y.includes("premium")?{text:"Enterprise",variant:"default"}:null},d=f=>{const y=f.toLowerCase();return y.includes("basic")||y.includes("starter")?s.jsx(ns,{className:"h-6 w-6"}):y.includes("standard")||y.includes("medium")?s.jsx(ZU,{className:"h-6 w-6"}):y.includes("pro")||y.includes("professional")?s.jsx(Oi,{className:"h-6 w-6"}):y.includes("enterprise")||y.includes("premium")?s.jsx(b5,{className:"h-6 w-6"}):s.jsx($n,{className:"h-6 w-6"})},u=f=>{o(f)},h=()=>{i&&(localStorage.setItem("selectedSubscriptionPlan",JSON.stringify(i)),t("/register",{state:{selectedPlan:i,fromSubscription:!0}}))},p=Array.isArray(r)?r:[];return n?s.jsx("div",{className:"min-h-screen bg-slate-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx(Ds,{className:"h-8 w-32 mx-auto mb-4"}),s.jsx(Ds,{className:"h-12 w-96 mx-auto mb-6"}),s.jsx(Ds,{className:"h-6 w-96 mx-auto"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(f=>s.jsxs(Le,{className:"border-0 shadow-lg",children:[s.jsxs(Be,{children:[s.jsx(Ds,{className:"h-6 w-32 mb-2"}),s.jsx(Ds,{className:"h-4 w-48"})]}),s.jsxs(Te,{children:[s.jsx(Ds,{className:"h-8 w-24 mb-4"}),s.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(y=>s.jsx(Ds,{className:"h-4 w-full"},y))})]})]},f))})]})}):a?s.jsx("div",{className:"min-h-screen bg-slate-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[s.jsx("h2",{className:"text-red-800 font-semibold text-xl mb-2",children:"Error Loading Subscription Plans"}),s.jsx("p",{className:"text-red-600 mb-4",children:a}),s.jsx(ce,{onClick:()=>e(Ri()),className:"bg-red-600 hover:bg-red-700",children:"Retry"})]})})}):s.jsxs("div",{className:"min-h-screen bg-slate-900",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px- py-1",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white ",children:["Select Your Perfect",s.jsx("span",{className:"text-[#f7c624] block",children:"Subscription Plan"})]}),s.jsx("p",{className:"text-lg text-slate-300 max-w-2xl mx-auto leading-relaxed",children:"Choose the plan that best fits your school's needs. You can always upgrade or downgrade later."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:p.map(f=>{const y=c(f.name),x=d(f.name),w=(i==null?void 0:i.id)===f.id;return s.jsxs(Le,{className:`relative border-2 transition-all duration-300 hover:-translate-y-1 rounded-xl overflow-hidden cursor-pointer ${w?"border-[#f7c624] shadow-lg scale-102 bg-slate-800":"border-slate-700 shadow-md hover:shadow-lg bg-slate-800"}`,onClick:()=>u(f),children:[!f.is_active&&s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx(Pe,{variant:"secondary",children:"Inactive"})}),w&&s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx(Pe,{className:"bg-[#f7c624] text-white",children:"Selected"})}),y&&!w&&s.jsx("div",{className:`text-center py-2 text-sm font-medium ${y.text==="Popular"?"bg-[#f7c624] text-white":"bg-slate-100 text-slate-700"}`,children:y.text}),s.jsxs(Be,{className:"text-center pb-4",children:[s.jsx("div",{className:"flex justify-center mb-3",children:s.jsx("div",{className:"w-10 h-10 bg-[#f7c624] rounded-lg flex items-center justify-center text-white",children:x})}),s.jsx(Ue,{className:"text-xl font-bold text-white mb-2",children:f.name.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase())}),s.jsx(ys,{className:"text-slate-300 text-sm",children:f.description})]}),s.jsxs(Te,{className:"pb-6",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-2xl font-bold text-white",children:l(f.base_price)}),s.jsx("span",{className:"text-slate-300",children:"/month"})]}),s.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[s.jsxs("div",{children:["+ ",l(f.price_per_student)," per student"]}),s.jsxs("div",{children:["+ ",l(f.price_per_bus)," per bus"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-white mb-2 text-center text-sm",children:"Plan Limits"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"text-center p-1 bg-slate-700 rounded",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:f.features_json.max_students}),s.jsx("div",{className:"text-slate-300 text-xs",children:"Students"})]}),s.jsxs("div",{className:"text-center p-1 bg-slate-700 rounded",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:f.features_json.max_parents}),s.jsx("div",{className:"text-slate-300 text-xs",children:"Parents"})]}),s.jsxs("div",{className:"text-center p-1 bg-slate-700 rounded",children:[s.jsx("div",{className:"font-semibold text-[#f7c624]",children:f.features_json.max_buses}),s.jsx("div",{className:"text-slate-300 text-xs",children:"Buses"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-white mb-2 text-sm",children:"Features"}),s.jsx("div",{className:"space-y-1",children:Object.entries(f.features_json).map(([v,b])=>typeof b=="boolean"?s.jsx("div",{className:"flex items-center justify-between text-xs",children:s.jsxs("div",{className:"flex items-center gap-2",children:[b?s.jsx(Sn,{className:"h-3 w-3 text-[#f7c624]"}):s.jsx(co,{className:"h-3 w-3 text-red-500"}),s.jsx("span",{className:"capitalize text-white",children:v.replace(/_/g," ")})]})},v):null)})]}),s.jsx("div",{className:"pt-3 border-t border-slate-700 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-slate-100",children:"Billing Cycle:"}),s.jsx(Pe,{variant:"outline",className:"capitalize text-slate-100 text-xs",children:f.default_billing_cycle})]})}),w&&s.jsx("div",{className:"pt-3 border-t border-slate-200",children:s.jsxs(ce,{className:"w-full bg-[#f7c624] hover:bg-[#f7c624] text-white font-semibold transition-all duration-200 hover:scale-105 shadow-lg",onClick:h,children:["Continue to Registration",s.jsx(j5,{className:"h-4 w-4 ml-2"})]})})]})]},f.id)})}),p.length===0&&!n&&s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[s.jsx(wn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Subscription Plans Available"}),s.jsx("p",{children:"Please contact support to set up subscription plans."})]})}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("div",{className:"bg-[#f7c624] p-6 rounded-xl border border-[#f7c624]",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[s.jsx(qd,{className:"h-4 w-4 text-white"}),s.jsx("span",{className:"text-white font-semibold text-sm",children:"All plans include:"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-white",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Sn,{className:"h-3 w-3"}),s.jsx("span",{children:"24/7 Support"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Sn,{className:"h-3 w-3"}),s.jsx("span",{children:"Free Setup"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Sn,{className:"h-3 w-3"}),s.jsx("span",{children:"No Hidden Fees"})]})]})]})})]}),s.jsx("footer",{className:"bg-slate-900 text-white py-16",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[s.jsx("div",{className:"w-8 h-8 bg-[#f7c624] rounded-lg flex items-center justify-center",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/Shule_Track_favicon_logo-100_u2kc1z.jpg",alt:""})}),s.jsx("span",{className:"text-xl font-bold",children:"Shuletrack"})]}),s.jsx("p",{className:"text-slate-300 mb-6 leading-relaxed max-w-md",children:"Modern school transportation management platform that helps schools improve safety, efficiency, and parent satisfaction."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"#",className:"text-slate-400 hover:text-[#f7c624] transition-colors",children:s.jsx(Va,{className:"h-5 w-5"})}),s.jsx("a",{href:"#",className:"text-slate-400 hover:text-[#f7c624] transition-colors",children:s.jsx(va,{className:"h-5 w-5"})}),s.jsx("a",{href:"#",className:"text-slate-400 hover:text-emerald-400 transition-colors",children:s.jsx(pr,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Product"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Features"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Pricing"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Demo"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"API"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Company"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"About"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Blog"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Careers"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-slate-300 hover:text-emerald-400 transition-colors",children:"Contact"})})]})]})]}),s.jsx("div",{className:"border-t border-slate-800  pt-8 text-center",children:s.jsxs("p",{className:"text-slate-400",children:[" ",new Date().getFullYear()," shuletrack. All rights reserved."]})})]})})]})}const qH=()=>{const e=Sa(),t=Mi(),[r,n]=g.useState(null);g.useEffect(()=>{var c;const o=localStorage.getItem("selectedSubscriptionPlan"),l=(c=t.state)==null?void 0:c.selectedPlan;l?n(l):o&&n(JSON.parse(o))},[t.state]);const a=o=>parseFloat(o).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2}),i=o=>{const l=o.toLowerCase();return l.includes("basic")?"Basic Plan":l.includes("standard")?"Standard Plan":l.includes("premium")?"Premium Plan":l.includes("pro")||l.includes("professional")?"Professional Plan":l.includes("enterprise")?"Enterprise Plan":o.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase())};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-emerald-50 p-4",children:s.jsxs(Le,{className:"w-full max-w-2xl shadow-xl",children:[s.jsxs(Be,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mb-6",children:s.jsx(ar,{className:"h-10 w-10 text-amber-600"})}),s.jsx(Ue,{className:"text-3xl font-bold text-slate-900 mb-2",children:"Registration Under Review"}),s.jsx(ys,{className:"text-lg text-slate-600",children:"Thank you for registering your school with LuxCub. We're currently reviewing your application."})]}),s.jsxs(Te,{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsxs(Pe,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-200 px-4 py-2 text-base",children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Pending Verification"]})}),r&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[s.jsx(XA,{className:"h-5 w-5 text-emerald-600"}),"Selected Subscription Plan"]}),s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-emerald-800 text-lg",children:i(r.name)}),s.jsx("p",{className:"text-emerald-700 text-sm",children:r.description})]}),s.jsx(Pe,{className:"bg-emerald-600 text-white",children:r.default_billing_cycle})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-emerald-700 font-medium",children:"Base Price:"}),s.jsxs("span",{className:"font-semibold text-emerald-800",children:[a(r.base_price),"/month"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-emerald-700",children:"Per Student:"}),s.jsx("span",{className:"text-emerald-800",children:a(r.price_per_student)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-emerald-700",children:"Per Bus:"}),s.jsx("span",{className:"text-emerald-800",children:a(r.price_per_bus)})]})]}),s.jsx("div",{className:"mt-4 pt-3 border-t border-emerald-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-emerald-700 font-medium",children:"Plan Limits:"}),s.jsxs("div",{className:"flex gap-4 text-xs text-emerald-700",children:[s.jsxs("span",{children:[r.features_json.max_students," Students"]}),s.jsxs("span",{children:[r.features_json.max_parents," Parents"]}),s.jsxs("span",{children:[r.features_json.max_buses," Buses"]})]})]})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"What happens next?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mt-0.5",children:s.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"1"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-700 font-medium",children:"Application Review"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"Our team will review your school information and verify details."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mt-0.5",children:s.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"2"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-700 font-medium",children:"Contact Verification"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"We'll contact you to verify your information and discuss setup."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mt-0.5",children:s.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:"3"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-700 font-medium",children:"Account Setup"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"Once approved, we'll set up your account and provide access credentials."})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Expected Timeline"}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ht,{className:"h-5 w-5 text-emerald-600"}),s.jsx("span",{className:"text-slate-700 font-medium",children:"Application Submitted"})]}),s.jsx("span",{className:"text-sm text-slate-500",children:"Today"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ar,{className:"h-5 w-5 text-amber-600"}),s.jsx("span",{className:"text-slate-700 font-medium",children:"Under Review"})]}),s.jsx("span",{className:"text-sm text-slate-500",children:"1-2 business days"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(jr,{className:"h-5 w-5 text-slate-400"}),s.jsx("span",{className:"text-slate-500 font-medium",children:"Account Setup"})]}),s.jsx("span",{className:"text-sm text-slate-500",children:"2-3 business days"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Need Help?"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[s.jsx(va,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Email Support"}),s.jsx("p",{className:"text-xs text-slate-600",children:"hello@luxcub.com"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[s.jsx(Va,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Phone Support"}),s.jsx("p",{className:"text-xs text-slate-600",children:"+1 (555) 123-4567"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[s.jsxs(ce,{variant:"outline",className:"flex-1",onClick:()=>e("/home"),children:[s.jsx(pv,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),s.jsx(ce,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700",onClick:()=>e("/login"),children:"Try Demo Account"})]})]})]})})},jb=768;function VH(){const[e,t]=g.useState(void 0);return g.useEffect(()=>{const r=window.matchMedia(`(max-width: ${jb-1}px)`),n=()=>{t(window.innerWidth<jb)};return r.addEventListener("change",n),t(window.innerWidth<jb),()=>r.removeEventListener("change",n)},[]),!!e}var HH="Separator",A3="horizontal",WH=["horizontal","vertical"],VE=g.forwardRef((e,t)=>{const{decorative:r,orientation:n=A3,...a}=e,i=GH(n)?n:A3,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(Mt.div,{"data-orientation":i,...l,...a,ref:t})});VE.displayName=HH;function GH(e){return WH.includes(e)}var HE=VE;const nu=g.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(HE,{ref:a,decorative:r,orientation:t,className:it("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));nu.displayName=HE.displayName;const KH=["top","right","bottom","left"],sd=Math.min,ni=Math.max,bv=Math.round,gg=Math.floor,Ho=e=>({x:e,y:e}),YH={left:"right",right:"left",bottom:"top",top:"bottom"},JH={start:"end",end:"start"};function cw(e,t,r){return ni(e,sd(t,r))}function Al(e,t){return typeof e=="function"?e(t):e}function El(e){return e.split("-")[0]}function If(e){return e.split("-")[1]}function F5(e){return e==="x"?"y":"x"}function D5(e){return e==="y"?"height":"width"}function $o(e){return["top","bottom"].includes(El(e))?"y":"x"}function O5(e){return F5($o(e))}function ZH(e,t,r){r===void 0&&(r=!1);const n=If(e),a=O5(e),i=D5(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=wv(o)),[o,wv(o)]}function XH(e){const t=wv(e);return[dw(e),t,dw(t)]}function dw(e){return e.replace(/start|end/g,t=>JH[t])}function QH(e,t,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?i:o;default:return[]}}function eW(e,t,r,n){const a=If(e);let i=QH(El(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(dw)))),i}function wv(e){return e.replace(/left|right|bottom|top/g,t=>YH[t])}function tW(e){return{top:0,right:0,bottom:0,left:0,...e}}function WE(e){return typeof e!="number"?tW(e):{top:e,right:e,bottom:e,left:e}}function Nv(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function E3(e,t,r){let{reference:n,floating:a}=e;const i=$o(t),o=O5(t),l=D5(o),c=El(t),d=i==="y",u=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,p=n[l]/2-a[l]/2;let f;switch(c){case"top":f={x:u,y:n.y-a.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-a.width,y:h};break;default:f={x:n.x,y:n.y}}switch(If(t)){case"start":f[o]-=p*(r&&d?-1:1);break;case"end":f[o]+=p*(r&&d?-1:1);break}return f}const sW=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=E3(d,n,c),p=n,f={},y=0;for(let x=0;x<l.length;x++){const{name:w,fn:v}=l[x],{x:b,y:N,data:C,reset:P}=await v({x:u,y:h,initialPlacement:n,placement:p,strategy:a,middlewareData:f,rects:d,platform:o,elements:{reference:e,floating:t}});u=b??u,h=N??h,f={...f,[w]:{...f[w],...C}},P&&y<=50&&(y++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(d=P.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):P.rects),{x:u,y:h}=E3(d,p,c)),x=-1)}return{x:u,y:h,placement:p,strategy:a,middlewareData:f}};async function Ep(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=Al(t,e),y=WE(f),w=l[p?h==="floating"?"reference":"floating":h],v=Nv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(w)))==null||r?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),b=h==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},P=Nv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:N,strategy:c}):b);return{top:(v.top-P.top+y.top)/C.y,bottom:(P.bottom-v.bottom+y.bottom)/C.y,left:(v.left-P.left+y.left)/C.x,right:(P.right-v.right+y.right)/C.x}}const rW=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Al(e,t)||{};if(d==null)return{};const h=WE(u),p={x:r,y:n},f=O5(a),y=D5(f),x=await o.getDimensions(d),w=f==="y",v=w?"top":"left",b=w?"bottom":"right",N=w?"clientHeight":"clientWidth",C=i.reference[y]+i.reference[f]-p[f]-i.floating[y],P=p[f]-i.reference[f],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let R=D?D[N]:0;(!R||!await(o.isElement==null?void 0:o.isElement(D)))&&(R=l.floating[N]||i.floating[y]);const A=C/2-P/2,I=R/2-x[y]/2-1,O=sd(h[v],I),F=sd(h[b],I),E=O,$=R-x[y]-F,U=R/2-x[y]/2+A,K=cw(E,U,$),re=!c.arrow&&If(a)!=null&&U!==K&&i.reference[y]/2-(U<E?O:F)-x[y]/2<0,pe=re?U<E?U-E:U-$:0;return{[f]:p[f]+pe,data:{[f]:K,centerOffset:U-K-pe,...re&&{alignmentOffset:pe}},reset:re}}}),nW=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:x=!0,...w}=Al(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=El(a),b=$o(l),N=El(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(d.floating)),P=p||(N||!x?[wv(l)]:XH(l)),D=y!=="none";!p&&D&&P.push(...eW(l,x,y,C));const R=[l,...P],A=await Ep(t,w),I=[];let O=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&I.push(A[v]),h){const U=ZH(a,o,C);I.push(A[U[0]],A[U[1]])}if(O=[...O,{placement:a,overflows:I}],!I.every(U=>U<=0)){var F,E;const U=(((F=i.flip)==null?void 0:F.index)||0)+1,K=R[U];if(K&&(!(h==="alignment"?b!==$o(K):!1)||O.every(Q=>Q.overflows[0]>0&&$o(Q.placement)===b)))return{data:{index:U,overflows:O},reset:{placement:K}};let re=(E=O.filter(pe=>pe.overflows[0]<=0).sort((pe,Q)=>pe.overflows[1]-Q.overflows[1])[0])==null?void 0:E.placement;if(!re)switch(f){case"bestFit":{var $;const pe=($=O.filter(Q=>{if(D){const J=$o(Q.placement);return J===b||J==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(J=>J>0).reduce((J,q)=>J+q,0)]).sort((Q,J)=>Q[1]-J[1])[0])==null?void 0:$[0];pe&&(re=pe);break}case"initialPlacement":re=l;break}if(a!==re)return{reset:{placement:re}}}return{}}}};function L3(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function T3(e){return KH.some(t=>e[t]>=0)}const aW=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=Al(e,t);switch(n){case"referenceHidden":{const i=await Ep(t,{...a,elementContext:"reference"}),o=L3(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:T3(o)}}}case"escaped":{const i=await Ep(t,{...a,altBoundary:!0}),o=L3(i,r.floating);return{data:{escapedOffsets:o,escaped:T3(o)}}}default:return{}}}}};async function iW(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=El(r),l=If(r),c=$o(r)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,h=Al(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof y=="number"&&(f=l==="end"?y*-1:y),c?{x:f*u,y:p*d}:{x:p*d,y:f*u}}const oW=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await iW(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},lW=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:v,y:b}=w;return{x:v,y:b}}},...c}=Al(e,t),d={x:r,y:n},u=await Ep(t,c),h=$o(El(a)),p=F5(h);let f=d[p],y=d[h];if(i){const w=p==="y"?"top":"left",v=p==="y"?"bottom":"right",b=f+u[w],N=f-u[v];f=cw(b,f,N)}if(o){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",b=y+u[w],N=y-u[v];y=cw(b,y,N)}const x=l.fn({...t,[p]:f,[h]:y});return{...x,data:{x:x.x-r,y:x.y-n,enabled:{[p]:i,[h]:o}}}}}},cW=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Al(e,t),u={x:r,y:n},h=$o(a),p=F5(h);let f=u[p],y=u[h];const x=Al(l,t),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const N=p==="y"?"height":"width",C=i.reference[p]-i.floating[N]+w.mainAxis,P=i.reference[p]+i.reference[N]-w.mainAxis;f<C?f=C:f>P&&(f=P)}if(d){var v,b;const N=p==="y"?"width":"height",C=["top","left"].includes(El(a)),P=i.reference[h]-i.floating[N]+(C&&((v=o.offset)==null?void 0:v[h])||0)+(C?0:w.crossAxis),D=i.reference[h]+i.reference[N]+(C?0:((b=o.offset)==null?void 0:b[h])||0)-(C?w.crossAxis:0);y<P?y=P:y>D&&(y=D)}return{[p]:f,[h]:y}}}},dW=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Al(e,t),u=await Ep(t,d),h=El(a),p=If(a),f=$o(a)==="y",{width:y,height:x}=i.floating;let w,v;h==="top"||h==="bottom"?(w=h,v=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,w=p==="end"?"top":"bottom");const b=x-u.top-u.bottom,N=y-u.left-u.right,C=sd(x-u[w],b),P=sd(y-u[v],N),D=!t.middlewareData.shift;let R=C,A=P;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(A=N),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(R=b),D&&!p){const O=ni(u.left,0),F=ni(u.right,0),E=ni(u.top,0),$=ni(u.bottom,0);f?A=y-2*(O!==0||F!==0?O+F:ni(u.left,u.right)):R=x-2*(E!==0||$!==0?E+$:ni(u.top,u.bottom))}await c({...t,availableWidth:A,availableHeight:R});const I=await o.getDimensions(l.floating);return y!==I.width||x!==I.height?{reset:{rects:!0}}:{}}}};function Hy(){return typeof window<"u"}function Ff(e){return GE(e)?(e.nodeName||"").toLowerCase():"#document"}function ci(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Jo(e){var t;return(t=(GE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function GE(e){return Hy()?e instanceof Node||e instanceof ci(e).Node:!1}function mo(e){return Hy()?e instanceof Element||e instanceof ci(e).Element:!1}function Ko(e){return Hy()?e instanceof HTMLElement||e instanceof ci(e).HTMLElement:!1}function R3(e){return!Hy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ci(e).ShadowRoot}function ex(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=po(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function uW(e){return["table","td","th"].includes(Ff(e))}function Wy(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function M5(e){const t=$5(),r=mo(e)?po(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function hW(e){let t=rd(e);for(;Ko(t)&&!pf(t);){if(M5(t))return t;if(Wy(t))return null;t=rd(t)}return null}function $5(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function pf(e){return["html","body","#document"].includes(Ff(e))}function po(e){return ci(e).getComputedStyle(e)}function Gy(e){return mo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function rd(e){if(Ff(e)==="html")return e;const t=e.assignedSlot||e.parentNode||R3(e)&&e.host||Jo(e);return R3(t)?t.host:t}function KE(e){const t=rd(e);return pf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ko(t)&&ex(t)?t:KE(t)}function Lp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=KE(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=ci(a);if(i){const l=uw(o);return t.concat(o,o.visualViewport||[],ex(a)?a:[],l&&r?Lp(l):[])}return t.concat(a,Lp(a,[],r))}function uw(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function YE(e){const t=po(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Ko(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=bv(r)!==i||bv(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function B5(e){return mo(e)?e:e.contextElement}function Uh(e){const t=B5(e);if(!Ko(t))return Ho(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=YE(t);let o=(i?bv(r.width):r.width)/n,l=(i?bv(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const fW=Ho(0);function JE(e){const t=ci(e);return!$5()||!t.visualViewport?fW:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mW(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ci(e)?!1:t}function pu(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=B5(e);let o=Ho(1);t&&(n?mo(n)&&(o=Uh(n)):o=Uh(e));const l=mW(i,r,n)?JE(i):Ho(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(i){const p=ci(i),f=n&&mo(n)?ci(n):n;let y=p,x=uw(y);for(;x&&n&&f!==y;){const w=Uh(x),v=x.getBoundingClientRect(),b=po(x),N=v.left+(x.clientLeft+parseFloat(b.paddingLeft))*w.x,C=v.top+(x.clientTop+parseFloat(b.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,h*=w.y,c+=N,d+=C,y=ci(x),x=uw(y)}}return Nv({width:u,height:h,x:c,y:d})}function z5(e,t){const r=Gy(e).scrollLeft;return t?t.left+r:pu(Jo(e)).left+r}function ZE(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:z5(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function pW(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Jo(n),l=t?Wy(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Ho(1);const u=Ho(0),h=Ko(n);if((h||!h&&!i)&&((Ff(n)!=="body"||ex(o))&&(c=Gy(n)),Ko(n))){const f=pu(n);d=Uh(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const p=o&&!h&&!i?ZE(o,c,!0):Ho(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+p.x,y:r.y*d.y-c.scrollTop*d.y+u.y+p.y}}function xW(e){return Array.from(e.getClientRects())}function gW(e){const t=Jo(e),r=Gy(e),n=e.ownerDocument.body,a=ni(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=ni(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+z5(e);const l=-r.scrollTop;return po(n).direction==="rtl"&&(o+=ni(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function vW(e,t){const r=ci(e),n=Jo(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=$5();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function yW(e,t){const r=pu(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Ko(e)?Uh(e):Ho(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function I3(e,t,r){let n;if(t==="viewport")n=vW(e,r);else if(t==="document")n=gW(Jo(e));else if(mo(t))n=yW(t,r);else{const a=JE(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Nv(n)}function XE(e,t){const r=rd(e);return r===t||!mo(r)||pf(r)?!1:po(r).position==="fixed"||XE(r,t)}function jW(e,t){const r=t.get(e);if(r)return r;let n=Lp(e,[],!1).filter(l=>mo(l)&&Ff(l)!=="body"),a=null;const i=po(e).position==="fixed";let o=i?rd(e):e;for(;mo(o)&&!pf(o);){const l=po(o),c=M5(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||ex(o)&&!c&&XE(e,o))?n=n.filter(u=>u!==o):a=l,o=rd(o)}return t.set(e,n),n}function bW(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?Wy(t)?[]:jW(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const h=I3(t,u,a);return d.top=ni(h.top,d.top),d.right=sd(h.right,d.right),d.bottom=sd(h.bottom,d.bottom),d.left=ni(h.left,d.left),d},I3(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function wW(e){const{width:t,height:r}=YE(e);return{width:t,height:r}}function NW(e,t,r){const n=Ko(t),a=Jo(t),i=r==="fixed",o=pu(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ho(0);function d(){c.x=z5(a)}if(n||!n&&!i)if((Ff(t)!=="body"||ex(a))&&(l=Gy(t)),n){const f=pu(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?ZE(a,l):Ho(0),h=o.left+l.scrollLeft-c.x-u.x,p=o.top+l.scrollTop-c.y-u.y;return{x:h,y:p,width:o.width,height:o.height}}function bb(e){return po(e).position==="static"}function F3(e,t){if(!Ko(e)||po(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Jo(e)===r&&(r=r.ownerDocument.body),r}function QE(e,t){const r=ci(e);if(Wy(e))return r;if(!Ko(e)){let a=rd(e);for(;a&&!pf(a);){if(mo(a)&&!bb(a))return a;a=rd(a)}return r}let n=F3(e,t);for(;n&&uW(n)&&bb(n);)n=F3(n,t);return n&&pf(n)&&bb(n)&&!M5(n)?r:n||hW(e)||r}const SW=async function(e){const t=this.getOffsetParent||QE,r=this.getDimensions,n=await r(e.floating);return{reference:NW(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function _W(e){return po(e).direction==="rtl"}const CW={convertOffsetParentRelativeRectToViewportRelativeRect:pW,getDocumentElement:Jo,getClippingRect:bW,getOffsetParent:QE,getElementRects:SW,getClientRects:xW,getDimensions:wW,getScale:Uh,isElement:mo,isRTL:_W};function e8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function kW(e,t){let r=null,n;const a=Jo(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:p,height:f}=d;if(l||t(),!p||!f)return;const y=gg(h),x=gg(a.clientWidth-(u+p)),w=gg(a.clientHeight-(h+f)),v=gg(u),N={rootMargin:-y+"px "+-x+"px "+-w+"px "+-v+"px",threshold:ni(0,sd(1,c))||1};let C=!0;function P(D){const R=D[0].intersectionRatio;if(R!==c){if(!C)return o();R?o(!1,R):n=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!e8(d,e.getBoundingClientRect())&&o(),C=!1}try{r=new IntersectionObserver(P,{...N,root:a.ownerDocument})}catch{r=new IntersectionObserver(P,N)}r.observe(e)}return o(!0),i}function PW(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=B5(e),u=a||i?[...d?Lp(d):[],...Lp(t)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const h=d&&l?kW(d,r):null;let p=-1,f=null;o&&(f=new ResizeObserver(v=>{let[b]=v;b&&b.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var N;(N=f)==null||N.observe(t)})),r()}),d&&!c&&f.observe(d),f.observe(t));let y,x=c?pu(e):null;c&&w();function w(){const v=pu(e);x&&!e8(x,v)&&r(),x=v,y=requestAnimationFrame(w)}return r(),()=>{var v;u.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),h==null||h(),(v=f)==null||v.disconnect(),f=null,c&&cancelAnimationFrame(y)}}const AW=oW,EW=lW,LW=nW,TW=dW,RW=aW,D3=rW,IW=cW,FW=(e,t,r)=>{const n=new Map,a={platform:CW,...r},i={...a.platform,_c:n};return sW(e,t,{...a,platform:i})};var DW=typeof document<"u",OW=function(){},E0=DW?g.useLayoutEffect:OW;function Sv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Sv(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Sv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function t8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function O3(e,t){const r=t8(e);return Math.round(t*r)/r}function wb(e){const t=g.useRef(e);return E0(()=>{t.current=e}),t}function MW(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=g.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=g.useState(n);Sv(p,n)||f(n);const[y,x]=g.useState(null),[w,v]=g.useState(null),b=g.useCallback(Q=>{Q!==D.current&&(D.current=Q,x(Q))},[]),N=g.useCallback(Q=>{Q!==R.current&&(R.current=Q,v(Q))},[]),C=i||y,P=o||w,D=g.useRef(null),R=g.useRef(null),A=g.useRef(u),I=c!=null,O=wb(c),F=wb(a),E=wb(d),$=g.useCallback(()=>{if(!D.current||!R.current)return;const Q={placement:t,strategy:r,middleware:p};F.current&&(Q.platform=F.current),FW(D.current,R.current,Q).then(J=>{const q={...J,isPositioned:E.current!==!1};U.current&&!Sv(A.current,q)&&(A.current=q,pd.flushSync(()=>{h(q)}))})},[p,t,r,F,E]);E0(()=>{d===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(Q=>({...Q,isPositioned:!1})))},[d]);const U=g.useRef(!1);E0(()=>(U.current=!0,()=>{U.current=!1}),[]),E0(()=>{if(C&&(D.current=C),P&&(R.current=P),C&&P){if(O.current)return O.current(C,P,$);$()}},[C,P,$,O,I]);const K=g.useMemo(()=>({reference:D,floating:R,setReference:b,setFloating:N}),[b,N]),re=g.useMemo(()=>({reference:C,floating:P}),[C,P]),pe=g.useMemo(()=>{const Q={position:r,left:0,top:0};if(!re.floating)return Q;const J=O3(re.floating,u.x),q=O3(re.floating,u.y);return l?{...Q,transform:"translate("+J+"px, "+q+"px)",...t8(re.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:J,top:q}},[r,l,re.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:$,refs:K,elements:re,floatingStyles:pe}),[u,$,K,re,pe])}const $W=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?D3({element:n.current,padding:a}).fn(r):{}:n?D3({element:n,padding:a}).fn(r):{}}}},BW=(e,t)=>({...AW(e),options:[e,t]}),zW=(e,t)=>({...EW(e),options:[e,t]}),UW=(e,t)=>({...IW(e),options:[e,t]}),qW=(e,t)=>({...LW(e),options:[e,t]}),VW=(e,t)=>({...TW(e),options:[e,t]}),HW=(e,t)=>({...RW(e),options:[e,t]}),WW=(e,t)=>({...$W(e),options:[e,t]});var GW="Arrow",s8=g.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Mt.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});s8.displayName=GW;var KW=s8;function U5(e){const[t,r]=g.useState(void 0);return qn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var q5="Popper",[r8,vd]=_a(q5),[YW,n8]=r8(q5),a8=e=>{const{__scopePopper:t,children:r}=e,[n,a]=g.useState(null);return s.jsx(YW,{scope:t,anchor:n,onAnchorChange:a,children:r})};a8.displayName=q5;var i8="PopperAnchor",o8=g.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=n8(i8,r),o=g.useRef(null),l=_s(t,o);return g.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Mt.div,{...a,ref:l})});o8.displayName=i8;var V5="PopperContent",[JW,ZW]=r8(V5),l8=g.forwardRef((e,t)=>{var ae,ge,fe,Me,de,$e;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:y,...x}=e,w=n8(V5,r),[v,b]=g.useState(null),N=_s(t,Ye=>b(Ye)),[C,P]=g.useState(null),D=U5(C),R=(D==null?void 0:D.width)??0,A=(D==null?void 0:D.height)??0,I=n+(i!=="center"?"-"+i:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(d)?d:[d],E=F.length>0,$={padding:O,boundary:F.filter(QW),altBoundary:E},{refs:U,floatingStyles:K,placement:re,isPositioned:pe,middlewareData:Q}=MW({strategy:"fixed",placement:I,whileElementsMounted:(...Ye)=>PW(...Ye,{animationFrame:f==="always"}),elements:{reference:w.anchor},middleware:[BW({mainAxis:a+A,alignmentAxis:o}),c&&zW({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?UW():void 0,...$}),c&&qW({...$}),VW({...$,apply:({elements:Ye,rects:mt,availableWidth:Se,availableHeight:oe})=>{const{width:vt,height:me}=mt.reference,xe=Ye.floating.style;xe.setProperty("--radix-popper-available-width",`${Se}px`),xe.setProperty("--radix-popper-available-height",`${oe}px`),xe.setProperty("--radix-popper-anchor-width",`${vt}px`),xe.setProperty("--radix-popper-anchor-height",`${me}px`)}}),C&&WW({element:C,padding:l}),eG({arrowWidth:R,arrowHeight:A}),p&&HW({strategy:"referenceHidden",...$})]}),[J,q]=u8(re),Y=Wa(y);qn(()=>{pe&&(Y==null||Y())},[pe,Y]);const k=(ae=Q.arrow)==null?void 0:ae.x,L=(ge=Q.arrow)==null?void 0:ge.y,M=((fe=Q.arrow)==null?void 0:fe.centerOffset)!==0,[W,se]=g.useState();return qn(()=>{v&&se(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:pe?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(Me=Q.transformOrigin)==null?void 0:Me.x,(de=Q.transformOrigin)==null?void 0:de.y].join(" "),...(($e=Q.hide)==null?void 0:$e.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(JW,{scope:r,placedSide:J,onArrowChange:P,arrowX:k,arrowY:L,shouldHideArrow:M,children:s.jsx(Mt.div,{"data-side":J,"data-align":q,...x,ref:N,style:{...x.style,animation:pe?void 0:"none"}})})})});l8.displayName=V5;var c8="PopperArrow",XW={top:"bottom",right:"left",bottom:"top",left:"right"},d8=g.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=ZW(c8,n),o=XW[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(KW,{...a,ref:r,style:{...a.style,display:"block"}})})});d8.displayName=c8;function QW(e){return e!==null}var eG=e=>({name:"transformOrigin",options:e,fn(t){var w,v,b;const{placement:r,rects:n,middlewareData:a}=t,o=((w=a.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=u8(r),h={start:"0%",center:"50%",end:"100%"}[u],p=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,f=(((b=a.arrow)==null?void 0:b.y)??0)+c/2;let y="",x="";return d==="bottom"?(y=o?h:`${p}px`,x=`${-c}px`):d==="top"?(y=o?h:`${p}px`,x=`${n.floating.height+c}px`):d==="right"?(y=`${-c}px`,x=o?h:`${f}px`):d==="left"&&(y=`${n.floating.width+c}px`,x=o?h:`${f}px`),{data:{x:y,y:x}}}});function u8(e){const[t,r="center"]=e.split("-");return[t,r]}var Ky=a8,tx=o8,Yy=l8,Jy=d8,h8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tG="VisuallyHidden",Zy=g.forwardRef((e,t)=>s.jsx(Mt.span,{...e,ref:t,style:{...h8,...e.style}}));Zy.displayName=tG;var sG=Zy,[Xy,Tse]=_a("Tooltip",[vd]),Qy=vd(),f8="TooltipProvider",rG=700,hw="tooltip.open",[nG,H5]=Xy(f8),m8=e=>{const{__scopeTooltip:t,delayDuration:r=rG,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(nG,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};m8.displayName=f8;var Tp="Tooltip",[aG,e1]=Xy(Tp),p8=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=H5(Tp,e.__scopeTooltip),d=Qy(t),[u,h]=g.useState(null),p=Pn(),f=g.useRef(0),y=o??c.disableHoverableContent,x=l??c.delayDuration,w=g.useRef(!1),[v,b]=fo({prop:n,defaultProp:a??!1,onChange:R=>{R?(c.onOpen(),document.dispatchEvent(new CustomEvent(hw))):c.onClose(),i==null||i(R)},caller:Tp}),N=g.useMemo(()=>v?w.current?"delayed-open":"instant-open":"closed",[v]),C=g.useCallback(()=>{window.clearTimeout(f.current),f.current=0,w.current=!1,b(!0)},[b]),P=g.useCallback(()=>{window.clearTimeout(f.current),f.current=0,b(!1)},[b]),D=g.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{w.current=!0,b(!0),f.current=0},x)},[x,b]);return g.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),s.jsx(Ky,{...d,children:s.jsx(aG,{scope:t,contentId:p,open:v,stateAttribute:N,trigger:u,onTriggerChange:h,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayedRef.current?D():C()},[c.isOpenDelayedRef,D,C]),onTriggerLeave:g.useCallback(()=>{y?P():(window.clearTimeout(f.current),f.current=0)},[P,y]),onOpen:C,onClose:P,disableHoverableContent:y,children:r})})};p8.displayName=Tp;var fw="TooltipTrigger",x8=g.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=e1(fw,r),i=H5(fw,r),o=Qy(r),l=g.useRef(null),c=_s(t,l,a.onTriggerChange),d=g.useRef(!1),u=g.useRef(!1),h=g.useCallback(()=>d.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(tx,{asChild:!0,...o,children:s.jsx(Mt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:gt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:gt(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:gt(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:gt(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:gt(e.onBlur,a.onClose),onClick:gt(e.onClick,a.onClose)})})});x8.displayName=fw;var iG="TooltipPortal",[Rse,oG]=Xy(iG,{forceMount:void 0}),xf="TooltipContent",g8=g.forwardRef((e,t)=>{const r=oG(xf,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=e1(xf,e.__scopeTooltip);return s.jsx(Ga,{present:n||o.open,children:o.disableHoverableContent?s.jsx(v8,{side:a,...i,ref:t}):s.jsx(lG,{side:a,...i,ref:t})})}),lG=g.forwardRef((e,t)=>{const r=e1(xf,e.__scopeTooltip),n=H5(xf,e.__scopeTooltip),a=g.useRef(null),i=_s(t,a),[o,l]=g.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:h}=n,p=g.useCallback(()=>{l(null),h(!1)},[h]),f=g.useCallback((y,x)=>{const w=y.currentTarget,v={x:y.clientX,y:y.clientY},b=fG(v,w.getBoundingClientRect()),N=mG(v,b),C=pG(x.getBoundingClientRect()),P=gG([...N,...C]);l(P),h(!0)},[h]);return g.useEffect(()=>()=>p(),[p]),g.useEffect(()=>{if(c&&u){const y=w=>f(w,u),x=w=>f(w,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",x)}}},[c,u,f,p]),g.useEffect(()=>{if(o){const y=x=>{const w=x.target,v={x:x.clientX,y:x.clientY},b=(c==null?void 0:c.contains(w))||(u==null?void 0:u.contains(w)),N=!xG(v,o);b?p():N&&(p(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,o,d,p]),s.jsx(v8,{...e,ref:i})}),[cG,dG]=Xy(Tp,{isInside:!1}),uG=rE("TooltipContent"),v8=g.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=e1(xf,r),d=Qy(r),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(hw,u),()=>document.removeEventListener(hw,u)),[u]),g.useEffect(()=>{if(c.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),s.jsx(Su,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:s.jsxs(Yy,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(uG,{children:n}),s.jsx(cG,{scope:r,isInside:!0,children:s.jsx(sG,{id:c.contentId,role:"tooltip",children:a||n})})]})})});g8.displayName=xf;var y8="TooltipArrow",hG=g.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Qy(r);return dG(y8,r).isInside?null:s.jsx(Jy,{...a,...n,ref:t})});hG.displayName=y8;function fG(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function mG(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function pG(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function xG(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,h=c.x,p=c.y;u>n!=p>n&&r<(h-d)*(n-u)/(p-u)+d&&(a=!a)}return a}function gG(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),vG(t)}function vG(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var yG=m8,jG=p8,bG=x8,j8=g8;const b8=yG,wG=jG,NG=bG,w8=g.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(j8,{ref:n,sideOffset:t,className:it("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));w8.displayName=j8.displayName;const SG="sidebar-state",_G=60*60*24*365,CG="var(--sidebar-width, 16rem)",kG="var(--sidebar-width-icon, 4rem)",N8=g.createContext(void 0);function S8({children:e,defaultOpen:t=!0,open:r,onOpenChange:n,className:a,style:i,...o}){const l=VH(),[c,d]=g.useState(!1),[u,h]=g.useState(t),p=r??u,f=w=>{const v=typeof w=="function"?w(p):w;n?n(v):h(v),document.cookie=`${SG}=${v}; path=/; max-age=${_G}`},y=()=>l?d(w=>!w):f(w=>!w),x=p?"expanded":"collapsed";return s.jsx(N8.Provider,{value:{state:x,open:p,setOpen:f,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:y},children:s.jsx(b8,{delayDuration:0,children:s.jsx("div",{style:{"--sidebar-width":CG,"--sidebar-width-icon":kG,...i},className:it("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",a),...o,children:e})})})}function Df(){const e=g.useContext(N8);if(e===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return e}const PG=Nu("group/sidebar relative flex h-full flex-col gap-4 border-r bg-background transition-all duration-300 ease-in-out",{variants:{variant:{default:"bg-background",inset:"bg-sidebar"}},defaultVariants:{variant:"default"}}),AG=g.forwardRef(({className:e,variant:t,children:r,...n},a)=>{const{state:i,open:o,isMobile:l}=Df();return s.jsx("div",{ref:a,"data-state":i,className:it(PG({variant:t}),"w-[var(--sidebar-width)] data-[state=collapsed]:w-[var(--sidebar-width-icon)]",e),...n,children:r})});AG.displayName="Sidebar";const EG=g.forwardRef(({className:e,onClick:t,...r},n)=>{const{toggleSidebar:a}=Df();return s.jsxs(ce,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:it("h-7 w-7",e),onClick:i=>{t==null||t(i),a()},...r,children:[s.jsx(lq,{}),s.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});EG.displayName="SidebarTrigger";const LG=g.forwardRef(({className:e,...t},r)=>{const{toggleSidebar:n}=Df();return s.jsx("button",{ref:r,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:it("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});LG.displayName="SidebarRail";const TG=g.forwardRef(({className:e,...t},r)=>s.jsx("main",{ref:r,className:it("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));TG.displayName="SidebarInset";const RG=g.forwardRef(({className:e,...t},r)=>s.jsx(Ie,{ref:r,"data-sidebar":"input",className:it("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));RG.displayName="SidebarInput";const IG=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"header",className:it("flex flex-col gap-2 p-2",e),...t}));IG.displayName="SidebarHeader";const FG=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"footer",className:it("flex flex-col gap-2 p-2",e),...t}));FG.displayName="SidebarFooter";const DG=g.forwardRef(({className:e,...t},r)=>s.jsx(nu,{ref:r,"data-sidebar":"separator",className:it("mx-2 w-auto bg-sidebar-border",e),...t}));DG.displayName="SidebarSeparator";const OG=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"content",className:it("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));OG.displayName="SidebarContent";const MG=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"group",className:it("relative flex w-full min-w-0 flex-col p-2",e),...t}));MG.displayName="SidebarGroup";const $G=g.forwardRef(({className:e,asChild:t=!1,...r},n)=>{const a=t?wu:"div";return s.jsx(a,{ref:n,"data-sidebar":"group-label",className:it("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...r})});$G.displayName="SidebarGroupLabel";const BG=g.forwardRef(({className:e,asChild:t=!1,...r},n)=>{const a=t?wu:"button";return s.jsx(a,{ref:n,"data-sidebar":"group-action",className:it("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...r})});BG.displayName="SidebarGroupAction";const zG=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"group-content",className:it("w-full text-sm",e),...t}));zG.displayName="SidebarGroupContent";const UG=g.forwardRef(({className:e,...t},r)=>s.jsx("ul",{ref:r,"data-sidebar":"menu",className:it("flex w-full min-w-0 flex-col gap-1",e),...t}));UG.displayName="SidebarMenu";const qG=g.forwardRef(({className:e,...t},r)=>s.jsx("li",{ref:r,"data-sidebar":"menu-item",className:it("group/menu-item relative",e),...t}));qG.displayName="SidebarMenuItem";const VG=Nu("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),HG=g.forwardRef(({asChild:e=!1,isActive:t=!1,variant:r="default",size:n="default",tooltip:a,className:i,...o},l)=>{const c=e?wu:"button",{isMobile:d,state:u}=Df(),h=s.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":n,"data-active":t,className:it(VG({variant:r,size:n}),i),...o});return a?(typeof a=="string"&&(a={children:a}),s.jsxs(wG,{children:[s.jsx(NG,{asChild:!0,children:h}),s.jsx(w8,{side:"right",align:"center",hidden:u!=="collapsed"||d,...a})]})):h});HG.displayName="SidebarMenuButton";const WG=g.forwardRef(({className:e,asChild:t=!1,showOnHover:r=!1,...n},a)=>{const i=t?wu:"button";return s.jsx(i,{ref:a,"data-sidebar":"menu-action",className:it("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...n})});WG.displayName="SidebarMenuAction";const GG=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,"data-sidebar":"menu-badge",className:it("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));GG.displayName="SidebarMenuBadge";const KG=g.forwardRef(({className:e,showIcon:t=!1,...r},n)=>{const a=g.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return s.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:it("rounded-md h-8 flex gap-2 px-2 items-center",e),...r,children:[t&&s.jsx(Ds,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),s.jsx(Ds,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});KG.displayName="SidebarMenuSkeleton";const YG=g.forwardRef(({className:e,...t},r)=>s.jsx("ul",{ref:r,"data-sidebar":"menu-sub",className:it("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));YG.displayName="SidebarMenuSub";const JG=g.forwardRef(({...e},t)=>s.jsx("li",{ref:t,...e}));JG.displayName="SidebarMenuSubItem";const ZG=g.forwardRef(({asChild:e=!1,size:t="md",isActive:r,className:n,...a},i)=>{const o=e?wu:"a";return s.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":t,"data-active":r,className:it("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...a})});ZG.displayName="SidebarMenuSubButton";const XG=[{label:"Overview",icon:JA,href:"/"},{label:"Parents",icon:ns,href:"/parents"},{label:"Students",icon:ns,href:"/students"},{label:"Drivers",icon:ns,href:"/drivers"},{label:"Vehicles",icon:Li,href:"/vehicles"},{label:"Routes",icon:vv,href:"/routes"},{label:"Trips",icon:Li,href:"/trips"},{label:"Staff",icon:ns,href:"/staff"},{label:"Reports",icon:kn,href:"/reports"},{label:"Notifications",icon:Oo,href:"/notifications"},{label:"School Subscriptions",icon:jr,href:"/admin/school-subscription"}];function QG(){const e=Mi(),t=r=>r==="/"?e.pathname==="/":e.pathname.startsWith(r);return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(Bc,{to:"/home",children:s.jsx("img",{className:"w-40 h-30 ml-6",src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/shuletrack_landscape_logo_wfussl.png",alt:"shuletrack"})}),s.jsx("div",{className:"flex-1 mt-5 overflow-y-auto px-4",children:s.jsx("nav",{className:"space-y-1",children:XG.map(r=>{const n=t(r.href);return s.jsxs(Bc,{to:r.href,className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${n?"bg-[#f7c624] text-white":"text-[#10213f] dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[s.jsx(r.icon,{size:20,className:n?"text-white":"text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"font-medium",children:r.label})]},r.label)})})}),s.jsx("div",{className:"p-4",children:s.jsxs(Bc,{to:"/settings",className:`flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-700 dark:text-gray-300 w-full ${t("/settings")?"text-white":""}`,style:{backgroundColor:t("/settings")?"#f7c624":void 0},children:[s.jsx(Ai,{size:20,className:t("/settings")?"text-white":"text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"font-medium",children:"Settings"})]})})]})}function t1(e){const t=e+"CollectionProvider",[r,n]=_a(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:w,children:v}=x,b=vs.useRef(null),N=vs.useRef(new Map).current;return s.jsx(a,{scope:w,itemMap:N,collectionRef:b,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=td(l),d=vs.forwardRef((x,w)=>{const{scope:v,children:b}=x,N=i(l,v),C=_s(w,N.collectionRef);return s.jsx(c,{ref:C,children:b})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",p=td(u),f=vs.forwardRef((x,w)=>{const{scope:v,children:b,...N}=x,C=vs.useRef(null),P=_s(w,C),D=i(u,v);return vs.useEffect(()=>(D.itemMap.set(C,{ref:C,...N}),()=>void D.itemMap.delete(C))),s.jsx(p,{[h]:"",ref:P,children:b})});f.displayName=u;function y(x){const w=i(e+"CollectionConsumer",x);return vs.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const N=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((D,R)=>N.indexOf(D.ref.current)-N.indexOf(R.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:d,ItemSlot:f},y,n]}var eK=g.createContext(void 0);function s1(e){const t=g.useContext(eK);return e||t||"ltr"}var Nb="rovingFocusGroup.onEntryFocus",tK={bubbles:!1,cancelable:!0},sx="RovingFocusGroup",[mw,_8,sK]=t1(sx),[rK,r1]=_a(sx,[sK]),[nK,aK]=rK(sx),C8=g.forwardRef((e,t)=>s.jsx(mw.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(mw.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(iK,{...e,ref:t})})}));C8.displayName=sx;var iK=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,p=g.useRef(null),f=_s(t,p),y=s1(i),[x,w]=fo({prop:o,defaultProp:l??null,onChange:c,caller:sx}),[v,b]=g.useState(!1),N=Wa(d),C=_8(r),P=g.useRef(!1),[D,R]=g.useState(0);return g.useEffect(()=>{const A=p.current;if(A)return A.addEventListener(Nb,N),()=>A.removeEventListener(Nb,N)},[N]),s.jsx(nK,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:x,onItemFocus:g.useCallback(A=>w(A),[w]),onItemShiftTab:g.useCallback(()=>b(!0),[]),onFocusableItemAdd:g.useCallback(()=>R(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>R(A=>A-1),[]),children:s.jsx(Mt.div,{tabIndex:v||D===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:gt(e.onMouseDown,()=>{P.current=!0}),onFocus:gt(e.onFocus,A=>{const I=!P.current;if(A.target===A.currentTarget&&I&&!v){const O=new CustomEvent(Nb,tK);if(A.currentTarget.dispatchEvent(O),!O.defaultPrevented){const F=C().filter(re=>re.focusable),E=F.find(re=>re.active),$=F.find(re=>re.id===x),K=[E,$,...F].filter(Boolean).map(re=>re.ref.current);A8(K,u)}}P.current=!1}),onBlur:gt(e.onBlur,()=>b(!1))})})}),k8="RovingFocusGroupItem",P8=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Pn(),d=i||c,u=aK(k8,r),h=u.currentTabStopId===d,p=_8(r),{onFocusableItemAdd:f,onFocusableItemRemove:y,currentTabStopId:x}=u;return g.useEffect(()=>{if(n)return f(),()=>y()},[n,f,y]),s.jsx(mw.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:s.jsx(Mt.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:gt(e.onMouseDown,w=>{n?u.onItemFocus(d):w.preventDefault()}),onFocus:gt(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:gt(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=cK(w,u.orientation,u.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let N=p().filter(C=>C.focusable).map(C=>C.ref.current);if(v==="last")N.reverse();else if(v==="prev"||v==="next"){v==="prev"&&N.reverse();const C=N.indexOf(w.currentTarget);N=u.loop?dK(N,C+1):N.slice(C+1)}setTimeout(()=>A8(N))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:x!=null}):o})})});P8.displayName=k8;var oK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lK(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function cK(e,t,r){const n=lK(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return oK[n]}function A8(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function dK(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var E8=C8,L8=P8,pw=["Enter"," "],uK=["ArrowDown","PageUp","Home"],T8=["ArrowUp","PageDown","End"],hK=[...uK,...T8],fK={ltr:[...pw,"ArrowRight"],rtl:[...pw,"ArrowLeft"]},mK={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rx="Menu",[Rp,pK,xK]=t1(rx),[_u,R8]=_a(rx,[xK,vd,r1]),n1=vd(),I8=r1(),[gK,Cu]=_u(rx),[vK,nx]=_u(rx),F8=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=n1(t),[c,d]=g.useState(null),u=g.useRef(!1),h=Wa(i),p=s1(a);return g.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),s.jsx(Ky,{...l,children:s.jsx(gK,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:d,children:s.jsx(vK,{scope:t,onClose:g.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:p,modal:o,children:n})})})};F8.displayName=rx;var yK="MenuAnchor",W5=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=n1(r);return s.jsx(tx,{...a,...n,ref:t})});W5.displayName=yK;var G5="MenuPortal",[jK,D8]=_u(G5,{forceMount:void 0}),O8=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=Cu(G5,t);return s.jsx(jK,{scope:t,forceMount:r,children:s.jsx(Ga,{present:r||i.open,children:s.jsx(Rf,{asChild:!0,container:a,children:n})})})};O8.displayName=G5;var Ii="MenuContent",[bK,K5]=_u(Ii),M8=g.forwardRef((e,t)=>{const r=D8(Ii,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Cu(Ii,e.__scopeMenu),o=nx(Ii,e.__scopeMenu);return s.jsx(Rp.Provider,{scope:e.__scopeMenu,children:s.jsx(Ga,{present:n||i.open,children:s.jsx(Rp.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(wK,{...a,ref:t}):s.jsx(NK,{...a,ref:t})})})})}),wK=g.forwardRef((e,t)=>{const r=Cu(Ii,e.__scopeMenu),n=g.useRef(null),a=_s(t,n);return g.useEffect(()=>{const i=n.current;if(i)return zy(i)},[]),s.jsx(Y5,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:gt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),NK=g.forwardRef((e,t)=>{const r=Cu(Ii,e.__scopeMenu);return s.jsx(Y5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),SK=td("MenuContent.ScrollLock"),Y5=g.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f,disableOutsideScroll:y,...x}=e,w=Cu(Ii,r),v=nx(Ii,r),b=n1(r),N=I8(r),C=pK(r),[P,D]=g.useState(null),R=g.useRef(null),A=_s(t,R,w.onContentChange),I=g.useRef(0),O=g.useRef(""),F=g.useRef(0),E=g.useRef(null),$=g.useRef("right"),U=g.useRef(0),K=y?Qp:g.Fragment,re=y?{as:SK,allowPinchZoom:!0}:void 0,pe=J=>{var ae,ge;const q=O.current+J,Y=C().filter(fe=>!fe.disabled),k=document.activeElement,L=(ae=Y.find(fe=>fe.ref.current===k))==null?void 0:ae.textValue,M=Y.map(fe=>fe.textValue),W=DK(M,q,L),se=(ge=Y.find(fe=>fe.textValue===W))==null?void 0:ge.ref.current;(function fe(Me){O.current=Me,window.clearTimeout(I.current),Me!==""&&(I.current=window.setTimeout(()=>fe(""),1e3))})(q),se&&setTimeout(()=>se.focus())};g.useEffect(()=>()=>window.clearTimeout(I.current),[]),$y();const Q=g.useCallback(J=>{var Y,k;return $.current===((Y=E.current)==null?void 0:Y.side)&&MK(J,(k=E.current)==null?void 0:k.area)},[]);return s.jsx(bK,{scope:r,searchRef:O,onItemEnter:g.useCallback(J=>{Q(J)&&J.preventDefault()},[Q]),onItemLeave:g.useCallback(J=>{var q;Q(J)||((q=R.current)==null||q.focus(),D(null))},[Q]),onTriggerLeave:g.useCallback(J=>{Q(J)&&J.preventDefault()},[Q]),pointerGraceTimerRef:F,onPointerGraceIntentChange:g.useCallback(J=>{E.current=J},[]),children:s.jsx(K,{...re,children:s.jsx(Xp,{asChild:!0,trapped:a,onMountAutoFocus:gt(i,J=>{var q;J.preventDefault(),(q=R.current)==null||q.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Su,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:f,children:s.jsx(E8,{asChild:!0,...N,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:P,onCurrentTabStopIdChange:D,onEntryFocus:gt(c,J=>{v.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Yy,{role:"menu","aria-orientation":"vertical","data-state":e7(w.open),"data-radix-menu-content":"",dir:v.dir,...b,...x,ref:A,style:{outline:"none",...x.style},onKeyDown:gt(x.onKeyDown,J=>{const Y=J.target.closest("[data-radix-menu-content]")===J.currentTarget,k=J.ctrlKey||J.altKey||J.metaKey,L=J.key.length===1;Y&&(J.key==="Tab"&&J.preventDefault(),!k&&L&&pe(J.key));const M=R.current;if(J.target!==M||!hK.includes(J.key))return;J.preventDefault();const se=C().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);T8.includes(J.key)&&se.reverse(),IK(se)}),onBlur:gt(e.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(I.current),O.current="")}),onPointerMove:gt(e.onPointerMove,Ip(J=>{const q=J.target,Y=U.current!==J.clientX;if(J.currentTarget.contains(q)&&Y){const k=J.clientX>U.current?"right":"left";$.current=k,U.current=J.clientX}}))})})})})})})});M8.displayName=Ii;var _K="MenuGroup",J5=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Mt.div,{role:"group",...n,ref:t})});J5.displayName=_K;var CK="MenuLabel",$8=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Mt.div,{...n,ref:t})});$8.displayName=CK;var _v="MenuItem",M3="menu.itemSelect",a1=g.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=g.useRef(null),o=nx(_v,e.__scopeMenu),l=K5(_v,e.__scopeMenu),c=_s(t,i),d=g.useRef(!1),u=()=>{const h=i.current;if(!r&&h){const p=new CustomEvent(M3,{bubbles:!0,cancelable:!0});h.addEventListener(M3,f=>n==null?void 0:n(f),{once:!0}),C5(h,p),p.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(B8,{...a,ref:c,disabled:r,onClick:gt(e.onClick,u),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),d.current=!0},onPointerUp:gt(e.onPointerUp,h=>{var p;d.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:gt(e.onKeyDown,h=>{const p=l.searchRef.current!=="";r||p&&h.key===" "||pw.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});a1.displayName=_v;var B8=g.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=K5(_v,r),l=I8(r),c=g.useRef(null),d=_s(t,c),[u,h]=g.useState(!1),[p,f]=g.useState("");return g.useEffect(()=>{const y=c.current;y&&f((y.textContent??"").trim())},[i.children]),s.jsx(Rp.ItemSlot,{scope:r,disabled:n,textValue:a??p,children:s.jsx(L8,{asChild:!0,...l,focusable:!n,children:s.jsx(Mt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:gt(e.onPointerMove,Ip(y=>{n?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:gt(e.onPointerLeave,Ip(y=>o.onItemLeave(y))),onFocus:gt(e.onFocus,()=>h(!0)),onBlur:gt(e.onBlur,()=>h(!1))})})})}),kK="MenuCheckboxItem",z8=g.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(W8,{scope:e.__scopeMenu,checked:r,children:s.jsx(a1,{role:"menuitemcheckbox","aria-checked":Cv(r)?"mixed":r,...a,ref:t,"data-state":X5(r),onSelect:gt(a.onSelect,()=>n==null?void 0:n(Cv(r)?!0:!r),{checkForDefaultPrevented:!1})})})});z8.displayName=kK;var U8="MenuRadioGroup",[PK,AK]=_u(U8,{value:void 0,onValueChange:()=>{}}),q8=g.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Wa(n);return s.jsx(PK,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(J5,{...a,ref:t})})});q8.displayName=U8;var V8="MenuRadioItem",H8=g.forwardRef((e,t)=>{const{value:r,...n}=e,a=AK(V8,e.__scopeMenu),i=r===a.value;return s.jsx(W8,{scope:e.__scopeMenu,checked:i,children:s.jsx(a1,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":X5(i),onSelect:gt(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});H8.displayName=V8;var Z5="MenuItemIndicator",[W8,EK]=_u(Z5,{checked:!1}),G8=g.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=EK(Z5,r);return s.jsx(Ga,{present:n||Cv(i.checked)||i.checked===!0,children:s.jsx(Mt.span,{...a,ref:t,"data-state":X5(i.checked)})})});G8.displayName=Z5;var LK="MenuSeparator",K8=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Mt.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});K8.displayName=LK;var TK="MenuArrow",Y8=g.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=n1(r);return s.jsx(Jy,{...a,...n,ref:t})});Y8.displayName=TK;var RK="MenuSub",[Ise,J8]=_u(RK),Fm="MenuSubTrigger",Z8=g.forwardRef((e,t)=>{const r=Cu(Fm,e.__scopeMenu),n=nx(Fm,e.__scopeMenu),a=J8(Fm,e.__scopeMenu),i=K5(Fm,e.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(W5,{asChild:!0,...d,children:s.jsx(B8,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":e7(r.open),...e,ref:Pl(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:gt(e.onPointerMove,Ip(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:gt(e.onPointerLeave,Ip(h=>{var f,y;u();const p=(f=r.content)==null?void 0:f.getBoundingClientRect();if(p){const x=(y=r.content)==null?void 0:y.dataset.side,w=x==="right",v=w?-5:5,b=p[w?"left":"right"],N=p[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x:b,y:p.top},{x:N,y:p.top},{x:N,y:p.bottom},{x:b,y:p.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:gt(e.onKeyDown,h=>{var f;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||fK[n.dir].includes(h.key)&&(r.onOpenChange(!0),(f=r.content)==null||f.focus(),h.preventDefault())})})})});Z8.displayName=Fm;var X8="MenuSubContent",Q8=g.forwardRef((e,t)=>{const r=D8(Ii,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Cu(Ii,e.__scopeMenu),o=nx(Ii,e.__scopeMenu),l=J8(X8,e.__scopeMenu),c=g.useRef(null),d=_s(t,c);return s.jsx(Rp.Provider,{scope:e.__scopeMenu,children:s.jsx(Ga,{present:n||i.open,children:s.jsx(Rp.Slot,{scope:e.__scopeMenu,children:s.jsx(Y5,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:gt(e.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:gt(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:gt(e.onKeyDown,u=>{var f;const h=u.currentTarget.contains(u.target),p=mK[o.dir].includes(u.key);h&&p&&(i.onOpenChange(!1),(f=l.trigger)==null||f.focus(),u.preventDefault())})})})})})});Q8.displayName=X8;function e7(e){return e?"open":"closed"}function Cv(e){return e==="indeterminate"}function X5(e){return Cv(e)?"indeterminate":e?"checked":"unchecked"}function IK(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function FK(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function DK(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=FK(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function OK(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,u=l.y,h=c.x,p=c.y;u>n!=p>n&&r<(h-d)*(n-u)/(p-u)+d&&(a=!a)}return a}function MK(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return OK(r,t)}function Ip(e){return t=>t.pointerType==="mouse"?e(t):void 0}var $K=F8,BK=W5,zK=O8,UK=M8,qK=J5,VK=$8,HK=a1,WK=z8,GK=q8,KK=H8,YK=G8,JK=K8,ZK=Y8,XK=Z8,QK=Q8,i1="DropdownMenu",[eY,Fse]=_a(i1,[R8]),Ca=R8(),[tY,t7]=eY(i1),s7=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Ca(t),d=g.useRef(null),[u,h]=fo({prop:a,defaultProp:i??!1,onChange:o,caller:i1});return s.jsx(tY,{scope:t,triggerId:Pn(),triggerRef:d,contentId:Pn(),open:u,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(p=>!p),[h]),modal:l,children:s.jsx($K,{...c,open:u,onOpenChange:h,dir:n,modal:l,children:r})})};s7.displayName=i1;var r7="DropdownMenuTrigger",n7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=t7(r7,r),o=Ca(r);return s.jsx(BK,{asChild:!0,...o,children:s.jsx(Mt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Pl(t,i.triggerRef),onPointerDown:gt(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:gt(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});n7.displayName=r7;var sY="DropdownMenuPortal",a7=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Ca(t);return s.jsx(zK,{...n,...r})};a7.displayName=sY;var i7="DropdownMenuContent",o7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=t7(i7,r),i=Ca(r),o=g.useRef(!1);return s.jsx(UK,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:gt(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:gt(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});o7.displayName=i7;var rY="DropdownMenuGroup",nY=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(qK,{...a,...n,ref:t})});nY.displayName=rY;var aY="DropdownMenuLabel",l7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(VK,{...a,...n,ref:t})});l7.displayName=aY;var iY="DropdownMenuItem",c7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(HK,{...a,...n,ref:t})});c7.displayName=iY;var oY="DropdownMenuCheckboxItem",d7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(WK,{...a,...n,ref:t})});d7.displayName=oY;var lY="DropdownMenuRadioGroup",cY=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(GK,{...a,...n,ref:t})});cY.displayName=lY;var dY="DropdownMenuRadioItem",u7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(KK,{...a,...n,ref:t})});u7.displayName=dY;var uY="DropdownMenuItemIndicator",h7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(YK,{...a,...n,ref:t})});h7.displayName=uY;var hY="DropdownMenuSeparator",f7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(JK,{...a,...n,ref:t})});f7.displayName=hY;var fY="DropdownMenuArrow",mY=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(ZK,{...a,...n,ref:t})});mY.displayName=fY;var pY="DropdownMenuSubTrigger",m7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(XK,{...a,...n,ref:t})});m7.displayName=pY;var xY="DropdownMenuSubContent",p7=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ca(r);return s.jsx(QK,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});p7.displayName=xY;var gY=s7,vY=n7,yY=a7,x7=o7,g7=l7,v7=c7,y7=d7,j7=u7,b7=h7,w7=f7,N7=m7,S7=p7;const Vn=gY,Hn=vY,jY=g.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(N7,{ref:a,className:it("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(wl,{className:"ml-auto h-4 w-4"})]}));jY.displayName=N7.displayName;const bY=g.forwardRef(({className:e,...t},r)=>s.jsx(S7,{ref:r,className:it("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));bY.displayName=S7.displayName;const An=g.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(yY,{children:s.jsx(x7,{ref:n,sideOffset:t,className:it("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));An.displayName=x7.displayName;const Jt=g.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(v7,{ref:n,className:it("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Jt.displayName=v7.displayName;const wY=g.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(y7,{ref:a,className:it("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(b7,{children:s.jsx(Sn,{className:"h-4 w-4"})})}),t]}));wY.displayName=y7.displayName;const NY=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(j7,{ref:n,className:it("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(b7,{children:s.jsx(QU,{className:"h-2 w-2 fill-current"})})}),t]}));NY.displayName=j7.displayName;const yd=g.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(g7,{ref:n,className:it("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));yd.displayName=g7.displayName;const nd=g.forwardRef(({className:e,...t},r)=>s.jsx(w7,{ref:r,className:it("-mx-1 my-1 h-px bg-muted",e),...t}));nd.displayName=w7.displayName;const SY=()=>{const{theme:e,isDark:t,setTheme:r,toggleTheme:n}=w5(),i=e==="auto"?t?"dark":"light":e;return s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsxs(ce,{variant:"outline",size:"icon",className:"h-9 w-9",children:[s.jsx(u3,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(d3,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),s.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),s.jsxs(An,{align:"end",children:[s.jsxs(Jt,{onClick:()=>r("light"),className:e==="light"?"bg-accent":"",children:[s.jsx(u3,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:" Light"}),e==="light"&&s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"Active"})]}),s.jsxs(Jt,{onClick:()=>r("dark"),className:e==="dark"?"bg-accent":"",children:[s.jsx(d3,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:" Dark"}),e==="dark"&&s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"Active"})]}),s.jsxs(Jt,{onClick:()=>r("auto"),className:e==="auto"?"bg-accent":"",children:[s.jsx(oq,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Follow System"}),e==="auto"&&s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:i==="dark"?"Dark":"Light"})]})]})]})},_7=({onMenuClick:e,isScrolled:t=!1})=>{var d;const r=Sa(),n=er(),{user:a}=ca(u=>u.auth),{notifications:i}=ca(u=>u.notifications),{isDark:o}=w5(),l=()=>{n(BA()),r("/login")},c=!o||t;return s.jsx("nav",{className:`bg-background border-b px-4 md:px-8 py-3 transition-colors duration-200 ${t?"bg-white shadow-md":""}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:e,className:"p-2 rounded-md hover:bg-accent md:hidden",children:s.jsx(aq,{className:`h-6 w-6 ${c?"text-black":"text-foreground"}`})}),s.jsxs("h1",{className:`text-xl font-semibold ${c?"text-black":"text-foreground"}`,children:["Hello, ",a==null?void 0:a.first_name," ",a==null?void 0:a.last_name]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(SY,{}),s.jsxs(ce,{variant:"ghost",size:"icon",className:"relative",onClick:()=>r("/notifications"),children:[s.jsx(Oo,{className:`h-5 w-5 ${c?"text-black":""}`}),i&&i.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full text-[10px] text-white flex items-center justify-center",children:i.length})]}),s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsxs(ce,{variant:"ghost",className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-primary",children:((d=a==null?void 0:a.first_name)==null?void 0:d.charAt(0))||"U"})}),s.jsxs("div",{className:"hidden md:block text-left",children:[s.jsx("p",{className:`text-sm font-medium ${c?"text-black":""}`,children:(a==null?void 0:a.first_name)||"User"}),s.jsx("p",{className:`text-xs ${c?"text-gray-600":"text-muted-foreground"}`,children:(a==null?void 0:a.user_type)||"Admin"})]})]})}),s.jsxs(An,{align:"end",children:[s.jsx(Jt,{onClick:()=>r("/profile"),children:"Profile"}),s.jsx(Jt,{onClick:()=>r("/settings"),children:"Settings"}),s.jsx(Jt,{onClick:()=>r("/terms-and-policies"),children:"Terms and Policies"}),s.jsx(Jt,{onClick:l,children:"Logout"})]})]})]})]})})},_Y=()=>{Mi().pathname;const{openMobile:t,setOpenMobile:r,toggleSidebar:n}=Df(),[a,i]=g.useState(!1),o=g.useRef(null);return g.useEffect(()=>{const l=()=>{if(o.current){const d=o.current.scrollTop;i(d>0)}},c=o.current;if(c)return c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)},[]),s.jsxs("div",{className:"h-screen w-screen bg-background",children:[t&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>r(!1)}),s.jsxs("div",{className:"flex h-full w-full overflow-hidden",children:[s.jsx("div",{className:`fixed md:static inset-y-0 left-0 z-50 w-64 transform transition-transform duration-200 ease-in-out ${t?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:s.jsx("div",{className:"h-full bg-card border-r",children:s.jsx(QG,{})})}),s.jsxs("div",{className:"flex-1 flex flex-col w-full overflow-hidden",children:[s.jsx(_7,{onMenuClick:n,isScrolled:a}),s.jsx("main",{ref:o,className:"flex-1 overflow-y-auto bg-background",children:s.jsx("div",{className:"h-full w-full",children:s.jsx("div",{className:"h-full w-full",children:s.jsx(MP,{})})})})]})]})]})},CY=()=>s.jsx(S8,{children:s.jsx(_Y,{})}),kY=()=>{const{stats:e,loading:t}=Ct(n=>n.overview),r=[{title:"Total Students",value:e.totalStudents.toString(),icon:ns,description:"Active students",color:"text-blue-600"},{title:"Total Parents",value:e.totalParents.toString(),icon:eE,description:"Registered parents",color:"text-green-600"},{title:"Total Staff",value:e.totalStaff.toString(),icon:JU,description:"School staff",color:"text-purple-600"},{title:"Total Vehicles",value:e.totalVehicles.toString(),icon:$n,description:"Fleet vehicles",color:"text-orange-600"},{title:"Active Routes",value:e.activeRoutes.toString(),icon:QA,description:"Current routes",color:"text-indigo-600"},{title:"Total Routes",value:e.totalRoutes.toString(),icon:pr,description:"All routes",color:"text-red-600"}];return t?s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 w-full",children:r.map(n=>s.jsxs(Le,{className:"w-full",children:[s.jsx(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(n.icon,{className:"h-4 w-4 text-muted-foreground"})}),s.jsxs(Te,{children:[s.jsx("div",{className:"h-8 bg-muted rounded animate-pulse"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:n.description})]})]},n.title))}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 w-full",children:r.map(n=>s.jsxs(Le,{className:"w-full hover:shadow-md transition-shadow",children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:n.title}),s.jsx(n.icon,{className:`h-4 w-4 ${n.color}`})]}),s.jsxs(Te,{children:[s.jsx("div",{className:`text-2xl font-bold ${n.color}`,children:n.value}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})]},n.title))})},ka=g.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:it("w-full caption-bottom text-sm",e),...t})}));ka.displayName="Table";const Pa=g.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:it("[&_tr]:border-b",e),...t}));Pa.displayName="TableHeader";const Aa=g.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:it("[&_tr:last-child]:border-0",e),...t}));Aa.displayName="TableBody";const PY=g.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:it("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));PY.displayName="TableFooter";const Js=g.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:it("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Js.displayName="TableRow";const ut=g.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:it("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ut.displayName="TableHead";const ct=g.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:it("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ct.displayName="TableCell";const AY=g.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:it("mt-4 text-sm text-muted-foreground",e),...t}));AY.displayName="TableCaption";const EY=()=>{const e=er(),{trips:t,loading:r}=Ct(d=>d.trips),a=(()=>{const d=localStorage.getItem("schoolId");return d?parseInt(d):void 0})();g.useEffect(()=>{a&&e(su({schoolId:a}))},[e,a]);const i=Array.isArray(t)?t.slice(0,5):[],o=d=>{switch(d.toLowerCase()){case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=d=>{try{return new Date(d).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return d}},c=d=>d.replace("_"," ").replace(/\b\w/g,u=>u.toUpperCase());return r?s.jsx("div",{className:"rounded-md border w-full",children:s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"animate-pulse space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"space-y-2",children:[1,2,3].map(d=>s.jsx("div",{className:"h-4 bg-gray-200 rounded"},d))})]})})}):i.length===0?s.jsxs("div",{className:"rounded-md border w-full",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsx("h3",{className:"text-lg font-semibold",children:"Recent Trips"})}),s.jsx("div",{className:"p-8 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"No trips found"}),s.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"There are no recent trips to display. Trips will appear here once they are scheduled or completed."})]})]})})]}):s.jsxs("div",{className:"rounded-md border w-full",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsx("h3",{className:"text-lg font-semibold",children:"Recent Trips"})}),s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{className:"w-[20%]",children:"Route"}),s.jsx(ut,{className:"w-[20%]",children:"Driver"}),s.jsx(ut,{className:"w-[20%]",children:"Vehicle"}),s.jsx(ut,{className:"w-[15%]",children:"Status"}),s.jsx(ut,{className:"w-[15%]",children:"Start Time"}),s.jsx(ut,{className:"w-[10%]",children:"Students"})]})}),s.jsx(Aa,{children:i.map(d=>s.jsxs(Js,{children:[s.jsx(ct,{className:"font-medium",children:d.route_name||`Route ${d.route}`}),s.jsx(ct,{children:d.driver_name||`Driver ${d.driver}`}),s.jsx(ct,{children:d.vehicle_registration||`Vehicle ${d.vehicle}`}),s.jsx(ct,{children:s.jsx(Pe,{className:o(d.status),children:c(d.status)})}),s.jsx(ct,{children:l(d.start_time)}),s.jsx(ct,{children:d.students_count})]},d.id))})]})]})};function $3(e,[t,r]){return Math.min(r,Math.max(t,e))}function Q5(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var LY=[" ","Enter","ArrowUp","ArrowDown"],TY=[" ","Enter"],xu="Select",[o1,l1,RY]=t1(xu),[Of,Dse]=_a(xu,[RY,vd]),c1=vd(),[IY,jd]=Of(xu),[FY,DY]=Of(xu),C7=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:p,required:f,form:y}=e,x=c1(t),[w,v]=g.useState(null),[b,N]=g.useState(null),[C,P]=g.useState(!1),D=s1(d),[R,A]=fo({prop:n,defaultProp:a??!1,onChange:i,caller:xu}),[I,O]=fo({prop:o,defaultProp:l,onChange:c,caller:xu}),F=g.useRef(null),E=w?y||!!w.closest("form"):!0,[$,U]=g.useState(new Set),K=Array.from($).map(re=>re.props.value).join(";");return s.jsx(Ky,{...x,children:s.jsxs(IY,{required:f,scope:t,trigger:w,onTriggerChange:v,valueNode:b,onValueNodeChange:N,valueNodeHasChildren:C,onValueNodeHasChildrenChange:P,contentId:Pn(),value:I,onValueChange:O,open:R,onOpenChange:A,dir:D,triggerPointerDownPosRef:F,disabled:p,children:[s.jsx(o1.Provider,{scope:t,children:s.jsx(FY,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(re=>{U(pe=>new Set(pe).add(re))},[]),onNativeOptionRemove:g.useCallback(re=>{U(pe=>{const Q=new Set(pe);return Q.delete(re),Q})},[]),children:r})}),E?s.jsxs(J7,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:I,onChange:re=>O(re.target.value),disabled:p,form:y,children:[I===void 0?s.jsx("option",{value:""}):null,Array.from($)]},K):null]})})};C7.displayName=xu;var k7="SelectTrigger",P7=g.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=c1(r),o=jd(k7,r),l=o.disabled||n,c=_s(t,o.onTriggerChange),d=l1(r),u=g.useRef("touch"),[h,p,f]=X7(x=>{const w=d().filter(N=>!N.disabled),v=w.find(N=>N.value===o.value),b=Q7(w,x,v);b!==void 0&&o.onValueChange(b.value)}),y=x=>{l||(o.onOpenChange(!0),f()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return s.jsx(tx,{asChild:!0,...i,children:s.jsx(Mt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Z7(o.value)?"":void 0,...a,ref:c,onClick:gt(a.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&y(x)}),onPointerDown:gt(a.onPointerDown,x=>{u.current=x.pointerType;const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(y(x),x.preventDefault())}),onKeyDown:gt(a.onKeyDown,x=>{const w=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(w&&x.key===" ")&&LY.includes(x.key)&&(y(),x.preventDefault())})})})});P7.displayName=k7;var A7="SelectValue",E7=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=jd(A7,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=_s(t,c.onValueNodeChange);return qn(()=>{d(u)},[d,u]),s.jsx(Mt.span,{...l,ref:h,style:{pointerEvents:"none"},children:Z7(c.value)?s.jsx(s.Fragment,{children:o}):i})});E7.displayName=A7;var OY="SelectIcon",L7=g.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Mt.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});L7.displayName=OY;var MY="SelectPortal",T7=e=>s.jsx(Rf,{asChild:!0,...e});T7.displayName=MY;var gu="SelectContent",R7=g.forwardRef((e,t)=>{const r=jd(gu,e.__scopeSelect),[n,a]=g.useState();if(qn(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?pd.createPortal(s.jsx(I7,{scope:e.__scopeSelect,children:s.jsx(o1.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(F7,{...e,ref:t})});R7.displayName=gu;var Yi=10,[I7,bd]=Of(gu),$Y="SelectContentImpl",BY=td("SelectContent.RemoveScroll"),F7=g.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:x,avoidCollisions:w,...v}=e,b=jd(gu,r),[N,C]=g.useState(null),[P,D]=g.useState(null),R=_s(t,ae=>C(ae)),[A,I]=g.useState(null),[O,F]=g.useState(null),E=l1(r),[$,U]=g.useState(!1),K=g.useRef(!1);g.useEffect(()=>{if(N)return zy(N)},[N]),$y();const re=g.useCallback(ae=>{const[ge,...fe]=E().map($e=>$e.ref.current),[Me]=fe.slice(-1),de=document.activeElement;for(const $e of ae)if($e===de||($e==null||$e.scrollIntoView({block:"nearest"}),$e===ge&&P&&(P.scrollTop=0),$e===Me&&P&&(P.scrollTop=P.scrollHeight),$e==null||$e.focus(),document.activeElement!==de))return},[E,P]),pe=g.useCallback(()=>re([A,N]),[re,A,N]);g.useEffect(()=>{$&&pe()},[$,pe]);const{onOpenChange:Q,triggerPointerDownPosRef:J}=b;g.useEffect(()=>{if(N){let ae={x:0,y:0};const ge=Me=>{var de,$e;ae={x:Math.abs(Math.round(Me.pageX)-(((de=J.current)==null?void 0:de.x)??0)),y:Math.abs(Math.round(Me.pageY)-((($e=J.current)==null?void 0:$e.y)??0))}},fe=Me=>{ae.x<=10&&ae.y<=10?Me.preventDefault():N.contains(Me.target)||Q(!1),document.removeEventListener("pointermove",ge),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",fe,{capture:!0})}}},[N,Q,J]),g.useEffect(()=>{const ae=()=>Q(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[Q]);const[q,Y]=X7(ae=>{const ge=E().filter(de=>!de.disabled),fe=ge.find(de=>de.ref.current===document.activeElement),Me=Q7(ge,ae,fe);Me&&setTimeout(()=>Me.ref.current.focus())}),k=g.useCallback((ae,ge,fe)=>{const Me=!K.current&&!fe;(b.value!==void 0&&b.value===ge||Me)&&(I(ae),Me&&(K.current=!0))},[b.value]),L=g.useCallback(()=>N==null?void 0:N.focus(),[N]),M=g.useCallback((ae,ge,fe)=>{const Me=!K.current&&!fe;(b.value!==void 0&&b.value===ge||Me)&&F(ae)},[b.value]),W=n==="popper"?xw:D7,se=W===xw?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:x,avoidCollisions:w}:{};return s.jsx(I7,{scope:r,content:N,viewport:P,onViewportChange:D,itemRefCallback:k,selectedItem:A,onItemLeave:L,itemTextRefCallback:M,focusSelectedItem:pe,selectedItemText:O,position:n,isPositioned:$,searchRef:q,children:s.jsx(Qp,{as:BY,allowPinchZoom:!0,children:s.jsx(Xp,{asChild:!0,trapped:b.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:gt(a,ae=>{var ge;(ge=b.trigger)==null||ge.focus({preventScroll:!0}),ae.preventDefault()}),children:s.jsx(Su,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(W,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:ae=>ae.preventDefault(),...v,...se,onPlaced:()=>U(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:gt(v.onKeyDown,ae=>{const ge=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!ge&&ae.key.length===1&&Y(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let Me=E().filter(de=>!de.disabled).map(de=>de.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const de=ae.target,$e=Me.indexOf(de);Me=Me.slice($e+1)}setTimeout(()=>re(Me)),ae.preventDefault()}})})})})})})});F7.displayName=$Y;var zY="SelectItemAlignedPosition",D7=g.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=jd(gu,r),o=bd(gu,r),[l,c]=g.useState(null),[d,u]=g.useState(null),h=_s(t,R=>u(R)),p=l1(r),f=g.useRef(!1),y=g.useRef(!0),{viewport:x,selectedItem:w,selectedItemText:v,focusSelectedItem:b}=o,N=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&w&&v){const R=i.trigger.getBoundingClientRect(),A=d.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),O=v.getBoundingClientRect();if(i.dir!=="rtl"){const de=O.left-A.left,$e=I.left-de,Ye=R.left-$e,mt=R.width+Ye,Se=Math.max(mt,A.width),oe=window.innerWidth-Yi,vt=$3($e,[Yi,Math.max(Yi,oe-Se)]);l.style.minWidth=mt+"px",l.style.left=vt+"px"}else{const de=A.right-O.right,$e=window.innerWidth-I.right-de,Ye=window.innerWidth-R.right-$e,mt=R.width+Ye,Se=Math.max(mt,A.width),oe=window.innerWidth-Yi,vt=$3($e,[Yi,Math.max(Yi,oe-Se)]);l.style.minWidth=mt+"px",l.style.right=vt+"px"}const F=p(),E=window.innerHeight-Yi*2,$=x.scrollHeight,U=window.getComputedStyle(d),K=parseInt(U.borderTopWidth,10),re=parseInt(U.paddingTop,10),pe=parseInt(U.borderBottomWidth,10),Q=parseInt(U.paddingBottom,10),J=K+re+$+Q+pe,q=Math.min(w.offsetHeight*5,J),Y=window.getComputedStyle(x),k=parseInt(Y.paddingTop,10),L=parseInt(Y.paddingBottom,10),M=R.top+R.height/2-Yi,W=E-M,se=w.offsetHeight/2,ae=w.offsetTop+se,ge=K+re+ae,fe=J-ge;if(ge<=M){const de=F.length>0&&w===F[F.length-1].ref.current;l.style.bottom="0px";const $e=d.clientHeight-x.offsetTop-x.offsetHeight,Ye=Math.max(W,se+(de?L:0)+$e+pe),mt=ge+Ye;l.style.height=mt+"px"}else{const de=F.length>0&&w===F[0].ref.current;l.style.top="0px";const Ye=Math.max(M,K+x.offsetTop+(de?k:0)+se)+fe;l.style.height=Ye+"px",x.scrollTop=ge-M+x.offsetTop}l.style.margin=`${Yi}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=E+"px",n==null||n(),requestAnimationFrame(()=>f.current=!0)}},[p,i.trigger,i.valueNode,l,d,x,w,v,i.dir,n]);qn(()=>N(),[N]);const[C,P]=g.useState();qn(()=>{d&&P(window.getComputedStyle(d).zIndex)},[d]);const D=g.useCallback(R=>{R&&y.current===!0&&(N(),b==null||b(),y.current=!1)},[N,b]);return s.jsx(qY,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:D,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:s.jsx(Mt.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});D7.displayName=zY;var UY="SelectPopperPosition",xw=g.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Yi,...i}=e,o=c1(r);return s.jsx(Yy,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xw.displayName=UY;var[qY,eS]=Of(gu,{}),gw="SelectViewport",O7=g.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=bd(gw,r),o=eS(gw,r),l=_s(t,i.onViewportChange),c=g.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(o1.Slot,{scope:r,children:s.jsx(Mt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:gt(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const f=Math.abs(c.current-u.scrollTop);if(f>0){const y=window.innerHeight-Yi*2,x=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),v=Math.max(x,w);if(v<y){const b=v+f,N=Math.min(y,b),C=b-N;h.style.height=N+"px",h.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});O7.displayName=gw;var M7="SelectGroup",[VY,HY]=Of(M7),WY=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Pn();return s.jsx(VY,{scope:r,id:a,children:s.jsx(Mt.div,{role:"group","aria-labelledby":a,...n,ref:t})})});WY.displayName=M7;var $7="SelectLabel",B7=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=HY($7,r);return s.jsx(Mt.div,{id:a.id,...n,ref:t})});B7.displayName=$7;var kv="SelectItem",[GY,z7]=Of(kv),U7=g.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=jd(kv,r),c=bd(kv,r),d=l.value===n,[u,h]=g.useState(i??""),[p,f]=g.useState(!1),y=_s(t,b=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,b,n,a)}),x=Pn(),w=g.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(GY,{scope:r,value:n,disabled:a,textId:x,isSelected:d,onItemTextChange:g.useCallback(b=>{h(N=>N||((b==null?void 0:b.textContent)??"").trim())},[]),children:s.jsx(o1.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(Mt.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:y,onFocus:gt(o.onFocus,()=>f(!0)),onBlur:gt(o.onBlur,()=>f(!1)),onClick:gt(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:gt(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:gt(o.onPointerDown,b=>{w.current=b.pointerType}),onPointerMove:gt(o.onPointerMove,b=>{var N;w.current=b.pointerType,a?(N=c.onItemLeave)==null||N.call(c):w.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:gt(o.onPointerLeave,b=>{var N;b.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:gt(o.onKeyDown,b=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&b.key===" "||(TY.includes(b.key)&&v(),b.key===" "&&b.preventDefault())})})})})});U7.displayName=kv;var Dm="SelectItemText",q7=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=jd(Dm,r),l=bd(Dm,r),c=z7(Dm,r),d=DY(Dm,r),[u,h]=g.useState(null),p=_s(t,v=>h(v),c.onItemTextChange,v=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,v,c.value,c.disabled)}),f=u==null?void 0:u.textContent,y=g.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:x,onNativeOptionRemove:w}=d;return qn(()=>(x(y),()=>w(y)),[x,w,y]),s.jsxs(s.Fragment,{children:[s.jsx(Mt.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?pd.createPortal(i.children,o.valueNode):null]})});q7.displayName=Dm;var V7="SelectItemIndicator",H7=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return z7(V7,r).isSelected?s.jsx(Mt.span,{"aria-hidden":!0,...n,ref:t}):null});H7.displayName=V7;var vw="SelectScrollUpButton",W7=g.forwardRef((e,t)=>{const r=bd(vw,e.__scopeSelect),n=eS(vw,e.__scopeSelect),[a,i]=g.useState(!1),o=_s(t,n.onScrollButtonChange);return qn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(K7,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});W7.displayName=vw;var yw="SelectScrollDownButton",G7=g.forwardRef((e,t)=>{const r=bd(yw,e.__scopeSelect),n=eS(yw,e.__scopeSelect),[a,i]=g.useState(!1),o=_s(t,n.onScrollButtonChange);return qn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(K7,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});G7.displayName=yw;var K7=g.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=bd("SelectScrollButton",r),o=g.useRef(null),l=l1(r),c=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),qn(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(Mt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:gt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:gt(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:gt(a.onPointerLeave,()=>{c()})})}),KY="SelectSeparator",Y7=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Mt.div,{"aria-hidden":!0,...n,ref:t})});Y7.displayName=KY;var jw="SelectArrow",YY=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=c1(r),i=jd(jw,r),o=bd(jw,r);return i.open&&o.position==="popper"?s.jsx(Jy,{...a,...n,ref:t}):null});YY.displayName=jw;var JY="SelectBubbleInput",J7=g.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=g.useRef(null),i=_s(n,a),o=Q5(t);return g.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&u){const h=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(Mt.select,{...r,style:{...h8,...r.style},ref:i,defaultValue:t})});J7.displayName=JY;function Z7(e){return e===""||e===void 0}function X7(e){const t=Wa(e),r=g.useRef(""),n=g.useRef(0),a=g.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=g.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function Q7(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=ZY(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function ZY(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var XY=C7,eL=P7,QY=E7,eJ=L7,tJ=T7,tL=R7,sJ=O7,sL=B7,rL=U7,rJ=q7,nJ=H7,nL=W7,aL=G7,iL=Y7;const Gt=XY,Kt=QY,zt=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(eL,{ref:n,className:it("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(eJ,{asChild:!0,children:s.jsx(Zp,{className:"h-4 w-4 opacity-50"})})]}));zt.displayName=eL.displayName;const oL=g.forwardRef(({className:e,...t},r)=>s.jsx(nL,{ref:r,className:it("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(GA,{className:"h-4 w-4"})}));oL.displayName=nL.displayName;const lL=g.forwardRef(({className:e,...t},r)=>s.jsx(aL,{ref:r,className:it("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Zp,{className:"h-4 w-4"})}));lL.displayName=aL.displayName;const Ut=g.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(tJ,{children:s.jsxs(tL,{ref:a,className:it("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(oL,{}),s.jsx(sJ,{className:it("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(lL,{})]})}));Ut.displayName=tL.displayName;const aJ=g.forwardRef(({className:e,...t},r)=>s.jsx(sL,{ref:r,className:it("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));aJ.displayName=sL.displayName;const Ee=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(rL,{ref:n,className:it("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(nJ,{children:s.jsx(Sn,{className:"h-4 w-4"})})}),s.jsx(rJ,{children:t})]}));Ee.displayName=rL.displayName;const iJ=g.forwardRef(({className:e,...t},r)=>s.jsx(iL,{ref:r,className:it("-mx-1 my-1 h-px bg-muted",e),...t}));iJ.displayName=iL.displayName;const oJ=()=>{const e=er(),{trips:t,loading:r}=Ct(v=>v.trips),[n,a]=g.useState(""),[i,o]=g.useState("all"),[l,c]=g.useState("all"),u=(()=>{const v=localStorage.getItem("schoolId");return v?parseInt(v):void 0})();g.useEffect(()=>{u&&e(su({schoolId:u}))},[e,u]);const h=t.filter(v=>{var P,D,R;const b=((P=v.route_name)==null?void 0:P.toLowerCase().includes(n.toLowerCase()))||((D=v.driver_name)==null?void 0:D.toLowerCase().includes(n.toLowerCase()))||((R=v.vehicle_registration)==null?void 0:R.toLowerCase().includes(n.toLowerCase())),N=i==="all"||v.status===i,C=l==="all"||v.trip_type===l;return b&&N&&C}),p={total:t.length,scheduled:t.filter(v=>v.status==="scheduled").length,ongoing:t.filter(v=>v.status==="ongoing").length,completed:t.filter(v=>v.status==="completed").length,cancelled:t.filter(v=>v.status==="cancelled").length,delayed:t.filter(v=>v.status==="delayed").length,morning:t.filter(v=>v.trip_type==="morning").length,afternoon:t.filter(v=>v.trip_type==="afternoon").length,evening:t.filter(v=>v.trip_type==="evening").length},f=v=>{switch(v.toLowerCase()){case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"ongoing":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"completed":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"delayed":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},y=v=>{switch(v.toLowerCase()){case"scheduled":return s.jsx(ar,{className:"h-4 w-4"});case"ongoing":return s.jsx($n,{className:"h-4 w-4"});case"completed":return s.jsx(Ht,{className:"h-4 w-4"});case"cancelled":return s.jsx(gd,{className:"h-4 w-4"});case"delayed":return s.jsx(Nr,{className:"h-4 w-4"});default:return s.jsx(ar,{className:"h-4 w-4"})}},x=v=>{try{return new Date(v).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return v}},w=v=>{try{return new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return v}};return r?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(ba,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading trips..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-2 gap-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Trips"}),s.jsx($n,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:p.total}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All time trips"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Active Trips"}),s.jsx(Oi,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:p.ongoing}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Scheduled"}),s.jsx(on,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:p.scheduled}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Upcoming trips"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Completed"}),s.jsx(Ht,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:p.completed}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully finished"})]})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(pr,{className:"h-5 w-5"}),"Trip Type Distribution"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:p.morning}),s.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Morning Trips"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:p.afternoon}),s.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Afternoon Trips"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:p.evening}),s.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Evening Trips"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:p.total}),s.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Total Trips"})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(Ul,{className:"h-5 w-5"}),"Filter Trips"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"search",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ie,{id:"search",placeholder:"Search routes, drivers, vehicles...",value:n,onChange:v=>a(v.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"status",children:"Status"}),s.jsxs(Gt,{value:i,onValueChange:o,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Status"}),s.jsx(Ee,{value:"scheduled",children:"Scheduled"}),s.jsx(Ee,{value:"ongoing",children:"Ongoing"}),s.jsx(Ee,{value:"completed",children:"Completed"}),s.jsx(Ee,{value:"cancelled",children:"Cancelled"}),s.jsx(Ee,{value:"delayed",children:"Delayed"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"type",children:"Trip Type"}),s.jsxs(Gt,{value:l,onValueChange:c,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select type"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Types"}),s.jsx(Ee,{value:"morning",children:"Morning"}),s.jsx(Ee,{value:"afternoon",children:"Afternoon"}),s.jsx(Ee,{value:"evening",children:"Evening"})]})]})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx($n,{className:"h-5 w-5"}),"Trips (",h.length,")"]}),s.jsx(ce,{variant:"outline",size:"sm",children:"View All"})]})}),s.jsx(Te,{children:h.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx($n,{className:"mx-auto h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-foreground",children:"No trips found"}),s.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n||i!=="all"||l!=="all"?"Try adjusting your filters.":"No trips have been created yet."})]}):s.jsx("div",{className:"rounded-md border",children:s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"Route"}),s.jsx(ut,{children:"Driver"}),s.jsx(ut,{children:"Vehicle"}),s.jsx(ut,{children:"Type"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Start Time"}),s.jsx(ut,{children:"Students"})]})}),s.jsx(Aa,{children:h.slice(0,10).map(v=>s.jsxs(Js,{children:[s.jsx(ct,{className:"font-medium",children:v.route_name}),s.jsx(ct,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ia,{className:"h-4 w-4 text-muted-foreground"}),v.driver_name]})}),s.jsx(ct,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($n,{className:"h-4 w-4 text-muted-foreground"}),v.vehicle_registration]})}),s.jsx(ct,{children:s.jsx(Pe,{variant:"outline",className:"capitalize",children:v.trip_type})}),s.jsx(ct,{children:s.jsx(Pe,{className:f(v.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[y(v.status),v.status]})})}),s.jsx(ct,{children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:w(v.scheduled_start_time)}),s.jsx("div",{className:"text-muted-foreground",children:x(v.scheduled_start_time)})]})}),s.jsx(ct,{children:v.students_count||0})]},v.id))})]})})})]})]})},lJ=()=>{const{trips:e}=Ct(f=>f.trips),{schools:t}=Ct(f=>f.schools),{parents:r}=Ct(f=>f.parents),{drivers:n}=Ct(f=>f.drivers),{students:a}=Ct(f=>f.students),{vehicles:i}=Ct(f=>f.vehicles),{routes:o}=Ct(f=>f.routes),[l,c]=g.useState("week"),d={totalTrips:e.length,completedTrips:e.filter(f=>f.status==="completed").length,activeTrips:e.filter(f=>f.status==="ongoing").length,delayedTrips:e.filter(f=>f.status==="delayed").length,morningTrips:e.filter(f=>f.trip_type==="morning").length,afternoonTrips:e.filter(f=>f.trip_type==="afternoon").length,eveningTrips:e.filter(f=>f.trip_type==="evening").length,scheduledTrips:e.filter(f=>f.status==="scheduled").length,cancelledTrips:e.filter(f=>f.status==="cancelled").length,totalSchools:t.length,totalParents:r.length,totalDrivers:n.length,totalStudents:a.length,totalVehicles:i.length,totalRoutes:o.length,completionRate:e.length>0?(e.filter(f=>f.status==="completed").length/e.length*100).toFixed(1):"0",delayRate:e.length>0?(e.filter(f=>f.status==="delayed").length/e.length*100).toFixed(1):"0",cancellationRate:e.length>0?(e.filter(f=>f.status==="cancelled").length/e.length*100).toFixed(1):"0"},u=[...e].sort((f,y)=>new Date(y.created_at||"").getTime()-new Date(f.created_at||"").getTime()).slice(0,5),h=f=>{try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return f}},p=f=>{switch(f.toLowerCase()){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"ongoing":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"delayed":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Completion Rate"}),s.jsx(Oi,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[d.completionRate,"%"]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.completedTrips," of ",d.totalTrips," trips"]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Delay Rate"}),s.jsx(ar,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[d.delayRate,"%"]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.delayedTrips," delayed trips"]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Active Operations"}),s.jsx($n,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.activeTrips}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Fleet"}),s.jsx(pr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:d.totalVehicles}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Available vehicles"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(WA,{className:"h-5 w-5"}),"Trip Type Distribution"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Morning"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.morningTrips}),s.jsxs(Pe,{variant:"outline",children:[(d.morningTrips/d.totalTrips*100).toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Afternoon"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.afternoonTrips}),s.jsxs(Pe,{variant:"outline",children:[(d.afternoonTrips/d.totalTrips*100).toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Evening"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.eveningTrips}),s.jsxs(Pe,{variant:"outline",children:[(d.eveningTrips/d.totalTrips*100).toFixed(1),"%"]})]})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(Oy,{className:"h-5 w-5"}),"Trip Status Distribution"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Completed"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.completedTrips}),s.jsxs(Pe,{variant:"outline",children:[d.completionRate,"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Scheduled"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.scheduledTrips}),s.jsxs(Pe,{variant:"outline",children:[(d.scheduledTrips/d.totalTrips*100).toFixed(1),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Delayed"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.delayedTrips}),s.jsxs(Pe,{variant:"outline",children:[d.delayRate,"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Cancelled"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:d.cancelledTrips}),s.jsxs(Pe,{variant:"outline",children:[d.cancellationRate,"%"]})]})]})]})})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-5 w-5"}),"School Overview"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d.totalStudents}),s.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Students"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:d.totalParents}),s.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Parents"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:d.totalDrivers}),s.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Drivers"})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:d.totalVehicles}),s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Vehicles"})]}),s.jsxs("div",{className:"text-center p-4 bg-indigo-50 dark:bg-indigo-950 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:d.totalRoutes}),s.jsx("div",{className:"text-sm text-indigo-600 dark:text-indigo-400",children:"Routes"})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(on,{className:"h-5 w-5"}),"Recent Trip Activity"]}),s.jsxs(ce,{variant:"outline",size:"sm",children:[s.jsx(Un,{className:"h-4 w-4 mr-2"}),"Export Data"]})]})}),s.jsx(Te,{children:s.jsx("div",{className:"space-y-4",children:u.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(on,{className:"mx-auto h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-foreground",children:"No recent trips"}),s.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Trip activity will appear here once trips are created."})]}):u.map(f=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($n,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:f.route_name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ia,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:f.driver_name})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Pe,{className:p(f.status),children:f.status}),s.jsx("span",{className:"text-sm text-muted-foreground",children:f.created_at?h(f.created_at):"N/A"})]})]},f.id))})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(XU,{className:"h-5 w-5"}),"Quick Analytics Actions"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(ce,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[s.jsx(Oi,{className:"h-6 w-6"}),s.jsx("span",{children:"Performance Report"})]}),s.jsxs(ce,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[s.jsx(ns,{className:"h-6 w-6"}),s.jsx("span",{children:"User Analytics"})]}),s.jsxs(ce,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[s.jsx(pr,{className:"h-6 w-6"}),s.jsx("span",{children:"Route Analysis"})]})]})})]})]})},cJ=()=>{const e=er(),{stats:t,loading:r,error:n,lastUpdated:a}=Ct(C=>C.overview),{user:i}=Ct(C=>C.auth),{schools:o,loading:l,error:c}=Ct(C=>C.schools),{preferences:d={showAnalytics:!0,showRecentActivity:!0,showNotificationsPanel:!0,allowDataExport:!0,autoBackup:!0,theme:"light",language:"en"}}=Ct(C=>C.preferences),{notifications:u}=Ct(C=>C.notifications),{parents:h}=Ct(C=>C.parents),{drivers:p}=Ct(C=>C.drivers),y=(()=>{const C=localStorage.getItem("schoolId");if(C)return parseInt(C);const P=o.find(D=>D.admin===(i==null?void 0:i.id));return P==null?void 0:P.id})();g.useEffect(()=>{y&&(e(Qm({schoolId:y})),e($h({schoolId:y})),e(xa({schoolId:y})),e(Mn())),e(ep())},[e,y]);const x=()=>{y&&(e(Qm({schoolId:y})),e($h({schoolId:y})),e(xa({schoolId:y})),e(Mn()))},w=C=>{const P=new Date(C),R=Math.floor((new Date().getTime()-P.getTime())/(1e3*60));return R<1?"Just now":R<60?`${R} min ago`:R<1440?`${Math.floor(R/60)} hour${Math.floor(R/60)>1?"s":""} ago`:`${Math.floor(R/1440)} day${Math.floor(R/1440)>1?"s":""} ago`},v=C=>{const P={ACTION_REQUIRED:{color:"bg-orange-100 text-orange-800",icon:Nr},SYSTEM:{color:"bg-blue-100 text-blue-800",icon:Oo},INFO:{color:"bg-blue-100 text-blue-800",icon:Oo},WARNING:{color:"bg-yellow-100 text-yellow-800",icon:Nr},EMERGENCY:{color:"bg-red-100 text-red-800",icon:Nr}};return P[C]||P.INFO},b=C=>{const P=h==null?void 0:h.find(D=>D.id===C);return P?P.user_full_name:`Parent ${C}`},N=C=>{const P=p==null?void 0:p.find(D=>D.id===C);return P?`${P.user_details.first_name} ${P.user_details.last_name}`:`Driver ${C}`};return l?s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ba,{className:"h-5 w-5 animate-spin text-primary"}),s.jsx("span",{className:"text-muted-foreground",children:"Loading school information..."})]})})})}):c?s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs(Wc,{variant:"destructive",className:"border-red-200 bg-red-50 dark:bg-red-950/20",children:[s.jsx(Nr,{className:"h-4 w-4"}),s.jsxs(Gc,{children:["Failed to load school information: ",c]})]})})}):y?s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"p-2",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:"Dashboard Overview"}),a&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Last updated: ",new Date(a).toLocaleString()]})]}),s.jsxs(ce,{onClick:x,disabled:r,variant:"outline",size:"sm",className:"flex items-center gap-2 hover:bg-accent/50",children:[s.jsx(yv,{className:`h-4 w-4 ${r?"animate-spin":""}`}),"Refresh"]})]}),n&&s.jsxs(Wc,{className:"mb-6 border-red-200 bg-red-50 dark:bg-red-950/20",variant:"destructive",children:[s.jsx(Nr,{className:"h-4 w-4"}),s.jsx(Gc,{children:n})]}),s.jsxs("div",{className:"grid gap-6",children:[d.showAnalytics&&s.jsx("div",{className:"mb-4",children:s.jsx(kY,{})}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsx(oJ,{}),s.jsx(lJ,{})]}),d.showRecentActivity&&s.jsx("div",{className:"mb-4",children:s.jsx(EY,{})}),d.showNotificationsPanel&&s.jsxs(Le,{className:"border-0 shadow-sm bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20",children:[s.jsx(Be,{className:"pb-3",children:s.jsxs(Ue,{className:"flex items-center gap-2 text-lg",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(Oo,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Recent Notifications",u&&u.length>0&&s.jsx(Pe,{variant:"secondary",className:"ml-2",children:u.length})]})}),s.jsx(Te,{className:"pt-0",children:!u||u.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Oo,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):s.jsx("div",{className:"space-y-3",children:u.slice(0,5).map(C=>{var R,A,I,O;const P=v(C.notification_type||"INFO"),D=P.icon;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800/50 rounded-xl border shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${C.notification_type==="ACTION_REQUIRED"?"bg-orange-500":C.notification_type==="EMERGENCY"?"bg-red-500":C.notification_type==="WARNING"?"bg-yellow-500":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs(Pe,{className:`text-xs ${P.color}`,children:[s.jsx(D,{className:"w-3 h-3 mr-1"}),C.notification_type||"INFO"]}),C.is_read&&s.jsx(Ht,{className:"w-3 h-3 text-[#f7c624]"})]}),s.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm truncate",children:C.message}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["School:"," ",C.school_name||"Unknown"]}),(((R=C.parents)==null?void 0:R.length)>0||((A=C.drivers)==null?void 0:A.length)>0)&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[((I=C.parents)==null?void 0:I.length)>0&&s.jsxs("span",{className:"text-xs text-blue-600",children:["Parents:"," ",C.parents.map(b).join(", ")]}),((O=C.drivers)==null?void 0:O.length)>0&&s.jsxs("span",{className:"text-xs text-[#f7c624]",children:["Drivers:"," ",C.drivers.map(N).join(", ")]})]})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1 ml-3",children:[s.jsx("span",{className:"text-xs text-gray-500 font-medium",children:C.created_at?w(C.created_at):"N/A"}),!C.is_read&&s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]})]},C.id)})})})]}),!d.showAnalytics&&!d.showRecentActivity&&!d.showNotificationsPanel&&s.jsx(Le,{className:"border-0 shadow-sm bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900/20 dark:to-gray-800/20",children:s.jsx(Te,{className:"p-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"w-20 h-20 bg-muted rounded-2xl flex items-center justify-center shadow-inner",children:s.jsx("svg",{className:"w-10 h-10 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Dashboard is Empty"}),s.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"All dashboard sections are currently disabled. You can enable them in the Settings page under Personalization."})]})]})})})]})]})})}):s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs(Wc,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950/20",children:[s.jsx(Nr,{className:"h-4 w-4"}),s.jsxs(Gc,{children:["No school ID found. Please ensure you are associated with a school.",o.length===0&&" No schools available.",o.length>0&&i&&` Available schools: ${o.length}, User ID: ${i.id}`]})]})})})};function B3({isOpen:e,onClose:t,trip:r,mode:n}){var $,U,K,re,pe,Q,J;const a=er(),{toast:i}=Ar(),{loading:o}=Ct(q=>q.trips),{routes:l}=Ct(q=>q.routes),{drivers:c}=Ct(q=>q.drivers),{vehicles:d}=Ct(q=>q.vehicles),{schools:u}=Ct(q=>q.schools),{user:h}=Ct(q=>q.auth),[p,f]=g.useState({route:"",driver:"",vehicle:"",trip_type:"morning",status:"scheduled",scheduled_start_time:"",scheduled_end_time:""}),[y,x]=g.useState({}),[w,v]=g.useState(!1),[b,N]=g.useState(!1),C=($=u.find(q=>q.admin===(h==null?void 0:h.id)))==null?void 0:$.id,P=l.filter(q=>q.school===C),D=c.filter(q=>q.school===C),R=d.filter(q=>q.school===C),A=(q,Y)=>{const k={...y};switch(q){case"route":Y?delete k.route:k.route="Route is required";break;case"driver":Y?delete k.driver:k.driver="Driver is required";break;case"vehicle":Y?delete k.vehicle:k.vehicle="Vehicle is required";break;case"scheduled_start_time":Y?new Date(Y)<new Date?k.scheduled_start_time="Start time cannot be in the past":delete k.scheduled_start_time:k.scheduled_start_time="Start time is required";break;case"scheduled_end_time":if(!Y)k.scheduled_end_time="End time is required";else{const L=new Date(p.scheduled_start_time);new Date(Y)<=L?k.scheduled_end_time="End time must be after start time":delete k.scheduled_end_time}break}return x(k),Object.keys(k).length===0},I=()=>{const q=["route","driver","vehicle","scheduled_start_time","scheduled_end_time"];let Y=!0;return q.forEach(k=>{A(k,p[k])||(Y=!1)}),Y},O=()=>{const q=[];return D.find(L=>{var M;return((M=L.user_details)==null?void 0:M.id.toString())===p.driver&&!1})&&q.push("Driver is already assigned to another trip at this time"),R.find(L=>L.id.toString()===p.vehicle&&!1)&&q.push("Vehicle is already in use for another trip at this time"),q};g.useEffect(()=>{f(r&&n==="edit"?{route:r.route.toString(),driver:r.driver.toString(),vehicle:r.vehicle.toString(),trip_type:r.trip_type,status:r.status,scheduled_start_time:r.scheduled_start_time,scheduled_end_time:r.scheduled_end_time}:{route:"",driver:"",vehicle:"",trip_type:"morning",status:"scheduled",scheduled_start_time:"",scheduled_end_time:""}),x({}),N(!1)},[r,n,e]);const F=async q=>{if(q.preventDefault(),!C){i({title:"Error",description:"No school found for current user",variant:"destructive"});return}if(!I()){i({title:"Validation Error",description:"Please fix all errors before submitting",variant:"destructive"});return}const Y=O();if(Y.length>0){i({title:"Conflict Detected",description:Y.join(", "),variant:"destructive"});return}if(n==="create"&&!b){N(!0);return}v(!0);const k={route:parseInt(p.route),driver:parseInt(p.driver),vehicle:parseInt(p.vehicle),trip_type:p.trip_type,status:p.status,scheduled_start_time:p.scheduled_start_time,scheduled_end_time:p.scheduled_end_time,school:C};try{n==="create"?(await a(u0(k)).unwrap(),i({title:"Success",description:"Trip created successfully"})):r!=null&&r.id&&(await a(h0({id:r.id,tripData:k})).unwrap(),i({title:"Success",description:"Trip updated successfully"})),t()}catch(L){let M="Failed to save trip";if(L&&typeof L=="object"){const W=L;W.errors&&W.errors.non_field_errors?M=W.errors.non_field_errors.join(", "):W.message&&(M=W.message)}else typeof L=="string"?M=L:L instanceof Error&&(M=L.message);i({title:"Error",description:M,variant:"destructive"})}finally{v(!1)}},E=q=>{const{name:Y,value:k}="target"in q?q.target:q;f(L=>({...L,[Y]:k})),A(Y,k)};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"sm:max-w-[700px] max-h-[95vh] overflow-y-auto p-0",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:s.jsx(QA,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx(xs,{className:"text-xl font-semibold",children:n==="create"?"Create New Trip":"Edit Trip"}),s.jsx(bn,{className:"text-blue-100 mt-1",children:n==="create"?"Set up a new trip with route, driver, and vehicle assignments":"Update trip details and assignments"})]})]}),s.jsx(ce,{variant:"ghost",size:"sm",onClick:t,className:"text-white hover:bg-white/20 h-8 w-8 p-0",children:s.jsx(co,{className:"h-4 w-4"})})]})}),s.jsxs("div",{className:"p-6",children:[b&&n==="create"&&s.jsxs(Wc,{className:"mb-6 border-amber-200 bg-amber-50",children:[s.jsx(Nr,{className:"h-4 w-4 text-amber-600"}),s.jsx(Gc,{className:"text-amber-800",children:"Are you sure you want to create this trip? This action will assign the selected driver and vehicle to the specified route."})]}),s.jsxs("form",{onSubmit:F,className:"space-y-8",children:[s.jsxs(Le,{className:"border-0 shadow-sm",children:[s.jsx(Be,{className:"pb-4",children:s.jsxs(Ue,{className:"text-lg flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-blue-100 rounded-md",children:s.jsx(ns,{className:"h-4 w-4 text-blue-600"})}),"Assignment Details"]})}),s.jsx(Te,{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ne,{htmlFor:"route",className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(pr,{className:"h-4 w-4 text-blue-600"}),"Route *"]}),s.jsxs(Gt,{value:p.route,onValueChange:q=>E({name:"route",value:q}),children:[s.jsx(zt,{className:`h-11 ${y.route?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`,children:s.jsx(Kt,{placeholder:"Choose a route"})}),s.jsx(Ut,{children:P.map(q=>s.jsx(Ee,{value:q.id.toString(),children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-blue-100 rounded-md",children:s.jsx(pr,{className:"h-3 w-3 text-blue-600"})}),s.jsx("span",{className:"font-medium",children:q.name})]})},q.id))})]}),y.route&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded-md",children:[s.jsx(Nr,{className:"h-4 w-4"}),y.route]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ne,{htmlFor:"driver",className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(ia,{className:"h-4 w-4 text-green-600"}),"Driver *"]}),s.jsxs(Gt,{value:p.driver,onValueChange:q=>E({name:"driver",value:q}),children:[s.jsx(zt,{className:`h-11 ${y.driver?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-green-500"}`,children:s.jsx(Kt,{placeholder:"Choose a driver"})}),s.jsx(Ut,{children:D.map(q=>{var Y,k,L,M;return s.jsx(Ee,{value:(Y=q.user_details)==null?void 0:Y.id.toString(),children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-green-100 rounded-md",children:s.jsx(ia,{className:"h-3 w-3 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[(k=q.user_details)==null?void 0:k.first_name," ",(L=q.user_details)==null?void 0:L.last_name]}),((M=q.user_details)==null?void 0:M.phone_number)&&s.jsx("div",{className:"text-sm text-gray-500",children:q.user_details.phone_number})]})]})},q.id)})})]}),y.driver&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded-md",children:[s.jsx(Nr,{className:"h-4 w-4"}),y.driver]})]})]})})]}),s.jsxs(Le,{className:"border-0 shadow-sm",children:[s.jsx(Be,{className:"pb-4",children:s.jsxs(Ue,{className:"text-lg flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-purple-100 rounded-md",children:s.jsx(Li,{className:"h-4 w-4 text-purple-600"})}),"Vehicle & Schedule"]})}),s.jsx(Te,{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ne,{htmlFor:"vehicle",className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Li,{className:"h-4 w-4 text-purple-600"}),"Vehicle *"]}),s.jsxs(Gt,{value:p.vehicle,onValueChange:q=>E({name:"vehicle",value:q}),children:[s.jsx(zt,{className:`h-11 ${y.vehicle?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,children:s.jsx(Kt,{placeholder:"Choose a vehicle"})}),s.jsx(Ut,{children:R.map(q=>s.jsx(Ee,{value:q.id.toString(),children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-purple-100 rounded-md",children:s.jsx(Li,{className:"h-3 w-3 text-purple-600"})}),s.jsx("span",{className:"font-medium",children:q.registration_number})]})},q.id))})]}),y.vehicle&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded-md",children:[s.jsx(Nr,{className:"h-4 w-4"}),y.vehicle]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ne,{htmlFor:"trip_type",className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(ar,{className:"h-4 w-4 text-orange-600"}),"Trip Type"]}),s.jsxs(Gt,{value:p.trip_type,onValueChange:q=>E({name:"trip_type",value:q}),children:[s.jsx(zt,{className:"h-11 border-gray-200 focus:border-orange-500",children:s.jsx(Kt,{placeholder:"Select trip type"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"morning",children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-yellow-100 rounded-md",children:s.jsx(ar,{className:"h-3 w-3 text-yellow-600"})}),s.jsx(Pe,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-0",children:"Morning"})]})}),s.jsx(Ee,{value:"afternoon",children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-orange-100 rounded-md",children:s.jsx(ar,{className:"h-3 w-3 text-orange-600"})}),s.jsx(Pe,{variant:"secondary",className:"bg-orange-100 text-orange-800 border-0",children:"Afternoon"})]})}),s.jsx(Ee,{value:"evening",children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-purple-100 rounded-md",children:s.jsx(ar,{className:"h-3 w-3 text-purple-600"})}),s.jsx(Pe,{variant:"secondary",className:"bg-purple-100 text-purple-800 border-0",children:"Evening"})]})})]})]})]})]})})]}),s.jsxs(Le,{className:"border-0 shadow-sm",children:[s.jsx(Be,{className:"pb-4",children:s.jsxs(Ue,{className:"text-lg flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-green-100 rounded-md",children:s.jsx(on,{className:"h-4 w-4 text-green-600"})}),"Schedule Timing"]})}),s.jsx(Te,{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ne,{htmlFor:"scheduled_start_time",className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(on,{className:"h-4 w-4 text-green-600"}),"Start Time *"]}),s.jsx(Ie,{id:"scheduled_start_time",name:"scheduled_start_time",type:"datetime-local",value:p.scheduled_start_time,onChange:E,className:`h-11 ${y.scheduled_start_time?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-green-500"}`,required:!0}),y.scheduled_start_time?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded-md",children:[s.jsx(Nr,{className:"h-4 w-4"}),y.scheduled_start_time]}):s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 bg-gray-50 p-2 rounded-md",children:[s.jsx(gv,{className:"h-3 w-3"}),"Select when the trip should begin"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ne,{htmlFor:"scheduled_end_time",className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(on,{className:"h-4 w-4 text-green-600"}),"End Time *"]}),s.jsx(Ie,{id:"scheduled_end_time",name:"scheduled_end_time",type:"datetime-local",value:p.scheduled_end_time,onChange:E,className:`h-11 ${y.scheduled_end_time?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-green-500"}`,required:!0}),y.scheduled_end_time?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded-md",children:[s.jsx(Nr,{className:"h-4 w-4"}),y.scheduled_end_time]}):s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 bg-gray-50 p-2 rounded-md",children:[s.jsx(gv,{className:"h-3 w-3"}),"Must be after start time"]})]})]})})]}),s.jsxs(Le,{className:"border-0 shadow-sm",children:[s.jsx(Be,{className:"pb-4",children:s.jsxs(Ue,{className:"text-lg flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-md",children:s.jsx(ns,{className:"h-4 w-4 text-indigo-600"})}),"Trip Status"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ne,{htmlFor:"status",className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(ns,{className:"h-4 w-4 text-indigo-600"}),"Current Status"]}),s.jsxs(Gt,{value:p.status,onValueChange:q=>E({name:"status",value:q}),children:[s.jsx(zt,{className:"h-11 border-gray-200 focus:border-indigo-500",children:s.jsx(Kt,{placeholder:"Select status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"scheduled",children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-blue-100 rounded-md",children:s.jsx(ar,{className:"h-3 w-3 text-blue-600"})}),s.jsx(Pe,{variant:"outline",className:"border-blue-200 text-blue-800",children:"Scheduled"})]})}),s.jsx(Ee,{value:"preparing",children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-yellow-100 rounded-md",children:s.jsx(ar,{className:"h-3 w-3 text-yellow-600"})}),s.jsx(Pe,{variant:"outline",className:"border-yellow-200 text-yellow-800",children:"Preparing"})]})}),s.jsx(Ee,{value:"ongoing",children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-green-100 rounded-md",children:s.jsx(ar,{className:"h-3 w-3 text-green-600"})}),s.jsx(Pe,{variant:"outline",className:"border-green-200 text-green-800",children:"Ongoing"})]})}),s.jsx(Ee,{value:"completed",children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-gray-100 rounded-md",children:s.jsx(cb,{className:"h-3 w-3 text-gray-600"})}),s.jsx(Pe,{variant:"outline",className:"border-gray-200 text-gray-800",children:"Completed"})]})}),s.jsx(Ee,{value:"cancelled",children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-red-100 rounded-md",children:s.jsx(co,{className:"h-3 w-3 text-red-600"})}),s.jsx(Pe,{variant:"outline",className:"border-red-200 text-red-800",children:"Cancelled"})]})}),s.jsx(Ee,{value:"delayed",children:s.jsxs("div",{className:"flex items-center gap-3 py-1",children:[s.jsx("div",{className:"p-1.5 bg-orange-100 rounded-md",children:s.jsx(ar,{className:"h-3 w-3 text-orange-600"})}),s.jsx(Pe,{variant:"outline",className:"border-orange-200 text-orange-800",children:"Delayed"})]})})]})]})]})})]}),p.route&&p.driver&&p.vehicle&&s.jsxs(Le,{className:"border-0 shadow-sm bg-gradient-to-r from-blue-50 to-purple-50",children:[s.jsx(Be,{className:"pb-4",children:s.jsxs(Ue,{className:"text-lg flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-blue-100 rounded-md",children:s.jsx(cb,{className:"h-4 w-4 text-blue-600"})}),"Trip Summary"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-md",children:s.jsx(pr,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Route"}),s.jsx("p",{className:"font-medium",children:(U=P.find(q=>q.id.toString()===p.route))==null?void 0:U.name})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-md",children:s.jsx(ia,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Driver"}),s.jsxs("p",{className:"font-medium",children:[(re=(K=D.find(q=>{var Y;return((Y=q.user_details)==null?void 0:Y.id.toString())===p.driver}))==null?void 0:K.user_details)==null?void 0:re.first_name," ",(Q=(pe=D.find(q=>{var Y;return((Y=q.user_details)==null?void 0:Y.id.toString())===p.driver}))==null?void 0:pe.user_details)==null?void 0:Q.last_name]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-md",children:s.jsx(Li,{className:"h-4 w-4 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Vehicle"}),s.jsx("p",{className:"font-medium",children:(J=R.find(q=>q.id.toString()===p.vehicle))==null?void 0:J.registration_number})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-md",children:s.jsx(ar,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Type"}),s.jsx("p",{className:"font-medium capitalize",children:p.trip_type})]})]})]})]})})]}),s.jsx(nu,{className:"my-6"}),s.jsxs(so,{className:"flex gap-3 px-0",children:[s.jsxs(ce,{type:"button",variant:"outline",onClick:t,className:"flex-1 h-11",children:[s.jsx(co,{className:"mr-2 h-4 w-4"}),"Cancel"]}),b&&n==="create"?s.jsxs(s.Fragment,{children:[s.jsxs(ce,{type:"button",variant:"outline",onClick:()=>N(!1),className:"flex-1 h-11",children:[s.jsx(Zp,{className:"mr-2 h-4 w-4"}),"Back"]}),s.jsx(ce,{type:"submit",disabled:w||o,className:"flex-1 h-11 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:w||o?s.jsxs(s.Fragment,{children:[s.jsx(ba,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(cb,{className:"mr-2 h-4 w-4"}),"Confirm Create"]})})]}):s.jsx(ce,{type:"submit",disabled:w||o,className:"flex-1 h-11 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:w||o?s.jsxs(s.Fragment,{children:[s.jsx(ba,{className:"mr-2 h-4 w-4 animate-spin"}),n==="create"?"Creating...":"Updating..."]}):n==="create"?s.jsxs(s.Fragment,{children:[s.jsx(ja,{className:"mr-2 h-4 w-4"}),"Create Trip"]}):s.jsxs(s.Fragment,{children:[s.jsx(cq,{className:"mr-2 h-4 w-4"}),"Update Trip"]})})]})]})]})]})})}var cL="AlertDialog",[dJ,Ose]=_a(cL,[CE]),ql=CE(),dL=e=>{const{__scopeAlertDialog:t,...r}=e,n=ql(t);return s.jsx(E5,{...n,...r,modal:!0})};dL.displayName=cL;var uJ="AlertDialogTrigger",hJ=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ql(r);return s.jsx(UE,{...a,...n,ref:t})});hJ.displayName=uJ;var fJ="AlertDialogPortal",uL=e=>{const{__scopeAlertDialog:t,...r}=e,n=ql(t);return s.jsx(L5,{...n,...r})};uL.displayName=fJ;var mJ="AlertDialogOverlay",hL=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ql(r);return s.jsx(qy,{...a,...n,ref:t})});hL.displayName=mJ;var qh="AlertDialogContent",[pJ,xJ]=dJ(qh),gJ=rE("AlertDialogContent"),fL=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=ql(r),o=g.useRef(null),l=_s(t,o),c=g.useRef(null);return s.jsx(kH,{contentName:qh,titleName:mL,docsSlug:"alert-dialog",children:s.jsx(pJ,{scope:r,cancelRef:c,children:s.jsxs(Vy,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:gt(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(gJ,{children:n}),s.jsx(yJ,{contentRef:o})]})})})});fL.displayName=qh;var mL="AlertDialogTitle",pL=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ql(r);return s.jsx(T5,{...a,...n,ref:t})});pL.displayName=mL;var xL="AlertDialogDescription",gL=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ql(r);return s.jsx(R5,{...a,...n,ref:t})});gL.displayName=xL;var vJ="AlertDialogAction",vL=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ql(r);return s.jsx(I5,{...a,...n,ref:t})});vL.displayName=vJ;var yL="AlertDialogCancel",jL=g.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=xJ(yL,r),i=ql(r),o=_s(t,a);return s.jsx(I5,{...i,...n,ref:o})});jL.displayName=yL;var yJ=({contentRef:e})=>{const t=`\`${qh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${qh}\` by passing a \`${xL}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${qh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},jJ=dL,bJ=uL,bL=hL,wL=fL,NL=vL,SL=jL,_L=pL,CL=gL;const ad=jJ,wJ=bJ,kL=g.forwardRef(({className:e,...t},r)=>s.jsx(bL,{className:it("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));kL.displayName=bL.displayName;const Ll=g.forwardRef(({className:e,...t},r)=>s.jsxs(wJ,{children:[s.jsx(kL,{}),s.jsx(wL,{ref:r,className:it("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Ll.displayName=wL.displayName;const Tl=({className:e,...t})=>s.jsx("div",{className:it("flex flex-col space-y-2 text-center sm:text-left",e),...t});Tl.displayName="AlertDialogHeader";const Rl=({className:e,...t})=>s.jsx("div",{className:it("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Rl.displayName="AlertDialogFooter";const Il=g.forwardRef(({className:e,...t},r)=>s.jsx(_L,{ref:r,className:it("text-lg font-semibold",e),...t}));Il.displayName=_L.displayName;const Fl=g.forwardRef(({className:e,...t},r)=>s.jsx(CL,{ref:r,className:it("text-sm text-muted-foreground",e),...t}));Fl.displayName=CL.displayName;const Dl=g.forwardRef(({className:e,...t},r)=>s.jsx(NL,{ref:r,className:it(S5(),e),...t}));Dl.displayName=NL.displayName;const Ol=g.forwardRef(({className:e,...t},r)=>s.jsx(SL,{ref:r,className:it(S5({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ol.displayName=SL.displayName;const ku=({data:e,className:t="",variant:r="outline",size:n="default"})=>{const[a,i]=g.useState(!1),o=()=>{try{const d=[e.headers.join(","),...e.data.map((f,y)=>{const x=e.headers.map(w=>{const v=f[w.toLowerCase().replace(/\s+/g,"_")]||f[w]||"";return`"${String(v).replace(/"/g,'""')}"`}).join(",");return y<3,x})].join(`
`),u=new Blob([d],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a"),p=URL.createObjectURL(u);h.setAttribute("href",p),h.setAttribute("download",`${e.fileName}_${new Date().toISOString().split("T")[0]}.csv`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),Fs({title:"Export Successful",description:"Data exported to Excel (CSV) successfully"})}catch{Fs({title:"Export Failed",description:"Failed to export data",variant:"destructive"})}},l=()=>{try{const d=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>${e.title||"Report"}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; font-weight: bold; }
            h1 { color: #333; }
            .header { margin-bottom: 20px; }
            .date { color: #666; font-size: 14px; }
            .summary { margin: 20px 0; padding: 10px; background-color: #f9f9f9; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${e.title||"Report"}</h1>
            <div class="date">Generated on: ${new Date().toLocaleDateString()}</div>
          </div>
          
          <div class="summary">
            <h3>Summary</h3>
            <p>Total Records: ${e.data.length}</p>
            <p>Generated: ${new Date().toLocaleString()}</p>
          </div>
          
          <table>
            <thead>
              <tr>
                ${e.headers.map(f=>`<th>${f}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${e.data.map((f,y)=>(y<3,`
                <tr>
                  ${e.headers.map(x=>{const w=f[x.toLowerCase().replace(/\s+/g,"_")]||f[x]||"";return`<td>${String(w)}</td>`}).join("")}
                </tr>
              `)).join("")}
            </tbody>
          </table>
        </body>
        </html>
      `,u=new Blob([d],{type:"text/html;charset=utf-8;"}),h=document.createElement("a"),p=URL.createObjectURL(u);h.setAttribute("href",p),h.setAttribute("download",`${e.fileName}_${new Date().toISOString().split("T")[0]}.html`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),Fs({title:"Export Successful",description:"Report exported to HTML (can be opened in browser and saved as PDF)"})}catch{Fs({title:"Export Failed",description:"Failed to export report",variant:"destructive"})}},c=()=>{try{const d=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>${e.title||"Report"}</title>
          <style>
            body { font-family: 'Times New Roman', serif; margin: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 8px; text-align: left; }
            th { background-color: #f0f0f0; font-weight: bold; }
            h1 { color: #000; text-align: center; }
            .header { margin-bottom: 20px; text-align: center; }
            .date { color: #666; font-size: 14px; text-align: center; }
            .summary { margin: 20px 0; padding: 10px; background-color: #f9f9f9; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${e.title||"Report"}</h1>
            <div class="date">Generated on: ${new Date().toLocaleDateString()}</div>
          </div>
          
          <div class="summary">
            <h3>Summary</h3>
            <p>Total Records: ${e.data.length}</p>
            <p>Generated: ${new Date().toLocaleString()}</p>
          </div>

          <table>
            <thead>
              <tr>
                ${e.headers.map(f=>`<th>${f}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${e.data.map((f,y)=>(y<3,`
                <tr>
                  ${e.headers.map(x=>{const w=f[x.toLowerCase().replace(/\s+/g,"_")]||f[x]||"";return`<td>${String(w)}</td>`}).join("")}
                </tr>
              `)).join("")}
            </tbody>
          </table>
        </body>
        </html>
      `,u=new Blob([d],{type:"application/msword;charset=utf-8;"}),h=document.createElement("a"),p=URL.createObjectURL(u);h.setAttribute("href",p),h.setAttribute("download",`${e.fileName}_${new Date().toISOString().split("T")[0]}.doc`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),Fs({title:"Export Successful",description:"Report exported to Word document successfully"})}catch{Fs({title:"Export Failed",description:"Failed to export report",variant:"destructive"})}};return s.jsxs(Vn,{open:a,onOpenChange:i,children:[s.jsx(Hn,{asChild:!0,children:s.jsxs(ce,{variant:r,size:n,className:t,children:[s.jsx(Un,{className:"mr-2 h-4 w-4"}),"Export",s.jsx(Zp,{className:"ml-2 h-4 w-4"})]})}),s.jsxs(An,{align:"end",className:"w-48",children:[s.jsxs(Jt,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{o(),i(!1)},children:[s.jsx(YA,{className:"h-4 w-4"}),"Export to Excel"]}),s.jsxs(Jt,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{l(),i(!1)},children:[s.jsx(kn,{className:"h-4 w-4"}),"Export to PDF"]}),s.jsxs(Jt,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{c(),i(!1)},children:[s.jsx(sw,{className:"h-4 w-4"}),"Export to Word"]})]})]})};function NJ(){var L;const e=er(),{toast:t}=Ar(),{trips:r,loading:n,error:a}=Ct(M=>M.trips),{user:i}=Ct(M=>M.auth),{schools:o}=Ct(M=>M.schools),[l,c]=g.useState(!1),[d,u]=g.useState(null),[h,p]=g.useState(!1),[f,y]=g.useState(!1),[x,w]=g.useState(""),[v,b]=g.useState("all"),[N,C]=g.useState("all"),[P,D]=g.useState(1),[R]=g.useState(10),A=(L=o.find(M=>M.admin===(i==null?void 0:i.id)))==null?void 0:L.id,I=r;g.useEffect(()=>{},[r,I,A]),g.useEffect(()=>{(async()=>{try{A&&await e(su({schoolId:A})).unwrap(),await e(Io()),await e(Mn()),await e(Rh())}catch{}})()},[e,A]);const O=I.filter(M=>{var ge,fe,Me;const W=((ge=M.route_name)==null?void 0:ge.toLowerCase().includes(x.toLowerCase()))||((fe=M.driver_name)==null?void 0:fe.toLowerCase().includes(x.toLowerCase()))||((Me=M.vehicle_registration)==null?void 0:Me.toLowerCase().includes(x.toLowerCase()))||M.trip_type.toLowerCase().includes(x.toLowerCase()),se=v==="all"||M.status===v,ae=N==="all"||M.trip_type===N;return W&&se&&ae}),F=Math.ceil(O.length/R),E=(P-1)*R,$=E+R,U=O.slice(E,$);g.useEffect(()=>{D(1)},[x,v,N]);const K=()=>{u(null),c(!0)},re=M=>{u(M),p(!0)},pe=M=>{u(M),y(!0)},Q=async()=>{try{if(!d){t({title:"Error",description:"No trip selected for deletion",variant:"destructive"});return}await e(f0(d.id)).unwrap(),t({title:"Success",description:"Trip deleted successfully"}),y(!1),u(null)}catch(M){let W="Failed to delete trip";M instanceof Error?W=M.message:typeof M=="string"&&(W=M),t({title:"Error",description:W,variant:"destructive"})}},J=M=>{switch(M.toLowerCase()){case"scheduled":return"bg-blue-100 text-blue-800";case"preparing":return"bg-yellow-100 text-yellow-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"delayed":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},q=M=>{switch(M.toLowerCase()){case"morning":return"bg-orange-100 text-orange-800";case"afternoon":return"bg-purple-100 text-purple-800";case"evening":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}},Y=M=>{try{return new Date(M).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return M}},k=[{label:"Total Trips",value:I.length,icon:on},{label:"Scheduled",value:I.filter(M=>M.status==="scheduled").length,icon:ar},{label:"Ongoing",value:I.filter(M=>M.status==="ongoing").length,icon:pr},{label:"Completed",value:I.filter(M=>M.status==="completed").length,icon:ia}];return n?s.jsx("div",{className:"h-full w-full bg-gray-100 p-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#f7c624]"}),s.jsx("span",{children:"Loading trips..."})]})})})}):a?s.jsx("div",{className:"h-full w-full bg-gray-100 p-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx(Wc,{variant:"destructive",children:s.jsxs(Gc,{children:["Failed to load trips: ",a]})})})}):s.jsxs("div",{className:"h-full w-full bg-gray-100 p-4",children:[s.jsxs("div",{className:"max-w-7xl mx-auto space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Trips"}),s.jsx("p",{className:"text-gray-600",children:"Manage and monitor school bus trips"})]}),s.jsxs(ce,{onClick:K,className:"flex items-center gap-2",children:[s.jsx(ja,{className:"h-4 w-4"}),"Create Trip"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.map(M=>s.jsx(Le,{children:s.jsx(Te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:M.label}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.value})]}),s.jsx(M.icon,{className:"h-8 w-8 text-[#f7c624]"})]})})},M.label))}),s.jsx(Le,{children:s.jsx(Te,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ie,{placeholder:"Search trips...",value:x,onChange:M=>w(M.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:v,onChange:M=>b(M.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"preparing",children:"Preparing"}),s.jsx("option",{value:"ongoing",children:"Ongoing"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"delayed",children:"Delayed"})]}),s.jsxs("select",{value:N,onChange:M=>C(M.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"morning",children:"Morning"}),s.jsx("option",{value:"afternoon",children:"Afternoon"}),s.jsx("option",{value:"evening",children:"Evening"})]}),s.jsx(ku,{data:{headers:["Route","Driver","Vehicle","Trip Type","Start Time","End Time","Status","Students Count","Distance","Duration"],data:O.map(M=>{var W,se,ae,ge;return{route:M.route_name||`Route ${M.route}`,driver:M.driver_name||`Driver ${M.driver}`,vehicle:M.vehicle_registration||`Vehicle ${M.vehicle}`,trip_type:M.trip_type,start_time:Y(M.scheduled_start_time),end_time:M.scheduled_end_time?Y(M.scheduled_end_time):"",status:M.status.replace("_"," "),students_count:((se=(W=M.students)==null?void 0:W.length)==null?void 0:se.toString())||"0",distance:((ae=M.distance)==null?void 0:ae.toString())||"",duration:((ge=M.duration)==null?void 0:ge.toString())||""}}),fileName:"trips_export",title:"Trips Report"},className:"border-gray-200 hover:bg-gray-50 px-3 py-2"})]})]})})}),s.jsx(Le,{children:s.jsxs(Te,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"Route"}),s.jsx(ut,{children:"Driver"}),s.jsx(ut,{children:"Vehicle"}),s.jsx(ut,{children:"Trip Type"}),s.jsx(ut,{children:"Start Time"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Actions"})]})}),s.jsx(Aa,{children:U.length===0?s.jsx(Js,{children:s.jsx(ct,{colSpan:7,className:"text-center py-8",children:s.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[s.jsx(Li,{className:"h-8 w-8 text-gray-400"}),s.jsx("p",{className:"text-gray-500",children:"No trips found"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Create your first trip to get started"})]})})}):U.map(M=>s.jsxs(Js,{children:[s.jsx(ct,{className:"font-medium",children:M.route_name||`Route ${M.route}`}),s.jsx(ct,{children:M.driver_name||`Driver ${M.driver}`}),s.jsx(ct,{children:M.vehicle_registration||`Vehicle ${M.vehicle}`}),s.jsx(ct,{children:s.jsx(Pe,{className:q(M.trip_type),children:M.trip_type})}),s.jsx(ct,{children:Y(M.scheduled_start_time)}),s.jsx(ct,{children:s.jsx(Pe,{className:J(M.status),children:M.status.replace("_"," ")})}),s.jsx(ct,{children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(xv,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsxs(Jt,{onClick:()=>re(M),children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(Jt,{onClick:()=>pe(M),className:"text-red-600",children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},M.id))})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",E+1,"-",Math.min($,O.length)," of"," ",O.length," trips"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ce,{variant:"outline",size:"sm",onClick:()=>D(Math.max(1,P-1)),disabled:P===1,children:"Previous"}),s.jsx(ce,{variant:"outline",size:"sm",onClick:()=>D(Math.min(F,P+1)),disabled:P===F,children:"Next"})]})]})]})})]}),s.jsx(B3,{isOpen:l,onClose:()=>c(!1),mode:"create"}),s.jsx(B3,{isOpen:h,onClose:()=>p(!1),trip:d,mode:"edit"}),s.jsx(ad,{open:f,onOpenChange:y,children:s.jsxs(Ll,{children:[s.jsxs(Tl,{children:[s.jsx(Il,{children:"Are you sure?"}),s.jsxs(Fl,{children:["This action cannot be undone. This will permanently delete the trip",d&&` for route "${d.route_name||`Route ${d.route}`}"`,"."]})]}),s.jsxs(Rl,{children:[s.jsx(Ol,{children:"Cancel"}),s.jsx(Dl,{onClick:Q,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}var ax=e=>e.type==="checkbox",Vd=e=>e instanceof Date,pa=e=>e==null;const PL=e=>typeof e=="object";var Xr=e=>!pa(e)&&!Array.isArray(e)&&PL(e)&&!Vd(e),AL=e=>Xr(e)&&e.target?ax(e.target)?e.target.checked:e.target.value:e,SJ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,EL=(e,t)=>e.has(SJ(t)),_J=e=>{const t=e.constructor&&e.constructor.prototype;return Xr(t)&&t.hasOwnProperty("isPrototypeOf")},tS=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Fn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(tS&&(e instanceof Blob||n))&&(r||Xr(e)))if(t=r?[]:{},!r&&!_J(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Fn(e[a]));else return e;return t}var d1=e=>/^\w*$/.test(e),Hr=e=>e===void 0,sS=e=>Array.isArray(e)?e.filter(Boolean):[],rS=e=>sS(e.replace(/["|']|\]/g,"").split(/\.|\[/)),St=(e,t,r)=>{if(!t||!Xr(e))return r;const n=(d1(t)?[t]:rS(t)).reduce((a,i)=>pa(a)?a:a[i],e);return Hr(n)||n===e?Hr(e[t])?r:e[t]:n},ri=e=>typeof e=="boolean",Xs=(e,t,r)=>{let n=-1;const a=d1(t)?[t]:rS(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const d=e[l];c=Xr(d)||Array.isArray(d)?d:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Pv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ao={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},dl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},nS=vs.createContext(null);nS.displayName="HookFormContext";const u1=()=>vs.useContext(nS),CJ=e=>{const{children:t,...r}=e;return vs.createElement(nS.Provider,{value:r},t)};var LL=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==ao.all&&(t._proxyFormState[o]=!n||ao.all),r&&(r[o]=!0),e[o]}});return a};const aS=typeof window<"u"?g.useLayoutEffect:g.useEffect;function kJ(e){const t=u1(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=vs.useState(r._formState),c=vs.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return aS(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:d=>{!n&&l({...r._formState,...d})}}),[a,n,i]),vs.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),vs.useMemo(()=>LL(o,r,c.current,!1),[o,r])}var Bo=e=>typeof e=="string",TL=(e,t,r,n,a)=>Bo(e)?(n&&t.watch.add(e),St(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),St(r,i))):(n&&(t.watchAll=!0),r);function PJ(e){const t=u1(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o}=e||{},l=vs.useRef(a),[c,d]=vs.useState(r._getWatch(n,l.current));return aS(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:u=>!i&&d(TL(n,r._names,u.values||r._formValues,!1,l.current))}),[n,r,i,o]),vs.useEffect(()=>r._removeUnmounted()),c}function AJ(e){const t=u1(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i}=e,o=EL(a._names.array,r),l=PJ({control:a,name:r,defaultValue:St(a._formValues,r,St(a._defaultValues,r,e.defaultValue)),exact:!0}),c=kJ({control:a,name:r,exact:!0}),d=vs.useRef(e),u=vs.useRef(a.register(r,{...e.rules,value:l,...ri(e.disabled)?{disabled:e.disabled}:{}})),h=vs.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!St(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!St(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!St(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!St(c.validatingFields,r)},error:{enumerable:!0,get:()=>St(c.errors,r)}}),[c,r]),p=vs.useCallback(w=>u.current.onChange({target:{value:AL(w),name:r},type:Pv.CHANGE}),[r]),f=vs.useCallback(()=>u.current.onBlur({target:{value:St(a._formValues,r),name:r},type:Pv.BLUR}),[r,a._formValues]),y=vs.useCallback(w=>{const v=St(a._fields,r);v&&w&&(v._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:b=>w.setCustomValidity(b),reportValidity:()=>w.reportValidity()})},[a._fields,r]),x=vs.useMemo(()=>({name:r,value:l,...ri(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:p,onBlur:f,ref:y}),[r,n,c.disabled,p,f,y,l]);return vs.useEffect(()=>{const w=a._options.shouldUnregister||i;a.register(r,{...d.current.rules,...ri(d.current.disabled)?{disabled:d.current.disabled}:{}});const v=(b,N)=>{const C=St(a._fields,b);C&&C._f&&(C._f.mount=N)};if(v(r,!0),w){const b=Fn(St(a._options.defaultValues,r));Xs(a._defaultValues,r,b),Hr(St(a._formValues,r))&&Xs(a._formValues,r,b)}return!o&&a.register(r),()=>{(o?w&&!a._state.action:w)?a.unregister(r):v(r,!1)}},[r,a,o,i]),vs.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),vs.useMemo(()=>({field:x,formState:c,fieldState:h}),[x,c,h])}const EJ=e=>e.render(AJ(e));var RL=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},sp=e=>Array.isArray(e)?e:[e],z3=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},bw=e=>pa(e)||!PL(e);function yc(e,t){if(bw(e)||bw(t))return e===t;if(Vd(e)&&Vd(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r){const i=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const o=t[a];if(Vd(i)&&Vd(o)||Xr(i)&&Xr(o)||Array.isArray(i)&&Array.isArray(o)?!yc(i,o):i!==o)return!1}}return!0}var Da=e=>Xr(e)&&!Object.keys(e).length,iS=e=>e.type==="file",io=e=>typeof e=="function",Av=e=>{if(!tS)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},IL=e=>e.type==="select-multiple",oS=e=>e.type==="radio",LJ=e=>oS(e)||ax(e),Sb=e=>Av(e)&&e.isConnected;function TJ(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Hr(e)?n++:e[t[n++]];return e}function RJ(e){for(const t in e)if(e.hasOwnProperty(t)&&!Hr(e[t]))return!1;return!0}function dn(e,t){const r=Array.isArray(t)?t:d1(t)?[t]:rS(t),n=r.length===1?e:TJ(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Xr(n)&&Da(n)||Array.isArray(n)&&RJ(n))&&dn(e,r.slice(0,-1)),e}var FL=e=>{for(const t in e)if(io(e[t]))return!0;return!1};function Ev(e,t={}){const r=Array.isArray(e);if(Xr(e)||r)for(const n in e)Array.isArray(e[n])||Xr(e[n])&&!FL(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Ev(e[n],t[n])):pa(e[n])||(t[n]=!0);return t}function DL(e,t,r){const n=Array.isArray(e);if(Xr(e)||n)for(const a in e)Array.isArray(e[a])||Xr(e[a])&&!FL(e[a])?Hr(t)||bw(r[a])?r[a]=Array.isArray(e[a])?Ev(e[a],[]):{...Ev(e[a])}:DL(e[a],pa(t)?{}:t[a],r[a]):r[a]=!yc(e[a],t[a]);return r}var Sm=(e,t)=>DL(e,t,Ev(t));const U3={value:!1,isValid:!1},q3={value:!0,isValid:!0};var OL=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Hr(e[0].attributes.value)?Hr(e[0].value)||e[0].value===""?q3:{value:e[0].value,isValid:!0}:q3:U3}return U3},ML=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Hr(e)?e:t?e===""?NaN:e&&+e:r&&Bo(e)?new Date(e):n?n(e):e;const V3={isValid:!1,value:null};var $L=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,V3):V3;function H3(e){const t=e.ref;return iS(t)?t.files:oS(t)?$L(e.refs).value:IL(t)?[...t.selectedOptions].map(({value:r})=>r):ax(t)?OL(e.refs).value:ML(Hr(t.value)?e.ref.value:t.value,e)}var IJ=(e,t,r,n)=>{const a={};for(const i of e){const o=St(t,i);o&&Xs(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},Lv=e=>e instanceof RegExp,_m=e=>Hr(e)?e:Lv(e)?e.source:Xr(e)?Lv(e.value)?e.value.source:e.value:e,W3=e=>({isOnSubmit:!e||e===ao.onSubmit,isOnBlur:e===ao.onBlur,isOnChange:e===ao.onChange,isOnAll:e===ao.all,isOnTouch:e===ao.onTouched});const G3="AsyncFunction";var FJ=e=>!!e&&!!e.validate&&!!(io(e.validate)&&e.validate.constructor.name===G3||Xr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===G3)),DJ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),K3=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const rp=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=St(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(rp(l,t))break}else if(Xr(l)&&rp(l,t))break}}};function Y3(e,t,r){const n=St(e,r);if(n||d1(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=St(t,i),l=St(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var OJ=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Da(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||ao.all))},MJ=(e,t,r)=>!e||!t||e===t||sp(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),$J=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,BJ=(e,t)=>!sS(St(e,t)).length&&dn(e,t),zJ=(e,t,r)=>{const n=sp(St(e,r));return Xs(n,"root",t[r]),Xs(e,r,n),e},L0=e=>Bo(e);function J3(e,t,r="validate"){if(L0(e)||Array.isArray(e)&&e.every(L0)||ri(e)&&!e)return{type:r,message:L0(e)?e:"",ref:t}}var sh=e=>Xr(e)&&!Lv(e)?e:{value:e,message:""},Z3=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:h,max:p,pattern:f,validate:y,name:x,valueAsNumber:w,mount:v}=e._f,b=St(r,x);if(!v||t.has(x))return{};const N=l?l[0]:o,C=E=>{a&&N.reportValidity&&(N.setCustomValidity(ri(E)?"":E||""),N.reportValidity())},P={},D=oS(o),R=ax(o),A=D||R,I=(w||iS(o))&&Hr(o.value)&&Hr(b)||Av(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,O=RL.bind(null,x,n,P),F=(E,$,U,K=dl.maxLength,re=dl.minLength)=>{const pe=E?$:U;P[x]={type:E?K:re,message:pe,ref:o,...O(E?K:re,pe)}};if(i?!Array.isArray(b)||!b.length:c&&(!A&&(I||pa(b))||ri(b)&&!b||R&&!OL(l).isValid||D&&!$L(l).isValid)){const{value:E,message:$}=L0(c)?{value:!!c,message:c}:sh(c);if(E&&(P[x]={type:dl.required,message:$,ref:N,...O(dl.required,$)},!n))return C($),P}if(!I&&(!pa(h)||!pa(p))){let E,$;const U=sh(p),K=sh(h);if(!pa(b)&&!isNaN(b)){const re=o.valueAsNumber||b&&+b;pa(U.value)||(E=re>U.value),pa(K.value)||($=re<K.value)}else{const re=o.valueAsDate||new Date(b),pe=q=>new Date(new Date().toDateString()+" "+q),Q=o.type=="time",J=o.type=="week";Bo(U.value)&&b&&(E=Q?pe(b)>pe(U.value):J?b>U.value:re>new Date(U.value)),Bo(K.value)&&b&&($=Q?pe(b)<pe(K.value):J?b<K.value:re<new Date(K.value))}if((E||$)&&(F(!!E,U.message,K.message,dl.max,dl.min),!n))return C(P[x].message),P}if((d||u)&&!I&&(Bo(b)||i&&Array.isArray(b))){const E=sh(d),$=sh(u),U=!pa(E.value)&&b.length>+E.value,K=!pa($.value)&&b.length<+$.value;if((U||K)&&(F(U,E.message,$.message),!n))return C(P[x].message),P}if(f&&!I&&Bo(b)){const{value:E,message:$}=sh(f);if(Lv(E)&&!b.match(E)&&(P[x]={type:dl.pattern,message:$,ref:o,...O(dl.pattern,$)},!n))return C($),P}if(y){if(io(y)){const E=await y(b,r),$=J3(E,N);if($&&(P[x]={...$,...O(dl.validate,$.message)},!n))return C($.message),P}else if(Xr(y)){let E={};for(const $ in y){if(!Da(E)&&!n)break;const U=J3(await y[$](b,r),N,$);U&&(E={...U,...O($,U.message)},C(U.message),n&&(P[x]=E))}if(!Da(E)&&(P[x]={ref:N,...E},!n))return P}}return C(!0),P};const UJ={mode:ao.onSubmit,reValidateMode:ao.onChange,shouldFocusError:!0};function qJ(e={}){let t={...UJ,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:io(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let a=Xr(t.defaultValues)||Xr(t.values)?Fn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Fn(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const p={array:z3(),state:z3()},f=t.criteriaMode===ao.all,y=ee=>ue=>{clearTimeout(d),d=setTimeout(ee,ue)},x=async ee=>{if(!t.disabled&&(u.isValid||h.isValid||ee)){const ue=t.resolver?Da((await R()).errors):await I(n,!0);ue!==r.isValid&&p.state.next({isValid:ue})}},w=(ee,ue)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((ee||Array.from(l.mount)).forEach(ve=>{ve&&(ue?Xs(r.validatingFields,ve,ue):dn(r.validatingFields,ve))}),p.state.next({validatingFields:r.validatingFields,isValidating:!Da(r.validatingFields)}))},v=(ee,ue=[],ve,qe,We=!0,ze=!0)=>{if(qe&&ve&&!t.disabled){if(o.action=!0,ze&&Array.isArray(St(n,ee))){const rt=ve(St(n,ee),qe.argA,qe.argB);We&&Xs(n,ee,rt)}if(ze&&Array.isArray(St(r.errors,ee))){const rt=ve(St(r.errors,ee),qe.argA,qe.argB);We&&Xs(r.errors,ee,rt),BJ(r.errors,ee)}if((u.touchedFields||h.touchedFields)&&ze&&Array.isArray(St(r.touchedFields,ee))){const rt=ve(St(r.touchedFields,ee),qe.argA,qe.argB);We&&Xs(r.touchedFields,ee,rt)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=Sm(a,i)),p.state.next({name:ee,isDirty:F(ee,ue),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Xs(i,ee,ue)},b=(ee,ue)=>{Xs(r.errors,ee,ue),p.state.next({errors:r.errors})},N=ee=>{r.errors=ee,p.state.next({errors:r.errors,isValid:!1})},C=(ee,ue,ve,qe)=>{const We=St(n,ee);if(We){const ze=St(i,ee,Hr(ve)?St(a,ee):ve);Hr(ze)||qe&&qe.defaultChecked||ue?Xs(i,ee,ue?ze:H3(We._f)):U(ee,ze),o.mount&&x()}},P=(ee,ue,ve,qe,We)=>{let ze=!1,rt=!1;const _t={name:ee};if(!t.disabled){if(!ve||qe){(u.isDirty||h.isDirty)&&(rt=r.isDirty,r.isDirty=_t.isDirty=F(),ze=rt!==_t.isDirty);const we=yc(St(a,ee),ue);rt=!!St(r.dirtyFields,ee),we?dn(r.dirtyFields,ee):Xs(r.dirtyFields,ee,!0),_t.dirtyFields=r.dirtyFields,ze=ze||(u.dirtyFields||h.dirtyFields)&&rt!==!we}if(ve){const we=St(r.touchedFields,ee);we||(Xs(r.touchedFields,ee,ve),_t.touchedFields=r.touchedFields,ze=ze||(u.touchedFields||h.touchedFields)&&we!==ve)}ze&&We&&p.state.next(_t)}return ze?_t:{}},D=(ee,ue,ve,qe)=>{const We=St(r.errors,ee),ze=(u.isValid||h.isValid)&&ri(ue)&&r.isValid!==ue;if(t.delayError&&ve?(c=y(()=>b(ee,ve)),c(t.delayError)):(clearTimeout(d),c=null,ve?Xs(r.errors,ee,ve):dn(r.errors,ee)),(ve?!yc(We,ve):We)||!Da(qe)||ze){const rt={...qe,...ze&&ri(ue)?{isValid:ue}:{},errors:r.errors,name:ee};r={...r,...rt},p.state.next(rt)}},R=async ee=>{w(ee,!0);const ue=await t.resolver(i,t.context,IJ(ee||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return w(ee),ue},A=async ee=>{const{errors:ue}=await R(ee);if(ee)for(const ve of ee){const qe=St(ue,ve);qe?Xs(r.errors,ve,qe):dn(r.errors,ve)}else r.errors=ue;return ue},I=async(ee,ue,ve={valid:!0})=>{for(const qe in ee){const We=ee[qe];if(We){const{_f:ze,...rt}=We;if(ze){const _t=l.array.has(ze.name),we=We._f&&FJ(We._f);we&&u.validatingFields&&w([qe],!0);const te=await Z3(We,l.disabled,i,f,t.shouldUseNativeValidation&&!ue,_t);if(we&&u.validatingFields&&w([qe]),te[ze.name]&&(ve.valid=!1,ue))break;!ue&&(St(te,ze.name)?_t?zJ(r.errors,te,ze.name):Xs(r.errors,ze.name,te[ze.name]):dn(r.errors,ze.name))}!Da(rt)&&await I(rt,ue,ve)}}return ve.valid},O=()=>{for(const ee of l.unMount){const ue=St(n,ee);ue&&(ue._f.refs?ue._f.refs.every(ve=>!Sb(ve)):!Sb(ue._f.ref))&&ae(ee)}l.unMount=new Set},F=(ee,ue)=>!t.disabled&&(ee&&ue&&Xs(i,ee,ue),!yc(q(),a)),E=(ee,ue,ve)=>TL(ee,l,{...o.mount?i:Hr(ue)?a:Bo(ee)?{[ee]:ue}:ue},ve,ue),$=ee=>sS(St(o.mount?i:a,ee,t.shouldUnregister?St(a,ee,[]):[])),U=(ee,ue,ve={})=>{const qe=St(n,ee);let We=ue;if(qe){const ze=qe._f;ze&&(!ze.disabled&&Xs(i,ee,ML(ue,ze)),We=Av(ze.ref)&&pa(ue)?"":ue,IL(ze.ref)?[...ze.ref.options].forEach(rt=>rt.selected=We.includes(rt.value)):ze.refs?ax(ze.ref)?ze.refs.forEach(rt=>{(!rt.defaultChecked||!rt.disabled)&&(Array.isArray(We)?rt.checked=!!We.find(_t=>_t===rt.value):rt.checked=We===rt.value||!!We)}):ze.refs.forEach(rt=>rt.checked=rt.value===We):iS(ze.ref)?ze.ref.value="":(ze.ref.value=We,ze.ref.type||p.state.next({name:ee,values:Fn(i)})))}(ve.shouldDirty||ve.shouldTouch)&&P(ee,We,ve.shouldTouch,ve.shouldDirty,!0),ve.shouldValidate&&J(ee)},K=(ee,ue,ve)=>{for(const qe in ue){if(!ue.hasOwnProperty(qe))return;const We=ue[qe],ze=ee+"."+qe,rt=St(n,ze);(l.array.has(ee)||Xr(We)||rt&&!rt._f)&&!Vd(We)?K(ze,We,ve):U(ze,We,ve)}},re=(ee,ue,ve={})=>{const qe=St(n,ee),We=l.array.has(ee),ze=Fn(ue);Xs(i,ee,ze),We?(p.array.next({name:ee,values:Fn(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&ve.shouldDirty&&p.state.next({name:ee,dirtyFields:Sm(a,i),isDirty:F(ee,ze)})):qe&&!qe._f&&!pa(ze)?K(ee,ze,ve):U(ee,ze,ve),K3(ee,l)&&p.state.next({...r}),p.state.next({name:o.mount?ee:void 0,values:Fn(i)})},pe=async ee=>{o.mount=!0;const ue=ee.target;let ve=ue.name,qe=!0;const We=St(n,ve),ze=we=>{qe=Number.isNaN(we)||Vd(we)&&isNaN(we.getTime())||yc(we,St(i,ve,we))},rt=W3(t.mode),_t=W3(t.reValidateMode);if(We){let we,te;const he=ue.type?H3(We._f):AL(ee),Ne=ee.type===Pv.BLUR||ee.type===Pv.FOCUS_OUT,Ve=!DJ(We._f)&&!t.resolver&&!St(r.errors,ve)&&!We._f.deps||$J(Ne,St(r.touchedFields,ve),r.isSubmitted,_t,rt),Ke=K3(ve,l,Ne);Xs(i,ve,he),Ne?(We._f.onBlur&&We._f.onBlur(ee),c&&c(0)):We._f.onChange&&We._f.onChange(ee);const lt=P(ve,he,Ne),tt=!Da(lt)||Ke;if(!Ne&&p.state.next({name:ve,type:ee.type,values:Fn(i)}),Ve)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?Ne&&x():Ne||x()),tt&&p.state.next({name:ve,...Ke?{}:lt});if(!Ne&&Ke&&p.state.next({...r}),t.resolver){const{errors:pt}=await R([ve]);if(ze(he),qe){const Yt=Y3(r.errors,n,ve),Dt=Y3(pt,n,Yt.name||ve);we=Dt.error,ve=Dt.name,te=Da(pt)}}else w([ve],!0),we=(await Z3(We,l.disabled,i,f,t.shouldUseNativeValidation))[ve],w([ve]),ze(he),qe&&(we?te=!1:(u.isValid||h.isValid)&&(te=await I(n,!0)));qe&&(We._f.deps&&J(We._f.deps),D(ve,te,we,lt))}},Q=(ee,ue)=>{if(St(r.errors,ue)&&ee.focus)return ee.focus(),1},J=async(ee,ue={})=>{let ve,qe;const We=sp(ee);if(t.resolver){const ze=await A(Hr(ee)?ee:We);ve=Da(ze),qe=ee?!We.some(rt=>St(ze,rt)):ve}else ee?(qe=(await Promise.all(We.map(async ze=>{const rt=St(n,ze);return await I(rt&&rt._f?{[ze]:rt}:rt)}))).every(Boolean),!(!qe&&!r.isValid)&&x()):qe=ve=await I(n);return p.state.next({...!Bo(ee)||(u.isValid||h.isValid)&&ve!==r.isValid?{}:{name:ee},...t.resolver||!ee?{isValid:ve}:{},errors:r.errors}),ue.shouldFocus&&!qe&&rp(n,Q,ee?We:l.mount),qe},q=ee=>{const ue={...o.mount?i:a};return Hr(ee)?ue:Bo(ee)?St(ue,ee):ee.map(ve=>St(ue,ve))},Y=(ee,ue)=>({invalid:!!St((ue||r).errors,ee),isDirty:!!St((ue||r).dirtyFields,ee),error:St((ue||r).errors,ee),isValidating:!!St(r.validatingFields,ee),isTouched:!!St((ue||r).touchedFields,ee)}),k=ee=>{ee&&sp(ee).forEach(ue=>dn(r.errors,ue)),p.state.next({errors:ee?r.errors:{}})},L=(ee,ue,ve)=>{const qe=(St(n,ee,{_f:{}})._f||{}).ref,We=St(r.errors,ee)||{},{ref:ze,message:rt,type:_t,...we}=We;Xs(r.errors,ee,{...we,...ue,ref:qe}),p.state.next({name:ee,errors:r.errors,isValid:!1}),ve&&ve.shouldFocus&&qe&&qe.focus&&qe.focus()},M=(ee,ue)=>io(ee)?p.state.subscribe({next:ve=>ee(E(void 0,ue),ve)}):E(ee,ue,!0),W=ee=>p.state.subscribe({next:ue=>{MJ(ee.name,ue.name,ee.exact)&&OJ(ue,ee.formState||u,vt,ee.reRenderRoot)&&ee.callback({values:{...i},...r,...ue})}}).unsubscribe,se=ee=>(o.mount=!0,h={...h,...ee.formState},W({...ee,formState:h})),ae=(ee,ue={})=>{for(const ve of ee?sp(ee):l.mount)l.mount.delete(ve),l.array.delete(ve),ue.keepValue||(dn(n,ve),dn(i,ve)),!ue.keepError&&dn(r.errors,ve),!ue.keepDirty&&dn(r.dirtyFields,ve),!ue.keepTouched&&dn(r.touchedFields,ve),!ue.keepIsValidating&&dn(r.validatingFields,ve),!t.shouldUnregister&&!ue.keepDefaultValue&&dn(a,ve);p.state.next({values:Fn(i)}),p.state.next({...r,...ue.keepDirty?{isDirty:F()}:{}}),!ue.keepIsValid&&x()},ge=({disabled:ee,name:ue})=>{(ri(ee)&&o.mount||ee||l.disabled.has(ue))&&(ee?l.disabled.add(ue):l.disabled.delete(ue))},fe=(ee,ue={})=>{let ve=St(n,ee);const qe=ri(ue.disabled)||ri(t.disabled);return Xs(n,ee,{...ve||{},_f:{...ve&&ve._f?ve._f:{ref:{name:ee}},name:ee,mount:!0,...ue}}),l.mount.add(ee),ve?ge({disabled:ri(ue.disabled)?ue.disabled:t.disabled,name:ee}):C(ee,!0,ue.value),{...qe?{disabled:ue.disabled||t.disabled}:{},...t.progressive?{required:!!ue.required,min:_m(ue.min),max:_m(ue.max),minLength:_m(ue.minLength),maxLength:_m(ue.maxLength),pattern:_m(ue.pattern)}:{},name:ee,onChange:pe,onBlur:pe,ref:We=>{if(We){fe(ee,ue),ve=St(n,ee);const ze=Hr(We.value)&&We.querySelectorAll&&We.querySelectorAll("input,select,textarea")[0]||We,rt=LJ(ze),_t=ve._f.refs||[];if(rt?_t.find(we=>we===ze):ze===ve._f.ref)return;Xs(n,ee,{_f:{...ve._f,...rt?{refs:[..._t.filter(Sb),ze,...Array.isArray(St(a,ee))?[{}]:[]],ref:{type:ze.type,name:ee}}:{ref:ze}}}),C(ee,!1,void 0,ze)}else ve=St(n,ee,{}),ve._f&&(ve._f.mount=!1),(t.shouldUnregister||ue.shouldUnregister)&&!(EL(l.array,ee)&&o.action)&&l.unMount.add(ee)}}},Me=()=>t.shouldFocusError&&rp(n,Q,l.mount),de=ee=>{ri(ee)&&(p.state.next({disabled:ee}),rp(n,(ue,ve)=>{const qe=St(n,ve);qe&&(ue.disabled=qe._f.disabled||ee,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(We=>{We.disabled=qe._f.disabled||ee}))},0,!1))},$e=(ee,ue)=>async ve=>{let qe;ve&&(ve.preventDefault&&ve.preventDefault(),ve.persist&&ve.persist());let We=Fn(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:ze,values:rt}=await R();r.errors=ze,We=rt}else await I(n);if(l.disabled.size)for(const ze of l.disabled)Xs(We,ze,void 0);if(dn(r.errors,"root"),Da(r.errors)){p.state.next({errors:{}});try{await ee(We,ve)}catch(ze){qe=ze}}else ue&&await ue({...r.errors},ve),Me(),setTimeout(Me);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Da(r.errors)&&!qe,submitCount:r.submitCount+1,errors:r.errors}),qe)throw qe},Ye=(ee,ue={})=>{St(n,ee)&&(Hr(ue.defaultValue)?re(ee,Fn(St(a,ee))):(re(ee,ue.defaultValue),Xs(a,ee,Fn(ue.defaultValue))),ue.keepTouched||dn(r.touchedFields,ee),ue.keepDirty||(dn(r.dirtyFields,ee),r.isDirty=ue.defaultValue?F(ee,Fn(St(a,ee))):F()),ue.keepError||(dn(r.errors,ee),u.isValid&&x()),p.state.next({...r}))},mt=(ee,ue={})=>{const ve=ee?Fn(ee):a,qe=Fn(ve),We=Da(ee),ze=We?a:qe;if(ue.keepDefaultValues||(a=ve),!ue.keepValues){if(ue.keepDirtyValues){const rt=new Set([...l.mount,...Object.keys(Sm(a,i))]);for(const _t of Array.from(rt))St(r.dirtyFields,_t)?Xs(ze,_t,St(i,_t)):re(_t,St(ze,_t))}else{if(tS&&Hr(ee))for(const rt of l.mount){const _t=St(n,rt);if(_t&&_t._f){const we=Array.isArray(_t._f.refs)?_t._f.refs[0]:_t._f.ref;if(Av(we)){const te=we.closest("form");if(te){te.reset();break}}}}for(const rt of l.mount)re(rt,St(ze,rt))}i=Fn(ze),p.array.next({values:{...ze}}),p.state.next({values:{...ze}})}l={mount:ue.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!ue.keepIsValid||!!ue.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:ue.keepSubmitCount?r.submitCount:0,isDirty:We?!1:ue.keepDirty?r.isDirty:!!(ue.keepDefaultValues&&!yc(ee,a)),isSubmitted:ue.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:We?{}:ue.keepDirtyValues?ue.keepDefaultValues&&i?Sm(a,i):r.dirtyFields:ue.keepDefaultValues&&ee?Sm(a,ee):ue.keepDirty?r.dirtyFields:{},touchedFields:ue.keepTouched?r.touchedFields:{},errors:ue.keepErrors?r.errors:{},isSubmitSuccessful:ue.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Se=(ee,ue)=>mt(io(ee)?ee(i):ee,ue),oe=(ee,ue={})=>{const ve=St(n,ee),qe=ve&&ve._f;if(qe){const We=qe.refs?qe.refs[0]:qe.ref;We.focus&&(We.focus(),ue.shouldSelect&&io(We.select)&&We.select())}},vt=ee=>{r={...r,...ee}},xe={control:{register:fe,unregister:ae,getFieldState:Y,handleSubmit:$e,setError:L,_subscribe:W,_runSchema:R,_focusError:Me,_getWatch:E,_getDirty:F,_setValid:x,_setFieldArray:v,_setDisabledField:ge,_setErrors:N,_getFieldArray:$,_reset:mt,_resetDefaultValues:()=>io(t.defaultValues)&&t.defaultValues().then(ee=>{Se(ee,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:de,_subjects:p,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(ee){o=ee},get _defaultValues(){return a},get _names(){return l},set _names(ee){l=ee},get _formState(){return r},get _options(){return t},set _options(ee){t={...t,...ee}}},subscribe:se,trigger:J,register:fe,handleSubmit:$e,watch:M,setValue:re,getValues:q,reset:Se,resetField:Ye,clearErrors:k,unregister:ae,setError:L,setFocus:oe,getFieldState:Y};return{...xe,formControl:xe}}function Tv(e={}){const t=vs.useRef(void 0),r=vs.useRef(void 0),[n,a]=vs.useState({isDirty:!1,isValidating:!1,isLoading:io(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:io(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!io(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=qJ(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,aS(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),vs.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),vs.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),vs.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),vs.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),vs.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),vs.useEffect(()=>{e.values&&!yc(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),vs.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=LL(n,i),t.current}const np=CJ,BL=g.createContext({}),dr=({...e})=>s.jsx(BL.Provider,{value:{name:e.name},children:s.jsx(EJ,{...e})}),h1=()=>{const e=g.useContext(BL),t=g.useContext(zL),{getFieldState:r,formState:n}=u1(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},zL=g.createContext({}),zs=g.forwardRef(({className:e,...t},r)=>{const n=g.useId();return s.jsx(zL.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:it("space-y-2",e),...t})})});zs.displayName="FormItem";const Is=g.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=h1();return s.jsx(ne,{ref:r,className:it(n&&"text-destructive",e),htmlFor:a,...t})});Is.displayName="FormLabel";const Qs=g.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=h1();return s.jsx(wu,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});Qs.displayName="FormControl";const VJ=g.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=h1();return s.jsx("p",{ref:r,id:n,className:it("text-sm text-muted-foreground",e),...t})});VJ.displayName="FormDescription";const Vr=g.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=h1(),o=a?String(a==null?void 0:a.message):t;return o?s.jsx("p",{ref:n,id:i,className:it("text-sm font-medium text-destructive",e),...r,children:o}):null});Vr.displayName="FormMessage";const X3=(e,t,r)=>{if(e&&"reportValidity"in e){const n=St(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},UL=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?X3(n.ref,r,e):n.refs&&n.refs.forEach(a=>X3(a,r,e))}},HJ=(e,t)=>{t.shouldUseNativeValidation&&UL(e,t);const r={};for(const n in e){const a=St(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(WJ(t.names||Object.keys(e),n)){const o=Object.assign({},St(r,n));Xs(o,"root",i),Xs(r,n,o)}else Xs(r,n,i)}return r},WJ=(e,t)=>e.some(r=>r.startsWith(t+"."));var GJ=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var c=r[o].types,d=c&&c[n.code];r[o]=RL(o,t,r,a,d?[].concat(d,n.message):n.message)}e.shift()}return r},Rv=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(d){return i.shouldUseNativeValidation&&UL({},i),{errors:{},values:r.raw?n:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:HJ(GJ(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Ws;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Ws||(Ws={}));var Q3;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Q3||(Q3={}));const Bt=Ws.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mc=e=>{switch(typeof e){case"undefined":return Bt.undefined;case"string":return Bt.string;case"number":return Number.isNaN(e)?Bt.nan:Bt.number;case"boolean":return Bt.boolean;case"function":return Bt.function;case"bigint":return Bt.bigint;case"symbol":return Bt.symbol;case"object":return Array.isArray(e)?Bt.array:e===null?Bt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Bt.promise:typeof Map<"u"&&e instanceof Map?Bt.map:typeof Set<"u"&&e instanceof Set?Bt.set:typeof Date<"u"&&e instanceof Date?Bt.date:Bt.object;default:return Bt.unknown}},xt=Ws.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ml extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),n}static assert(t){if(!(t instanceof Ml))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ws.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ml.create=e=>new Ml(e);const ww=(e,t)=>{let r;switch(e.code){case xt.invalid_type:e.received===Bt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case xt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Ws.jsonStringifyReplacer)}`;break;case xt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ws.joinValues(e.keys,", ")}`;break;case xt.invalid_union:r="Invalid input";break;case xt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ws.joinValues(e.options)}`;break;case xt.invalid_enum_value:r=`Invalid enum value. Expected ${Ws.joinValues(e.options)}, received '${e.received}'`;break;case xt.invalid_arguments:r="Invalid function arguments";break;case xt.invalid_return_type:r="Invalid function return type";break;case xt.invalid_date:r="Invalid date";break;case xt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Ws.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case xt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case xt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case xt.custom:r="Invalid input";break;case xt.invalid_intersection_types:r="Intersection results could not be merged";break;case xt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case xt.not_finite:r="Number must be finite";break;default:r=t.defaultError,Ws.assertNever(e)}return{message:r}};let KJ=ww;function YJ(){return KJ}const JJ=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function Tt(e,t){const r=YJ(),n=JJ({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===ww?void 0:ww].filter(a=>!!a)});e.common.issues.push(n)}class hi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return cs;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return hi.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return cs;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const cs=Object.freeze({status:"aborted"}),Om=e=>({status:"dirty",value:e}),Bi=e=>({status:"valid",value:e}),eC=e=>e.status==="aborted",tC=e=>e.status==="dirty",gf=e=>e.status==="valid",Iv=e=>typeof Promise<"u"&&e instanceof Promise;var Wt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Wt||(Wt={}));class id{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const sC=(e,t)=>{if(gf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ml(e.common.issues);return this._error=r,this._error}}};function Cs(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class Vs{get description(){return this._def.description}_getType(t){return mc(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:mc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new hi,ctx:{common:t.parent.common,data:t.data,parsedType:mc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Iv(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mc(t)},a=this._parseSync({data:t,path:n.path,parent:n});return sC(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mc(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return gf(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>gf(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mc(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Iv(a)?a:Promise.resolve(a));return sC(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:xt.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new jf({schema:this,typeName:ds.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Kc.create(this,this._def)}nullable(){return bf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wo.create(this)}promise(){return Mv.create(this,this._def)}or(t){return Dv.create([this,t],this._def)}and(t){return Ov.create(this,t,this._def)}transform(t){return new jf({...Cs(this._def),schema:this,typeName:ds.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new _w({...Cs(this._def),innerType:this,defaultValue:r,typeName:ds.ZodDefault})}brand(){return new yZ({typeName:ds.ZodBranded,type:this,...Cs(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Cw({...Cs(this._def),innerType:this,catchValue:r,typeName:ds.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return lS.create(this,t)}readonly(){return kw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ZJ=/^c[^\s-]{8,}$/i,XJ=/^[0-9a-z]+$/,QJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eZ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tZ=/^[a-z0-9_-]{21}$/i,sZ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rZ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nZ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let _b;const iZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,cZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dZ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,uZ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hZ=new RegExp(`^${qL}$`);function VL(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function fZ(e){return new RegExp(`^${VL(e)}$`)}function mZ(e){let t=`${qL}T${VL(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function pZ(e,t){return!!((t==="v4"||!t)&&iZ.test(e)||(t==="v6"||!t)&&lZ.test(e))}function xZ(e,t){if(!sZ.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function gZ(e,t){return!!((t==="v4"||!t)&&oZ.test(e)||(t==="v6"||!t)&&cZ.test(e))}class Pc extends Vs{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Bt.string){const i=this._getOrReturnCtx(t);return Tt(i,{code:xt.invalid_type,expected:Bt.string,received:i.parsedType}),cs}const n=new hi;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?Tt(a,{code:xt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Tt(a,{code:xt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")nZ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"email",code:xt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")_b||(_b=new RegExp(aZ,"u")),_b.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"emoji",code:xt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")eZ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"uuid",code:xt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")tZ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"nanoid",code:xt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")ZJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"cuid",code:xt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")XJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"cuid2",code:xt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")QJ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"ulid",code:xt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Tt(a,{validation:"url",code:xt.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"regex",code:xt.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?mZ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?hZ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?fZ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?rZ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"duration",code:xt.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?pZ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"ip",code:xt.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?xZ(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"jwt",code:xt.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?gZ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"cidr",code:xt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?dZ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"base64",code:xt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?uZ.test(t.data)||(a=this._getOrReturnCtx(t,a),Tt(a,{validation:"base64url",code:xt.invalid_string,message:i.message}),n.dirty()):Ws.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:xt.invalid_string,...Wt.errToObj(n)})}_addCheck(t){return new Pc({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Wt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Wt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Wt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Wt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Wt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Wt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Wt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Wt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Wt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Wt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Wt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Wt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Wt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Wt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Wt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Wt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Wt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Wt.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Wt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Wt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Wt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Wt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Wt.errToObj(r)})}nonempty(t){return this.min(1,Wt.errToObj(t))}trim(){return new Pc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Pc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Pc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Pc.create=e=>new Pc({checks:[],typeName:ds.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Cs(e)});function vZ(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class vf extends Vs{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Bt.number){const i=this._getOrReturnCtx(t);return Tt(i,{code:xt.invalid_type,expected:Bt.number,received:i.parsedType}),cs}let n;const a=new hi;for(const i of this._def.checks)i.kind==="int"?Ws.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Tt(n,{code:xt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Tt(n,{code:xt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Tt(n,{code:xt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?vZ(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),Tt(n,{code:xt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Tt(n,{code:xt.not_finite,message:i.message}),a.dirty()):Ws.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Wt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Wt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Wt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Wt.toString(r))}setLimit(t,r,n,a){return new vf({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Wt.toString(a)}]})}_addCheck(t){return new vf({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Wt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Wt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Wt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Wt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Wt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Wt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Wt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Wt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Wt.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ws.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}vf.create=e=>new vf({checks:[],typeName:ds.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Cs(e)});class Fp extends Vs{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Bt.bigint)return this._getInvalidInput(t);let n;const a=new hi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Tt(n,{code:xt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Tt(n,{code:xt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Tt(n,{code:xt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Ws.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Tt(r,{code:xt.invalid_type,expected:Bt.bigint,received:r.parsedType}),cs}gte(t,r){return this.setLimit("min",t,!0,Wt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Wt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Wt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Wt.toString(r))}setLimit(t,r,n,a){return new Fp({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Wt.toString(a)}]})}_addCheck(t){return new Fp({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Wt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Wt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Wt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Wt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Wt.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Fp.create=e=>new Fp({checks:[],typeName:ds.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Cs(e)});class Nw extends Vs{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Bt.boolean){const n=this._getOrReturnCtx(t);return Tt(n,{code:xt.invalid_type,expected:Bt.boolean,received:n.parsedType}),cs}return Bi(t.data)}}Nw.create=e=>new Nw({typeName:ds.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Cs(e)});class Fv extends Vs{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Bt.date){const i=this._getOrReturnCtx(t);return Tt(i,{code:xt.invalid_type,expected:Bt.date,received:i.parsedType}),cs}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Tt(i,{code:xt.invalid_date}),cs}const n=new hi;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Tt(a,{code:xt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Ws.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Fv({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Wt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Wt.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Fv.create=e=>new Fv({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ds.ZodDate,...Cs(e)});class rC extends Vs{_parse(t){if(this._getType(t)!==Bt.symbol){const n=this._getOrReturnCtx(t);return Tt(n,{code:xt.invalid_type,expected:Bt.symbol,received:n.parsedType}),cs}return Bi(t.data)}}rC.create=e=>new rC({typeName:ds.ZodSymbol,...Cs(e)});class nC extends Vs{_parse(t){if(this._getType(t)!==Bt.undefined){const n=this._getOrReturnCtx(t);return Tt(n,{code:xt.invalid_type,expected:Bt.undefined,received:n.parsedType}),cs}return Bi(t.data)}}nC.create=e=>new nC({typeName:ds.ZodUndefined,...Cs(e)});class aC extends Vs{_parse(t){if(this._getType(t)!==Bt.null){const n=this._getOrReturnCtx(t);return Tt(n,{code:xt.invalid_type,expected:Bt.null,received:n.parsedType}),cs}return Bi(t.data)}}aC.create=e=>new aC({typeName:ds.ZodNull,...Cs(e)});class iC extends Vs{constructor(){super(...arguments),this._any=!0}_parse(t){return Bi(t.data)}}iC.create=e=>new iC({typeName:ds.ZodAny,...Cs(e)});class oC extends Vs{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Bi(t.data)}}oC.create=e=>new oC({typeName:ds.ZodUnknown,...Cs(e)});class od extends Vs{_parse(t){const r=this._getOrReturnCtx(t);return Tt(r,{code:xt.invalid_type,expected:Bt.never,received:r.parsedType}),cs}}od.create=e=>new od({typeName:ds.ZodNever,...Cs(e)});class lC extends Vs{_parse(t){if(this._getType(t)!==Bt.undefined){const n=this._getOrReturnCtx(t);return Tt(n,{code:xt.invalid_type,expected:Bt.void,received:n.parsedType}),cs}return Bi(t.data)}}lC.create=e=>new lC({typeName:ds.ZodVoid,...Cs(e)});class Wo extends Vs{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==Bt.array)return Tt(r,{code:xt.invalid_type,expected:Bt.array,received:r.parsedType}),cs;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(Tt(r,{code:o?xt.too_big:xt.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Tt(r,{code:xt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Tt(r,{code:xt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new id(r,o,r.path,l)))).then(o=>hi.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new id(r,o,r.path,l)));return hi.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Wo({...this._def,minLength:{value:t,message:Wt.toString(r)}})}max(t,r){return new Wo({...this._def,maxLength:{value:t,message:Wt.toString(r)}})}length(t,r){return new Wo({...this._def,exactLength:{value:t,message:Wt.toString(r)}})}nonempty(t){return this.min(1,t)}}Wo.create=(e,t)=>new Wo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ds.ZodArray,...Cs(t)});function oh(e){if(e instanceof nn){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Kc.create(oh(n))}return new nn({...e._def,shape:()=>t})}else return e instanceof Wo?new Wo({...e._def,type:oh(e.element)}):e instanceof Kc?Kc.create(oh(e.unwrap())):e instanceof bf?bf.create(oh(e.unwrap())):e instanceof vu?vu.create(e.items.map(t=>oh(t))):e}class nn extends Vs{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Ws.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Bt.object){const d=this._getOrReturnCtx(t);return Tt(d,{code:xt.invalid_type,expected:Bt.object,received:d.parsedType}),cs}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof od&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],h=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new id(a,h,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof od){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(Tt(a,{code:xt.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const h=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new id(a,h,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,p=await u.value;d.push({key:h,value:p,alwaysSet:u.alwaysSet})}return d}).then(d=>hi.mergeObjectSync(n,d)):hi.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return Wt.errToObj,new nn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:Wt.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new nn({...this._def,unknownKeys:"strip"})}passthrough(){return new nn({...this._def,unknownKeys:"passthrough"})}extend(t){return new nn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new nn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ds.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new nn({...this._def,catchall:t})}pick(t){const r={};for(const n of Ws.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new nn({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Ws.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new nn({...this._def,shape:()=>r})}deepPartial(){return oh(this)}partial(t){const r={};for(const n of Ws.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new nn({...this._def,shape:()=>r})}required(t){const r={};for(const n of Ws.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Kc;)i=i._def.innerType;r[n]=i}return new nn({...this._def,shape:()=>r})}keyof(){return HL(Ws.objectKeys(this.shape))}}nn.create=(e,t)=>new nn({shape:()=>e,unknownKeys:"strip",catchall:od.create(),typeName:ds.ZodObject,...Cs(t)});nn.strictCreate=(e,t)=>new nn({shape:()=>e,unknownKeys:"strict",catchall:od.create(),typeName:ds.ZodObject,...Cs(t)});nn.lazycreate=(e,t)=>new nn({shape:e,unknownKeys:"strip",catchall:od.create(),typeName:ds.ZodObject,...Cs(t)});class Dv extends Vs{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Ml(l.ctx.common.issues));return Tt(r,{code:xt.invalid_union,unionErrors:o}),cs}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new Ml(c));return Tt(r,{code:xt.invalid_union,unionErrors:l}),cs}}get options(){return this._def.options}}Dv.create=(e,t)=>new Dv({options:e,typeName:ds.ZodUnion,...Cs(t)});function Sw(e,t){const r=mc(e),n=mc(t);if(e===t)return{valid:!0,data:e};if(r===Bt.object&&n===Bt.object){const a=Ws.objectKeys(t),i=Ws.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=Sw(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===Bt.array&&n===Bt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=Sw(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===Bt.date&&n===Bt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ov extends Vs{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(eC(i)||eC(o))return cs;const l=Sw(i.value,o.value);return l.valid?((tC(i)||tC(o))&&r.dirty(),{status:r.value,value:l.data}):(Tt(n,{code:xt.invalid_intersection_types}),cs)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ov.create=(e,t,r)=>new Ov({left:e,right:t,typeName:ds.ZodIntersection,...Cs(r)});class vu extends Vs{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Bt.array)return Tt(n,{code:xt.invalid_type,expected:Bt.array,received:n.parsedType}),cs;if(n.data.length<this._def.items.length)return Tt(n,{code:xt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cs;!this._def.rest&&n.data.length>this._def.items.length&&(Tt(n,{code:xt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new id(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>hi.mergeArray(r,o)):hi.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new vu({...this._def,rest:t})}}vu.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new vu({items:e,typeName:ds.ZodTuple,rest:null,...Cs(t)})};class cC extends Vs{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Bt.map)return Tt(n,{code:xt.invalid_type,expected:Bt.map,received:n.parsedType}),cs;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:a._parse(new id(n,l,n.path,[d,"key"])),value:i._parse(new id(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return cs;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return cs;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}}}}cC.create=(e,t,r)=>new cC({valueType:t,keyType:e,typeName:ds.ZodMap,...Cs(r)});class Dp extends Vs{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Bt.set)return Tt(n,{code:xt.invalid_type,expected:Bt.set,received:n.parsedType}),cs;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(Tt(n,{code:xt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(Tt(n,{code:xt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return cs;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const l=[...n.data.values()].map((c,d)=>i._parse(new id(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new Dp({...this._def,minSize:{value:t,message:Wt.toString(r)}})}max(t,r){return new Dp({...this._def,maxSize:{value:t,message:Wt.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Dp.create=(e,t)=>new Dp({valueType:e,minSize:null,maxSize:null,typeName:ds.ZodSet,...Cs(t)});class dC extends Vs{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}dC.create=(e,t)=>new dC({getter:e,typeName:ds.ZodLazy,...Cs(t)});class uC extends Vs{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Tt(r,{received:r.data,code:xt.invalid_literal,expected:this._def.value}),cs}return{status:"valid",value:t.data}}get value(){return this._def.value}}uC.create=(e,t)=>new uC({value:e,typeName:ds.ZodLiteral,...Cs(t)});function HL(e,t){return new yf({values:e,typeName:ds.ZodEnum,...Cs(t)})}class yf extends Vs{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Tt(r,{expected:Ws.joinValues(n),received:r.parsedType,code:xt.invalid_type}),cs}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Tt(r,{received:r.data,code:xt.invalid_enum_value,options:n}),cs}return Bi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return yf.create(t,{...this._def,...r})}exclude(t,r=this._def){return yf.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}yf.create=HL;class hC extends Vs{_parse(t){const r=Ws.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Bt.string&&n.parsedType!==Bt.number){const a=Ws.objectValues(r);return Tt(n,{expected:Ws.joinValues(a),received:n.parsedType,code:xt.invalid_type}),cs}if(this._cache||(this._cache=new Set(Ws.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Ws.objectValues(r);return Tt(n,{received:n.data,code:xt.invalid_enum_value,options:a}),cs}return Bi(t.data)}get enum(){return this._def.values}}hC.create=(e,t)=>new hC({values:e,typeName:ds.ZodNativeEnum,...Cs(t)});class Mv extends Vs{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Bt.promise&&r.common.async===!1)return Tt(r,{code:xt.invalid_type,expected:Bt.promise,received:r.parsedType}),cs;const n=r.parsedType===Bt.promise?r.data:Promise.resolve(r.data);return Bi(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Mv.create=(e,t)=>new Mv({type:e,typeName:ds.ZodPromise,...Cs(t)});class jf extends Vs{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ds.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Tt(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return cs;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?cs:c.status==="dirty"||r.value==="dirty"?Om(c.value):c});{if(r.value==="aborted")return cs;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?cs:l.status==="dirty"||r.value==="dirty"?Om(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?cs:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?cs:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!gf(o))return cs;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>gf(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):cs);Ws.assertNever(a)}}jf.create=(e,t,r)=>new jf({schema:e,typeName:ds.ZodEffects,effect:t,...Cs(r)});jf.createWithPreprocess=(e,t,r)=>new jf({schema:t,effect:{type:"preprocess",transform:e},typeName:ds.ZodEffects,...Cs(r)});class Kc extends Vs{_parse(t){return this._getType(t)===Bt.undefined?Bi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Kc.create=(e,t)=>new Kc({innerType:e,typeName:ds.ZodOptional,...Cs(t)});class bf extends Vs{_parse(t){return this._getType(t)===Bt.null?Bi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}bf.create=(e,t)=>new bf({innerType:e,typeName:ds.ZodNullable,...Cs(t)});class _w extends Vs{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Bt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}_w.create=(e,t)=>new _w({innerType:e,typeName:ds.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Cs(t)});class Cw extends Vs{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Iv(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ml(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ml(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Cw.create=(e,t)=>new Cw({innerType:e,typeName:ds.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Cs(t)});class fC extends Vs{_parse(t){if(this._getType(t)!==Bt.nan){const n=this._getOrReturnCtx(t);return Tt(n,{code:xt.invalid_type,expected:Bt.nan,received:n.parsedType}),cs}return{status:"valid",value:t.data}}}fC.create=e=>new fC({typeName:ds.ZodNaN,...Cs(e)});class yZ extends Vs{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class lS extends Vs{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?cs:i.status==="dirty"?(r.dirty(),Om(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?cs:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new lS({in:t,out:r,typeName:ds.ZodPipeline})}}class kw extends Vs{_parse(t){const r=this._def.innerType._parse(t),n=a=>(gf(a)&&(a.value=Object.freeze(a.value)),a);return Iv(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}kw.create=(e,t)=>new kw({innerType:e,typeName:ds.ZodReadonly,...Cs(t)});var ds;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ds||(ds={}));const Ac=Pc.create,On=vf.create,$v=Nw.create;od.create;const cS=Wo.create,f1=nn.create;Dv.create;Ov.create;vu.create;const mC=yf.create;Mv.create;Kc.create;bf.create;var m1="Checkbox",[jZ,Mse]=_a(m1),[bZ,dS]=jZ(m1);function wZ(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=e,[p,f]=fo({prop:r,defaultProp:a??!1,onChange:c,caller:m1}),[y,x]=g.useState(null),[w,v]=g.useState(null),b=g.useRef(!1),N=y?!!o||!!y.closest("form"):!0,C={checked:p,disabled:i,setChecked:f,control:y,setControl:x,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:Yc(a)?!1:a,isFormControl:N,bubbleInput:w,setBubbleInput:v};return s.jsx(bZ,{scope:t,...C,children:NZ(h)?h(C):n})}var WL="CheckboxTrigger",GL=g.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:f,bubbleInput:y}=dS(WL,e),x=_s(a,u),w=g.useRef(c);return g.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const b=()=>h(w.current);return v.addEventListener("reset",b),()=>v.removeEventListener("reset",b)}},[i,h]),s.jsx(Mt.button,{type:"button",role:"checkbox","aria-checked":Yc(c)?"mixed":c,"aria-required":d,"data-state":XL(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:x,onKeyDown:gt(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:gt(r,v=>{h(b=>Yc(b)?!0:!b),y&&f&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})});GL.displayName=WL;var uS=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=e;return s.jsx(wZ,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:p})=>s.jsxs(s.Fragment,{children:[s.jsx(GL,{...h,ref:t,__scopeCheckbox:r}),p&&s.jsx(ZL,{__scopeCheckbox:r})]})})});uS.displayName=m1;var KL="CheckboxIndicator",YL=g.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=dS(KL,r);return s.jsx(Ga,{present:n||Yc(i.checked)||i.checked===!0,children:s.jsx(Mt.span,{"data-state":XL(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});YL.displayName=KL;var JL="CheckboxBubbleInput",ZL=g.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:p,setBubbleInput:f}=dS(JL,e),y=_s(r,f),x=Q5(i),w=U5(n);g.useEffect(()=>{const b=p;if(!b)return;const N=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(N,"checked").set,D=!a.current;if(x!==i&&P){const R=new Event("click",{bubbles:D});b.indeterminate=Yc(i),P.call(b,Yc(i)?!1:i),b.dispatchEvent(R)}},[p,x,i,a]);const v=g.useRef(Yc(i)?!1:i);return s.jsx(Mt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:d,value:u,form:h,...t,tabIndex:-1,ref:y,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ZL.displayName=JL;function NZ(e){return typeof e=="function"}function Yc(e){return e==="indeterminate"}function XL(e){return Yc(e)?"indeterminate":e?"checked":"unchecked"}const Vh=g.forwardRef(({className:e,...t},r)=>s.jsx(uS,{ref:r,className:it("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(YL,{className:it("flex items-center justify-center text-current"),children:s.jsx(Sn,{className:"h-4 w-4"})})}));Vh.displayName=uS.displayName;var p1="Switch",[SZ,$se]=_a(p1),[_Z,CZ]=SZ(p1),QL=g.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[p,f]=g.useState(null),y=_s(t,N=>f(N)),x=g.useRef(!1),w=p?u||!!p.closest("form"):!0,[v,b]=fo({prop:a,defaultProp:i??!1,onChange:d,caller:p1});return s.jsxs(_Z,{scope:r,checked:v,disabled:l,children:[s.jsx(Mt.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":rT(v),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:y,onClick:gt(e.onClick,N=>{b(C=>!C),w&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),w&&s.jsx(sT,{control:p,bubbles:!x.current,name:n,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});QL.displayName=p1;var eT="SwitchThumb",tT=g.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=CZ(eT,r);return s.jsx(Mt.span,{"data-state":rT(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});tT.displayName=eT;var kZ="SwitchBubbleInput",sT=g.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=g.useRef(null),l=_s(o,i),c=Q5(r),d=U5(t);return g.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&f){const y=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(y)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});sT.displayName=kZ;function rT(e){return e?"checked":"unchecked"}var nT=QL,PZ=tT;const Us=g.forwardRef(({className:e,...t},r)=>s.jsx(nT,{className:it("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(PZ,{className:it("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Us.displayName=nT.displayName;const AZ=f1({name:Ac().min(2,"Stop name must be at least 2 characters"),route:On(),lat:On(),lng:On(),sequence_number:On().min(1,"Sequence number must be at least 1"),estimated_arrival_time:Ac().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/,"Time must be in HH:MM:SS format"),is_pickup:$v(),is_dropoff:$v()});function EZ({isOpen:e,onClose:t,routeId:r,routeName:n,currentSequenceNumber:a}){const i=er(),{toast:o}=Ar(),[l,c]=g.useState(!1),[d,u]=g.useState(""),[h,p]=g.useState(null),[f,y]=g.useState([]),[x,w]=g.useState(a),v=g.useRef(null),b=Tv({resolver:Rv(AZ),defaultValues:{name:"",route:r,lat:0,lng:0,sequence_number:a,estimated_arrival_time:"08:00:00",is_pickup:!0,is_dropoff:!0}});g.useEffect(()=>{e&&(b.reset({name:"",route:r,lat:0,lng:0,sequence_number:a,estimated_arrival_time:"08:00:00",is_pickup:!0,is_dropoff:!0}),u(""),p(null),y([]),w(a))},[e,r,a,b]);const N=Dy;g.useEffect(()=>{if(e&&!l){const D=document.createElement("script");return D.src=`https://maps.googleapis.com/maps/api/js?key=${N}&libraries=places`,D.async=!0,D.defer=!0,D.onload=()=>{if(c(!0),v.current){const R=new google.maps.places.Autocomplete(v.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}});R.addListener("place_changed",()=>{var O,F;const I=R.getPlace();if(I.geometry){const E=((O=I.geometry.location)==null?void 0:O.lat())||0,$=((F=I.geometry.location)==null?void 0:F.lng())||0,U=I.name||I.formatted_address||"";u(U),p({name:U,lat:E,lng:$}),b.setValue("name",U),b.setValue("lat",E),b.setValue("lng",$)}});const A=document.createElement("style");A.textContent=`
            .pac-container {
              border-radius: 0.5rem;
              margin-top: 0.5rem;
              box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
              border: 1px solid #e5e7eb;
              background-color: white;
              z-index: 1000;
              max-height: 300px;
              overflow-y: auto;
            }
            .pac-item {
              padding: 0.75rem 1rem;
              cursor: pointer;
              font-size: 0.875rem;
              line-height: 1.25rem;
              border-bottom: 1px solid #f3f4f6;
              transition: background-color 0.2s;
            }
            .pac-item:last-child {
              border-bottom: none;
            }
            .pac-item:hover {
              background-color: #f3f4f6;
            }
            .pac-item-query {
              font-size: 0.875rem;
              color: #1f2937;
              font-weight: 500;
            }
            .pac-icon {
              margin-right: 0.75rem;
              color: #6b7280;
            }
            .pac-matched {
              font-weight: 600;
              color: #2563eb;
            }
          `,document.head.appendChild(A)}},document.head.appendChild(D),()=>{document.head.removeChild(D)}}},[e,l,b]);const C=async D=>{if(!h){o({title:"Error",description:"Please search and select a location first",variant:"destructive"});return}try{await i(o0(D)).unwrap();const R={name:D.name,sequence_number:D.sequence_number,estimated_arrival_time:D.estimated_arrival_time,is_pickup:D.is_pickup,is_dropoff:D.is_dropoff,lat:D.lat,lng:D.lng};y(A=>[...A,R]),w(A=>A+1),o({title:"Success",description:`Route stop "${D.name}" added successfully`}),b.reset({name:"",route:r,lat:0,lng:0,sequence_number:x+1,estimated_arrival_time:"08:00:00",is_pickup:!0,is_dropoff:!0}),u(""),p(null)}catch(R){let A="Failed to add route stop";if(R instanceof Error)try{const I=JSON.parse(R.message);typeof I=="object"&&I!==null?A=JSON.stringify(I,null,2):A=R.message}catch{A=R.message}else A=String(R);o({title:"Error",description:A,variant:"destructive"})}},P=()=>{f.length>0&&o({title:"Stops Added",description:`Successfully added ${f.length} route stop(s)`}),t()};return s.jsx(js,{open:e,onOpenChange:P,children:s.jsxs(ps,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsxs(xs,{className:"flex items-center gap-2",children:[s.jsx(pr,{className:"w-5 h-5 text-blue-500"}),"Add Route Stops"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Add multiple stops to route:"," ",s.jsx("span",{className:"font-semibold",children:n})]})]}),f.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ne,{className:"text-base font-semibold",children:["Added Stops (",f.length,")"]}),s.jsxs(Pe,{variant:"secondary",className:"bg-green-100 text-green-800",children:[s.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Success"]})]}),s.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-lg p-3 bg-green-50",children:f.map((D,R)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border mb-2 last:mb-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-green-600",children:D.sequence_number})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:D.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Arrival: ",D.estimated_arrival_time," |",D.is_pickup&&s.jsx(Pe,{variant:"outline",className:"ml-1 text-xs",children:"Pickup"}),D.is_dropoff&&s.jsx(Pe,{variant:"outline",className:"ml-1 text-xs",children:"Dropoff"})]})]})]}),s.jsx(Ht,{className:"w-4 h-4 text-green-600"})]},R))})]}),s.jsx(np,{...b,children:s.jsxs("form",{onSubmit:b.handleSubmit(C),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Search Location"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ie,{ref:v,placeholder:"Search for a location...",value:d,onChange:D=>u(D.target.value),className:"pl-10",autoComplete:"off",onKeyDown:D=>{D.key==="ArrowDown"||D.key==="ArrowUp"||D.key}})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Start typing to search for locations using Google Maps"})]}),h&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(pr,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium text-green-800",children:"Location Selected"})]}),s.jsx("p",{className:"text-sm text-green-700 mb-1",children:h.name}),s.jsxs("p",{className:"text-xs text-green-600",children:["Coordinates: ",h.lat.toFixed(6),","," ",h.lng.toFixed(6)]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(dr,{control:b.control,name:"sequence_number",render:({field:D})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Sequence Number"}),s.jsx(Qs,{children:s.jsx(Ie,{type:"number",min:"1",placeholder:"1",...D,onChange:R=>D.onChange(parseInt(R.target.value)||1)})}),s.jsx(Vr,{})]})}),s.jsx(dr,{control:b.control,name:"estimated_arrival_time",render:({field:D})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Estimated Arrival Time"}),s.jsx(Qs,{children:s.jsx(Ie,{type:"time",step:"1",...D})}),s.jsx(Vr,{})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(dr,{control:b.control,name:"is_pickup",render:({field:D})=>s.jsxs(zs,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Is,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"w-4 h-4"}),"Pickup Stop"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Students can be picked up at this stop"})]}),s.jsx(Qs,{children:s.jsx(Us,{checked:D.value,onCheckedChange:D.onChange})})]})}),s.jsx(dr,{control:b.control,name:"is_dropoff",render:({field:D})=>s.jsxs(zs,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(Is,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"w-4 h-4"}),"Dropoff Stop"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Students can be dropped off at this stop"})]}),s.jsx(Qs,{children:s.jsx(Us,{checked:D.value,onCheckedChange:D.onChange})})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:P,children:f.length>0?"Done":"Cancel"}),s.jsx(ce,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",disabled:!h,children:"Add Stop"})]})]})})]})})}function LZ({isOpen:e,onClose:t,routeId:r,routeName:n}){const a=er(),[i,o]=g.useState([]),[l,c]=g.useState(!1),[d,u]=g.useState(null);g.useEffect(()=>{e&&r&&h()},[e,r]);const h=async()=>{c(!0),u(null);try{const f=await a(Ih(r)).unwrap();o(f)}catch(f){u(f instanceof Error?f.message:"Failed to fetch route stops")}finally{c(!1)}},p=i.sort((f,y)=>f.sequence_number-y.sequence_number);return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsxs(xs,{className:"flex items-center gap-2",children:[s.jsx(pr,{className:"w-5 h-5 text-blue-500"}),"Route Stops"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Stops for route: ",s.jsx("span",{className:"font-semibold",children:n})]})]}),l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ba,{className:"w-5 h-5 animate-spin text-blue-500"}),s.jsx("span",{className:"text-gray-600",children:"Loading route stops..."})]})}):d?s.jsxs("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[s.jsx("p",{className:"text-red-700",children:d}),s.jsx(ce,{onClick:h,variant:"outline",size:"sm",className:"mt-2",children:"Retry"})]}):i.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(pr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Route Stops"}),s.jsx("p",{className:"text-gray-500",children:"This route doesn't have any stops configured yet."})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Total Stops: ",i.length]}),s.jsxs(Pe,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[p.length," stops"]})]}),s.jsx("div",{className:"space-y-3",children:p.map(f=>s.jsx("div",{className:"p-4 border rounded-lg bg-white hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600",children:f.sequence_number||0})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:f.name||"Unnamed Stop"}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ar,{className:"w-4 h-4"}),s.jsxs("span",{children:["Arrival: ",f.estimated_arrival_time||"N/A"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pr,{className:"w-4 h-4"}),s.jsx("span",{children:f.lat!==void 0&&f.lng!==void 0?`${f.lat.toFixed(4)}, ${f.lng.toFixed(4)}`:"Coordinates not available"})]})]})]})]}),s.jsxs("div",{className:"flex gap-1",children:[f.is_pickup&&s.jsxs(Pe,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:[s.jsx(ns,{className:"w-3 h-3 mr-1"}),"Pickup"]}),f.is_dropoff&&s.jsxs(Pe,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:[s.jsx(ns,{className:"w-3 h-3 mr-1"}),"Dropoff"]})]})]})},f.id))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{onClick:t,variant:"outline",children:"Close"})})]})})}let vg=!1,rh=!1,yg=null;const TZ=e=>rh&&yg?yg:vg?Promise.resolve():window.google&&window.google.maps?(vg=!0,Promise.resolve()):(rh=!0,yg=new Promise((t,r)=>{const n=document.querySelector('script[src*="maps.googleapis.com"]');if(n){n.addEventListener("load",()=>{vg=!0,rh=!1,t()}),n.addEventListener("error",()=>{rh=!1,r(new Error("Failed to load Google Maps script"))});return}const a=document.createElement("script");a.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places&loading=async`,a.async=!0,a.defer=!0,a.onload=()=>{vg=!0,rh=!1,t()},a.onerror=()=>{rh=!1,r(new Error("Failed to load Google Maps script"))},document.head.appendChild(a)}),yg),RZ=f1({name:Ac().min(2,"Route name must be at least 2 characters"),school:On(),driver:On().min(1,"Please select a driver"),start_lat:On(),start_lng:On(),end_lat:On(),end_lng:On(),total_distance:On(),estimated_duration:Ac(),is_active:$v(),schedule_days:cS(Ac()),traffic_factor:On(),path:Ac()}),IZ=f1({student:On().min(1,"Please select a student"),route:On().min(1,"Please select a route"),pickup_stop:On().nullable().optional(),dropoff_stop:On().nullable().optional(),is_active:$v(),schedule_days:cS(Ac()).min(1,"At least one schedule day is required")});function FZ(){var Ts,Ms;const e=er(),{routes:t,loading:r,error:n}=Ct(Z=>Z.routes),{students:a}=Ct(Z=>Z.students),{drivers:i}=Ct(Z=>Z.drivers),{assignments:o}=Ct(Z=>Z.routeAssignments),{grades:l}=Ct(Z=>Z.grades),d=JSON.parse(localStorage.getItem("profile")||"{}"),{schools:u}=Ct(Z=>Z.schools),{toast:h}=Ar(),[p,f]=g.useState(!1),[y,x]=g.useState(""),[w,v]=g.useState(""),[b,N]=g.useState(!1),[C,P]=g.useState(null),[D,R]=g.useState(null),[A,I]=g.useState([]),[O,F]=g.useState(""),E=g.useRef(null),$=g.useRef(null),U=g.useRef(null),[K,re]=g.useState([]),[pe,Q]=g.useState(!1),[J,q]=g.useState(""),[Y,k]=g.useState("all"),[L,M]=g.useState(1),[W]=g.useState(10),[se,ae]=g.useState(null),[ge,fe]=g.useState(!1),[Me,de]=g.useState(!1),[$e,Ye]=g.useState(!1),[mt,Se]=g.useState(!1),[oe,vt]=g.useState(!1),[me,xe]=g.useState(!1),[ee,ue]=g.useState(null),[ve,qe]=g.useState(!1),[We,ze]=g.useState(null),[rt,_t]=g.useState({}),[we,te]=g.useState(""),[he,Ne]=g.useState(""),[Ve,Ke]=g.useState("");u!=null&&u.filter(Z=>Z&&Z.admin===(d==null?void 0:d.id));const lt=localStorage.getItem("schoolId"),tt=(a==null?void 0:a.filter(Z=>Z&&Z.school===parseInt(lt||"0")))||[],pt=new Set((o==null?void 0:o.map(Z=>Z==null?void 0:Z.student))||[]),Yt=tt.filter(Z=>!pt.has(Z.id)),Dt=Yt.filter(Z=>{var nt,At,jt;if(!we)return!0;const Re=we.toLowerCase();return((nt=Z.first_name)==null?void 0:nt.toLowerCase().includes(Re))||((At=Z.last_name)==null?void 0:At.toLowerCase().includes(Re))||((jt=Z.admission_number)==null?void 0:jt.toLowerCase().includes(Re))||`${Z.first_name} ${Z.last_name}`.toLowerCase().includes(Re)}),ks=(t||[]).filter(Z=>{var nt,At,jt;if(!he)return!0;const Re=he.toLowerCase();return((nt=Z.name)==null?void 0:nt.toLowerCase().includes(Re))||((At=Z.total_distance)==null?void 0:At.toString().includes(Re))||((jt=Z.estimated_duration)==null?void 0:jt.toLowerCase().includes(Re))}),wt=(i==null?void 0:i.filter(Z=>Z&&Z.school===parseInt(lt||"0")))||[],ws=wt.filter(Z=>{if(!Ve)return!0;const Re=Ve.toLowerCase(),nt=`${Z.user_details.first_name||""} ${Z.user_details.last_name||""}`.toLowerCase(),At=(Z.phone_number||"").toLowerCase();return nt.includes(Re)||At.includes(Re)}),ts=Z=>{if(!Z)return"N/A";const Re=l.find(nt=>nt.id===Number(Z));return Re?Re.name:`Grade ${Z}`},qt=async Z=>{if(t==null?void 0:t.find(nt=>nt.id===Z))try{const nt=await e(Ih(Z)).unwrap();re(nt.map((At,jt)=>({id:At.id||jt+1,name:At.name||`Stop ${jt+1}`,lat:At.lat||0,lng:At.lng||0,sequence:At.sequence_number||jt+1,is_pickup:At.is_pickup,is_dropoff:At.is_dropoff})))}catch{re([]),h({title:"Error",description:"Failed to fetch route stops",variant:"destructive"})}else re([])},kt=Z=>{if(!Z)return"N/A";const Re=wt.find(nt=>nt.id===Z);return Re?`${Re.user_details.first_name} ${Re.user_details.last_name}`:"Unknown Driver"},Ce=(t==null?void 0:t.filter(Z=>{var At,jt;if(!Z)return!1;const Re=((At=Z.name)==null?void 0:At.toLowerCase().includes(J.toLowerCase()))||((jt=Z.schedule_days)==null?void 0:jt.some(rs=>rs==null?void 0:rs.toLowerCase().includes(J.toLowerCase()))),nt=Y==="all"||Y==="active"&&Z.is_active||Y==="inactive"&&!Z.is_active;return Re&&nt}))||[];J&&(console.log("Search term:",J),console.log("Total routes:",(t==null?void 0:t.length)||0),console.log("Filtered routes:",Ce.length),console.log("Sample route data:",t==null?void 0:t[0]));const dt=Math.ceil(Ce.length/W),yt=(L-1)*W,Xt=yt+W,tr=Ce.slice(yt,Xt);g.useEffect(()=>{M(1)},[J,Y]);const Vt=Z=>{Z&&(ae(Z),fe(!0))},ln=Z=>{Z&&(ae(Z),P(Z.total_distance||0),R(Z.estimated_duration||"00:00:00"),Oe.reset({name:Z.name||"",school:Z.school||parseInt(lt||"1"),driver:Z.driver||0,start_lat:Z.start_lat||0,start_lng:Z.start_lng||0,end_lat:Z.end_lat||0,end_lng:Z.end_lng||0,total_distance:Z.total_distance||0,estimated_duration:Z.estimated_duration||"00:00:00",is_active:Z.is_active??!0,schedule_days:Z.schedule_days||["monday","tuesday","wednesday","thursday","friday"],traffic_factor:Z.traffic_factor||1.3,path:typeof Z.path=="string"?Z.path:JSON.stringify({type:"LineString",coordinates:[[0,0],[0,0]]})}),de(!0))},fn=Z=>{Z&&(ae(Z),Ye(!0))},Ir=Z=>{Z&&(ue(Z),xe(!0))},hr=Z=>{Z&&(ze(Z),qe(!0))},sr=async Z=>{try{const Re=await e(Ih(Z)).unwrap();_t(nt=>({...nt,[Z]:Re.length}))}catch{_t(nt=>({...nt,[Z]:0}))}},Br=(Z,Re,nt)=>{const At={name:Z,lat:Re,lng:nt,sequence:A.length+1};I(jt=>[...jt,At]),F("")},zi=Z=>{const nt=A.filter((At,jt)=>jt!==Z).map((At,jt)=>({...At,sequence:jt+1}));I(nt)},Ea=async()=>{try{if(!se){h({title:"Error",description:"No route selected for deletion",variant:"destructive"});return}const Z=localStorage.getItem("schoolId");if(!Z){h({title:"Error",description:"No school found for the current admin",variant:"destructive"});return}await e(a0(se.id)).unwrap(),h({title:"Success",description:"Route deleted successfully"}),Z&&(e(Io({schoolId:parseInt(Z)})),e(ai({schoolId:parseInt(Z)})),e(Mn())),Ye(!1),ae(null)}catch(Z){let Re="Failed to delete route";Z instanceof Error?Re=Z.message:typeof Z=="string"&&(Re=Z),h({title:"Error",description:Re,variant:"destructive"})}},Oe=Tv({resolver:Rv(RZ),defaultValues:{name:"",school:parseInt(lt||"1"),driver:0,start_lat:0,start_lng:0,end_lat:0,end_lng:0,total_distance:0,estimated_duration:"00:00:00",is_active:!0,schedule_days:["monday","tuesday","wednesday","thursday","friday"],traffic_factor:1.3,path:JSON.stringify({type:"LineString",coordinates:[[0,0],[0,0]]})}}),Ze=Tv({resolver:Rv(IZ),defaultValues:{student:0,route:0,pickup_stop:null,dropoff_stop:null,is_active:!0,schedule_days:["monday","tuesday","wednesday","thursday","friday"]}});g.useEffect(()=>{const Z=localStorage.getItem("schoolId");return Z&&((!t||t.length===0)&&e(Io({schoolId:parseInt(Z)})),e(ai({schoolId:parseInt(Z)})),e(Mn()),e(Ym({schoolId:parseInt(Z)})),e(Fo({schoolId:parseInt(Z)}))),h({title:"Routes Page Loaded",description:"Notifications are working correctly!"}),()=>{}},[]),g.useEffect(()=>{t&&t.length>0&&t.forEach(Z=>{Z.id&&!rt[Z.id]&&sr(Z.id)})},[t]);const Rt=Dy;g.useEffect(()=>{TZ(Rt).then(()=>{if(f(!0),E.current&&$.current){const Z=new google.maps.places.Autocomplete(E.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}}),Re=new google.maps.places.Autocomplete($.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}}),nt=document.createElement("style");if(nt.textContent=`
          .pac-container {
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border: 1px solid #e5e7eb;
            background-color: white;
            z-index: 1000;
            max-height: 300px;
            overflow-y: auto;
          }
          .pac-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            font-size: 0.875rem;
            line-height: 1.25rem;
            border-bottom: 1px solid #f3f4f6;
            transition: background-color 0.2s;
          }
          .pac-item:last-child {
            border-bottom: none;
          }
          .pac-item:hover {
            background-color: #f3f4f6;
          }
          .pac-item-query {
            font-size: 0.875rem;
            color: #1f2937;
            font-weight: 500;
          }
          .pac-icon {
            margin-right: 0.75rem;
            color: #6b7280;
          }
          .pac-matched {
            font-weight: 600;
            color: #2563eb;
          }
        `,document.head.appendChild(nt),Z.addListener("place_changed",()=>{var rs,Ks;const jt=Z.getPlace();if(jt.geometry){const mn=((rs=jt.geometry.location)==null?void 0:rs.lat())||0,zr=((Ks=jt.geometry.location)==null?void 0:Ks.lng())||0;Oe.setValue("start_lat",mn),Oe.setValue("start_lng",zr);const La=jt.name||jt.formatted_address||"";x(La)}}),Re.addListener("place_changed",()=>{var rs,Ks;const jt=Re.getPlace();if(jt.geometry){const mn=((rs=jt.geometry.location)==null?void 0:rs.lat())||0,zr=((Ks=jt.geometry.location)==null?void 0:Ks.lng())||0;Oe.setValue("end_lat",mn),Oe.setValue("end_lng",zr);const La=jt.name||jt.formatted_address||"";if(v(La),y){N(!0);const en=new google.maps.DirectionsService,Xo=new google.maps.Geocoder;Promise.all([new Promise((Ln,xi)=>{Xo.geocode({address:y},(Ps,Ja)=>{Ja==="OK"&&(Ps!=null&&Ps[0])?Ln(Ps[0].geometry.location):xi(new Error("Could not geocode start location"))})}),new Promise((Ln,xi)=>{Xo.geocode({address:La},(Ps,Ja)=>{Ja==="OK"&&(Ps!=null&&Ps[0])?Ln(Ps[0].geometry.location):xi(new Error("Could not geocode end location"))})})]).then(([Ln,xi])=>{en.route({origin:Ln,destination:xi,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC},(Ps,Ja)=>{var jo,gi;if(N(!1),Ja==="OK"&&Ps){const bo=Ps.routes[0],Nd=((jo=bo.legs[0].distance)==null?void 0:jo.value)||0,Tn=((gi=bo.legs[0].duration)==null?void 0:gi.value)||0,vi=Math.round(Nd/1e3*100)/100,pn=Math.floor(Tn/3600),Vl=Math.floor(Tn%3600/60),Za=Tn%60,Au=`${pn.toString().padStart(2,"0")}:${Vl.toString().padStart(2,"0")}:${Za.toString().padStart(2,"0")}`;P(vi),R(Au),Oe.setValue("total_distance",vi),Oe.setValue("estimated_duration",Au)}else N(!1),h({title:"Error",description:"Could not calculate route. Please check if the locations are valid and try again.",variant:"destructive"})})}).catch(Ln=>{N(!1),h({title:"Error",description:Ln.message||"Could not calculate route. Please check the locations and try again.",variant:"destructive"})})}}}),E.current.addEventListener("keydown",jt=>{jt.key==="Enter"&&jt.preventDefault()}),$.current.addEventListener("keydown",jt=>{jt.key==="Enter"&&jt.preventDefault()}),U.current){const jt=new google.maps.places.Autocomplete(U.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"],componentRestrictions:{country:"ke"}});jt.addListener("place_changed",()=>{var Ks,mn;const rs=jt.getPlace();if(rs.geometry){(Ks=rs.geometry.location)!=null&&Ks.lat(),(mn=rs.geometry.location)!=null&&mn.lng();const zr=rs.name||rs.formatted_address||"";F(zr),U.current&&(U.current.value=zr),setTimeout(()=>{U.current&&U.current.blur()},100)}})}const At=new MutationObserver(jt=>{jt.forEach(rs=>{rs.addedNodes.length&&document.querySelectorAll(".pac-item").forEach(mn=>{mn.addEventListener("click",zr=>{zr.preventDefault(),zr.stopPropagation()})})})});return At.observe(document.body,{childList:!0,subtree:!0}),()=>{At.disconnect()}}}).catch(Z=>{console.error("Failed to load Google Maps:",Z),h({title:"Error",description:"Failed to load Google Maps. Please check your API key.",variant:"destructive"})})},[Rt]);const as=async Z=>{const Re=localStorage.getItem("schoolId");if(!Re){h({title:"Error",description:"No school found for the current admin",variant:"destructive"});return}try{let nt;if(A.length>0){const rs=A.map(Ks=>[Ks.lng,Ks.lat]);nt=JSON.stringify({type:"LineString",coordinates:rs})}else nt=JSON.stringify({type:"LineString",coordinates:[[Z.start_lng,Z.start_lat],[Z.end_lng,Z.end_lat]]});const At={name:Z.name,school:parseInt(Re||"1"),driver:Z.driver,start_lat:Z.start_lat,start_lng:Z.start_lng,end_lat:Z.end_lat,end_lng:Z.end_lng,total_distance:Z.total_distance,estimated_duration:Z.estimated_duration,is_active:Z.is_active,schedule_days:Z.schedule_days,traffic_factor:Z.traffic_factor,path:nt},jt=await e(n0(At)).unwrap();h({title:"Success",description:"Route added successfully"}),Re&&(e(Io({schoolId:parseInt(Re)})),e(ai({schoolId:parseInt(Re)})),e(Mn())),Se(!1),Oe.reset(),x(""),v(""),P(null),R(null),N(!1),I([]),F("")}catch(nt){let At="Failed to add route";if(nt instanceof Error)try{const jt=JSON.parse(nt.message);typeof jt=="object"&&jt!==null?At=JSON.stringify(jt,null,2):At=nt.message}catch{At=nt.message}else At=String(nt);h({title:"Error",description:At,variant:"destructive"})}},Ns=async Z=>{if(!(se!=null&&se.id)){h({title:"Error",description:"No route selected for update",variant:"destructive"});return}const Re=localStorage.getItem("schoolId");if(!Re){h({title:"Error",description:"No school found for the current admin",variant:"destructive"});return}try{let nt;if(A.length>0){const jt=A.map(rs=>[rs.lng,rs.lat]);nt=JSON.stringify({type:"LineString",coordinates:jt})}else nt=JSON.stringify({type:"LineString",coordinates:[[Z.start_lng,Z.start_lat],[Z.end_lng,Z.end_lat]]});const At={name:Z.name,school:parseInt(Re||"1"),driver:Z.driver,start_lat:Z.start_lat,start_lng:Z.start_lng,end_lat:Z.end_lat,end_lng:Z.end_lng,total_distance:Z.total_distance,estimated_duration:Z.estimated_duration,is_active:Z.is_active,schedule_days:Z.schedule_days,traffic_factor:Z.traffic_factor,path:nt};await e(i0({id:se.id,routeData:At})).unwrap(),h({title:"Success",description:"Route updated successfully"}),Re&&(e(Io({schoolId:parseInt(Re)})),e(ai({schoolId:parseInt(Re)})),e(Mn())),de(!1),ae(null),Oe.reset(),x(""),v(""),P(null),R(null),N(!1),I([]),F("")}catch(nt){let At="Failed to update route";if(nt instanceof Error)try{const jt=JSON.parse(nt.message);typeof jt=="object"&&jt!==null?At=JSON.stringify(jt,null,2):At=nt.message}catch{At=nt.message}else At=String(nt);h({title:"Error",description:At,variant:"destructive"})}},Zs=async Z=>{try{const Re={student:Z.student,route:Z.route,pickup_stop:Z.pickup_stop,dropoff_stop:Z.dropoff_stop,is_active:Z.is_active,schedule_days:Z.schedule_days};await e(l0(Re)).unwrap(),h({title:"Success",description:"Route assigned to student successfully"}),vt(!1),Ze.reset(),re([])}catch(Re){let nt="Failed to assign route to student";if(Re instanceof Error)try{const At=JSON.parse(Re.message);typeof At=="object"&&At!==null?nt=JSON.stringify(At,null,2):nt=Re.message}catch{nt=Re.message}else nt=String(Re);h({title:"Error",description:nt,variant:"destructive"})}},xr=()=>{const Z=localStorage.getItem("schoolId");Z&&(e(Io({schoolId:parseInt(Z)})),e(ai({schoolId:parseInt(Z)})),e(Mn()),e(Ym({schoolId:parseInt(Z)})),e(Fo({schoolId:parseInt(Z)})),h({title:"Refreshing",description:"Data is being refreshed..."}))};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-2 sm:px-1 py-0 w-full max-w-[98vw] mx-auto",children:s.jsxs(Le,{className:"bg-white shadow-lg border-0 rounded-xl",children:[s.jsxs(Be,{className:"border-b border-gray-100 flex flex-row w-full items-center justify-between py-4",children:[s.jsxs(Ue,{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(vv,{className:"w-6 h-6 text-[#f7c624]"}),"Routes List"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(ce,{variant:"outline",onClick:xr,disabled:r,className:"flex items-center gap-2",children:[s.jsx(yv,{className:`h-4 w-4 ${r?"animate-spin":""}`}),"Refresh"]}),s.jsxs(js,{open:oe,onOpenChange:Z=>{vt(Z),Z||(Ze.reset(),te(""),Ne(""),re([]))},children:[s.jsx(mu,{asChild:!0,children:s.jsxs(ce,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Assign Route to Student"]})}),s.jsxs(ps,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsx(xs,{children:"Assign Route to Student"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Yt.length," students available for route assignment",pt.size>0&&s.jsxs("span",{className:"text-amber-600",children:[" ","(",pt.size," already assigned)"]})]})]}),s.jsx(np,{...Ze,children:s.jsxs("form",{onSubmit:Ze.handleSubmit(Zs),className:"space-y-4",children:[s.jsx(dr,{control:Ze.control,name:"student",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Select Student"}),s.jsxs(Gt,{onValueChange:Re=>Z.onChange(parseInt(Re)),value:Z.value.toString(),children:[s.jsx(Qs,{children:s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Choose a student"})})}),s.jsxs(Ut,{children:[s.jsxs("div",{className:"flex items-center px-3 pb-2",children:[s.jsx(Jr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx("input",{placeholder:"Search students...",value:we,onChange:Re=>te(Re.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:Dt.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:we?"No unassigned students found matching your search":"No unassigned students available"}):Dt.map(Re=>{var nt;return s.jsx(Ee,{value:((nt=Re.id)==null?void 0:nt.toString())||"",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"font-medium",children:[Re.first_name," ",Re.last_name]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Re.admission_number," -"," ",ts(Re.grade)]})]})},Re.id)})})]})]}),s.jsx(Vr,{})]})}),s.jsx(dr,{control:Ze.control,name:"route",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Select Route"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Choose a route to see available stops for pickup and dropoff"}),s.jsxs(Gt,{onValueChange:Re=>{const nt=parseInt(Re);Z.onChange(nt),qt(nt)},value:Z.value.toString(),children:[s.jsx(Qs,{children:s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Choose a route"})})}),s.jsxs(Ut,{children:[s.jsxs("div",{className:"flex items-center px-3 pb-2",children:[s.jsx(Jr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx("input",{placeholder:"Search routes by name, distance, or duration...",value:he,onChange:Re=>Ne(Re.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:ks.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:he?"No routes found matching your search":"No routes available"}):ks.map(Re=>{var nt;return s.jsx(Ee,{value:((nt=Re.id)==null?void 0:nt.toString())||"",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:Re.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Re.total_distance,"km -"," ",Re.estimated_duration," -"," ",kt(Re.driver)]})]})},Re.id)})})]})]}),s.jsx(Vr,{})]})}),pe&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ne,{className:"text-base font-semibold",children:"Route Stops"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),"Loading stops..."]})]})}),K.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs(ne,{className:"text-base font-semibold",children:["Route Stops (",K.length," stops found)"]})}),s.jsx("div",{className:"space-y-4",children:s.jsx(dr,{control:Ze.control,name:"pickup_stop",render:({field:Z})=>{var Re;return s.jsxs(zs,{children:[s.jsx(Is,{children:"Route Stop"}),s.jsxs(Gt,{onValueChange:nt=>{const At=parseInt(nt);Z.onChange(At),Ze.setValue("dropoff_stop",At)},value:((Re=Z.value)==null?void 0:Re.toString())||"",children:[s.jsx(Qs,{children:s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select route stop"})})}),s.jsx(Ut,{children:K.map(nt=>s.jsx(Ee,{value:nt.id.toString(),children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:nt.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Stop ",nt.sequence]})]})},nt.id))})]}),s.jsx(Vr,{}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This stop will be used for both pickup and dropoff"})]})}})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{className:"text-sm font-medium",children:"Route Stops Preview"}),s.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-lg p-3 bg-gray-50",children:K.map(Z=>s.jsxs("div",{className:"flex items-center space-x-3 py-2 border-b border-gray-100 last:border-b-0",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-blue-600",children:Z.sequence})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:Z.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Coordinates: ",Z.lat.toFixed(6),","," ",Z.lng.toFixed(6)]}),s.jsxs("div",{className:"flex gap-1 mt-1",children:[Z.is_pickup&&s.jsx(Pe,{variant:"outline",className:"text-xs bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/20",children:"Pickup"}),Z.is_dropoff&&s.jsx(Pe,{variant:"outline",className:"text-xs bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/20",children:"Dropoff"})]})]}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Stop ",Z.sequence]})]},Z.id))}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select pickup and dropoff stops from the options above to assign to the student."})]})]}),!pe&&K.length===0&&Ze.watch("route")&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx(ne,{className:"text-base font-semibold",children:"Route Stops"})}),s.jsx("div",{className:"p-4 border rounded-lg bg-amber-50 border-amber-200",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-sm text-amber-700",children:"No stops found for this route. The route may not have path coordinates defined."})]})})]}),s.jsx(dr,{control:Ze.control,name:"is_active",render:({field:Z})=>s.jsxs(zs,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsx("div",{className:"space-y-0.5",children:s.jsx(Is,{children:"Active Status"})}),s.jsx(Qs,{children:s.jsx(Us,{checked:Z.value,onCheckedChange:Z.onChange})})]})}),s.jsx(dr,{control:Ze.control,name:"schedule_days",render:()=>s.jsxs(zs,{children:[s.jsx("div",{className:"mb-4",children:s.jsx(Is,{children:"Schedule Days"})}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(Z=>s.jsx(dr,{control:Ze.control,name:"schedule_days",render:({field:Re})=>{var nt;return s.jsxs(zs,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(Qs,{children:s.jsx(Vh,{checked:(nt=Re.value)==null?void 0:nt.includes(Z),onCheckedChange:At=>{var jt;return At?Re.onChange([...Re.value,Z]):Re.onChange((jt=Re.value)==null?void 0:jt.filter(rs=>rs!==Z))}})}),s.jsx(Is,{className:"font-normal capitalize",children:Z})]},Z)}},Z))}),s.jsx(Vr,{})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Assign Route"})})]})})]})]}),s.jsxs(js,{open:mt,onOpenChange:Z=>{Se(Z),Z||(Oe.reset(),x(""),v(""),P(null),R(null),N(!1),Ke(""))},children:[s.jsx(mu,{asChild:!0,children:s.jsx(ce,{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white font-semibold px-6 py-2 rounded-lg shadow",onClick:()=>Se(!0),children:"Add New Route"})}),s.jsxs(ps,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Add New Route"})}),s.jsx(np,{...Oe,children:s.jsxs("form",{onSubmit:Oe.handleSubmit(as),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(dr,{control:Oe.control,name:"name",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Route Name"}),s.jsx(Qs,{children:s.jsx(Ie,{placeholder:"Enter route name",...Z})}),s.jsx(Vr,{})]})}),s.jsx(dr,{control:Oe.control,name:"driver",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Select Driver"}),s.jsxs(Gt,{onValueChange:Re=>Z.onChange(parseInt(Re)),value:Z.value.toString(),disabled:ws.length===0,children:[s.jsx(Qs,{children:s.jsx(zt,{children:s.jsx(Kt,{placeholder:ws.length===0?"No drivers available":"Choose a driver"})})}),s.jsxs(Ut,{children:[s.jsxs("div",{className:"flex items-center px-3 pb-2",children:[s.jsx(Jr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx("input",{placeholder:"Search drivers by name or phone...",value:Ve,onChange:Re=>Ke(Re.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:ws.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:Ve?"No drivers found matching your search":"No drivers available for this school"}):ws.map(Re=>{var nt;return s.jsx(Ee,{value:((nt=Re.id)==null?void 0:nt.toString())||"",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"font-medium",children:[Re.user_details.first_name," ",Re.user_details.last_name]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Re.phone_number||"No phone"," ","- ",Re.license_number]})]})},Re.id)})})]})]}),s.jsx(Vr,{}),wt.length===0&&s.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"No drivers are available for this school. Please add drivers first."})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(zs,{children:[s.jsx(Is,{children:"Start Location"}),s.jsx(Qs,{children:s.jsx(Ie,{ref:E,placeholder:"Type to search for a location",value:y,onChange:Z=>x(Z.target.value),className:"w-full",autoComplete:"off"})})]}),s.jsxs(zs,{children:[s.jsx(Is,{children:"End Location"}),s.jsx(Qs,{children:s.jsx(Ie,{ref:$,placeholder:"Type to search for a location",value:w,onChange:Z=>v(Z.target.value),className:"w-full",autoComplete:"off"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(dr,{control:Oe.control,name:"total_distance",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Total Distance (km)"}),s.jsx(Qs,{children:s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{type:"number",step:"0.01",min:"0",value:C??Z.value,onChange:Re=>{const nt=parseFloat(Re.target.value);P(nt),Z.onChange(nt)},disabled:b}),b&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),s.jsx(Vr,{})]})}),s.jsx(dr,{control:Oe.control,name:"estimated_duration",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Estimated Duration (HH:MM:SS)"}),s.jsx(Qs,{children:s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{type:"text",value:D??Z.value,onChange:Re=>{R(Re.target.value),Z.onChange(Re.target.value)},disabled:b,placeholder:"00:00:00",pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"}),b&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),s.jsx(Vr,{})]})})]}),s.jsx(dr,{control:Oe.control,name:"is_active",render:({field:Z})=>s.jsxs(zs,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsx("div",{className:"space-y-0.5",children:s.jsx(Is,{children:"Active Status"})}),s.jsx(Qs,{children:s.jsx(Us,{checked:Z.value,onCheckedChange:Z.onChange})})]})}),s.jsx(dr,{control:Oe.control,name:"schedule_days",render:()=>s.jsxs(zs,{children:[s.jsx("div",{className:"mb-4",children:s.jsx(Is,{children:"Schedule Days"})}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(Z=>s.jsx(dr,{control:Oe.control,name:"schedule_days",render:({field:Re})=>{var nt;return s.jsxs(zs,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(Qs,{children:s.jsx(Vh,{checked:(nt=Re.value)==null?void 0:nt.includes(Z),onCheckedChange:At=>{var jt;return At?Re.onChange([...Re.value,Z]):Re.onChange((jt=Re.value)==null?void 0:jt.filter(rs=>rs!==Z))}})}),s.jsx(Is,{className:"font-normal capitalize",children:Z})]},Z)}},Z))}),s.jsx(Vr,{})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Create Route"})})]})})]})]})]})]}),s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ie,{placeholder:"Search routes by name or schedule days...",value:J,onChange:Z=>q(Z.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ul,{className:"h-4 w-4 text-gray-400"}),s.jsxs(Gt,{value:Y,onValueChange:k,children:[s.jsx(zt,{className:"w-[180px]",children:s.jsx(Kt,{placeholder:"Filter by status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Routes"}),s.jsx(Ee,{value:"active",children:"Active"}),s.jsx(Ee,{value:"inactive",children:"Inactive"})]})]}),s.jsx(ku,{data:{headers:["Route Name","Driver","Start Location","End Location","Distance (km)","Duration","Schedule Days","Status","Traffic Factor"],data:Ce.map(Z=>{var Re,nt,At,jt,rs;return{route_name:Z.name||"",driver:wt!=null&&wt.find(Ks=>Ks.id===Z.driver)?`${((Re=wt.find(Ks=>Ks.id===Z.driver))==null?void 0:Re.user_details.first_name)||""} ${((nt=wt.find(Ks=>Ks.id===Z.driver))==null?void 0:nt.user_details.last_name)||""}`:"Not Assigned",start_location:`${Z.start_lat}, ${Z.start_lng}`,end_location:`${Z.end_lat}, ${Z.end_lng}`,distance:((At=Z.total_distance)==null?void 0:At.toString())||"",duration:Z.estimated_duration||"",schedule_days:((jt=Z.schedule_days)==null?void 0:jt.join(", "))||"",status:Z.is_active?"Active":"Inactive",traffic_factor:((rs=Z.traffic_factor)==null?void 0:rs.toString())||""}}),fileName:"routes_export",title:"Routes Directory"},className:"border-gray-200 hover:bg-gray-50 px-3 py-2"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Route Name"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Driver"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Distance"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Schedule"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Route Stops"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:r?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#f7c624]"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Loading routes..."})]})})}):n?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})}),s.jsx("span",{className:"text-red-600 font-medium",children:n})]})})}):(t==null?void 0:t.length)===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(vv,{className:"w-8 h-8 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 font-medium",children:r?"Loading routes...":"No routes found"}),s.jsx("p",{className:"text-gray-500 text-sm",children:r?"Please wait while we fetch your routes":"Create your first route to get started"}),!r&&s.jsxs(ce,{onClick:xr,variant:"outline",size:"sm",className:"mt-2",children:[s.jsx(yv,{className:"w-4 h-4 mr-2"}),"Refresh Data"]})]})]})})}):tr.map((Z,Re)=>{var nt,At,jt,rs,Ks,mn,zr,La;return Z?s.jsxs("tr",{className:`hover:bg-gray-50 transition-colors duration-200 ${Re%2===0?"bg-white":"bg-gray-50/50"}`,children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-[#f7c624] rounded-full mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",Z.id]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-xs font-medium text-blue-600",children:((At=(nt=wt==null?void 0:wt.find(en=>en.id===Z.driver))==null?void 0:nt.user_details.first_name)==null?void 0:At.charAt(0))||"?"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[((jt=wt==null?void 0:wt.find(en=>en.id===Z.driver))==null?void 0:jt.user_details.first_name)||"Not Assigned"," ",((rs=wt==null?void 0:wt.find(en=>en.id===Z.driver))==null?void 0:rs.user_details.last_name)||""]}),s.jsx("div",{className:"text-xs text-gray-500",children:((Ks=wt==null?void 0:wt.find(en=>en.id===Z.driver))==null?void 0:Ks.license_number)||"No license"})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-xs font-medium text-purple-600",children:((mn=Z.total_distance)==null?void 0:mn.toString().charAt(0))||"0"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Z.total_distance," km"]}),s.jsx("div",{className:"text-xs text-gray-500",children:Z.estimated_duration})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[(zr=Z.schedule_days)==null?void 0:zr.slice(0,3).map(en=>s.jsx(Pe,{variant:"outline",className:"text-xs px-2 py-1 bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/20",children:en.slice(0,3)},en)),((La=Z.schedule_days)==null?void 0:La.length)>3&&s.jsxs(Pe,{variant:"outline",className:"text-xs px-2 py-1 bg-gray-50 text-gray-600 border-gray-200",children:["+",Z.schedule_days.length-3]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>hr(Z),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50",children:[s.jsx(pr,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"View Stops"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Pe,{variant:Z.is_active?"default":"secondary",className:`${Z.is_active?"bg-[#f7c624]/20 text-[#f7c624] border-[#f7c624]/20":"bg-gray-100 text-gray-800 border-gray-200"} font-medium`,children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${Z.is_active?"bg-[#f7c624]":"bg-gray-400"}`}),s.jsx("span",{children:Z.is_active?"Active":"Inactive"})]})})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-gray-100 rounded-full",children:s.jsx(ho,{className:"h-4 w-4 text-gray-600"})})}),s.jsxs(An,{align:"end",className:"w-48",children:[s.jsxs(Jt,{onClick:()=>Vt(Z),className:"cursor-pointer",children:[s.jsx(ir,{className:"h-4 w-4 mr-2 text-blue-600"}),s.jsx("span",{children:"View Details"})]}),s.jsxs(Jt,{onClick:()=>ln(Z),className:"cursor-pointer",children:[s.jsx(Nn,{className:"h-4 w-4 mr-2 text-[#f7c624]"}),s.jsx("span",{children:"Edit Route"})]}),s.jsxs(Jt,{onClick:()=>Ir(Z),className:"cursor-pointer",children:[s.jsx(pr,{className:"h-4 w-4 mr-2 text-[#f7c624]"}),s.jsx("span",{children:"Add Route Stop"})]}),s.jsxs(Jt,{onClick:()=>fn(Z),className:"cursor-pointer text-red-600 focus:text-red-600",children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"Delete Route"})]})]})]})})]},Z.id):null})})]})}),s.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",yt+1,"-",Math.min(Xt,Ce.length)," of"," ",Ce.length," routes",J&&` matching "${J}"`,Y!=="all"&&` (${Y})`]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>M(L-1),disabled:L===1,children:[s.jsx(qc,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:dt},(Z,Re)=>Re+1).map(Z=>s.jsx(ce,{variant:L===Z?"default":"outline",size:"sm",onClick:()=>M(Z),className:"w-8 h-8 p-0",children:Z},Z))}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>M(L+1),disabled:L===dt,children:["Next",s.jsx(wl,{className:"h-4 w-4"})]})]})]})]})})}),s.jsx(js,{open:ge,onOpenChange:fe,children:s.jsxs(ps,{className:"max-w-2xl",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Route Details"})}),se&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Route Name"}),s.jsx("p",{children:se.name})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Status"}),s.jsx(Pe,{variant:se.is_active?"default":"secondary",children:se.is_active?"Active":"Inactive"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Driver"}),s.jsxs("p",{children:[(Ts=wt==null?void 0:wt.find(Z=>Z.id===se.driver))==null?void 0:Ts.user_details.first_name," ",(Ms=wt==null?void 0:wt.find(Z=>Z.id===se.driver))==null?void 0:Ms.user_details.last_name]})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Total Distance"}),s.jsxs("p",{children:[se.total_distance," km"]})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Estimated Duration"}),s.jsx("p",{children:se.estimated_duration})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Traffic Factor"}),s.jsxs("p",{children:[se.traffic_factor,"x"]})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Schedule Days"}),s.jsx("div",{className:"flex gap-1 mt-1",children:se.schedule_days.map(Z=>s.jsx(Pe,{variant:"outline",className:"capitalize",children:Z},Z))})]})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Coordinates"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm text-gray-600",children:"Start Point"}),s.jsxs("p",{className:"text-sm",children:["Lat: ",se.start_lat,", Lng:"," ",se.start_lng]})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm text-gray-600",children:"End Point"}),s.jsxs("p",{className:"text-sm",children:["Lat: ",se.end_lat,", Lng: ",se.end_lng]})]})]})]})]})]})}),s.jsx(js,{open:Me,onOpenChange:Z=>{de(Z),Z||(ae(null),Oe.reset(),x(""),v(""),P(null),R(null),N(!1),Ke(""))},children:s.jsxs(ps,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Edit Route"})}),s.jsx(np,{...Oe,children:s.jsxs("form",{onSubmit:Oe.handleSubmit(Ns),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(dr,{control:Oe.control,name:"name",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Route Name"}),s.jsx(Qs,{children:s.jsx(Ie,{placeholder:"Enter route name",...Z})}),s.jsx(Vr,{})]})}),s.jsx(dr,{control:Oe.control,name:"driver",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Select Driver"}),s.jsxs(Gt,{onValueChange:Re=>Z.onChange(parseInt(Re)),value:Z.value.toString(),disabled:ws.length===0,children:[s.jsx(Qs,{children:s.jsx(zt,{children:s.jsx(Kt,{placeholder:ws.length===0?"No drivers available":"Choose a driver"})})}),s.jsxs(Ut,{children:[s.jsxs("div",{className:"flex items-center px-3 pb-2",children:[s.jsx(Jr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx("input",{placeholder:"Search drivers by name or phone...",value:Ve,onChange:Re=>Ke(Re.target.value),className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:ws.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:Ve?"No drivers found matching your search":"No drivers available for this school"}):ws.map(Re=>{var nt;return s.jsx(Ee,{value:((nt=Re.id)==null?void 0:nt.toString())||"",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"font-medium",children:[Re.user_details.first_name," ",Re.user_details.last_name]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Re.phone_number||"No phone"," -"," ",Re.license_number]})]})},Re.id)})})]})]}),s.jsx(Vr,{}),wt.length===0&&s.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"No drivers are available for this school. Please add drivers first."})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(zs,{children:[s.jsx(Is,{children:"Start Location"}),s.jsx(Qs,{children:s.jsx(Ie,{ref:E,placeholder:"Type to search for a location",value:y,onChange:Z=>x(Z.target.value),className:"w-full",autoComplete:"off"})})]}),s.jsxs(zs,{children:[s.jsx(Is,{children:"End Location"}),s.jsx(Qs,{children:s.jsx(Ie,{ref:$,placeholder:"Type to search for a location",value:w,onChange:Z=>v(Z.target.value),className:"w-full",autoComplete:"off"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(dr,{control:Oe.control,name:"total_distance",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Total Distance (km)"}),s.jsx(Qs,{children:s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{type:"number",step:"0.01",min:"0",value:C??Z.value,onChange:Re=>{const nt=parseFloat(Re.target.value);P(nt),Z.onChange(nt)},disabled:b}),b&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),s.jsx(Vr,{})]})}),s.jsx(dr,{control:Oe.control,name:"estimated_duration",render:({field:Z})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Estimated Duration (HH:MM:SS)"}),s.jsx(Qs,{children:s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{type:"text",value:D??Z.value,onChange:Re=>{R(Re.target.value),Z.onChange(Re.target.value)},disabled:b,placeholder:"00:00:00",pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"}),b&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Calculating..."})]})}),s.jsx(Vr,{})]})})]}),s.jsx(dr,{control:Oe.control,name:"is_active",render:({field:Z})=>s.jsxs(zs,{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsx("div",{className:"space-y-0.5",children:s.jsx(Is,{children:"Active Status"})}),s.jsx(Qs,{children:s.jsx(Us,{checked:Z.value,onCheckedChange:Z.onChange})})]})}),s.jsx(dr,{control:Oe.control,name:"schedule_days",render:()=>s.jsxs(zs,{children:[s.jsx("div",{className:"mb-4",children:s.jsx(Is,{children:"Schedule Days"})}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(Z=>s.jsx(dr,{control:Oe.control,name:"schedule_days",render:({field:Re})=>{var nt;return s.jsxs(zs,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(Qs,{children:s.jsx(Vh,{checked:(nt=Re.value)==null?void 0:nt.includes(Z),onCheckedChange:At=>{var jt;return At?Re.onChange([...Re.value,Z]):Re.onChange((jt=Re.value)==null?void 0:jt.filter(rs=>rs!==Z))}})}),s.jsx(Is,{className:"font-normal capitalize",children:Z})]},Z)}},Z))}),s.jsx(Vr,{})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ne,{className:"text-base font-semibold",children:"Route Stops"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add intermediate stops for this route"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Add Stop"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{ref:U,placeholder:"Search for a location to add as a stop...",value:O,onChange:Z=>F(Z.target.value),onKeyDown:Z=>{Z.key==="Enter"&&(Z.preventDefault(),Z.stopPropagation())},className:"flex-1",autoComplete:"off"}),s.jsx(ce,{type:"button",variant:"outline",onClick:()=>{O.trim()&&new google.maps.Geocoder().geocode({address:O},(Re,nt)=>{var At,jt;if(nt==="OK"&&(Re!=null&&Re[0])){const rs=((At=Re[0].geometry.location)==null?void 0:At.lat())||0,Ks=((jt=Re[0].geometry.location)==null?void 0:jt.lng())||0;Br(O,rs,Ks)}else h({title:"Error",description:"Could not find coordinates for this location",variant:"destructive"})})},disabled:!O.trim(),children:"Add"})]})]}),A.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ne,{children:["Added Stops (",A.length,")"]}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border rounded-lg p-3",children:A.map((Z,Re)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-blue-600",children:Z.sequence})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:Z.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[Z.lat.toFixed(6),", ",Z.lng.toFixed(6)]})]})]}),s.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>zi(Re),className:"text-red-500 hover:text-red-700",children:s.jsx(Ha,{className:"w-4 h-4"})})]},Re))})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Update Route"})})]})})]})}),s.jsx(ad,{open:$e,onOpenChange:Ye,children:s.jsxs(Ll,{children:[s.jsxs(Tl,{children:[s.jsx(Il,{children:"Are you sure?"}),s.jsxs(Fl,{children:["This action cannot be undone. This will permanently delete the route",se&&` "${se.name}"`,"."]})]}),s.jsxs(Rl,{children:[s.jsx(Ol,{children:"Cancel"}),s.jsx(Dl,{onClick:Ea,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),ee&&s.jsx(EZ,{isOpen:me,onClose:()=>{xe(!1),ue(null),ee.id&&sr(ee.id)},routeId:ee.id,routeName:ee.name,currentSequenceNumber:1}),We&&s.jsx(LZ,{isOpen:ve,onClose:()=>{qe(!1),ze(null)},routeId:We.id,routeName:We.name})]})}var x1="Popover",[aT,Bse]=_a(x1,[vd]),ix=vd(),[DZ,wd]=aT(x1),iT=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=ix(t),c=g.useRef(null),[d,u]=g.useState(!1),[h,p]=fo({prop:n,defaultProp:a??!1,onChange:i,caller:x1});return s.jsx(Ky,{...l,children:s.jsx(DZ,{scope:t,contentId:Pn(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:g.useCallback(()=>p(f=>!f),[p]),hasCustomAnchor:d,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o,children:r})})};iT.displayName=x1;var oT="PopoverAnchor",OZ=g.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=wd(oT,r),i=ix(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return g.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(tx,{...i,...n,ref:t})});OZ.displayName=oT;var lT="PopoverTrigger",cT=g.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=wd(lT,r),i=ix(r),o=_s(t,a.triggerRef),l=s.jsx(Mt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":mT(a.open),...n,ref:o,onClick:gt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(tx,{asChild:!0,...i,children:l})});cT.displayName=lT;var hS="PopoverPortal",[MZ,$Z]=aT(hS,{forceMount:void 0}),dT=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=wd(hS,t);return s.jsx(MZ,{scope:t,forceMount:r,children:s.jsx(Ga,{present:r||i.open,children:s.jsx(Rf,{asChild:!0,container:a,children:n})})})};dT.displayName=hS;var wf="PopoverContent",uT=g.forwardRef((e,t)=>{const r=$Z(wf,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=wd(wf,e.__scopePopover);return s.jsx(Ga,{present:n||i.open,children:i.modal?s.jsx(zZ,{...a,ref:t}):s.jsx(UZ,{...a,ref:t})})});uT.displayName=wf;var BZ=td("PopoverContent.RemoveScroll"),zZ=g.forwardRef((e,t)=>{const r=wd(wf,e.__scopePopover),n=g.useRef(null),a=_s(t,n),i=g.useRef(!1);return g.useEffect(()=>{const o=n.current;if(o)return zy(o)},[]),s.jsx(Qp,{as:BZ,allowPinchZoom:!0,children:s.jsx(hT,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gt(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:gt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:gt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),UZ=g.forwardRef((e,t)=>{const r=wd(wf,e.__scopePopover),n=g.useRef(!1),a=g.useRef(!1);return s.jsx(hT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),hT=g.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,p=wd(wf,r),f=ix(r);return $y(),s.jsx(Xp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Su,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:s.jsx(Yy,{"data-state":mT(p.open),role:"dialog",id:p.contentId,...f,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),fT="PopoverClose",qZ=g.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=wd(fT,r);return s.jsx(Mt.button,{type:"button",...n,ref:t,onClick:gt(e.onClick,()=>a.onOpenChange(!1))})});qZ.displayName=fT;var VZ="PopoverArrow",HZ=g.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=ix(r);return s.jsx(Jy,{...a,...n,ref:t})});HZ.displayName=VZ;function mT(e){return e?"open":"closed"}var WZ=iT,GZ=cT,KZ=dT,pT=uT;const xT=WZ,gT=GZ,fS=g.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(KZ,{children:s.jsx(pT,{ref:a,align:t,sideOffset:r,className:it("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));fS.displayName=pT.displayName;var pC=1,YZ=.9,JZ=.8,ZZ=.17,Cb=.1,kb=.999,XZ=.9999,QZ=.99,eX=/[\\\/_+.#"@\[\(\{&]/,tX=/[\\\/_+.#"@\[\(\{&]/g,sX=/[\s-]/,vT=/[\s-]/g;function Pw(e,t,r,n,a,i,o){if(i===t.length)return a===e.length?pC:QZ;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(i),d=r.indexOf(c,a),u=0,h,p,f,y;d>=0;)h=Pw(e,t,r,n,d+1,i+1,o),h>u&&(d===a?h*=pC:eX.test(e.charAt(d-1))?(h*=JZ,f=e.slice(a,d-1).match(tX),f&&a>0&&(h*=Math.pow(kb,f.length))):sX.test(e.charAt(d-1))?(h*=YZ,y=e.slice(a,d-1).match(vT),y&&a>0&&(h*=Math.pow(kb,y.length))):(h*=ZZ,a>0&&(h*=Math.pow(kb,d-a))),e.charAt(d)!==t.charAt(i)&&(h*=XZ)),(h<Cb&&r.charAt(d-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&r.charAt(d-1)!==n.charAt(i))&&(p=Pw(e,t,r,n,d+1,i+2,o),p*Cb>h&&(h=p*Cb)),h>u&&(u=h),d=r.indexOf(c,d+1);return o[l]=u,u}function xC(e){return e.toLowerCase().replace(vT," ")}function rX(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Pw(e,t,xC(e),xC(t),0,0,{})}var Cm='[cmdk-group=""]',Pb='[cmdk-group-items=""]',nX='[cmdk-group-heading=""]',yT='[cmdk-item=""]',gC=`${yT}:not([aria-disabled="true"])`,Aw="cmdk-item-select",lh="data-value",aX=(e,t,r)=>rX(e,t,r),jT=g.createContext(void 0),ox=()=>g.useContext(jT),bT=g.createContext(void 0),mS=()=>g.useContext(bT),wT=g.createContext(void 0),NT=g.forwardRef((e,t)=>{let r=ch(()=>{var k,L;return{search:"",value:(L=(k=e.value)!=null?k:e.defaultValue)!=null?L:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=ch(()=>new Set),a=ch(()=>new Map),i=ch(()=>new Map),o=ch(()=>new Set),l=ST(e),{label:c,children:d,value:u,onValueChange:h,filter:p,shouldFilter:f,loop:y,disablePointerSelection:x=!1,vimBindings:w=!0,...v}=e,b=Pn(),N=Pn(),C=Pn(),P=g.useRef(null),D=xX();yu(()=>{if(u!==void 0){let k=u.trim();r.current.value=k,R.emit()}},[u]),yu(()=>{D(6,$)},[]);let R=g.useMemo(()=>({subscribe:k=>(o.current.add(k),()=>o.current.delete(k)),snapshot:()=>r.current,setState:(k,L,M)=>{var W,se,ae,ge;if(!Object.is(r.current[k],L)){if(r.current[k]=L,k==="search")E(),O(),D(1,F);else if(k==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let fe=document.getElementById(C);fe?fe.focus():(W=document.getElementById(b))==null||W.focus()}if(D(7,()=>{var fe;r.current.selectedItemId=(fe=U())==null?void 0:fe.id,R.emit()}),M||D(5,$),((se=l.current)==null?void 0:se.value)!==void 0){let fe=L??"";(ge=(ae=l.current).onValueChange)==null||ge.call(ae,fe);return}}R.emit()}},emit:()=>{o.current.forEach(k=>k())}}),[]),A=g.useMemo(()=>({value:(k,L,M)=>{var W;L!==((W=i.current.get(k))==null?void 0:W.value)&&(i.current.set(k,{value:L,keywords:M}),r.current.filtered.items.set(k,I(L,M)),D(2,()=>{O(),R.emit()}))},item:(k,L)=>(n.current.add(k),L&&(a.current.has(L)?a.current.get(L).add(k):a.current.set(L,new Set([k]))),D(3,()=>{E(),O(),r.current.value||F(),R.emit()}),()=>{i.current.delete(k),n.current.delete(k),r.current.filtered.items.delete(k);let M=U();D(4,()=>{E(),(M==null?void 0:M.getAttribute("id"))===k&&F(),R.emit()})}),group:k=>(a.current.has(k)||a.current.set(k,new Set),()=>{i.current.delete(k),a.current.delete(k)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:b,inputId:C,labelId:N,listInnerRef:P}),[]);function I(k,L){var M,W;let se=(W=(M=l.current)==null?void 0:M.filter)!=null?W:aX;return k?se(k,r.current.search,L):0}function O(){if(!r.current.search||l.current.shouldFilter===!1)return;let k=r.current.filtered.items,L=[];r.current.filtered.groups.forEach(W=>{let se=a.current.get(W),ae=0;se.forEach(ge=>{let fe=k.get(ge);ae=Math.max(fe,ae)}),L.push([W,ae])});let M=P.current;K().sort((W,se)=>{var ae,ge;let fe=W.getAttribute("id"),Me=se.getAttribute("id");return((ae=k.get(Me))!=null?ae:0)-((ge=k.get(fe))!=null?ge:0)}).forEach(W=>{let se=W.closest(Pb);se?se.appendChild(W.parentElement===se?W:W.closest(`${Pb} > *`)):M.appendChild(W.parentElement===M?W:W.closest(`${Pb} > *`))}),L.sort((W,se)=>se[1]-W[1]).forEach(W=>{var se;let ae=(se=P.current)==null?void 0:se.querySelector(`${Cm}[${lh}="${encodeURIComponent(W[0])}"]`);ae==null||ae.parentElement.appendChild(ae)})}function F(){let k=K().find(M=>M.getAttribute("aria-disabled")!=="true"),L=k==null?void 0:k.getAttribute(lh);R.setState("value",L||void 0)}function E(){var k,L,M,W;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let se=0;for(let ae of n.current){let ge=(L=(k=i.current.get(ae))==null?void 0:k.value)!=null?L:"",fe=(W=(M=i.current.get(ae))==null?void 0:M.keywords)!=null?W:[],Me=I(ge,fe);r.current.filtered.items.set(ae,Me),Me>0&&se++}for(let[ae,ge]of a.current)for(let fe of ge)if(r.current.filtered.items.get(fe)>0){r.current.filtered.groups.add(ae);break}r.current.filtered.count=se}function $(){var k,L,M;let W=U();W&&(((k=W.parentElement)==null?void 0:k.firstChild)===W&&((M=(L=W.closest(Cm))==null?void 0:L.querySelector(nX))==null||M.scrollIntoView({block:"nearest"})),W.scrollIntoView({block:"nearest"}))}function U(){var k;return(k=P.current)==null?void 0:k.querySelector(`${yT}[aria-selected="true"]`)}function K(){var k;return Array.from(((k=P.current)==null?void 0:k.querySelectorAll(gC))||[])}function re(k){let L=K()[k];L&&R.setState("value",L.getAttribute(lh))}function pe(k){var L;let M=U(),W=K(),se=W.findIndex(ge=>ge===M),ae=W[se+k];(L=l.current)!=null&&L.loop&&(ae=se+k<0?W[W.length-1]:se+k===W.length?W[0]:W[se+k]),ae&&R.setState("value",ae.getAttribute(lh))}function Q(k){let L=U(),M=L==null?void 0:L.closest(Cm),W;for(;M&&!W;)M=k>0?mX(M,Cm):pX(M,Cm),W=M==null?void 0:M.querySelector(gC);W?R.setState("value",W.getAttribute(lh)):pe(k)}let J=()=>re(K().length-1),q=k=>{k.preventDefault(),k.metaKey?J():k.altKey?Q(1):pe(1)},Y=k=>{k.preventDefault(),k.metaKey?re(0):k.altKey?Q(-1):pe(-1)};return g.createElement(Mt.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:k=>{var L;(L=v.onKeyDown)==null||L.call(v,k);let M=k.nativeEvent.isComposing||k.keyCode===229;if(!(k.defaultPrevented||M))switch(k.key){case"n":case"j":{w&&k.ctrlKey&&q(k);break}case"ArrowDown":{q(k);break}case"p":case"k":{w&&k.ctrlKey&&Y(k);break}case"ArrowUp":{Y(k);break}case"Home":{k.preventDefault(),re(0);break}case"End":{k.preventDefault(),J();break}case"Enter":{k.preventDefault();let W=U();if(W){let se=new Event(Aw);W.dispatchEvent(se)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:A.inputId,id:A.labelId,style:vX},c),g1(e,k=>g.createElement(bT.Provider,{value:R},g.createElement(jT.Provider,{value:A},k))))}),iX=g.forwardRef((e,t)=>{var r,n;let a=Pn(),i=g.useRef(null),o=g.useContext(wT),l=ox(),c=ST(e),d=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;yu(()=>{if(!d)return l.item(a,o==null?void 0:o.id)},[d]);let u=_T(a,i,[e.value,e.children,i],e.keywords),h=mS(),p=ld(D=>D.value&&D.value===u.current),f=ld(D=>d||l.filter()===!1?!0:D.search?D.filtered.items.get(a)>0:!0);g.useEffect(()=>{let D=i.current;if(!(!D||e.disabled))return D.addEventListener(Aw,y),()=>D.removeEventListener(Aw,y)},[f,e.onSelect,e.disabled]);function y(){var D,R;x(),(R=(D=c.current).onSelect)==null||R.call(D,u.current)}function x(){h.setState("value",u.current,!0)}if(!f)return null;let{disabled:w,value:v,onSelect:b,forceMount:N,keywords:C,...P}=e;return g.createElement(Mt.div,{ref:Pl(i,t),...P,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!p,"data-disabled":!!w,"data-selected":!!p,onPointerMove:w||l.getDisablePointerSelection()?void 0:x,onClick:w?void 0:y},e.children)}),oX=g.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...i}=e,o=Pn(),l=g.useRef(null),c=g.useRef(null),d=Pn(),u=ox(),h=ld(f=>a||u.filter()===!1?!0:f.search?f.filtered.groups.has(o):!0);yu(()=>u.group(o),[]),_T(o,l,[e.value,e.heading,c]);let p=g.useMemo(()=>({id:o,forceMount:a}),[a]);return g.createElement(Mt.div,{ref:Pl(l,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},r&&g.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),g1(e,f=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},g.createElement(wT.Provider,{value:p},f))))}),lX=g.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=g.useRef(null),i=ld(o=>!o.search);return!r&&!i?null:g.createElement(Mt.div,{ref:Pl(a,t),...n,"cmdk-separator":"",role:"separator"})}),cX=g.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,i=mS(),o=ld(d=>d.search),l=ld(d=>d.selectedItemId),c=ox();return g.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),g.createElement(Mt.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:d=>{a||i.setState("search",d.target.value),r==null||r(d.target.value)}})}),dX=g.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,i=g.useRef(null),o=g.useRef(null),l=ld(d=>d.selectedItemId),c=ox();return g.useEffect(()=>{if(o.current&&i.current){let d=o.current,u=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let f=d.offsetHeight;u.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return p.observe(d),()=>{cancelAnimationFrame(h),p.unobserve(d)}}},[]),g.createElement(Mt.div,{ref:Pl(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},g1(e,d=>g.createElement("div",{ref:Pl(o,c.listInnerRef),"cmdk-list-sizer":""},d)))}),uX=g.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:i,container:o,...l}=e;return g.createElement(E5,{open:r,onOpenChange:n},g.createElement(L5,{container:o},g.createElement(qy,{"cmdk-overlay":"",className:a}),g.createElement(Vy,{"aria-label":e.label,"cmdk-dialog":"",className:i},g.createElement(NT,{ref:t,...l}))))}),hX=g.forwardRef((e,t)=>ld(r=>r.filtered.count===0)?g.createElement(Mt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),fX=g.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...i}=e;return g.createElement(Mt.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},g1(e,o=>g.createElement("div",{"aria-hidden":!0},o)))}),Ka=Object.assign(NT,{List:dX,Item:iX,Input:cX,Group:oX,Separator:lX,Dialog:uX,Empty:hX,Loading:fX});function mX(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function pX(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function ST(e){let t=g.useRef(e);return yu(()=>{t.current=e}),t}var yu=typeof window>"u"?g.useEffect:g.useLayoutEffect;function ch(e){let t=g.useRef();return t.current===void 0&&(t.current=e()),t}function ld(e){let t=mS(),r=()=>e(t.snapshot());return g.useSyncExternalStore(t.subscribe,r,r)}function _T(e,t,r,n=[]){let a=g.useRef(),i=ox();return yu(()=>{var o;let l=(()=>{var d;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=n.map(d=>d.trim());i.value(e,l,c),(o=t.current)==null||o.setAttribute(lh,l),a.current=l}),a}var xX=()=>{let[e,t]=g.useState(),r=ch(()=>new Map);return yu(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}};function gX(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function g1({asChild:e,children:t},r){return e&&g.isValidElement(t)?g.cloneElement(gX(t),{ref:t.ref},r(t.props.children)):r(t)}var vX={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const pS=g.forwardRef(({className:e,...t},r)=>s.jsx(Ka,{ref:r,className:it("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));pS.displayName=Ka.displayName;const xS=g.forwardRef(({className:e,...t},r)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(Jr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(Ka.Input,{ref:r,className:it("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));xS.displayName=Ka.Input.displayName;const gS=g.forwardRef(({className:e,...t},r)=>s.jsx(Ka.List,{ref:r,className:it("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));gS.displayName=Ka.List.displayName;const vS=g.forwardRef((e,t)=>s.jsx(Ka.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));vS.displayName=Ka.Empty.displayName;const yS=g.forwardRef(({className:e,...t},r)=>s.jsx(Ka.Group,{ref:r,className:it("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));yS.displayName=Ka.Group.displayName;const yX=g.forwardRef(({className:e,...t},r)=>s.jsx(Ka.Separator,{ref:r,className:it("-mx-1 h-px bg-border",e),...t}));yX.displayName=Ka.Separator.displayName;const ap=g.forwardRef(({className:e,...t},r)=>s.jsx(Ka.Item,{ref:r,className:it("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));ap.displayName=Ka.Item.displayName;function vC({isOpen:e,onClose:t,onSubmit:r,schoolId:n,editMode:a=!1,student:i=null}){var R;const{parents:o}=ca(A=>A.parents),{grades:l}=ca(A=>A.grades),c=localStorage.getItem("schoolId"),[d,u]=g.useState(0),[h,p]=g.useState(!1),f=(o||[]).filter(A=>A.school===Number(n)),y=(l||[]).filter(A=>A.school===Number(n)),[x,w]=g.useState({first_name:"",middle_name:"",last_name:"",date_of_birth:"",school:Number(c)||0,parent:0,admission_number:"",grade:0,gender:"",section:"",medical_conditions:"",emergency_contacts:[{name:"",phone:""}],transport_enabled:!0});g.useEffect(()=>{if(a&&i){const A={first_name:i.first_name||"",middle_name:i.middle_name||"",last_name:i.last_name||"",date_of_birth:i.date_of_birth||"",school:i.school||Number(c)||0,parent:i.parent||0,admission_number:i.admission_number||"",grade:i.grade||0,gender:i.gender||"",section:i.section||"",medical_conditions:i.medical_conditions||"",emergency_contacts:i.emergency_contacts||[{name:"",phone:""}],transport_enabled:i.transport_enabled??!0};w(A),u(i.parent||0)}else{const A={first_name:"",middle_name:"",last_name:"",date_of_birth:"",school:Number(c)||0,parent:0,admission_number:"",grade:0,gender:"",section:"",medical_conditions:"",emergency_contacts:[{name:"",phone:""}],transport_enabled:!0};w(A),u(0)}},[a,i,c]),g.useEffect(()=>{d>0&&w(A=>({...A,parent:d}))},[d]),g.useEffect(()=>{},[x]);const v=A=>{if(A.preventDefault(),!x.first_name||!x.last_name){alert("First name and last name are required");return}if(!x.admission_number){alert("Admission number is required");return}if(!x.grade||x.grade===0){y.length===0?alert("No grades are available for this school. Please add grades first in the Grades tab."):alert("Please select a grade");return}if(!x.parent||x.parent===0){alert("Please select a parent");return}a&&(i!=null&&i.id)?r({id:i.id,data:x}):r(x)},b=A=>{const{name:I,value:O}=A.target;w(F=>({...F,[I]:O}))},N=(A,I)=>{const O=A==="grade"||A==="parent"?Number(I):I;w(F=>({...F,[A]:O}))},C=(A,I,O)=>{w(F=>{const E=[...F.emergency_contacts];return E[A]={...E[A],[I]:O},{...F,emergency_contacts:E}})},P=()=>{w(A=>({...A,emergency_contacts:[...A.emergency_contacts,{name:"",phone:""}]}))},D=A=>{w(I=>({...I,emergency_contacts:I.emergency_contacts.filter((O,F)=>F!==A)}))};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:a?"Edit Student":"Add New Student"})}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"first_name",children:"First Name"}),s.jsx(Ie,{id:"first_name",name:"first_name",value:x.first_name,onChange:b,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"middle_name",children:"Middle Name"}),s.jsx(Ie,{id:"middle_name",name:"middle_name",value:x.middle_name,onChange:b,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"last_name",children:"Last Name"}),s.jsx(Ie,{id:"last_name",name:"last_name",value:x.last_name,onChange:b,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"date_of_birth",children:"Date of Birth"}),s.jsx(Ie,{id:"date_of_birth",name:"date_of_birth",type:"date",value:x.date_of_birth,onChange:b,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"admission_number",children:"Admission Number"}),s.jsx(Ie,{id:"admission_number",name:"admission_number",value:x.admission_number,onChange:b,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"parent",children:"Parent"}),s.jsxs(xT,{open:h,onOpenChange:p,children:[s.jsx(gT,{asChild:!0,children:s.jsxs(ce,{variant:"outline",role:"combobox","aria-expanded":h,className:"w-full justify-between",children:[x.parent?((R=f.find(A=>A.id===x.parent))==null?void 0:R.user_full_name)||"Unknown Parent":"Select parent...",s.jsx(KA,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fS,{className:"w-full p-0",children:s.jsxs(pS,{children:[s.jsx(xS,{placeholder:"Search parent..."}),s.jsxs(gS,{children:[s.jsx(vS,{children:"No parent found."}),s.jsx(yS,{children:f.map(A=>{var I,O;return s.jsxs(ap,{value:`${A.user_full_name||"Unknown Parent"} ${A.user_phone_number||A.phone_number||((I=A.user_data)==null?void 0:I.phone_number)||""}`,onSelect:()=>{u(A.id),N("parent",A.id.toString()),p(!1)},children:[s.jsx(Sn,{className:it("mr-2 h-4 w-4",x.parent===A.id?"opacity-100":"opacity-0")}),A.user_full_name||"Unknown Parent"," -"," ",A.user_phone_number||A.phone_number||((O=A.user_data)==null?void 0:O.phone_number)||"No phone"]},A.id)})})]})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"grade",children:"Grade"}),s.jsxs(Gt,{value:x.grade?x.grade.toString():"",onValueChange:A=>N("grade",A),disabled:y.length===0,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:y.length>0?"Select grade":"No grades available"})}),s.jsx(Ut,{children:y.length>0?y.map(A=>{var I;return s.jsxs(Ee,{value:((I=A.id)==null?void 0:I.toString())||"",children:[A.name," - ",A.level]},A.id)}):s.jsx(Ee,{value:"",disabled:!0,children:"No grades available for this school"})})]}),y.length===0&&s.jsx("p",{className:"text-sm text-amber-600 bg-amber-50 px-3 py-2 rounded-md",children:" No grades have been created for this school yet. Please add grades first in the Grades tab."})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"section",children:"Section"}),s.jsxs(Gt,{value:x.section||"",onValueChange:A=>N("section",A),children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select section"})}),s.jsx(Ut,{children:["A","B","C","D"].map(A=>s.jsxs(Ee,{value:A,children:["Section ",A]},A))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"gender",children:"Gender"}),s.jsxs(Gt,{value:x.gender||"",onValueChange:A=>N("gender",A),children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select gender"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"male",children:"Male"}),s.jsx(Ee,{value:"female",children:"Female"}),s.jsx(Ee,{value:"other",children:"Other"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"medical_conditions",children:"Medical Conditions"}),s.jsx(Ie,{id:"medical_conditions",name:"medical_conditions",value:x.medical_conditions,onChange:b,placeholder:"Enter any medical conditions or 'None'"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"transport_enabled",children:"Transport Status"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"transport_enabled",name:"transport_enabled",checked:x.transport_enabled,onChange:A=>w(I=>({...I,transport_enabled:A.target.checked})),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),s.jsx(ne,{htmlFor:"transport_enabled",className:"text-sm",children:"Enable transport for this student"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Emergency Contacts"}),x.emergency_contacts.map((A,I)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{placeholder:"Contact Name",value:A.name,onChange:O=>C(I,"name",O.target.value)}),s.jsx(Ie,{placeholder:"Phone Number",value:A.phone,onChange:O=>C(I,"phone",O.target.value)}),I>0&&s.jsx(ce,{type:"button",variant:"destructive",onClick:()=>D(I),children:"Remove"})]},I)),s.jsx(ce,{type:"button",variant:"outline",onClick:P,className:"mt-2",children:"Add Emergency Contact"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ce,{type:"submit",children:a?"Update Student":"Create Student"})]})]})]})})}function jX({isOpen:e,onClose:t,student:r}){const{grades:n}=ca(o=>o.grades);if(!r||!r.id)return null;const a=o=>{if(!o)return"N/A";const l=n.find(c=>c.id===Number(o));return l?l.name:`Grade ${o}`},i=o=>{try{if(!o)return"N/A";const l=new Date(o);return isNaN(l.getTime())?"Invalid Date":l.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid Date"}};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsxs(xs,{className:"flex items-center gap-2",children:[s.jsx(ia,{className:"h-5 w-5"}),"Student Details"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsx(Ue,{className:"text-lg",children:"Basic Information"})}),s.jsx(Te,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),s.jsxs("p",{className:"text-lg font-semibold",children:[r.first_name||""," ",r.middle_name||""," ",r.last_name||""]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Admission Number"}),s.jsx("p",{className:"text-lg font-semibold",children:r.admission_number||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(on,{className:"h-4 w-4 text-gray-400"}),r.date_of_birth?i(r.date_of_birth):"N/A"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Gender"}),s.jsx("p",{className:"capitalize",children:r.gender||"N/A"})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"text-lg flex items-center gap-2",children:[s.jsx(fq,{className:"h-5 w-5"}),"Academic Information"]})}),s.jsx(Te,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Grade"}),s.jsx("p",{className:"text-lg font-semibold",children:a(r.grade)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Section"}),s.jsx("p",{className:"text-lg font-semibold",children:r.section||"N/A"})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsx(Ue,{className:"text-lg",children:"Transport Status"})}),s.jsx(Te,{children:s.jsx(Pe,{variant:r.transport_enabled?"default":"secondary",className:r.transport_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:r.transport_enabled?"Active":"Inactive"})})]}),r.medical_conditions&&r.medical_conditions.trim()&&s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"text-lg flex items-center gap-2",children:[s.jsx(rq,{className:"h-5 w-5"}),"Medical Information"]})}),s.jsx(Te,{children:s.jsx("p",{className:"text-gray-700",children:r.medical_conditions})})]}),r.emergency_contacts&&r.emergency_contacts.length>0&&s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"text-lg flex items-center gap-2",children:[s.jsx(Va,{className:"h-5 w-5"}),"Emergency Contacts"]})}),s.jsx(Te,{children:s.jsx("div",{className:"space-y-3",children:r.emergency_contacts.map((o,l)=>s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),s.jsx("p",{className:"font-medium",children:o.name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),s.jsx("p",{className:"font-medium",children:o.phone||"N/A"})]})]})},l))})})]})]}),s.jsx("div",{className:"flex justify-end gap-2 pt-4",children:s.jsx(ce,{variant:"outline",onClick:t,children:"Close"})})]})})}function yC({isOpen:e,onClose:t,onSubmit:r,schoolId:n,editMode:a=!1,grade:i}){const[o,l]=g.useState({name:"",level:"",school:n||0,description:"",capacity:30}),[c,d]=g.useState({});g.useEffect(()=>{l(a&&i?{name:i.name||"",level:i.level||"",school:i.school||n||0,description:i.description||"",capacity:i.capacity||30}:{name:"",level:"",school:n||0,description:"",capacity:30}),d({})},[a,i,n,e]);const u=()=>{const f={};return o.name.trim()||(f.name="Grade name is required"),o.level||(f.level="Level is required"),o.description.trim()||(f.description="Description is required"),o.capacity<=0&&(f.capacity="Capacity must be greater than 0"),d(f),Object.keys(f).length===0},h=f=>{f.preventDefault(),u()&&r(o)},p=(f,y)=>{l(x=>({...x,[f]:y})),c[f]&&d(x=>({...x,[f]:""}))};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"sm:max-w-[500px]",children:[s.jsx(bs,{children:s.jsx(xs,{children:a?"Edit Grade":"Add New Grade"})}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"name",children:"Grade Name *"}),s.jsx(Ie,{id:"name",placeholder:"e.g., Grade 1A",value:o.name,onChange:f=>p("name",f.target.value),className:c.name?"border-red-500":""}),c.name&&s.jsx("p",{className:"text-sm text-red-500",children:c.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"level",children:"Level *"}),s.jsxs(Gt,{value:o.level,onValueChange:f=>p("level",f),children:[s.jsx(zt,{className:c.level?"border-red-500":"",children:s.jsx(Kt,{placeholder:"Select level"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"Primary",children:"Primary"}),s.jsx(Ee,{value:"Secondary",children:"Secondary"}),s.jsx(Ee,{value:"High School",children:"High School"}),s.jsx(Ee,{value:"College",children:"College"})]})]}),c.level&&s.jsx("p",{className:"text-sm text-red-500",children:c.level})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"description",children:"Description *"}),s.jsx(oa,{id:"description",placeholder:"Describe the grade level...",value:o.description,onChange:f=>p("description",f.target.value),className:c.description?"border-red-500":"",rows:3}),c.description&&s.jsx("p",{className:"text-sm text-red-500",children:c.description})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"capacity",children:"Class Capacity *"}),s.jsx(Ie,{id:"capacity",type:"number",min:"1",max:"100",placeholder:"30",value:o.capacity,onChange:f=>p("capacity",parseInt(f.target.value)||0),className:c.capacity?"border-red-500":""}),c.capacity&&s.jsx("p",{className:"text-sm text-red-500",children:c.capacity})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ce,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:a?"Update Grade":"Create Grade"})]})]})]})})}var v1="Tabs",[bX,zse]=_a(v1,[r1]),CT=r1(),[wX,jS]=bX(v1),kT=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=s1(l),[h,p]=fo({prop:n,onChange:a,defaultProp:i??"",caller:v1});return s.jsx(wX,{scope:r,baseId:Pn(),value:h,onValueChange:p,orientation:o,dir:u,activationMode:c,children:s.jsx(Mt.div,{dir:u,"data-orientation":o,...d,ref:t})})});kT.displayName=v1;var PT="TabsList",AT=g.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=jS(PT,r),o=CT(r);return s.jsx(E8,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Mt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});AT.displayName=PT;var ET="TabsTrigger",LT=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=jS(ET,r),l=CT(r),c=IT(o.baseId,n),d=FT(o.baseId,n),u=n===o.value;return s.jsx(L8,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(Mt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:gt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:gt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:gt(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(n)})})})});LT.displayName=ET;var TT="TabsContent",RT=g.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=jS(TT,r),c=IT(l.baseId,n),d=FT(l.baseId,n),u=n===l.value,h=g.useRef(u);return g.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(Ga,{present:a||u,children:({present:p})=>s.jsx(Mt.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});RT.displayName=TT;function IT(e,t){return`${e}-trigger-${t}`}function FT(e,t){return`${e}-content-${t}`}var NX=kT,DT=AT,OT=LT,MT=RT;const $T=NX,bS=g.forwardRef(({className:e,...t},r)=>s.jsx(DT,{ref:r,className:it("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));bS.displayName=DT.displayName;const Hd=g.forwardRef(({className:e,...t},r)=>s.jsx(OT,{ref:r,className:it("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Hd.displayName=OT.displayName;const Wd=g.forwardRef(({className:e,...t},r)=>s.jsx(MT,{ref:r,className:it("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Wd.displayName=MT.displayName;function SX(){const e=er(),{students:t,loading:r,error:n}=Ct(Ce=>Ce.students),{grades:a,loading:i,error:o}=Ct(Ce=>Ce.grades),{schools:l}=Ct(Ce=>Ce.schools),{user:c}=Ct(Ce=>Ce.auth),[d,u]=g.useState(new Set),[h,p]=g.useState({key:null,direction:"asc"}),[f,y]=g.useState(!1),[x,w]=g.useState("all"),[v,b]=g.useState("all"),[N,C]=g.useState("students"),[P,D]=g.useState(!1),[R,A]=g.useState(!1),[I,O]=g.useState(!1),[F,E]=g.useState(!1),[$,U]=g.useState(!1),[K,re]=g.useState(!1),[pe,Q]=g.useState(!1),[J,q]=g.useState(null),[Y,k]=g.useState(null),[L,M]=g.useState(""),[W,se]=g.useState("all"),[ae,ge]=g.useState(""),[fe,Me]=g.useState(1),[de,$e]=g.useState(1),[Ye,mt]=g.useState(10),Se=g.useMemo(()=>{const Ce=localStorage.getItem("schoolId");if(Ce){const dt=parseInt(Ce);if(!isNaN(dt))return dt}if(l.length>0&&(c!=null&&c.id)){const dt=l.find(yt=>yt.admin===c.id);if(dt!=null&&dt.id)return localStorage.setItem("schoolId",dt.id.toString()),dt.id}},[l,c==null?void 0:c.id]);g.useEffect(()=>{e(jl()).catch(Ce=>{})},[e]),g.useEffect(()=>{Se&&(e(ai({schoolId:Se})),e(xa({schoolId:Se})),e(Fo({schoolId:Se})))},[e,Se]),g.useEffect(()=>{!J&&F&&E(!1)},[J,F]),g.useEffect(()=>{F&&(!J||!J.id)&&(E(!1),q(null))},[F,J]);const oe=g.useMemo(()=>{const Ce=(t||[]).filter(dt=>{var ln,fn,Ir,hr,sr,Br;const yt=(((ln=dt.first_name)==null?void 0:ln.toLowerCase())||"").includes(L.toLowerCase())||(((fn=dt.last_name)==null?void 0:fn.toLowerCase())||"").includes(L.toLowerCase())||(((Ir=dt.admission_number)==null?void 0:Ir.toLowerCase())||"").includes(L.toLowerCase())||(((hr=dt.section)==null?void 0:hr.toLowerCase())||"").includes(L.toLowerCase())||(((sr=dt.middle_name)==null?void 0:sr.toLowerCase())||"").includes(L.toLowerCase()),Xt=W==="all"||W==="active"&&dt.transport_enabled||W==="inactive"&&!dt.transport_enabled,tr=x==="all"||((Br=dt.grade)==null?void 0:Br.toString())===x,Vt=v==="all"||dt.gender===v;return yt&&Xt&&tr&&Vt});return h.key?[...Ce].sort((dt,yt)=>{const Xt=dt[h.key],tr=yt[h.key];if(Xt==null)return 1;if(tr==null)return-1;const Vt=Xt<tr?-1:Xt>tr?1:0;return h.direction==="desc"?-Vt:Vt}):Ce},[t,L,W,x,v,h]),vt=(Array.isArray(a)?a:[]).filter(Ce=>Ce.name.toLowerCase().includes(ae.toLowerCase())||Ce.level.toLowerCase().includes(ae.toLowerCase())||Ce.description.toLowerCase().includes(ae.toLowerCase())),me=Math.ceil(oe.length/Ye),xe=(fe-1)*Ye,ee=xe+Ye,ue=oe.slice(xe,ee),ve=Math.ceil(vt.length/Ye),qe=(de-1)*Ye,We=qe+Ye,ze=vt.slice(qe,We);g.useEffect(()=>{Me(1)},[L,W,x,v]),g.useEffect(()=>{$e(1)},[ae]);const rt=g.useCallback(Ce=>{p(dt=>({key:Ce,direction:dt.key===Ce&&dt.direction==="asc"?"desc":"asc"}))},[]),_t=g.useCallback(()=>{d.size===ue.length?u(new Set):u(new Set(ue.map(Ce=>Ce.id)))},[d.size,ue]),we=g.useCallback(Ce=>{u(dt=>{const yt=new Set(dt);return yt.has(Ce)?yt.delete(Ce):yt.add(Ce),yt})},[]),te=g.useCallback(async Ce=>{try{const dt=Array.from(d).map(yt=>(t==null?void 0:t.find(tr=>tr.id===yt))?e(Jm({id:yt,data:{transport_enabled:Ce}})).unwrap():Promise.resolve());await Promise.all(dt),Ss.success(`Successfully ${Ce?"activated":"deactivated"} transport for ${d.size} students`),u(new Set)}catch{Ss.error("Failed to update transport status for students")}},[d,t,e]),he=g.useCallback(async()=>{try{const Ce=Array.from(d).map(dt=>e(Zm(dt)).unwrap());await Promise.all(Ce),Ss.success(`Successfully deleted ${d.size} students`),u(new Set)}catch{Ss.error("Failed to delete some students")}},[d,e]),Ne=async Ce=>{try{await e(c0(Ce)).unwrap(),Ss.success("Student created successfully"),D(!1),q(null)}catch(dt){let yt="Failed to create student";if(dt instanceof Error)try{const Xt=JSON.parse(dt.message);typeof Xt=="object"&&Xt!==null?yt=JSON.stringify(Xt,null,2):yt=dt.message}catch{yt=dt.message}else yt=String(dt);Ss.error("Error",yt)}},Ve=async({id:Ce,data:dt})=>{try{await e(Jm({id:Ce,data:dt})).unwrap(),Ss.success("Student updated successfully"),A(!1),q(null)}catch(yt){let Xt="Failed to update student";if(yt instanceof Error)try{const tr=JSON.parse(yt.message);typeof tr=="object"&&tr!==null?Xt=JSON.stringify(tr,null,2):Xt=yt.message}catch{Xt=yt.message}else Xt=String(yt);Ss.error("Error",Xt)}},Ke=async()=>{if(!(J!=null&&J.id)){Ss.error("No student selected for deletion"),E(!1),q(null);return}try{await e(Zm(J.id)).unwrap(),Ss.success("Student deleted successfully"),E(!1),q(null)}catch(Ce){let dt="Failed to delete student";if(Ce instanceof Error)try{const yt=JSON.parse(Ce.message);typeof yt=="object"&&yt!==null?dt=JSON.stringify(yt,null,2):dt=Ce.message}catch{dt=Ce.message}else dt=String(Ce);Ss.error("Error",dt)}},lt=Ce=>{if(!Ce||!Ce.id){Ss.error("Invalid student data");return}q(Ce),A(!0)},tt=Ce=>{if(!Ce||!Ce.id){Ss.error("Invalid student data");return}q(Ce),O(!0)},pt=Ce=>{if(!Ce||!Ce.id){Ss.error("Invalid student data");return}q(Ce),E(!0)},Yt=Ce=>s.jsx(Pe,{variant:Ce?"default":"secondary",className:Ce?"bg-green-100 text-green-800 hover:bg-green-100":"bg-red-100 text-red-800 hover:bg-red-100",children:Ce?"Active":"Inactive"}),Dt=Ce=>{if(!Ce)return"N/A";const dt=a.find(yt=>yt.id===Number(Ce));return dt?dt.name:`Grade ${Ce}`},ks=async Ce=>{try{await e(m0(Ce)).unwrap(),Ss.success("Grade created successfully"),U(!1),Se&&e(Fo({schoolId:Se}))}catch(dt){Ss.error(dt)}},wt=async({id:Ce,data:dt})=>{try{await e(p0({id:Ce,data:dt})).unwrap(),Ss.success("Grade updated successfully"),re(!1),k(null),Se&&e(Fo({schoolId:Se}))}catch(yt){Ss.error(yt)}},ws=async()=>{if(Y!=null&&Y.id)try{await e(x0(Y.id)).unwrap(),Ss.success("Grade deleted successfully"),Q(!1),k(null)}catch(Ce){Ss.error(Ce)}},ts=Ce=>{k(Ce),re(!0)},qt=Ce=>{k(Ce),Q(!0)},kt=async Ce=>{Y!=null&&Y.id&&await wt({id:Y.id,data:Ce})};return!Se&&l.length===0?s.jsx("div",{className:"min-h-screen bg-background flex w-full",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-6 py-4 bg-background",children:s.jsx(Le,{children:s.jsx(Te,{className:"py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Initializing"}),s.jsx("p",{className:"text-muted-foreground",children:"Setting up your school dashboard..."})]})})})})})}):!Se&&l.length>0?s.jsx("div",{className:"min-h-screen bg-background flex w-full",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-6 py-4 bg-background",children:s.jsx(Le,{children:s.jsx(Te,{className:"py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"School Configuration Required"}),s.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:"We couldn't determine which school you're managing. Please contact your administrator to set up your school access."}),s.jsxs(ce,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Page"]})]})})})})})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-1 sm:px-2 py-1 w-full max-w-[98vw] mx-auto",children:s.jsxs(Le,{className:"shadow-lg border-0 rounded-xl",children:[s.jsx(Be,{className:"pb-1 border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs(Ue,{className:"text-xl font-bold text-foreground flex items-center gap-2",children:[s.jsx(ns,{className:"w-6 h-6 text-[#f7c624]"}),"Students List"]}),s.jsxs(ce,{onClick:()=>D(!0),className:"bg-[#f7c624] hover:bg-[#f7c624] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200 ml-auto",children:[s.jsx(ja,{className:"mr-2 h-4 w-4"})," Add Student"]})]})}),s.jsx(Te,{className:"pt-2",children:s.jsxs($T,{value:N,onValueChange:C,className:"w-full",children:[s.jsxs(bS,{className:"grid w-full grid-cols-2 mb-4",children:[s.jsxs(Hd,{value:"students",className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Students"]}),s.jsxs(Hd,{value:"grades",className:"flex items-center gap-2",children:[s.jsx(db,{className:"h-4 w-4"}),"Grades"]})]}),s.jsxs(Wd,{value:"students",className:"space-y-3",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(Ie,{placeholder:"Search students by name, admission number, section, or middle name...",value:L,onChange:Ce=>M(Ce.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>y(!f),className:"flex items-center gap-2",children:[s.jsx(Ul,{className:"h-4 w-4"}),"Filters"]}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>{Se&&(e(ai({schoolId:Se})),e(xa({schoolId:Se})),e(Fo({schoolId:Se})))},className:"flex items-center gap-2",children:[s.jsx(yv,{className:"h-4 w-4"}),"Refresh"]}),s.jsx(ku,{data:{headers:["Name","Admission Number","Grade","Section","Gender","Transport Status"],data:oe.map(Ce=>({name:`${Ce.first_name||""} ${Ce.middle_name||""} ${Ce.last_name||""}`,admission_number:Ce.admission_number||"",grade:Dt(Ce.grade),section:Ce.section||"",gender:Ce.gender||"",transport_status:Ce.transport_enabled?"Active":"Inactive"})),fileName:"students_export",title:"Students Directory"},className:"border-border hover:bg-accent px-3 py-2"})]})]}),f&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{className:"text-sm font-medium",children:"Status"}),s.jsxs(Gt,{value:W,onValueChange:se,children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Status"}),s.jsx(Ee,{value:"active",children:"Active Transport"}),s.jsx(Ee,{value:"inactive",children:"Inactive Transport"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{className:"text-sm font-medium",children:"Grade"}),s.jsxs(Gt,{value:x,onValueChange:w,children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Grades"}),a.map(Ce=>s.jsx(Ee,{value:Ce.id.toString(),children:Ce.name},Ce.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{className:"text-sm font-medium",children:"Gender"}),s.jsxs(Gt,{value:v,onValueChange:b,children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Genders"}),s.jsx(Ee,{value:"male",children:"Male"}),s.jsx(Ee,{value:"female",children:"Female"}),s.jsx(Ee,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{className:"text-sm font-medium",children:"Per Page"}),s.jsxs(Gt,{value:Ye.toString(),onValueChange:Ce=>{mt(Number(Ce)),Me(1)},children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"5",children:"5"}),s.jsx(Ee,{value:"10",children:"10"}),s.jsx(Ee,{value:"20",children:"20"}),s.jsx(Ee,{value:"50",children:"50"})]})]})]})]}),d.size>0&&s.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[d.size," student(s) selected"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>te(!0),className:"flex items-center gap-2 text-green-700 border-green-300 hover:bg-green-50",children:[s.jsx(eE,{className:"h-4 w-4"}),"Activate Transport"]}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>te(!1),className:"flex items-center gap-2 text-orange-700 border-orange-300 hover:bg-orange-50",children:[s.jsx(vq,{className:"h-4 w-4"}),"Deactivate Transport"]}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:he,className:"flex items-center gap-2 text-red-700 border-red-300 hover:bg-red-50",children:[s.jsx(Ha,{className:"h-4 w-4"}),"Delete Selected"]})]})]})]}),r&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ds,{className:"h-8 w-48"}),s.jsx(Ds,{className:"h-8 w-32"})]}),s.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((Ce,dt)=>s.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[s.jsx(Ds,{className:"h-4 w-4"}),s.jsx(Ds,{className:"h-10 w-10 rounded-full"}),s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx(Ds,{className:"h-4 w-32"}),s.jsx(Ds,{className:"h-3 w-24"})]}),s.jsx(Ds,{className:"h-4 w-20"}),s.jsx(Ds,{className:"h-4 w-16"}),s.jsx(Ds,{className:"h-4 w-12"}),s.jsx(Ds,{className:"h-8 w-8"})]},dt))})]}),n&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unable to Load Students"}),s.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:"We encountered an issue while loading your students. Please try again."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-red-600 bg-red-50 px-4 py-2 rounded-md max-w-md mx-auto",children:n}),s.jsxs(ce,{onClick:()=>Se&&e(ai({schoolId:Se})),variant:"outline",className:"mt-4",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})]}),!r&&!n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"sticky top-0 bg-white",children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("input",{type:"checkbox",checked:d.size===ue.length&&ue.length>0,onChange:_t,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"})})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>rt("first_name"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Student",h.key==="first_name"&&(h.direction==="asc"?s.jsx(bm,{className:"h-4 w-4"}):s.jsx(jm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>rt("admission_number"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Admission #",h.key==="admission_number"&&(h.direction==="asc"?s.jsx(bm,{className:"h-4 w-4"}):s.jsx(jm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>rt("grade"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Grade & Section",h.key==="grade"&&(h.direction==="asc"?s.jsx(bm,{className:"h-4 w-4"}):s.jsx(jm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>rt("gender"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Gender",h.key==="gender"&&(h.direction==="asc"?s.jsx(bm,{className:"h-4 w-4"}):s.jsx(jm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700 cursor-pointer hover:bg-gray-50",onClick:()=>rt("transport_enabled"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["Status",h.key==="transport_enabled"&&(h.direction==="asc"?s.jsx(bm,{className:"h-4 w-4"}):s.jsx(jm,{className:"h-4 w-4"}))]})}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:ue.map(Ce=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-2 px-3",children:s.jsx("input",{type:"checkbox",checked:d.has(Ce.id),onChange:()=>we(Ce.id),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"})}),s.jsx("td",{className:"py-2 px-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ns,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{className:"ml-2",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Ce.first_name||""," ",Ce.middle_name||""," ",Ce.last_name||""]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",Ce.id||"N/A"]})]})]})}),s.jsx("td",{className:"py-2 px-3",children:s.jsx("span",{className:"text-sm font-medium text-gray-900",children:Ce.admission_number||"N/A"})}),s.jsx("td",{className:"py-2 px-3",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:Dt(Ce.grade)}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Section ",Ce.section||"N/A"]})]})}),s.jsx("td",{className:"py-2 px-3",children:s.jsx("span",{className:"text-sm text-gray-900 capitalize",children:Ce.gender||"N/A"})}),s.jsx("td",{className:"py-2 px-3",children:Yt(Ce.transport_enabled)}),s.jsx("td",{className:"py-2 px-3 text-right",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",size:"sm",children:s.jsx(ho,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsxs(Jt,{onClick:()=>tt(Ce),children:[s.jsx(ir,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(Jt,{onClick:()=>lt(Ce),children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Student"]}),s.jsxs(Jt,{onClick:()=>pt(Ce),className:"text-red-600 focus:text-red-600",children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Delete Student"]})]})]})})]},Ce.id))})]}),ue.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(ns,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:L||W!=="all"?"No Students Found":"No Students Yet"}),s.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:L||W!=="all"?"No students match your current search or filter criteria. Try adjusting your search terms or filters.":"Get started by adding your first student to the system."}),!L&&W==="all"&&s.jsxs(ce,{onClick:()=>D(!0),className:"bg-green-600 hover:bg-green-700",children:[s.jsx(ja,{className:"h-4 w-4 mr-2"}),"Add Your First Student"]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 p-6 border-t border-gray-200 mt-0",children:[s.jsxs("div",{className:"text-sm text-gray-600 mb-2 sm:mb-0",children:["Showing ",xe+1,"-",Math.min(ee,oe.length)," of"," ",oe.length," students"]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center",children:[s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>Me(fe-1),disabled:fe===1,children:[s.jsx(qc,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:(()=>{const Ce=[];if(me<=5)for(let dt=1;dt<=me;dt++)Ce.push(dt);else fe<=3?Ce.push(1,2,3,4,"...",me):fe>=me-2?Ce.push(1,"...",me-3,me-2,me-1,me):Ce.push(1,"...",fe-1,fe,fe+1,"...",me);return Ce.map((dt,yt)=>dt==="..."?s.jsx("span",{className:"px-2",children:"..."},"ellipsis-"+yt):s.jsx(ce,{variant:fe===dt?"default":"outline",size:"sm",onClick:()=>Me(Number(dt)),className:"w-8 h-8 p-0",children:dt},dt))})()}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>Me(fe+1),disabled:fe===me,children:["Next",s.jsx(wl,{className:"h-4 w-4"})]}),s.jsxs("span",{className:"ml-4 text-xs text-gray-500 hidden sm:inline",children:["Page ",fe," of ",me]})]})]})]})]}),s.jsxs(Wd,{value:"grades",className:"space-y-3",children:[s.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ie,{placeholder:"Search grades by name, level, or description...",value:ae,onChange:Ce=>ge(Ce.target.value),className:"pl-10"})]})}),i&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Loading Grades"}),s.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch your grade data..."})]}),o&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unable to Load Grades"}),s.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:"We encountered an issue while loading your grades. Please try again."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-red-600 bg-red-50 px-4 py-2 rounded-md max-w-md mx-auto",children:o}),s.jsxs(ce,{onClick:()=>Se&&e(Fo({schoolId:Se})),variant:"outline",className:"mt-4",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})]}),!i&&!o&&s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"sticky top-0 bg-white",children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Grade"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Level"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Description"}),s.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Capacity"}),s.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:ze.map(Ce=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"py-2 px-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(db,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{className:"ml-2",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:Ce.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",Ce.id]})]})]})}),s.jsx("td",{className:"py-2 px-3",children:s.jsx(Pe,{variant:"outline",className:"text-xs",children:Ce.level})}),s.jsx("td",{className:"py-2 px-3",children:s.jsx("p",{className:"text-sm text-gray-900 max-w-xs truncate",children:Ce.description})}),s.jsx("td",{className:"py-2 px-3",children:s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Ce.capacity," students"]})}),s.jsx("td",{className:"py-2 px-3 text-right",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",size:"sm",children:s.jsx(ho,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsxs(Jt,{onClick:()=>ts(Ce),children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Grade"]}),s.jsxs(Jt,{onClick:()=>qt(Ce),className:"text-red-600 focus:text-red-600",children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Delete Grade"]})]})]})})]},Ce.id))})]}),ze.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(db,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ae?"No Grades Found":"No Grades Yet"}),s.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:ae?"No grades match your current search criteria. Try adjusting your search terms.":"Get started by adding your first grade to the system."}),!ae&&s.jsxs(ce,{onClick:()=>U(!0),className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(ja,{className:"h-4 w-4 mr-2"}),"Add Your First Grade"]})]}),ve>1&&s.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",qe+1,"-",Math.min(We,vt.length)," of"," ",vt.length," grades"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>$e(de-1),disabled:de===1,children:[s.jsx(qc,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:ve},(Ce,dt)=>dt+1).map(Ce=>s.jsx(ce,{variant:de===Ce?"default":"outline",size:"sm",onClick:()=>$e(Ce),className:"w-8 h-8 p-0",children:Ce},Ce))}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>$e(de+1),disabled:de===ve,children:["Next",s.jsx(wl,{className:"h-4 w-4"})]})]})]})]})]})]})})]})})}),s.jsx(vC,{isOpen:P,onClose:()=>D(!1),onSubmit:Ne,schoolId:Se,editMode:!1},"create"),s.jsx(vC,{isOpen:R,onClose:()=>{A(!1),q(null)},onSubmit:Ve,schoolId:Se,editMode:!0,student:J},(J==null?void 0:J.id)||"create"),s.jsx(jX,{isOpen:I,onClose:()=>{O(!1),q(null)},student:J}),J&&s.jsx(ad,{open:F,onOpenChange:E,children:s.jsxs(Ll,{children:[s.jsxs(Tl,{children:[s.jsx(Il,{children:"Are you sure?"}),s.jsxs(Fl,{children:['This action cannot be undone. This will permanently delete the student "',J.first_name||"Unknown"," ",J.last_name||"",'" and remove their data from our servers.']})]}),s.jsxs(Rl,{children:[s.jsx(Ol,{children:"Cancel"}),s.jsx(Dl,{onClick:Ke,className:"bg-red-600 hover:bg-red-700",disabled:!J.id,children:"Delete Student"})]})]})}),s.jsx(yC,{isOpen:$,onClose:()=>U(!1),onSubmit:ks,schoolId:Se,editMode:!1}),s.jsx(yC,{isOpen:K,onClose:()=>{re(!1),k(null)},onSubmit:kt,schoolId:Se,editMode:!0,grade:Y}),s.jsx(ad,{open:pe,onOpenChange:Q,children:s.jsxs(Ll,{children:[s.jsxs(Tl,{children:[s.jsx(Il,{children:"Are you sure?"}),s.jsxs(Fl,{children:['This action cannot be undone. This will permanently delete the grade "',(Y==null?void 0:Y.name)||"Unknown",'" and remove its data from our servers.']})]}),s.jsxs(Rl,{children:[s.jsx(Ol,{children:"Cancel"}),s.jsx(Dl,{onClick:ws,className:"bg-red-600 hover:bg-red-700",disabled:!(Y!=null&&Y.id),children:"Delete Grade"})]})]})})]})}function _X({isOpen:e,onClose:t,onSubmit:r}){var v,b,N,C,P,D;const n=zl(),{roles:a,loading:i}=ca(R=>R.roles),[o,l]=g.useState({employee_id:"",role:"",status:"active",user:{first_name:"",last_name:"",email:"",phone_number:"",password:"",confirm_password:""}}),[c,d]=g.useState({}),[u,h]=g.useState(!1),[p,f]=g.useState(!1);g.useEffect(()=>{e&&n(tu())},[e,n]);const y=()=>{const R={};return o.employee_id?/^EMP\d{3}$/.test(o.employee_id)||(R.employee_id="Employee ID must be in format EMP001"):R.employee_id="Employee ID is required",o.role||(R.role="Role is required"),o.user.phone_number?/^\+254\d{9}$/.test(o.user.phone_number)||(R.user={...R.user,phone_number:"Phone number must be in format +254XXXXXXXXX"}):R.user={...R.user,phone_number:"Phone number is required"},o.user.password?o.user.password.length<8&&(R.user={...R.user,password:"Password must be at least 8 characters long"}):R.user={...R.user,password:"Password is required"},o.user.password!==o.user.confirm_password&&(R.user={...R.user,confirm_password:"Passwords do not match"}),d(R),Object.keys(R).length===0},x=R=>{R.preventDefault(),y()&&(r({...o,role:parseInt(o.role),school:0}),t())},w=R=>{const{name:A,value:I}=R.target;if(A.startsWith("user.")){const O=A.split(".")[1];l(F=>({...F,user:{...F.user,[O]:I}}))}else l(O=>({...O,[A]:I}));if(A.includes(".")){const[O,F]=A.split(".");d(E=>({...E,[O]:{...E[O],[F]:void 0}}))}else d(O=>({...O,[A]:void 0}))};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Add New Staff Member"})}),s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"employee_id",children:"Employee ID"}),s.jsx(Ie,{id:"employee_id",name:"employee_id",value:o.employee_id,onChange:w,placeholder:"EMP001",required:!0,className:c.employee_id?"border-red-500":""}),c.employee_id&&s.jsx("p",{className:"text-sm text-red-500",children:c.employee_id})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"role",children:"Role"}),s.jsxs("select",{id:"role",name:"role",value:o.role,onChange:w,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[s.jsx("option",{value:"",children:"Select a role"}),i?s.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):Array.isArray(a)&&a.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]}),c.role&&s.jsx("p",{className:"text-sm text-red-500",children:c.role})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"first_name",children:"First Name"}),s.jsx(Ie,{id:"first_name",name:"user.first_name",value:o.user.first_name,onChange:w,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"last_name",children:"Last Name"}),s.jsx(Ie,{id:"last_name",name:"user.last_name",value:o.user.last_name,onChange:w,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"email",children:"Email Address"}),s.jsx(Ie,{id:"email",name:"user.email",type:"email",value:o.user.email,onChange:w,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"phone_number",children:"Phone Number"}),s.jsx(Ie,{id:"phone_number",name:"user.phone_number",value:o.user.phone_number,onChange:w,placeholder:"+254XXXXXXXXX",required:!0,className:(v=c.user)!=null&&v.phone_number?"border-red-500":""}),((b=c.user)==null?void 0:b.phone_number)&&s.jsx("p",{className:"text-sm text-red-500",children:c.user.phone_number})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"password",name:"user.password",type:u?"text":"password",value:o.user.password,onChange:w,required:!0,className:(N=c.user)!=null&&N.password?"border-red-500":""}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?s.jsx(Mo,{size:20}):s.jsx(ir,{size:20})})]}),((C=c.user)==null?void 0:C.password)&&s.jsx("p",{className:"text-sm text-red-500",children:c.user.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"confirm_password",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"confirm_password",name:"user.confirm_password",type:p?"text":"password",value:o.user.confirm_password,onChange:w,required:!0,className:(P=c.user)!=null&&P.confirm_password?"border-red-500":""}),s.jsx("button",{type:"button",onClick:()=>f(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:p?s.jsx(Mo,{size:20}):s.jsx(ir,{size:20})})]}),((D=c.user)==null?void 0:D.confirm_password)&&s.jsx("p",{className:"text-sm text-red-500",children:c.user.confirm_password})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ce,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white",children:"Add Staff"})]})]})]})})}const CX=["manage_staff","manage_students","manage_transport","manage_security","view_reports","manage_finance","manage_attendance","manage_timetable","manage_exams","manage_parents","manage_vehicles","manage_routes","manage_trips","manage_grades","manage_settings"];function kX({isOpen:e,onClose:t,schoolId:r,onSubmit:n}){const[a,i]=g.useState({name:"",description:"",school:r||1,permissions:[],is_system_role:!1,parent_role:void 0}),o=c=>{c.preventDefault(),n(a)},l=c=>{i(d=>({...d,permissions:d.permissions.includes(c)?d.permissions.filter(u=>u!==c):[...d.permissions,c]}))};return g.useEffect(()=>{r&&i(c=>({...c,school:r}))},[r]),s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Create New Role"})}),s.jsxs("form",{onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"name",children:"Role Name"}),s.jsx(Ie,{id:"name",value:a.name,onChange:c=>i(d=>({...d,name:c.target.value})),placeholder:"e.g., school_admin",required:!0})]}),s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"description",children:"Description"}),s.jsx(oa,{id:"description",value:a.description,onChange:c=>i(d=>({...d,description:c.target.value})),placeholder:"Enter role description",required:!0})]}),s.jsxs("div",{children:[s.jsx(ne,{children:"Permissions"}),s.jsx("div",{className:"grid grid-cols-2 gap-4 mt-2",children:CX.map(c=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vh,{id:c,checked:a.permissions.includes(c),onCheckedChange:()=>l(c)}),s.jsx("label",{htmlFor:c,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:c.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")})]},c))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vh,{id:"is_system_role",checked:a.is_system_role,onCheckedChange:c=>i(d=>({...d,is_system_role:c}))}),s.jsx("label",{htmlFor:"is_system_role",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"System Role"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ce,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white",children:"Create Role"})]})]})]})})}function PX(){var A;const e=er(),{staff:t,loading:r,error:n}=Ct(I=>I.staff),{roles:a}=Ct(I=>I.roles),{schools:i}=Ct(I=>I.schools),l=JSON.parse(localStorage.getItem("profile")||"{}"),[c,d]=g.useState(!1),[u,h]=g.useState(!1),[p,f]=g.useState("staff"),[y,x]=g.useState(null),[w,v]=g.useState(null);let b=(i==null?void 0:i.filter(I=>I.admin===(l==null?void 0:l.id)))||[];b.length===0&&i&&i.length>0&&(b=i.filter(I=>{var O;return((O=I.admin_details)==null?void 0:O.id)===(l==null?void 0:l.id)})||[],b.length===0&&(b=[i[0]]));const N=y||((A=b[0])==null?void 0:A.id);g.useEffect(()=>{N?(e(Fh({schoolId:N})),e(tu(N))):e(jl()).catch(I=>{})},[e,N]),g.useEffect(()=>{b.length>0&&!y&&x(b[0].id)},[b,y]);const C=async I=>{if(!N){Ss.error("Error","No school found for the current admin");return}try{const O=await e(Dh({...I,school:N}));if(Dh.fulfilled.match(O))Ss.success("Staff member added successfully"),d(!1);else if(Dh.rejected.match(O)){const F=typeof O.payload=="string"?O.payload:"Failed to add staff member";Ss.error("Error",F)}}catch(O){let F="Failed to add staff member";if(O instanceof Error)try{const E=JSON.parse(O.message);typeof E=="object"&&E!==null?F=JSON.stringify(E,null,2):F=O.message}catch{F=O.message}else F=String(O);Ss.error("Error",F)}},P=async I=>{if(!N){`${l==null?void 0:l.id}${JSON.stringify(i)}`,Ss.error("Error","No school found for the current admin. Please check your account setup.");return}try{const O=await e(Oh({...I,school:N}));if(Oh.fulfilled.match(O))Ss.success("Role created successfully"),h(!1),e(tu(N));else if(Oh.rejected.match(O)){const F=typeof O.payload=="string"?O.payload:"Failed to create role";Ss.error("Error",F)}}catch{Ss.error("Error","Failed to create role")}},D=async()=>{if(!N){`${l==null?void 0:l.id}${JSON.stringify(i)}`,Ss.error("Error","No school found for the current admin. Please check your account setup.");return}try{const I=await e(Mh(N));if(Mh.fulfilled.match(I))Ss.success("Default roles created successfully"),e(tu(N));else if(Mh.rejected.match(I)){const O=typeof I.payload=="string"?I.payload:"Failed to create default roles";Ss.error("Error",O)}}catch{Ss.error("Error","Failed to create default roles")}},R=I=>{const O=a==null?void 0:a.find(F=>F.id===I);return O?O.name:"Unknown Role"};if(w)return s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-8 max-w-md text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-4",children:w}),s.jsx("button",{onClick:()=>{v(null),window.location.reload()},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded",children:"Refresh Page"})]})});try{return s.jsxs("div",{className:"min-h-screen bg-gray-100 flex w-full",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-8 py-6 bg-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ns,{className:"text-[#f7c624]",size:32}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Staff Management"}),!1]}),i&&i.length>1&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select School:"}),s.jsx("select",{value:y||N||"",onChange:I=>{const O=parseInt(I.target.value);x(O)},className:"border border-gray-300 rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:i.map(I=>s.jsx("option",{value:I.id,children:I.name},I.id))})]}),s.jsxs("div",{className:"flex gap-4",children:[p==="staff"&&s.jsx("button",{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white font-semibold px-5 py-2 rounded shadow",onClick:()=>d(!0),children:"Add New Staff"}),p==="roles"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:"bg-[#10213f] hover:bg-[#10213f] text-white font-semibold px-5 py-2 rounded shadow flex items-center gap-2",onClick:D,children:[s.jsx(wn,{size:20}),"Create Default Roles"]}),s.jsxs("button",{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white font-semibold px-5 py-2 rounded shadow flex items-center gap-2",onClick:()=>h(!0),children:[s.jsx(wn,{size:20}),"Create Custom Role"]})]})]})]}),s.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[s.jsx("button",{onClick:()=>f("staff"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${p==="staff"?"border-[#f7c624] text-[#f7c624]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex text-[#f7c624] items-center gap-2",children:[s.jsx(ns,{size:20}),"Staff Members (",(t==null?void 0:t.length)||0,")"]})}),s.jsx("button",{onClick:()=>f("roles"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${p==="roles"?"border-[#f7c624] text-[#f7c624]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wn,{size:20}),"Roles (",(a==null?void 0:a.length)||0,")"]})})]}),r&&s.jsx("div",{className:"text-center py-4",children:"Loading..."}),n&&s.jsx("div",{className:"text-red-500 text-center py-4",children:n}),p==="staff"&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-0 overflow-x-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Staff Members"})}),!t||t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ns,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No staff members"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first staff member."}),s.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded shadow",onClick:()=>d(!0),children:"Add New Staff"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"First Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone Number"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email Address"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:t==null?void 0:t.map(I=>{var O,F,E,$;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((O=I.user)==null?void 0:O.first_name)||"N/A"}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((F=I.user)==null?void 0:F.last_name)||"N/A"}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:((E=I.user)==null?void 0:E.phone_number)||"N/A"}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:(($=I.user)==null?void 0:$.email)||"N/A"}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:R(I.role)}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${I.status==="active"?"bg-green-100 text-green-600":"bg-red-100 text-red-500"}`,children:I.status||"Unknown"})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:s.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:s.jsx(xv,{size:20})})})]},I.employee_id)})})]}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t bg-gray-50 text-sm text-gray-600",children:[s.jsxs("span",{children:["Showing 1-",(t==null?void 0:t.length)||0," of ",(t==null?void 0:t.length)||0]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-1 rounded hover:bg-gray-200",disabled:!0,children:s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{className:"p-1 rounded hover:bg-gray-200",children:s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]}),p==="roles"&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-0 overflow-x-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Available Roles"})}),!a||a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(wn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No roles available"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Create default roles or add custom roles to get started."}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-4 py-2 rounded shadow flex items-center gap-2",onClick:D,children:[s.jsx(wn,{size:16}),"Create Default Roles"]}),s.jsxs("button",{className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded shadow flex items-center gap-2",onClick:()=>h(!0),children:[s.jsx(wn,{size:16}),"Create Custom Role"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Permissions"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:a==null?void 0:a.map(I=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("div",{className:"font-medium text-gray-900",children:I.name||"Unnamed Role"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm text-gray-600 max-w-xs",children:I.description||"No description available"})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${I.is_system_role?"bg-purple-100 text-purple-600":"bg-blue-100 text-blue-600"}`,children:I.is_system_role?"System":"Custom"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.permissions&&I.permissions.slice(0,3).map(O=>s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:O.replace("_"," ")},O)),I.permissions&&I.permissions.length>3&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",I.permissions.length-3," more"]})]})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:s.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:s.jsx(xv,{size:20})})})]},I.id))})]}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t bg-gray-50 text-sm text-gray-600",children:[s.jsxs("span",{children:["Showing 1-",(a==null?void 0:a.length)||0," of ",(a==null?void 0:a.length)||0]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-1 rounded hover:bg-gray-200",disabled:!0,children:s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{className:"p-1 rounded hover:bg-gray-200",children:s.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]})]})}),s.jsx(_X,{isOpen:c,onClose:()=>d(!1),onSubmit:C}),s.jsx(kX,{isOpen:u,onClose:()=>h(!1),schoolId:N,onSubmit:P})]})}catch(I){return v(I instanceof Error?I.message:"An unexpected error occurred"),null}}function AX({parent:e,isOpen:t,onClose:r}){var a,i,o,l,c,d;if(!e)return null;const n=u=>({email:"bg-blue-100 text-blue-800",phone:"bg-green-100 text-green-800",sms:"bg-purple-100 text-purple-800"})[u]||"bg-gray-100 text-gray-800";return s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsxs(xs,{className:"flex items-center gap-2",children:[s.jsx(ia,{className:"h-5 w-5 text-green-600"}),"Parent Details"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"First Name"}),s.jsx("p",{className:"mt-1 text-gray-900",children:((a=e.user_data)==null?void 0:a.first_name)||((i=e.user_full_name)==null?void 0:i.split(" ")[0])||"-"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Last Name"}),s.jsx("p",{className:"mt-1 text-gray-900",children:((o=e.user_data)==null?void 0:o.last_name)||((l=e.user_full_name)==null?void 0:l.split(" ").slice(1).join(" "))||"-"})]})]})]}),s.jsx(nu,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(Va,{className:"h-4 w-4"}),"Contact Information"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(ne,{className:"text-sm font-medium text-gray-600 flex items-center gap-1",children:[s.jsx(va,{className:"h-3 w-3"}),"Email Address"]}),s.jsx("p",{className:"mt-1 text-gray-900",children:((c=e.user_data)==null?void 0:c.email)||e.user_email||"-"})]}),s.jsxs("div",{children:[s.jsxs(ne,{className:"text-sm font-medium text-gray-600 flex items-center gap-1",children:[s.jsx(Va,{className:"h-3 w-3"}),"Phone Number"]}),s.jsx("p",{className:"mt-1 text-gray-900",children:((d=e.user_data)==null?void 0:d.phone_number)||e.phone_number||"-"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Secondary Phone"}),s.jsx("p",{className:"mt-1 text-gray-900",children:e.secondary_phone||"-"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Emergency Contact"}),s.jsx("p",{className:"mt-1 text-gray-900",children:e.emergency_contact||"-"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Preferred Contact Method"}),s.jsx("div",{className:"mt-1",children:s.jsx(Pe,{className:n(e.preferred_contact_method||"email"),children:e.preferred_contact_method||"email"})})]})]}),s.jsx(nu,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(pr,{className:"h-4 w-4"}),"Address"]}),s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Home Address"}),s.jsx("p",{className:"mt-1 text-gray-900",children:e.address||"-"})]})]}),s.jsx(nu,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Authorized Pickup Persons"]}),(()=>{var h;const u=(h=e.authorized_pickup_persons)==null?void 0:h.persons;return u&&Array.isArray(u)&&u.length>0?s.jsx("div",{className:"space-y-3",children:u.map((p,f)=>s.jsx("div",{className:"p-3 border rounded-lg bg-gray-50",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Name"}),s.jsx("p",{className:"mt-1 text-gray-900",children:p.name||"-"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Relation"}),s.jsx("p",{className:"mt-1 text-gray-900",children:p.relation||"-"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Phone"}),s.jsx("p",{className:"mt-1 text-gray-900",children:p.phone||"-"})]})]})},f))}):s.jsx("p",{className:"text-gray-500 italic",children:"No authorized pickup persons listed"})})()]})]})]})})}function EX({parent:e,isOpen:t,onClose:r,onSave:n}){var w,v,b,N;const[a,i]=g.useState({}),[o,l]=g.useState([]),[c,d]=g.useState(!1);g.useEffect(()=>{var C,P,D,R,A,I,O,F,E;if(e){i({address:e.address||"",emergency_contact:e.emergency_contact||"",preferred_contact_method:e.preferred_contact_method||"email",secondary_phone:e.secondary_phone||"",user_data:{first_name:((C=e.user_data)==null?void 0:C.first_name)||((P=e.user_full_name)==null?void 0:P.split(" ")[0])||"",last_name:((D=e.user_data)==null?void 0:D.last_name)||((R=e.user_full_name)==null?void 0:R.split(" ").slice(1).join(" "))||"",email:((A=e.user_data)==null?void 0:A.email)||e.user_email||"",phone_number:((I=e.user_data)==null?void 0:I.phone_number)||e.phone_number||"",user_type:((O=e.user_data)==null?void 0:O.user_type)||"parent",profile_image:((F=e.user_data)==null?void 0:F.profile_image)||null},authorized_pickup_persons:e.authorized_pickup_persons||{persons:[]}});const $=(E=e.authorized_pickup_persons)==null?void 0:E.persons;$&&Array.isArray($)?l($):l([])}},[e]);const u=C=>{const{name:P,value:D}=C.target;if(P.startsWith("user_data.")){const R=P.split(".")[1];i(A=>({...A,user_data:{...A.user_data,[R]:D}}))}else i(R=>({...R,[P]:D}))},h=(C,P)=>{i(D=>({...D,[C]:P}))},p=()=>{l([...o,{name:"",relation:"",phone:""}])},f=C=>{l(o.filter((P,D)=>D!==C))},y=(C,P,D)=>{const R=[...o];R[C]={...R[C],[P]:D},l(R),i(A=>({...A,authorized_pickup_persons:{persons:R}}))},x=async C=>{if(C.preventDefault(),!!(e!=null&&e.id)){d(!0);try{await n(e.id,a),r()}catch{}finally{d(!1)}}};return e?s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(ps,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Edit Parent"})}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.first_name",children:"First Name"}),s.jsx(Ie,{id:"user_data.first_name",name:"user_data.first_name",value:((w=a.user_data)==null?void 0:w.first_name)||"",onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.last_name",children:"Last Name"}),s.jsx(Ie,{id:"user_data.last_name",name:"user_data.last_name",value:((v=a.user_data)==null?void 0:v.last_name)||"",onChange:u,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.email",children:"Email"}),s.jsx(Ie,{id:"user_data.email",name:"user_data.email",type:"email",value:((b=a.user_data)==null?void 0:b.email)||"",onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.phone_number",children:"Phone Number"}),s.jsx(Ie,{id:"user_data.phone_number",name:"user_data.phone_number",value:((N=a.user_data)==null?void 0:N.phone_number)||"",onChange:u,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"address",children:"Address"}),s.jsx(oa,{id:"address",name:"address",value:a.address||"",onChange:u,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"emergency_contact",children:"Emergency Contact"}),s.jsx(Ie,{id:"emergency_contact",name:"emergency_contact",value:a.emergency_contact||"",onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"secondary_phone",children:"Secondary Phone"}),s.jsx(Ie,{id:"secondary_phone",name:"secondary_phone",value:a.secondary_phone||"",onChange:u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"preferred_contact_method",children:"Preferred Contact Method"}),s.jsxs(Gt,{value:a.preferred_contact_method||"email",onValueChange:C=>h("preferred_contact_method",C),children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select contact method"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"email",children:"Email"}),s.jsx(Ee,{value:"phone",children:"Phone"}),s.jsx(Ee,{value:"sms",children:"SMS"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(ne,{children:"Authorized Pickup Persons"}),s.jsxs(ce,{type:"button",variant:"outline",onClick:p,className:"text-sm",children:[s.jsx(ja,{className:"h-4 w-4 mr-2"})," Add Person"]})]}),Array.isArray(o)&&o.map((C,P)=>s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Name"}),s.jsx(Ie,{value:C.name,onChange:D=>y(P,"name",D.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Relation"}),s.jsx(Ie,{value:C.relation,onChange:D=>y(P,"relation",D.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Phone"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{value:C.phone,onChange:D=>y(P,"phone",D.target.value),required:!0}),P>0&&s.jsx(ce,{type:"button",variant:"destructive",onClick:()=>f(P),className:"px-2",children:""})]})]})]},P))]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:r,disabled:c,children:"Cancel"}),s.jsx(ce,{type:"submit",className:"bg-green-500 hover:bg-green-600",disabled:c,children:c?"Saving...":"Save Changes"})]})]})]})}):null}var wS="Progress",NS=100,[LX,Use]=_a(wS),[TX,RX]=LX(wS),BT=g.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=IX,...o}=e;(a||a===0)&&!jC(a)&&console.error(FX(`${a}`,"Progress"));const l=jC(a)?a:NS;n!==null&&!bC(n,l)&&console.error(DX(`${n}`,"Progress"));const c=bC(n,l)?n:null,d=Bv(c)?i(c,l):void 0;return s.jsx(TX,{scope:r,value:c,max:l,children:s.jsx(Mt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Bv(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":qT(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});BT.displayName=wS;var zT="ProgressIndicator",UT=g.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=RX(zT,r);return s.jsx(Mt.div,{"data-state":qT(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});UT.displayName=zT;function IX(e,t){return`${Math.round(e/t*100)}%`}function qT(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Bv(e){return typeof e=="number"}function jC(e){return Bv(e)&&!isNaN(e)&&e>0}function bC(e,t){return Bv(e)&&!isNaN(e)&&e<=t&&e>=0}function FX(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${NS}\`.`}function DX(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${NS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var VT=BT,OX=UT;const Ew=g.forwardRef(({className:e,value:t,...r},n)=>s.jsx(VT,{ref:n,className:it("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(OX,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ew.displayName=VT.displayName;const HT=async(e,t)=>{var r;try{const n=zX(),a=new FormData;a.append("file",e),a.append("upload_type",t);let i=localStorage.getItem("schoolId");if(!i){const d=localStorage.getItem("persist:auth");if(d)try{const u=JSON.parse(d),h=JSON.parse(u.user||"{}");i=h.school_id||h.school}catch{}}i&&a.append("school_id",i);let o=localStorage.getItem("token");if(!o){const d=localStorage.getItem("persist:auth");if(d)try{const u=JSON.parse(d);o=JSON.parse(u.user||"{}").token}catch{}}o&&(o.startsWith('"')&&o.endsWith('"')&&(o=JSON.parse(o)),$t.defaults.headers.common.Authorization=`Bearer ${o}`);const l={headers:{...o?{Authorization:`Bearer ${o}`}:{},"Content-Type":"multipart/form-data"}},c=await $t.post(It.CSV_UPLOAD,a,l);return{success:!0,message:c.data.message,created_count:c.data.created_count,skipped_count:c.data.skipped_count,errors:c.data.errors||[],created_users:c.data.created_users||[]}}catch(n){return(r=n.response)!=null&&r.data?{success:!1,message:n.response.data.message||n.response.data.detail||"Upload failed",created_count:0,skipped_count:0,errors:n.response.data.errors||[],created_users:[]}:{success:!1,message:n.message||"Upload failed",created_count:0,skipped_count:0,errors:[],created_users:[]}}},MX=()=>{const e=["first_name","school_id","last_name","phone_number","email","address","emergency_contact","secondary_phone","preferred_contact_method","authorized_pickup_persons"];let t=localStorage.getItem("schoolId");if(!t){const a=localStorage.getItem("persist:auth");if(a)try{const i=JSON.parse(a),o=JSON.parse(i.user||"{}");t=o.school_id||o.school}catch{}}const r=["John",t||"2","Doe","+254712345678","john.doe@email.com","123 Main St, Nairobi","Jane Doe (+254723456789)","+254734567890","phone","Jane Doe (Spouse, +254723456789); Mike Smith (Friend, +254745678901)"];return[e.join(","),r.join(","),`Mary,${t||"2"},Smith,+254723456789,mary.smith@email.com,456 Oak Ave,Tom Smith (+254734567890),+254745678901,email,Tom Smith (Spouse, +254734567890)`].join(`
`)},$X=()=>{const e=["first_name","school_id","last_name","phone_number","email","license_number","license_expiry","license_class","is_assistant_driver","last_health_check","last_background_check"];let t=localStorage.getItem("schoolId");if(!t){const a=localStorage.getItem("persist:auth");if(a)try{const i=JSON.parse(a),o=JSON.parse(i.user||"{}");t=o.school_id||o.school}catch{}}const r=["Peter",t||"2","Gachau","+254712345678","peter.gachau@email.com","DL123456789","2025-12-31","B","false","2024-01-15","2024-01-10"];return[e.join(","),r.join(","),`Jane,${t||"2"},Mwangi,+254723456789,jane.mwangi@email.com,DL987654321,2025-06-30,A,true,2024-01-20,2024-01-15`].join(`
`)},BX=e=>{let t="",r="";switch(e){case"parents":t=MX(),r="parents_template.csv";break;case"drivers":t=$X(),r="drivers_template.csv";break;default:t=`first_name,last_name,phone_number
John,Doe,+254700000000`,r=`${e}_template.csv`}const n=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a)},zX=()=>{const e=localStorage.getItem("schoolId"),t=localStorage.getItem("schoolName"),r=[];for(let n=0;n<localStorage.length;n++){const a=localStorage.key(n);a&&a.toLowerCase().includes("school")&&r.push({key:a,value:localStorage.getItem(a)})}return{id:e,name:t||void 0}},WT=({isOpen:e,onClose:t,title:r,description:n,acceptedFileTypes:a,maxFileSize:i=10,maxFiles:o=5,onUpload:l,onPreview:c,templateDownloadUrl:d,templateFileName:u,validationSchema:h,previewColumns:p,uploadType:f})=>{const[y,x]=g.useState([]),[w,v]=g.useState(!1),[b,N]=g.useState(!1),[C,P]=g.useState([]),[D,R]=g.useState(!1),[A,I]=g.useState(0),[O,F]=g.useState({total:0,completed:0,failed:0,errors:[]}),[E,$]=g.useState(!1),[U,K]=g.useState(new Set),re=g.useRef(null),pe=we=>{we.preventDefault(),v(!0)},Q=we=>{we.preventDefault(),v(!1)},J=we=>{we.preventDefault(),v(!1);const te=Array.from(we.dataTransfer.files);Y(te)},q=we=>{const te=Array.from(we.target.files||[]);Y(te)},Y=async we=>{if(!E){$(!0);try{const te=we.filter(he=>{const Ne=he.name.toLowerCase().substring(he.name.lastIndexOf("."));return a.some(lt=>lt.startsWith(".")?Ne===lt.toLowerCase():he.type===lt)?he.size<=i*1024*1024?!0:(Fs({title:"File too large",description:`${he.name} exceeds the maximum file size of ${i}MB.`,variant:"destructive"}),!1):(Fs({title:"Invalid file type",description:`${he.name} is not a supported file type. Supported types: ${a.join(", ")}`,variant:"destructive"}),!1)});if(te.length===0){$(!1);return}if(y.length+te.length>o){Fs({title:"Too many files",description:`You can only upload up to ${o} files at once.`,variant:"destructive"}),$(!1);return}for(const he of te){const Ne=Math.random().toString(36).substr(2,9),Ve={id:Ne,name:he.name,size:he.size,type:he.type,status:"uploading",progress:0};x(Ke=>[...Ke,Ve]),await k(he,Ne)}}finally{$(!1)}}},k=async(we,te)=>{if(!U.has(te)){K(he=>new Set(he).add(te));try{x(Ne=>Ne.map(Ve=>Ve.id===te?{...Ve,status:"processing"}:Ve)),x(Ne=>Ne.map(Ve=>Ve.id===te?{...Ve,progress:50}:Ve));let he=[];if(we.type==="text/csv"?he=await M(we):we.type.includes("pdf")?he=await se(we):we.type.includes("word")||we.type.includes("document")?he=await Se(we):we.type==="text/html"&&(he=await vt(we)),h){const Ne=xe(he,h);if(!Ne.isValid)throw new Error(Ne.errors.join(", "))}x(Ne=>Ne.map(Ve=>Ve.id===te?{...Ve,status:"completed",progress:100,preview:he}:Ve)),K(Ne=>{const Ve=new Set(Ne);return Ve.delete(te),Ve}),Fs({title:"File processed successfully",description:`${we.name} has been processed and is ready for upload.`})}catch(he){x(Ne=>Ne.map(Ve=>Ve.id===te?{...Ve,status:"error",error:he.message}:Ve)),K(Ne=>{const Ve=new Set(Ne);return Ve.delete(te),Ve}),Fs({title:"Processing failed",description:`Failed to process ${we.name}: ${he.message}`,variant:"destructive"})}}},L=we=>{const te=[];return!we||we.length===0?(te.push("No data found in file"),{isValid:!1,errors:te}):(we.length>0,we.forEach((he,Ne)=>{const Ve=Ne+1,Ke=he.name||he.Name||he["Full Name"]||he.full_name||he.Full_Name||he.Parent||he.parent||he["Parent Name"]||he.parent_name||he.Parent_Name||he.first_name||he["First Name"]||he.First_Name||he.firstName||he.FullName||he.Full_Name||he.ParentName||he.Parent_Name,lt=he.phone_number||he["Phone Number"]||he.Phone_Number||he.phone_number||he.phone||he.Phone||he.phone||he.mobile||he.Mobile||he.mobile||he["Mobile Number"]||he.mobile_number||he.Mobile_Number||he.phoneNumber||he.contact||he.Contact||he.contact||he.tel||he.Tel||he.tel||he.PhoneNumber||he.Phone_Number||he.MobileNumber||he.Mobile_Number||he.ContactNumber||he.Contact_Number||Object.values(he).find(pt=>!pt||typeof pt!="string"?!1:/^(\+?254|0)?[17]\d{8}$/.test(pt.replace(/\s+/g,"")));he.license_number||he["License Number"]||he.License_Number||he.licenseNumber||he.LicenseNumber,he.license_class||he["License Class"]||he.License_Class||he.licenseClass||he.LicenseClass,he.license_expiry||he["License Expiry"]||he.License_Expiry||he.licenseExpiry||he.LicenseExpiry,he.last_health_check||he["Last Health Check"]||he.Last_Health_Check||he.lastHealthCheck||he.LastHealthCheck,he.last_background_check||he["Last Background Check"]||he.Last_Background_Check||he.lastBackgroundCheck||he.LastBackgroundCheck,Object.values(he).some(pt=>pt&&String(pt).trim())&&(Ke||te.push(`Row ${Ve}: Name is required`),lt||te.push(`Row ${Ve}: Phone number is required`))}),{isValid:te.length===0,errors:te})},M=async we=>new Promise((te,he)=>{const Ne=new FileReader;Ne.onload=Ve=>{var Ke;try{const tt=((Ke=Ve.target)==null?void 0:Ke.result).split(`
`),pt=tt[0],Yt=W(pt).map(ws=>ws.trim()),ks=tt.slice(1).map((ws,ts)=>{const qt=W(ws),kt={};return Yt.forEach((Ce,dt)=>{const yt=(qt[dt]||"").replace(/^["']|["']$/g,"").trim();kt[Ce]=yt}),kt}).filter(ws=>Object.values(ws).some(ts=>ts)),wt=L(ks);if(!wt.isValid){he(new Error(`File validation failed: ${wt.errors.join(", ")}`));return}te(ks)}catch{he(new Error("Failed to parse CSV file"))}},Ne.onerror=()=>he(new Error("Failed to read file")),Ne.readAsText(we)}),W=we=>{const te=[];let he="",Ne=!1,Ve=0;for(;Ve<we.length;){const Ke=we[Ve];Ke==='"'?Ne&&we[Ve+1]==='"'?(he+='"',Ve+=2):(Ne=!Ne,Ve++):Ke===","&&!Ne?(te.push(he),he="",Ve++):(he+=Ke,Ve++)}return te.push(he),te},se=async we=>new Promise((te,he)=>{const Ne=new FileReader;Ne.onload=async Ve=>{var Ke;try{const lt=(Ke=Ve.target)==null?void 0:Ke.result,tt=await ae(lt),pt=ge(tt),Yt=L(pt);if(!Yt.isValid){he(new Error(`File validation failed: ${Yt.errors.join(", ")}`));return}te(pt)}catch{he(new Error("Failed to parse PDF file"))}},Ne.onerror=()=>he(new Error("Failed to read file")),Ne.readAsArrayBuffer(we)}),ae=async we=>{try{const te=new Uint8Array(we),Ne=new TextDecoder("utf-8").decode(te),Ke=Ne.split(`
`).filter(lt=>lt.trim()).filter(lt=>lt.includes(",")&&(lt.includes("@")||lt.includes("+254")||lt.includes("07")));return Ke.length>0?Ke.join(`
`):Ne}catch{throw new Error("Failed to extract text from PDF")}},ge=we=>{try{const te=we.split(`
`).filter(he=>he.trim());return te.length>0&&te[0].includes(",")?fe(te):te.length>0&&te[0].includes("	")?Me(te):de(te)}catch{return[]}},fe=we=>{const te=Ye(we,",");if(te===-1)return[];const he=we[te].split(",").map(Ve=>Ve.trim());return we.slice(te+1).map(Ve=>{const Ke=Ve.split(",").map(tt=>tt.trim()),lt={};return he.forEach((tt,pt)=>{lt[tt]=Ke[pt]||""}),lt}).filter(Ve=>Object.values(Ve).some(Ke=>Ke))},Me=we=>{const te=Ye(we,"	");if(te===-1)return[];const he=we[te].split("	").map(Ve=>Ve.trim());return we.slice(te+1).map(Ve=>{const Ke=Ve.split("	").map(tt=>tt.trim()),lt={};return he.forEach((tt,pt)=>{lt[tt]=Ke[pt]||""}),lt}).filter(Ve=>Object.values(Ve).some(Ke=>Ke))},de=we=>{const te=$e(we);let he=we;te!==-1&&(he=we.slice(te+1));const Ne=[];for(const Ve of he)if(Ve.trim()){const Ke=mt(Ve);Ke&&Ne.push(Ke)}return Ne},$e=we=>{const te=["name","full","parent","first","last"],he=["phone","mobile","contact","number","tel"],Ne=["email","mail"],Ve=["address","location","place"];for(let Ke=0;Ke<Math.min(10,we.length);Ke++){const lt=we[Ke].toLowerCase(),tt=te.some(wt=>lt.includes(wt)),pt=he.some(wt=>lt.includes(wt)),Yt=Ne.some(wt=>lt.includes(wt)),Dt=Ve.some(wt=>lt.includes(wt));if([tt,pt,Yt,Dt].filter(Boolean).length>=2)return Ke}return-1},Ye=(we,te)=>{const he=["name","full","parent","first","last"],Ne=["phone","mobile","contact","number","tel"],Ve=["email","mail"],Ke=["address","location","place"];for(let lt=0;lt<Math.min(5,we.length);lt++){const pt=we[lt].toLowerCase().split(te).map(ts=>ts.trim()),Yt=pt.some(ts=>he.some(qt=>ts.includes(qt))),Dt=pt.some(ts=>Ne.some(qt=>ts.includes(qt))),ks=pt.some(ts=>Ve.some(qt=>ts.includes(qt))),wt=pt.some(ts=>Ke.some(qt=>ts.includes(qt)));if([Yt,Dt,ks,wt].filter(Boolean).length>=2)return lt}return-1},mt=we=>{try{const te=we.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/),he=te?te[0]:"",Ne=we.match(/(\+254|0|254)?[17]\d{8}/),Ve=Ne?Ne[0]:"";let Ke="";const lt=he?we.split(he)[0].trim():we,tt=Ve?we.split(Ve)[0].trim():we;if(Ke=(lt.length>tt.length?lt:tt).replace(/[^\w\s\-\.]/g," ").trim(),!Ke){const ks=we.match(/^([^@\d]+)/);Ke=ks?ks[1].trim():""}let Yt="";const Dt=we.match(/(Nairobi|Kenya|Address:?\s*)([^,]+)/i);if(Dt)Yt=Dt[2].trim();else{const ks=he&&we.split(he)[1]||"",wt=Ve&&we.split(Ve)[1]||"";Yt=(ks.length>wt.length?ks:wt).replace(/[^\w\s,\.\-]/g," ").trim()}return Ke||he||Ve?{name:Ke,email:he,phone:Ve,address:Yt,"Phone Number":Ve,Email:he,Address:Yt}:null}catch{return null}},Se=async we=>new Promise((te,he)=>{const Ne=new FileReader;Ne.onload=async Ve=>{var Ke;try{const lt=(Ke=Ve.target)==null?void 0:Ke.result,tt=await oe(lt),pt=ge(tt),Yt=L(pt);if(!Yt.isValid){he(new Error(`File validation failed: ${Yt.errors.join(", ")}`));return}te(pt)}catch{he(new Error("Failed to parse Word document"))}},Ne.onerror=()=>he(new Error("Failed to read file")),Ne.readAsArrayBuffer(we)}),oe=async we=>{try{const te=new Uint8Array(we);let he="";try{he=new TextDecoder("utf-8").decode(te)}catch{}if(!he||he.length<100)try{he=new TextDecoder("latin1").decode(te)}catch{}(!he||he.length<100)&&(he=(Array.from(te).map(tt=>tt>=32&&tt<=126?String.fromCharCode(tt):" ").join("").match(/[a-zA-Z0-9\s@.,+\-()]+/g)||[]).join(`
`));const Ne=he.split(`
`).filter(Ke=>Ke.trim());if(Ne.length===0)throw new Error("No readable content found in Word document");const Ve=Ne.filter(Ke=>Ke.includes(",")&&(Ke.includes("@")||Ke.includes("+254")||Ke.includes("07")));return Ve.length>0?Ve.join(`
`):he}catch{throw new Error("Failed to extract text from Word document")}},vt=async we=>new Promise((te,he)=>{const Ne=new FileReader;Ne.onload=async Ve=>{var Ke;try{const lt=(Ke=Ve.target)==null?void 0:Ke.result,tt=me(lt),pt=L(tt);if(!pt.isValid){he(new Error(`File validation failed: ${pt.errors.join(", ")}`));return}te(tt)}catch{he(new Error("Failed to parse HTML file"))}},Ne.onerror=()=>he(new Error("Failed to read file")),Ne.readAsText(we)}),me=we=>{try{const te=we.match(/<table[^>]*>([\s\S]*?)<\/table>/i);if(!te)return[];const Ne=te[1].split("</tr>").filter(lt=>lt.includes("<tr>")),Ve=[],Ke=[];for(const lt of Ne)if(lt.includes("<th>")||lt.includes("<td>")){const tt=lt.split("<td>").filter(pt=>pt.includes("<th>"));tt.length>0&&Ve.push(tt[0].replace(/<th[^>]*>/,"").replace(/<\/th>/,"").trim())}for(const lt of Ne)if(lt.includes("<td>")||lt.includes("<th>")){const tt=lt.split("<td>").filter(pt=>pt.includes("<th>"));if(tt.length>0){const pt={};for(let Yt=0;Yt<Ve.length;Yt++){const Dt=tt[Yt].replace(/<td[^>]*>/,"").replace(/<\/td>/,"").trim();pt[Ve[Yt]]=Dt}Ke.push(pt)}}return Ke.filter(lt=>Object.values(lt).some(tt=>tt))}catch{return[]}},xe=(we,te)=>{const he=[];return we.forEach((Ne,Ve)=>{(!Ne.name||!Ne.email)&&he.push(`Row ${Ve+1}: Missing required fields`)}),{isValid:he.length===0,errors:he}},ee=we=>{x(te=>te.filter(he=>he.id!==we))},ue=()=>{const we=[];return y.forEach(te=>{te.status==="completed"&&te.preview&&we.push(...te.preview)}),we},ve=()=>{const we=ue();if(we.length===0){Fs({title:"No data to preview",description:"Please wait for files to finish processing.",variant:"destructive"});return}P(we),N(!0)},qe=async()=>{const we=y.filter(he=>he.status==="completed");if(we.length===0){Fs({title:"No files ready",description:"Please wait for files to finish processing.",variant:"destructive"});return}const te=[];if(we.forEach(he=>{const Ne=document.querySelector('input[type="file"]');if(Ne&&Ne.files){for(let Ve=0;Ve<Ne.files.length;Ve++)if(Ne.files[Ve].name===he.name){te.push(Ne.files[Ve]);break}}}),te.length===0){Fs({title:"No files to upload",description:"No valid files found for upload.",variant:"destructive"});return}R(!0),I(0),F({total:te.length,completed:0,failed:0,errors:[]});try{await l(te),Fs({title:"Upload completed successfully",description:`Successfully uploaded ${te.length} files.`}),x([]),R(!1),I(0),F({total:0,completed:0,failed:0,errors:[]}),t()}catch(he){Fs({title:"Upload failed",description:he.message,variant:"destructive"}),R(!1)}},We=we=>we==="text/csv"?s.jsx(YA,{className:"w-5 h-5"}):we.includes("pdf")?s.jsx(kn,{className:"w-5 h-5"}):we.includes("word")||we.includes("document")?s.jsx(sw,{className:"w-5 h-5"}):we==="text/html"?s.jsx(kn,{className:"w-5 h-5"}):s.jsx(sw,{className:"w-5 h-5"}),ze=we=>{switch(we){case"uploading":return s.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"});case"processing":return s.jsx("div",{className:"w-4 h-4 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"});case"completed":return s.jsx(Sn,{className:"w-4 h-4 text-[#f7c624]"});case"error":return s.jsx(Nr,{className:"w-4 h-4 text-red-500"});default:return null}},rt=we=>{if(we===0)return"0 Bytes";const te=1024,he=["Bytes","KB","MB","GB"],Ne=Math.floor(Math.log(we)/Math.log(te));return parseFloat((we/Math.pow(te,Ne)).toFixed(2))+" "+he[Ne]},_t=(we,te)=>{const Ne={parents:{"First Name":"First Name","Last Name":"Last Name","Full Name":"Full Name",Name:"Name",Email:"Email","Phone Number":"Phone Number",Phone:"Phone Number",Mobile:"Phone Number",Contact:"Phone Number",Address:"Address","Emergency Contact":"Emergency Contact","Secondary Phone":"Secondary Phone","Preferred Contact Method":"Preferred Contact Method","Authorized Pickup Persons":"Authorized Pickup Persons"},drivers:{"First Name":"First Name","Last Name":"Last Name","Full Name":"Full Name",Name:"Name",Email:"Email","Phone Number":"Phone Number",Phone:"Phone Number",Mobile:"Phone Number",Contact:"Phone Number","License Number":"License Number","License Class":"License Class","License Expiry":"License Expiry","Last Health Check":"Last Health Check","Last Background Check":"Last Background Check"}}[te]||{};return we.map(Ve=>{if(Ne[Ve])return Ne[Ve];const Ke=Ve.toLowerCase();for(const[lt,tt]of Object.entries(Ne))if(lt.toLowerCase()===Ke)return tt;return Ve.replace(/_/g," ").replace(/\b\w/g,lt=>lt.toUpperCase())})};return s.jsxs(js,{open:e,onOpenChange:t,children:[s.jsxs(ps,{className:"max-w-4xl max-h-[85vh] overflow-y-auto",children:[s.jsxs(bs,{className:"pb-0",children:[s.jsx(xs,{className:"text-2xl font-bold",children:r}),n&&s.jsx("p",{className:"text-gray-600 mt-1",children:n})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsxs(Le,{children:[s.jsx("h2",{className:"text-lg font-bold mt-1 mb-1 ml-4",children:"Upload Files"}),s.jsx(Te,{className:"pt-0",children:s.jsxs("div",{className:it("border-2 border-dashed rounded-lg p-6 text-center transition-colors",w?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragOver:pe,onDragLeave:Q,onDrop:J,children:[s.jsx(ub,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop files here or click to browse"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Supported formats: ",a.join(", "),s.jsx("br",{}),"Maximum file size: ",i,"MB",s.jsx("br",{}),"Maximum files: ",o,s.jsx("br",{}),s.jsx("span",{className:"text-blue-600 font-medium",children:" Download the template to see the required format"})]}),s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx(ce,{onClick:()=>{var we;return(we=re.current)==null?void 0:we.click()},variant:"outline",children:"Choose Files"}),s.jsxs(ce,{onClick:()=>BX(f),variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Un,{className:"w-4 h-4"}),"Download Template"]})]}),s.jsx("input",{ref:re,type:"file",multiple:!0,accept:a.join(","),onChange:q,className:"hidden"})]})})]}),y.length>0&&s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-3",children:s.jsx(Ue,{className:"text-lg",children:"Uploaded Files"})}),s.jsx(Te,{className:"pt-0",children:s.jsx("div",{className:"space-y-3",children:y.map(we=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[We(we.type),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:we.name}),s.jsx("p",{className:"text-sm text-gray-500",children:rt(we.size)})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[ze(we.status),s.jsxs("div",{className:"flex items-center space-x-2",children:[we.status==="completed"&&we.preview&&s.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>{P(we.preview||[]),N(!0)},children:[s.jsx(ir,{className:"w-4 h-4"}),"Preview (",we.preview.length," records)"]}),s.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>ee(we.id),children:s.jsx(Ha,{className:"w-4 h-4"})})]})]}),we.status==="uploading"||we.status==="processing"?s.jsx(Ew,{value:we.progress,className:"w-24"}):null,we.error&&s.jsx("p",{className:"text-sm text-red-500",children:we.error})]},we.id))})})]}),y.some(we=>we.status==="completed")&&s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-3",children:s.jsx(Ue,{className:"text-lg",children:"Ready to Upload"})}),s.jsx(Te,{className:"pt-0",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Data Summary"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total Files:"}),s.jsx("span",{className:"ml-2 font-medium",children:y.filter(we=>we.status==="completed").length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total Records:"}),s.jsx("span",{className:"ml-2 font-medium",children:ue().length})]})]})]}),D&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Uploading records..."}),s.jsxs("span",{children:[Math.round(A),"%"]})]}),s.jsx(Ew,{value:A}),s.jsxs("div",{className:"text-sm text-gray-600",children:[O.completed," completed,"," ",O.failed," failed"]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsxs(ce,{variant:"outline",onClick:ve,children:[s.jsx(ir,{className:"w-4 h-4 mr-2"}),"Preview All Data"]}),s.jsx(ce,{onClick:qe,disabled:D,className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:D?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ub,{className:"w-4 h-4 mr-2"}),"Upload ",ue().length," Records"]})})]})]})})]}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsx(ce,{variant:"outline",onClick:t,children:"Close"})})]})]}),s.jsx(js,{open:b,onOpenChange:N,children:s.jsxs(ps,{className:"max-w-[95vw] max-h-[90vh] w-full overflow-hidden",children:[s.jsxs(bs,{className:"pb-4",children:[s.jsx(xs,{children:"Data Preview"}),s.jsxs(bn,{children:["Preview of ",C.length," records from uploaded files"]})]}),s.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[s.jsxs("div",{className:"border rounded-lg overflow-hidden flex-1 min-h-0",children:[s.jsx("div",{className:"overflow-auto h-full",children:s.jsxs(ka,{children:[s.jsx(Pa,{className:"sticky top-0 bg-white z-10",children:s.jsx(Js,{children:C.length>0&&(()=>{const we=Object.keys(C[0]);return _t(we,f).map((he,Ne)=>s.jsx(ut,{className:"whitespace-nowrap bg-white",children:he},we[Ne]))})()})}),s.jsx(Aa,{children:C.slice(0,50).map((we,te)=>s.jsx(Js,{children:Object.values(we).map((he,Ne)=>s.jsx(ct,{className:"max-w-[200px] truncate",children:String(he||"")},Ne))},te))})]})}),C.length>50&&s.jsxs("div",{className:"p-3 bg-gray-50 text-center text-sm text-gray-600 border-t",children:["Showing first 50 records of ",C.length," total records"]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-2 border-t",children:[s.jsx(ce,{variant:"outline",onClick:()=>N(!1),children:"Close Preview"}),s.jsxs(ce,{onClick:()=>{N(!1),qe()},className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:[s.jsx(ub,{className:"w-4 h-4 mr-2"}),"Upload All Records"]})]})]})]})})]})},GT=({isOpen:e,onClose:t,data:r,title:n="Data Preview",columns:a,validationErrors:i={}})=>{if(!r||r.length===0)return null;const o=a||Object.keys(r[0]||{}),l=d=>{const u=i[d];return!u||u.length===0?{status:"valid",icon:s.jsx(Sn,{className:"w-4 h-4 text-[#f7c624]"})}:{status:"error",icon:s.jsx(co,{className:"w-4 h-4 text-red-500"})}},c=d=>d==null?s.jsx("span",{className:"text-gray-400 italic",children:"Empty"}):typeof d=="boolean"?d?"Yes":"No":typeof d=="object"?JSON.stringify(d):String(d);return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsx(xs,{className:"text-2xl font-bold",children:n}),s.jsxs("p",{className:"text-gray-600",children:["Preview of ",r.length," records from uploaded file"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsx(Ue,{className:"text-sm font-medium text-gray-600",children:"Total Records"})}),s.jsx(Te,{children:s.jsx("div",{className:"text-2xl font-bold",children:r.length})})]}),s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsx(Ue,{className:"text-sm font-medium text-gray-600",children:"Valid Records"})}),s.jsx(Te,{children:s.jsx("div",{className:"text-2xl font-bold text-[#f7c624]",children:r.length-Object.keys(i).length})})]}),s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsx(Ue,{className:"text-sm font-medium text-gray-600",children:"Records with Errors"})}),s.jsx(Te,{children:s.jsx("div",{className:"text-2xl font-bold text-red-600",children:Object.keys(i).length})})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsx(Ue,{className:"text-lg",children:"Data Preview"})}),s.jsx(Te,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{className:"w-12",children:"#"}),s.jsx(ut,{className:"w-16",children:"Status"}),o.map(d=>s.jsx(ut,{className:"min-w-[150px]",children:d},d))]})}),s.jsx(Aa,{children:r.map((d,u)=>{const h=l(u),p=i[u]||[];return s.jsxs(Js,{className:h.status==="error"?"bg-red-50 border-red-200":"",children:[s.jsx(ct,{className:"font-medium",children:u+1}),s.jsx(ct,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[h.icon,h.status==="error"&&s.jsxs(Pe,{variant:"destructive",className:"text-xs",children:[p.length," error",p.length!==1?"s":""]})]})}),o.map(f=>s.jsx(ct,{children:c(d[f])},f))]},u)})})]})})})]}),Object.keys(i).length>0&&s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"text-lg flex items-center space-x-2",children:[s.jsx(Hc,{className:"w-5 h-5 text-yellow-500"}),"Validation Errors"]})}),s.jsx(Te,{children:s.jsx("div",{className:"space-y-3",children:Object.entries(i).map(([d,u])=>s.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsxs("h4",{className:"font-medium text-red-800 mb-2",children:["Row ",parseInt(d)+1,":"]}),s.jsx("ul",{className:"list-disc list-inside space-y-1",children:u.map((h,p)=>s.jsx("li",{className:"text-sm text-red-700",children:h},p))})]},d))})})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(ce,{variant:"outline",onClick:t,children:"Close"}),Object.keys(i).length===0&&s.jsx(ce,{children:"Continue with Upload"})]})]})]})})};function UX(){var Ne,Ve,Ke,lt,tt,pt,Yt,Dt,ks,wt,ws,ts,qt,kt,Ce,dt,yt,Xt,tr,Vt,ln,fn,Ir,hr,sr,Br,zi,Ea;const e=er(),{parents:t=[],loading:r,error:n}=Ct(Oe=>Oe.parents);g.useEffect(()=>{const Oe=localStorage.getItem("schoolId");Oe&&e(xa({schoolId:parseInt(Oe)})).then(Ze=>{}).catch(Ze=>{})},[]),g.useEffect(()=>{if(t.length===0&&!r){const Oe=setTimeout(()=>{const Ze=localStorage.getItem("schoolId");Ze&&e(xa({schoolId:parseInt(Ze)}))},2e3);return()=>clearTimeout(Oe)}},[t.length,r,e]);const[a,i]=g.useState(1),[o]=g.useState(10),[l,c]=g.useState(""),[d,u]=g.useState("all"),[h,p]=g.useState([]),[f,y]=g.useState(!1),[x,w]=g.useState(!1),[v,b]=g.useState(!1),[N,C]=g.useState(!1),[P,D]=g.useState(null),[R,A]=g.useState([{name:"",relation:"",phone:""}]),[I,O]=g.useState(!1),[F,E]=g.useState(!1),[$,U]=g.useState({}),[K,re]=g.useState(!1),[pe,Q]=g.useState(!1),[J,q]=g.useState([]),[Y,k]=g.useState({user_data:{first_name:"",last_name:"",email:"",phone_number:"",user_phone_number:"",password:"",confirm_password:"",user_type:"parent",profile_image:null},address:"",emergency_contact:"",school:1,preferred_contact_method:"email",secondary_phone:"",authorized_pickup_persons:{persons:R}}),L=Oe=>{const{name:Ze,value:Rt}=Oe.target;if(Ze==="user_data.phone_number"||Ze==="secondary_phone"||Ze==="emergency_contact")if(Ze.startsWith("user_data.")){const as=Ze.split(".")[1];k(Ns=>({...Ns,user_data:{...Ns.user_data,[as]:Rt}}))}else k(as=>({...as,[Ze]:Rt}));else if(Ze.startsWith("user_data.")){const as=Ze.split(".")[1];k(Ns=>({...Ns,user_data:{...Ns.user_data,[as]:Rt}}))}else k(as=>({...as,[Ze]:Rt}))},M=()=>{const Oe=Date.now(),Ze=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`+254${`07${(Oe.toString().slice(-6)+Ze).slice(0,8)}`.slice(1)}`},W=Oe=>{if(!Oe||!Oe.trim())return M();const Ze=Oe.replace(/\D/g,"");return Ze.length===0?M():Ze.startsWith("254")&&Ze.length===12?`+${Ze}`:Ze.startsWith("0")&&Ze.length===10?`+254${Ze.slice(1)}`:Ze.length===9?`+254${Ze}`:Ze.length===12?`+${Ze}`:Ze.length===11&&Ze.startsWith("7")?`+254${Ze}`:Ze.length>=9?`+254${Ze.slice(-9)}`:M()},se=(Oe,Ze)=>{k(Rt=>({...Rt,[Oe]:Ze}))},ae=()=>{A([...R,{name:"",relation:"",phone:""}])},ge=Oe=>{A(R.filter((Ze,Rt)=>Rt!==Oe))},fe=(Oe,Ze,Rt)=>{const as=[...R],Ns=Ze==="phone"?W(Rt):Rt;as[Oe]={...as[Oe],[Ze]:Ns},A(as),k(Zs=>({...Zs,authorized_pickup_persons:{persons:as}}))},Me=async Oe=>{try{const Ze=localStorage.getItem("schoolId");if(!Ze)throw new Error("School ID not found");let Rt=0,as=0;const Ns=[];for(let Zs=0;Zs<Oe.length;Zs++){const xr=Oe[Zs];try{const Ts=await HT(xr,"parents");Ts.success?(Rt+=Ts.created_count||0,as+=Ts.skipped_count||0,Ts.errors&&Ts.errors.length>0&&Ts.errors.forEach(Ms=>{typeof Ms=="string"?Ns.push(Ms):Ms.row&&Ms.field&&Ms.message?Ns.push(`Row ${Ms.row}, ${Ms.field}: ${Ms.message}`):Ns.push(JSON.stringify(Ms))}),Ts.created_users&&Ts.created_users.length>0):(as+=1,Ns.push(`File "${xr.name}": ${Ts.message}`))}catch(Ts){as+=1;const Ms=Ts instanceof Error?Ts.message:"Unknown error";Ns.push(`File "${xr.name}": ${Ms}`)}}Rt>0&&Fs({title:"CSV upload completed",description:`Successfully created ${Rt} parents.${as>0?` ${as} skipped.`:""}`}),as>0&&Fs({title:"Some records were skipped",description:`${as} records were skipped. Check the console for details.`,variant:"destructive"}),e(xa({schoolId:parseInt(Ze)}))}catch(Ze){throw Fs({title:"CSV upload failed",description:Ze instanceof Error?Ze.message:"Unknown error",variant:"destructive"}),Ze}},de=Oe=>{if(!Oe||typeof Oe!="string")return!1;const Ze=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,Rt=Oe.trim();return Rt.length===0||Rt.length>254?!1:Ze.test(Rt)},$e=Oe=>{q(Oe),Q(!0)},Ye=async Oe=>{var Rt,as,Ns,Zs,xr,Ts,Ms,Z,Re,nt,At,jt,rs,Ks,mn,zr,La,en,Xo,Ln,xi,Ps,Ja,jo;Oe.preventDefault(),U({});const Ze={};if((as=(Rt=Y.user_data)==null?void 0:Rt.first_name)!=null&&as.trim()||(Ze.user_data={...Ze.user_data,first_name:"First name is required"}),(Zs=(Ns=Y.user_data)==null?void 0:Ns.last_name)!=null&&Zs.trim()||(Ze.user_data={...Ze.user_data,last_name:"Last name is required"}),(Ts=(xr=Y.user_data)==null?void 0:xr.email)!=null&&Ts.trim()?de(Y.user_data.email)||(Ze.user_data={...Ze.user_data,email:"Please enter a valid email address"}):Ze.user_data={...Ze.user_data,email:"Email is required"},(Z=(Ms=Y.user_data)==null?void 0:Ms.phone_number)!=null&&Z.trim()||(Ze.user_data={...Ze.user_data,phone_number:"Phone number is required"}),(nt=(Re=Y.user_data)==null?void 0:Re.password)!=null&&nt.trim()?Y.user_data.password.length<8&&(Ze.user_data={...Ze.user_data,password:"Password must be at least 8 characters long"}):Ze.user_data={...Ze.user_data,password:"Password is required"},(jt=(At=Y.user_data)==null?void 0:At.confirm_password)!=null&&jt.trim()||(Ze.user_data={...Ze.user_data,confirm_password:"Please confirm your password"}),(rs=Y.address)!=null&&rs.trim()||(Ze.address="Address is required"),(Ks=Y.emergency_contact)!=null&&Ks.trim()||(Ze.emergency_contact="Emergency contact is required"),(mn=Y.user_data)!=null&&mn.password&&((zr=Y.user_data)!=null&&zr.confirm_password)&&Y.user_data.password!==Y.user_data.confirm_password&&(Ze.user_data={...Ze.user_data,confirm_password:"Passwords do not match"}),Object.keys(Ze).length>0){U(Ze),Fs({title:"Validation Error",description:"Please check the form for errors",variant:"destructive"});return}try{const gi=localStorage.getItem("schoolId");if(!gi){Fs({title:"Error",description:"School ID not found. Please log in again.",variant:"destructive"});return}const bo=R.filter(Za=>Za.name.trim()&&Za.relation.trim()&&Za.phone.trim()),Nd=W(Y.emergency_contact),Tn=W(Y.secondary_phone),vi=W(((La=Y.user_data)==null?void 0:La.phone_number)||""),pn={user:{first_name:((en=Y.user_data)==null?void 0:en.first_name)||"",last_name:((Xo=Y.user_data)==null?void 0:Xo.last_name)||"",email:((Ln=Y.user_data)==null?void 0:Ln.email)||"",phone_number:vi,user_phone_number:vi,password:((xi=Y.user_data)==null?void 0:xi.password)||"",confirm_password:((Ps=Y.user_data)==null?void 0:Ps.confirm_password)||"",user_type:((Ja=Y.user_data)==null?void 0:Ja.user_type)||"parent",profile_image:((jo=Y.user_data)==null?void 0:jo.profile_image)||null},address:Y.address,emergency_contact:Nd,school:parseInt(gi),preferred_contact_method:Y.preferred_contact_method,secondary_phone:Tn,authorized_pickup_persons:{persons:bo.map(Za=>({...Za,phone:W(Za.phone)}))}},Vl=await e(Jg(pn)).unwrap();Fs({title:"Success",description:"Parent registered successfully"}),y(!1),k({user_data:{first_name:"",last_name:"",email:"",phone_number:"",user_phone_number:"",password:"",confirm_password:"",user_type:"parent",profile_image:null},address:"",emergency_contact:"",school:parseInt(gi),preferred_contact_method:"email",secondary_phone:"",authorized_pickup_persons:{persons:[{name:"",relation:"",phone:""}]}}),A([{name:"",relation:"",phone:""}]),U({})}catch{Fs({title:"Registration Failed",description:"Failed to register parent. Please try again.",variant:"destructive"})}},mt=async(Oe,Ze)=>{try{await e(Zg({id:Oe,data:Ze})).unwrap(),Fs({title:"Success",description:"Parent updated successfully"}),b(!1),D(null);const Rt=localStorage.getItem("schoolId");Rt&&e(xa({schoolId:parseInt(Rt)}))}catch{Fs({title:"Update Failed",description:"Failed to update parent. Please try again.",variant:"destructive"})}},Se=async()=>{if(P!=null&&P.id)try{await e(Xg(P.id)).unwrap(),Fs({title:"Success",description:"Parent deleted successfully"}),C(!1),D(null)}catch{Fs({title:"Delete Failed",description:"Failed to delete parent. Please try again.",variant:"destructive"})}},oe=Oe=>{D(Oe),w(!0)},vt=Oe=>{D(Oe),b(!0)},me=Oe=>{D(Oe),C(!0)},xe=Oe=>{p(Ze=>Ze.includes(Oe)?Ze.filter(Rt=>Rt!==Oe):[...Ze,Oe])},ee=()=>{h.length===((t==null?void 0:t.length)||0)?p([]):p(t.map(Oe=>Oe.id))};localStorage.getItem("schoolId");const ue=t.filter(Oe=>{var as,Ns,Zs,xr,Ts,Ms;return((((as=Oe.user_data)==null?void 0:as.first_name)||((Ns=Oe.user_full_name)==null?void 0:Ns.split(" ")[0])||"").toLowerCase().includes(l.toLowerCase())||(((Zs=Oe.user_data)==null?void 0:Zs.last_name)||((xr=Oe.user_full_name)==null?void 0:xr.split(" ").slice(1).join(" "))||"").toLowerCase().includes(l.toLowerCase())||(((Ts=Oe.user_data)==null?void 0:Ts.email)||Oe.user_email||"").toLowerCase().includes(l.toLowerCase())||(((Ms=Oe.user_data)==null?void 0:Ms.phone_number)||Oe.user_phone_number||Oe.phone_number||"").toLowerCase().includes(l.toLowerCase()))&&(d==="all"||d==="active")}),ve=Math.ceil(ue.length/o),qe=(a-1)*o,We=qe+o,ze=ue.slice(qe,We),rt=Oe=>{i(Oe)},_t=Oe=>{c(Oe),i(1)},we=Oe=>{u(Oe),i(1)},te=()=>{c(""),u("all"),i(1)},he=()=>{const Oe=localStorage.getItem("schoolId");Oe&&e(xa({schoolId:parseInt(Oe)})).then(Ze=>{}).catch(Ze=>{})};return r?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#f7c624] mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Loading parents..."}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Please wait while we fetch the data"})]})}):n?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsx(Le,{className:"w-full max-w-md",children:s.jsxs(Te,{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ns,{className:"w-8 h-8 text-red-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Parents"}),s.jsx("p",{className:"text-red-500 mb-6",children:n}),s.jsx(ce,{onClick:()=>{const Oe=localStorage.getItem("schoolId");Oe&&e(xa({schoolId:parseInt(Oe)}))},className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Try Again"})]})})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-2 sm:px-4 py-4 w-full max-w-[98vw] mx-auto",children:[s.jsxs("div",{className:"mb-2 flex justify-between",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(ns,{className:"w-8 h-8 text-[#f7c624]"})," Parents"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{onClick:()=>re(!0),className:"bg-[#10213f] hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(Un,{className:"mr-2 h-4 w-4"})," Bulk Upload"]}),s.jsxs(js,{open:f,onOpenChange:y,children:[s.jsx(mu,{asChild:!0,children:s.jsxs(ce,{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(ja,{className:"mr-2 h-4 w-4"})," Add New Parent"]})}),s.jsxs(ps,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Add New Parent"})}),s.jsxs("form",{onSubmit:Ye,className:"space-y-2",children:[$.general&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Registration Error"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:$.general})})]})]})}),Object.keys($).length>0&&!$.general&&s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Please fix the following errors:"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[((Ne=$.user_data)==null?void 0:Ne.first_name)&&s.jsxs("li",{children:["First name:"," ",$.user_data.first_name]}),((Ve=$.user_data)==null?void 0:Ve.last_name)&&s.jsxs("li",{children:["Last name:"," ",$.user_data.last_name]}),((Ke=$.user_data)==null?void 0:Ke.email)&&s.jsxs("li",{children:["Email: ",$.user_data.email]}),((lt=$.user_data)==null?void 0:lt.phone_number)&&s.jsxs("li",{children:["Phone number:"," ",$.user_data.phone_number]}),((tt=$.user_data)==null?void 0:tt.password)&&s.jsxs("li",{children:["Password: ",$.user_data.password]}),((pt=$.user_data)==null?void 0:pt.confirm_password)&&s.jsxs("li",{children:["Confirm password:"," ",$.user_data.confirm_password]}),$.address&&s.jsxs("li",{children:["Address: ",$.address]}),$.emergency_contact&&s.jsxs("li",{children:["Emergency contact:"," ",$.emergency_contact]}),$.secondary_phone&&s.jsxs("li",{children:["Secondary phone:"," ",$.secondary_phone]}),$.preferred_contact_method&&s.jsxs("li",{children:["Preferred contact method:"," ",$.preferred_contact_method]}),$.authorized_pickup_persons&&s.jsxs("li",{children:["Authorized pickup persons:"," ",$.authorized_pickup_persons]})]})})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.first_name",children:"First Name"}),s.jsx(Ie,{id:"user_data.first_name",name:"user_data.first_name",value:((Yt=Y.user_data)==null?void 0:Yt.first_name)||"",onChange:L,required:!0,className:(Dt=$.user_data)!=null&&Dt.first_name?"border-red-500":""}),((ks=$.user_data)==null?void 0:ks.first_name)&&s.jsx("p",{className:"text-sm text-red-500",children:$.user_data.first_name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.last_name",children:"Last Name"}),s.jsx(Ie,{id:"user_data.last_name",name:"user_data.last_name",value:((wt=Y.user_data)==null?void 0:wt.last_name)||"",onChange:L,required:!0,className:(ws=$.user_data)!=null&&ws.last_name?"border-red-500":""}),((ts=$.user_data)==null?void 0:ts.last_name)&&s.jsx("p",{className:"text-sm text-red-500",children:$.user_data.last_name})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.email",children:"Email"}),s.jsx(Ie,{id:"user_data.email",name:"user_data.email",type:"email",value:((qt=Y.user_data)==null?void 0:qt.email)||"",onChange:L,required:!0,className:(kt=$.user_data)!=null&&kt.email?"border-red-500":""}),((Ce=$.user_data)==null?void 0:Ce.email)&&s.jsx("p",{className:"text-sm text-red-500",children:$.user_data.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.phone_number",children:"Phone Number"}),s.jsx(Ie,{id:"user_data.phone_number",name:"user_data.phone_number",value:((dt=Y.user_data)==null?void 0:dt.phone_number)||"",onChange:L,placeholder:"e.g., 0722858508 or +254722858508",required:!0,className:(yt=$.user_data)!=null&&yt.phone_number?"border-red-500":""}),((Xt=$.user_data)==null?void 0:Xt.phone_number)&&s.jsx("p",{className:"text-sm text-red-500",children:$.user_data.phone_number})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"user_data.password",name:"user_data.password",type:I?"text":"password",value:((tr=Y.user_data)==null?void 0:tr.password)||"",onChange:L,required:!0,className:(Vt=$.user_data)!=null&&Vt.password?"border-red-500":""}),s.jsx("button",{type:"button",onClick:()=>O(!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:I?s.jsx(Mo,{size:18}):s.jsx(ir,{size:18})})]}),((ln=$.user_data)==null?void 0:ln.password)&&s.jsx("p",{className:"text-sm text-red-500",children:$.user_data.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_data.confirm_password",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ie,{id:"user_data.confirm_password",name:"user_data.confirm_password",type:F?"text":"password",value:((fn=Y.user_data)==null?void 0:fn.confirm_password)||"",onChange:L,required:!0,className:(Ir=$.user_data)!=null&&Ir.confirm_password?"border-red-500":""}),s.jsx("button",{type:"button",onClick:()=>E(!F),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:F?s.jsx(Mo,{size:18}):s.jsx(ir,{size:18})})]}),((hr=$.user_data)==null?void 0:hr.confirm_password)&&s.jsx("p",{className:"text-sm text-red-500",children:$.user_data.confirm_password})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"address",children:"Address"}),s.jsx(oa,{id:"address",name:"address",value:Y.address,onChange:L,required:!0,className:$.address?"border-red-500":""}),$.address&&s.jsx("p",{className:"text-sm text-red-500",children:$.address})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"emergency_contact",children:"Emergency Contact"}),s.jsx(Ie,{id:"emergency_contact",name:"emergency_contact",value:Y.emergency_contact,onChange:L,placeholder:"e.g., 0722858508 or +254722858508",required:!0,className:$.emergency_contact?"border-red-500":""}),$.emergency_contact&&s.jsx("p",{className:"text-sm text-red-500",children:$.emergency_contact})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"secondary_phone",children:"Secondary Phone"}),s.jsx(Ie,{id:"secondary_phone",name:"secondary_phone",value:Y.secondary_phone,onChange:L,placeholder:"e.g., 0722858508 or +254722858508",className:$.secondary_phone?"border-red-500":""}),$.secondary_phone&&s.jsx("p",{className:"text-sm text-red-500",children:$.secondary_phone})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"preferred_contact_method",children:"Preferred Contact Method"}),s.jsxs(Gt,{value:Y.preferred_contact_method,onValueChange:Oe=>se("preferred_contact_method",Oe),children:[s.jsx(zt,{className:$.preferred_contact_method?"border-red-500":"",children:s.jsx(Kt,{placeholder:"Select contact method"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"email",children:"Email"}),s.jsx(Ee,{value:"phone",children:"Phone"}),s.jsx(Ee,{value:"sms",children:"SMS"})]})]}),$.preferred_contact_method&&s.jsx("p",{className:"text-sm text-red-500",children:$.preferred_contact_method})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(ne,{children:"Authorized Pickup Persons"}),s.jsxs(ce,{type:"button",variant:"outline",onClick:ae,className:"text-sm",children:[s.jsx(ja,{className:"h-4 w-4 mr-2"})," Add Person"]})]}),$.authorized_pickup_persons&&s.jsx("p",{className:"text-sm text-red-500",children:$.authorized_pickup_persons}),R.map((Oe,Ze)=>s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Name"}),s.jsx(Ie,{value:Oe.name,onChange:Rt=>fe(Ze,"name",Rt.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Relation"}),s.jsx(Ie,{value:Oe.relation,onChange:Rt=>fe(Ze,"relation",Rt.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Phone"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ie,{value:Oe.phone,onChange:Rt=>fe(Ze,"phone",Rt.target.value),placeholder:"e.g., 0722858508 or +254722858508",required:!0}),Ze>0&&s.jsx(ce,{type:"button",variant:"destructive",onClick:()=>ge(Ze),className:"px-2",children:""})]})]})]},Ze))]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),s.jsx(ce,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Add Parent"})]})]})]})]})]})]}),s.jsxs(Le,{className:"bg-white border-0 rounded-xl",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-2"}),s.jsx("div",{className:"bg-white ",children:s.jsx(Te,{className:"",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ie,{placeholder:"Search parents by name, email, or phone...",value:l,onChange:Oe=>_t(Oe.target.value),className:"pl-10 pr-4 py-2 border-gray-200 focus:border-[#f7c624] focus:ring-[#f7c624] rounded-full shadow-sm"})]}),s.jsxs(Gt,{value:d,onValueChange:we,children:[s.jsx(zt,{className:"w-full sm:w-40 border-gray-200 rounded-full shadow-sm",children:s.jsx(Kt,{placeholder:"Filter by status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Parents"}),s.jsx(Ee,{value:"active",children:"Active"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ce,{variant:"outline",onClick:te,className:"border-gray-200 hover:bg-gray-50 px-3 py-2 rounded-full shadow-sm",children:"Clear Filters"}),s.jsx(ce,{variant:"outline",onClick:he,className:"border-gray-200 hover:bg-gray-50 px-3 py-2 rounded-full shadow-sm",children:"Refresh Parents"}),s.jsx(ku,{data:{headers:["Name","Email","Phone Number","Address","Emergency Contact","Secondary Phone","Preferred Contact Method","Authorized Pickup Persons"],data:ue.map(Oe=>{var as,Ns,Zs,xr,Ts,Ms,Z;const Ze=Array.isArray((as=Oe.authorized_pickup_persons)==null?void 0:as.persons)?Oe.authorized_pickup_persons.persons.map(Re=>`${Re.name} (${Re.relation})`).join("; "):"None",Rt=((Ns=Oe.user_data)==null?void 0:Ns.phone_number)||Oe.user_phone_number||Oe.phone_number||"";return{name:`${((Zs=Oe.user_data)==null?void 0:Zs.first_name)||((xr=Oe.user_full_name)==null?void 0:xr.split(" ")[0])||""} ${((Ts=Oe.user_data)==null?void 0:Ts.last_name)||((Ms=Oe.user_full_name)==null?void 0:Ms.split(" ").slice(1).join(" "))||""}`,email:((Z=Oe.user_data)==null?void 0:Z.email)||Oe.user_email||"",phone_number:Rt,address:Oe.address||"",emergency_contact:Oe.emergency_contact||"",secondary_phone:Oe.secondary_phone||"",preferred_contact_method:Oe.preferred_contact_method||"",authorized_pickup_persons:Ze}}),fileName:"parents_export",title:"Parents Directory"},className:"border-gray-200 hover:bg-gray-50  rounded-full shadow-sm"})]})]})})})]}),s.jsx(Te,{className:"p-0",children:(ze==null?void 0:ze.length)>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[800px]",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"w-10 px-4 py-3 text-left",children:s.jsx("input",{type:"checkbox",checked:h.length===ze.length&&ze.length>0,onChange:ee,className:"rounded border-gray-300 text-[#f7c624] focus:ring-[#f7c624]"})}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Phone Number"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Address"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:ze.map((Oe,Ze)=>{var Rt,as,Ns,Zs,xr,Ts,Ms,Z,Re;return s.jsxs("tr",{className:`transition-colors duration-200 ${Ze%2===0?"bg-white":"bg-gray-50"} hover:bg-[#f7c624]`,children:[s.jsx("td",{className:"w-10 px-4 py-3",children:s.jsx("input",{type:"checkbox",checked:h.includes(Oe.id),onChange:()=>xe(Oe.id),className:"rounded border-gray-300 text-[#f7c624] focus:ring-[#f7c624]"})}),s.jsxs("td",{className:"px-4 py-3 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f7c624]/20 flex items-center justify-center text-[#f7c624] font-bold",children:((as=(Rt=Oe.user_data)==null?void 0:Rt.first_name)==null?void 0:as[0])||((Ns=Oe.user_full_name)==null?void 0:Ns[0])||"?"}),s.jsxs("div",{className:"font-medium text-gray-900 text-sm",children:[((Zs=Oe.user_data)==null?void 0:Zs.first_name)||((xr=Oe.user_full_name)==null?void 0:xr.split(" ")[0])||"-"," ",((Ts=Oe.user_data)==null?void 0:Ts.last_name)||((Ms=Oe.user_full_name)==null?void 0:Ms.split(" ").slice(1).join(" "))||""]})]}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm text-gray-900",children:((Z=Oe.user_data)==null?void 0:Z.email)||Oe.user_email||"-"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm text-gray-900",children:((Re=Oe.user_data)==null?void 0:Re.phone_number)||Oe.user_phone_number||Oe.phone_number||"-"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:Oe.address||"No address provided"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-[#f7c624]/20 text-[#f7c624] text-xs font-semibold",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-[#f7c624] inline-block"}),"Active"]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>oe(Oe),title:"View",children:s.jsx(ir,{className:"h-4 w-4"})}),s.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>vt(Oe),title:"Edit",children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(ce,{size:"icon",variant:"destructive",onClick:()=>me(Oe),title:"Delete",children:s.jsx(Ha,{className:"h-4 w-4"})})]})})]},Oe.id)})})]})}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:[s.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:s.jsxs("span",{children:["Showing ",qe+1," to"," ",Math.min(We,ue.length)," of"," ",ue.length," parents"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>rt(a-1),disabled:a===1,className:"border-gray-200 hover:bg-gray-50 h-8 px-3 rounded-full",children:[s.jsx(qc,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,ve)},(Oe,Ze)=>{let Rt;return ve<=5||a<=3?Rt=Ze+1:a>=ve-2?Rt=ve-4+Ze:Rt=a-2+Ze,s.jsx(ce,{variant:a===Rt?"default":"outline",size:"sm",onClick:()=>rt(Rt),className:a===Rt?"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white h-8 w-8 p-0 rounded-full":"border-gray-200 hover:bg-gray-50 h-8 w-8 p-0 rounded-full",children:Rt},Rt)})}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>rt(a+1),disabled:a===ve,className:"border-gray-200 hover:bg-gray-50 h-8 px-3 rounded-full",children:["Next",s.jsx(wl,{className:"h-4 w-4"})]})]})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(ns,{className:"w-10 h-10 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:l||d!=="all"?"No matching parents found":"No Parents Found"}),s.jsx("p",{className:"text-gray-500 text-center mb-4 max-w-md text-sm",children:l||d!=="all"?"Try adjusting your search or filter criteria.":"There are no parents registered in your school yet. Add the first parent to get started."}),l||d!=="all"?s.jsx(ce,{onClick:te,variant:"outline",className:"border-gray-200 hover:bg-gray-50 rounded-full",children:"Clear Filters"}):s.jsxs(ce,{onClick:()=>y(!0),className:"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(ja,{className:"mr-2 h-4 w-4"}),"Add First Parent"]})]})})]})]})}),s.jsx(WT,{isOpen:K,onClose:()=>re(!1),title:"Bulk Upload Parents",description:"Upload multiple parents at once using CSV, PDF, or Word documents.",acceptedFileTypes:[".csv",".xlsx",".xls",".txt",".pdf",".doc",".docx",".html"],maxFileSize:10,maxFiles:5,onUpload:Me,onPreview:$e,uploadType:"parents"}),s.jsx(GT,{isOpen:pe,onClose:()=>Q(!1),data:J,title:"Parent Data Preview",columns:["Name","Email","Phone Number","Address","Emergency Contact","Secondary Phone","Preferred Contact Method","Authorized Pickup Persons","School ID"]}),s.jsx(AX,{parent:P,isOpen:x,onClose:()=>{w(!1),D(null)}}),s.jsx(EX,{parent:P,isOpen:v,onClose:()=>{b(!1),D(null)},onSave:mt}),s.jsx(ad,{open:N,onOpenChange:C,children:s.jsxs(Ll,{children:[s.jsxs(Tl,{children:[s.jsx(Il,{children:"Are you sure?"}),s.jsxs(Fl,{children:['This action cannot be undone. This will permanently delete the parent "',((sr=P==null?void 0:P.user_data)==null?void 0:sr.first_name)||((Br=P==null?void 0:P.user_full_name)==null?void 0:Br.split(" ")[0])," ",((zi=P==null?void 0:P.user_data)==null?void 0:zi.last_name)||((Ea=P==null?void 0:P.user_full_name)==null?void 0:Ea.split(" ").slice(1).join(" ")),'" and remove their data from our servers.']})]}),s.jsxs(Rl,{children:[s.jsx(Ol,{children:"Cancel"}),s.jsx(Dl,{onClick:Se,className:"bg-red-600 hover:bg-red-700",children:"Delete Parent"})]})]})})]})}const qX=()=>{var ee,ue,ve,qe,We,ze,rt,_t,we;const e=er(),{drivers:t,loading:r,error:n}=Ct(te=>te.drivers),{user:a}=ca(te=>te.auth),{schools:i,loading:o,error:l}=Ct(te=>te.schools),{toast:c}=Ar(),[d,u]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:"",latitude:"-1.286389",longitude:"36.817223"}),[h,p]=g.useState(!1),[f,y]=g.useState(!1),[x,w]=g.useState(!1);g.useRef(null);const v=()=>{u({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:"",latitude:"-1.286389",longitude:"36.817223"}),y(!1),w(!1)},b=te=>{p(te),te||v()},[N,C]=g.useState(""),[P,D]=g.useState("all"),[R,A]=g.useState(1),[I]=g.useState(10),[O,F]=g.useState(null),[E,$]=g.useState(!1),[U,K]=g.useState(!1),[re,pe]=g.useState(!1),[Q,J]=g.useState(!1),[q,Y]=g.useState(!1),[k,L]=g.useState([]),M=te=>{F(te),$(!0)},W=te=>{F(te),K(!0)},se=te=>{F(te),pe(!0)},ae=async()=>{try{if(!O){c({title:"Error",description:"No driver selected for deletion",variant:"destructive"});return}await e(e0(O.id)).unwrap(),c({title:"Success",description:"Driver deleted successfully"}),pe(!1),F(null)}catch(te){let he="Failed to delete driver";te instanceof Error?he=te.message:typeof te=="string"&&(he=te),c({title:"Error",description:he,variant:"destructive"})}},ge=async te=>{try{if(!localStorage.getItem("schoolId"))throw new Error("School ID not found");let Ne=0,Ve=0;const Ke=[];for(let lt=0;lt<te.length;lt++){const tt=te[lt];try{const pt=await HT(tt,"drivers");pt.success?(Ne+=pt.created_count||0,Ve+=pt.skipped_count||0,pt.errors&&pt.errors.length>0&&pt.errors.forEach(Yt=>{typeof Yt=="string"?Ke.push(Yt):Yt.row&&Yt.field&&Yt.message?Ke.push(`Row ${Yt.row}, ${Yt.field}: ${Yt.message}`):Ke.push(JSON.stringify(Yt))}),pt.created_users&&pt.created_users.length>0):(Ve+=1,Ke.push(`File "${tt.name}": ${pt.message}`))}catch(pt){Ve+=1;const Yt=pt instanceof Error?pt.message:"Unknown error";Ke.push(`File "${tt.name}": ${Yt}`)}}Ne>0&&c({title:"CSV upload completed",description:`Successfully created ${Ne} drivers.${Ve>0?` ${Ve} skipped.`:""}`}),Ve>0&&c({title:"Some records were skipped",description:`${Ve} records were skipped. Check the console for details.`,variant:"destructive"}),e(Mn())}catch(he){throw c({title:"CSV upload failed",description:he instanceof Error?he.message:"Unknown error",variant:"destructive"}),he}},fe=te=>{L(te),Y(!0)};g.useEffect(()=>{(async()=>{try{await e(Mn()).unwrap();try{const he=await e(jl()).unwrap();Array.isArray(he)}catch{}}catch{}})()},[e]),g.useEffect(()=>{},[l]);const de=(ee=((i==null?void 0:i.filter(te=>te.admin===(a==null?void 0:a.id)))||[])[0])==null?void 0:ee.id,$e=(t==null?void 0:t.filter(te=>te.school===de))||[],Ye=$e.filter(te=>{if(!te||!te.user_details)return!1;const he=(te.user_details.first_name||"").toLowerCase().includes(N.toLowerCase())||(te.user_details.last_name||"").toLowerCase().includes(N.toLowerCase())||(te.user_details.email||"").toLowerCase().includes(N.toLowerCase())||(te.user_details.phone_number||"").toLowerCase().includes(N.toLowerCase())||(te.license_number||"").toLowerCase().includes(N.toLowerCase()),Ne=P==="all"||P==="available"&&te.is_available||P==="unavailable"&&!te.is_available;return he&&Ne}),mt=Math.ceil($e.length/I),Se=(R-1)*I,oe=Se+I,vt=$e.slice(Se,oe);g.useEffect(()=>{A(1)},[N,P]);const me=()=>{const[te,he]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:"",latitude:"-1.286389",longitude:"36.817223"}),[Ne,Ve]=g.useState(!1),[Ke,lt]=g.useState(!1),tt=Dt=>{const{name:ks,value:wt}=Dt.target;he(ws=>({...ws,[ks]:wt}))},pt=async Dt=>{Dt.preventDefault();const ks=[{field:"firstName",label:"First Name"},{field:"lastName",label:"Last Name"},{field:"email",label:"Email"},{field:"phoneNumber",label:"Phone Number"},{field:"password",label:"Password"},{field:"confirmPassword",label:"Confirm Password"},{field:"licenseNumber",label:"License Number"},{field:"licenseClass",label:"License Class"},{field:"licenseExpiry",label:"License Expiry"},{field:"lastHealthCheck",label:"Last Health Check"},{field:"lastBackgroundCheck",label:"Last Background Check"}];for(const{field:ts,label:qt}of ks)if(!te[ts]||te[ts]===""){c({title:"Error",description:`${qt} is required`,variant:"destructive"});return}if(te.password!==te.confirmPassword){c({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(te.password.length<8){c({title:"Error",description:"Password must be at least 8 characters long",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te.email)){c({title:"Error",description:"Please enter a valid email address",variant:"destructive"});return}const ws={user_data:{first_name:te.firstName,last_name:te.lastName,email:te.email,phone_number:te.phoneNumber,password:te.password,confirm_password:te.confirmPassword,user_type:"driver",profile_image:null},license_number:te.licenseNumber,license_expiry:te.licenseExpiry,license_class:te.licenseClass,school:de||1,is_available:!0,current_location:{latitude:Number(te.latitude),longitude:Number(te.longitude)},safety_rating:4.8,on_time_rating:4.9,last_health_check:te.lastHealthCheck,last_background_check:te.lastBackgroundCheck};try{await e(Qg(ws)).unwrap(),window.location.reload(),c({title:"Success",description:"Driver added successfully"}),he({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",licenseNumber:"",licenseClass:"",licenseExpiry:"",lastHealthCheck:"",lastBackgroundCheck:"",latitude:"-1.286389",longitude:"36.817223"}),Ve(!1),lt(!1),p(!1),e(Mn())}catch(ts){let qt="Failed to add driver";if(ts instanceof Error)try{const kt=JSON.parse(ts.message);typeof kt=="object"&&kt!==null?kt.email?qt=`Email: ${kt.email.join(", ")}`:kt.phone_number?qt=`Phone: ${kt.phone_number.join(", ")}`:kt.license_number?qt=`License: ${kt.license_number.join(", ")}`:kt.message?qt=kt.message:qt=JSON.stringify(kt,null,2):qt=ts.message}catch{qt=ts.message}else qt=String(ts);c({title:"Error",description:qt,variant:"destructive"})}},Yt=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(Dt=>{he(ks=>({...ks,latitude:Dt.coords.latitude.toString(),longitude:Dt.coords.longitude.toString()})),c({title:"Success",description:"Current location updated"})},Dt=>{c({title:"Error",description:"Failed to get current location: "+Dt.message,variant:"destructive"})}):c({title:"Error",description:"Geolocation is not supported by your browser",variant:"destructive"})};return s.jsxs("form",{onSubmit:pt,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"firstName",className:"text-sm font-medium",children:"First Name"}),s.jsx("input",{id:"firstName",name:"firstName",value:te.firstName,onChange:tt,type:"text",placeholder:"Enter first name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"lastName",className:"text-sm font-medium",children:"Last Name"}),s.jsx("input",{id:"lastName",name:"lastName",value:te.lastName,onChange:tt,type:"text",placeholder:"Enter last name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),s.jsx("input",{id:"email",name:"email",value:te.email,onChange:tt,type:"email",placeholder:"Enter email address",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium",children:"Phone Number"}),s.jsx("input",{id:"phoneNumber",name:"phoneNumber",value:te.phoneNumber,onChange:tt,type:"tel",placeholder:"Enter phone number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",value:te.password,onChange:tt,type:Ne?"text":"password",placeholder:"Enter password",required:!0,minLength:8,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-10"}),s.jsx("button",{type:"button",onClick:()=>Ve(!Ne),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Ne?s.jsx(Mo,{className:"h-4 w-4"}):s.jsx(ir,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirmPassword",name:"confirmPassword",value:te.confirmPassword,onChange:tt,type:Ke?"text":"password",placeholder:"Confirm password",required:!0,minLength:8,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-10"}),s.jsx("button",{type:"button",onClick:()=>lt(!Ke),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Ke?s.jsx(Mo,{className:"h-4 w-4"}):s.jsx(ir,{className:"h-4 w-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"licenseNumber",className:"text-sm font-medium",children:"License Number"}),s.jsx("input",{id:"licenseNumber",name:"licenseNumber",value:te.licenseNumber,onChange:tt,type:"text",placeholder:"Enter license number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"licenseClass",className:"text-sm font-medium",children:"License Class"}),s.jsx("input",{id:"licenseClass",name:"licenseClass",value:te.licenseClass,onChange:tt,type:"text",placeholder:"Enter license class",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"licenseExpiry",className:"text-sm font-medium",children:"License Expiry"}),s.jsx("input",{id:"licenseExpiry",name:"licenseExpiry",value:te.licenseExpiry,onChange:tt,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"lastHealthCheck",className:"text-sm font-medium",children:"Last Health Check"}),s.jsx("input",{id:"lastHealthCheck",name:"lastHealthCheck",value:te.lastHealthCheck,onChange:tt,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"lastBackgroundCheck",className:"text-sm font-medium",children:"Last Background Check"}),s.jsx("input",{id:"lastBackgroundCheck",name:"lastBackgroundCheck",value:te.lastBackgroundCheck,onChange:tt,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"latitude",className:"text-sm font-medium",children:"Latitude"}),s.jsx("input",{id:"latitude",name:"latitude",value:te.latitude,onChange:tt,type:"number",step:"any",placeholder:"Enter latitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"longitude",className:"text-sm font-medium",children:"Longitude"}),s.jsx("input",{id:"longitude",name:"longitude",value:te.longitude,onChange:tt,type:"number",step:"any",placeholder:"Enter longitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{type:"button",onClick:Yt,className:"bg-blue-600 hover:bg-blue-700 mb-4",children:"Get Current Location"})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:()=>p(!1),className:"flex-1",children:"Cancel"}),s.jsx(ce,{type:"submit",className:"bg-green-600 hover:bg-green-700 flex-1",children:"Add Driver"})]})]})},xe=()=>{var Dt,ks,wt,ws;const[te,he]=g.useState({firstName:((Dt=O==null?void 0:O.user_details)==null?void 0:Dt.first_name)||"",lastName:((ks=O==null?void 0:O.user_details)==null?void 0:ks.last_name)||"",email:((wt=O==null?void 0:O.user_details)==null?void 0:wt.email)||"",phoneNumber:((ws=O==null?void 0:O.user_details)==null?void 0:ws.phone_number)||"",password:"",confirmPassword:"",licenseNumber:(O==null?void 0:O.license_number)||"",licenseClass:(O==null?void 0:O.license_class)||"",licenseExpiry:(O==null?void 0:O.license_expiry)||"",lastHealthCheck:(O==null?void 0:O.last_health_check)||"",lastBackgroundCheck:(O==null?void 0:O.last_background_check)||"",latitude:"-1.286389",longitude:"36.817223"}),[Ne,Ve]=g.useState(!1),[Ke,lt]=g.useState(!1);g.useEffect(()=>{var ts,qt,kt,Ce;if(O){let dt=-1.286389,yt=36.817223;if(O.current_location){if(typeof O.current_location=="object")dt=O.current_location.latitude,yt=O.current_location.longitude;else if(typeof O.current_location=="string"){const Xt=O.current_location.match(/POINT \(([^ ]+) ([^)]+)\)/);Xt&&(yt=parseFloat(Xt[1]),dt=parseFloat(Xt[2]))}}he({firstName:((ts=O.user_details)==null?void 0:ts.first_name)||"",lastName:((qt=O.user_details)==null?void 0:qt.last_name)||"",email:((kt=O.user_details)==null?void 0:kt.email)||"",phoneNumber:((Ce=O.user_details)==null?void 0:Ce.phone_number)||"",password:"",confirmPassword:"",licenseNumber:O.license_number||"",licenseClass:O.license_class||"",licenseExpiry:O.license_expiry||"",lastHealthCheck:O.last_health_check||"",lastBackgroundCheck:O.last_background_check||"",latitude:dt.toString(),longitude:yt.toString()})}},[O]);const tt=ts=>{const{name:qt,value:kt}=ts.target;he(Ce=>({...Ce,[qt]:kt}))},pt=async ts=>{if(ts.preventDefault(),!O){c({title:"Error",description:"No driver selected for editing",variant:"destructive"});return}const qt=[{field:"firstName",label:"First Name"},{field:"lastName",label:"Last Name"},{field:"email",label:"Email"},{field:"phoneNumber",label:"Phone Number"},{field:"licenseNumber",label:"License Number"},{field:"licenseClass",label:"License Class"},{field:"licenseExpiry",label:"License Expiry"},{field:"lastHealthCheck",label:"Last Health Check"},{field:"lastBackgroundCheck",label:"Last Background Check"}];for(const{field:dt,label:yt}of qt)if(!te[dt]||te[dt]===""){c({title:"Error",description:`${yt} is required`,variant:"destructive"});return}if(te.password&&te.password!==te.confirmPassword){c({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(te.password&&te.password.length<8){c({title:"Error",description:"Password must be at least 8 characters long",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te.email)){c({title:"Error",description:"Please enter a valid email address",variant:"destructive"});return}const Ce={user_data:{first_name:te.firstName,last_name:te.lastName,email:te.email,phone_number:te.phoneNumber,...te.password&&{password:te.password},user_type:"driver",profile_image:null},license_number:te.licenseNumber,license_expiry:te.licenseExpiry,license_class:te.licenseClass,school:de||1,is_available:O.is_available,current_location:{latitude:Number(te.latitude),longitude:Number(te.longitude)},safety_rating:O.safety_rating,on_time_rating:O.on_time_rating,last_health_check:te.lastHealthCheck,last_background_check:te.lastBackgroundCheck};try{await e(t0({id:O.id,data:Ce})).unwrap(),c({title:"Success",description:"Driver updated successfully"}),K(!1),F(null),e(Mn())}catch(dt){let yt="Failed to update driver";if(dt instanceof Error)try{const Xt=JSON.parse(dt.message);typeof Xt=="object"&&Xt!==null?Xt.email?yt=`Email: ${Xt.email.join(", ")}`:Xt.phone_number?yt=`Phone: ${Xt.phone_number.join(", ")}`:Xt.license_number?yt=`License: ${Xt.license_number.join(", ")}`:Xt.message?yt=Xt.message:yt=JSON.stringify(Xt,null,2):yt=dt.message}catch{yt=dt.message}else yt=String(dt);c({title:"Error",description:yt,variant:"destructive"})}},Yt=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(ts=>{he(qt=>({...qt,latitude:ts.coords.latitude.toString(),longitude:ts.coords.longitude.toString()})),c({title:"Success",description:"Current location updated"})},ts=>{c({title:"Error",description:"Failed to get current location: "+ts.message,variant:"destructive"})}):c({title:"Error",description:"Geolocation is not supported by your browser",variant:"destructive"})};return s.jsxs("form",{onSubmit:pt,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editFirstName",className:"text-sm font-medium",children:"First Name"}),s.jsx("input",{id:"editFirstName",name:"firstName",value:te.firstName,onChange:tt,type:"text",placeholder:"Enter first name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLastName",className:"text-sm font-medium",children:"Last Name"}),s.jsx("input",{id:"editLastName",name:"lastName",value:te.lastName,onChange:tt,type:"text",placeholder:"Enter last name",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editEmail",className:"text-sm font-medium",children:"Email"}),s.jsx("input",{id:"editEmail",name:"email",value:te.email,onChange:tt,type:"email",placeholder:"Enter email address",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editPhoneNumber",className:"text-sm font-medium",children:"Phone Number"}),s.jsx("input",{id:"editPhoneNumber",name:"phoneNumber",value:te.phoneNumber,onChange:tt,type:"tel",placeholder:"Enter phone number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editPassword",className:"text-sm font-medium",children:"Password (leave blank to keep current)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"editPassword",name:"password",value:te.password,onChange:tt,type:Ne?"text":"password",placeholder:"Enter new password (optional)",minLength:8,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-10"}),s.jsx("button",{type:"button",onClick:()=>Ve(!Ne),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Ne?s.jsx(Mo,{className:"h-4 w-4"}):s.jsx(ir,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editConfirmPassword",className:"text-sm font-medium",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"editConfirmPassword",name:"confirmPassword",value:te.confirmPassword,onChange:tt,type:Ke?"text":"password",placeholder:"Confirm new password",minLength:8,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-10"}),s.jsx("button",{type:"button",onClick:()=>lt(!Ke),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Ke?s.jsx(Mo,{className:"h-4 w-4"}):s.jsx(ir,{className:"h-4 w-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLicenseNumber",className:"text-sm font-medium",children:"License Number"}),s.jsx("input",{id:"editLicenseNumber",name:"licenseNumber",value:te.licenseNumber,onChange:tt,type:"text",placeholder:"Enter license number",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLicenseClass",className:"text-sm font-medium",children:"License Class"}),s.jsx("input",{id:"editLicenseClass",name:"licenseClass",value:te.licenseClass,onChange:tt,type:"text",placeholder:"Enter license class",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLicenseExpiry",className:"text-sm font-medium",children:"License Expiry"}),s.jsx("input",{id:"editLicenseExpiry",name:"licenseExpiry",value:te.licenseExpiry,onChange:tt,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLastHealthCheck",className:"text-sm font-medium",children:"Last Health Check"}),s.jsx("input",{id:"editLastHealthCheck",name:"lastHealthCheck",value:te.lastHealthCheck,onChange:tt,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLastBackgroundCheck",className:"text-sm font-medium",children:"Last Background Check"}),s.jsx("input",{id:"editLastBackgroundCheck",name:"lastBackgroundCheck",value:te.lastBackgroundCheck,onChange:tt,type:"date",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLatitude",className:"text-sm font-medium",children:"Latitude"}),s.jsx("input",{id:"editLatitude",name:"latitude",value:te.latitude,onChange:tt,type:"number",step:"any",placeholder:"Enter latitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"editLongitude",className:"text-sm font-medium",children:"Longitude"}),s.jsx("input",{id:"editLongitude",name:"longitude",value:te.longitude,onChange:tt,type:"number",step:"any",placeholder:"Enter longitude",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{type:"button",onClick:Yt,className:"bg-blue-600 hover:bg-blue-700 mb-4",children:"Get Current Location"})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:()=>K(!1),className:"flex-1",children:"Cancel"}),s.jsx(ce,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 flex-1",children:"Update Driver"})]})]})};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-0 px-0 sm:px-0 py-0 w-full max-w-[98vw] mx-auto",children:[s.jsxs(Le,{className:"bg-white shadow-lg border-0 rounded-xl",children:[s.jsxs(Be,{className:" border-b border-gray-100 flex flex-row w-full items-center justify-between",children:[s.jsxs(Ue,{className:"text-xl font-bold text-gray-900 flex items-center",children:[s.jsx(ns,{className:"w-6 h-6 text-[#f7c624]"}),"Drivers List"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{onClick:()=>J(!0),className:"bg-[#10213f] hover:bg-[#10213f] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(Un,{className:"mr-2 h-4 w-4"})," Bulk Upload"]}),s.jsxs(js,{open:h,onOpenChange:b,children:[s.jsx(mu,{asChild:!0,children:s.jsxs(ce,{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",children:[s.jsx(ja,{className:"mr-2 h-4 w-4"})," Add Driver"]})}),s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Add New Driver"})}),s.jsx(me,{})]})]})]})]}),s.jsxs(Te,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ie,{placeholder:"Search drivers by name, email, phone, or license...",value:N,onChange:te=>C(te.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ul,{className:"h-4 w-4 text-gray-400"}),s.jsxs(Gt,{value:P,onValueChange:D,children:[s.jsx(zt,{className:"w-[180px]",children:s.jsx(Kt,{placeholder:"Filter by status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Drivers"}),s.jsx(Ee,{value:"available",children:"Available"}),s.jsx(Ee,{value:"unavailable",children:"Unavailable"})]})]}),s.jsx(ku,{data:{headers:["Name","Email","Phone Number","License Number","License Class","License Expiry","Status","Safety Rating","On-time Rating","Last Health Check","Last Background Check"],data:Ye.map(te=>{var he,Ne,Ve,Ke,lt,tt;return{name:`${((he=te.user_details)==null?void 0:he.first_name)||""} ${((Ne=te.user_details)==null?void 0:Ne.last_name)||""}`,email:((Ve=te.user_details)==null?void 0:Ve.email)||"",phone_number:((Ke=te.user_details)==null?void 0:Ke.phone_number)||"",license_number:te.license_number||"",license_class:te.license_class||"",license_expiry:te.license_expiry||"",status:te.is_available?"Available":"Unavailable",safety_rating:((lt=te.safety_rating)==null?void 0:lt.toString())||"",on_time_rating:((tt=te.on_time_rating)==null?void 0:tt.toString())||"",last_health_check:te.last_health_check||"",last_background_check:te.last_background_check||""}}),fileName:"drivers_export",title:"Drivers Directory"},className:"border-gray-200 hover:bg-gray-50 px-3 py-2"})]})]}),r?s.jsx("div",{className:"text-center py-4",children:"Loading drivers..."}):n?s.jsx("div",{className:"text-center py-4 text-red-500",children:n}):s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"Name"}),s.jsx(ut,{children:"Email"}),s.jsx(ut,{children:"Phone"}),s.jsx(ut,{children:"License"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Safety Rating"}),s.jsx(ut,{children:"On-time Rating"}),s.jsx(ut,{children:"Actions"})]})}),s.jsx(Aa,{children:vt&&vt.length>0?vt.map(te=>{var he,Ne,Ve,Ke,lt,tt;return s.jsxs(Js,{children:[s.jsxs(ct,{children:[((he=te.user_details)==null?void 0:he.first_name)||"N/A"," ",((Ne=te.user_details)==null?void 0:Ne.last_name)||"N/A"]}),s.jsx(ct,{children:((Ve=te.user_details)==null?void 0:Ve.email)||"N/A"}),s.jsx(ct,{children:((Ke=te.user_details)==null?void 0:Ke.phone_number)||"N/A"}),s.jsxs(ct,{children:[te.license_number||"N/A"," (",te.license_class||"N/A",")"]}),s.jsx(ct,{children:s.jsx(Pe,{variant:te.is_available?"default":"secondary",children:te.is_available?"Available":"Unavailable"})}),s.jsx(ct,{children:((lt=te.safety_rating)==null?void 0:lt.toString())||"N/A"}),s.jsx(ct,{children:((tt=te.on_time_rating)==null?void 0:tt.toString())||"N/A"}),s.jsx(ct,{children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(ho,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsxs(Jt,{onClick:()=>M(te),children:[s.jsx(ir,{className:"h-4 w-4 mr-2"}),"View"]}),s.jsxs(Jt,{onClick:()=>W(te),children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(Jt,{onClick:()=>se(te),className:"text-red-600",children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},te.id)}):s.jsx(Js,{children:s.jsx(ct,{colSpan:8,className:"text-center",children:"No drivers found"})})})]}),s.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Se+1,"-",Math.min(oe,Ye.length)," of"," ",Ye.length," drivers",N&&` matching "${N}"`,P!=="all"&&` (${P})`]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>A(R-1),disabled:R===1,children:[s.jsx(qc,{className:"h-4 w-4"}),"Previous"]}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:mt},(te,he)=>he+1).map(te=>s.jsx(ce,{variant:R===te?"default":"outline",size:"sm",onClick:()=>A(te),className:"w-8 h-8 p-0",children:te},te))}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>A(R+1),disabled:R===mt,children:["Next",s.jsx(wl,{className:"h-4 w-4"})]})]})]})]})]}),s.jsx(js,{open:E,onOpenChange:$,children:s.jsxs(ps,{className:"max-w-2xl",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Driver Details"})}),O&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Name"}),s.jsxs("p",{children:[((ue=O.user_details)==null?void 0:ue.first_name)||"N/A"," ",((ve=O.user_details)==null?void 0:ve.last_name)||"N/A"]})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Email"}),s.jsx("p",{children:((qe=O.user_details)==null?void 0:qe.email)||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Phone"}),s.jsx("p",{children:((We=O.user_details)==null?void 0:We.phone_number)||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"License Number"}),s.jsx("p",{children:O.license_number||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"License Class"}),s.jsx("p",{children:O.license_class||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"License Expiry"}),s.jsx("p",{children:O.license_expiry||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Status"}),s.jsx(Pe,{variant:O.is_available?"default":"secondary",children:O.is_available?"Available":"Unavailable"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Safety Rating"}),s.jsx("p",{children:((ze=O.safety_rating)==null?void 0:ze.toString())||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"On-time Rating"}),s.jsx("p",{children:((rt=O.on_time_rating)==null?void 0:rt.toString())||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Last Health Check"}),s.jsx("p",{children:O.last_health_check||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Last Background Check"}),s.jsx("p",{children:O.last_background_check||"N/A"})]})]})})]})}),s.jsx(js,{open:U,onOpenChange:K,children:s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Edit Driver"})}),O&&s.jsx(xe,{})]})}),s.jsx(ad,{open:re,onOpenChange:pe,children:s.jsxs(Ll,{children:[s.jsxs(Tl,{children:[s.jsx(Il,{children:"Are you sure?"}),s.jsxs(Fl,{children:["This action cannot be undone. This will permanently delete the driver",O&&` "${((_t=O.user_details)==null?void 0:_t.first_name)||"Unknown"} ${((we=O.user_details)==null?void 0:we.last_name)||"Driver"}"`,"."]})]}),s.jsxs(Rl,{children:[s.jsx(Ol,{children:"Cancel"}),s.jsx(Dl,{onClick:ae,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),s.jsx(WT,{isOpen:Q,onClose:()=>J(!1),title:"Bulk Upload Drivers",description:"Upload multiple drivers at once using CSV, PDF, or Word documents.",acceptedFileTypes:[".csv",".xlsx",".xls",".txt",".pdf",".doc",".docx",".html"],maxFileSize:10,maxFiles:5,onUpload:ge,onPreview:fe,uploadType:"drivers"}),s.jsx(GT,{isOpen:q,onClose:()=>Y(!1),data:k,title:"Driver Data Preview",columns:["Name","Email","Phone Number","License Number","License Class","License Expiry","Is Assistant Driver","Last Health Check","Last Background Check","School ID"]})]})})})},wC=({formData:e,setFormData:t,onSubmit:r,loading:n,filteredDrivers:a,driversLoading:i})=>{var c,d,u;const o=h=>{const{name:p,value:f,type:y}=h.target;t(x=>({...x,[p]:y==="number"?Number(f):f}))},l=(h,p)=>{t(f=>({...f,[h]:h==="driver"?Number(p):p}))};return s.jsxs("form",{onSubmit:r,className:"",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"registration_number",children:"Registration Number"}),s.jsx(Ie,{id:"registration_number",name:"registration_number",value:e.registration_number,onChange:o,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"vehicle_type",children:"Vehicle Type"}),s.jsxs(Gt,{value:e.vehicle_type,onValueChange:h=>l("vehicle_type",h),children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select vehicle type"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"bus",children:"Bus"}),s.jsx(Ee,{value:"van",children:"Van"}),s.jsx(Ee,{value:"car",children:"Car"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"capacity",children:"Capacity"}),s.jsx(Ie,{id:"capacity",name:"capacity",type:"number",value:e.capacity,onChange:o,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"driver",children:"Driver"}),s.jsxs(xT,{children:[s.jsx(gT,{asChild:!0,children:s.jsxs(ce,{variant:"outline",role:"combobox",className:"w-full justify-between",disabled:i,children:[e.driver===0?"Select driver...":a.find(h=>(h.user_details.id||h.id)===e.driver)?`${(c=a.find(h=>(h.user_details.id||h.id)===e.driver))==null?void 0:c.user_details.first_name} ${(d=a.find(h=>(h.user_details.id||h.id)===e.driver))==null?void 0:d.user_details.last_name} (${(u=a.find(h=>(h.user_details.id||h.id)===e.driver))==null?void 0:u.phone_number})`:"Select driver...",s.jsx(KA,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(fS,{className:"w-full p-0",children:s.jsxs(pS,{children:[s.jsx(xS,{placeholder:"Search drivers..."}),s.jsxs(gS,{children:[s.jsx(vS,{children:"No driver found."}),s.jsx(yS,{children:i?s.jsx(ap,{disabled:!0,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ba,{className:"h-4 w-4 animate-spin"}),"Loading drivers..."]})}):a.length===0?s.jsx(ap,{disabled:!0,children:"No drivers available"}):a.map(h=>s.jsxs(ap,{value:`${h.user_details.first_name} ${h.user_details.last_name} ${h.phone_number||""}`,onSelect:()=>l("driver",(h.user_details.id||h.id).toString()),children:[s.jsx(Sn,{className:`mr-2 h-4 w-4 ${e.driver===(h.user_details.id||h.id)?"opacity-100":"opacity-0"}`}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{children:[h.user_details.first_name," ",h.user_details.last_name]}),h.phone_number&&s.jsx("span",{className:"text-xs text-muted-foreground",children:h.phone_number})]})]},h.id))})]})]})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"manufacturer",children:"Manufacturer"}),s.jsx(Ie,{id:"manufacturer",name:"manufacturer",value:e.manufacturer,onChange:o,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"model",children:"Model"}),s.jsx(Ie,{id:"model",name:"model",value:e.model,onChange:o,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"year",children:"Year"}),s.jsx(Ie,{id:"year",name:"year",type:"number",value:e.year,onChange:o,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"fuel_type",children:"Fuel Type"}),s.jsxs(Gt,{value:e.fuel_type,onValueChange:h=>l("fuel_type",h),children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select fuel type"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"diesel",children:"Diesel"}),s.jsx(Ee,{value:"petrol",children:"Petrol"}),s.jsx(Ee,{value:"electric",children:"Electric"})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"mileage",children:"Mileage"}),s.jsx(Ie,{id:"mileage",name:"mileage",type:"number",value:e.mileage,onChange:o,required:!0})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Features"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"has_gps",checked:e.has_gps,onChange:h=>t(p=>({...p,has_gps:h.target.checked}))}),s.jsx(ne,{htmlFor:"has_gps",children:"GPS"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"has_camera",checked:e.has_camera,onChange:h=>t(p=>({...p,has_camera:h.target.checked}))}),s.jsx(ne,{htmlFor:"has_camera",children:"Camera"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"has_emergency_button",checked:e.has_emergency_button,onChange:h=>t(p=>({...p,has_emergency_button:h.target.checked}))}),s.jsx(ne,{htmlFor:"has_emergency_button",children:"Emergency Button"})]})]})]}),s.jsx(ce,{type:"submit",disabled:n,className:"w-full bg-[#f7c624] hover:bg-[#f7c624]/90 text-white mt-1",children:n?"Adding Vehicle...":"Add Vehicle"})]})};function VX(){var se,ae,ge,fe,Me;const e=er(),{toast:t}=Ar(),[r,n]=g.useState(!1),{vehicles:a,loading:i,error:o}=Ct(de=>de.vehicles);g.useEffect(()=>{},[a,i,o]);const{user:l}=ca(de=>de.auth),{schools:c}=Ct(de=>de.schools),{drivers:d,loading:u}=Ct(de=>de.drivers),[h,p]=g.useState(""),[f,y]=g.useState("all"),[x,w]=g.useState(1),[v,b]=g.useState(10),[N,C]=g.useState(null),[P,D]=g.useState(!1),[R,A]=g.useState(!1),[I,O]=g.useState(!1),F=(c==null?void 0:c.filter(de=>de.admin===(l==null?void 0:l.id)))||[],E=(se=F[0])==null?void 0:se.id,$=(d==null?void 0:d.filter(de=>(de==null?void 0:de.school)===E))||[];g.useEffect(()=>{(async()=>{try{if(E){const $e=await e(Rh({schoolId:E}))}await e(Mn())}catch{}})()},[e,E]),g.useEffect(()=>{},[l,E,c,d,F,$,u]);const U=a.filter(de=>{var mt,Se,oe,vt;if(!de)return!1;const $e=(de.registration_number||"").toLowerCase().includes(h.toLowerCase())||(de.manufacturer||"").toLowerCase().includes(h.toLowerCase())||(de.model||"").toLowerCase().includes(h.toLowerCase())||(de.vehicle_type||"").toLowerCase().includes(h.toLowerCase())||(((Se=(mt=$.find(me=>(me==null?void 0:me.id)===de.driver))==null?void 0:mt.user_details)==null?void 0:Se.first_name)||"").toLowerCase().includes(h.toLowerCase())||(((vt=(oe=$.find(me=>(me==null?void 0:me.id)===de.driver))==null?void 0:oe.user_details)==null?void 0:vt.last_name)||"").toLowerCase().includes(h.toLowerCase()),Ye=f==="all"||f==="active"&&de.is_active||f==="inactive"&&!de.is_active;return $e&&Ye}),K=Math.ceil(U.length/v),re=(x-1)*v,pe=re+v,Q=U.slice(re,pe);g.useEffect(()=>{w(1)},[h,f,v]);const J=de=>{C(de),D(!0)},q=de=>{C(de),M({registration_number:de.registration_number||"",vehicle_type:de.vehicle_type||"bus",capacity:de.capacity||40,school:E,driver:de.driver||0,manufacturer:de.manufacturer||"",model:de.model||"",year:de.year||new Date().getFullYear(),fuel_type:de.fuel_type||"diesel",is_active:de.is_active??!0,mileage:de.mileage||0,has_gps:de.has_gps??!0,has_camera:de.has_camera??!0,has_emergency_button:de.has_emergency_button??!0}),A(!0)},Y=de=>{C(de),O(!0)},k=async()=>{try{if(!N){t({title:"Error",description:"No vehicle selected for deletion",variant:"destructive"});return}if(!N.id){t({title:"Error",description:"Vehicle ID is missing",variant:"destructive"});return}const de=typeof N.id=="string"?parseInt(N.id):N.id;await e(r0(de)).unwrap(),t({title:"Success",description:"Vehicle deleted successfully"}),O(!1),C(null)}catch(de){let $e="Failed to delete vehicle";de instanceof Error?$e=de.message:typeof de=="string"&&($e=de),t({title:"Error",description:$e,variant:"destructive"})}},[L,M]=g.useState({registration_number:"",vehicle_type:"bus",capacity:40,school:E||null,driver:0,manufacturer:"",model:"",year:new Date().getFullYear(),fuel_type:"diesel",is_active:!0,mileage:0,has_gps:!0,has_camera:!0,has_emergency_button:!0});g.useEffect(()=>{E&&M(de=>({...de,school:E}))},[E]);const W=async de=>{if(de.preventDefault(),!E){t({title:"Error",description:"No school found. Please contact your administrator.",variant:"destructive"});return}try{await e(s0(L)).unwrap(),t({title:"Success",description:"Vehicle added successfully"}),n(!1),M({registration_number:"",vehicle_type:"bus",capacity:40,school:E,driver:0,manufacturer:"",model:"",year:new Date().getFullYear(),fuel_type:"diesel",is_active:!0,mileage:0,has_gps:!0,has_camera:!0,has_emergency_button:!0})}catch($e){let Ye="Failed to add vehicle";if($e instanceof Error)try{const mt=JSON.parse($e.message);typeof mt=="object"&&mt!==null?Ye=JSON.stringify(mt,null,2):Ye=$e.message}catch{Ye=$e.message}else Ye=String($e);t({title:"Error",description:Ye,variant:"destructive"})}};return i?s.jsx("div",{className:"min-h-screen bg-background p-3 flex w-full",children:s.jsx("div",{className:"flex-1",children:s.jsx("main",{className:"flex-1 bg-background",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ba,{className:"h-5 w-5 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading vehicles..."})]})})})})}):o?s.jsx("div",{className:"min-h-screen bg-background p-3 flex w-full",children:s.jsx("div",{className:"flex-1",children:s.jsx("main",{className:"flex-1 bg-background",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-destructive mb-4",children:o}),s.jsx(ce,{onClick:()=>window.location.reload(),children:"Try Again"})]})})})})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-2 sm:px-4 py-4 w-full max-w-[98vw] mx-auto",children:[s.jsxs("div",{className:"mb-2 flex justify-between",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(Li,{className:"w-8 h-8 text-[#f7c624]"})," Vehicles"]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(js,{open:r,onOpenChange:n,children:[s.jsx(mu,{asChild:!0,children:s.jsxs(ce,{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white px-4 py-2 rounded-lg shadow font-semibold transition-all duration-200",disabled:!E,title:E?"":"No school found. Please contact your administrator.",children:[s.jsx(ja,{className:"mr-2 h-4 w-4"})," Add Vehicle"]})}),s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Add New Vehicle"})}),s.jsx(wC,{formData:L,setFormData:M,onSubmit:W,loading:i,filteredDrivers:$,driversLoading:u})]})]})})]}),s.jsxs(Le,{className:"bg-white border-0 rounded-xl",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-2"}),s.jsx("div",{className:"bg-white",children:s.jsx(Te,{className:"",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ie,{placeholder:"Search vehicles by registration, manufacturer, model, or driver...",value:h,onChange:de=>p(de.target.value),className:"pl-10 pr-4 py-2 border-gray-200 focus:border-[#f7c624] focus:ring-[#f7c624] rounded-full shadow-sm"}),h&&s.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Found ",U.length," vehicle",U.length!==1?"s":""]})]}),s.jsxs(Gt,{value:f,onValueChange:y,children:[s.jsx(zt,{className:"w-full sm:w-40 border-gray-200 rounded-full shadow-sm",children:s.jsx(Kt,{placeholder:"Filter by status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Vehicles"}),s.jsx(Ee,{value:"active",children:"Active"}),s.jsx(Ee,{value:"inactive",children:"Inactive"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ce,{variant:"outline",onClick:()=>{p(""),y("all"),w(1)},className:"border-gray-200 hover:bg-gray-50 px-3 py-2 rounded-full shadow-sm",children:"Clear Filters"}),s.jsx(ku,{data:{headers:["Registration Number","Driver","Vehicle Type","Capacity","Manufacturer","Model","Year","Fuel Type","Status","Mileage","GPS","Camera","Emergency Button"],data:U.map(de=>{var $e,Ye,mt,Se,oe,vt,me;return{registration_number:de.registration_number||"",driver:$.find(xe=>(xe==null?void 0:xe.id)===de.driver)?`${((Ye=($e=$.find(xe=>(xe==null?void 0:xe.id)===de.driver))==null?void 0:$e.user_details)==null?void 0:Ye.first_name)||""} ${((Se=(mt=$.find(xe=>(xe==null?void 0:xe.id)===de.driver))==null?void 0:mt.user_details)==null?void 0:Se.last_name)||""}`:"Not Assigned",vehicle_type:de.vehicle_type||"",capacity:((oe=de.capacity)==null?void 0:oe.toString())||"",manufacturer:de.manufacturer||"",model:de.model||"",year:((vt=de.year)==null?void 0:vt.toString())||"",fuel_type:de.fuel_type||"",status:de.is_active?"Active":"Inactive",mileage:((me=de.mileage)==null?void 0:me.toString())||"",gps:de.has_gps?"Yes":"No",camera:de.has_camera?"Yes":"No",emergency_button:de.has_emergency_button?"Yes":"No"}}),fileName:"vehicles_export",title:"Vehicles Directory"},className:"border-gray-200 hover:bg-gray-50 rounded-full shadow-sm"})]})]})})})]}),s.jsx(Te,{className:"p-0",children:i?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ba,{className:"h-5 w-5 animate-spin text-primary"}),s.jsx("span",{className:"text-muted-foreground",children:"Loading vehicles..."})]})}):o?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-destructive mb-4",children:o}),s.jsx(ce,{onClick:()=>window.location.reload(),children:"Try Again"})]})}):a.length===0?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx(Li,{className:"h-12 w-12 text-muted-foreground/50"}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"No vehicles found"}),s.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Get started by adding your first vehicle"})]}),s.jsxs(ce,{onClick:()=>n(!0),className:"mt-2",disabled:!E,children:[s.jsx(ja,{className:"mr-2 h-4 w-4"}),"Add Vehicle"]})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[800px]",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Registration No."}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Driver"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Type"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Capacity"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900 text-sm",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:Q.map((de,$e)=>{var Se,oe;if(!de)return null;const Ye=$.find(vt=>(vt==null?void 0:vt.id)===de.driver),mt=Ye?`${((Se=Ye.user_details)==null?void 0:Se.first_name)||""} ${((oe=Ye.user_details)==null?void 0:oe.last_name)||""}`.trim():"Not Assigned";return s.jsxs("tr",{className:`transition-colors duration-200 ${$e%2===0?"bg-white":"bg-gray-50"} hover:bg-[#f7c624]`,children:[s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold",children:s.jsx(Li,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 text-sm",children:de.registration_number||"N/A"}),s.jsxs("div",{className:"text-xs text-gray-500",children:[de.manufacturer," ",de.model]})]})]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f7c624]/20 flex items-center justify-center text-[#f7c624] font-bold",children:mt.split(" ").map(vt=>vt[0]).join("").toUpperCase()}),s.jsx("div",{className:"text-sm text-gray-900",children:mt})]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx(Pe,{variant:"outline",className:"capitalize font-medium bg-gray-100 text-gray-700 border-gray-200",children:de.vehicle_type||"N/A"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:de.capacity||"N/A"}),s.jsx("div",{className:"text-xs text-gray-500 ml-1",children:"seats"})]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${de.is_active?"bg-[#f7c624]/20 text-[#f7c624]":"bg-gray-100 text-gray-700"}`,children:[s.jsx("span",{className:`w-2 h-2 rounded-full inline-block ${de.is_active?"bg-[#f7c624]":"bg-gray-500"}`}),de.is_active?"Active":"Inactive"]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>J(de),title:"View Details",children:s.jsx(ir,{className:"h-4 w-4"})}),s.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>q(de),title:"Edit Vehicle",children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(ce,{size:"icon",variant:"destructive",onClick:()=>Y(de),title:"Delete Vehicle",children:s.jsx(Ha,{className:"h-4 w-4"})})]})})]},de.id)})})]})}),s.jsx("div",{className:"bg-white border-t border-gray-200",children:s.jsxs("div",{className:"px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Showing"}),s.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded-md font-semibold text-gray-900",children:re+1}),s.jsx("span",{children:"to"}),s.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded-md font-semibold text-gray-900",children:Math.min(pe,U.length)}),s.jsx("span",{children:"of"}),s.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded-md font-semibold text-gray-900",children:U.length}),s.jsx("span",{children:"vehicles"})]}),U.length>0&&s.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs text-gray-500",children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["Page ",x," of ",K]})]})]}),K>1&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>w(1),disabled:x===1,className:"h-9 px-3 border-gray-300 hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(qc,{className:"h-4 w-4 mr-1"}),s.jsx(qc,{className:"h-4 w-4 -ml-2"})]}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>w(x-1),disabled:x===1,className:"h-9 px-3 border-gray-300 hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(qc,{className:"h-4 w-4 mr-1"}),"Previous"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[x>3&&K>5&&s.jsxs(s.Fragment,{children:[s.jsx(ce,{variant:"outline",size:"sm",onClick:()=>w(1),className:"h-9 w-9 p-0 border-gray-300 hover:bg-gray-50 hover:border-gray-400 font-medium",children:"1"}),x>4&&s.jsx("span",{className:"px-2 text-gray-400",children:"..."})]}),Array.from({length:K},(de,$e)=>$e+1).filter(de=>K<=5?!0:x<=3?de<=5:x>=K-2?de>=K-4:Math.abs(de-x)<=1).map(de=>s.jsx(ce,{variant:x===de?"default":"outline",size:"sm",onClick:()=>w(de),className:`h-9 w-9 p-0 font-medium transition-all duration-200 ${x===de?"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white shadow-md":"border-gray-300 hover:bg-gray-50 hover:border-gray-400"}`,children:de},de)),x<K-2&&K>5&&s.jsxs(s.Fragment,{children:[x<K-3&&s.jsx("span",{className:"px-2 text-gray-400",children:"..."}),s.jsx(ce,{variant:"outline",size:"sm",onClick:()=>w(K),className:"h-9 w-9 p-0 border-gray-300 hover:bg-gray-50 hover:border-gray-400 font-medium",children:K})]})]}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>w(x+1),disabled:x===K,className:"h-9 px-3 border-gray-300 hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",s.jsx(wl,{className:"h-4 w-4 ml-1"})]}),s.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>w(K),disabled:x===K,className:"h-9 px-3 border-gray-300 hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(wl,{className:"h-4 w-4 ml-1"}),s.jsx(wl,{className:"h-4 w-4 -mr-2"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("span",{children:"Show:"}),s.jsxs(Gt,{value:v.toString(),onValueChange:de=>{b(parseInt(de))},children:[s.jsx(zt,{className:"h-8 w-16 border-gray-300 text-xs",children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"5",children:"5"}),s.jsx(Ee,{value:"10",children:"10"}),s.jsx(Ee,{value:"20",children:"20"}),s.jsx(Ee,{value:"50",children:"50"})]})]}),s.jsx("span",{children:"per page"})]})]})})]})})]})]})}),s.jsx(js,{open:P,onOpenChange:D,children:s.jsxs(ps,{className:"max-w-2xl",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Vehicle Details"})}),N&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Registration Number"}),s.jsx("p",{children:N.registration_number||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Vehicle Type"}),s.jsx("p",{className:"capitalize",children:N.vehicle_type||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Manufacturer"}),s.jsx("p",{children:N.manufacturer||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Model"}),s.jsx("p",{children:N.model||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Year"}),s.jsx("p",{children:N.year||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Capacity"}),s.jsxs("p",{children:[N.capacity||"N/A"," passengers"]})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Fuel Type"}),s.jsx("p",{className:"capitalize",children:N.fuel_type||"N/A"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Mileage"}),s.jsxs("p",{children:[N.mileage||"N/A"," km"]})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Status"}),s.jsx(Pe,{variant:N.is_active?"default":"secondary",children:N.is_active?"Active":"Inactive"})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Driver"}),s.jsxs("p",{children:[((ge=(ae=$.find(de=>{var $e;return(($e=de==null?void 0:de.user_details)==null?void 0:$e.id)===N.driver}))==null?void 0:ae.user_details)==null?void 0:ge.first_name)||""," ",((Me=(fe=$.find(de=>{var $e;return(($e=de==null?void 0:de.user_details)==null?void 0:$e.id)===N.driver}))==null?void 0:fe.user_details)==null?void 0:Me.last_name)||"Not assigned"]})]})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"font-semibold",children:"Features"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[N.has_gps&&s.jsx(Pe,{variant:"outline",children:"GPS"}),N.has_camera&&s.jsx(Pe,{variant:"outline",children:"Camera"}),N.has_emergency_button&&s.jsx(Pe,{variant:"outline",children:"Emergency Button"})]})]})]})]})}),s.jsx(js,{open:R,onOpenChange:A,children:s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Edit Vehicle"})}),s.jsx(wC,{formData:L,setFormData:M,onSubmit:W,loading:i,filteredDrivers:$,driversLoading:u})]})}),s.jsx(ad,{open:I,onOpenChange:O,children:s.jsxs(Ll,{children:[s.jsxs(Tl,{children:[s.jsx(Il,{children:"Are you sure?"}),s.jsxs(Fl,{children:["This action cannot be undone. This will permanently delete the vehicle",N&&` "${N.registration_number}"`,"."]})]}),s.jsxs(Rl,{children:[s.jsx(Ol,{children:"Cancel"}),s.jsx(Dl,{onClick:k,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}function HX({status:e}){if(!e)return s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-600",children:"Unknown"});let t="";return e==="ongoing"?t="bg-yellow-200 text-yellow-800":e==="completed"?t="bg-green-100 text-green-700":e==="cancelled"?t="bg-red-100 text-red-600":e==="delayed"?t="bg-orange-100 text-orange-700":t="bg-gray-100 text-gray-600",s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t}`,children:e.charAt(0).toUpperCase()+e.slice(1)})}function jg({title:e,value:t,icon:r,color:n}){return s.jsx("div",{className:"bg-white rounded-lg p-6 shadow border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t})]}),s.jsx("div",{className:`p-3 rounded-full ${n}`,children:s.jsx(r,{className:"h-6 w-6 text-white"})})]})})}function WX(){const e=zl(),{reports:t,metrics:r,pagination:n,loading:a,error:i}=ca(v=>v.reports),[o,l]=g.useState(""),[c,d]=g.useState({start_date:"",end_date:""});g.useEffect(()=>{e(vc(c))},[e]);const u=(v,b)=>{const N={...c,[v]:b};d(N)},h=()=>{e(vc(c))},p=()=>{d({start_date:"",end_date:""}),e(bU()),e(vc({}))},f=v=>v?new Date(v).toLocaleString():"",y=v=>{if(v==null)return"N/A";const b=Math.floor(v/60),N=v%60;return`${b}h ${N}m`},x=v=>v==null?"N/A":`${v.toFixed(1)} km/h`,w=v=>{if(!v)return null;const b=v.split(":");if(b.length<2)return null;const N=parseInt(b[0])||0,C=parseInt(b[1])||0,P=parseFloat(b[2])||0;return N*60+C+P/60};return s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx(kn,{className:"text-[#f7c624]",size:32}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Reports"})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-center mb-6",children:[s.jsxs("div",{className:"flex items-center bg-white rounded-full px-4 py-2 shadow w-80 border border-gray-200",children:[s.jsx(Jr,{className:"text-gray-400 mr-2",size:18}),s.jsx("input",{className:"outline-none bg-transparent flex-1 text-sm placeholder-gray-400",placeholder:"Search reports, trips, students...",value:o,onChange:v=>l(v.target.value)})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-4 py-2 shadow border border-gray-200",children:[s.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"From:"}),s.jsx(on,{className:"text-gray-400 mr-1",size:16}),s.jsx("input",{type:"date",className:"text-xs bg-transparent outline-none w-28",value:c.start_date,onChange:v=>u("start_date",v.target.value)})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-4 py-2 shadow border border-gray-200",children:[s.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"To:"}),s.jsx(on,{className:"text-gray-400 mr-1",size:16}),s.jsx("input",{type:"date",className:"text-xs bg-transparent outline-none w-28",value:c.end_date,onChange:v=>u("end_date",v.target.value)})]}),s.jsxs("button",{className:"bg-[#f7c624] hover:bg-[#f7c624] text-white rounded-lg px-6 py-2 flex items-center gap-2 text-sm font-semibold shadow",onClick:h,disabled:a,children:[a?"Loading...":"Run Query"," ",s.jsx(nw,{size:16})]}),s.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white rounded-lg px-4 py-2 text-sm font-semibold shadow",onClick:p,children:"Clear Filters"})]}),i&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:i}),r&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(jg,{title:"Total Reports",value:r.summary.total_reports,icon:kn,color:"bg-blue-500"}),s.jsx(jg,{title:"Completion Rate",value:`${r.summary.completion_rate}%`,icon:Oi,color:"bg-green-500"}),s.jsx(jg,{title:"Students Picked Up",value:r.students.total_picked_up,icon:ns,color:"bg-purple-500"}),s.jsx(jg,{title:"Emergencies",value:r.safety.total_emergencies,icon:Hc,color:"bg-red-500"})]}),r&&s.jsxs("div",{className:"bg-white rounded-xl shadow p-6 mb-8 border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Performance Overview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Efficiency Score"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[r.performance.avg_efficiency_score.toFixed(1),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"On-time Pickup Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[r.performance.on_time_pickup_rate.toFixed(1),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"On-time Dropoff Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[r.performance.on_time_dropoff_rate.toFixed(1),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Duration Efficiency"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[r.performance.duration_efficiency.toFixed(1),"%"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-200 mb-8",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Trip Reports"}),n&&s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",t.length," of ",n.total_reports," reports"]})]}),a?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#f7c624] mx-auto"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Loading reports..."})]}):t.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(kn,{className:"text-gray-400 mx-auto mb-2",size:48}),s.jsx("p",{className:"text-gray-600",children:"No reports found"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50 text-gray-600",children:[s.jsx("th",{className:"px-6 py-3 text-left",children:"Trip ID"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Route"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"School"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Students"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Efficiency"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Duration"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Max Speed"}),s.jsx("th",{className:"px-6 py-3 text-left",children:"Generated"})]})}),s.jsx("tbody",{children:t.map(v=>s.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium",children:v.trip}),s.jsx("td",{className:"px-6 py-4",children:v.trip_route||"N/A"}),s.jsx("td",{className:"px-6 py-4",children:v.school_name||"N/A"}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(HX,{status:v.is_complete?"completed":"ongoing"})}),s.jsxs("td",{className:"px-6 py-4",children:[v.students_picked_up,"/",v.total_students]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:`font-semibold ${v.efficiency_score>=80?"text-green-600":v.efficiency_score>=60?"text-yellow-600":"text-red-600"}`,children:[v.efficiency_score,"%"]})}),s.jsx("td",{className:"px-6 py-4",children:y(v.actual_duration_str?w(v.actual_duration_str):null)}),s.jsx("td",{className:"px-6 py-4",children:x(v.max_speed)}),s.jsx("td",{className:"px-6 py-4 text-gray-500",children:f(v.generated_at)})]},v.id))})]})})]}),n&&n.total_pages>1&&s.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg shadow p-4 border border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",n.current_page," of ",n.total_pages]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50",disabled:!n.has_previous,onClick:()=>e(vc({...c,page:n.previous_page})),children:"Previous"}),s.jsx("button",{className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50",disabled:!n.has_next,onClick:()=>e(vc({...c,page:n.next_page})),children:"Next"})]})]})]})}const GX=["School Details","Notification Settings","Email Settings","Push Notifications","School Policies","Personalization"],KX=[{label:"SMS Notifications"},{label:"Email Notifications"},{label:"Push Notifications"}],YX=[{label:"Parents"},{label:"Drivers"},{label:"Staff"}],JX=[{title:"Trip Started",recipient:"Parents"},{title:"Trip Ended",recipient:"Parents"},{title:"SOS Alert",recipient:"Parents"},{title:"Trip Delayed",recipient:"Parents"},{title:"Trip Started",recipient:"Driver"},{title:"Trip Ended",recipient:"Driver"},{title:"Trip Delayed",recipient:"Driver"}];function ZX(){const[e,t]=g.useState(0),[r,n]=g.useState(0),[a,i]=g.useState(!1),[o,l]=g.useState({name:"",location:"",description:"",contact_number:"",email:"",operating_hours_start:"08:00",operating_hours_end:"16:00",notification_enabled:!0,allow_parent_tracking:!0,is_active:!0,longitude_point:null,latitude_point:null,school_longitude:null,school_latitude:null}),[c,d]=g.useState(!1),u=g.useRef(null),h=g.useRef(null),p=er(),{schools:f,loading:y}=Ct(A=>A.schools),{user:x}=Ct(A=>A.auth),{preferences:w={showAnalytics:!0,showRecentActivity:!0,showNotificationsPanel:!0,allowDataExport:!0,autoBackup:!0,theme:"light",language:"en"},loading:v}=Ct(A=>A.preferences),{theme:b,setTheme:N}=w5();Ar();const C=Dy,P=f.find(A=>A.admin===(x==null?void 0:x.id));g.useEffect(()=>{p(jl()),p(ep())},[p]),g.useEffect(()=>{if(window.google&&window.google.maps){D();return}const A=document.createElement("script");return A.src=`https://maps.googleapis.com/maps/api/js?key=${C}&libraries=places`,A.async=!0,A.defer=!0,A.onload=()=>{d(!0),D()},document.head.appendChild(A),()=>{const I=document.querySelector('script[src*="maps.googleapis.com"]');I&&I.remove()}},[]),g.useEffect(()=>{c&&(u.current||h.current)&&D()},[c,e]);const D=()=>{const A=document.createElement("style");if(A.textContent=`
      .pac-container {
        border-radius: 0.5rem;
        margin-top: 0.5rem;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        border: 1px solid #e5e7eb;
        background-color: white;
        z-index: 1000;
        max-height: 300px;
        overflow-y: auto;
      }
      .pac-item {
        padding: 0.75rem 1rem;
        cursor: pointer;
        font-size: 0.875rem;
        line-height: 1.25rem;
        border-bottom: 1px solid #f3f4f6;
        transition: background-color 0.2s;
      }
      .pac-item:last-child {
        border-bottom: none;
      }
      .pac-item:hover {
        background-color: #f3f4f6;
      }
      .pac-item-query {
        font-size: 0.875rem;
        color: #1f2937;
        font-weight: 500;
      }
      .pac-icon {
        margin-right: 0.75rem;
        color: #6b7280;
      }
      .pac-matched {
        font-weight: 600;
        color: #2563eb;
      }
    `,document.head.appendChild(A),u.current){const I=new google.maps.places.Autocomplete(u.current,{types:["geocode","establishment"],fields:["geometry","formatted_address","name"]});I.addListener("place_changed",()=>{var F,E;const O=I.getPlace();if(O.geometry){const $=((F=O.geometry.location)==null?void 0:F.lat())||0,U=((E=O.geometry.location)==null?void 0:E.lng())||0;l(K=>({...K,latitude_point:$,longitude_point:U,location:O.formatted_address||O.name||K.location}))}}),u.current.addEventListener("keydown",O=>{O.key==="Enter"&&O.preventDefault()})}if(h.current){const I=new google.maps.places.Autocomplete(h.current,{types:["establishment"],fields:["geometry","formatted_address","name"]});I.addListener("place_changed",()=>{var F,E;const O=I.getPlace();if(O.geometry){const $=((F=O.geometry.location)==null?void 0:F.lat())||0,U=((E=O.geometry.location)==null?void 0:E.lng())||0;l(K=>({...K,school_latitude:$,school_longitude:U}))}}),h.current.addEventListener("keydown",O=>{O.key==="Enter"&&O.preventDefault()})}};g.useEffect(()=>{var A,I;P&&l({name:P.name||"",location:P.location||"",description:P.description||"",contact_number:P.contact_number||"",email:P.email||"",operating_hours_start:((A=P.operating_hours_start)==null?void 0:A.substring(0,5))||"08:00",operating_hours_end:((I=P.operating_hours_end)==null?void 0:I.substring(0,5))||"16:00",notification_enabled:P.notification_enabled||!0,allow_parent_tracking:P.allow_parent_tracking||!0,is_active:P.is_active||!0,longitude_point:P.longitude_point||null,latitude_point:P.latitude_point||null,school_longitude:P.school_longitude||null,school_latitude:P.school_latitude||null})},[P]);const R=A=>A==null?"Not set":typeof A=="object"?"Complex data (not displayed)":String(A);return s.jsx("div",{className:"min-h-screen bg-background flex w-full",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-8 py-6 bg-background overflow-y-auto",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx(Ai,{style:{color:"#f7c624"},size:32}),s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Settings"})]}),s.jsx("div",{className:"flex gap-8 border-b mb-6 overflow-x-auto bg-background sticky top-0 z-10 py-2",children:GX.map((A,I)=>s.jsx("button",{className:`pb-2 text-lg font-medium transition-colors whitespace-nowrap ${I===e?"border-b-2":"text-muted-foreground"}`,style:{borderColor:I===e?"#f7c624":void 0,color:I===e?"#f7c624":void 0},onMouseEnter:O=>{I!==e&&(O.currentTarget.style.color="#f7c624")},onMouseLeave:O=>{I!==e&&(O.currentTarget.style.color="")},onClick:()=>t(I),children:A},A))}),e===0&&s.jsx("div",{className:"space-y-6 overflow-y-auto max-h-[calc(100vh-200px)] pr-4",children:s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(jr,{style:{color:"#f7c624"},size:24}),"School Information"]})}),s.jsx(Te,{children:y?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(ba,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading school details..."})]}):P?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"name",children:"School Name"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"location",children:"Location"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.location})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pr,{className:"h-5 w-5",style:{color:"#f7c624"}}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"School Location Search"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"school_location",children:"School Location Coordinates"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:typeof o.school_latitude=="number"&&typeof o.school_longitude=="number"?`${R(o.school_latitude)}, ${R(o.school_longitude)}`:"Not set"}),s.jsx("p",{className:"text-sm text-gray-500",children:"School-specific coordinates for precise location tracking"})]})]}),(o.latitude_point||o.longitude_point)&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(pr,{className:"h-4 w-4",style:{color:"#f7c624"}}),s.jsx("span",{children:"General coordinates set"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"latitude",children:"Latitude"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:R(o.latitude_point)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"longitude",children:"Longitude"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:R(o.longitude_point)})]})]})]}),(o.school_latitude||o.school_longitude)&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(pr,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{children:"School-specific coordinates set"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"school_latitude",children:"School Latitude"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:R(o.school_latitude)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"school_longitude",children:"School Longitude"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:R(o.school_longitude)})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"description",children:"Description"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700 min-h-[80px]",children:o.description||"No description available"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"contact_number",children:"Contact Number"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.contact_number})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"email",children:"Email"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.email})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"operating_hours_start",children:"Operating Hours Start"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.operating_hours_start})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"operating_hours_end",children:"Operating Hours End"}),s.jsx("div",{className:"p-3 bg-gray-50 border rounded-md text-gray-700",children:o.operating_hours_end})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"School Features"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"notification_enabled",children:"Enable Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow the school to send notifications to parents and drivers"})]}),s.jsx("div",{className:"p-2 bg-gray-50 border rounded-md",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${o.notification_enabled?"text-green-800":"bg-red-100 text-red-800"}`,style:{backgroundColor:o.notification_enabled?"#f7c624":void 0},children:o.notification_enabled?"Enabled":"Disabled"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"allow_parent_tracking",children:"Allow Parent Tracking"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow parents to track their children's bus location"})]}),s.jsx("div",{className:"p-2 bg-gray-50 border rounded-md",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${o.allow_parent_tracking?"text-green-800":"bg-red-100 text-red-800"}`,style:{backgroundColor:o.allow_parent_tracking?"#f7c624":void 0},children:o.allow_parent_tracking?"Enabled":"Disabled"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"is_active",children:"School Active"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Enable or disable the school account"})]}),s.jsx("div",{className:"p-2 bg-gray-50 border rounded-md",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${o.is_active?"text-green-800":"bg-red-100 text-red-800"}`,style:{backgroundColor:o.is_active?"#f7c624":void 0},children:o.is_active?"Active":"Inactive"})})]})]})]}),s.jsx("div",{className:"flex justify-end pt-6",children:s.jsx("div",{className:"text-sm text-gray-500 italic",children:"School information is read-only. Contact your administrator for updates."})})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(jr,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No school found"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have access to any school details."})]})})]})}),e===1&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap gap-12 mb-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Notification Types"}),s.jsx("div",{className:"flex flex-col gap-3",children:KX.map(A=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center",style:{backgroundColor:"#f7c624"},children:s.jsx("span",{className:"w-3 h-3 bg-white rounded-full block"})}),s.jsx("span",{className:"text-gray-700",children:A.label})]},A.label))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Notification Recipients"}),s.jsx("div",{className:"flex flex-col gap-3",children:YX.map((A,I)=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:I<2,readOnly:!0,className:"w-4 h-4",style:{accentColor:"#f7c624"}}),s.jsx("span",{className:"text-gray-700",children:A.label})]},A.label))})]}),s.jsx("div",{className:"flex-1 flex justify-end items-start",children:s.jsx("button",{className:"text-white px-4 py-2 rounded transition",style:{backgroundColor:"#f7c624"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#e6b91a",onMouseLeave:A=>A.currentTarget.style.backgroundColor="#f7c624",children:"New Message"})})]}),s.jsx("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:JX.map((A,I)=>s.jsxs("div",{className:`border rounded-lg p-4 flex justify-between items-center cursor-pointer transition ${r===I?"shadow-lg":"border-gray-200"}`,style:{borderColor:r===I?"#f7c624":void 0},onClick:()=>n(I),children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-800",children:A.title}),s.jsx("div",{className:"text-xs text-gray-500",children:A.recipient})]}),s.jsxs("button",{className:"flex items-center gap-1 hover:underline",style:{color:"#f7c624"},children:["Edit ",s.jsx(dq,{size:16})]})]},A.title+A.recipient))}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-4",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"SMS"}),s.jsx("div",{className:"font-bold text-lg text-gray-800 mb-2",children:"Trip Started"}),s.jsx("div",{className:"text-gray-700",children:"Your child's trip has started. The bus has departed from [Starting Location] and is en route. Track live updates in the app. "})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{className:"bg-white border px-8 py-2 rounded transition",style:{borderColor:"#f7c624",color:"#f7c624"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#f7c624",onMouseLeave:A=>A.currentTarget.style.backgroundColor="white",children:"Save"})})]}),e===2&&s.jsx("div",{className:"space-y-6",children:s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(Ai,{style:{color:"#f7c624"},size:24}),"Email Configuration"]})}),s.jsxs(Te,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"smtp_server",children:"SMTP Server"}),s.jsx(Ie,{id:"smtp_server",placeholder:"smtp.gmail.com",defaultValue:"smtp.gmail.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"smtp_port",children:"SMTP Port"}),s.jsx(Ie,{id:"smtp_port",placeholder:"587",defaultValue:"587"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"email_username",children:"Email Username"}),s.jsx(Ie,{id:"email_username",placeholder:"your-email@gmail.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"email_password",children:"Email Password"}),s.jsx(Ie,{id:"email_password",type:"password",placeholder:"Enter email password"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Email Templates"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"welcome_email",children:"Welcome Email"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send welcome email to new parents"})]}),s.jsx(Us,{id:"welcome_email",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"trip_notifications",children:"Trip Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send email notifications for trip updates"})]}),s.jsx(Us,{id:"trip_notifications",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"weekly_reports",children:"Weekly Reports"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send weekly trip reports to parents"})]}),s.jsx(Us,{id:"weekly_reports"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{className:"text-white",style:{backgroundColor:"#f7c624"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#e6b91a",onMouseLeave:A=>A.currentTarget.style.backgroundColor="#f7c624",children:"Save Email Settings"})})]})]})}),e===3&&s.jsx("div",{className:"space-y-6",children:s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(Ai,{style:{color:"#f7c624"},size:24}),"Push Notification Settings"]})}),s.jsxs(Te,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notification Types"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"trip_started",children:"Trip Started"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify when bus trip begins"})]}),s.jsx(Us,{id:"trip_started",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"trip_ended",children:"Trip Ended"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify when bus trip ends"})]}),s.jsx(Us,{id:"trip_ended",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"trip_delayed",children:"Trip Delayed"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify when bus is delayed"})]}),s.jsx(Us,{id:"trip_delayed",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"sos_alerts",children:"SOS Alerts"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Emergency notifications"})]}),s.jsx(Us,{id:"sos_alerts",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"route_changes",children:"Route Changes"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Notify about route modifications"})]}),s.jsx(Us,{id:"route_changes"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notification Schedule"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"quiet_hours_start",children:"Quiet Hours Start"}),s.jsx(Ie,{id:"quiet_hours_start",type:"time",defaultValue:"22:00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"quiet_hours_end",children:"Quiet Hours End"}),s.jsx(Ie,{id:"quiet_hours_end",type:"time",defaultValue:"07:00"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{className:"text-white",style:{backgroundColor:"#f7c624"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#e6b91a",onMouseLeave:A=>A.currentTarget.style.backgroundColor="#f7c624",children:"Save Push Settings"})})]})]})}),e===4&&s.jsx("div",{className:"space-y-6",children:s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(Ai,{style:{color:"#f7c624"},size:24}),"School Policies"]})}),s.jsxs(Te,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Transportation Policies"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"pickup_time",children:"Maximum Pickup Wait Time (minutes)"}),s.jsx(Ie,{id:"pickup_time",type:"number",placeholder:"15",defaultValue:"15"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"late_policy",children:"Late Student Policy"}),s.jsx(oa,{id:"late_policy",placeholder:"Enter late student policy...",rows:3,defaultValue:"Students who are more than 5 minutes late for pickup will be left behind and parents will be notified immediately."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"safety_policy",children:"Safety Policy"}),s.jsx(oa,{id:"safety_policy",placeholder:"Enter safety policy...",rows:3,defaultValue:"All students must wear seatbelts. No eating or drinking on the bus. Students must remain seated during the journey."})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Communication Policies"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"parent_notifications",children:"Parent Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow parents to receive notifications"})]}),s.jsx(Us,{id:"parent_notifications",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"driver_communication",children:"Driver Communication"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow direct communication with drivers"})]}),s.jsx(Us,{id:"driver_communication"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"emergency_contacts",children:"Emergency Contact Access"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow access to emergency contact information"})]}),s.jsx(Us,{id:"emergency_contacts",defaultChecked:!0})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{className:"text-white",style:{backgroundColor:"#f7c624"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#e6b91a",onMouseLeave:A=>A.currentTarget.style.backgroundColor="#f7c624",children:"Save Policies"})})]})]})}),e===5&&s.jsx("div",{className:"space-y-6",children:s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(Ai,{style:{color:"#f7c624"},size:24}),"Personalization Settings"]})}),s.jsx(Te,{className:"space-y-6",children:v?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(ba,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading preferences..."})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Theme & Appearance"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"theme",children:"Theme"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose how the application theme should behave. Light/Dark will override your system setting, while System will follow your OS preference."}),s.jsxs("select",{id:"theme",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 outline-none bg-background border-border text-foreground",style:{"--tw-ring-color":"#f7c624"},value:b,onChange:A=>N(A.target.value),children:[s.jsx("option",{value:"light",children:"Light Theme"}),s.jsx("option",{value:"dark",children:"Dark Theme"}),s.jsx("option",{value:"auto",children:"System"})]})]})})]})})})]})})]})})})}const XX=void 0,QX=()=>{const e=er(),t=Sa(),{toast:r}=Ar(),{profile:n,loading:a,error:i}=Ct(R=>R.profile),{user:o,token:l}=Ct(R=>R.auth),[c,d]=g.useState(null),[u,h]=g.useState(!1),[p,f]=g.useState(!1),[y,x]=g.useState({first_name:"",last_name:"",email:"",phone_number:"",user_type:""}),[w,v]=g.useState({current_password:"",new_password:"",confirm_password:""});g.useEffect(()=>{o&&(d(o),x({first_name:o.first_name||"",last_name:o.last_name||"",email:o.email||"",phone_number:o.phone_number||"",user_type:o.user_type||""}))},[o]),g.useEffect(()=>{e(Xm())},[e]);const b=R=>{const{name:A,value:I}=R.target;x(O=>({...O,[A]:I}))},N=R=>{const{name:A,value:I}=R.target;v(O=>({...O,[A]:I}))},C=async R=>{R.preventDefault();try{const A=await e(d0(y)).unwrap();d(A),r({title:"Profile Updated",description:"Your profile has been updated successfully."}),h(!1)}catch(A){r({title:"Error",description:A instanceof Error?A.message:"Failed to update profile",variant:"destructive"})}},P=async R=>{var A,I;R.preventDefault();try{if(!l){r({title:"Error",description:"No authentication token found. Please log in again.",variant:"destructive"});return}await Cr.post(`${XX}/api/change-password/`,w,{headers:{Authorization:`Bearer ${l}`}}),r({title:"Password Changed",description:"Your password has been changed successfully."}),f(!1),v({current_password:"",new_password:"",confirm_password:""})}catch(O){r({title:"Error",description:((I=(A=O.response)==null?void 0:A.data)==null?void 0:I.message)||"Failed to change password",variant:"destructive"})}},D=async()=>{try{await e(UA()).unwrap(),t("/login")}catch{r({title:"Error",description:"Failed to logout. Please try again.",variant:"destructive"})}};return a&&!n?s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})}):i&&!n?s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-500 mb-4",children:i}),s.jsx(ce,{onClick:()=>e(Xm()),children:"Retry"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-100 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Profile"}),s.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"})]}),s.jsxs(ce,{variant:"outline",className:"flex items-center gap-2",onClick:D,children:[s.jsx(nq,{className:"w-4 h-4"}),"Logout"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Le,{className:"md:col-span-1",children:[s.jsx(Be,{children:s.jsx(Ue,{children:"Profile Overview"})}),s.jsx(Te,{children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center",children:c!=null&&c.profile_image?s.jsx("img",{src:c.profile_image,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):s.jsx(ia,{className:"w-16 h-16 text-gray-400"})}),s.jsxs("div",{className:"text-center",children:[s.jsxs("h3",{className:"text-xl font-semibold",children:[c==null?void 0:c.first_name," ",c==null?void 0:c.last_name]}),s.jsx("p",{className:"text-gray-600 capitalize",children:c==null?void 0:c.user_type})]})]})})]}),s.jsxs(Le,{className:"md:col-span-2",children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between",children:[s.jsx(Ue,{children:"Profile Details"}),s.jsxs("div",{className:"space-x-2",children:[s.jsxs(ce,{variant:"outline",onClick:()=>f(!p),children:[s.jsx(ZA,{className:"w-4 h-4 mr-2"}),"Change Password"]}),s.jsx(ce,{variant:"outline",onClick:()=>h(!u),children:u?"Cancel":"Edit Profile"})]})]}),s.jsx(Te,{children:p?s.jsxs("form",{onSubmit:P,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"current_password",children:"Current Password"}),s.jsx(Ie,{id:"current_password",name:"current_password",type:"password",value:w.current_password,onChange:N,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"new_password",children:"New Password"}),s.jsx(Ie,{id:"new_password",name:"new_password",type:"password",value:w.new_password,onChange:N,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"confirm_password",children:"Confirm New Password"}),s.jsx(Ie,{id:"confirm_password",name:"confirm_password",type:"password",value:w.confirm_password,onChange:N,required:!0})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),s.jsx(ce,{type:"submit",children:"Change Password"})]})]}):s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"first_name",children:"First Name"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ia,{className:"w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"first_name",name:"first_name",value:y.first_name,onChange:b,disabled:!u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"last_name",children:"Last Name"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ia,{className:"w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"last_name",name:"last_name",value:y.last_name,onChange:b,disabled:!u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"email",children:"Email"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(va,{className:"w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"email",name:"email",type:"email",value:y.email,onChange:b,disabled:!u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"phone_number",children:"Phone Number"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Va,{className:"w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"phone_number",name:"phone_number",value:y.phone_number,onChange:b,disabled:!u})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"user_type",children:"Role"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(wn,{className:"w-5 h-5 text-gray-400"}),s.jsx(Ie,{id:"user_type",value:y.user_type,disabled:!0,className:"bg-gray-100"})]})]})]}),u&&s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(ce,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),s.jsx(ce,{type:"submit",disabled:a,children:a?"Saving...":"Save Changes"})]})]})})]})]})]})})},eQ=[{id:"starter",name:"Starter",description:"Perfect for small schools getting started",price:2900,billingCycle:"month",icon:Li,color:"bg-blue-500",maxStudents:50,maxDrivers:5,maxVehicles:3,features:["Up to 50 students","5 drivers","3 vehicles","Basic route management","Email support","Mobile app access","Real-time tracking","Basic reporting"]},{id:"professional",name:"Professional",description:"Ideal for growing schools with more students",price:7900,billingCycle:"month",icon:ns,color:"bg-[#f7c624]",maxStudents:200,maxDrivers:15,maxVehicles:10,popular:!0,features:["Up to 200 students","15 drivers","10 vehicles","Advanced route optimization","Priority email support","Custom branding","Advanced analytics","Parent notifications","Driver performance tracking","GPS tracking"]},{id:"enterprise",name:"Enterprise",description:"For large school districts and organizations",price:19900,billingCycle:"month",icon:b5,color:"bg-[#f7c624]",maxStudents:1e3,maxDrivers:50,maxVehicles:30,features:["Up to 1000 students","50 drivers","30 vehicles","Multi-school management","24/7 phone support","Custom integrations","Advanced security","White-label solution","API access","Dedicated account manager"]},{id:"premium",name:"Premium",description:"Ultimate solution for premium schools",price:39900,billingCycle:"month",icon:qd,color:"bg-[#f7c624]",maxStudents:2500,maxDrivers:100,maxVehicles:75,features:["Up to 2500 students","100 drivers","75 vehicles","AI-powered route optimization","Premium support","Custom development","Advanced security features","Multi-language support","Advanced reporting suite","Predictive analytics"]},{id:"unlimited",name:"Unlimited",description:"Unlimited everything for the biggest organizations",price:79900,billingCycle:"month",icon:aw,color:"bg-[#f7c624]",maxStudents:-1,maxDrivers:-1,maxVehicles:-1,features:["Unlimited students","Unlimited drivers","Unlimited vehicles","Enterprise-grade security","Custom SLA","On-premise deployment option","Full source code access","Custom training","Dedicated support team","Priority feature development"]},{id:"custom",name:"Custom",description:"Tailored solution for your specific needs",price:0,billingCycle:"custom",icon:Ai,color:"bg-[#f7c624]",features:["Custom pricing","Custom features","Custom integrations","Custom deployment","Custom training","Custom support","Custom branding","Custom reporting","Custom security","Custom everything"]}];function tQ(){const e=zl(),{plans:t,loading:r,error:n}=ca(y=>y.subscription),[a,i]=g.useState(null),[o,l]=g.useState("month"),{toast:c}=Ar();g.useEffect(()=>{e(Ri())},[e]);const d=y=>{var x;i(y),c({title:"Subscription Selected",description:`You've selected the ${(x=f.find(w=>w.id===y))==null?void 0:x.name} plan. Redirecting to payment...`})},u=y=>o==="year"?Math.round(y*12*.8):y,h=y=>y.id==="custom"?"Contact us":o==="year"?`KSH ${u(y.price).toLocaleString()}/year`:`KSH ${y.price.toLocaleString()}/${y.billingCycle}`,p=y=>{const x=parseFloat(y.base_price),w=parseFloat(y.price_per_student),v=parseFloat(y.price_per_bus),b=x+y.features_json.max_students*w+y.features_json.max_buses*v;return{id:y.name,name:y.name.replace(/_/g," ").replace(/\b\w/g,N=>N.toUpperCase()),description:y.description,price:b,billingCycle:y.default_billing_cycle==="annually"?"year":"month",icon:Li,color:"bg-blue-500",maxStudents:y.features_json.max_students,maxDrivers:y.features_json.max_buses,maxVehicles:y.features_json.max_buses,features:[`Up to ${y.features_json.max_students} students`,`${y.features_json.max_buses} buses`,y.features_json.sms_notifications?"SMS notifications":null,y.features_json.whatsapp_integration?"WhatsApp integration":null,y.features_json.realtime_tracking?"Real-time tracking":null,y.features_json.parent_app_access?"Parent app access":null,y.features_json.basic_reports?"Basic reports":null,y.features_json.driver_management?"Driver management":null,y.features_json.route_optimization?"Route optimization":null,y.features_json.advanced_analytics?"Advanced analytics":null,y.features_json.api_access?"API access":null].filter(Boolean)}},f=t.length>0?t.map(p):eQ;return r?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Loading Subscription Plans"}),s.jsx("p",{children:"Please wait while we fetch the latest plans..."})]})})})}):n?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("h2",{className:"text-red-800 font-semibold",children:"Error Loading Subscription Plans"}),s.jsx("p",{className:"text-red-600",children:n}),s.jsx(ce,{onClick:()=>e(Ri()),className:"mt-2",children:"Retry"})]})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:" mb-3",children:s.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Choose Your Subscripthhhhion Plan"})}),s.jsx("div",{className:"flex justify- mb-4",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1 shadow-sm border dark:border-gray-700",children:s.jsxs("div",{className:"flex",children:[s.jsx("button",{onClick:()=>l("month"),className:`px-6 py-2 rounded-md text-sm font-medium transition-colors ${o==="month"?"bg-[#f7c624] text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,children:"Monthly"}),s.jsxs("button",{onClick:()=>l("year"),className:`px-6 py-2 rounded-md text-sm font-medium transition-colors ${o==="year"?"bg-[#f7c624] text-white":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,children:["Yearly",s.jsx(Pe,{variant:"secondary",className:"ml-2 text-xs",children:"Save 20%"})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[f.map(y=>s.jsxs(Le,{className:`relative overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-105 flex flex-col h-full ${y.popular?"ring-2 ring-[#f7c624] shadow-lg bg-gradient-to-br from-[#f7c624]/20 to-white":"hover:ring-2 hover:ring-blue-200"}`,children:[y.popular&&s.jsx("div",{className:"absolute top-0 mb-3 right-0 bg-[#f7c624] text-white px-3 py-1 text-xs font-medium rounded-bl-lg",children:"Most Popular"}),s.jsxs(Be,{className:"text-center mt-1 pb-4",children:[s.jsxs("div",{className:`inline-flex items-center gap-2 p-3 rounded-full ${y.color} text-white mb-4`,children:[s.jsx(y.icon,{className:"h-6 w-6"}),s.jsxs(Ue,{className:`text-2xl ${y.color} font-bold`,children:[y.name," "]})]}),s.jsxs(ys,{className:"text-gray-600 dark:text-gray-300",children:[y.description," "]})]}),s.jsxs(Te,{className:"space-y-6 flex-1",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:[y.id==="custom"?"Custom":`KSH ${u(y.price).toLocaleString()}`," "]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:h(y)}),o==="year"&&y.id!=="custom"&&s.jsxs("div",{className:"text-sm text-[#f7c624] font-medium mt-1",children:["Save KSH"," ",(y.price*12-u(y.price)).toLocaleString(),"/year"]})," "]}),y.maxStudents!==-1&&s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center text-sm",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[y.maxStudents===-1?"":y.maxStudents," "]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Students"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[y.maxDrivers===-1?"":y.maxDrivers," "]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Drivers"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[y.maxVehicles===-1?"":y.maxVehicles," "]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Vehicles"})]})]}),s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Features:"}),s.jsxs("ul",{className:"space-y-2",children:[y.features.map((x,w)=>s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(Sn,{className:"h-4 w-4 text-[#f7c624] mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:x})]},w))," "]})]})]}),s.jsx(_5,{children:s.jsxs(ce,{onClick:()=>d(y.id),className:`w-full ${y.popular,"bg-[#f7c624] hover:bg-[#f7c624]/90"}`,variant:(y.popular,"default"),children:[y.id==="custom"?"Contact Sales":"Choose Plan"," "]})})]},y.id))," "]}),s.jsx("div",{className:"mt-16 text-center",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 shadow-sm border dark:border-gray-700",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"All Plans Include"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wn,{className:"h-6 w-6 text-[#f7c624]"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Security"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Enterprise-grade security"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vv,{className:"h-6 w-6 text-[#f7c624]"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Real-time Tracking"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Live GPS tracking"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(kn,{className:"h-6 w-6 text-[#f7c624]"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Reports"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Comprehensive analytics"})]})]})]})]})})]})})}function sQ(){const e=zl(),{plans:t,loading:r,error:n}=ca(i=>i.subscription);g.useEffect(()=>{e(Ri())},[e]);const a=i=>parseFloat(i).toLocaleString("en-US",{style:"currency",currency:"KES",minimumFractionDigits:2});return r?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx(Ds,{className:"h-8 w-64 mb-6"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(i=>s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ds,{className:"h-6 w-32 mb-2"}),s.jsx(Ds,{className:"h-4 w-48"})]}),s.jsxs(Te,{children:[s.jsx(Ds,{className:"h-8 w-24 mb-4"}),s.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(o=>s.jsx(Ds,{className:"h-4 w-full"},o))})]})]},i))})]})}):n?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("h2",{className:"text-red-800 font-semibold",children:"Error Loading Subscription Plans"}),s.jsx("p",{className:"text-red-600",children:n}),s.jsx(ce,{onClick:()=>e(Ri()),className:"mt-2",children:"Retry"})]})})}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Subscription Plans Management"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View and manage available subscription plans for schools"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>s.jsxs(Le,{className:"relative",children:[!i.is_active&&s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx(Pe,{variant:"secondary",children:"Inactive"})}),s.jsxs(Be,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ue,{className:"text-xl font-semibold",children:i.name.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())}),i.is_active&&s.jsx(Pe,{variant:"default",className:"bg-[#f7c624]",children:"Active"})]}),s.jsx(ys,{className:"text-sm",children:i.description})]}),s.jsxs(Te,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Base Price:"}),s.jsx("span",{className:"font-semibold",children:a(i.base_price)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Per Student:"}),s.jsx("span",{className:"font-semibold",children:a(i.price_per_student)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Per Bus:"}),s.jsx("span",{className:"font-semibold",children:a(i.price_per_bus)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Limits"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold",children:i.features_json.max_students}),s.jsx("div",{className:"text-gray-500",children:"Students"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold",children:i.features_json.max_parents}),s.jsx("div",{className:"text-gray-500",children:"Parents"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold",children:i.features_json.max_buses}),s.jsx("div",{className:"text-gray-500",children:"Buses"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Features"}),s.jsx("div",{className:"space-y-1",children:Object.entries(i.features_json).map(([o,l])=>typeof l=="boolean"?s.jsx("div",{className:"flex items-center justify-between text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[l?s.jsx(Sn,{className:"h-4 w-4 text-[#f7c624]"}):s.jsx(co,{className:"h-4 w-4 text-red-500"}),s.jsx("span",{className:"capitalize",children:o.replace(/_/g," ")})]})},o):null)})]}),s.jsx("div",{className:"pt-2 border-t",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Billing Cycle:"}),s.jsx(Pe,{variant:"outline",className:"capitalize",children:i.default_billing_cycle})]})})]})]},i.id))}),t.length===0&&!r&&s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[s.jsx(wn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Subscription Plans Found"}),s.jsx("p",{children:"No subscription plans are currently available."})]})})]})})}const rQ="modulepreload",nQ=function(e){return"/"+e},NC={},Lw=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=nQ(c),c in NC)return;NC[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":rQ,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var aa=Uint8Array,oi=Uint16Array,SS=Int32Array,y1=new aa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),j1=new aa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tw=new aa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),KT=function(e,t){for(var r=new oi(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new SS(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},YT=KT(y1,2),JT=YT.b,Rw=YT.r;JT[28]=258,Rw[258]=28;var ZT=KT(j1,0),aQ=ZT.b,SC=ZT.r,Iw=new oi(32768);for(var Sr=0;Sr<32768;++Sr){var lc=(Sr&43690)>>1|(Sr&21845)<<1;lc=(lc&52428)>>2|(lc&13107)<<2,lc=(lc&61680)>>4|(lc&3855)<<4,Iw[Sr]=((lc&65280)>>8|(lc&255)<<8)>>1}var Go=function(e,t,r){for(var n=e.length,a=0,i=new oi(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new oi(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new oi(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],u=t-e[a],h=o[e[a]-1]++<<u,p=h|(1<<u)-1;h<=p;++h)l[Iw[h]>>c]=d}else for(l=new oi(n),a=0;a<n;++a)e[a]&&(l[a]=Iw[o[e[a]-1]++]>>15-e[a]);return l},cd=new aa(288);for(var Sr=0;Sr<144;++Sr)cd[Sr]=8;for(var Sr=144;Sr<256;++Sr)cd[Sr]=9;for(var Sr=256;Sr<280;++Sr)cd[Sr]=7;for(var Sr=280;Sr<288;++Sr)cd[Sr]=8;var Op=new aa(32);for(var Sr=0;Sr<32;++Sr)Op[Sr]=5;var iQ=Go(cd,9,0),oQ=Go(cd,9,1),lQ=Go(Op,5,0),cQ=Go(Op,5,1),Ab=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Gi=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},Eb=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},_S=function(e){return(e+7)/8|0},XT=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new aa(e.subarray(t,r))},dQ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zi=function(e,t,r){var n=new Error(t||dQ[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Zi),!r)throw n;return n},uQ=function(e,t,r,n){var a=e.length,i=0;if(!a||t.f&&!t.l)return r||new aa(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new aa(a*3));var d=function(de){var $e=r.length;if(de>$e){var Ye=new aa(Math.max($e*2,de));Ye.set(r),r=Ye}},u=t.f||0,h=t.p||0,p=t.b||0,f=t.l,y=t.d,x=t.m,w=t.n,v=a*8;do{if(!f){u=Gi(e,h,1);var b=Gi(e,h+1,3);if(h+=3,b)if(b==1)f=oQ,y=cQ,x=9,w=5;else if(b==2){var D=Gi(e,h,31)+257,R=Gi(e,h+10,15)+4,A=D+Gi(e,h+5,31)+1;h+=14;for(var I=new aa(A),O=new aa(19),F=0;F<R;++F)O[Tw[F]]=Gi(e,h+F*3,7);h+=R*3;for(var E=Ab(O),$=(1<<E)-1,U=Go(O,E,1),F=0;F<A;){var K=U[Gi(e,h,$)];h+=K&15;var N=K>>4;if(N<16)I[F++]=N;else{var re=0,pe=0;for(N==16?(pe=3+Gi(e,h,3),h+=2,re=I[F-1]):N==17?(pe=3+Gi(e,h,7),h+=3):N==18&&(pe=11+Gi(e,h,127),h+=7);pe--;)I[F++]=re}}var Q=I.subarray(0,D),J=I.subarray(D);x=Ab(Q),w=Ab(J),f=Go(Q,x,1),y=Go(J,w,1)}else Zi(1);else{var N=_S(h)+4,C=e[N-4]|e[N-3]<<8,P=N+C;if(P>a){c&&Zi(0);break}l&&d(p+C),r.set(e.subarray(N,P),p),t.b=p+=C,t.p=h=P*8,t.f=u;continue}if(h>v){c&&Zi(0);break}}l&&d(p+131072);for(var q=(1<<x)-1,Y=(1<<w)-1,k=h;;k=h){var re=f[Eb(e,h)&q],L=re>>4;if(h+=re&15,h>v){c&&Zi(0);break}if(re||Zi(2),L<256)r[p++]=L;else if(L==256){k=h,f=null;break}else{var M=L-254;if(L>264){var F=L-257,W=y1[F];M=Gi(e,h,(1<<W)-1)+JT[F],h+=W}var se=y[Eb(e,h)&Y],ae=se>>4;se||Zi(3),h+=se&15;var J=aQ[ae];if(ae>3){var W=j1[ae];J+=Eb(e,h)&(1<<W)-1,h+=W}if(h>v){c&&Zi(0);break}l&&d(p+131072);var ge=p+M;if(p<J){var fe=i-J,Me=Math.min(J,ge);for(fe+p<0&&Zi(3);p<Me;++p)r[p]=n[fe+p]}for(;p<ge;++p)r[p]=r[p-J]}}t.l=f,t.p=k,t.b=p,t.f=u,f&&(u=1,t.m=x,t.d=y,t.n=w)}while(!u);return p!=r.length&&o?XT(r,0,p):r.subarray(0,p)},ul=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},km=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},Lb=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:eR,l:0};if(a==1){var o=new aa(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(P,D){return P.f-D.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=a-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var p=i[0].s,n=1;n<a;++n)i[n].s>p&&(p=i[n].s);var f=new oi(p+1),y=Fw(r[u-1],f,0);if(y>t){var n=0,x=0,w=y-t,v=1<<w;for(i.sort(function(D,R){return f[R.s]-f[D.s]||D.f-R.f});n<a;++n){var b=i[n].s;if(f[b]>t)x+=v-(1<<y-f[b]),f[b]=t;else break}for(x>>=w;x>0;){var N=i[n].s;f[N]<t?x-=1<<t-f[N]++-1:++n}for(;n>=0&&x;--n){var C=i[n].s;f[C]==t&&(--f[C],++x)}y=t}return{t:new aa(f),l:y}},Fw=function(e,t,r){return e.s==-1?Math.max(Fw(e.l,t,r+1),Fw(e.r,t,r+1)):t[e.s]=r},_C=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new oi(++t),n=0,a=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Pm=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},QT=function(e,t,r){var n=r.length,a=_S(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},CC=function(e,t,r,n,a,i,o,l,c,d,u){ul(t,u++,r),++a[256];for(var h=Lb(a,15),p=h.t,f=h.l,y=Lb(i,15),x=y.t,w=y.l,v=_C(p),b=v.c,N=v.n,C=_C(x),P=C.c,D=C.n,R=new oi(19),A=0;A<b.length;++A)++R[b[A]&31];for(var A=0;A<P.length;++A)++R[P[A]&31];for(var I=Lb(R,7),O=I.t,F=I.l,E=19;E>4&&!O[Tw[E-1]];--E);var $=d+5<<3,U=Pm(a,cd)+Pm(i,Op)+o,K=Pm(a,p)+Pm(i,x)+o+14+3*E+Pm(R,O)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&$<=U&&$<=K)return QT(t,u,e.subarray(c,c+d));var re,pe,Q,J;if(ul(t,u,1+(K<U)),u+=2,K<U){re=Go(p,f,0),pe=p,Q=Go(x,w,0),J=x;var q=Go(O,F,0);ul(t,u,N-257),ul(t,u+5,D-1),ul(t,u+10,E-4),u+=14;for(var A=0;A<E;++A)ul(t,u+3*A,O[Tw[A]]);u+=3*E;for(var Y=[b,P],k=0;k<2;++k)for(var L=Y[k],A=0;A<L.length;++A){var M=L[A]&31;ul(t,u,q[M]),u+=O[M],M>15&&(ul(t,u,L[A]>>5&127),u+=L[A]>>12)}}else re=iQ,pe=cd,Q=lQ,J=Op;for(var A=0;A<l;++A){var W=n[A];if(W>255){var M=W>>18&31;km(t,u,re[M+257]),u+=pe[M+257],M>7&&(ul(t,u,W>>23&31),u+=y1[M]);var se=W&31;km(t,u,Q[se]),u+=J[se],se>3&&(km(t,u,W>>5&8191),u+=j1[se])}else km(t,u,re[W]),u+=pe[W]}return km(t,u,re[256]),u+pe[256]},hQ=new SS([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),eR=new aa(0),fQ=function(e,t,r,n,a,i){var o=i.z||e.length,l=new aa(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=hQ[t-1],p=h>>13,f=h&8191,y=(1<<r)-1,x=i.p||new oi(32768),w=i.h||new oi(y+1),v=Math.ceil(r/3),b=2*v,N=function(mt){return(e[mt]^e[mt+1]<<v^e[mt+2]<<b)&y},C=new SS(25e3),P=new oi(288),D=new oi(32),R=0,A=0,I=i.i||0,O=0,F=i.w||0,E=0;I+2<o;++I){var $=N(I),U=I&32767,K=w[$];if(x[U]=K,w[$]=U,F<=I){var re=o-I;if((R>7e3||O>24576)&&(re>423||!d)){u=CC(e,c,0,C,P,D,A,O,E,I-E,u),O=R=A=0,E=I;for(var pe=0;pe<286;++pe)P[pe]=0;for(var pe=0;pe<30;++pe)D[pe]=0}var Q=2,J=0,q=f,Y=U-K&32767;if(re>2&&$==N(I-Y))for(var k=Math.min(p,re)-1,L=Math.min(32767,I),M=Math.min(258,re);Y<=L&&--q&&U!=K;){if(e[I+Q]==e[I+Q-Y]){for(var W=0;W<M&&e[I+W]==e[I+W-Y];++W);if(W>Q){if(Q=W,J=Y,W>k)break;for(var se=Math.min(Y,W-2),ae=0,pe=0;pe<se;++pe){var ge=I-Y+pe&32767,fe=x[ge],Me=ge-fe&32767;Me>ae&&(ae=Me,K=ge)}}}U=K,K=x[U],Y+=U-K&32767}if(J){C[O++]=268435456|Rw[Q]<<18|SC[J];var de=Rw[Q]&31,$e=SC[J]&31;A+=y1[de]+j1[$e],++P[257+de],++D[$e],F=I+Q,++R}else C[O++]=e[I],++P[e[I]]}}for(I=Math.max(I,F);I<o;++I)C[O++]=e[I],++P[e[I]];u=CC(e,c,d,C,P,D,A,O,E,I-E,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=w,i.p=x,i.i=I,i.w=F)}else{for(var I=i.w||0;I<o+d;I+=65535){var Ye=I+65535;Ye>=o&&(c[u/8|0]=d,Ye=o),u=QT(c,u+1,e.subarray(I,Ye))}i.i=o}return XT(l,0,n+_S(u)+a)},tR=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},mQ=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new aa(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return fQ(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},sR=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},pQ=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=tR();a.p(t.dictionary),sR(e,2,a.d())}},xQ=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Zi(6,"invalid zlib data"),(e[1]>>5&1)==1&&Zi(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Dw(e,t){t||(t={});var r=tR();r.p(e);var n=mQ(e,t,t.dictionary?6:2,4);return pQ(n,t),sR(n,n.length-4,r.d()),n}function gQ(e,t){return uQ(e.subarray(xQ(e),-4),{i:2},t,t)}var vQ=typeof TextDecoder<"u"&&new TextDecoder,yQ=0;try{vQ.decode(eR,{stream:!0}),yQ=1}catch{}var ss=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Tb(){ss.console&&typeof ss.console.log=="function"&&ss.console.log.apply(ss.console,arguments)}var mr={log:Tb,warn:function(e){ss.console&&(typeof ss.console.warn=="function"?ss.console.warn.apply(ss.console,arguments):Tb.call(null,arguments))},error:function(e){ss.console&&(typeof ss.console.error=="function"?ss.console.error.apply(ss.console,arguments):Tb(e))}};function Rb(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Od(n.response,t,r)},n.onerror=function(){mr.error("could not download file")},n.send()}function kC(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function bg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ip,Ow,Od=ss.saveAs||((typeof window>"u"?"undefined":Gs(window))!=="object"||window!==ss?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=ss.URL||ss.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?kC(a.href)?Rb(e,t,r):bg(a,a.target="_blank"):bg(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){bg(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(kC(e))Rb(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){bg(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Gs(i)!=="object"&&(mr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return Rb(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(ss.HTMLElement)||ss.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Gs(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(e)}else{var c=ss.URL||ss.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function rR(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ib(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=Zn(r,n,a,i,t[0],7,-680876936),i=Zn(i,r,n,a,t[1],12,-389564586),a=Zn(a,i,r,n,t[2],17,606105819),n=Zn(n,a,i,r,t[3],22,-1044525330),r=Zn(r,n,a,i,t[4],7,-176418897),i=Zn(i,r,n,a,t[5],12,1200080426),a=Zn(a,i,r,n,t[6],17,-1473231341),n=Zn(n,a,i,r,t[7],22,-45705983),r=Zn(r,n,a,i,t[8],7,1770035416),i=Zn(i,r,n,a,t[9],12,-1958414417),a=Zn(a,i,r,n,t[10],17,-42063),n=Zn(n,a,i,r,t[11],22,-1990404162),r=Zn(r,n,a,i,t[12],7,1804603682),i=Zn(i,r,n,a,t[13],12,-40341101),a=Zn(a,i,r,n,t[14],17,-1502002290),r=Xn(r,n=Zn(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Xn(i,r,n,a,t[6],9,-1069501632),a=Xn(a,i,r,n,t[11],14,643717713),n=Xn(n,a,i,r,t[0],20,-373897302),r=Xn(r,n,a,i,t[5],5,-701558691),i=Xn(i,r,n,a,t[10],9,38016083),a=Xn(a,i,r,n,t[15],14,-660478335),n=Xn(n,a,i,r,t[4],20,-405537848),r=Xn(r,n,a,i,t[9],5,568446438),i=Xn(i,r,n,a,t[14],9,-1019803690),a=Xn(a,i,r,n,t[3],14,-187363961),n=Xn(n,a,i,r,t[8],20,1163531501),r=Xn(r,n,a,i,t[13],5,-1444681467),i=Xn(i,r,n,a,t[2],9,-51403784),a=Xn(a,i,r,n,t[7],14,1735328473),r=Qn(r,n=Xn(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Qn(i,r,n,a,t[8],11,-2022574463),a=Qn(a,i,r,n,t[11],16,1839030562),n=Qn(n,a,i,r,t[14],23,-35309556),r=Qn(r,n,a,i,t[1],4,-1530992060),i=Qn(i,r,n,a,t[4],11,1272893353),a=Qn(a,i,r,n,t[7],16,-155497632),n=Qn(n,a,i,r,t[10],23,-1094730640),r=Qn(r,n,a,i,t[13],4,681279174),i=Qn(i,r,n,a,t[0],11,-358537222),a=Qn(a,i,r,n,t[3],16,-722521979),n=Qn(n,a,i,r,t[6],23,76029189),r=Qn(r,n,a,i,t[9],4,-640364487),i=Qn(i,r,n,a,t[12],11,-421815835),a=Qn(a,i,r,n,t[15],16,530742520),r=ea(r,n=Qn(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=ea(i,r,n,a,t[7],10,1126891415),a=ea(a,i,r,n,t[14],15,-1416354905),n=ea(n,a,i,r,t[5],21,-57434055),r=ea(r,n,a,i,t[12],6,1700485571),i=ea(i,r,n,a,t[3],10,-1894986606),a=ea(a,i,r,n,t[10],15,-1051523),n=ea(n,a,i,r,t[1],21,-2054922799),r=ea(r,n,a,i,t[8],6,1873313359),i=ea(i,r,n,a,t[15],10,-30611744),a=ea(a,i,r,n,t[6],15,-1560198380),n=ea(n,a,i,r,t[13],21,1309151649),r=ea(r,n,a,i,t[4],6,-145523070),i=ea(i,r,n,a,t[11],10,-1120210379),a=ea(a,i,r,n,t[2],15,718787259),n=ea(n,a,i,r,t[9],21,-343485551),e[0]=Ec(r,e[0]),e[1]=Ec(n,e[1]),e[2]=Ec(a,e[2]),e[3]=Ec(i,e[3])}function b1(e,t,r,n,a,i){return t=Ec(Ec(t,e),Ec(n,i)),Ec(t<<a|t>>>32-a,r)}function Zn(e,t,r,n,a,i,o){return b1(t&r|~t&n,e,t,a,i,o)}function Xn(e,t,r,n,a,i,o){return b1(t&n|r&~n,e,t,a,i,o)}function Qn(e,t,r,n,a,i,o){return b1(t^r^n,e,t,a,i,o)}function ea(e,t,r,n,a,i,o){return b1(r^(t|~n),e,t,a,i,o)}function nR(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Ib(n,jQ(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(Ib(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,Ib(n,a),n}function jQ(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}ip=ss.atob.bind(ss),Ow=ss.btoa.bind(ss);var PC="0123456789abcdef".split("");function bQ(e){for(var t="",r=0;r<4;r++)t+=PC[e>>8*r+4&15]+PC[e>>8*r&15];return t}function wQ(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Mw(e){return nR(e).map(wQ).join("")}var NQ=function(e){for(var t=0;t<e.length;t++)e[t]=bQ(e[t]);return e.join("")}(nR("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ec(e,t){if(NQ){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $w(e,t){var r,n,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,n=l}else l=n;var h=t.length,p=0,f=0,y="";for(c=0;c<h;c++)f=(f+(u=l[p=(p+1)%256]))%256,l[p]=l[f],l[f]=u,o=l[(l[p]+l[f])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var AC={print:4,modify:8,copy:16,"annot-forms":32};function dh(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(AC.perm!==void 0)throw new Error("Invalid permission: "+l);a+=AC[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=Mw(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=$w(this.encryptionKey,this.padding)}function uh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function EC(e){if(Gs(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){ss.console&&mr.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function zv(e){if(!(this instanceof zv))return new zv(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function aR(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Md(e,t,r,n,a){if(!(this instanceof Md))return new Md(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,aR.call(this,n,a)}function Sh(e,t,r,n,a){if(!(this instanceof Sh))return new Sh(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,aR.call(this,n,a)}function es(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Gs(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=EC;var y="1.3",x=f.__private__.getPdfVersion=function(){return y};f.__private__.setPdfVersion=function(S){y=S};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return w};var v=f.__private__.getPageFormat=function(S){return w[S]};a=a||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},N=b.COMPAT;function C(){this.saveGraphicsState(),oe(new Vt(Ne,0,0,-Ne,0,Gl()*Ne).toString()+" cm"),this.setFontSize(this.getFontSize()/Ne),d="n",N=b.ADVANCED}function P(){this.restoreGraphicsState(),d="S",N=b.COMPAT}var D=f.__private__.combineFontStyleAndFontWeight=function(S,z){if(S=="bold"&&z=="normal"||S=="bold"&&z==400||S=="normal"&&z=="italic"||S=="bold"&&z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return z&&(S=z==400||z==="normal"?S==="italic"?"italic":"normal":z!=700&&z!=="bold"||S!=="normal"?(z==700?"bold":z)+""+S:"bold"),S};f.advancedAPI=function(S){var z=N===b.COMPAT;return z&&C.call(this),typeof S!="function"||(S(this),z&&P.call(this)),this},f.compatAPI=function(S){var z=N===b.ADVANCED;return z&&P.call(this),typeof S!="function"||(S(this),z&&C.call(this)),this},f.isAdvancedAPI=function(){return N===b.ADVANCED};var R,A=function(S){if(N!==b.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=f.roundToPrecision=f.__private__.roundToPrecision=function(S,z){var le=t||z;if(isNaN(S)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(le).replace(/0+$/,"")};R=f.hpf=f.__private__.hpf=typeof c=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return I(S,c)}:c==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return I(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return I(S,16)};var O=f.f2=f.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return I(S,2)},F=f.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return I(S,3)},E=f.scale=f.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return N===b.COMPAT?S*Ne:N===b.ADVANCED?S:void 0},$=function(S){return N===b.COMPAT?Gl()-S:N===b.ADVANCED?S:void 0},U=function(S){return E($(S))};f.__private__.setPrecision=f.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(t=parseInt(S,10))};var K,re="00000000000000000000000000000000",pe=f.__private__.getFileId=function(){return re},Q=f.__private__.setFileId=function(S){return re=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Wn=new dh(u.userPermissions,u.userPassword,u.ownerPassword,re)),re};f.setFileId=function(S){return Q(S),this},f.getFileId=function(){return pe()};var J=f.__private__.convertDateToPDFDate=function(S){var z=S.getTimezoneOffset(),le=z<0?"+":"-",ye=Math.floor(Math.abs(z/60)),Ae=Math.abs(z%60),Je=[le,M(ye),"'",M(Ae),"'"].join("");return["D:",S.getFullYear(),M(S.getMonth()+1),M(S.getDate()),M(S.getHours()),M(S.getMinutes()),M(S.getSeconds()),Je].join("")},q=f.__private__.convertPDFDateToDate=function(S){var z=parseInt(S.substr(2,4),10),le=parseInt(S.substr(6,2),10)-1,ye=parseInt(S.substr(8,2),10),Ae=parseInt(S.substr(10,2),10),Je=parseInt(S.substr(12,2),10),ot=parseInt(S.substr(14,2),10);return new Date(z,le,ye,Ae,Je,ot,0)},Y=f.__private__.setCreationDate=function(S){var z;if(S===void 0&&(S=new Date),S instanceof Date)z=J(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");z=S}return K=z},k=f.__private__.getCreationDate=function(S){var z=K;return S==="jsDate"&&(z=q(K)),z};f.setCreationDate=function(S){return Y(S),this},f.getCreationDate=function(S){return k(S)};var L,M=f.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},W=f.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},se=0,ae=[],ge=[],fe=0,Me=[],de=[],$e=!1,Ye=ge,mt=function(){se=0,fe=0,ge=[],ae=[],Me=[],Ea=sr(),Oe=sr()};f.__private__.setCustomOutputDestination=function(S){$e=!0,Ye=S};var Se=function(S){$e||(Ye=S)};f.__private__.resetCustomOutputDestination=function(){$e=!1,Ye=ge};var oe=f.__private__.out=function(S){return S=S.toString(),fe+=S.length+1,Ye.push(S),Ye},vt=f.__private__.write=function(S){return oe(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},me=f.__private__.getArrayBuffer=function(S){for(var z=S.length,le=new ArrayBuffer(z),ye=new Uint8Array(le);z--;)ye[z]=S.charCodeAt(z);return le},xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return xe};var ee=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(S){return ee=N===b.ADVANCED?S/Ne:S,this};var ue,ve=f.__private__.getFontSize=f.getFontSize=function(){return N===b.COMPAT?ee:ee*Ne},qe=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(S){return qe=S,this},f.__private__.getR2L=f.getR2L=function(){return qe};var We,ze=f.__private__.setZoomMode=function(S){var z=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))ue=S;else if(isNaN(S)){if(z.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');ue=S}else ue=parseInt(S,10)};f.__private__.getZoomMode=function(){return ue};var rt,_t=f.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');We=S};f.__private__.getPageMode=function(){return We};var we=f.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');rt=S};f.__private__.getLayoutMode=function(){return rt},f.__private__.setDisplayMode=f.setDisplayMode=function(S,z,le){return ze(S),we(z),_t(le),this};var te={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(S){if(Object.keys(te).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return te[S]},f.__private__.getDocumentProperties=function(){return te},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(S){for(var z in te)te.hasOwnProperty(z)&&S[z]&&(te[z]=S[z]);return this},f.__private__.setDocumentProperty=function(S,z){if(Object.keys(te).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return te[S]=z};var he,Ne,Ve,Ke,lt,tt={},pt={},Yt=[],Dt={},ks={},wt={},ws={},ts=null,qt=0,kt=[],Ce=new EC(f),dt=e.hotfixes||[],yt={},Xt={},tr=[],Vt=function S(z,le,ye,Ae,Je,ot){if(!(this instanceof S))return new S(z,le,ye,Ae,Je,ot);isNaN(z)&&(z=1),isNaN(le)&&(le=0),isNaN(ye)&&(ye=0),isNaN(Ae)&&(Ae=1),isNaN(Je)&&(Je=0),isNaN(ot)&&(ot=0),this._matrix=[z,le,ye,Ae,Je,ot]};Object.defineProperty(Vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Vt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(S)},Vt.prototype.multiply=function(S){var z=S.sx*this.sx+S.shy*this.shx,le=S.sx*this.shy+S.shy*this.sy,ye=S.shx*this.sx+S.sy*this.shx,Ae=S.shx*this.shy+S.sy*this.sy,Je=S.tx*this.sx+S.ty*this.shx+this.tx,ot=S.tx*this.shy+S.ty*this.sy+this.ty;return new Vt(z,le,ye,Ae,Je,ot)},Vt.prototype.decompose=function(){var S=this.sx,z=this.shy,le=this.shx,ye=this.sy,Ae=this.tx,Je=this.ty,ot=Math.sqrt(S*S+z*z),Et=(S/=ot)*le+(z/=ot)*ye;le-=S*Et,ye-=z*Et;var Zt=Math.sqrt(le*le+ye*ye);return Et/=Zt,S*(ye/=Zt)<z*(le/=Zt)&&(S=-S,z=-z,Et=-Et,ot=-ot),{scale:new Vt(ot,0,0,Zt,0,0),translate:new Vt(1,0,0,1,Ae,Je),rotate:new Vt(S,z,-z,S,0,0),skew:new Vt(1,0,Et,1,0,0)}},Vt.prototype.toString=function(S){return this.join(" ")},Vt.prototype.inversed=function(){var S=this.sx,z=this.shy,le=this.shx,ye=this.sy,Ae=this.tx,Je=this.ty,ot=1/(S*ye-z*le),Et=ye*ot,Zt=-z*ot,us=-le*ot,os=S*ot;return new Vt(Et,Zt,us,os,-Et*Ae-us*Je,-Zt*Ae-os*Je)},Vt.prototype.applyToPoint=function(S){var z=S.x*this.sx+S.y*this.shx+this.tx,le=S.x*this.shy+S.y*this.sy+this.ty;return new Fu(z,le)},Vt.prototype.applyToRectangle=function(S){var z=this.applyToPoint(S),le=this.applyToPoint(new Fu(S.x+S.w,S.y+S.h));return new Hf(z.x,z.y,le.x-z.x,le.y-z.y)},Vt.prototype.clone=function(){var S=this.sx,z=this.shy,le=this.shx,ye=this.sy,Ae=this.tx,Je=this.ty;return new Vt(S,z,le,ye,Ae,Je)},f.Matrix=Vt;var ln=f.matrixMult=function(S,z){return z.multiply(S)},fn=new Vt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=fn;var Ir=function(S,z){if(!ks[S]){var le=(z instanceof Md?"Sh":"P")+(Object.keys(Dt).length+1).toString(10);z.id=le,ks[S]=le,Dt[le]=z,Ce.publish("addPattern",z)}};f.ShadingPattern=Md,f.TilingPattern=Sh,f.addShadingPattern=function(S,z){return A("addShadingPattern()"),Ir(S,z),this},f.beginTilingPattern=function(S){A("beginTilingPattern()"),jx(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},f.endTilingPattern=function(S,z){A("endTilingPattern()"),z.stream=de[L].join(`
`),Ir(S,z),Ce.publish("endTilingPattern",z),tr.pop().restore()};var hr=f.__private__.newObject=function(){var S=sr();return Br(S,!0),S},sr=f.__private__.newObjectDeferred=function(){return se++,ae[se]=function(){return fe},se},Br=function(S,z){return z=typeof z=="boolean"&&z,ae[S]=fe,z&&oe(S+" 0 obj"),S},zi=f.__private__.newAdditionalObject=function(){var S={objId:sr(),content:""};return Me.push(S),S},Ea=sr(),Oe=sr(),Ze=f.__private__.decodeColorString=function(S){var z=S.split(" ");if(z.length!==2||z[1]!=="g"&&z[1]!=="G")z.length===5&&(z[4]==="k"||z[4]==="K")&&(z=[(1-z[0])*(1-z[3]),(1-z[1])*(1-z[3]),(1-z[2])*(1-z[3]),"r"]);else{var le=parseFloat(z[0]);z=[le,le,le,"r"]}for(var ye="#",Ae=0;Ae<3;Ae++)ye+=("0"+Math.floor(255*parseFloat(z[Ae])).toString(16)).slice(-2);return ye},Rt=f.__private__.encodeColorString=function(S){var z;typeof S=="string"&&(S={ch1:S});var le=S.ch1,ye=S.ch2,Ae=S.ch3,Je=S.ch4,ot=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var Et=new rR(le);if(Et.ok)le=Et.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var Zt=parseInt(le.substr(1),16);le=Zt>>16&255,ye=Zt>>8&255,Ae=255&Zt}if(ye===void 0||Je===void 0&&le===ye&&ye===Ae)if(typeof le=="string")z=le+" "+ot[0];else switch(S.precision){case 2:z=O(le/255)+" "+ot[0];break;case 3:default:z=F(le/255)+" "+ot[0]}else if(Je===void 0||Gs(Je)==="object"){if(Je&&!isNaN(Je.a)&&Je.a===0)return z=["1.","1.","1.",ot[1]].join(" ");if(typeof le=="string")z=[le,ye,Ae,ot[1]].join(" ");else switch(S.precision){case 2:z=[O(le/255),O(ye/255),O(Ae/255),ot[1]].join(" ");break;default:case 3:z=[F(le/255),F(ye/255),F(Ae/255),ot[1]].join(" ")}}else if(typeof le=="string")z=[le,ye,Ae,Je,ot[2]].join(" ");else switch(S.precision){case 2:z=[O(le),O(ye),O(Ae),O(Je),ot[2]].join(" ");break;case 3:default:z=[F(le),F(ye),F(Ae),F(Je),ot[2]].join(" ")}return z},as=f.__private__.getFilters=function(){return o},Ns=f.__private__.putStream=function(S){var z=(S=S||{}).data||"",le=S.filters||as(),ye=S.alreadyAppliedFilters||[],Ae=S.addLength1||!1,Je=z.length,ot=S.objectId,Et=function(Gn){return Gn};if(u!==null&&ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Et=Wn.encryptor(ot,0));var Zt={};le===!0&&(le=["FlateEncode"]);var us=S.additionalKeyValues||[],os=(Zt=es.API.processDataByFilters!==void 0?es.API.processDataByFilters(z,le):{data:z,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(Zt.data.length!==0&&(us.push({key:"Length",value:Zt.data.length}),Ae===!0&&us.push({key:"Length1",value:Je})),os.length!=0)if(os.split("/").length-1==1)us.push({key:"Filter",value:os});else{us.push({key:"Filter",value:"["+os+"]"});for(var Rs=0;Rs<us.length;Rs+=1)if(us[Rs].key==="DecodeParms"){for(var Er=[],Fr=0;Fr<Zt.reverseChain.split("/").length-1;Fr+=1)Er.push("null");Er.push(us[Rs].value),us[Rs].value="["+Er.join(" ")+"]"}}oe("<<");for(var tn=0;tn<us.length;tn++)oe("/"+us[tn].key+" "+us[tn].value);oe(">>"),Zt.data.length!==0&&(oe("stream"),oe(Et(Zt.data)),oe("endstream"))},Zs=f.__private__.putPage=function(S){var z=S.number,le=S.data,ye=S.objId,Ae=S.contentsObjId;Br(ye,!0),oe("<</Type /Page"),oe("/Parent "+S.rootDictionaryObjId+" 0 R"),oe("/Resources "+S.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(R(S.mediaBox.bottomLeftX))+" "+parseFloat(R(S.mediaBox.bottomLeftY))+" "+R(S.mediaBox.topRightX)+" "+R(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&oe("/CropBox ["+R(S.cropBox.bottomLeftX)+" "+R(S.cropBox.bottomLeftY)+" "+R(S.cropBox.topRightX)+" "+R(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&oe("/BleedBox ["+R(S.bleedBox.bottomLeftX)+" "+R(S.bleedBox.bottomLeftY)+" "+R(S.bleedBox.topRightX)+" "+R(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&oe("/TrimBox ["+R(S.trimBox.bottomLeftX)+" "+R(S.trimBox.bottomLeftY)+" "+R(S.trimBox.topRightX)+" "+R(S.trimBox.topRightY)+"]"),S.artBox!==null&&oe("/ArtBox ["+R(S.artBox.bottomLeftX)+" "+R(S.artBox.bottomLeftY)+" "+R(S.artBox.topRightX)+" "+R(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&oe("/UserUnit "+S.userUnit),Ce.publish("putPage",{objId:ye,pageContext:kt[z],pageNumber:z,page:le}),oe("/Contents "+Ae+" 0 R"),oe(">>"),oe("endobj");var Je=le.join(`
`);return N===b.ADVANCED&&(Je+=`
Q`),Br(Ae,!0),Ns({data:Je,filters:as(),objectId:Ae}),oe("endobj"),ye},xr=f.__private__.putPages=function(){var S,z,le=[];for(S=1;S<=qt;S++)kt[S].objId=sr(),kt[S].contentsObjId=sr();for(S=1;S<=qt;S++)le.push(Zs({number:S,data:de[S],objId:kt[S].objId,contentsObjId:kt[S].contentsObjId,mediaBox:kt[S].mediaBox,cropBox:kt[S].cropBox,bleedBox:kt[S].bleedBox,trimBox:kt[S].trimBox,artBox:kt[S].artBox,userUnit:kt[S].userUnit,rootDictionaryObjId:Ea,resourceDictionaryObjId:Oe}));Br(Ea,!0),oe("<</Type /Pages");var ye="/Kids [";for(z=0;z<qt;z++)ye+=le[z]+" 0 R ";oe(ye+"]"),oe("/Count "+qt),oe(">>"),oe("endobj"),Ce.publish("postPutPages")},Ts=function(S){Ce.publish("putFont",{font:S,out:oe,newObject:hr,putStream:Ns}),S.isAlreadyPutted!==!0&&(S.objectNumber=hr(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+uh(S.postScriptName)),oe("/Subtype /Type1"),typeof S.encoding=="string"&&oe("/Encoding /"+S.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},Ms=function(){for(var S in tt)tt.hasOwnProperty(S)&&(h===!1||h===!0&&p.hasOwnProperty(S))&&Ts(tt[S])},Z=function(S){S.objectNumber=hr();var z=[];z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Form"}),z.push({key:"BBox",value:"["+[R(S.x),R(S.y),R(S.x+S.width),R(S.y+S.height)].join(" ")+"]"}),z.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var le=S.pages[1].join(`
`);Ns({data:le,additionalKeyValues:z,objectId:S.objectNumber}),oe("endobj")},Re=function(){for(var S in yt)yt.hasOwnProperty(S)&&Z(yt[S])},nt=function(S,z){var le,ye=[],Ae=1/(z-1);for(le=0;le<1;le+=Ae)ye.push(le);if(ye.push(1),S[0].offset!=0){var Je={offset:0,color:S[0].color};S.unshift(Je)}if(S[S.length-1].offset!=1){var ot={offset:1,color:S[S.length-1].color};S.push(ot)}for(var Et="",Zt=0,us=0;us<ye.length;us++){for(le=ye[us];le>S[Zt+1].offset;)Zt++;var os=S[Zt].offset,Rs=(le-os)/(S[Zt+1].offset-os),Er=S[Zt].color,Fr=S[Zt+1].color;Et+=W(Math.round((1-Rs)*Er[0]+Rs*Fr[0]).toString(16))+W(Math.round((1-Rs)*Er[1]+Rs*Fr[1]).toString(16))+W(Math.round((1-Rs)*Er[2]+Rs*Fr[2]).toString(16))}return Et.trim()},At=function(S,z){z||(z=21);var le=hr(),ye=nt(S.colors,z),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+z+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ns({data:ye,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),oe("endobj"),S.objectNumber=hr(),oe("<< /ShadingType "+S.type),oe("/ColorSpace /DeviceRGB");var Je="/Coords ["+R(parseFloat(S.coords[0]))+" "+R(parseFloat(S.coords[1]))+" ";S.type===2?Je+=R(parseFloat(S.coords[2]))+" "+R(parseFloat(S.coords[3])):Je+=R(parseFloat(S.coords[2]))+" "+R(parseFloat(S.coords[3]))+" "+R(parseFloat(S.coords[4]))+" "+R(parseFloat(S.coords[5])),oe(Je+="]"),S.matrix&&oe("/Matrix ["+S.matrix.toString()+"]"),oe("/Function "+le+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},jt=function(S,z){var le=sr(),ye=hr();z.push({resourcesOid:le,objectOid:ye}),S.objectNumber=ye;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+S.boundingBox.map(R).join(" ")+"]"}),Ae.push({key:"XStep",value:R(S.xStep)}),Ae.push({key:"YStep",value:R(S.yStep)}),Ae.push({key:"Resources",value:le+" 0 R"}),S.matrix&&Ae.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Ns({data:S.stream,additionalKeyValues:Ae,objectId:S.objectNumber}),oe("endobj")},rs=function(S){var z;for(z in Dt)Dt.hasOwnProperty(z)&&(Dt[z]instanceof Md?At(Dt[z]):Dt[z]instanceof Sh&&jt(Dt[z],S))},Ks=function(S){for(var z in S.objectNumber=hr(),oe("<<"),S)switch(z){case"opacity":oe("/ca "+O(S[z]));break;case"stroke-opacity":oe("/CA "+O(S[z]))}oe(">>"),oe("endobj")},mn=function(){var S;for(S in wt)wt.hasOwnProperty(S)&&Ks(wt[S])},zr=function(){for(var S in oe("/XObject <<"),yt)yt.hasOwnProperty(S)&&yt[S].objectNumber>=0&&oe("/"+S+" "+yt[S].objectNumber+" 0 R");Ce.publish("putXobjectDict"),oe(">>")},La=function(){Wn.oid=hr(),oe("<<"),oe("/Filter /Standard"),oe("/V "+Wn.v),oe("/R "+Wn.r),oe("/U <"+Wn.toHexString(Wn.U)+">"),oe("/O <"+Wn.toHexString(Wn.O)+">"),oe("/P "+Wn.P),oe(">>"),oe("endobj")},en=function(){for(var S in oe("/Font <<"),tt)tt.hasOwnProperty(S)&&(h===!1||h===!0&&p.hasOwnProperty(S))&&oe("/"+S+" "+tt[S].objectNumber+" 0 R");oe(">>")},Xo=function(){if(Object.keys(Dt).length>0){for(var S in oe("/Shading <<"),Dt)Dt.hasOwnProperty(S)&&Dt[S]instanceof Md&&Dt[S].objectNumber>=0&&oe("/"+S+" "+Dt[S].objectNumber+" 0 R");Ce.publish("putShadingPatternDict"),oe(">>")}},Ln=function(S){if(Object.keys(Dt).length>0){for(var z in oe("/Pattern <<"),Dt)Dt.hasOwnProperty(z)&&Dt[z]instanceof f.TilingPattern&&Dt[z].objectNumber>=0&&Dt[z].objectNumber<S&&oe("/"+z+" "+Dt[z].objectNumber+" 0 R");Ce.publish("putTilingPatternDict"),oe(">>")}},xi=function(){if(Object.keys(wt).length>0){var S;for(S in oe("/ExtGState <<"),wt)wt.hasOwnProperty(S)&&wt[S].objectNumber>=0&&oe("/"+S+" "+wt[S].objectNumber+" 0 R");Ce.publish("putGStateDict"),oe(">>")}},Ps=function(S){Br(S.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),en(),Xo(),Ln(S.objectOid),xi(),zr(),oe(">>"),oe("endobj")},Ja=function(){var S=[];Ms(),mn(),Re(),rs(S),Ce.publish("putResources"),S.forEach(Ps),Ps({resourcesOid:Oe,objectOid:Number.MAX_SAFE_INTEGER}),Ce.publish("postPutResources")},jo=function(){Ce.publish("putAdditionalObjects");for(var S=0;S<Me.length;S++){var z=Me[S];Br(z.objId,!0),oe(z.content),oe("endobj")}Ce.publish("postPutAdditionalObjects")},gi=function(S){pt[S.fontName]=pt[S.fontName]||{},pt[S.fontName][S.fontStyle]=S.id},bo=function(S,z,le,ye,Ae){var Je={id:"F"+(Object.keys(tt).length+1).toString(10),postScriptName:S,fontName:z,fontStyle:le,encoding:ye,isStandardFont:Ae||!1,metadata:{}};return Ce.publish("addFont",{font:Je,instance:this}),tt[Je.id]=Je,gi(Je),Je.id},Nd=function(S){for(var z=0,le=xe.length;z<le;z++){var ye=bo.call(this,S[z][0],S[z][1],S[z][2],xe[z][3],!0);h===!1&&(p[ye]=!0);var Ae=S[z][0].split("-");gi({id:ye,fontName:Ae[0],fontStyle:Ae[1]||""})}Ce.publish("addFonts",{fonts:tt,dictionary:pt})},Tn=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(ye){var z=ye.stack||"";~z.indexOf(" at ")&&(z=z.split(" at ")[1]);var le="Error in function "+z.split(`
`)[0].split("<")[0]+": "+ye.message;if(!ss.console)throw new Error(le);ss.console.error(le,ye),ss.alert&&alert(le)}},S.foo.bar=S,S.foo},vi=function(S,z){var le,ye,Ae,Je,ot,Et,Zt,us,os;if(Ae=(z=z||{}).sourceEncoding||"Unicode",ot=z.outputEncoding,(z.autoencode||ot)&&tt[he].metadata&&tt[he].metadata[Ae]&&tt[he].metadata[Ae].encoding&&(Je=tt[he].metadata[Ae].encoding,!ot&&tt[he].encoding&&(ot=tt[he].encoding),!ot&&Je.codePages&&(ot=Je.codePages[0]),typeof ot=="string"&&(ot=Je[ot]),ot)){for(Zt=!1,Et=[],le=0,ye=S.length;le<ye;le++)(us=ot[S.charCodeAt(le)])?Et.push(String.fromCharCode(us)):Et.push(S[le]),Et[le].charCodeAt(0)>>8&&(Zt=!0);S=Et.join("")}for(le=S.length;Zt===void 0&&le!==0;)S.charCodeAt(le-1)>>8&&(Zt=!0),le--;if(!Zt)return S;for(Et=z.noBOM?[]:[254,255],le=0,ye=S.length;le<ye;le++){if((os=(us=S.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Et.push(os),Et.push(us-(os<<8))}return String.fromCharCode.apply(void 0,Et)},pn=f.__private__.pdfEscape=f.pdfEscape=function(S,z){return vi(S,z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vl=f.__private__.beginPage=function(S){de[++qt]=[],kt[qt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},cx(qt),Se(de[L])},Za=function(S,z){var le,ye,Ae;switch(r=z||r,typeof S=="string"&&(le=v(S.toLowerCase()),Array.isArray(le)&&(ye=le[0],Ae=le[1])),Array.isArray(S)&&(ye=S[0]*Ne,Ae=S[1]*Ne),isNaN(ye)&&(ye=a[0],Ae=a[1]),(ye>14400||Ae>14400)&&(mr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),Ae=Math.min(14400,Ae)),a=[ye,Ae],r.substr(0,1)){case"l":Ae>ye&&(a=[Ae,ye]);break;case"p":ye>Ae&&(a=[Ae,ye])}Vl(a),px(zf),oe(Ui),qf!==0&&oe(qf+" J"),Vf!==0&&oe(Vf+" j"),Ce.publish("addPage",{pageNumber:qt})},Au=function(S){S>0&&S<=qt&&(de.splice(S,1),kt.splice(S,1),qt--,L>qt&&(L=qt),this.setPage(L))},cx=function(S){S>0&&S<=qt&&(L=S)},C1=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return de.length-1},dx=function(S,z,le){var ye,Ae=void 0;return le=le||{},S=S!==void 0?S:tt[he].fontName,z=z!==void 0?z:tt[he].fontStyle,ye=S.toLowerCase(),pt[ye]!==void 0&&pt[ye][z]!==void 0?Ae=pt[ye][z]:pt[S]!==void 0&&pt[S][z]!==void 0?Ae=pt[S][z]:le.disableWarning===!1&&mr.warn("Unable to look up font label for font '"+S+"', '"+z+"'. Refer to getFontList() for available fonts."),Ae||le.noFallback||(Ae=pt.times[z])==null&&(Ae=pt.times.normal),Ae},k1=f.__private__.putInfo=function(){var S=hr(),z=function(ye){return ye};for(var le in u!==null&&(z=Wn.encryptor(S,0)),oe("<<"),oe("/Producer ("+pn(z("jsPDF "+es.version))+")"),te)te.hasOwnProperty(le)&&te[le]&&oe("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+pn(z(te[le]))+")");oe("/CreationDate ("+pn(z(K))+")"),oe(">>"),oe("endobj")},Mf=f.__private__.putCatalog=function(S){var z=(S=S||{}).rootDictionaryObjId||Ea;switch(hr(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+z+" 0 R"),ue||(ue="fullwidth"),ue){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+ue;le.substr(le.length-1)==="%"&&(ue=parseInt(ue)/100),typeof ue=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+O(ue)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}We&&oe("/PageMode /"+We),Ce.publish("putCatalog"),oe(">>"),oe("endobj")},P1=f.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(se+1)),oe("/Root "+se+" 0 R"),oe("/Info "+(se-1)+" 0 R"),u!==null&&oe("/Encrypt "+Wn.oid+" 0 R"),oe("/ID [ <"+re+"> <"+re+"> ]"),oe(">>")},A1=f.__private__.putHeader=function(){oe("%PDF-"+y),oe("%")},E1=f.__private__.putXRef=function(){var S="0000000000";oe("xref"),oe("0 "+(se+1)),oe("0000000000 65535 f ");for(var z=1;z<=se;z++)typeof ae[z]=="function"?oe((S+ae[z]()).slice(-10)+" 00000 n "):ae[z]!==void 0?oe((S+ae[z]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},Qo=f.__private__.buildDocument=function(){mt(),Se(ge),Ce.publish("buildDocument"),A1(),xr(),jo(),Ja(),u!==null&&La(),k1(),Mf();var S=fe;return E1(),P1(),oe("startxref"),oe(""+S),oe("%%EOF"),Se(de[L]),ge.join(`
`)},Eu=f.__private__.getBlob=function(S){return new Blob([me(S)],{type:"application/pdf"})},Lu=f.output=f.__private__.output=Tn(function(S,z){switch(typeof(z=z||{})=="string"?z={filename:z}:z.filename=z.filename||"generated.pdf",S){case void 0:return Qo();case"save":f.save(z.filename);break;case"arraybuffer":return me(Qo());case"blob":return Eu(Qo());case"bloburi":case"bloburl":if(ss.URL!==void 0&&typeof ss.URL.createObjectURL=="function")return ss.URL&&ss.URL.createObjectURL(Eu(Qo()))||void 0;mr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",ye=Qo();try{le=Ow(ye)}catch{le=Ow(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+z.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ss)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';z.pdfObjectUrl&&(Ae=z.pdfObjectUrl,Je="");var ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+Je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(z)+");<\/script></body></html>",Et=ss.open();return Et!==null&&Et.document.write(ot),Et}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ss)==="[object Window]"){var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+z.filename+'" width="500px" height="400px" /></body></html>',us=ss.open();if(us!==null){us.document.write(Zt);var os=this;us.document.documentElement.querySelector("#pdfViewer").onload=function(){us.document.title=z.filename,us.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(os.output("bloburl"))}}return us}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ss)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",z)+'"></iframe></body></html>',Er=ss.open();if(Er!==null&&(Er.document.write(Rs),Er.document.title=z.filename),Er||typeof safari>"u")return Er;break;case"datauri":case"dataurl":return ss.document.location.href=this.output("datauristring",z);default:return null}}),ux=function(S){return Array.isArray(dt)===!0&&dt.indexOf(S)>-1};switch(n){case"pt":Ne=1;break;case"mm":Ne=72/25.4;break;case"cm":Ne=72/2.54;break;case"in":Ne=72;break;case"px":Ne=ux("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ne=12;break;case"ex":Ne=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ne=n}var Wn=null;Y(),Q();var L1=function(S){return u!==null?Wn.encryptor(S,0):function(z){return z}},hx=f.__private__.getPageInfo=f.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[S].objId,pageNumber:S,pageContext:kt[S]}},is=f.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var z in kt)if(kt[z].objId===S)break;return hx(z)},T1=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:kt[L].objId,pageNumber:L,pageContext:kt[L]}};f.addPage=function(){return Za.apply(this,arguments),this},f.setPage=function(){return cx.apply(this,arguments),Se.call(this,de[L]),this},f.insertPage=function(S){return this.addPage(),this.movePage(L,S),this},f.movePage=function(S,z){var le,ye;if(S>z){le=de[S],ye=kt[S];for(var Ae=S;Ae>z;Ae--)de[Ae]=de[Ae-1],kt[Ae]=kt[Ae-1];de[z]=le,kt[z]=ye,this.setPage(z)}else if(S<z){le=de[S],ye=kt[S];for(var Je=S;Je<z;Je++)de[Je]=de[Je+1],kt[Je]=kt[Je+1];de[z]=le,kt[z]=ye,this.setPage(z)}return this},f.deletePage=function(){return Au.apply(this,arguments),this},f.__private__.text=f.text=function(S,z,le,ye,Ae){var Je,ot,Et,Zt,us,os,Rs,Er,Fr,tn=(ye=ye||{}).scope||this;if(typeof S=="number"&&typeof z=="number"&&(typeof le=="string"||Array.isArray(le))){var Gn=le;le=z,z=S,S=Gn}if(arguments[3]instanceof Vt?(A("The transform parameter of text() with a Matrix value"),Fr=Ae):(Et=arguments[4],Zt=arguments[5],Gs(Rs=arguments[3])==="object"&&Rs!==null||(typeof Et=="string"&&(Zt=Et,Et=null),typeof Rs=="string"&&(Zt=Rs,Rs=null),typeof Rs=="number"&&(Et=Rs,Rs=null),ye={flags:Rs,angle:Et,align:Zt})),isNaN(z)||isNaN(le)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return tn;var xn="",qi=!1,Xa=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:_d,So=tn.internal.scaleFactor;function bx(gr){return gr=gr.split("	").join(Array(ye.TabLen||9).join(" ")),pn(gr,Rs)}function Yf(gr){for(var vr,qr=gr.concat(),cn=[],nl=qr.length;nl--;)typeof(vr=qr.shift())=="string"?cn.push(vr):Array.isArray(gr)&&(vr.length===1||vr[1]===void 0&&vr[2]===void 0)?cn.push(vr[0]):cn.push([vr[0],vr[1],vr[2]]);return cn}function Jf(gr,vr){var qr;if(typeof gr=="string")qr=vr(gr)[0];else if(Array.isArray(gr)){for(var cn,nl,nm=gr.concat(),Wu=[],Cx=nm.length;Cx--;)typeof(cn=nm.shift())=="string"?Wu.push(vr(cn)[0]):Array.isArray(cn)&&typeof cn[0]=="string"&&(nl=vr(cn[0],cn[1],cn[2]),Wu.push([nl[0],nl[1],nl[2]]));qr=Wu}return qr}var Ou=!1,Zf=!0;if(typeof S=="string")Ou=!0;else if(Array.isArray(S)){var Xf=S.concat();ot=[];for(var Mu,Rn=Xf.length;Rn--;)(typeof(Mu=Xf.shift())!="string"||Array.isArray(Mu)&&typeof Mu[0]!="string")&&(Zf=!1);Ou=Zf}if(Ou===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var $u=ee/tn.internal.scaleFactor,Bu=$u*(Xa-1);switch(ye.baseline){case"bottom":le-=Bu;break;case"top":le+=$u-Bu;break;case"hanging":le+=$u-2*Bu;break;case"middle":le+=$u/2-Bu}if((os=ye.maxWidth||0)>0&&(typeof S=="string"?S=tn.splitTextToSize(S,os):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(gr,vr){return gr.concat(tn.splitTextToSize(vr,os))},[]))),Je={text:S,x:z,y:le,options:ye,mutex:{pdfEscape:pn,activeFontKey:he,fonts:tt,activeFontSize:ee}},Ce.publish("preProcessText",Je),S=Je.text,Et=(ye=Je.options).angle,!(Fr instanceof Vt)&&Et&&typeof Et=="number"){Et*=Math.PI/180,ye.rotationDirection===0&&(Et=-Et),N===b.ADVANCED&&(Et=-Et);var zu=Math.cos(Et),Qf=Math.sin(Et);Fr=new Vt(zu,Qf,-Qf,zu,0,0)}else Et&&Et instanceof Vt&&(Fr=Et);N!==b.ADVANCED||Fr||(Fr=fn),(us=ye.charSpace||Iu)!==void 0&&(xn+=R(E(us))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Er=ye.horizontalScale)!==void 0&&(xn+=R(100*Er)+` Tz
`),ye.lang;var Ta=-1,U1=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,em=tn.internal.getCurrentPageInfo().pageContext;switch(U1){case 0:case!1:case"fill":Ta=0;break;case 1:case!0:case"stroke":Ta=1;break;case 2:case"fillThenStroke":Ta=2;break;case 3:case"invisible":Ta=3;break;case 4:case"fillAndAddForClipping":Ta=4;break;case 5:case"strokeAndAddPathForClipping":Ta=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ta=6;break;case 7:case"addToPathForClipping":Ta=7}var wx=em.usedRenderingMode!==void 0?em.usedRenderingMode:-1;Ta!==-1?xn+=Ta+` Tr
`:wx!==-1&&(xn+=`0 Tr
`),Ta!==-1&&(em.usedRenderingMode=Ta),Zt=ye.align||"left";var yi,Uu=ee*Xa,Nx=tn.internal.pageSize.getWidth(),Sx=tt[he];us=ye.charSpace||Iu,os=ye.maxWidth||0,Rs=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Kl=[],Pd=function(gr){return tn.getStringUnitWidth(gr,{font:Sx,charSpace:us,fontSize:ee,doKerning:!1})*ee/So};if(Object.prototype.toString.call(S)==="[object Array]"){var Ra;ot=Yf(S),Zt!=="left"&&(yi=ot.map(Pd));var da,Yl=0;if(Zt==="right"){z-=yi[0],S=[],Rn=ot.length;for(var tl=0;tl<Rn;tl++)tl===0?(da=No(z),Ra=el(le)):(da=E(Yl-yi[tl]),Ra=-Uu),S.push([ot[tl],da,Ra]),Yl=yi[tl]}else if(Zt==="center"){z-=yi[0]/2,S=[],Rn=ot.length;for(var sl=0;sl<Rn;sl++)sl===0?(da=No(z),Ra=el(le)):(da=E((Yl-yi[sl])/2),Ra=-Uu),S.push([ot[sl],da,Ra]),Yl=yi[sl]}else if(Zt==="left"){S=[],Rn=ot.length;for(var qu=0;qu<Rn;qu++)S.push(ot[qu])}else if(Zt==="justify"&&Sx.encoding==="Identity-H"){S=[],Rn=ot.length,os=os!==0?os:Nx;for(var rl=0,Ur=0;Ur<Rn;Ur++)if(Ra=Ur===0?el(le):-Uu,da=Ur===0?No(z):rl,Ur<Rn-1){var tm=E((os-yi[Ur])/(ot[Ur].split(" ").length-1)),ua=ot[Ur].split(" ");S.push([ua[0]+" ",da,Ra]),rl=0;for(var ji=1;ji<ua.length;ji++){var Vu=(Pd(ua[ji-1]+" "+ua[ji])-Pd(ua[ji]))*So+tm;ji==ua.length-1?S.push([ua[ji],Vu,0]):S.push([ua[ji]+" ",Vu,0]),rl-=Vu}}else S.push([ot[Ur],da,Ra]);S.push(["",rl,0])}else{if(Zt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Rn=ot.length,os=os!==0?os:Nx,Ur=0;Ur<Rn;Ur++)Ra=Ur===0?el(le):-Uu,da=Ur===0?No(z):0,Ur<Rn-1?Kl.push(R(E((os-yi[Ur])/(ot[Ur].split(" ").length-1)))):Kl.push(0),S.push([ot[Ur],da,Ra])}}var _x=typeof ye.R2L=="boolean"?ye.R2L:qe;_x===!0&&(S=Jf(S,function(gr,vr,qr){return[gr.split("").reverse().join(""),vr,qr]})),Je={text:S,x:z,y:le,options:ye,mutex:{pdfEscape:pn,activeFontKey:he,fonts:tt,activeFontSize:ee}},Ce.publish("postProcessText",Je),S=Je.text,qi=Je.mutex.isHex||!1;var sm=tt[he].encoding;sm!=="WinAnsiEncoding"&&sm!=="StandardEncoding"||(S=Jf(S,function(gr,vr,qr){return[bx(gr),vr,qr]})),ot=Yf(S),S=[];for(var Ad,Ed,Jl,Ld=0,Hu=1,Td=Array.isArray(ot[0])?Hu:Ld,Zl="",rm=function(gr,vr,qr){var cn="";return qr instanceof Vt?(qr=typeof ye.angle=="number"?ln(qr,new Vt(1,0,0,1,gr,vr)):ln(new Vt(1,0,0,1,gr,vr),qr),N===b.ADVANCED&&(qr=ln(new Vt(1,0,0,-1,0,0),qr)),cn=qr.join(" ")+` Tm
`):cn=R(gr)+" "+R(vr)+` Td
`,cn},bi=0;bi<ot.length;bi++){switch(Zl="",Td){case Hu:Jl=(qi?"<":"(")+ot[bi][0]+(qi?">":")"),Ad=parseFloat(ot[bi][1]),Ed=parseFloat(ot[bi][2]);break;case Ld:Jl=(qi?"<":"(")+ot[bi]+(qi?">":")"),Ad=No(z),Ed=el(le)}Kl!==void 0&&Kl[bi]!==void 0&&(Zl=Kl[bi]+` Tw
`),bi===0?S.push(Zl+rm(Ad,Ed,Fr)+Jl):Td===Ld?S.push(Zl+Jl):Td===Hu&&S.push(Zl+rm(Ad,Ed,Fr)+Jl)}S=Td===Ld?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var wi=`BT
/`;return wi+=he+" "+ee+` Tf
`,wi+=R(ee*Xa)+` TL
`,wi+=Cd+`
`,wi+=xn,wi+=S,oe(wi+="ET"),p[he]=!0,tn};var R1=f.__private__.clip=f.clip=function(S){return oe(S==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return R1("evenodd")},f.__private__.discardPath=f.discardPath=function(){return oe("n"),this};var wo=f.__private__.isValidStyle=function(S){var z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(z=!0),z};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(S){return wo(S)&&(d=S),this};var fx=f.__private__.getStyle=f.getStyle=function(S){var z=d;switch(S){case"D":case"S":z="S";break;case"F":z="f";break;case"FD":case"DF":z="B";break;case"f":case"f*":case"B":case"B*":z=S}return z},mx=f.close=function(){return oe("h"),this};f.stroke=function(){return oe("S"),this},f.fill=function(S){return Tu("f",S),this},f.fillEvenOdd=function(S){return Tu("f*",S),this},f.fillStroke=function(S){return Tu("B",S),this},f.fillStrokeEvenOdd=function(S){return Tu("B*",S),this};var Tu=function(S,z){Gs(z)==="object"?F1(z,S):oe(S)},$f=function(S){S===null||N===b.ADVANCED&&S===void 0||(S=fx(S),oe(S))};function I1(S,z,le,ye,Ae){var Je=new Sh(z||this.boundingBox,le||this.xStep,ye||this.yStep,this.gState,Ae||this.matrix);Je.stream=this.stream;var ot=S+"$$"+this.cloneIndex+++"$$";return Ir(ot,Je),Je}var F1=function(S,z){var le=ks[S.key],ye=Dt[le];if(ye instanceof Md)oe("q"),oe(D1(z)),ye.gState&&f.setGState(ye.gState),oe(S.matrix.toString()+" cm"),oe("/"+le+" sh"),oe("Q");else if(ye instanceof Sh){var Ae=new Vt(1,0,0,-1,0,Gl());S.matrix&&(Ae=Ae.multiply(S.matrix||fn),le=I1.call(ye,S.key,S.boundingBox,S.xStep,S.yStep,Ae).id),oe("q"),oe("/Pattern cs"),oe("/"+le+" scn"),ye.gState&&f.setGState(ye.gState),oe(z),oe("Q")}},D1=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Bf=f.moveTo=function(S,z){return oe(R(E(S))+" "+R(U(z))+" m"),this},Sd=f.lineTo=function(S,z){return oe(R(E(S))+" "+R(U(z))+" l"),this},Hl=f.curveTo=function(S,z,le,ye,Ae,Je){return oe([R(E(S)),R(U(z)),R(E(le)),R(U(ye)),R(E(Ae)),R(U(Je)),"c"].join(" ")),this};f.__private__.line=f.line=function(S,z,le,ye,Ae){if(isNaN(S)||isNaN(z)||isNaN(le)||isNaN(ye)||!wo(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return N===b.COMPAT?this.lines([[le-S,ye-z]],S,z,[1,1],Ae||"S"):this.lines([[le-S,ye-z]],S,z,[1,1]).stroke()},f.__private__.lines=f.lines=function(S,z,le,ye,Ae,Je){var ot,Et,Zt,us,os,Rs,Er,Fr,tn,Gn,xn,qi;if(typeof S=="number"&&(qi=le,le=z,z=S,S=qi),ye=ye||[1,1],Je=Je||!1,isNaN(z)||isNaN(le)||!Array.isArray(S)||!Array.isArray(ye)||!wo(Ae)||typeof Je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Bf(z,le),ot=ye[0],Et=ye[1],us=S.length,Gn=z,xn=le,Zt=0;Zt<us;Zt++)(os=S[Zt]).length===2?(Gn=os[0]*ot+Gn,xn=os[1]*Et+xn,Sd(Gn,xn)):(Rs=os[0]*ot+Gn,Er=os[1]*Et+xn,Fr=os[2]*ot+Gn,tn=os[3]*Et+xn,Gn=os[4]*ot+Gn,xn=os[5]*Et+xn,Hl(Rs,Er,Fr,tn,Gn,xn));return Je&&mx(),$f(Ae),this},f.path=function(S){for(var z=0;z<S.length;z++){var le=S[z],ye=le.c;switch(le.op){case"m":Bf(ye[0],ye[1]);break;case"l":Sd(ye[0],ye[1]);break;case"c":Hl.apply(this,ye);break;case"h":mx()}}return this},f.__private__.rect=f.rect=function(S,z,le,ye,Ae){if(isNaN(S)||isNaN(z)||isNaN(le)||isNaN(ye)||!wo(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return N===b.COMPAT&&(ye=-ye),oe([R(E(S)),R(U(z)),R(E(le)),R(E(ye)),"re"].join(" ")),$f(Ae),this},f.__private__.triangle=f.triangle=function(S,z,le,ye,Ae,Je,ot){if(isNaN(S)||isNaN(z)||isNaN(le)||isNaN(ye)||isNaN(Ae)||isNaN(Je)||!wo(ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-S,ye-z],[Ae-le,Je-ye],[S-Ae,z-Je]],S,z,[1,1],ot,!0),this},f.__private__.roundedRect=f.roundedRect=function(S,z,le,ye,Ae,Je,ot){if(isNaN(S)||isNaN(z)||isNaN(le)||isNaN(ye)||isNaN(Ae)||isNaN(Je)||!wo(ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Et=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*le),Je=Math.min(Je,.5*ye),this.lines([[le-2*Ae,0],[Ae*Et,0,Ae,Je-Je*Et,Ae,Je],[0,ye-2*Je],[0,Je*Et,-Ae*Et,Je,-Ae,Je],[2*Ae-le,0],[-Ae*Et,0,-Ae,-Je*Et,-Ae,-Je],[0,2*Je-ye],[0,-Je*Et,Ae*Et,-Je,Ae,-Je]],S+Ae,z,[1,1],ot,!0),this},f.__private__.ellipse=f.ellipse=function(S,z,le,ye,Ae){if(isNaN(S)||isNaN(z)||isNaN(le)||isNaN(ye)||!wo(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Je=4/3*(Math.SQRT2-1)*le,ot=4/3*(Math.SQRT2-1)*ye;return Bf(S+le,z),Hl(S+le,z-ot,S+Je,z-ye,S,z-ye),Hl(S-Je,z-ye,S-le,z-ot,S-le,z),Hl(S-le,z+ot,S-Je,z+ye,S,z+ye),Hl(S+Je,z+ye,S+le,z+ot,S+le,z),$f(Ae),this},f.__private__.circle=f.circle=function(S,z,le,ye){if(isNaN(S)||isNaN(z)||isNaN(le)||!wo(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,z,le,le,ye)},f.setFont=function(S,z,le){return le&&(z=D(z,le)),he=dx(S,z,{disableWarning:!1}),this};var O1=f.__private__.getFont=f.getFont=function(){return tt[dx.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var S,z,le={};for(S in pt)if(pt.hasOwnProperty(S))for(z in le[S]=[],pt[S])pt[S].hasOwnProperty(z)&&le[S].push(z);return le},f.addFont=function(S,z,le,ye,Ae){var Je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Je.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&Je.indexOf(arguments[3])==-1&&(le=D(le,ye)),Ae=Ae||"Identity-H",bo.call(this,S,z,le,Ae)};var _d,zf=e.lineWidth||.200025,Ru=f.__private__.getLineWidth=f.getLineWidth=function(){return zf},px=f.__private__.setLineWidth=f.setLineWidth=function(S){return zf=S,oe(R(E(S))+" w"),this};f.__private__.setLineDash=es.API.setLineDash=es.API.setLineDashPattern=function(S,z){if(S=S||[],z=z||0,isNaN(z)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(le){return R(E(le))}).join(" "),z=R(E(z)),oe("["+S+"] "+z+" d"),this};var xx=f.__private__.getLineHeight=f.getLineHeight=function(){return ee*_d};f.__private__.getLineHeight=f.getLineHeight=function(){return ee*_d};var gx=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(_d=S),this},vx=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return _d};gx(e.lineHeight);var No=f.__private__.getHorizontalCoordinate=function(S){return E(S)},el=f.__private__.getVerticalCoordinate=function(S){return N===b.ADVANCED?S:kt[L].mediaBox.topRightY-kt[L].mediaBox.bottomLeftY-E(S)},M1=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(S){return R(No(S))},Wl=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(S){return R(el(S))},Ui=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ze(Ui)},f.__private__.setStrokeColor=f.setDrawColor=function(S,z,le,ye){return Ui=Rt({ch1:S,ch2:z,ch3:le,ch4:ye,pdfColorType:"draw",precision:2}),oe(Ui),this};var Uf=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ze(Uf)},f.__private__.setFillColor=f.setFillColor=function(S,z,le,ye){return Uf=Rt({ch1:S,ch2:z,ch3:le,ch4:ye,pdfColorType:"fill",precision:2}),oe(Uf),this};var Cd=e.textColor||"0 g",$1=f.__private__.getTextColor=f.getTextColor=function(){return Ze(Cd)};f.__private__.setTextColor=f.setTextColor=function(S,z,le,ye){return Cd=Rt({ch1:S,ch2:z,ch3:le,ch4:ye,pdfColorType:"text",precision:3}),this};var Iu=e.charSpace,B1=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Iu||0)};f.__private__.setCharSpace=f.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Iu=S,this};var qf=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(S){var z=f.CapJoinStyles[S];if(z===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qf=z,oe(z+" J"),this};var Vf=0;f.__private__.setLineJoin=f.setLineJoin=function(S){var z=f.CapJoinStyles[S];if(z===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vf=z,oe(z+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(R(E(S))+" M"),this},f.GState=zv,f.setGState=function(S){(S=typeof S=="string"?wt[ws[S]]:yx(null,S)).equals(ts)||(oe("/"+S.id+" gs"),ts=S)};var yx=function(S,z){if(!S||!ws[S]){var le=!1;for(var ye in wt)if(wt.hasOwnProperty(ye)&&wt[ye].equals(z)){le=!0;break}if(le)z=wt[ye];else{var Ae="GS"+(Object.keys(wt).length+1).toString(10);wt[Ae]=z,z.id=Ae}return S&&(ws[S]=z.id),Ce.publish("addGState",z),z}};f.addGState=function(S,z){return yx(S,z),this},f.saveGraphicsState=function(){return oe("q"),Yt.push({key:he,size:ee,color:Cd}),this},f.restoreGraphicsState=function(){oe("Q");var S=Yt.pop();return he=S.key,ee=S.size,Cd=S.color,ts=null,this},f.setCurrentTransformationMatrix=function(S){return oe(S.toString()+" cm"),this},f.comment=function(S){return oe("#"+S),this};var Fu=function(S,z){var le=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(Je){isNaN(Je)||(le=parseFloat(Je))}});var ye=z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(Je){isNaN(Je)||(ye=parseFloat(Je))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(Je){Ae=Je.toString()}}),this},Hf=function(S,z,le,ye){Fu.call(this,S,z),this.type="rect";var Ae=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(ot){isNaN(ot)||(Ae=parseFloat(ot))}});var Je=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Je},set:function(ot){isNaN(ot)||(Je=parseFloat(ot))}}),this},Wf=function(){this.page=qt,this.currentPage=L,this.pages=de.slice(0),this.pagesContext=kt.slice(0),this.x=Ve,this.y=Ke,this.matrix=lt,this.width=kd(L),this.height=Gl(L),this.outputDestination=Ye,this.id="",this.objectNumber=-1};Wf.prototype.restore=function(){qt=this.page,L=this.currentPage,kt=this.pagesContext,de=this.pages,Ve=this.x,Ke=this.y,lt=this.matrix,Gf(L,this.width),Kf(L,this.height),Ye=this.outputDestination};var jx=function(S,z,le,ye,Ae){tr.push(new Wf),qt=L=0,de=[],Ve=S,Ke=z,lt=Ae,Vl([le,ye])},z1=function(S){if(Xt[S])tr.pop().restore();else{var z=new Wf,le="Xo"+(Object.keys(yt).length+1).toString(10);z.id=le,Xt[S]=le,yt[le]=z,Ce.publish("addFormObject",z),tr.pop().restore()}};for(var Du in f.beginFormObject=function(S,z,le,ye,Ae){return jx(S,z,le,ye,Ae),this},f.endFormObject=function(S){return z1(S),this},f.doFormObject=function(S,z){var le=yt[Xt[S]];return oe("q"),oe(z.toString()+" cm"),oe("/"+le.id+" Do"),oe("Q"),this},f.getFormObject=function(S){var z=yt[Xt[S]];return{x:z.x,y:z.y,width:z.width,height:z.height,matrix:z.matrix}},f.save=function(S,z){return S=S||"generated.pdf",(z=z||{}).returnPromise=z.returnPromise||!1,z.returnPromise===!1?(Od(Eu(Qo()),S),typeof Od.unload=="function"&&ss.setTimeout&&setTimeout(Od.unload,911),this):new Promise(function(le,ye){try{var Ae=Od(Eu(Qo()),S);typeof Od.unload=="function"&&ss.setTimeout&&setTimeout(Od.unload,911),le(Ae)}catch(Je){ye(Je.message)}})},es.API)es.API.hasOwnProperty(Du)&&(Du==="events"&&es.API.events.length?function(S,z){var le,ye,Ae;for(Ae=z.length-1;Ae!==-1;Ae--)le=z[Ae][0],ye=z[Ae][1],S.subscribe.apply(S,[le].concat(typeof ye=="function"?[ye]:ye))}(Ce,es.API.events):f[Du]=es.API[Du]);var kd=f.getPageWidth=function(S){return(kt[S=S||L].mediaBox.topRightX-kt[S].mediaBox.bottomLeftX)/Ne},Gf=f.setPageWidth=function(S,z){kt[S].mediaBox.topRightX=z*Ne+kt[S].mediaBox.bottomLeftX},Gl=f.getPageHeight=function(S){return(kt[S=S||L].mediaBox.topRightY-kt[S].mediaBox.bottomLeftY)/Ne},Kf=f.setPageHeight=function(S,z){kt[S].mediaBox.topRightY=z*Ne+kt[S].mediaBox.bottomLeftY};return f.internal={pdfEscape:pn,getStyle:fx,getFont:O1,getFontSize:ve,getCharSpace:B1,getTextColor:$1,getLineHeight:xx,getLineHeightFactor:vx,getLineWidth:Ru,write:vt,getHorizontalCoordinate:No,getVerticalCoordinate:el,getCoordinateString:M1,getVerticalCoordinateString:Wl,collections:{},newObject:hr,newAdditionalObject:zi,newObjectDeferred:sr,newObjectDeferredBegin:Br,getFilters:as,putStream:Ns,events:Ce,scaleFactor:Ne,pageSize:{getWidth:function(){return kd(L)},setWidth:function(S){Gf(L,S)},getHeight:function(){return Gl(L)},setHeight:function(S){Kf(L,S)}},encryptionOptions:u,encryption:Wn,getEncryptor:L1,output:Lu,getNumberOfPages:C1,pages:de,out:oe,f2:O,f3:F,getPageInfo:hx,getPageInfoByObjId:is,getCurrentPageInfo:T1,getPDFVersion:x,Point:Fu,Rectangle:Hf,Matrix:Vt,hasHotfix:ux},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return kd(L)},set:function(S){Gf(L,S)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Gl(L)},set:function(S){Kf(L,S)},enumerable:!0,configurable:!0}),Nd.call(f,xe),he="F1",Za(a,r),Ce.publish("initialized"),f}dh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},dh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},dh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},dh.prototype.processOwnerPassword=function(e,t){return $w(Mw(t).substr(0,5),e)},dh.prototype.encryptor=function(e,t){var r=Mw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return $w(r,n)}},zv.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Gs(e)!==Gs(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},es.API={events:[]},es.version="3.0.1";var Mr=es.API,CS=1,Pu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ls=function(e){return e.toFixed(2)},cc=function(e){return e.toFixed(5)};Mr.__acroform__={};var Ya=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},LC=function(e){return e*CS},Po=function(e){var t=new oR,r=Ot.internal.getHeight(e)||0,n=Ot.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ls(n)),Number(ls(r))],t},SQ=Mr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},_Q=Mr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},CQ=Mr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Gr=Mr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return CQ(e,t-1)},Kr=Mr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return SQ(e,t-1)},Yr=Mr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _Q(e,t-1)},kQ=Mr.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(i)||0,[Number(ls(c.lowerLeft_X)),Number(ls(c.lowerLeft_Y)),Number(ls(c.upperRight_X)),Number(ls(c.upperRight_Y))]},PQ=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=Bw(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+ls(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Po(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Bw=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(F){return F.split(`
`)}):a.map(function(F){return[F]});var i=r,o=Ot.internal.getHeight(e)||0;o=o<0?-o:o;var l=Ot.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(F,E,$){if(F+1<a.length){var U=E+" "+a[F+1][0];return wg(U,e,$).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=wg("3",e,i).height,p=e.multiline?o-i:(o-h)/2,f=p+=2,y=0,x=0,w=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+wg(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",b=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var C=!1;if(a[N].length!==1&&w!==a[N].length-1){if((h+2)*(b+2)+2>o)continue e;v+=a[N][w],C=!0,x=N,N--}else{v=(v+=a[N][w]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var P=parseInt(N),D=c(P,v,i),R=N>=a.length-1;if(D&&!R){v+=" ",w=0;continue}if(D||R){if(R)x=P;else if(e.multiline&&(h+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(b+2)+2>o)continue e;x=P}}for(var A="",I=y;I<=x;I++){var O=a[I];if(e.multiline){if(I===x){A+=O[w]+" ",w=(w+1)%O.length;continue}if(I===y){A+=O[O.length-1]+" ";continue}}A+=O[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,u=wg(A,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=ls(d)+" "+ls(f)+` Td
`,t+="("+Pu(A)+`) Tj
`,t+=-ls(d)+` 0 Td
`,f=-(i+2),u=0,y=C?x:x+1,b++,v=""}break}return n.text=t,n.fontSize=i,n},wg=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},AQ={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},EQ=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},LQ=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),Gs(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},TQ=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(vo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(AQ)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");CS=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new lR,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&EQ(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=kQ(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ot.createDefaultAppearanceStream(l),Gs(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=PQ(l);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var f=l.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var y=f[o];typeof y=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=f)=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&LQ(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},iR=Mr.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Gs(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Pu(n(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Fb=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Pu(n(e))+")"},zo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};zo.prototype.toString=function(){return this.objId+" 0 R"},zo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},zo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:iR(a,this.objId,this.scope)}):a instanceof zo?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var oR=function(){zo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ya(oR,zo);var lR=function(){zo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Pu(r(e))+")"}},set:function(r){e=r}})};Ya(lR,zo);var vo=function e(){zo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gr(t,3)},set:function(v){v?this.F=Kr(t,3):this.F=Yr(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Uv)return;i="FieldObject"+e.FieldNum++}var v=function(b){return b};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Pu(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/CS:d},set:function(v){d=v}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Uv||this instanceof au))return Fb(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=v}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof jn?p:Fb(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=this instanceof jn?v:v.substr(0,1)==="("?nh(v.substr(1,v.length-2)):nh(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof jn?nh(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof jn?"/"+v:v}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof jn?f:Fb(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=this instanceof jn?v:v.substr(0,1)==="("?nh(v.substr(1,v.length-2)):nh(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof jn?nh(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof jn?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(v){v=!!v,x=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(v){y=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,1)},set:function(v){v?this.Ff=Kr(this.Ff,1):this.Ff=Yr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,2)},set:function(v){v?this.Ff=Kr(this.Ff,2):this.Ff=Yr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,3)},set:function(v){v?this.Ff=Kr(this.Ff,3):this.Ff=Yr(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');w=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(w){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:w=2;break;case"center":case 1:w=1;break;case"left":case 0:default:w=0}}})};Ya(vo,zo);var Hh=function(){vo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return iR(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,18)},set:function(r){r?this.Ff=Kr(this.Ff,18):this.Ff=Yr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Kr(this.Ff,19):this.Ff=Yr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,20)},set:function(r){r?(this.Ff=Kr(this.Ff,20),t.sort()):this.Ff=Yr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,22)},set:function(r){r?this.Ff=Kr(this.Ff,22):this.Ff=Yr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,23)},set:function(r){r?this.Ff=Kr(this.Ff,23):this.Ff=Yr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,27)},set:function(r){r?this.Ff=Kr(this.Ff,27):this.Ff=Yr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ya(Hh,vo);var Wh=function(){Hh.call(this),this.fontName="helvetica",this.combo=!1};Ya(Wh,Hh);var Gh=function(){Wh.call(this),this.combo=!0};Ya(Gh,Wh);var T0=function(){Gh.call(this),this.edit=!0};Ya(T0,Gh);var jn=function(){vo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,15)},set:function(r){r?this.Ff=Kr(this.Ff,15):this.Ff=Yr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,16)},set:function(r){r?this.Ff=Kr(this.Ff,16):this.Ff=Yr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,17)},set:function(r){r?this.Ff=Kr(this.Ff,17):this.Ff=Yr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,26)},set:function(r){r?this.Ff=Kr(this.Ff,26):this.Ff=Yr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Pu(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Gs(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ya(jn,vo);var R0=function(){jn.call(this),this.pushButton=!0};Ya(R0,jn);var Kh=function(){jn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ya(Kh,jn);var Uv=function(){var e,t;vo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Pu(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Gs(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ya(Uv,vo),Kh.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Kh.prototype.createOption=function(e){var t=new Uv;return t.Parent=this,t.optionName=e,this.Kids.push(t),RQ.call(this.scope,t),t};var I0=function(){jn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ot.CheckBox.createAppearanceStream()};Ya(I0,jn);var au=function(){vo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,13)},set:function(t){t?this.Ff=Kr(this.Ff,13):this.Ff=Yr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,21)},set:function(t){t?this.Ff=Kr(this.Ff,21):this.Ff=Yr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,23)},set:function(t){t?this.Ff=Kr(this.Ff,23):this.Ff=Yr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,24)},set:function(t){t?this.Ff=Kr(this.Ff,24):this.Ff=Yr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,25)},set:function(t){t?this.Ff=Kr(this.Ff,25):this.Ff=Yr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,26)},set:function(t){t?this.Ff=Kr(this.Ff,26):this.Ff=Yr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ya(au,vo);var F0=function(){au.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,14)},set:function(e){e?this.Ff=Kr(this.Ff,14):this.Ff=Yr(this.Ff,14)}}),this.password=!0};Ya(F0,au);var Ot={CheckBox:{createAppearanceStream:function(){return{N:{On:Ot.CheckBox.YesNormal},D:{On:Ot.CheckBox.YesPushDown,Off:Ot.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=Bw(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+ls(Ot.internal.getWidth(e))+" "+ls(Ot.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+ls(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Po(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Ot.internal.getHeight(e),o=Ot.internal.getWidth(e),l=Bw(e,e.caption);return a.push("1 g"),a.push("0 0 "+ls(o)+" "+ls(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+ls(o-1)+" "+ls(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+ls(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ls(Ot.internal.getWidth(e))+" "+ls(Ot.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ot.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ot.RadioButton.Circle.YesNormal,t.D[e]=Ot.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=Ot.internal.getWidth(e)<=Ot.internal.getHeight(e)?Ot.internal.getWidth(e)/4:Ot.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Ot.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+cc(Ot.internal.getWidth(e)/2)+" "+cc(Ot.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=Ot.internal.getWidth(e)<=Ot.internal.getHeight(e)?Ot.internal.getWidth(e)/4:Ot.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ot.internal.Bezier_C).toFixed(5)),o=Number((n*Ot.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+cc(Ot.internal.getWidth(e)/2)+" "+cc(Ot.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+cc(Ot.internal.getWidth(e)/2)+" "+cc(Ot.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=Ot.internal.getWidth(e)<=Ot.internal.getHeight(e)?Ot.internal.getWidth(e)/4:Ot.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ot.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+cc(Ot.internal.getWidth(e)/2)+" "+cc(Ot.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ot.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ot.RadioButton.Cross.YesNormal,t.D[e]=Ot.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=Ot.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+ls(Ot.internal.getWidth(e)-2)+" "+ls(Ot.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ls(n.x1.x)+" "+ls(n.x1.y)+" m"),r.push(ls(n.x2.x)+" "+ls(n.x2.y)+" l"),r.push(ls(n.x4.x)+" "+ls(n.x4.y)+" m"),r.push(ls(n.x3.x)+" "+ls(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=Ot.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+ls(Ot.internal.getWidth(e))+" "+ls(Ot.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ls(Ot.internal.getWidth(e)-2)+" "+ls(Ot.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ls(r.x1.x)+" "+ls(r.x1.y)+" m"),n.push(ls(r.x2.x)+" "+ls(r.x2.y)+" l"),n.push(ls(r.x4.x)+" "+ls(r.x4.y)+" m"),n.push(ls(r.x3.x)+" "+ls(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ls(Ot.internal.getWidth(e))+" "+ls(Ot.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Ot.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ot.internal.getWidth(e),r=Ot.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Ot.internal.getWidth=function(e){var t=0;return Gs(e)==="object"&&(t=LC(e.Rect[2])),t},Ot.internal.getHeight=function(e){var t=0;return Gs(e)==="object"&&(t=LC(e.Rect[3])),t};var RQ=Mr.addField=function(e){if(TQ(this,e),!(e instanceof vo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Mr.AcroFormChoiceField=Hh,Mr.AcroFormListBox=Wh,Mr.AcroFormComboBox=Gh,Mr.AcroFormEditBox=T0,Mr.AcroFormButton=jn,Mr.AcroFormPushButton=R0,Mr.AcroFormRadioButton=Kh,Mr.AcroFormCheckBox=I0,Mr.AcroFormTextField=au,Mr.AcroFormPasswordField=F0,Mr.AcroFormAppearance=Ot,Mr.AcroForm={ChoiceField:Hh,ListBox:Wh,ComboBox:Gh,EditBox:T0,Button:jn,PushButton:R0,RadioButton:Kh,CheckBox:I0,TextField:au,PasswordField:F0,Appearance:Ot},es.AcroForm={ChoiceField:Hh,ListBox:Wh,ComboBox:Gh,EditBox:T0,Button:jn,PushButton:R0,RadioButton:Kh,CheckBox:I0,TextField:au,PasswordField:F0,Appearance:Ot};es.AcroForm;function cR(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(F,E){var $,U,K,re,pe,Q=t;if((E=E||t)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(D(F))for(pe in r)for(K=r[pe],$=0;$<K.length;$+=1){for(re=!0,U=0;U<K[$].length;U+=1)if(K[$][U]!==void 0&&K[$][U]!==F[U]){re=!1;break}if(re===!0){Q=pe;break}}else for(pe in r)for(K=r[pe],$=0;$<K.length;$+=1){for(re=!0,U=0;U<K[$].length;U+=1)if(K[$][U]!==void 0&&K[$][U]!==F.charCodeAt(U)){re=!1;break}if(re===!0){Q=pe;break}}return Q===t&&E!==t&&(Q=E),Q},a=function F(E){for(var $=this.internal.write,U=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:E.width}),re.push({key:"Height",value:E.height}),E.colorSpace===w.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===w.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var pe="",Q=0,J=E.transparency.length;Q<J;Q++)pe+=E.transparency[Q]+" "+E.transparency[Q]+" ";re.push({key:"Mask",value:"["+pe+"]"})}E.sMask!==void 0&&re.push({key:"SMask",value:E.objectId+1+" 0 R"});var q=E.filter!==void 0?["/"+E.filter]:void 0;if(U({data:E.data,additionalKeyValues:re,alreadyAppliedFilters:q,objectId:E.objectId}),$("endobj"),"sMask"in E&&E.sMask!==void 0){var Y="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,k={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:Y,data:E.sMask};"filter"in E&&(k.filter=E.filter),F.call(this,k)}if(E.colorSpace===w.INDEXED){var L=this.internal.newObject();U({data:A(new Uint8Array(E.palette)),objectId:L}),$("endobj")}},i=function(){var F=this.internal.collections.addImage_images;for(var E in F)a.call(this,F[E])},o=function(){var F,E=this.internal.collections.addImage_images,$=this.internal.write;for(var U in E)$("/I"+(F=E[U]).index,F.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var F=this.internal.collections.addImage_images;return l.call(this),F},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(F){return typeof e["process"+F.toUpperCase()]=="function"},h=function(F){return Gs(F)==="object"&&F.nodeType===1},p=function(F,E){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var $=""+F.getAttribute("src");if($.indexOf("data:image/")===0)return ip(unescape($).split("base64,").pop());var U=e.loadFile($,!0);if(U!==void 0)return U}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var K;switch(E){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return ip(F.toDataURL(K,1).split("base64,").pop())}},f=function(F){var E=this.internal.collections.addImage_images;if(E){for(var $ in E)if(F===E[$].alias)return E[$]}},y=function(F,E,$){return F||E||(F=-96,E=-96),F<0&&(F=-1*$.width*72/F/this.internal.scaleFactor),E<0&&(E=-1*$.height*72/E/this.internal.scaleFactor),F===0&&(F=E*$.width/$.height),E===0&&(E=F*$.height/$.width),[F,E]},x=function(F,E,$,U,K,re){var pe=y.call(this,$,U,K),Q=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,q=c.call(this);if($=pe[0],U=pe[1],q[K.index]=K,re){re*=Math.PI/180;var Y=Math.cos(re),k=Math.sin(re),L=function(W){return W.toFixed(4)},M=[L(Y),L(k),L(-1*k),L(Y),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,Q(F),J(E+U),"cm"].join(" ")),this.internal.write(M.join(" ")),this.internal.write([Q($),"0","0",Q(U),"0","0","cm"].join(" "))):this.internal.write([Q($),"0","0",Q(U),Q(F),J(E+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},w=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(F){var E,$,U=0;if(typeof F=="string")for($=F.length,E=0;E<$;E++)U=(U<<5)-U+F.charCodeAt(E),U|=0;else if(D(F))for($=F.byteLength/2,E=0;E<$;E++)U=(U<<5)-U+F[E],U|=0;return U},N=e.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var E=!0;return F.length===0&&(E=!1),F.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(E=!1),E},C=e.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var E=F.indexOf(",");return E<0?null:F.substring(0,E).trim().endsWith("base64")?F.substring(E+1):null},P=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(F){return P()&&F instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(F){return P()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},R=e.__addimage__.binaryStringToUint8Array=function(F){for(var E=F.length,$=new Uint8Array(E),U=0;U<E;U++)$[U]=F.charCodeAt(U);return $},A=e.__addimage__.arrayBufferToBinaryString=function(F){for(var E="",$=D(F)?F:new Uint8Array(F),U=0;U<$.length;U+=8192)E+=String.fromCharCode.apply(null,$.subarray(U,U+8192));return E};e.addImage=function(){var F,E,$,U,K,re,pe,Q,J;if(typeof arguments[1]=="number"?(E=t,$=arguments[1],U=arguments[2],K=arguments[3],re=arguments[4],pe=arguments[5],Q=arguments[6],J=arguments[7]):(E=arguments[1],$=arguments[2],U=arguments[3],K=arguments[4],re=arguments[5],pe=arguments[6],Q=arguments[7],J=arguments[8]),Gs(F=arguments[0])==="object"&&!h(F)&&"imageData"in F){var q=F;F=q.imageData,E=q.format||E||t,$=q.x||$||0,U=q.y||U||0,K=q.w||q.width||K,re=q.h||q.height||re,pe=q.alias||pe,Q=q.compression||Q,J=q.rotation||q.angle||J}var Y=this.internal.getFilters();if(Q===void 0&&Y.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN($)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var k=I.call(this,F,E,pe,Q);return x.call(this,$,U,K,re,k,J),this};var I=function(F,E,$,U){var K,re,pe;if(typeof F=="string"&&n(F)===t){F=unescape(F);var Q=O(F,!1);(Q!==""||(Q=e.loadFile(F,!0))!==void 0)&&(F=Q)}if(h(F)&&(F=p(F,E)),E=n(F,E),!u(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((pe=$)==null||pe.length===0)&&($=function(J){return typeof J=="string"||D(J)?b(J):D(J.data)?b(J.data):null}(F)),(K=f.call(this,$))||(P()&&(F instanceof Uint8Array||E==="RGBA"||(re=F,F=R(F))),K=this["process"+E.toUpperCase()](F,d.call(this),$,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in e.image_compression?J:v.NONE}(U),re)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},O=e.__addimage__.convertBase64ToBinaryString=function(F,E){E=typeof E!="boolean"||E;var $,U="";if(typeof F=="string"){var K;$=(K=C(F))!==null&&K!==void 0?K:F;try{U=ip($)}catch(re){if(E)throw N($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};e.getImageProperties=function(F){var E,$,U="";if(h(F)&&(F=p(F)),typeof F=="string"&&n(F)===t&&((U=O(F,!1))===""&&(U=e.loadFile(F)||""),F=U),$=n(F),!u($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(!P()||F instanceof Uint8Array||(F=R(F)),!(E=this["process"+$.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=$,E}})(es.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};es.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((n=d[h]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){n=d[p];var f=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(x.objId),b=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(v(n.contents))+")",i+=" /Popup "+w.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+f(v(b))+") >>",x.content=i;var N=x.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",w.content=i,this.internal.write(x.objId,"0 R",w.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var P=this.annotations._nameMap[n.options.name];n.options.pageNumber=P.page,n.options.top=P.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+a),h:d(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,a,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,n,a,i),a+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-d,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(es.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&i(x)&&t[x.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(x){var w=0,v=r,b="",N=0;for(w=0;w<x.length;w+=1)v[x.charCodeAt(w)]!==void 0?(N++,typeof(v=v[x.charCodeAt(w)])=="number"&&(b+=String.fromCharCode(v),v=r,N=0),w===x.length-1&&(v=r,b+=x.charAt(w-(N-1)),w-=N-1,N=0)):(v=r,b+=x.charAt(w-N),w-=N,N=0);return b};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(x,w,v){return o(x)?i(x)===!1?-1:!d(x)||!o(w)&&!o(v)||!o(v)&&l(w)||l(x)&&!o(w)||l(x)&&c(w)||l(x)&&l(w)?0:u(x)&&o(w)&&!l(w)&&o(v)&&d(v)?3:l(x)||!o(v)?1:2:-1},f=function(x){var w=0,v=0,b=0,N="",C="",P="",D=(x=x||"").split("\\s+"),R=[];for(w=0;w<D.length;w+=1){for(R.push(""),v=0;v<D[w].length;v+=1)N=D[w][v],C=D[w][v-1],P=D[w][v+1],o(N)?(b=p(N,C,P),R[w]+=b!==-1?String.fromCharCode(t[N.charCodeAt(0)][b]):N):R[w]+=N;R[w]=h(R[w])}return R.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var x,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(w)){var b=0;for(v=[],b=0;b<w.length;b+=1)Array.isArray(w[b])?v.push([f(w[b][0]),w[b][1],w[b][2]]):v.push([f(w[b])]);x=v}else x=f(w);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",y])}(es.API),es.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(es.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(x){y=x}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,f=0,y=0,x=0,w=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=d.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,C){return N.concat(w.splitTextToSize(C,v))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)f<(x=this.getStringUnitWidth(c[b],{font:h})*u)&&(f=x);return f!==0&&(y=c.length),{w:f/=p,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,f&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,p){if(n.call(this),!u)throw new Error("No data for PDF table.");var f,y,x,w,v=[],b=[],N=[],C={},P={},D=[],R=[],A=(p=p||{}).autoSize||!1,I=p.printHeaders!==!1,O=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,F=p.margins||Object.assign({width:this.getPageWidth()},t),E=typeof p.padding=="number"?p.padding:3,$=p.headerBackgroundColor||"#c8c8c8",U=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=U,this.setFontSize(O),h==null)b=v=Object.keys(u[0]),N=v.map(function(){return"left"});else if(Array.isArray(h)&&Gs(h[0])==="object")for(v=h.map(function(q){return q.name}),b=h.map(function(q){return q.prompt||q.name||""}),N=h.map(function(q){return q.align||"left"}),f=0;f<h.length;f+=1)P[h[f].name]=h[f].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(b=v=h,N=v.map(function(){return"left"}));if(A||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<v.length;f+=1){for(C[w=v[f]]=u.map(function(q){return q[w]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(b[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=C[w],this.setFont(void 0,"normal"),x=0;x<y.length;x+=1)D.push(this.getTextDimensions(y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[w]=Math.max.apply(null,D)+E+E,D=[]}if(I){var K={};for(f=0;f<v.length;f+=1)K[v[f]]={},K[v[f]].text=b[f],K[v[f]].align=N[f];var re=l.call(this,K,P);R=v.map(function(q){return new i(c,d,P[q],re,K[q].text,void 0,K[q].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var pe=h.reduce(function(q,Y){return q[Y.name]=Y.align,q},{});for(f=0;f<u.length;f+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:f,data:u[f]},this);var Q=l.call(this,u[f],P);for(x=0;x<v.length;x+=1){var J=u[f][v[x]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:f,col:x,data:J},this),o.call(this,new i(c,d,P[v[x]],Q,J,f+2,pe[v[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(f){var y=c[f];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/p+u+u},this).reduce(function(f,y){return Math.max(f,y)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(es.API);var dR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},uR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zw=cR(uR),hR=[100,200,300,400,500,600,700,800,900],IQ=cR(hR);function Uw(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return dR[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof zw[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function TC(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var FQ={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},RC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function IC(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function DQ(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},FQ,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(a[(i=Uw(t[l])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+IC(i)+"' and default family '"+n+"'.");if(o=function(c,d){if(d[c])return d[c];var u=zw[c],h=u<=zw.normal?-1:1,p=TC(d,uR,u,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+c);return p}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=dR[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=IQ[c],h=TC(d,hR,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+IC(i)+"'.");return o}function FC(e){return e.trimLeft()}function OQ(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function MQ(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Ng,DC,OC,Db=["times"];(function(e){var t,r,n,a,i,o,l,c,d,u=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new o,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new o,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var L=k;Object.defineProperty(this,"pdf",{get:function(){return L}});var M=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return M},set:function(Se){M=!!Se}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(Se){W=!!Se}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Se){isNaN(Se)||(se=Se)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(Se){isNaN(Se)||(ae=Se)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Se){var oe;typeof Se=="number"?oe=[Se,Se,Se,Se]:((oe=new Array(4))[0]=Se[0],oe[1]=Se.length>=2?Se[1]:oe[0],oe[2]=Se.length>=3?Se[2]:oe[0],oe[3]=Se.length>=4?Se[3]:oe[1]),d.margin=oe}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(Se){ge=Se}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(Se){fe=Se}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(Se){Me=Se}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Se){Se instanceof u&&(d=Se)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Se){d.path=Se}});var de=[];Object.defineProperty(this,"ctxStack",{get:function(){return de},set:function(Se){de=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var oe;oe=p(Se),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var oe=p(Se);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var $e=null;function Ye(Se,oe){if($e===null){var vt=function(me){var xe=[];return Object.keys(me).forEach(function(ee){me[ee].forEach(function(ue){var ve=null;switch(ue){case"bold":ve={family:ee,weight:"bold"};break;case"italic":ve={family:ee,style:"italic"};break;case"bolditalic":ve={family:ee,weight:"bold",style:"italic"};break;case"":case"normal":ve={family:ee}}ve!==null&&(ve.ref={name:ee,style:ue},xe.push(ve))})}),xe}(Se.getFontList());$e=function(me){for(var xe={},ee=0;ee<me.length;++ee){var ue=Uw(me[ee]),ve=ue.family,qe=ue.stretch,We=ue.style,ze=ue.weight;xe[ve]=xe[ve]||{},xe[ve][qe]=xe[ve][qe]||{},xe[ve][qe][We]=xe[ve][qe][We]||{},xe[ve][qe][We][ze]=ue}return xe}(vt.concat(oe))}return $e}var mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(Se){$e=null,mt=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var oe;if(this.ctx.font=Se,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var vt=oe[1];oe[2];var me=oe[3],xe=oe[4];oe[5];var ee=oe[6],ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(xe)[2];xe=Math.floor(ue==="px"?parseFloat(xe)*this.pdf.internal.scaleFactor:ue==="em"?parseFloat(xe)*this.pdf.getFontSize():parseFloat(xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(xe);var ve=function(te){var he,Ne,Ve=[],Ke=te.trim();if(Ke==="")return Db;if(Ke in RC)return[RC[Ke]];for(;Ke!=="";){switch(Ne=null,he=(Ke=FC(Ke)).charAt(0)){case'"':case"'":Ne=OQ(Ke.substring(1),he);break;default:Ne=MQ(Ke)}if(Ne===null||(Ve.push(Ne[0]),(Ke=FC(Ne[1]))!==""&&Ke.charAt(0)!==","))return Db;Ke=Ke.replace(/^,/,"")}return Ve}(ee);if(this.fontFaces){var qe=DQ(Ye(this.pdf,this.fontFaces),ve.map(function(te){return{family:te,stretch:"normal",weight:me,style:vt}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var We="";(me==="bold"||parseInt(me,10)>=700||vt==="bold")&&(We="bold"),vt==="italic"&&(We+="italic"),We.length===0&&(We="normal");for(var ze="",rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_t=0;_t<ve.length;_t++){if(this.pdf.internal.getFont(ve[_t],We,{noFallback:!0,disableWarning:!0})!==void 0){ze=ve[_t];break}if(We==="bolditalic"&&this.pdf.internal.getFont(ve[_t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ze=ve[_t],We="bold";else if(this.pdf.internal.getFont(ve[_t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ze=ve[_t],We="normal";break}}if(ze===""){for(var we=0;we<ve.length;we++)if(rt[ve[we]]){ze=rt[ve[we]];break}}ze=ze===""?"Times":ze,this.pdf.setFont(ze,We)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};h.prototype.setLineDash=function(k){this.lineDash=k},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){C.call(this,"fill",!1)},h.prototype.stroke=function(){C.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(k,L){if(isNaN(k)||isNaN(L))throw mr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var M=this.ctx.transform.applyToPoint(new o(k,L));this.path.push({type:"mt",x:M.x,y:M.y}),this.ctx.lastPoint=new o(k,L)},h.prototype.closePath=function(){var k=new o(0,0),L=0;for(L=this.path.length-1;L!==-1;L--)if(this.path[L].type==="begin"&&Gs(this.path[L+1])==="object"&&typeof this.path[L+1].x=="number"){k=new o(this.path[L+1].x,this.path[L+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(k.x,k.y)},h.prototype.lineTo=function(k,L){if(isNaN(k)||isNaN(L))throw mr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var M=this.ctx.transform.applyToPoint(new o(k,L));this.path.push({type:"lt",x:M.x,y:M.y}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},h.prototype.quadraticCurveTo=function(k,L,M,W){if(isNaN(M)||isNaN(W)||isNaN(k)||isNaN(L))throw mr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(M,W)),ae=this.ctx.transform.applyToPoint(new o(k,L));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},h.prototype.bezierCurveTo=function(k,L,M,W,se,ae){if(isNaN(se)||isNaN(ae)||isNaN(k)||isNaN(L)||isNaN(M)||isNaN(W))throw mr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new o(se,ae)),fe=this.ctx.transform.applyToPoint(new o(k,L)),Me=this.ctx.transform.applyToPoint(new o(M,W));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:Me.x,y2:Me.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},h.prototype.arc=function(k,L,M,W,se,ae){if(isNaN(k)||isNaN(L)||isNaN(M)||isNaN(W)||isNaN(se))throw mr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new o(k,L));k=ge.x,L=ge.y;var fe=this.ctx.transform.applyToPoint(new o(0,M)),Me=this.ctx.transform.applyToPoint(new o(0,0));M=Math.sqrt(Math.pow(fe.x-Me.x,2)+Math.pow(fe.y-Me.y,2))}Math.abs(se-W)>=2*Math.PI&&(W=0,se=2*Math.PI),this.path.push({type:"arc",x:k,y:L,radius:M,startAngle:W,endAngle:se,counterclockwise:ae})},h.prototype.arcTo=function(k,L,M,W,se){throw new Error("arcTo not implemented.")},h.prototype.rect=function(k,L,M,W){if(isNaN(k)||isNaN(L)||isNaN(M)||isNaN(W))throw mr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,L),this.lineTo(k+M,L),this.lineTo(k+M,L+W),this.lineTo(k,L+W),this.lineTo(k,L),this.lineTo(k+M,L),this.lineTo(k,L)},h.prototype.fillRect=function(k,L,M,W){if(isNaN(k)||isNaN(L)||isNaN(M)||isNaN(W))throw mr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,L,M,W),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},h.prototype.strokeRect=function(k,L,M,W){if(isNaN(k)||isNaN(L)||isNaN(M)||isNaN(W))throw mr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(k,L,M,W),this.stroke())},h.prototype.clearRect=function(k,L,M,W){if(isNaN(k)||isNaN(L)||isNaN(M)||isNaN(W))throw mr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,L,M,W))},h.prototype.save=function(k){k=typeof k!="boolean"||k;for(var L=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("q");if(this.pdf.setPage(L),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},h.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var L=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("Q");this.pdf.setPage(L),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(k){var L,M,W,se;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))L=0,M=0,W=0,se=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(ae!==null)L=parseInt(ae[1]),M=parseInt(ae[2]),W=parseInt(ae[3]),se=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)L=parseInt(ae[1]),M=parseInt(ae[2]),W=parseInt(ae[3]),se=parseFloat(ae[4]);else{if(se=1,typeof k=="string"&&k.charAt(0)!=="#"){var ge=new rR(k);k=ge.ok?ge.toHex():"#000000"}k.length===4?(L=k.substring(1,2),L+=L,M=k.substring(2,3),M+=M,W=k.substring(3,4),W+=W):(L=k.substring(1,3),M=k.substring(3,5),W=k.substring(5,7)),L=parseInt(L,16),M=parseInt(M,16),W=parseInt(W,16)}}return{r:L,g:M,b:W,a:se,style:k}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(k,L,M,W){if(isNaN(L)||isNaN(M)||typeof k!="string")throw mr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!f.call(this)){var se=Q(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;E.call(this,{text:k,x:L,y:M,scale:ae,angle:se,align:this.textAlign,maxWidth:W})}},h.prototype.strokeText=function(k,L,M,W){if(isNaN(L)||isNaN(M)||typeof k!="string")throw mr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){W=isNaN(W)?void 0:W;var se=Q(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;E.call(this,{text:k,x:L,y:M,scale:ae,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:W})}},h.prototype.measureText=function(k){if(typeof k!="string")throw mr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var L=this.pdf,M=this.pdf.internal.scaleFactor,W=L.internal.getFontSize(),se=L.getStringUnitWidth(k)*W/L.internal.scaleFactor,ae=function(ge){var fe=(ge=ge||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this};return new ae({width:se*=Math.round(96*M/72*1e4)/1e4})},h.prototype.scale=function(k,L){if(isNaN(k)||isNaN(L))throw mr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var M=new c(k,0,0,L,0,0);this.ctx.transform=this.ctx.transform.multiply(M)},h.prototype.rotate=function(k){if(isNaN(k))throw mr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var L=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(L)},h.prototype.translate=function(k,L){if(isNaN(k)||isNaN(L))throw mr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var M=new c(1,0,0,1,k,L);this.ctx.transform=this.ctx.transform.multiply(M)},h.prototype.transform=function(k,L,M,W,se,ae){if(isNaN(k)||isNaN(L)||isNaN(M)||isNaN(W)||isNaN(se)||isNaN(ae))throw mr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new c(k,L,M,W,se,ae);this.ctx.transform=this.ctx.transform.multiply(ge)},h.prototype.setTransform=function(k,L,M,W,se,ae){k=isNaN(k)?1:k,L=isNaN(L)?0:L,M=isNaN(M)?0:M,W=isNaN(W)?1:W,se=isNaN(se)?0:se,ae=isNaN(ae)?0:ae,this.ctx.transform=new c(k,L,M,W,se,ae)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(k,L,M,W,se,ae,ge,fe,Me){var de=this.pdf.getImageProperties(k),$e=1,Ye=1,mt=1,Se=1;W!==void 0&&fe!==void 0&&(mt=fe/W,Se=Me/se,$e=de.width/W*fe/W,Ye=de.height/se*Me/se),ae===void 0&&(ae=L,ge=M,L=0,M=0),W!==void 0&&fe===void 0&&(fe=W,Me=se),W===void 0&&fe===void 0&&(fe=de.width,Me=de.height);for(var oe,vt=this.ctx.transform.decompose(),me=Q(vt.rotate.shx),xe=new c,ee=(xe=(xe=(xe=xe.multiply(vt.translate)).multiply(vt.skew)).multiply(vt.scale)).applyToRectangle(new l(ae-L*mt,ge-M*Se,W*$e,se*Ye)),ue=w.call(this,ee),ve=[],qe=0;qe<ue.length;qe+=1)ve.indexOf(ue[qe])===-1&&ve.push(ue[qe]);if(N(ve),this.autoPaging)for(var We=ve[0],ze=ve[ve.length-1],rt=We;rt<ze+1;rt++){this.pdf.setPage(rt);var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],we=rt===1?this.posY+this.margin[0]:this.margin[0],te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],he=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ne=rt===1?0:te+(rt-2)*he;if(this.ctx.clip_path.length!==0){var Ve=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(oe,this.posX+this.margin[3],-Ne+we+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=Ve}var Ke=JSON.parse(JSON.stringify(ee));Ke=b([Ke],this.posX+this.margin[3],-Ne+we+this.ctx.prevPageLastElemOffset)[0];var lt=(rt>We||rt<ze)&&x.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,he,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,me),lt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",ee.x,ee.y,ee.w,ee.h,null,null,me)};var w=function(k,L,M){var W=[];L=L||this.pdf.internal.pageSize.width,M=M||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":W.push(Math.floor((k.y+se)/M)+1);break;case"arc":W.push(Math.floor((k.y+se-k.radius)/M)+1),W.push(Math.floor((k.y+se+k.radius)/M)+1);break;case"qct":var ae=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);W.push(Math.floor((ae.y+se)/M)+1),W.push(Math.floor((ae.y+ae.h+se)/M)+1);break;case"bct":var ge=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);W.push(Math.floor((ge.y+se)/M)+1),W.push(Math.floor((ge.y+ge.h+se)/M)+1);break;case"rect":W.push(Math.floor((k.y+se)/M)+1),W.push(Math.floor((k.y+k.h+se)/M)+1)}for(var fe=0;fe<W.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<W[fe];)v.call(this);return W},v=function(){var k=this.fillStyle,L=this.strokeStyle,M=this.font,W=this.lineCap,se=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=L,this.font=M,this.lineCap=W,this.lineWidth=se,this.lineJoin=ae},b=function(k,L,M){for(var W=0;W<k.length;W++)switch(k[W].type){case"bct":k[W].x2+=L,k[W].y2+=M;case"qct":k[W].x1+=L,k[W].y1+=M;case"mt":case"lt":case"arc":default:k[W].x+=L,k[W].y+=M}return k},N=function(k){return k.sort(function(L,M){return L-M})},C=function(k,L){for(var M,W,se=this.fillStyle,ae=this.strokeStyle,ge=this.lineCap,fe=this.lineWidth,Me=Math.abs(fe*this.ctx.transform.scaleX),de=this.lineJoin,$e=JSON.parse(JSON.stringify(this.path)),Ye=JSON.parse(JSON.stringify(this.path)),mt=[],Se=0;Se<Ye.length;Se++)if(Ye[Se].x!==void 0)for(var oe=w.call(this,Ye[Se]),vt=0;vt<oe.length;vt+=1)mt.indexOf(oe[vt])===-1&&mt.push(oe[vt]);for(var me=0;me<mt.length;me++)for(;this.pdf.internal.getNumberOfPages()<mt[me];)v.call(this);if(N(mt),this.autoPaging)for(var xe=mt[0],ee=mt[mt.length-1],ue=xe;ue<ee+1;ue++){this.pdf.setPage(ue),this.fillStyle=se,this.strokeStyle=ae,this.lineCap=ge,this.lineWidth=Me,this.lineJoin=de;var ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=ue===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=ue===1?0:We+(ue-2)*ze;if(this.ctx.clip_path.length!==0){var _t=this.path;M=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(M,this.posX+this.margin[3],-rt+qe+this.ctx.prevPageLastElemOffset),P.call(this,k,!0),this.path=_t}if(W=JSON.parse(JSON.stringify($e)),this.path=b(W,this.posX+this.margin[3],-rt+qe+this.ctx.prevPageLastElemOffset),L===!1||ue===0){var we=(ue>xe||ue<ee)&&x.call(this);we&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,ze,null).clip().discardPath()),P.call(this,k,L),we&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}else this.lineWidth=Me,P.call(this,k,L),this.lineWidth=fe;this.path=$e},P=function(k,L){if((k!=="stroke"||L||!y.call(this))&&(k==="stroke"||L||!f.call(this))){for(var M,W,se=[],ae=this.path,ge=0;ge<ae.length;ge++){var fe=ae[ge];switch(fe.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:fe,deltas:[],abs:[]});break;case"lt":var Me=se.length;if(ae[ge-1]&&!isNaN(ae[ge-1].x)&&(M=[fe.x-ae[ge-1].x,fe.y-ae[ge-1].y],Me>0)){for(;Me>=0;Me--)if(se[Me-1].close!==!0&&se[Me-1].begin!==!0){se[Me-1].deltas.push(M),se[Me-1].abs.push(fe);break}}break;case"bct":M=[fe.x1-ae[ge-1].x,fe.y1-ae[ge-1].y,fe.x2-ae[ge-1].x,fe.y2-ae[ge-1].y,fe.x-ae[ge-1].x,fe.y-ae[ge-1].y],se[se.length-1].deltas.push(M);break;case"qct":var de=ae[ge-1].x+2/3*(fe.x1-ae[ge-1].x),$e=ae[ge-1].y+2/3*(fe.y1-ae[ge-1].y),Ye=fe.x+2/3*(fe.x1-fe.x),mt=fe.y+2/3*(fe.y1-fe.y),Se=fe.x,oe=fe.y;M=[de-ae[ge-1].x,$e-ae[ge-1].y,Ye-ae[ge-1].x,mt-ae[ge-1].y,Se-ae[ge-1].x,oe-ae[ge-1].y],se[se.length-1].deltas.push(M);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(fe)}}W=L?null:k==="stroke"?"stroke":"fill";for(var vt=!1,me=0;me<se.length;me++)if(se[me].arc)for(var xe=se[me].abs,ee=0;ee<xe.length;ee++){var ue=xe[ee];ue.type==="arc"?A.call(this,ue.x,ue.y,ue.radius,ue.startAngle,ue.endAngle,ue.counterclockwise,void 0,L,!vt):$.call(this,ue.x,ue.y),vt=!0}else if(se[me].close===!0)this.pdf.internal.out("h"),vt=!1;else if(se[me].begin!==!0){var ve=se[me].start.x,qe=se[me].start.y;U.call(this,se[me].deltas,ve,qe),vt=!0}W&&I.call(this,W),L&&O.call(this)}},D=function(k){var L=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,M=L*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-M;case"top":return k+L-M;case"hanging":return k+L-2*M;case"middle":return k+L/2-M;case"ideographic":return k;case"alphabetic":default:return k}},R=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(L,M){this.colorStops.push([L,M])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(k,L,M,W,se,ae,ge,fe,Me){for(var de=re.call(this,M,W,se,ae),$e=0;$e<de.length;$e++){var Ye=de[$e];$e===0&&(Me?F.call(this,Ye.x1+k,Ye.y1+L):$.call(this,Ye.x1+k,Ye.y1+L)),K.call(this,k,L,Ye.x2,Ye.y2,Ye.x3,Ye.y3,Ye.x4,Ye.y4)}fe?O.call(this):I.call(this,ge)},I=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(k,L){this.pdf.internal.out(r(k)+" "+n(L)+" m")},E=function(k){var L;switch(k.align){case"right":case"end":L="right";break;case"center":L="center";break;case"left":case"start":default:L="left"}var M=this.pdf.getTextDimensions(k.text),W=D.call(this,k.y),se=R.call(this,W)-M.h,ae=this.ctx.transform.applyToPoint(new o(k.x,W)),ge=this.ctx.transform.decompose(),fe=new c;fe=(fe=(fe=fe.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var Me,de,$e,Ye=this.ctx.transform.applyToRectangle(new l(k.x,W,M.w,M.h)),mt=fe.applyToRectangle(new l(k.x,se,M.w,M.h)),Se=w.call(this,mt),oe=[],vt=0;vt<Se.length;vt+=1)oe.indexOf(Se[vt])===-1&&oe.push(Se[vt]);if(N(oe),this.autoPaging)for(var me=oe[0],xe=oe[oe.length-1],ee=me;ee<xe+1;ee++){this.pdf.setPage(ee);var ue=ee===1?this.posY+this.margin[0]:this.margin[0],ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],We=qe-this.margin[0],ze=this.pdf.internal.pageSize.width-this.margin[1],rt=ze-this.margin[3],_t=ee===1?0:ve+(ee-2)*We;if(this.ctx.clip_path.length!==0){var we=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Me,this.posX+this.margin[3],-1*_t+ue),P.call(this,"fill",!0),this.path=we}var te=b([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-_t+ue+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*k.scale),$e=this.lineWidth,this.lineWidth=$e*k.scale);var he=this.autoPaging!=="text";if(he||te.y+te.h<=qe){if(he||te.y>=ue&&te.x<=ze){var Ne=he?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||ze-te.x)[0],Ve=b([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-_t+ue+this.ctx.prevPageLastElemOffset)[0],Ke=he&&(ee>me||ee<xe)&&x.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,We,null).clip().discardPath()),this.pdf.text(Ne,Ve.x,Ve.y,{angle:k.angle,align:L,renderingMode:k.renderingMode}),Ke&&this.pdf.restoreGraphicsState()}}else te.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-te.y);k.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=$e)}else k.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*k.scale),$e=this.lineWidth,this.lineWidth=$e*k.scale),this.pdf.text(k.text,ae.x+this.posX,ae.y+this.posY,{angle:k.angle,align:L,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=$e)},$=function(k,L,M,W){M=M||0,W=W||0,this.pdf.internal.out(r(k+M)+" "+n(L+W)+" l")},U=function(k,L,M){return this.pdf.lines(k,L,M,null,null)},K=function(k,L,M,W,se,ae,ge,fe){this.pdf.internal.out([t(a(M+k)),t(i(W+L)),t(a(se+k)),t(i(ae+L)),t(a(ge+k)),t(i(fe+L)),"c"].join(" "))},re=function(k,L,M,W){for(var se=2*Math.PI,ae=Math.PI/2;L>M;)L-=se;var ge=Math.abs(M-L);ge<se&&W&&(ge=se-ge);for(var fe=[],Me=W?-1:1,de=L;ge>1e-5;){var $e=de+Me*Math.min(ge,ae);fe.push(pe.call(this,k,de,$e)),ge-=Math.abs($e-de),de=$e}return fe},pe=function(k,L,M){var W=(M-L)/2,se=k*Math.cos(W),ae=k*Math.sin(W),ge=se,fe=-ae,Me=ge*ge+fe*fe,de=Me+ge*se+fe*ae,$e=4/3*(Math.sqrt(2*Me*de)-de)/(ge*ae-fe*se),Ye=ge-$e*fe,mt=fe+$e*ge,Se=Ye,oe=-mt,vt=W+L,me=Math.cos(vt),xe=Math.sin(vt);return{x1:k*Math.cos(L),y1:k*Math.sin(L),x2:Ye*me-mt*xe,y2:Ye*xe+mt*me,x3:Se*me-oe*xe,y3:Se*xe+oe*me,x4:k*Math.cos(M),y4:k*Math.sin(M)}},Q=function(k){return 180*k/Math.PI},J=function(k,L,M,W,se,ae){var ge=k+.5*(M-k),fe=L+.5*(W-L),Me=se+.5*(M-se),de=ae+.5*(W-ae),$e=Math.min(k,se,ge,Me),Ye=Math.max(k,se,ge,Me),mt=Math.min(L,ae,fe,de),Se=Math.max(L,ae,fe,de);return new l($e,mt,Ye-$e,Se-mt)},q=function(k,L,M,W,se,ae,ge,fe){var Me,de,$e,Ye,mt,Se,oe,vt,me,xe,ee,ue,ve,qe,We=M-k,ze=W-L,rt=se-M,_t=ae-W,we=ge-se,te=fe-ae;for(de=0;de<41;de++)me=(oe=($e=k+(Me=de/40)*We)+Me*((mt=M+Me*rt)-$e))+Me*(mt+Me*(se+Me*we-mt)-oe),xe=(vt=(Ye=L+Me*ze)+Me*((Se=W+Me*_t)-Ye))+Me*(Se+Me*(ae+Me*te-Se)-vt),de==0?(ee=me,ue=xe,ve=me,qe=xe):(ee=Math.min(ee,me),ue=Math.min(ue,xe),ve=Math.max(ve,me),qe=Math.max(qe,xe));return new l(Math.round(ee),Math.round(ue),Math.round(ve-ee),Math.round(qe-ue))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,L,M=(k=this.ctx.lineDash,L=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:L}));this.prevLineDash!==M&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=M)}}})(es.API),function(e){var t=function(i){var o,l,c,d,u,h,p,f,y,x;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(x=u%85))/85)-(y=u%85))/85)-(f=u%85))/85)-(p=u%85))/85)%85,l.push(h+33,p+33,f+33,y+33,x+33)):l.push(122);return function(w,v){for(var b=v;b>0;b--)w.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,h=String,p="length",f=255,y="charCodeAt",x="slice",w="replace";for(i[x](-2),i=i[x](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[x](i[p]%5||5))[p];u>d;d+=5)l=52200625*(i[y](d)-33)+614125*(i[y](d+1)-33)+7225*(i[y](d+2)-33)+85*(i[y](d+3)-33)+(i[y](d+4)-33),c.push(f&l>>24,f&l>>16,f&l>>8,f&l);return function(v,b){for(var N=b;N>0;N--)v.pop()}(c,o[p]),h.fromCharCode.apply(h,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=Dw(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(es.API),function(e){e.loadFile=function(t,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,p=0,f=function(y){var x=y.length,w=[],v=String.fromCharCode;for(p=0;p<x;p+=1)w.push(v(255&y.charCodeAt(p)));return w.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return f(h.responseText)}(a,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(es.API),function(e){function t(){return(ss.html2canvas?Promise.resolve(ss.html2canvas):Lw(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(ss.DOMPurify?Promise.resolve(ss.DOMPurify):Lw(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Gs(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(c(p,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var p=0;p<d.length;++p){var f=d[p],y=f.src.find(function(x){return x.format==="truetype"});y&&c.addFont(y.url,f.ref.name,f.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||es.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,es.getPageSize=function(o,l,c){if(Gs(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var f,y=0,x=0;if(p.hasOwnProperty(h))y=p[h][1]/u,x=p[h][0]/u;else try{y=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>y&&(f=x,x=y,y=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>x&&(f=x,x=y,y=f)}return{width:x,height:y,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Uw):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(es.API),es.API.addJS=function(e){return OC=e,this.internal.events.subscribe("postPutResources",function(){Ng=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ng+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),DC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+OC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ng!==void 0&&DC!==void 0&&this.internal.out("/Names <</JavaScript "+Ng+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=r.internal.newObject();u.push(h);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(es.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var p,f=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,x={width:0,height:0,numcomponents:1},w=4;w<y;w+=2){if(w+=f,t.indexOf(h.charCodeAt(w+1))!==-1){p=256*h.charCodeAt(w+5)+h.charCodeAt(w+6),x={width:256*h.charCodeAt(w+7)+h.charCodeAt(w+8),height:p,numcomponents:h.charCodeAt(w+9)};break}f=256*h.charCodeAt(w+2)+h.charCodeAt(w+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:a}}return u}}(es.API);var ah,Sg,MC,$C,BC,$Q=function(){var e,t,r;function n(i){var o,l,c,d,u,h,p,f,y,x,w,v,b,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),y=(function(){var C,P;for(P=[],C=0;C<4;++C)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),i=(h!=null?h.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(b=0;0<=x?b<x:b>x;0<=x?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":p=(w=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,w.slice(0,p)),this.text[f]=String.fromCharCode.apply(String,w.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,p,f,y){var x,w,v,b,N,C,P,D,R,A,I,O,F,E,$,U,K,re,pe,Q,J,q=Math.ceil((d.width-h)/f),Y=Math.ceil((d.height-p)/y),k=d.width==q&&d.height==Y;for(E=o*q,O=k?l:new Uint8Array(E*Y),C=i.length,F=0,w=0;F<Y&&c<C;){switch(i[c++]){case 0:for(b=K=0;K<E;b=K+=1)O[w++]=i[c++];break;case 1:for(b=re=0;re<E;b=re+=1)x=i[c++],N=b<o?0:O[w-o],O[w++]=(x+N)%256;break;case 2:for(b=pe=0;pe<E;b=pe+=1)x=i[c++],v=(b-b%o)/o,$=F&&O[(F-1)*E+v*o+b%o],O[w++]=($+x)%256;break;case 3:for(b=Q=0;Q<E;b=Q+=1)x=i[c++],v=(b-b%o)/o,N=b<o?0:O[w-o],$=F&&O[(F-1)*E+v*o+b%o],O[w++]=(x+Math.floor((N+$)/2))%256;break;case 4:for(b=J=0;J<E;b=J+=1)x=i[c++],v=(b-b%o)/o,N=b<o?0:O[w-o],F===0?$=U=0:($=O[(F-1)*E+v*o+b%o],U=v&&O[(F-1)*E+(v-1)*o+b%o]),P=N+$-U,D=Math.abs(P-N),A=Math.abs(P-$),I=Math.abs(P-U),R=D<=A&&D<=I?N:A<=I?$:U,O[w++]=(x+R)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!k){var L=((p+F*y)*d.width+h)*o,M=F*E;for(b=0;b<q;b+=1){for(var W=0;W<o;W+=1)l[L++]=O[M++];L+=(f-1)*o}}F++}}return i=gQ(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,d,u,h,p,f;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,p=l.length;h<p;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(f=u[i++])!=null?f:255;return d},n.prototype.copyToImageData=function(i,o){var l,c,d,u,h,p,f,y,x,w,v;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(d=i.data||i).length,h=x||o,u=p=0,c===1)for(;u<y;)f=x?4*o[u/4]:p,w=h[f++],d[u++]=w,d[u++]=w,d[u++]=w,d[u++]=l?h[f++]:255,p=f;else for(;u<y;)f=x?4*o[u/4]:p,d[u++]=h[f++],d[u++]=h[f++],d[u++]=h[f++],d[u++]=l?h[f++]:255,p=f},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(ss)==="[object Window]"){try{t=ss.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,d,u,h,p,f;if(this.animation){for(f=[],l=u=0,h=(p=this.animation.frames).length;u<h;l=++u)o=p[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,f.push(o.image=e(c));return f}},n.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,d,u,h,p=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var f,y;if(f=l++%d,y=c[f],p.renderFrame(i,f),d>1&&l/d<u)return p.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function BQ(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,p=null,f=0,y=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];h=e[t++]|e[t++]<<8,p=e[t++],!(1&x)&&(p=null),f=x>>2&7,t++;break;case 254:for(;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var w=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,C=e[t++],P=C>>6&1,D=1<<(7&C)+1,R=l,A=c,I=!1;C>>7&&(I=!0,R=t,A=D,t+=3*D);var O=t;for(t++;;){var F;if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}u.push({x:w,y:v,width:b,height:N,has_local_palette:I,palette_offset:R,palette_size:A,data_offset:O,data_length:t-O,transparent_index:p,interlaced:!!P,delay:h,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(E){if(E<0||E>=u.length)throw new Error("Frame index out of range.");return u[E]},this.decodeAndBlitFrameBGRA=function(E,$){var U=this.frameInfo(E),K=U.width*U.height,re=new Uint8Array(K);zC(e,U.data_offset,re,K);var pe=U.palette_offset,Q=U.transparent_index;Q===null&&(Q=256);var J=U.width,q=r-J,Y=J,k=4*(U.y*r+U.x),L=4*((U.y+U.height)*r+U.x),M=k,W=4*q;U.interlaced===!0&&(W+=4*r*7);for(var se=8,ae=0,ge=re.length;ae<ge;++ae){var fe=re[ae];if(Y===0&&(Y=J,(M+=W)>=L&&(W=4*q+4*r*(se-1),M=k+(J+q)*(se<<1),se>>=1)),fe===Q)M+=4;else{var Me=e[pe+3*fe],de=e[pe+3*fe+1],$e=e[pe+3*fe+2];$[M++]=$e,$[M++]=de,$[M++]=Me,$[M++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(E,$){var U=this.frameInfo(E),K=U.width*U.height,re=new Uint8Array(K);zC(e,U.data_offset,re,K);var pe=U.palette_offset,Q=U.transparent_index;Q===null&&(Q=256);var J=U.width,q=r-J,Y=J,k=4*(U.y*r+U.x),L=4*((U.y+U.height)*r+U.x),M=k,W=4*q;U.interlaced===!0&&(W+=4*r*7);for(var se=8,ae=0,ge=re.length;ae<ge;++ae){var fe=re[ae];if(Y===0&&(Y=J,(M+=W)>=L&&(W=4*q+4*r*(se-1),M=k+(J+q)*(se<<1),se>>=1)),fe===Q)M+=4;else{var Me=e[pe+3*fe],de=e[pe+3*fe+1],$e=e[pe+3*fe+2];$[M++]=Me,$[M++]=de,$[M++]=$e,$[M++]=255}--Y}}}function zC(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,u=0,h=0,p=0,f=e[t++],y=new Int32Array(4096),x=null;;){for(;u<16&&f!==0;)h|=e[t++]<<u,u+=8,f===1?f=e[t++]:--f;if(u<c)break;var w=h&d;if(h>>=c,u-=c,w!==i){if(w===o)break;for(var v=w<l?w:x,b=0,N=v;N>i;)N=y[N]>>8,++b;var C=N;if(p+b+(v!==w?1:0)>n)return void mr.log("Warning, gif stream longer than expected.");r[p++]=C;var P=p+=b;for(v!==w&&(r[p++]=C),N=v;b--;)N=y[N],r[--P]=255&N,N>>=8;x!==null&&l<4096&&(y[l++]=x<<8|C,l>=d+1&&c<12&&(++c,d=d<<1|1)),x=w}else l=o+1,d=(1<<(c=a+1))-1,x=null}return p!==n&&mr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ob(e){var t,r,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),p=new Array(65535),f=new Array(64),y=new Array(64),x=[],w=0,v=7,b=new Array(64),N=new Array(64),C=new Array(64),P=new Array(256),D=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(k,L){for(var M=0,W=0,se=new Array,ae=1;ae<=16;ae++){for(var ge=1;ge<=k[ae];ge++)se[L[W]]=[],se[L[W]][0]=M,se[L[W]][1]=ae,W++,M++;M*=2}return se}function pe(k){for(var L=k[0],M=k[1]-1;M>=0;)L&1<<M&&(w|=1<<v),M--,--v<0&&(w==255?(Q(255),Q(0)):Q(w),v=7,w=0)}function Q(k){x.push(k)}function J(k){Q(k>>8&255),Q(255&k)}function q(k,L,M,W,se){for(var ae,ge=se[0],fe=se[240],Me=function(xe,ee){var ue,ve,qe,We,ze,rt,_t,we,te,he,Ne=0;for(te=0;te<8;++te){ue=xe[Ne],ve=xe[Ne+1],qe=xe[Ne+2],We=xe[Ne+3],ze=xe[Ne+4],rt=xe[Ne+5],_t=xe[Ne+6];var Ve=ue+(we=xe[Ne+7]),Ke=ue-we,lt=ve+_t,tt=ve-_t,pt=qe+rt,Yt=qe-rt,Dt=We+ze,ks=We-ze,wt=Ve+Dt,ws=Ve-Dt,ts=lt+pt,qt=lt-pt;xe[Ne]=wt+ts,xe[Ne+4]=wt-ts;var kt=.707106781*(qt+ws);xe[Ne+2]=ws+kt,xe[Ne+6]=ws-kt;var Ce=.382683433*((wt=ks+Yt)-(qt=tt+Ke)),dt=.5411961*wt+Ce,yt=1.306562965*qt+Ce,Xt=.707106781*(ts=Yt+tt),tr=Ke+Xt,Vt=Ke-Xt;xe[Ne+5]=Vt+dt,xe[Ne+3]=Vt-dt,xe[Ne+1]=tr+yt,xe[Ne+7]=tr-yt,Ne+=8}for(Ne=0,te=0;te<8;++te){ue=xe[Ne],ve=xe[Ne+8],qe=xe[Ne+16],We=xe[Ne+24],ze=xe[Ne+32],rt=xe[Ne+40],_t=xe[Ne+48];var ln=ue+(we=xe[Ne+56]),fn=ue-we,Ir=ve+_t,hr=ve-_t,sr=qe+rt,Br=qe-rt,zi=We+ze,Ea=We-ze,Oe=ln+zi,Ze=ln-zi,Rt=Ir+sr,as=Ir-sr;xe[Ne]=Oe+Rt,xe[Ne+32]=Oe-Rt;var Ns=.707106781*(as+Ze);xe[Ne+16]=Ze+Ns,xe[Ne+48]=Ze-Ns;var Zs=.382683433*((Oe=Ea+Br)-(as=hr+fn)),xr=.5411961*Oe+Zs,Ts=1.306562965*as+Zs,Ms=.707106781*(Rt=Br+hr),Z=fn+Ms,Re=fn-Ms;xe[Ne+40]=Re+xr,xe[Ne+24]=Re-xr,xe[Ne+8]=Z+Ts,xe[Ne+56]=Z-Ts,Ne++}for(te=0;te<64;++te)he=xe[te]*ee[te],f[te]=he>0?he+.5|0:he-.5|0;return f}(k,L),de=0;de<64;++de)y[R[de]]=Me[de];var $e=y[0]-M;M=y[0],$e==0?pe(W[0]):(pe(W[p[ae=32767+$e]]),pe(h[ae]));for(var Ye=63;Ye>0&&y[Ye]==0;)Ye--;if(Ye==0)return pe(ge),M;for(var mt,Se=1;Se<=Ye;){for(var oe=Se;y[Se]==0&&Se<=Ye;)++Se;var vt=Se-oe;if(vt>=16){mt=vt>>4;for(var me=1;me<=mt;++me)pe(fe);vt&=15}ae=32767+y[Se],pe(se[(vt<<4)+p[ae]]),pe(h[ae]),Se++}return Ye!=63&&pe(ge),M}function Y(k){k=Math.min(Math.max(k,1),100),i!=k&&(function(L){for(var M=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var se=o((M[W]*L+50)/100);se=Math.min(Math.max(se,1),255),l[R[W]]=se}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var fe=o((ae[ge]*L+50)/100);fe=Math.min(Math.max(fe,1),255),c[R[ge]]=fe}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],de=0,$e=0;$e<8;$e++)for(var Ye=0;Ye<8;Ye++)d[de]=1/(l[R[de]]*Me[$e]*Me[Ye]*8),u[de]=1/(c[R[de]]*Me[$e]*Me[Ye]*8),de++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),i=k)}this.encode=function(k,L){L&&Y(L),x=new Array,w=0,v=7,J(65496),J(65504),J(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),J(1),J(1),Q(0),Q(0),function(){J(65499),J(132),Q(0);for(var ve=0;ve<64;ve++)Q(l[ve]);Q(1);for(var qe=0;qe<64;qe++)Q(c[qe])}(),function(ve,qe){J(65472),J(17),Q(8),J(qe),J(ve),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(k.width,k.height),function(){J(65476),J(418),Q(0);for(var ve=0;ve<16;ve++)Q(A[ve+1]);for(var qe=0;qe<=11;qe++)Q(I[qe]);Q(16);for(var We=0;We<16;We++)Q(O[We+1]);for(var ze=0;ze<=161;ze++)Q(F[ze]);Q(1);for(var rt=0;rt<16;rt++)Q(E[rt+1]);for(var _t=0;_t<=11;_t++)Q($[_t]);Q(17);for(var we=0;we<16;we++)Q(U[we+1]);for(var te=0;te<=161;te++)Q(K[te])}(),J(65498),J(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var M=0,W=0,se=0;w=0,v=7,this.encode.displayName="_encode_";for(var ae,ge,fe,Me,de,$e,Ye,mt,Se,oe=k.data,vt=k.width,me=k.height,xe=4*vt,ee=0;ee<me;){for(ae=0;ae<xe;){for(de=xe*ee+ae,Ye=-1,mt=0,Se=0;Se<64;Se++)$e=de+(mt=Se>>3)*xe+(Ye=4*(7&Se)),ee+mt>=me&&($e-=xe*(ee+1+mt-me)),ae+Ye>=xe&&($e-=ae+Ye-xe+4),ge=oe[$e++],fe=oe[$e++],Me=oe[$e++],b[Se]=(D[ge]+D[fe+256>>0]+D[Me+512>>0]>>16)-128,N[Se]=(D[ge+768>>0]+D[fe+1024>>0]+D[Me+1280>>0]>>16)-128,C[Se]=(D[ge+1280>>0]+D[fe+1536>>0]+D[Me+1792>>0]>>16)-128;M=q(b,d,M,t,n),W=q(N,u,W,r,a),se=q(C,u,se,r,a),ae+=32}ee+=8}if(v>=0){var ue=[];ue[1]=v+1,ue[0]=(1<<v+1)-1,pe(ue)}return J(65497),new Uint8Array(x)},e=e||50,function(){for(var k=String.fromCharCode,L=0;L<256;L++)P[L]=k(L)}(),t=re(A,I),r=re(E,$),n=re(O,F),a=re(U,K),function(){for(var k=1,L=2,M=1;M<=15;M++){for(var W=k;W<L;W++)p[32767+W]=M,h[32767+W]=[],h[32767+W][1]=M,h[32767+W][0]=W;for(var se=-(L-1);se<=-k;se++)p[32767+se]=M,h[32767+se]=[],h[32767+se][1]=M,h[32767+se][0]=L-1+se;k<<=1,L<<=1}}(),function(){for(var k=0;k<256;k++)D[k]=19595*k,D[k+256>>0]=38470*k,D[k+512>>0]=7471*k+32768,D[k+768>>0]=-11059*k,D[k+1024>>0]=-21709*k,D[k+1280>>0]=32768*k+8421375,D[k+1536>>0]=-27439*k,D[k+1792>>0]=-5329*k}(),Y(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ki(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function UC(e){function t(A){if(!A)throw Error("assert :P")}function r(A,I,O){for(var F=0;4>F;F++)if(A[I+F]!=O.charCodeAt(F))return!0;return!1}function n(A,I,O,F,E){for(var $=0;$<E;$++)A[I+$]=O[F+$]}function a(A,I,O,F){for(var E=0;E<F;E++)A[I+E]=O}function i(A){return new Int32Array(A)}function o(A,I){for(var O=[],F=0;F<A;F++)O.push(new I);return O}function l(A,I){var O=[];return function F(E,$,U){for(var K=U[$],re=0;re<K&&(E.push(U.length>$+1?[]:new I),!(U.length<$+1));re++)F(E[re],$+1,U)}(O,0,A),O}var c=function(){var A=this;function I(m,j){for(var _=1<<j-1>>>0;m&_;)_>>>=1;return _?(m&_-1)+_:m}function O(m,j,_,T,B){t(!(T%_));do m[j+(T-=_)]=B;while(0<T)}function F(m,j,_,T,B){if(t(2328>=B),512>=B)var V=i(512);else if((V=i(B))==null)return 0;return function(H,G,X,ie,je,Fe){var De,ke,st=G,Ge=1<<X,be=i(16),_e=i(16);for(t(je!=0),t(ie!=null),t(H!=null),t(0<X),ke=0;ke<je;++ke){if(15<ie[ke])return 0;++be[ie[ke]]}if(be[0]==je)return 0;for(_e[1]=0,De=1;15>De;++De){if(be[De]>1<<De)return 0;_e[De+1]=_e[De]+be[De]}for(ke=0;ke<je;++ke)De=ie[ke],0<ie[ke]&&(Fe[_e[De]++]=ke);if(_e[15]==1)return(ie=new E).g=0,ie.value=Fe[0],O(H,st,1,Ge,ie),Ge;var Xe,at=-1,et=Ge-1,Lt=0,bt=1,Qt=1,Nt=1<<X;for(ke=0,De=1,je=2;De<=X;++De,je<<=1){if(bt+=Qt<<=1,0>(Qt-=be[De]))return 0;for(;0<be[De];--be[De])(ie=new E).g=De,ie.value=Fe[ke++],O(H,st+Lt,je,Nt,ie),Lt=I(Lt,De)}for(De=X+1,je=2;15>=De;++De,je<<=1){if(bt+=Qt<<=1,0>(Qt-=be[De]))return 0;for(;0<be[De];--be[De]){if(ie=new E,(Lt&et)!=at){for(st+=Nt,Xe=1<<(at=De)-X;15>at&&!(0>=(Xe-=be[at]));)++at,Xe<<=1;Ge+=Nt=1<<(Xe=at-X),H[G+(at=Lt&et)].g=Xe+X,H[G+at].value=st-G-at}ie.g=De-X,ie.value=Fe[ke++],O(H,st+(Lt>>X),je,Nt,ie),Lt=I(Lt,De)}}return bt!=2*_e[15]-1?0:Ge}(m,j,_,T,B,V)}function E(){this.value=this.g=0}function $(){this.value=this.g=0}function U(){this.G=o(5,E),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Rn,$)}function K(m,j,_,T){t(m!=null),t(j!=null),t(2147483648>T),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=j,m.pa=_,m.Jd=j,m.Yc=_+T,m.Zc=4<=T?_+T-4+1:_,ae(m)}function re(m,j){for(var _=0;0<j--;)_|=fe(m,128)<<j;return _}function pe(m,j){var _=re(m,j);return ge(m)?-_:_}function Q(m,j,_,T){var B,V=0;for(t(m!=null),t(j!=null),t(4294967288>T),m.Sb=T,m.Ra=0,m.u=0,m.h=0,4<T&&(T=4),B=0;B<T;++B)V+=j[_+B]<<8*B;m.Ra=V,m.bb=T,m.oa=j,m.pa=_}function J(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<zu-8>>>0,++m.bb,m.u-=8;M(m)&&(m.h=1,m.u=0)}function q(m,j){if(t(0<=j),!m.h&&j<=Bu){var _=L(m)&$u[j];return m.u+=j,J(m),_}return m.h=1,m.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function k(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function L(m){return m.Ra>>>(m.u&zu-1)>>>0}function M(m){return t(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>zu}function W(m,j){m.u=j,m.h=M(m)}function se(m){m.u>=Qf&&(t(m.u>=Qf),J(m))}function ae(m){t(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(t(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function ge(m){return re(m,1)}function fe(m,j){var _=m.Ca;0>m.b&&ae(m);var T=m.b,B=_*j>>>8,V=(m.I>>>T>B)+0;for(V?(_-=B,m.I-=B+1<<T>>>0):_=B+1,T=_,B=0;256<=T;)B+=8,T>>=8;return T=7^B+Ta[T],m.b-=T,m.Ca=(_<<T)-1,V}function Me(m,j,_){m[j+0]=_>>24&255,m[j+1]=_>>16&255,m[j+2]=_>>8&255,m[j+3]=_>>0&255}function de(m,j){return m[j+0]<<0|m[j+1]<<8}function $e(m,j){return de(m,j)|m[j+2]<<16}function Ye(m,j){return de(m,j)|de(m,j+2)<<16}function mt(m,j){var _=1<<j;return t(m!=null),t(0<j),m.X=i(_),m.X==null?0:(m.Mb=32-j,m.Xa=j,1)}function Se(m,j){t(m!=null),t(j!=null),t(m.Xa==j.Xa),n(j.X,0,m.X,0,1<<j.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function vt(m,j,_,T){t(_!=null),t(T!=null);var B=_[0],V=T[0];return B==0&&(B=(m*V+j/2)/j),V==0&&(V=(j*B+m/2)/m),0>=B||0>=V?0:(_[0]=B,T[0]=V,1)}function me(m,j){return m+(1<<j)-1>>>j}function xe(m,j){return((4278255360&m)+(4278255360&j)>>>0&4278255360)+((16711935&m)+(16711935&j)>>>0&16711935)>>>0}function ee(m,j){A[j]=function(_,T,B,V,H,G,X){var ie;for(ie=0;ie<H;++ie){var je=A[m](G[X+ie-1],B,V+ie);G[X+ie]=xe(_[T+ie],je)}}}function ue(){this.ud=this.hd=this.jd=0}function ve(m,j){return((4278124286&(m^j))>>>1)+(m&j)>>>0}function qe(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function We(m,j){return qe(m+(m-j+.5>>1))}function ze(m,j,_){return Math.abs(j-_)-Math.abs(m-_)}function rt(m,j,_,T,B,V,H){for(T=V[H-1],_=0;_<B;++_)V[H+_]=T=xe(m[j+_],T)}function _t(m,j,_,T,B){var V;for(V=0;V<_;++V){var H=m[j+V],G=H>>8&255,X=16711935&(X=(X=16711935&H)+((G<<16)+G));T[B+V]=(4278255360&H)+X>>>0}}function we(m,j){j.jd=m>>0&255,j.hd=m>>8&255,j.ud=m>>16&255}function te(m,j,_,T,B,V){var H;for(H=0;H<T;++H){var G=j[_+H],X=G>>>8,ie=G,je=255&(je=(je=G>>>16)+((m.jd<<24>>24)*(X<<24>>24)>>>5));ie=255&(ie=(ie=ie+((m.hd<<24>>24)*(X<<24>>24)>>>5))+((m.ud<<24>>24)*(je<<24>>24)>>>5)),B[V+H]=(4278255360&G)+(je<<16)+ie}}function he(m,j,_,T,B){A[j]=function(V,H,G,X,ie,je,Fe,De,ke){for(X=Fe;X<De;++X)for(Fe=0;Fe<ke;++Fe)ie[je++]=B(G[T(V[H++])])},A[m]=function(V,H,G,X,ie,je,Fe){var De=8>>V.b,ke=V.Ea,st=V.K[0],Ge=V.w;if(8>De)for(V=(1<<V.b)-1,Ge=(1<<De)-1;H<G;++H){var be,_e=0;for(be=0;be<ke;++be)be&V||(_e=T(X[ie++])),je[Fe++]=B(st[_e&Ge]),_e>>=De}else A["VP8LMapColor"+_](X,ie,st,Ge,je,Fe,H,G,ke)}}function Ne(m,j,_,T,B){for(_=j+_;j<_;){var V=m[j++];T[B++]=V>>16&255,T[B++]=V>>8&255,T[B++]=V>>0&255}}function Ve(m,j,_,T,B){for(_=j+_;j<_;){var V=m[j++];T[B++]=V>>16&255,T[B++]=V>>8&255,T[B++]=V>>0&255,T[B++]=V>>24&255}}function Ke(m,j,_,T,B){for(_=j+_;j<_;){var V=(H=m[j++])>>16&240|H>>12&15,H=H>>0&240|H>>28&15;T[B++]=V,T[B++]=H}}function lt(m,j,_,T,B){for(_=j+_;j<_;){var V=(H=m[j++])>>16&248|H>>13&7,H=H>>5&224|H>>3&31;T[B++]=V,T[B++]=H}}function tt(m,j,_,T,B){for(_=j+_;j<_;){var V=m[j++];T[B++]=V>>0&255,T[B++]=V>>8&255,T[B++]=V>>16&255}}function pt(m,j,_,T,B,V){if(V==0)for(_=j+_;j<_;)Me(T,((V=m[j++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),B+=32;else n(T,B,m,j,_)}function Yt(m,j){A[j][0]=A[m+"0"],A[j][1]=A[m+"1"],A[j][2]=A[m+"2"],A[j][3]=A[m+"3"],A[j][4]=A[m+"4"],A[j][5]=A[m+"5"],A[j][6]=A[m+"6"],A[j][7]=A[m+"7"],A[j][8]=A[m+"8"],A[j][9]=A[m+"9"],A[j][10]=A[m+"10"],A[j][11]=A[m+"11"],A[j][12]=A[m+"12"],A[j][13]=A[m+"13"],A[j][14]=A[m+"0"],A[j][15]=A[m+"0"]}function Dt(m){return m==H1||m==W1||m==Tx||m==G1}function ks(){this.eb=[],this.size=this.A=this.fb=0}function wt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ws(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ks,this.f.kb=new wt,this.sd=null}function ts(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function kt(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Ce(m,j){var _=m.T,T=j.ba.f.RGBA,B=T.eb,V=T.fb+m.ka*T.A,H=Si[j.ba.S],G=m.y,X=m.O,ie=m.f,je=m.N,Fe=m.ea,De=m.W,ke=j.cc,st=j.dc,Ge=j.Mc,be=j.Nc,_e=m.ka,Xe=m.ka+m.T,at=m.U,et=at+1>>1;for(_e==0?H(G,X,null,null,ie,je,Fe,De,ie,je,Fe,De,B,V,null,null,at):(H(j.ec,j.fc,G,X,ke,st,Ge,be,ie,je,Fe,De,B,V-T.A,B,V,at),++_);_e+2<Xe;_e+=2)ke=ie,st=je,Ge=Fe,be=De,je+=m.Rc,De+=m.Rc,V+=2*T.A,H(G,(X+=2*m.fa)-m.fa,G,X,ke,st,Ge,be,ie,je,Fe,De,B,V-T.A,B,V,at);return X+=m.fa,m.j+Xe<m.o?(n(j.ec,j.fc,G,X,at),n(j.cc,j.dc,ie,je,et),n(j.Mc,j.Nc,Fe,De,et),_--):1&Xe||H(G,X,null,null,ie,je,Fe,De,ie,je,Fe,De,B,V+T.A,null,null,at),_}function dt(m,j,_){var T=m.F,B=[m.J];if(T!=null){var V=m.U,H=j.ba.S,G=H==Lx||H==Tx;j=j.ba.f.RGBA;var X=[0],ie=m.ka;X[0]=m.T,m.Kb&&(ie==0?--X[0]:(--ie,B[0]-=m.width),m.j+m.ka+m.T==m.o&&(X[0]=m.o-m.j-ie));var je=j.eb;ie=j.fb+ie*j.A,m=vr(T,B[0],m.width,V,X,je,ie+(G?0:3),j.A),t(_==X),m&&Dt(H)&&wi(je,ie,G,V,X,j.A)}return 0}function yt(m){var j=m.ma,_=j.ba.S,T=11>_,B=_==Ax||_==Ex||_==Lx||_==V1||_==12||Dt(_);if(j.memory=null,j.Ib=null,j.Jb=null,j.Nd=null,!Zf(j.Oa,m,B?11:12))return 0;if(B&&Dt(_)&&ot(),m.da)alert("todo:use_scaling");else{if(T){if(j.Ib=kt,m.Kb){if(_=m.U+1>>1,j.memory=i(m.U+2*_),j.memory==null)return 0;j.ec=j.memory,j.fc=0,j.cc=j.ec,j.dc=j.fc+m.U,j.Mc=j.cc,j.Nc=j.dc+_,j.Ib=Ce,ot()}}else alert("todo:EmitYUV");B&&(j.Jb=dt,T&&Ae())}if(T&&!qS){for(m=0;256>m;++m)PI[m]=89858*(m-128)+Ix>>Rx,LI[m]=-22014*(m-128)+Ix,EI[m]=-45773*(m-128),AI[m]=113618*(m-128)+Ix>>Rx;for(m=im;m<J1;++m)j=76283*(m-16)+Ix>>Rx,TI[m-im]=Xa(j,255),RI[m-im]=Xa(j+8>>4,15);qS=1}return 1}function Xt(m){var j=m.ma,_=m.U,T=m.T;return t(!(1&m.ka)),0>=_||0>=T?0:(_=j.Ib(m,j),j.Jb!=null&&j.Jb(m,j,_),j.Dc+=_,1)}function tr(m){m.ma.memory=null}function Vt(m,j,_,T){return q(m,8)!=47?0:(j[0]=q(m,14)+1,_[0]=q(m,14)+1,T[0]=q(m,1),q(m,3)!=0?0:!m.h)}function ln(m,j){if(4>m)return m+1;var _=m-2>>1;return(2+(1&m)<<_)+q(j,_)+1}function fn(m,j){return 120<j?j-120:1<=(_=((_=mI[j-1])>>4)*m+(8-(15&_)))?_:1;var _}function Ir(m,j,_){var T=L(_),B=m[j+=255&T].g-8;return 0<B&&(W(_,_.u+8),T=L(_),j+=m[j].value,j+=T&(1<<B)-1),W(_,_.u+m[j].g),m[j].value}function hr(m,j,_){return _.g+=m.g,_.value+=m.value<<j>>>0,t(8>=_.g),m.g}function sr(m,j,_){var T=m.xc;return t((j=T==0?0:m.vc[m.md*(_>>T)+(j>>T)])<m.Wb),m.Ya[j]}function Br(m,j,_,T){var B=m.ab,V=m.c*j,H=m.C;j=H+j;var G=_,X=T;for(T=m.Ta,_=m.Ua;0<B--;){var ie=m.gc[B],je=H,Fe=j,De=G,ke=X,st=(X=T,G=_,ie.Ea);switch(t(je<Fe),t(Fe<=ie.nc),ie.hc){case 2:wx(De,ke,(Fe-je)*st,X,G);break;case 0:var Ge=je,be=Fe,_e=X,Xe=G,at=(Nt=ie).Ea;Ge==0&&(U1(De,ke,null,null,1,_e,Xe),rt(De,ke+1,0,0,at-1,_e,Xe+1),ke+=at,Xe+=at,++Ge);for(var et=1<<Nt.b,Lt=et-1,bt=me(at,Nt.b),Qt=Nt.K,Nt=Nt.w+(Ge>>Nt.b)*bt;Ge<be;){var Ys=Qt,rr=Nt,$s=1;for(em(De,ke,_e,Xe-at,1,_e,Xe);$s<at;){var As=($s&~Lt)+et;As>at&&(As=at),(0,Kl[Ys[rr++]>>8&15])(De,ke+ +$s,_e,Xe+$s-at,As-$s,_e,Xe+$s),$s=As}ke+=at,Xe+=at,++Ge&Lt||(Nt+=bt)}Fe!=ie.nc&&n(X,G-st,X,G+(Fe-je-1)*st,st);break;case 1:for(st=De,be=ke,at=(De=ie.Ea)-(Xe=De&~(_e=(ke=1<<ie.b)-1)),Ge=me(De,ie.b),et=ie.K,ie=ie.w+(je>>ie.b)*Ge;je<Fe;){for(Lt=et,bt=ie,Qt=new ue,Nt=be+Xe,Ys=be+De;be<Nt;)we(Lt[bt++],Qt),Pd(Qt,st,be,ke,X,G),be+=ke,G+=ke;be<Ys&&(we(Lt[bt++],Qt),Pd(Qt,st,be,at,X,G),be+=at,G+=at),++je&_e||(ie+=Ge)}break;case 3:if(De==X&&ke==G&&0<ie.b){for(be=X,De=st=G+(Fe-je)*st-(Xe=(Fe-je)*me(ie.Ea,ie.b)),ke=X,_e=G,Ge=[],Xe=(at=Xe)-1;0<=Xe;--Xe)Ge[Xe]=ke[_e+Xe];for(Xe=at-1;0<=Xe;--Xe)be[De+Xe]=Ge[Xe];yi(ie,je,Fe,X,st,X,G)}else yi(ie,je,Fe,De,ke,X,G)}G=T,X=_}X!=_&&n(T,_,G,X,V)}function zi(m,j){var _=m.V,T=m.Ba+m.c*m.C,B=j-m.C;if(t(j<=m.l.o),t(16>=B),0<B){var V=m.l,H=m.Ta,G=m.Ua,X=V.width;if(Br(m,B,_,T),B=G=[G],t((_=m.C)<(T=j)),t(V.v<V.va),T>V.o&&(T=V.o),_<V.j){var ie=V.j-_;_=V.j,B[0]+=ie*X}if(_>=T?_=0:(B[0]+=4*V.v,V.ka=_-V.j,V.U=V.va-V.v,V.T=T-_,_=1),_){if(G=G[0],11>(_=m.ca).S){var je=_.f.RGBA,Fe=(T=_.S,B=V.U,V=V.T,ie=je.eb,je.A),De=V;for(je=je.fb+m.Ma*je.A;0<De--;){var ke=H,st=G,Ge=B,be=ie,_e=je;switch(T){case Px:Ra(ke,st,Ge,be,_e);break;case Ax:da(ke,st,Ge,be,_e);break;case H1:da(ke,st,Ge,be,_e),wi(be,_e,0,Ge,1,0);break;case IS:sl(ke,st,Ge,be,_e);break;case Ex:pt(ke,st,Ge,be,_e,1);break;case W1:pt(ke,st,Ge,be,_e,1),wi(be,_e,0,Ge,1,0);break;case Lx:pt(ke,st,Ge,be,_e,0);break;case Tx:pt(ke,st,Ge,be,_e,0),wi(be,_e,1,Ge,1,0);break;case V1:Yl(ke,st,Ge,be,_e);break;case G1:Yl(ke,st,Ge,be,_e),gr(be,_e,Ge,1,0);break;case FS:tl(ke,st,Ge,be,_e);break;default:t(0)}G+=X,je+=Fe}m.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");t(m.Ma<=_.height)}}m.C=j,t(m.C<=m.i)}function Ea(m){var j;if(0<m.ua)return 0;for(j=0;j<m.Wb;++j){var _=m.Ya[j].G,T=m.Ya[j].H;if(0<_[1][T[1]+0].g||0<_[2][T[2]+0].g||0<_[3][T[3]+0].g)return 0}return 1}function Oe(m,j,_,T,B,V){if(m.Z!=0){var H=m.qd,G=m.rd;for(t(Ql[m.Z]!=null);j<_;++j)Ql[m.Z](H,G,T,B,T,B,V),H=T,G=B,B+=V;m.qd=H,m.rd=G}}function Ze(m,j){var _=m.l.ma,T=_.Z==0||_.Z==1?m.l.j:m.C;if(T=m.C<T?T:m.C,t(j<=m.l.o),j>T){var B=m.l.width,V=_.ca,H=_.tb+B*T,G=m.V,X=m.Ba+m.c*T,ie=m.gc;t(m.ab==1),t(ie[0].hc==3),Nx(ie[0],T,j,G,X,V,H),Oe(_,T,j,V,H,B)}m.C=m.Ma=j}function Rt(m,j,_,T,B,V,H){var G=m.$/T,X=m.$%T,ie=m.m,je=m.s,Fe=_+m.$,De=Fe;B=_+T*B;var ke=_+T*V,st=280+je.ua,Ge=m.Pb?G:16777216,be=0<je.ua?je.Wa:null,_e=je.wc,Xe=Fe<ke?sr(je,X,G):null;t(m.C<V),t(ke<=B);var at=!1;e:for(;;){for(;at||Fe<ke;){var et=0;if(G>=Ge){var Lt=Fe-_;t((Ge=m).Pb),Ge.wd=Ge.m,Ge.xd=Lt,0<Ge.s.ua&&Se(Ge.s.Wa,Ge.s.vb),Ge=G+xI}if(X&_e||(Xe=sr(je,X,G)),t(Xe!=null),Xe.Qb&&(j[Fe]=Xe.qb,at=!0),!at)if(se(ie),Xe.jc){et=ie,Lt=j;var bt=Fe,Qt=Xe.pd[L(et)&Rn-1];t(Xe.jc),256>Qt.g?(W(et,et.u+Qt.g),Lt[bt]=Qt.value,et=0):(W(et,et.u+Qt.g-256),t(256<=Qt.value),et=Qt.value),et==0&&(at=!0)}else et=Ir(Xe.G[0],Xe.H[0],ie);if(ie.h)break;if(at||256>et){if(!at)if(Xe.nd)j[Fe]=(Xe.qb|et<<8)>>>0;else{if(se(ie),at=Ir(Xe.G[1],Xe.H[1],ie),se(ie),Lt=Ir(Xe.G[2],Xe.H[2],ie),bt=Ir(Xe.G[3],Xe.H[3],ie),ie.h)break;j[Fe]=(bt<<24|at<<16|et<<8|Lt)>>>0}if(at=!1,++Fe,++X>=T&&(X=0,++G,H!=null&&G<=V&&!(G%16)&&H(m,G),be!=null))for(;De<Fe;)et=j[De++],be.X[(506832829*et&4294967295)>>>be.Mb]=et}else if(280>et){if(et=ln(et-256,ie),Lt=Ir(Xe.G[4],Xe.H[4],ie),se(ie),Lt=fn(T,Lt=ln(Lt,ie)),ie.h)break;if(Fe-_<Lt||B-Fe<et)break e;for(bt=0;bt<et;++bt)j[Fe+bt]=j[Fe+bt-Lt];for(Fe+=et,X+=et;X>=T;)X-=T,++G,H!=null&&G<=V&&!(G%16)&&H(m,G);if(t(Fe<=B),X&_e&&(Xe=sr(je,X,G)),be!=null)for(;De<Fe;)et=j[De++],be.X[(506832829*et&4294967295)>>>be.Mb]=et}else{if(!(et<st))break e;for(at=et-280,t(be!=null);De<Fe;)et=j[De++],be.X[(506832829*et&4294967295)>>>be.Mb]=et;et=Fe,t(!(at>>>(Lt=be).Xa)),j[et]=Lt.X[at],at=!0}at||t(ie.h==M(ie))}if(m.Pb&&ie.h&&Fe<B)t(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Se(m.s.vb,m.s.Wa);else{if(ie.h)break e;H!=null&&H(m,G>V?V:G),m.a=0,m.$=Fe-_}return 1}return m.a=3,0}function as(m){t(m!=null),m.vc=null,m.yc=null,m.Ya=null;var j=m.Wa;j!=null&&(j.X=null),m.vb=null,t(m!=null)}function Ns(){var m=new z1;return m==null?null:(m.a=0,m.xb=MS,Yt("Predictor","VP8LPredictors"),Yt("Predictor","VP8LPredictors_C"),Yt("PredictorAdd","VP8LPredictorsAdd"),Yt("PredictorAdd","VP8LPredictorsAdd_C"),wx=_t,Pd=te,Ra=Ne,da=Ve,Yl=Ke,tl=lt,sl=tt,A.VP8LMapColor32b=Uu,A.VP8LMapColor8b=Sx,m)}function Zs(m,j,_,T,B){var V=1,H=[m],G=[j],X=T.m,ie=T.s,je=null,Fe=0;e:for(;;){if(_)for(;V&&q(X,1);){var De=H,ke=G,st=T,Ge=1,be=st.m,_e=st.gc[st.ab],Xe=q(be,2);if(st.Oc&1<<Xe)V=0;else{switch(st.Oc|=1<<Xe,_e.hc=Xe,_e.Ea=De[0],_e.nc=ke[0],_e.K=[null],++st.ab,t(4>=st.ab),Xe){case 0:case 1:_e.b=q(be,3)+2,Ge=Zs(me(_e.Ea,_e.b),me(_e.nc,_e.b),0,st,_e.K),_e.K=_e.K[0];break;case 3:var at,et=q(be,8)+1,Lt=16<et?0:4<et?1:2<et?2:3;if(De[0]=me(_e.Ea,Lt),_e.b=Lt,at=Ge=Zs(et,1,0,st,_e.K)){var bt,Qt=et,Nt=_e,Ys=1<<(8>>Nt.b),rr=i(Ys);if(rr==null)at=0;else{var $s=Nt.K[0],As=Nt.w;for(rr[0]=Nt.K[0][0],bt=1;bt<1*Qt;++bt)rr[bt]=xe($s[As+bt],rr[bt-1]);for(;bt<4*Ys;++bt)rr[bt]=0;Nt.K[0]=null,Nt.K[0]=rr,at=1}}Ge=at;break;case 2:break;default:t(0)}V=Ge}}if(H=H[0],G=G[0],V&&q(X,1)&&!(V=1<=(Fe=q(X,4))&&11>=Fe)){T.a=3;break e}var fr;if(fr=V)t:{var cr,hs,sn,Ia=T,rn=H,Fa=G,nr=Fe,ei=_,ti=Ia.m,gn=Ia.s,In=[null],ha=1,_i=0,_o=pI[nr];s:for(;;){if(ei&&q(ti,1)){var vn=q(ti,3)+2,il=me(rn,vn),Rd=me(Fa,vn),Gu=il*Rd;if(!Zs(il,Rd,0,Ia,In))break s;for(In=In[0],gn.xc=vn,cr=0;cr<Gu;++cr){var ec=In[cr]>>8&65535;In[cr]=ec,ec>=ha&&(ha=ec+1)}}if(ti.h)break s;for(hs=0;5>hs;++hs){var Dr=DS[hs];!hs&&0<nr&&(Dr+=1<<nr),_i<Dr&&(_i=Dr)}var Z1=o(ha*_o,E),WS=ha,GS=o(WS,U);if(GS==null)var Dx=null;else t(65536>=WS),Dx=GS;var om=i(_i);if(Dx==null||om==null||Z1==null){Ia.a=1;break s}var Ox=Z1;for(cr=sn=0;cr<ha;++cr){var Hi=Dx[cr],Ku=Hi.G,Yu=Hi.H,KS=0,Mx=1,YS=0;for(hs=0;5>hs;++hs){Dr=DS[hs],Ku[hs]=Ox,Yu[hs]=sn,!hs&&0<nr&&(Dr+=1<<nr);n:{var $x,X1=Dr,Bx=Ia,lm=om,DI=Ox,OI=sn,Q1=0,tc=Bx.m,MI=q(tc,1);if(a(lm,0,0,X1),MI){var $I=q(tc,1)+1,BI=q(tc,1),JS=q(tc,BI==0?1:8);lm[JS]=1,$I==2&&(lm[JS=q(tc,8)]=1);var zx=1}else{var ZS=i(19),XS=q(tc,4)+4;if(19<XS){Bx.a=3;var Ux=0;break n}for($x=0;$x<XS;++$x)ZS[fI[$x]]=q(tc,3);var ej=void 0,cm=void 0,QS=Bx,zI=ZS,qx=X1,e_=lm,tj=0,sc=QS.m,t_=8,s_=o(128,E);r:for(;F(s_,0,7,zI,19);){if(q(sc,1)){var UI=2+2*q(sc,3);if((ej=2+q(sc,UI))>qx)break r}else ej=qx;for(cm=0;cm<qx&&ej--;){se(sc);var r_=s_[0+(127&L(sc))];W(sc,sc.u+r_.g);var Ju=r_.value;if(16>Ju)e_[cm++]=Ju,Ju!=0&&(t_=Ju);else{var qI=Ju==16,n_=Ju-16,VI=uI[n_],a_=q(sc,dI[n_])+VI;if(cm+a_>qx)break r;for(var HI=qI?t_:0;0<a_--;)e_[cm++]=HI}}tj=1;break r}tj||(QS.a=3),zx=tj}(zx=zx&&!tc.h)&&(Q1=F(DI,OI,8,lm,X1)),zx&&Q1!=0?Ux=Q1:(Bx.a=3,Ux=0)}if(Ux==0)break s;if(Mx&&hI[hs]==1&&(Mx=Ox[sn].g==0),KS+=Ox[sn].g,sn+=Ux,3>=hs){var dm,sj=om[0];for(dm=1;dm<Dr;++dm)om[dm]>sj&&(sj=om[dm]);YS+=sj}}if(Hi.nd=Mx,Hi.Qb=0,Mx&&(Hi.qb=(Ku[3][Yu[3]+0].value<<24|Ku[1][Yu[1]+0].value<<16|Ku[2][Yu[2]+0].value)>>>0,KS==0&&256>Ku[0][Yu[0]+0].value&&(Hi.Qb=1,Hi.qb+=Ku[0][Yu[0]+0].value<<8)),Hi.jc=!Hi.Qb&&6>YS,Hi.jc){var Vx,ol=Hi;for(Vx=0;Vx<Rn;++Vx){var rc=Vx,nc=ol.pd[rc],Hx=ol.G[0][ol.H[0]+rc];256<=Hx.value?(nc.g=Hx.g+256,nc.value=Hx.value):(nc.g=0,nc.value=0,rc>>=hr(Hx,8,nc),rc>>=hr(ol.G[1][ol.H[1]+rc],16,nc),rc>>=hr(ol.G[2][ol.H[2]+rc],0,nc),hr(ol.G[3][ol.H[3]+rc],24,nc))}}}gn.vc=In,gn.Wb=ha,gn.Ya=Dx,gn.yc=Z1,fr=1;break t}fr=0}if(!(V=fr)){T.a=3;break e}if(0<Fe){if(ie.ua=1<<Fe,!mt(ie.Wa,Fe)){T.a=1,V=0;break e}}else ie.ua=0;var rj=T,i_=H,WI=G,nj=rj.s,aj=nj.xc;if(rj.c=i_,rj.i=WI,nj.md=me(i_,aj),nj.wc=aj==0?-1:(1<<aj)-1,_){T.xb=NI;break e}if((je=i(H*G))==null){T.a=1,V=0;break e}V=(V=Rt(T,je,0,H,G,G,null))&&!X.h;break e}return V?(B!=null?B[0]=je:(t(je==null),t(_)),T.$=0,_||as(ie)):as(ie),V}function xr(m,j){var _=m.c*m.i,T=_+j+16*j;return t(m.c<=j),m.V=i(T),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+_+j,1)}function Ts(m,j){var _=m.C,T=j-_,B=m.V,V=m.Ba+m.c*_;for(t(j<=m.l.o);0<T;){var H=16<T?16:T,G=m.l.ma,X=m.l.width,ie=X*H,je=G.ca,Fe=G.tb+X*_,De=m.Ta,ke=m.Ua;Br(m,H,B,V),qr(De,ke,je,Fe,ie),Oe(G,_,_+H,je,Fe,X),T-=H,B+=H*m.c,_+=H}t(_==j),m.C=m.Ma=j}function Ms(){this.ub=this.yd=this.td=this.Rb=0}function Z(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Re(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function nt(){this.Yb=function(){var m=[];return function j(_,T,B){for(var V=B[T],H=0;H<V&&(_.push(B.length>T+1?[]:0),!(B.length<T+1));H++)j(_[H],T+1,B)}(m,0,[3,11]),m}()}function At(){this.jb=i(3),this.Wc=l([4,8],nt),this.Xc=l([4,17],nt)}function jt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function rs(){this.ld=this.La=this.dd=this.tc=0}function Ks(){this.Na=this.la=0}function mn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zr(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function La(){this.uc=this.M=this.Nb=0,this.wa=Array(new rs),this.Y=0,this.ya=Array(new zr),this.aa=0,this.l=new Ln}function en(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Xo(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new Ms,this.Kc=new Z,this.ed=new jt,this.Qa=new Re,this.Ic=this.$c=this.Aa=0,this.D=new La,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Y),this.ia=0,this.pb=o(4,mn),this.Pa=new At,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new en),this.Hd=0,this.rb=Array(new Ks),this.sb=0,this.wa=Array(new rs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zr),this.L=this.aa=0,this.gd=l([4,2],rs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ln(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xi(){var m=new Xo;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,am||(am=gi)),m}function Ps(m,j,_){return m.a==0&&(m.a=j,m.sc=_,m.cb=0),0}function Ja(m,j,_){return 3<=_&&m[j+0]==157&&m[j+1]==1&&m[j+2]==42}function jo(m,j){if(m==null)return 0;if(m.a=0,m.sc="OK",j==null)return Ps(m,2,"null VP8Io passed to VP8GetHeaders()");var _=j.data,T=j.w,B=j.ha;if(4>B)return Ps(m,7,"Truncated header.");var V=_[T+0]|_[T+1]<<8|_[T+2]<<16,H=m.Od;if(H.Rb=!(1&V),H.td=V>>1&7,H.yd=V>>4&1,H.ub=V>>5,3<H.td)return Ps(m,3,"Incorrect keyframe parameters.");if(!H.yd)return Ps(m,4,"Frame not displayable.");T+=3,B-=3;var G=m.Kc;if(H.Rb){if(7>B)return Ps(m,7,"cannot parse picture header");if(!Ja(_,T,B))return Ps(m,3,"Bad code word");G.c=16383&(_[T+4]<<8|_[T+3]),G.Td=_[T+4]>>6,G.i=16383&(_[T+6]<<8|_[T+5]),G.Ud=_[T+6]>>6,T+=7,B-=7,m.za=G.c+15>>4,m.Ub=G.i+15>>4,j.width=G.c,j.height=G.i,j.Da=0,j.j=0,j.v=0,j.va=j.width,j.o=j.height,j.da=0,j.ib=j.width,j.hb=j.height,j.U=j.width,j.T=j.height,a((V=m.Pa).jb,0,255,V.jb.length),t((V=m.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,a(V.Zb,0,0,V.Zb.length),a(V.Lb,0,0,V.Lb)}if(H.ub>B)return Ps(m,7,"bad partition length");K(V=m.m,_,T,H.ub),T+=H.ub,B-=H.ub,H.Rb&&(G.Ld=ge(V),G.Kd=ge(V)),G=m.Qa;var X,ie=m.Pa;if(t(V!=null),t(G!=null),G.Cb=ge(V),G.Cb){if(G.Bb=ge(V),ge(V)){for(G.Fb=ge(V),X=0;4>X;++X)G.Zb[X]=ge(V)?pe(V,7):0;for(X=0;4>X;++X)G.Lb[X]=ge(V)?pe(V,6):0}if(G.Bb)for(X=0;3>X;++X)ie.jb[X]=ge(V)?re(V,8):255}else G.Bb=0;if(V.Ka)return Ps(m,3,"cannot parse segment header");if((G=m.ed).zd=ge(V),G.Tb=re(V,6),G.wb=re(V,3),G.Pc=ge(V),G.Pc&&ge(V)){for(ie=0;4>ie;++ie)ge(V)&&(G.vd[ie]=pe(V,6));for(ie=0;4>ie;++ie)ge(V)&&(G.od[ie]=pe(V,6))}if(m.L=G.Tb==0?0:G.zd?1:2,V.Ka)return Ps(m,3,"cannot parse filter header");var je=B;if(B=X=T,T=X+je,G=je,m.Xb=(1<<re(m.m,2))-1,je<3*(ie=m.Xb))_=7;else{for(X+=3*ie,G-=3*ie,je=0;je<ie;++je){var Fe=_[B+0]|_[B+1]<<8|_[B+2]<<16;Fe>G&&(Fe=G),K(m.Jc[+je],_,X,Fe),X+=Fe,G-=Fe,B+=3}K(m.Jc[+ie],_,X,G),_=X<T?0:5}if(_!=0)return Ps(m,_,"cannot parse partitions");for(_=re(X=m.m,7),B=ge(X)?pe(X,4):0,T=ge(X)?pe(X,4):0,G=ge(X)?pe(X,4):0,ie=ge(X)?pe(X,4):0,X=ge(X)?pe(X,4):0,je=m.Qa,Fe=0;4>Fe;++Fe){if(je.Cb){var De=je.Zb[Fe];je.Fb||(De+=_)}else{if(0<Fe){m.pb[Fe]=m.pb[0];continue}De=_}var ke=m.pb[Fe];ke.Sc[0]=K1[Xa(De+B,127)],ke.Sc[1]=Y1[Xa(De+0,127)],ke.Eb[0]=2*K1[Xa(De+T,127)],ke.Eb[1]=101581*Y1[Xa(De+G,127)]>>16,8>ke.Eb[1]&&(ke.Eb[1]=8),ke.Qc[0]=K1[Xa(De+ie,117)],ke.Qc[1]=Y1[Xa(De+X,127)],ke.lc=De+X}if(!H.Rb)return Ps(m,4,"Not a key frame.");for(ge(V),H=m.Pa,_=0;4>_;++_){for(B=0;8>B;++B)for(T=0;3>T;++T)for(G=0;11>G;++G)ie=fe(V,bI[_][B][T][G])?re(V,8):yI[_][B][T][G],H.Wc[_][B].Yb[T][G]=ie;for(B=0;17>B;++B)H.Xc[_][B]=H.Wc[_][wI[B]]}return m.kc=ge(V),m.kc&&(m.Bd=re(V,8)),m.cb=1}function gi(m,j,_,T,B,V,H){var G=j[B].Yb[_];for(_=0;16>B;++B){if(!fe(m,G[_+0]))return B;for(;!fe(m,G[_+1]);)if(G=j[++B].Yb[0],_=0,B==16)return 16;var X=j[B+1].Yb;if(fe(m,G[_+2])){var ie=m,je=0;if(fe(ie,(De=G)[(Fe=_)+3]))if(fe(ie,De[Fe+6])){for(G=0,Fe=2*(je=fe(ie,De[Fe+8]))+(De=fe(ie,De[Fe+9+je])),je=0,De=gI[Fe];De[G];++G)je+=je+fe(ie,De[G]);je+=3+(8<<Fe)}else fe(ie,De[Fe+7])?(je=7+2*fe(ie,165),je+=fe(ie,145)):je=5+fe(ie,159);else je=fe(ie,De[Fe+4])?3+fe(ie,De[Fe+5]):2;G=X[2]}else je=1,G=X[1];X=H+vI[B],0>(ie=m).b&&ae(ie);var Fe,De=ie.b,ke=(Fe=ie.Ca>>1)-(ie.I>>De)>>31;--ie.b,ie.Ca+=ke,ie.Ca|=1,ie.I-=(Fe+1&ke)<<De,V[X]=((je^ke)-ke)*T[(0<B)+0]}return 16}function bo(m){var j=m.rb[m.sb-1];j.la=0,j.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function Nd(m,j){if(m==null)return 0;if(j==null)return Ps(m,2,"NULL VP8Io parameter in VP8Decode().");if(!m.cb&&!jo(m,j))return 0;if(t(m.cb),j.ac==null||j.ac(j)){j.ob&&(m.L=0);var _=Fx[m.L];if(m.L==2?(m.yb=0,m.zb=0):(m.yb=j.v-_>>4,m.zb=j.j-_>>4,0>m.yb&&(m.yb=0),0>m.zb&&(m.zb=0)),m.Va=j.o+15+_>>4,m.Hb=j.va+15+_>>4,m.Hb>m.za&&(m.Hb=m.za),m.Va>m.Ub&&(m.Va=m.Ub),0<m.L){var T=m.ed;for(_=0;4>_;++_){var B;if(m.Qa.Cb){var V=m.Qa.Lb[_];m.Qa.Fb||(V+=T.Tb)}else V=T.Tb;for(B=0;1>=B;++B){var H=m.gd[_][B],G=V;if(T.Pc&&(G+=T.vd[0],B&&(G+=T.od[0])),0<(G=0>G?0:63<G?63:G)){var X=G;0<T.wb&&(X=4<T.wb?X>>2:X>>1)>9-T.wb&&(X=9-T.wb),1>X&&(X=1),H.dd=X,H.tc=2*G+X,H.ld=40<=G?2:15<=G?1:0}else H.tc=0;H.La=B}}}_=0}else Ps(m,6,"Frame setup failed"),_=m.a;if(_=_==0){if(_){m.$c=0,0<m.Aa||(m.Ic=FI);e:{_=m.Ic,T=4*(X=m.za);var ie=32*X,je=X+1,Fe=0<m.L?X*(0<m.Aa?2:1):0,De=(m.Aa==2?2:1)*X;if((H=T+832+(B=3*(16*_+Fx[m.L])/2*ie)+(V=m.Fa!=null&&0<m.Fa.length?m.Kc.c*m.Kc.i:0))!=H)_=0;else{if(H>m.Vb){if(m.Vb=0,m.Ec=i(H),m.Fc=0,m.Ec==null){_=Ps(m,1,"no memory during frame initialization.");break e}m.Vb=H}H=m.Ec,G=m.Fc,m.Ac=H,m.Bc=G,G+=T,m.Gd=o(ie,en),m.Hd=0,m.rb=o(je+1,Ks),m.sb=1,m.wa=Fe?o(Fe,rs):null,m.Y=0,m.D.Nb=0,m.D.wa=m.wa,m.D.Y=m.Y,0<m.Aa&&(m.D.Y+=X),t(!0),m.oc=H,m.pc=G,G+=832,m.ya=o(De,zr),m.aa=0,m.D.ya=m.ya,m.D.aa=m.aa,m.Aa==2&&(m.D.aa+=X),m.R=16*X,m.B=8*X,X=(ie=Fx[m.L])*m.R,ie=ie/2*m.B,m.sa=H,m.ta=G+X,m.qa=m.sa,m.ra=m.ta+16*_*m.R+ie,m.Ha=m.qa,m.Ia=m.ra+8*_*m.B+ie,m.$c=0,G+=B,m.mb=V?H:null,m.nb=V?G:null,t(G+V<=m.Fc+m.Vb),bo(m),a(m.Ac,m.Bc,0,T),_=1}}if(_){if(j.ka=0,j.y=m.sa,j.O=m.ta,j.f=m.qa,j.N=m.ra,j.ea=m.Ha,j.Vd=m.Ia,j.fa=m.R,j.Rc=m.B,j.F=null,j.J=0,!Cx){for(_=-255;255>=_;++_)cn[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)nl[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)nm[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)Wu[255+_]=0>_?0:255<_?255:_;Cx=1}qu=k1,rl=Au,tm=cx,ua=C1,ji=dx,Ur=Za,Vu=Uf,_x=Cd,sm=B1,Ad=qf,Ed=$1,Jl=Iu,Ld=Vf,Hu=yx,Td=vx,Zl=No,rm=el,bi=M1,Vi[0]=wo,Vi[1]=P1,Vi[2]=T1,Vi[3]=R1,Vi[4]=fx,Vi[5]=Tu,Vi[6]=mx,Vi[7]=$f,Vi[8]=F1,Vi[9]=I1,Xl[0]=ux,Xl[1]=E1,Xl[2]=Qo,Xl[3]=Eu,Xl[4]=Wn,Xl[5]=L1,Xl[6]=hx,al[0]=Hl,al[1]=A1,al[2]=D1,al[3]=Bf,al[4]=_d,al[5]=O1,al[6]=zf,_=1}else _=0}_&&(_=function(ke,st){for(ke.M=0;ke.M<ke.Va;++ke.M){var Ge,be=ke.Jc[ke.M&ke.Xb],_e=ke.m,Xe=ke;for(Ge=0;Ge<Xe.za;++Ge){var at=_e,et=Xe,Lt=et.Ac,bt=et.Bc+4*Ge,Qt=et.zc,Nt=et.ya[et.aa+Ge];if(et.Qa.Bb?Nt.$b=fe(at,et.Pa.jb[0])?2+fe(at,et.Pa.jb[2]):fe(at,et.Pa.jb[1]):Nt.$b=0,et.kc&&(Nt.Ad=fe(at,et.Bd)),Nt.Za=!fe(at,145)+0,Nt.Za){var Ys=Nt.Ob,rr=0;for(et=0;4>et;++et){var $s,As=Qt[0+et];for($s=0;4>$s;++$s){As=jI[Lt[bt+$s]][As];for(var fr=OS[fe(at,As[0])];0<fr;)fr=OS[2*fr+fe(at,As[fr])];As=-fr,Lt[bt+$s]=As}n(Ys,rr,Lt,bt,4),rr+=4,Qt[0+et]=As}}else As=fe(at,156)?fe(at,128)?1:3:fe(at,163)?2:0,Nt.Ob[0]=As,a(Lt,bt,As,4),a(Qt,0,As,4);Nt.Dd=fe(at,142)?fe(at,114)?fe(at,183)?1:3:2:0}if(Xe.m.Ka)return Ps(ke,7,"Premature end-of-partition0 encountered.");for(;ke.ja<ke.za;++ke.ja){if(Xe=be,at=(_e=ke).rb[_e.sb-1],Lt=_e.rb[_e.sb+_e.ja],Ge=_e.ya[_e.aa+_e.ja],bt=_e.kc?Ge.Ad:0)at.la=Lt.la=0,Ge.Za||(at.Na=Lt.Na=0),Ge.Hc=0,Ge.Gc=0,Ge.ia=0;else{var cr,hs;if(at=Lt,Lt=Xe,bt=_e.Pa.Xc,Qt=_e.ya[_e.aa+_e.ja],Nt=_e.pb[Qt.$b],et=Qt.ad,Ys=0,rr=_e.rb[_e.sb-1],As=$s=0,a(et,Ys,0,384),Qt.Za)var sn=0,Ia=bt[3];else{fr=i(16);var rn=at.Na+rr.Na;if(rn=am(Lt,bt[1],rn,Nt.Eb,0,fr,0),at.Na=rr.Na=(0<rn)+0,1<rn)qu(fr,0,et,Ys);else{var Fa=fr[0]+3>>3;for(fr=0;256>fr;fr+=16)et[Ys+fr]=Fa}sn=1,Ia=bt[0]}var nr=15&at.la,ei=15&rr.la;for(fr=0;4>fr;++fr){var ti=1&ei;for(Fa=hs=0;4>Fa;++Fa)nr=nr>>1|(ti=(rn=am(Lt,Ia,rn=ti+(1&nr),Nt.Sc,sn,et,Ys))>sn)<<7,hs=hs<<2|(3<rn?3:1<rn?2:et[Ys+0]!=0),Ys+=16;nr>>=4,ei=ei>>1|ti<<7,$s=($s<<8|hs)>>>0}for(Ia=nr,sn=ei>>4,cr=0;4>cr;cr+=2){for(hs=0,nr=at.la>>4+cr,ei=rr.la>>4+cr,fr=0;2>fr;++fr){for(ti=1&ei,Fa=0;2>Fa;++Fa)rn=ti+(1&nr),nr=nr>>1|(ti=0<(rn=am(Lt,bt[2],rn,Nt.Qc,0,et,Ys)))<<3,hs=hs<<2|(3<rn?3:1<rn?2:et[Ys+0]!=0),Ys+=16;nr>>=2,ei=ei>>1|ti<<5}As|=hs<<4*cr,Ia|=nr<<4<<cr,sn|=(240&ei)<<cr}at.la=Ia,rr.la=sn,Qt.Hc=$s,Qt.Gc=As,Qt.ia=43690&As?0:Nt.ia,bt=!($s|As)}if(0<_e.L&&(_e.wa[_e.Y+_e.ja]=_e.gd[Ge.$b][Ge.Za],_e.wa[_e.Y+_e.ja].La|=!bt),Xe.Ka)return Ps(ke,7,"Premature end-of-file encountered.")}if(bo(ke),_e=st,Xe=1,Ge=(be=ke).D,at=0<be.L&&be.M>=be.zb&&be.M<=be.Va,be.Aa==0)e:{if(Ge.M=be.M,Ge.uc=at,Jf(be,Ge),Xe=1,Ge=(hs=be.D).Nb,at=(As=Fx[be.L])*be.R,Lt=As/2*be.B,fr=16*Ge*be.R,Fa=8*Ge*be.B,bt=be.sa,Qt=be.ta-at+fr,Nt=be.qa,et=be.ra-Lt+Fa,Ys=be.Ha,rr=be.Ia-Lt+Fa,ei=(nr=hs.M)==0,$s=nr>=be.Va-1,be.Aa==2&&Jf(be,hs),hs.uc)for(ti=(rn=be).D.M,t(rn.D.uc),hs=rn.yb;hs<rn.Hb;++hs){sn=hs,Ia=ti;var gn=(In=(Dr=rn).D).Nb;cr=Dr.R;var In=In.wa[In.Y+sn],ha=Dr.sa,_i=Dr.ta+16*gn*cr+16*sn,_o=In.dd,vn=In.tc;if(vn!=0)if(t(3<=vn),Dr.L==1)0<sn&&Zl(ha,_i,cr,vn+4),In.La&&bi(ha,_i,cr,vn),0<Ia&&Td(ha,_i,cr,vn+4),In.La&&rm(ha,_i,cr,vn);else{var il=Dr.B,Rd=Dr.qa,Gu=Dr.ra+8*gn*il+8*sn,ec=Dr.Ha,Dr=Dr.Ia+8*gn*il+8*sn;gn=In.ld,0<sn&&(_x(ha,_i,cr,vn+4,_o,gn),Ad(Rd,Gu,ec,Dr,il,vn+4,_o,gn)),In.La&&(Jl(ha,_i,cr,vn,_o,gn),Hu(Rd,Gu,ec,Dr,il,vn,_o,gn)),0<Ia&&(Vu(ha,_i,cr,vn+4,_o,gn),sm(Rd,Gu,ec,Dr,il,vn+4,_o,gn)),In.La&&(Ed(ha,_i,cr,vn,_o,gn),Ld(Rd,Gu,ec,Dr,il,vn,_o,gn))}}if(be.ia&&alert("todo:DitherRow"),_e.put!=null){if(hs=16*nr,nr=16*(nr+1),ei?(_e.y=be.sa,_e.O=be.ta+fr,_e.f=be.qa,_e.N=be.ra+Fa,_e.ea=be.Ha,_e.W=be.Ia+Fa):(hs-=As,_e.y=bt,_e.O=Qt,_e.f=Nt,_e.N=et,_e.ea=Ys,_e.W=rr),$s||(nr-=As),nr>_e.o&&(nr=_e.o),_e.F=null,_e.J=null,be.Fa!=null&&0<be.Fa.length&&hs<nr&&(_e.J=Kf(be,_e,hs,nr-hs),_e.F=be.mb,_e.F==null&&_e.F.length==0)){Xe=Ps(be,3,"Could not decode alpha data.");break e}hs<_e.j&&(As=_e.j-hs,hs=_e.j,t(!(1&As)),_e.O+=be.R*As,_e.N+=be.B*(As>>1),_e.W+=be.B*(As>>1),_e.F!=null&&(_e.J+=_e.width*As)),hs<nr&&(_e.O+=_e.v,_e.N+=_e.v>>1,_e.W+=_e.v>>1,_e.F!=null&&(_e.J+=_e.v),_e.ka=hs-_e.j,_e.U=_e.va-_e.v,_e.T=nr-hs,Xe=_e.put(_e))}Ge+1!=be.Ic||$s||(n(be.sa,be.ta-at,bt,Qt+16*be.R,at),n(be.qa,be.ra-Lt,Nt,et+8*be.B,Lt),n(be.Ha,be.Ia-Lt,Ys,rr+8*be.B,Lt))}if(!Xe)return Ps(ke,6,"Output aborted.")}return 1}(m,j)),j.bc!=null&&j.bc(j),_&=1}return _?(m.cb=0,_):0}function Tn(m,j,_,T,B){B=m[j+_+32*T]+(B>>3),m[j+_+32*T]=-256&B?0>B?0:255:B}function vi(m,j,_,T,B,V){Tn(m,j,0,_,T+B),Tn(m,j,1,_,T+V),Tn(m,j,2,_,T-V),Tn(m,j,3,_,T-B)}function pn(m){return(20091*m>>16)+m}function Vl(m,j,_,T){var B,V=0,H=i(16);for(B=0;4>B;++B){var G=m[j+0]+m[j+8],X=m[j+0]-m[j+8],ie=(35468*m[j+4]>>16)-pn(m[j+12]),je=pn(m[j+4])+(35468*m[j+12]>>16);H[V+0]=G+je,H[V+1]=X+ie,H[V+2]=X-ie,H[V+3]=G-je,V+=4,j++}for(B=V=0;4>B;++B)G=(m=H[V+0]+4)+H[V+8],X=m-H[V+8],ie=(35468*H[V+4]>>16)-pn(H[V+12]),Tn(_,T,0,0,G+(je=pn(H[V+4])+(35468*H[V+12]>>16))),Tn(_,T,1,0,X+ie),Tn(_,T,2,0,X-ie),Tn(_,T,3,0,G-je),V++,T+=32}function Za(m,j,_,T){var B=m[j+0]+4,V=35468*m[j+4]>>16,H=pn(m[j+4]),G=35468*m[j+1]>>16;vi(_,T,0,B+H,m=pn(m[j+1]),G),vi(_,T,1,B+V,m,G),vi(_,T,2,B-V,m,G),vi(_,T,3,B-H,m,G)}function Au(m,j,_,T,B){Vl(m,j,_,T),B&&Vl(m,j+16,_,T+4)}function cx(m,j,_,T){rl(m,j+0,_,T,1),rl(m,j+32,_,T+128,1)}function C1(m,j,_,T){var B;for(m=m[j+0]+4,B=0;4>B;++B)for(j=0;4>j;++j)Tn(_,T,j,B,m)}function dx(m,j,_,T){m[j+0]&&ua(m,j+0,_,T),m[j+16]&&ua(m,j+16,_,T+4),m[j+32]&&ua(m,j+32,_,T+128),m[j+48]&&ua(m,j+48,_,T+128+4)}function k1(m,j,_,T){var B,V=i(16);for(B=0;4>B;++B){var H=m[j+0+B]+m[j+12+B],G=m[j+4+B]+m[j+8+B],X=m[j+4+B]-m[j+8+B],ie=m[j+0+B]-m[j+12+B];V[0+B]=H+G,V[8+B]=H-G,V[4+B]=ie+X,V[12+B]=ie-X}for(B=0;4>B;++B)H=(m=V[0+4*B]+3)+V[3+4*B],G=V[1+4*B]+V[2+4*B],X=V[1+4*B]-V[2+4*B],ie=m-V[3+4*B],_[T+0]=H+G>>3,_[T+16]=ie+X>>3,_[T+32]=H-G>>3,_[T+48]=ie-X>>3,T+=64}function Mf(m,j,_){var T,B=j-32,V=Qa,H=255-m[B-1];for(T=0;T<_;++T){var G,X=V,ie=H+m[j-1];for(G=0;G<_;++G)m[j+G]=X[ie+m[B+G]];j+=32}}function P1(m,j){Mf(m,j,4)}function A1(m,j){Mf(m,j,8)}function E1(m,j){Mf(m,j,16)}function Qo(m,j){var _;for(_=0;16>_;++_)n(m,j+32*_,m,j-32,16)}function Eu(m,j){var _;for(_=16;0<_;--_)a(m,j,m[j-1],16),j+=32}function Lu(m,j,_){var T;for(T=0;16>T;++T)a(j,_+32*T,m,16)}function ux(m,j){var _,T=16;for(_=0;16>_;++_)T+=m[j-1+32*_]+m[j+_-32];Lu(T>>5,m,j)}function Wn(m,j){var _,T=8;for(_=0;16>_;++_)T+=m[j-1+32*_];Lu(T>>4,m,j)}function L1(m,j){var _,T=8;for(_=0;16>_;++_)T+=m[j+_-32];Lu(T>>4,m,j)}function hx(m,j){Lu(128,m,j)}function is(m,j,_){return m+2*j+_+2>>2}function T1(m,j){var _,T=j-32;for(T=new Uint8Array([is(m[T-1],m[T+0],m[T+1]),is(m[T+0],m[T+1],m[T+2]),is(m[T+1],m[T+2],m[T+3]),is(m[T+2],m[T+3],m[T+4])]),_=0;4>_;++_)n(m,j+32*_,T,0,T.length)}function R1(m,j){var _=m[j-1],T=m[j-1+32],B=m[j-1+64],V=m[j-1+96];Me(m,j+0,16843009*is(m[j-1-32],_,T)),Me(m,j+32,16843009*is(_,T,B)),Me(m,j+64,16843009*is(T,B,V)),Me(m,j+96,16843009*is(B,V,V))}function wo(m,j){var _,T=4;for(_=0;4>_;++_)T+=m[j+_-32]+m[j-1+32*_];for(T>>=3,_=0;4>_;++_)a(m,j+32*_,T,4)}function fx(m,j){var _=m[j-1+0],T=m[j-1+32],B=m[j-1+64],V=m[j-1-32],H=m[j+0-32],G=m[j+1-32],X=m[j+2-32],ie=m[j+3-32];m[j+0+96]=is(T,B,m[j-1+96]),m[j+1+96]=m[j+0+64]=is(_,T,B),m[j+2+96]=m[j+1+64]=m[j+0+32]=is(V,_,T),m[j+3+96]=m[j+2+64]=m[j+1+32]=m[j+0+0]=is(H,V,_),m[j+3+64]=m[j+2+32]=m[j+1+0]=is(G,H,V),m[j+3+32]=m[j+2+0]=is(X,G,H),m[j+3+0]=is(ie,X,G)}function mx(m,j){var _=m[j+1-32],T=m[j+2-32],B=m[j+3-32],V=m[j+4-32],H=m[j+5-32],G=m[j+6-32],X=m[j+7-32];m[j+0+0]=is(m[j+0-32],_,T),m[j+1+0]=m[j+0+32]=is(_,T,B),m[j+2+0]=m[j+1+32]=m[j+0+64]=is(T,B,V),m[j+3+0]=m[j+2+32]=m[j+1+64]=m[j+0+96]=is(B,V,H),m[j+3+32]=m[j+2+64]=m[j+1+96]=is(V,H,G),m[j+3+64]=m[j+2+96]=is(H,G,X),m[j+3+96]=is(G,X,X)}function Tu(m,j){var _=m[j-1+0],T=m[j-1+32],B=m[j-1+64],V=m[j-1-32],H=m[j+0-32],G=m[j+1-32],X=m[j+2-32],ie=m[j+3-32];m[j+0+0]=m[j+1+64]=V+H+1>>1,m[j+1+0]=m[j+2+64]=H+G+1>>1,m[j+2+0]=m[j+3+64]=G+X+1>>1,m[j+3+0]=X+ie+1>>1,m[j+0+96]=is(B,T,_),m[j+0+64]=is(T,_,V),m[j+0+32]=m[j+1+96]=is(_,V,H),m[j+1+32]=m[j+2+96]=is(V,H,G),m[j+2+32]=m[j+3+96]=is(H,G,X),m[j+3+32]=is(G,X,ie)}function $f(m,j){var _=m[j+0-32],T=m[j+1-32],B=m[j+2-32],V=m[j+3-32],H=m[j+4-32],G=m[j+5-32],X=m[j+6-32],ie=m[j+7-32];m[j+0+0]=_+T+1>>1,m[j+1+0]=m[j+0+64]=T+B+1>>1,m[j+2+0]=m[j+1+64]=B+V+1>>1,m[j+3+0]=m[j+2+64]=V+H+1>>1,m[j+0+32]=is(_,T,B),m[j+1+32]=m[j+0+96]=is(T,B,V),m[j+2+32]=m[j+1+96]=is(B,V,H),m[j+3+32]=m[j+2+96]=is(V,H,G),m[j+3+64]=is(H,G,X),m[j+3+96]=is(G,X,ie)}function I1(m,j){var _=m[j-1+0],T=m[j-1+32],B=m[j-1+64],V=m[j-1+96];m[j+0+0]=_+T+1>>1,m[j+2+0]=m[j+0+32]=T+B+1>>1,m[j+2+32]=m[j+0+64]=B+V+1>>1,m[j+1+0]=is(_,T,B),m[j+3+0]=m[j+1+32]=is(T,B,V),m[j+3+32]=m[j+1+64]=is(B,V,V),m[j+3+64]=m[j+2+64]=m[j+0+96]=m[j+1+96]=m[j+2+96]=m[j+3+96]=V}function F1(m,j){var _=m[j-1+0],T=m[j-1+32],B=m[j-1+64],V=m[j-1+96],H=m[j-1-32],G=m[j+0-32],X=m[j+1-32],ie=m[j+2-32];m[j+0+0]=m[j+2+32]=_+H+1>>1,m[j+0+32]=m[j+2+64]=T+_+1>>1,m[j+0+64]=m[j+2+96]=B+T+1>>1,m[j+0+96]=V+B+1>>1,m[j+3+0]=is(G,X,ie),m[j+2+0]=is(H,G,X),m[j+1+0]=m[j+3+32]=is(_,H,G),m[j+1+32]=m[j+3+64]=is(T,_,H),m[j+1+64]=m[j+3+96]=is(B,T,_),m[j+1+96]=is(V,B,T)}function D1(m,j){var _;for(_=0;8>_;++_)n(m,j+32*_,m,j-32,8)}function Bf(m,j){var _;for(_=0;8>_;++_)a(m,j,m[j-1],8),j+=32}function Sd(m,j,_){var T;for(T=0;8>T;++T)a(j,_+32*T,m,8)}function Hl(m,j){var _,T=8;for(_=0;8>_;++_)T+=m[j+_-32]+m[j-1+32*_];Sd(T>>4,m,j)}function O1(m,j){var _,T=4;for(_=0;8>_;++_)T+=m[j+_-32];Sd(T>>3,m,j)}function _d(m,j){var _,T=4;for(_=0;8>_;++_)T+=m[j-1+32*_];Sd(T>>3,m,j)}function zf(m,j){Sd(128,m,j)}function Ru(m,j,_){var T=m[j-_],B=m[j+0],V=3*(B-T)+q1[1020+m[j-2*_]-m[j+_]],H=kx[112+(V+4>>3)];m[j-_]=Qa[255+T+kx[112+(V+3>>3)]],m[j+0]=Qa[255+B-H]}function px(m,j,_,T){var B=m[j+0],V=m[j+_];return Ni[255+m[j-2*_]-m[j-_]]>T||Ni[255+V-B]>T}function xx(m,j,_,T){return 4*Ni[255+m[j-_]-m[j+0]]+Ni[255+m[j-2*_]-m[j+_]]<=T}function gx(m,j,_,T,B){var V=m[j-3*_],H=m[j-2*_],G=m[j-_],X=m[j+0],ie=m[j+_],je=m[j+2*_],Fe=m[j+3*_];return 4*Ni[255+G-X]+Ni[255+H-ie]>T?0:Ni[255+m[j-4*_]-V]<=B&&Ni[255+V-H]<=B&&Ni[255+H-G]<=B&&Ni[255+Fe-je]<=B&&Ni[255+je-ie]<=B&&Ni[255+ie-X]<=B}function vx(m,j,_,T){var B=2*T+1;for(T=0;16>T;++T)xx(m,j+T,_,B)&&Ru(m,j+T,_)}function No(m,j,_,T){var B=2*T+1;for(T=0;16>T;++T)xx(m,j+T*_,1,B)&&Ru(m,j+T*_,1)}function el(m,j,_,T){var B;for(B=3;0<B;--B)vx(m,j+=4*_,_,T)}function M1(m,j,_,T){var B;for(B=3;0<B;--B)No(m,j+=4,_,T)}function Wl(m,j,_,T,B,V,H,G){for(V=2*V+1;0<B--;){if(gx(m,j,_,V,H))if(px(m,j,_,G))Ru(m,j,_);else{var X=m,ie=j,je=_,Fe=X[ie-2*je],De=X[ie-je],ke=X[ie+0],st=X[ie+je],Ge=X[ie+2*je],be=27*(Xe=q1[1020+3*(ke-De)+q1[1020+Fe-st]])+63>>7,_e=18*Xe+63>>7,Xe=9*Xe+63>>7;X[ie-3*je]=Qa[255+X[ie-3*je]+Xe],X[ie-2*je]=Qa[255+Fe+_e],X[ie-je]=Qa[255+De+be],X[ie+0]=Qa[255+ke-be],X[ie+je]=Qa[255+st-_e],X[ie+2*je]=Qa[255+Ge-Xe]}j+=T}}function Ui(m,j,_,T,B,V,H,G){for(V=2*V+1;0<B--;){if(gx(m,j,_,V,H))if(px(m,j,_,G))Ru(m,j,_);else{var X=m,ie=j,je=_,Fe=X[ie-je],De=X[ie+0],ke=X[ie+je],st=kx[112+((Ge=3*(De-Fe))+4>>3)],Ge=kx[112+(Ge+3>>3)],be=st+1>>1;X[ie-2*je]=Qa[255+X[ie-2*je]+be],X[ie-je]=Qa[255+Fe+Ge],X[ie+0]=Qa[255+De-st],X[ie+je]=Qa[255+ke-be]}j+=T}}function Uf(m,j,_,T,B,V){Wl(m,j,_,1,16,T,B,V)}function Cd(m,j,_,T,B,V){Wl(m,j,1,_,16,T,B,V)}function $1(m,j,_,T,B,V){var H;for(H=3;0<H;--H)Ui(m,j+=4*_,_,1,16,T,B,V)}function Iu(m,j,_,T,B,V){var H;for(H=3;0<H;--H)Ui(m,j+=4,1,_,16,T,B,V)}function B1(m,j,_,T,B,V,H,G){Wl(m,j,B,1,8,V,H,G),Wl(_,T,B,1,8,V,H,G)}function qf(m,j,_,T,B,V,H,G){Wl(m,j,1,B,8,V,H,G),Wl(_,T,1,B,8,V,H,G)}function Vf(m,j,_,T,B,V,H,G){Ui(m,j+4*B,B,1,8,V,H,G),Ui(_,T+4*B,B,1,8,V,H,G)}function yx(m,j,_,T,B,V,H,G){Ui(m,j+4,1,B,8,V,H,G),Ui(_,T+4,1,B,8,V,H,G)}function Fu(){this.ba=new ws,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wf(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function jx(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new E}function z1(){this.xb=this.a=0,this.l=new Ln,this.ca=new ws,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new k,this.Pb=0,this.wd=new k,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new jx,this.ab=0,this.gc=o(4,Wf),this.Oc=0}function Du(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ln,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function kd(m,j,_,T,B,V,H){for(m=m==null?0:m[j+0],j=0;j<H;++j)B[V+j]=m+_[T+j]&255,m=B[V+j]}function Gf(m,j,_,T,B,V,H){var G;if(m==null)kd(null,null,_,T,B,V,H);else for(G=0;G<H;++G)B[V+G]=m[j+G]+_[T+G]&255}function Gl(m,j,_,T,B,V,H){if(m==null)kd(null,null,_,T,B,V,H);else{var G,X=m[j+0],ie=X,je=X;for(G=0;G<H;++G)ie=je+(X=m[j+G])-ie,je=_[T+G]+(-256&ie?0>ie?0:255:ie)&255,ie=X,B[V+G]=je}}function Kf(m,j,_,T){var B=j.width,V=j.o;if(t(m!=null&&j!=null),0>_||0>=T||_+T>V)return null;if(!m.Cc){if(m.ga==null){var H;if(m.ga=new Du,(H=m.ga==null)||(H=j.width*j.o,t(m.Gb.length==0),m.Gb=i(H),m.Uc=0,m.Gb==null?H=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,H=1),H=!H),!H){H=m.ga;var G=m.Fa,X=m.P,ie=m.qc,je=m.mb,Fe=m.nb,De=X+1,ke=ie-1,st=H.l;if(t(G!=null&&je!=null&&j!=null),Ql[0]=null,Ql[1]=kd,Ql[2]=Gf,Ql[3]=Gl,H.ca=je,H.tb=Fe,H.c=j.width,H.i=j.height,t(0<H.c&&0<H.i),1>=ie)j=0;else if(H.$a=G[X+0]>>0&3,H.Z=G[X+0]>>2&3,H.Lc=G[X+0]>>4&3,X=G[X+0]>>6&3,0>H.$a||1<H.$a||4<=H.Z||1<H.Lc||X)j=0;else if(st.put=Xt,st.ac=yt,st.bc=tr,st.ma=H,st.width=j.width,st.height=j.height,st.Da=j.Da,st.v=j.v,st.va=j.va,st.j=j.j,st.o=j.o,H.$a)e:{t(H.$a==1),j=Ns();t:for(;;){if(j==null){j=0;break e}if(t(H!=null),H.mc=j,j.c=H.c,j.i=H.i,j.l=H.l,j.l.ma=H,j.l.width=H.c,j.l.height=H.i,j.a=0,Q(j.m,G,De,ke),!Zs(H.c,H.i,1,j,null)||(j.ab==1&&j.gc[0].hc==3&&Ea(j.s)?(H.ic=1,G=j.c*j.i,j.Ta=null,j.Ua=0,j.V=i(G),j.Ba=0,j.V==null?(j.a=1,j=0):j=1):(H.ic=0,j=xr(j,H.c)),!j))break t;j=1;break e}H.mc=null,j=0}else j=ke>=H.c*H.i;H=!j}if(H)return null;m.ga.Lc!=1?m.Ga=0:T=V-_}t(m.ga!=null),t(_+T<=V);e:{if(j=(G=m.ga).c,V=G.l.o,G.$a==0){if(De=m.rc,ke=m.Vc,st=m.Fa,X=m.P+1+_*j,ie=m.mb,je=m.nb+_*j,t(X<=m.P+m.qc),G.Z!=0)for(t(Ql[G.Z]!=null),H=0;H<T;++H)Ql[G.Z](De,ke,st,X,ie,je,j),De=ie,ke=je,je+=j,X+=j;else for(H=0;H<T;++H)n(ie,je,st,X,j),De=ie,ke=je,je+=j,X+=j;m.rc=De,m.Vc=ke}else{if(t(G.mc!=null),j=_+T,t((H=G.mc)!=null),t(j<=H.i),H.C>=j)j=1;else if(G.ic||Ae(),G.ic){G=H.V,De=H.Ba,ke=H.c;var Ge=H.i,be=(st=1,X=H.$/ke,ie=H.$%ke,je=H.m,Fe=H.s,H.$),_e=ke*Ge,Xe=ke*j,at=Fe.wc,et=be<Xe?sr(Fe,ie,X):null;t(be<=_e),t(j<=Ge),t(Ea(Fe));t:for(;;){for(;!je.h&&be<Xe;){if(ie&at||(et=sr(Fe,ie,X)),t(et!=null),se(je),256>(Ge=Ir(et.G[0],et.H[0],je)))G[De+be]=Ge,++be,++ie>=ke&&(ie=0,++X<=j&&!(X%16)&&Ze(H,X));else{if(!(280>Ge)){st=0;break t}Ge=ln(Ge-256,je);var Lt,bt=Ir(et.G[4],et.H[4],je);if(se(je),!(be>=(bt=fn(ke,bt=ln(bt,je)))&&_e-be>=Ge)){st=0;break t}for(Lt=0;Lt<Ge;++Lt)G[De+be+Lt]=G[De+be+Lt-bt];for(be+=Ge,ie+=Ge;ie>=ke;)ie-=ke,++X<=j&&!(X%16)&&Ze(H,X);be<Xe&&ie&at&&(et=sr(Fe,ie,X))}t(je.h==M(je))}Ze(H,X>j?j:X);break t}!st||je.h&&be<_e?(st=0,H.a=je.h?5:3):H.$=be,j=st}else j=Rt(H,H.V,H.Ba,H.c,H.i,j,Ts);if(!j){T=0;break e}}_+T>=V&&(m.Cc=1),T=1}if(!T)return null;if(m.Cc&&((T=m.ga)!=null&&(T.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+_*B}function S(m,j,_,T,B,V){for(;0<B--;){var H,G=m,X=j+(_?1:0),ie=m,je=j+(_?0:3);for(H=0;H<T;++H){var Fe=ie[je+4*H];Fe!=255&&(Fe*=32897,G[X+4*H+0]=G[X+4*H+0]*Fe>>23,G[X+4*H+1]=G[X+4*H+1]*Fe>>23,G[X+4*H+2]=G[X+4*H+2]*Fe>>23)}j+=V}}function z(m,j,_,T,B){for(;0<T--;){var V;for(V=0;V<_;++V){var H=m[j+2*V+0],G=15&(ie=m[j+2*V+1]),X=4369*G,ie=(240&ie|ie>>4)*X>>16;m[j+2*V+0]=(240&H|H>>4)*X>>16&240|(15&H|H<<4)*X>>16>>4&15,m[j+2*V+1]=240&ie|G}j+=B}}function le(m,j,_,T,B,V,H,G){var X,ie,je=255;for(ie=0;ie<B;++ie){for(X=0;X<T;++X){var Fe=m[j+X];V[H+4*X]=Fe,je&=Fe}j+=_,H+=G}return je!=255}function ye(m,j,_,T,B){var V;for(V=0;V<B;++V)_[T+V]=m[j+V]>>8}function Ae(){wi=S,gr=z,vr=le,qr=ye}function Je(m,j,_){A[m]=function(T,B,V,H,G,X,ie,je,Fe,De,ke,st,Ge,be,_e,Xe,at){var et,Lt=at-1>>1,bt=G[X+0]|ie[je+0]<<16,Qt=Fe[De+0]|ke[st+0]<<16;t(T!=null);var Nt=3*bt+Qt+131074>>2;for(j(T[B+0],255&Nt,Nt>>16,Ge,be),V!=null&&(Nt=3*Qt+bt+131074>>2,j(V[H+0],255&Nt,Nt>>16,_e,Xe)),et=1;et<=Lt;++et){var Ys=G[X+et]|ie[je+et]<<16,rr=Fe[De+et]|ke[st+et]<<16,$s=bt+Ys+Qt+rr+524296,As=$s+2*(Ys+Qt)>>3;Nt=As+bt>>1,bt=($s=$s+2*(bt+rr)>>3)+Ys>>1,j(T[B+2*et-1],255&Nt,Nt>>16,Ge,be+(2*et-1)*_),j(T[B+2*et-0],255&bt,bt>>16,Ge,be+(2*et-0)*_),V!=null&&(Nt=$s+Qt>>1,bt=As+rr>>1,j(V[H+2*et-1],255&Nt,Nt>>16,_e,Xe+(2*et-1)*_),j(V[H+2*et+0],255&bt,bt>>16,_e,Xe+(2*et+0)*_)),bt=Ys,Qt=rr}1&at||(Nt=3*bt+Qt+131074>>2,j(T[B+at-1],255&Nt,Nt>>16,Ge,be+(at-1)*_),V!=null&&(Nt=3*Qt+bt+131074>>2,j(V[H+at-1],255&Nt,Nt>>16,_e,Xe+(at-1)*_)))}}function ot(){Si[Px]=SI,Si[Ax]=$S,Si[IS]=_I,Si[Ex]=BS,Si[Lx]=zS,Si[V1]=US,Si[FS]=CI,Si[H1]=$S,Si[W1]=BS,Si[Tx]=zS,Si[G1]=US}function Et(m){return m&-16384?0>m?0:255:m>>kI}function Zt(m,j){return Et((19077*m>>8)+(26149*j>>8)-14234)}function us(m,j,_){return Et((19077*m>>8)-(6419*j>>8)-(13320*_>>8)+8708)}function os(m,j){return Et((19077*m>>8)+(33050*j>>8)-17685)}function Rs(m,j,_,T,B){T[B+0]=Zt(m,_),T[B+1]=us(m,j,_),T[B+2]=os(m,j)}function Er(m,j,_,T,B){T[B+0]=os(m,j),T[B+1]=us(m,j,_),T[B+2]=Zt(m,_)}function Fr(m,j,_,T,B){var V=us(m,j,_);j=V<<3&224|os(m,j)>>3,T[B+0]=248&Zt(m,_)|V>>5,T[B+1]=j}function tn(m,j,_,T,B){var V=240&os(m,j)|15;T[B+0]=240&Zt(m,_)|us(m,j,_)>>4,T[B+1]=V}function Gn(m,j,_,T,B){T[B+0]=255,Rs(m,j,_,T,B+1)}function xn(m,j,_,T,B){Er(m,j,_,T,B),T[B+3]=255}function qi(m,j,_,T,B){Rs(m,j,_,T,B),T[B+3]=255}function Xa(m,j){return 0>m?0:m>j?j:m}function So(m,j,_){A[m]=function(T,B,V,H,G,X,ie,je,Fe){for(var De=je+(-2&Fe)*_;je!=De;)j(T[B+0],V[H+0],G[X+0],ie,je),j(T[B+1],V[H+0],G[X+0],ie,je+_),B+=2,++H,++X,je+=2*_;1&Fe&&j(T[B+0],V[H+0],G[X+0],ie,je)}}function bx(m,j,_){return _==0?m==0?j==0?6:5:j==0?4:0:_}function Yf(m,j,_,T,B){switch(m>>>30){case 3:rl(j,_,T,B,0);break;case 2:Ur(j,_,T,B);break;case 1:ua(j,_,T,B)}}function Jf(m,j){var _,T,B=j.M,V=j.Nb,H=m.oc,G=m.pc+40,X=m.oc,ie=m.pc+584,je=m.oc,Fe=m.pc+600;for(_=0;16>_;++_)H[G+32*_-1]=129;for(_=0;8>_;++_)X[ie+32*_-1]=129,je[Fe+32*_-1]=129;for(0<B?H[G-1-32]=X[ie-1-32]=je[Fe-1-32]=129:(a(H,G-32-1,127,21),a(X,ie-32-1,127,9),a(je,Fe-32-1,127,9)),T=0;T<m.za;++T){var De=j.ya[j.aa+T];if(0<T){for(_=-1;16>_;++_)n(H,G+32*_-4,H,G+32*_+12,4);for(_=-1;8>_;++_)n(X,ie+32*_-4,X,ie+32*_+4,4),n(je,Fe+32*_-4,je,Fe+32*_+4,4)}var ke=m.Gd,st=m.Hd+T,Ge=De.ad,be=De.Hc;if(0<B&&(n(H,G-32,ke[st].y,0,16),n(X,ie-32,ke[st].f,0,8),n(je,Fe-32,ke[st].ea,0,8)),De.Za){var _e=H,Xe=G-32+16;for(0<B&&(T>=m.za-1?a(_e,Xe,ke[st].y[15],4):n(_e,Xe,ke[st+1].y,0,4)),_=0;4>_;_++)_e[Xe+128+_]=_e[Xe+256+_]=_e[Xe+384+_]=_e[Xe+0+_];for(_=0;16>_;++_,be<<=2)_e=H,Xe=G+VS[_],Vi[De.Ob[_]](_e,Xe),Yf(be,Ge,16*+_,_e,Xe)}else if(_e=bx(T,B,De.Ob[0]),Xl[_e](H,G),be!=0)for(_=0;16>_;++_,be<<=2)Yf(be,Ge,16*+_,H,G+VS[_]);for(_=De.Gc,_e=bx(T,B,De.Dd),al[_e](X,ie),al[_e](je,Fe),be=Ge,_e=X,Xe=ie,255&(De=_>>0)&&(170&De?tm(be,256,_e,Xe):ji(be,256,_e,Xe)),De=je,be=Fe,255&(_>>=8)&&(170&_?tm(Ge,320,De,be):ji(Ge,320,De,be)),B<m.Ub-1&&(n(ke[st].y,0,H,G+480,16),n(ke[st].f,0,X,ie+224,8),n(ke[st].ea,0,je,Fe+224,8)),_=8*V*m.B,ke=m.sa,st=m.ta+16*T+16*V*m.R,Ge=m.qa,De=m.ra+8*T+_,be=m.Ha,_e=m.Ia+8*T+_,_=0;16>_;++_)n(ke,st+_*m.R,H,G+32*_,16);for(_=0;8>_;++_)n(Ge,De+_*m.B,X,ie+32*_,8),n(be,_e+_*m.B,je,Fe+32*_,8)}}function Ou(m,j,_,T,B,V,H,G,X){var ie=[0],je=[0],Fe=0,De=X!=null?X.kd:0,ke=X??new Hf;if(m==null||12>_)return 7;ke.data=m,ke.w=j,ke.ha=_,j=[j],_=[_],ke.gb=[ke.gb];e:{var st=j,Ge=_,be=ke.gb;if(t(m!=null),t(Ge!=null),t(be!=null),be[0]=0,12<=Ge[0]&&!r(m,st[0],"RIFF")){if(r(m,st[0]+8,"WEBP")){be=3;break e}var _e=Ye(m,st[0]+4);if(12>_e||4294967286<_e){be=3;break e}if(De&&_e>Ge[0]-8){be=7;break e}be[0]=_e,st[0]+=12,Ge[0]-=12}be=0}if(be!=0)return be;for(_e=0<ke.gb[0],_=_[0];;){e:{var Xe=m;Ge=j,be=_;var at=ie,et=je,Lt=st=[0];if((Nt=Fe=[Fe])[0]=0,8>be[0])be=7;else{if(!r(Xe,Ge[0],"VP8X")){if(Ye(Xe,Ge[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var bt=Ye(Xe,Ge[0]+8),Qt=1+$e(Xe,Ge[0]+12);if(2147483648<=Qt*(Xe=1+$e(Xe,Ge[0]+15))){be=3;break e}Lt!=null&&(Lt[0]=bt),at!=null&&(at[0]=Qt),et!=null&&(et[0]=Xe),Ge[0]+=18,be[0]-=18,Nt[0]=1}be=0}}if(Fe=Fe[0],st=st[0],be!=0)return be;if(Ge=!!(2&st),!_e&&Fe)return 3;if(V!=null&&(V[0]=!!(16&st)),H!=null&&(H[0]=Ge),G!=null&&(G[0]=0),H=ie[0],st=je[0],Fe&&Ge&&X==null){be=0;break}if(4>_){be=7;break}if(_e&&Fe||!_e&&!Fe&&!r(m,j[0],"ALPH")){_=[_],ke.na=[ke.na],ke.P=[ke.P],ke.Sa=[ke.Sa];e:{bt=m,be=j,_e=_;var Nt=ke.gb;at=ke.na,et=ke.P,Lt=ke.Sa,Qt=22,t(bt!=null),t(_e!=null),Xe=be[0];var Ys=_e[0];for(t(at!=null),t(Lt!=null),at[0]=null,et[0]=null,Lt[0]=0;;){if(be[0]=Xe,_e[0]=Ys,8>Ys){be=7;break e}var rr=Ye(bt,Xe+4);if(4294967286<rr){be=3;break e}var $s=8+rr+1&-2;if(Qt+=$s,0<Nt&&Qt>Nt){be=3;break e}if(!r(bt,Xe,"VP8 ")||!r(bt,Xe,"VP8L")){be=0;break e}if(Ys[0]<$s){be=7;break e}r(bt,Xe,"ALPH")||(at[0]=bt,et[0]=Xe+8,Lt[0]=rr),Xe+=$s,Ys-=$s}}if(_=_[0],ke.na=ke.na[0],ke.P=ke.P[0],ke.Sa=ke.Sa[0],be!=0)break}_=[_],ke.Ja=[ke.Ja],ke.xa=[ke.xa];e:if(Nt=m,be=j,_e=_,at=ke.gb[0],et=ke.Ja,Lt=ke.xa,bt=be[0],Xe=!r(Nt,bt,"VP8 "),Qt=!r(Nt,bt,"VP8L"),t(Nt!=null),t(_e!=null),t(et!=null),t(Lt!=null),8>_e[0])be=7;else{if(Xe||Qt){if(Nt=Ye(Nt,bt+4),12<=at&&Nt>at-12){be=3;break e}if(De&&Nt>_e[0]-8){be=7;break e}et[0]=Nt,be[0]+=8,_e[0]-=8,Lt[0]=Qt}else Lt[0]=5<=_e[0]&&Nt[bt+0]==47&&!(Nt[bt+4]>>5),et[0]=_e[0];be=0}if(_=_[0],ke.Ja=ke.Ja[0],ke.xa=ke.xa[0],j=j[0],be!=0)break;if(4294967286<ke.Ja)return 3;if(G==null||Ge||(G[0]=ke.xa?2:1),H=[H],st=[st],ke.xa){if(5>_){be=7;break}G=H,De=st,Ge=V,m==null||5>_?m=0:5<=_&&m[j+0]==47&&!(m[j+4]>>5)?(_e=[0],Nt=[0],at=[0],Q(et=new k,m,j,_),Vt(et,_e,Nt,at)?(G!=null&&(G[0]=_e[0]),De!=null&&(De[0]=Nt[0]),Ge!=null&&(Ge[0]=at[0]),m=1):m=0):m=0}else{if(10>_){be=7;break}G=st,m==null||10>_||!Ja(m,j+3,_-3)?m=0:(De=m[j+0]|m[j+1]<<8|m[j+2]<<16,Ge=16383&(m[j+7]<<8|m[j+6]),m=16383&(m[j+9]<<8|m[j+8]),1&De||3<(De>>1&7)||!(De>>4&1)||De>>5>=ke.Ja||!Ge||!m?m=0:(H&&(H[0]=Ge),G&&(G[0]=m),m=1))}if(!m||(H=H[0],st=st[0],Fe&&(ie[0]!=H||je[0]!=st)))return 3;X!=null&&(X[0]=ke,X.offset=j-X.w,t(4294967286>j-X.w),t(X.offset==X.ha-_));break}return be==0||be==7&&Fe&&X==null?(V!=null&&(V[0]|=ke.na!=null&&0<ke.na.length),T!=null&&(T[0]=H),B!=null&&(B[0]=st),0):be}function Zf(m,j,_){var T=j.width,B=j.height,V=0,H=0,G=T,X=B;if(j.Da=m!=null&&0<m.Da,j.Da&&(G=m.cd,X=m.bd,V=m.v,H=m.j,11>_||(V&=-2,H&=-2),0>V||0>H||0>=G||0>=X||V+G>T||H+X>B))return 0;if(j.v=V,j.j=H,j.va=V+G,j.o=H+X,j.U=G,j.T=X,j.da=m!=null&&0<m.da,j.da){if(!vt(G,X,_=[m.ib],V=[m.hb]))return 0;j.ib=_[0],j.hb=V[0]}return j.ob=m!=null&&m.ob,j.Kb=m==null||!m.Sd,j.da&&(j.ob=j.ib<3*T/4&&j.hb<3*B/4,j.Kb=0),1}function Xf(m){if(m==null)return 2;if(11>m.S){var j=m.f.RGBA;j.fb+=(m.height-1)*j.A,j.A=-j.A}else j=m.f.kb,m=m.height,j.O+=(m-1)*j.fa,j.fa=-j.fa,j.N+=(m-1>>1)*j.Ab,j.Ab=-j.Ab,j.W+=(m-1>>1)*j.Db,j.Db=-j.Db,j.F!=null&&(j.J+=(m-1)*j.lb,j.lb=-j.lb);return 0}function Mu(m,j,_,T){if(T==null||0>=m||0>=j)return 2;if(_!=null){if(_.Da){var B=_.cd,V=_.bd,H=-2&_.v,G=-2&_.j;if(0>H||0>G||0>=B||0>=V||H+B>m||G+V>j)return 2;m=B,j=V}if(_.da){if(!vt(m,j,B=[_.ib],V=[_.hb]))return 2;m=B[0],j=V[0]}}T.width=m,T.height=j;e:{var X=T.width,ie=T.height;if(m=T.S,0>=X||0>=ie||!(m>=Px&&13>m))m=2;else{if(0>=T.Rd&&T.sd==null){H=V=B=j=0;var je=(G=X*HS[m])*ie;if(11>m||(V=(ie+1)/2*(j=(X+1)/2),m==12&&(H=(B=X)*ie)),(ie=i(je+2*V+H))==null){m=1;break e}T.sd=ie,11>m?((X=T.f.RGBA).eb=ie,X.fb=0,X.A=G,X.size=je):((X=T.f.kb).y=ie,X.O=0,X.fa=G,X.Fd=je,X.f=ie,X.N=0+je,X.Ab=j,X.Cd=V,X.ea=ie,X.W=0+je+V,X.Db=j,X.Ed=V,m==12&&(X.F=ie,X.J=0+je+2*V),X.Tc=H,X.lb=B)}if(j=1,B=T.S,V=T.width,H=T.height,B>=Px&&13>B)if(11>B)m=T.f.RGBA,j&=(G=Math.abs(m.A))*(H-1)+V<=m.size,j&=G>=V*HS[B],j&=m.eb!=null;else{m=T.f.kb,G=(V+1)/2,je=(H+1)/2,X=Math.abs(m.fa),ie=Math.abs(m.Ab);var Fe=Math.abs(m.Db),De=Math.abs(m.lb),ke=De*(H-1)+V;j&=X*(H-1)+V<=m.Fd,j&=ie*(je-1)+G<=m.Cd,j=(j&=Fe*(je-1)+G<=m.Ed)&X>=V&ie>=G&Fe>=G,j&=m.y!=null,j&=m.f!=null,j&=m.ea!=null,B==12&&(j&=De>=V,j&=ke<=m.Tc,j&=m.F!=null)}else j=0;m=j?0:2}}return m!=0||_!=null&&_.fd&&(m=Xf(T)),m}var Rn=64,$u=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Bu=24,zu=32,Qf=8,Ta=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ee("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(m){return m},A.Predictor2=function(m,j,_){return j[_+0]},A.Predictor3=function(m,j,_){return j[_+1]},A.Predictor4=function(m,j,_){return j[_-1]},A.Predictor5=function(m,j,_){return ve(ve(m,j[_+1]),j[_+0])},A.Predictor6=function(m,j,_){return ve(m,j[_-1])},A.Predictor7=function(m,j,_){return ve(m,j[_+0])},A.Predictor8=function(m,j,_){return ve(j[_-1],j[_+0])},A.Predictor9=function(m,j,_){return ve(j[_+0],j[_+1])},A.Predictor10=function(m,j,_){return ve(ve(m,j[_-1]),ve(j[_+0],j[_+1]))},A.Predictor11=function(m,j,_){var T=j[_+0];return 0>=ze(T>>24&255,m>>24&255,(j=j[_-1])>>24&255)+ze(T>>16&255,m>>16&255,j>>16&255)+ze(T>>8&255,m>>8&255,j>>8&255)+ze(255&T,255&m,255&j)?T:m},A.Predictor12=function(m,j,_){var T=j[_+0];return(qe((m>>24&255)+(T>>24&255)-((j=j[_-1])>>24&255))<<24|qe((m>>16&255)+(T>>16&255)-(j>>16&255))<<16|qe((m>>8&255)+(T>>8&255)-(j>>8&255))<<8|qe((255&m)+(255&T)-(255&j)))>>>0},A.Predictor13=function(m,j,_){var T=j[_-1];return(We((m=ve(m,j[_+0]))>>24&255,T>>24&255)<<24|We(m>>16&255,T>>16&255)<<16|We(m>>8&255,T>>8&255)<<8|We(m>>0&255,T>>0&255))>>>0};var U1=A.PredictorAdd0;A.PredictorAdd1=rt,ee("Predictor2","PredictorAdd2"),ee("Predictor3","PredictorAdd3"),ee("Predictor4","PredictorAdd4"),ee("Predictor5","PredictorAdd5"),ee("Predictor6","PredictorAdd6"),ee("Predictor7","PredictorAdd7"),ee("Predictor8","PredictorAdd8"),ee("Predictor9","PredictorAdd9"),ee("Predictor10","PredictorAdd10"),ee("Predictor11","PredictorAdd11"),ee("Predictor12","PredictorAdd12"),ee("Predictor13","PredictorAdd13");var em=A.PredictorAdd2;he("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),he("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var wx,yi=A.ColorIndexInverseTransform,Uu=A.MapARGB,Nx=A.VP8LColorIndexInverseTransformAlpha,Sx=A.MapAlpha,Kl=A.VP8LPredictorsAdd=[];Kl.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Pd,Ra,da,Yl,tl,sl,qu,rl,Ur,tm,ua,ji,Vu,_x,sm,Ad,Ed,Jl,Ld,Hu,Td,Zl,rm,bi,wi,gr,vr,qr,cn=i(511),nl=i(2041),nm=i(225),Wu=i(767),Cx=0,q1=nl,kx=nm,Qa=Wu,Ni=cn,Px=0,Ax=1,IS=2,Ex=3,Lx=4,V1=5,FS=6,H1=7,W1=8,Tx=9,G1=10,dI=[2,3,7],uI=[3,3,11],DS=[280,256,256,256,40],hI=[0,1,1,1,0],fI=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],mI=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],pI=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],xI=8,K1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Y1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],am=null,gI=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vI=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],OS=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],yI=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],jI=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],bI=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wI=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Xl=[],Vi=[],al=[],NI=1,MS=2,Ql=[],Si=[];Je("UpsampleRgbLinePair",Rs,3),Je("UpsampleBgrLinePair",Er,3),Je("UpsampleRgbaLinePair",qi,4),Je("UpsampleBgraLinePair",xn,4),Je("UpsampleArgbLinePair",Gn,4),Je("UpsampleRgba4444LinePair",tn,2),Je("UpsampleRgb565LinePair",Fr,2);var SI=A.UpsampleRgbLinePair,_I=A.UpsampleBgrLinePair,$S=A.UpsampleRgbaLinePair,BS=A.UpsampleBgraLinePair,zS=A.UpsampleArgbLinePair,US=A.UpsampleRgba4444LinePair,CI=A.UpsampleRgb565LinePair,Rx=16,Ix=1<<Rx-1,im=-227,J1=482,kI=6,qS=0,PI=i(256),AI=i(256),EI=i(256),LI=i(256),TI=i(J1-im),RI=i(J1-im);So("YuvToRgbRow",Rs,3),So("YuvToBgrRow",Er,3),So("YuvToRgbaRow",qi,4),So("YuvToBgraRow",xn,4),So("YuvToArgbRow",Gn,4),So("YuvToRgba4444Row",tn,2),So("YuvToRgb565Row",Fr,2);var VS=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fx=[0,2,8],II=[8,7,6,4,4,2,2,2,1,1,1,1],FI=1;this.WebPDecodeRGBA=function(m,j,_,T,B){var V=Ax,H=new Fu,G=new ws;H.ba=G,G.S=V,G.width=[G.width],G.height=[G.height];var X=G.width,ie=G.height,je=new ts;if(je==null||m==null)var Fe=2;else t(je!=null),Fe=Ou(m,j,_,je.width,je.height,je.Pd,je.Qd,je.format,null);if(Fe!=0?X=0:(X!=null&&(X[0]=je.width[0]),ie!=null&&(ie[0]=je.height[0]),X=1),X){G.width=G.width[0],G.height=G.height[0],T!=null&&(T[0]=G.width),B!=null&&(B[0]=G.height);e:{if(T=new Ln,(B=new Hf).data=m,B.w=j,B.ha=_,B.kd=1,j=[0],t(B!=null),((m=Ou(B.data,B.w,B.ha,null,null,null,j,null,B))==0||m==7)&&j[0]&&(m=4),(j=m)==0){if(t(H!=null),T.data=B.data,T.w=B.w+B.offset,T.ha=B.ha-B.offset,T.put=Xt,T.ac=yt,T.bc=tr,T.ma=H,B.xa){if((m=Ns())==null){H=1;break e}if(function(De,ke){var st=[0],Ge=[0],be=[0];t:for(;;){if(De==null)return 0;if(ke==null)return De.a=2,0;if(De.l=ke,De.a=0,Q(De.m,ke.data,ke.w,ke.ha),!Vt(De.m,st,Ge,be)){De.a=3;break t}if(De.xb=MS,ke.width=st[0],ke.height=Ge[0],!Zs(st[0],Ge[0],1,De,null))break t;return 1}return t(De.a!=0),0}(m,T)){if(T=(j=Mu(T.width,T.height,H.Oa,H.ba))==0){t:{T=m;s:for(;;){if(T==null){T=0;break t}if(t(T.s.yc!=null),t(T.s.Ya!=null),t(0<T.s.Wb),t((_=T.l)!=null),t((B=_.ma)!=null),T.xb!=0){if(T.ca=B.ba,T.tb=B.tb,t(T.ca!=null),!Zf(B.Oa,_,Ex)){T.a=2;break s}if(!xr(T,_.width)||_.da)break s;if((_.da||Dt(T.ca.S))&&Ae(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&Ae()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!mt(T.s.vb,T.s.Wa.Xa)){T.a=1;break s}T.xb=0}if(!Rt(T,T.V,T.Ba,T.c,T.i,_.o,zi))break s;B.Dc=T.Ma,T=1;break t}t(T.a!=0),T=0}T=!T}T&&(j=m.a)}else j=m.a}else{if((m=new xi)==null){H=1;break e}if(m.Fa=B.na,m.P=B.P,m.qc=B.Sa,jo(m,T)){if((j=Mu(T.width,T.height,H.Oa,H.ba))==0){if(m.Aa=0,_=H.Oa,t((B=m)!=null),_!=null){if(0<(X=0>(X=_.Md)?0:100<X?255:255*X/100)){for(ie=je=0;4>ie;++ie)12>(Fe=B.pb[ie]).lc&&(Fe.ia=X*II[0>Fe.lc?0:Fe.lc]>>3),je|=Fe.ia;je&&(alert("todo:VP8InitRandom"),B.ia=1)}B.Ga=_.Id,100<B.Ga?B.Ga=100:0>B.Ga&&(B.Ga=0)}Nd(m,T)||(j=m.a)}}else j=m.a}j==0&&H.Oa!=null&&H.Oa.fd&&(j=Xf(H.ba))}H=j}V=H!=0?null:11>V?G.f.RGBA.eb:G.f.kb.y}else V=null;return V};var HS=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(A,I){for(var O="",F=0;F<4;F++)O+=String.fromCharCode(A[I++]);return O}function u(A,I){return(A[I+0]<<0|A[I+1]<<8|A[I+2]<<16)>>>0}function h(A,I){return(A[I+0]<<0|A[I+1]<<8|A[I+2]<<16|A[I+3]<<24)>>>0}new c;var p=[0],f=[0],y=[],x=new c,w=e,v=function(A,I){var O={},F=0,E=!1,$=0,U=0;if(O.frames=[],!function(L,M,W,se){for(var ae=0;ae<se;ae++)if(L[M+ae]!=W.charCodeAt(ae))return!0;return!1}(A,I,"RIFF",4)){for(h(A,I+=4),I+=8;I<A.length;){var K=d(A,I),re=h(A,I+=4);I+=4;var pe=re+(1&re);switch(K){case"VP8 ":case"VP8L":O.frames[F]===void 0&&(O.frames[F]={}),(q=O.frames[F]).src_off=E?U:I-8,q.src_size=$+re+8,F++,E&&(E=!1,$=0,U=0);break;case"VP8X":(q=O.header={}).feature_flags=A[I];var Q=I+4;q.canvas_width=1+u(A,Q),Q+=3,q.canvas_height=1+u(A,Q),Q+=3;break;case"ALPH":E=!0,$=pe+8,U=I-8;break;case"ANIM":(q=O.header).bgcolor=h(A,I),Q=I+4,q.loop_count=(Y=A)[(k=Q)+0]<<0|Y[k+1]<<8,Q+=2;break;case"ANMF":var J,q;(q=O.frames[F]={}).offset_x=2*u(A,I),I+=3,q.offset_y=2*u(A,I),I+=3,q.width=1+u(A,I),I+=3,q.height=1+u(A,I),I+=3,q.duration=u(A,I),I+=3,J=A[I++],q.dispose=1&J,q.blend=J>>1&1}K!="ANMF"&&(I+=pe)}var Y,k;return O}}(w,0);v.response=w,v.rgbaoutput=!0,v.dataurl=!1;var b=v.header?v.header:null,N=v.frames?v.frames:null;if(b){b.loop_counter=b.loop_count,p=[b.canvas_height],f=[b.canvas_width];for(var C=0;C<N.length&&N[C].blend!=0;C++);}var P=N[0],D=x.WebPDecodeRGBA(w,P.src_off,P.src_size,f,p);P.rgba=D,P.imgwidth=f[0],P.imgheight=p[0];for(var R=0;R<f[0]*p[0]*4;R++)y[R]=D[R];return this.width=f,this.height=p,this.data=y,this}(function(e){var t=function(){return typeof Dw=="function"},r=function(p,f,y,x){var w=4,v=o;switch(x){case e.image_compression.FAST:w=1,v=i;break;case e.image_compression.MEDIUM:w=6,v=l;break;case e.image_compression.SLOW:w=9,v=c}p=n(p,f,y,v);var b=Dw(p,{level:w});return e.__addimage__.arrayBufferToBinaryString(b)},n=function(p,f,y,x){for(var w,v,b,N=p.length/f,C=new Uint8Array(p.length+N),P=u(),D=0;D<N;D+=1){if(b=D*f,w=p.subarray(b,b+f),x)C.set(x(w,y,v),b+D);else{for(var R,A=P.length,I=[];R<A;R+=1)I[R]=P[R](w,y,v);var O=h(I.concat());C.set(I[O],b+D)}v=w}return C},a=function(p){var f=Array.apply([],p);return f.unshift(0),f},i=function(p,f){var y,x=[],w=p.length;x[0]=1;for(var v=0;v<w;v+=1)y=p[v-f]||0,x[v+1]=p[v]-y+256&255;return x},o=function(p,f,y){var x,w=[],v=p.length;w[0]=2;for(var b=0;b<v;b+=1)x=y&&y[b]||0,w[b+1]=p[b]-x+256&255;return w},l=function(p,f,y){var x,w,v=[],b=p.length;v[0]=3;for(var N=0;N<b;N+=1)x=p[N-f]||0,w=y&&y[N]||0,v[N+1]=p[N]+256-(x+w>>>1)&255;return v},c=function(p,f,y){var x,w,v,b,N=[],C=p.length;N[0]=4;for(var P=0;P<C;P+=1)x=p[P-f]||0,w=y&&y[P]||0,v=y&&y[P-f]||0,b=d(x,w,v),N[P+1]=p[P]-b+256&255;return N},d=function(p,f,y){if(p===f&&f===y)return p;var x=Math.abs(f-y),w=Math.abs(p-y),v=Math.abs(p+f-y-y);return x<=w&&x<=v?p:w<=v?f:y},u=function(){return[a,i,o,l,c]},h=function(p){var f=p.map(function(y){return y.reduce(function(x,w){return x+Math.abs(w)},0)});return f.indexOf(Math.min.apply(null,f))};e.processPNG=function(p,f,y,x){var w,v,b,N,C,P,D,R,A,I,O,F,E,$,U,K=this.decode.FLATE_DECODE,re="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(b=new $Q(p)).imgData,v=b.bits,w=b.colorSpace,C=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){A=(R=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,O=new Uint8Array(A*b.colors),I=new Uint8Array(A);var pe,Q=b.pixelBitlength-b.bits;for($=0,U=0;$<A;$++){for(E=R[$],pe=0;pe<Q;)O[U++]=E>>>pe&255,pe+=b.bits;I[$]=E>>>pe&255}}if(b.bits===16){A=(R=new Uint32Array(b.decodePixels().buffer)).length,O=new Uint8Array(A*(32/b.pixelBitlength)*b.colors),I=new Uint8Array(A*(32/b.pixelBitlength)),F=b.colors>1,$=0,U=0;for(var J=0;$<A;)E=R[$++],O[U++]=E>>>0&255,F&&(O[U++]=E>>>16&255,E=R[$++],O[U++]=E>>>0&255),I[J++]=E>>>16&255;v=8}x!==e.image_compression.NONE&&t()?(p=r(O,b.width*b.colors,b.colors,x),D=r(I,b.width,1,x)):(p=O,D=I,K=void 0)}if(b.colorType===3&&(w=this.color_spaces.INDEXED,P=b.palette,b.transparency.indexed)){var q=b.transparency.indexed,Y=0;for($=0,A=q.length;$<A;++$)Y+=q[$];if((Y/=255)===A-1&&q.indexOf(0)!==-1)N=[q.indexOf(0)];else if(Y!==A){for(R=b.decodePixels(),I=new Uint8Array(R.length),$=0,A=R.length;$<A;$++)I[$]=q[R[$]];D=r(I,b.width,1)}}var k=function(L){var M;switch(L){case e.image_compression.FAST:M=11;break;case e.image_compression.MEDIUM:M=13;break;case e.image_compression.SLOW:M=14;break;default:M=12}return M}(x);return K===this.decode.FLATE_DECODE&&(re="/Predictor "+k+" "),re+="/Colors "+C+" /BitsPerComponent "+v+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:y,data:p,index:f,filter:K,decodeParameters:re,transparency:N,palette:P,sMask:D,predictor:k,width:b.width,height:b.height,bitsPerComponent:v,colorSpace:w}}}})(es.API),function(e){e.processGIF89A=function(t,r,n,a){var i=new BQ(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new Ob(100).encode(d,100);return e.processJPEG.call(this,u,r,n,a)},e.processGIF87A=e.processGIF89A}(es.API),Ki.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ki.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){mr.log("bit decode error:"+r)}},Ki.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Ki.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ki.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Ki.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Ki.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Ki.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Ki.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Ki.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new Ki(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Ob(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}}(es.API),UC.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new UC(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new Ob(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}}(es.API),es.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var u=n[d],h=n[d+1],p=n[d+2],f=n[d+3];i[l++]=u,i[l++]=h,i[l++]=p,o[c++]=f}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},es.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ah=es.API,Sg=ah.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,p=0,f=e.length,y=0,x=l[0]||c,w=[];for(r=0;r<f;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?w.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(p=h&&Gs(d[n])==="object"&&!isNaN(parseInt(d[n][y],10))?d[n][y]/u:0,w.push((l[n]||x)/c+p)),y=n;return w},MC=ah.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return ah.processArabic&&(e=ah.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Sg.apply(this,arguments).reduce(function(i,o){return i+o},0)},$C=function(e,t,r,n){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},BC=function(e,t,r){r||(r={});var n,a,i,o,l,c,d,u=[],h=[u],p=r.textIndent||0,f=0,y=0,x=e.split(" "),w=Sg.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),b=[];x.map(function(C){(C=C.split(/\s*\n/)).length>1?b=b.concat(C.map(function(P,D){return(D&&P.length?`
`:"")+P})):b.push(C[0])}),x=b,c=MC.apply(this,[v,r])}for(i=0,o=x.length;i<o;i++){var N=0;if(n=x[i],c&&n[0]==`
`&&(n=n.substr(1),N=1),p+f+(y=(a=Sg.apply(this,[n,r])).reduce(function(C,P){return C+P},0))>t||N){if(y>t){for(l=$C.apply(this,[n,a,t-(p+f),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);y=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(C,P){return C+P},0)}else u=[n];h.push(u),p=y+c,f=w}else u.push(n),p+=f+y,f=w}return d=c?function(C,P){return(P?v:"")+C.join(" ")}:function(C){return C.join(" ")},h.map(d)},ah.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(BC.apply(this,[n[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var p,f,y,x,w=["{"];for(var v in h){if(p=h[v],isNaN(parseInt(v,10))?f="'"+v+"'":(v=parseInt(v,10),f=(f=i(v).slice(2)).slice(0,-1)+n[f.slice(-1)]),typeof p=="number")p<0?(y=i(p).slice(3),x="-"):(y=i(p).slice(2),x=""),y=x+y.slice(0,-1)+n[y.slice(-1)];else{if(Gs(p)!=="object")throw new Error("Don't know what to do with value type "+Gs(p)+".");y=o(p)}w.push(f+y)}return w.push("}"),w.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,f,y,x,w={},v=1,b=w,N=[],C="",P="",D=h.length-1,R=1;R<D;R+=1)(x=h[R])=="'"?p?(y=p.join(""),p=void 0):p=[]:p?p.push(x):x=="{"?(N.push([b,y]),b={},y=void 0):x=="}"?((f=N.pop())[0][f[1]]=b,y=void 0,b=f[0]):x=="-"?v=-1:y===void 0?r.hasOwnProperty(x)?(C+=r[x],y=parseInt(C,16)*v,v=1,C=""):C+=x:r.hasOwnProperty(x)?(P+=r[x],b[y]=parseInt(P,16)*v,v=1,y=void 0,P=""):P+=x;return w},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var p=h.font,f=u.Unicode[p.postScriptName];f&&(p.metadata.Unicode={},p.metadata.Unicode.widths=f.widths,p.metadata.Unicode.kerning=f.kerning);var y=d.Unicode[p.postScriptName];y&&(p.metadata.Unicode.encoding=y,p.encoding=y.codePages[0])}])}(es.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(ip(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(es),function(e){function t(){return(ss.canvg?Promise.resolve(ss.canvg):Lw(()=>import("./index.es-DM-n44j_.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}es.API.addSvgAsImage=function(r,n,a,i,o,l,c,d){if(isNaN(n)||isNaN(a))throw mr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw mr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return t().then(function(y){return y.fromString(h,r,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(p)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),n,a,i,o,c,d)})}}(),es.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},es.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function p(y,x){var w,v=!1;for(w=0;w<y.length;w+=1)y[w]===x&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=l.length;for(h=0;h<f;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Gs(e)==="object"){for(a in e)if(i=e[a],p(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&p(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,x=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?x.push("/"+y+" /"+r[y].value):x.push("/"+y+" "+r[y].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(es.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,p=i.length;h<p;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},n=function(i){var o,l,c,d,u,h,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,p=(l=Object.keys(i).sort(function(f,y){return f-y})).length;h<p;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",y=0;y<p.length;y++)f+=String.fromCharCode(p[y]);var x=d();u({data:f,addLength1:!0,objectId:x}),c("endobj");var w=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var v=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+uh(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+uh(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+w+" 0 R"),c("/BaseFont /"+uh(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,p="",f=0;f<h.length;f++)p+=String.fromCharCode(h[f]);var y=d();u({data:p,addLength1:!0,objectId:y}),c("endobj");var x=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var w=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+uh(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+uh(l.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},p=h.pdfEscape,f=h.activeFontKey,y=h.fonts,x=f,w="",v=0,b="",N=y[x].encoding;if(y[x].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(b=l,x=f,Array.isArray(l)&&(b=l[0]),v=0;v<b.length;v+=1)y[x].metadata.hasOwnProperty("cmap")&&(o=y[x].metadata.cmap.unicode.codeMap[b[v].charCodeAt(0)]),o||b[v].charCodeAt(0)<256&&y[x].metadata.hasOwnProperty("Unicode")?w+=b[v]:w+="";var C="";return parseInt(x.slice(1))<14||N==="WinAnsiEncoding"?C=p(w,x).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(C=r(w,y[x])),h.isHex=!0,{text:C,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(es),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(es.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,l,c,d,u,h=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,N=0;this.__bidiEngine__={};var C=function(F){var E=F.charCodeAt(),$=E>>8,U=x[$];return U!==void 0?h[256*U+(255&E)]:$===252||$===253?"AL":v.test($)?"L":$===8?"R":"N"},P=function(F){for(var E,$=0;$<F.length;$++){if((E=C(F.charAt($)))==="L")return!1;if(E==="R")return!0}return!1},D=function(F,E,$,U){var K,re,pe,Q,J=E[U];switch(J){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(J="AN");break;case"AL":b=!0,J="R";break;case"WS":J="N";break;case"CS":U<1||U+1>=E.length||(K=$[U-1])!=="EN"&&K!=="AN"||(re=E[U+1])!=="EN"&&re!=="AN"?J="N":b&&(re="AN"),J=re===K?re:"N";break;case"ES":J=(K=U>0?$[U-1]:"B")==="EN"&&U+1<E.length&&E[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&$[U-1]==="EN"){J="EN";break}if(b){J="N";break}for(pe=U+1,Q=E.length;pe<Q&&E[pe]==="ET";)pe++;J=pe<Q&&E[pe]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(Q=E.length,pe=U+1;pe<Q&&E[pe]==="NSM";)pe++;if(pe<Q){var q=F[U],Y=q>=1425&&q<=2303||q===64286;if(K=E[pe],Y&&(K==="R"||K==="AL")){J="R";break}}}J=U<1||(K=E[U-1])==="B"?"N":$[U-1];break;case"B":b=!1,a=!0,J=N;break;case"S":i=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":J="N"}return J},R=function(F,E,$){var U=F.split("");return $&&A(U,$,{hiLevel:N}),U.reverse(),E&&E.reverse(),U.join("")},A=function(F,E,$){var U,K,re,pe,Q,J=-1,q=F.length,Y=0,k=[],L=N?f:p,M=[];for(b=!1,a=!1,i=!1,K=0;K<q;K++)M[K]=C(F[K]);for(re=0;re<q;re++){if(Q=Y,k[re]=D(F,M,k,re),U=240&(Y=L[Q][y[k[re]]]),Y&=15,E[re]=pe=L[Y][5],U>0)if(U===16){for(K=J;K<re;K++)E[K]=1;J=-1}else J=-1;if(L[Y][6])J===-1&&(J=re);else if(J>-1){for(K=J;K<re;K++)E[K]=pe;J=-1}M[re]==="B"&&(E[re]=0),$.hiLevel|=pe}i&&function(W,se,ae){for(var ge=0;ge<ae;ge++)if(W[ge]==="S"){se[ge]=N;for(var fe=ge-1;fe>=0&&W[fe]==="WS";fe--)se[fe]=N}}(M,E,q)},I=function(F,E,$,U,K){if(!(K.hiLevel<F)){if(F===1&&N===1&&!a)return E.reverse(),void($&&$.reverse());for(var re,pe,Q,J,q=E.length,Y=0;Y<q;){if(U[Y]>=F){for(Q=Y+1;Q<q&&U[Q]>=F;)Q++;for(J=Y,pe=Q-1;J<pe;J++,pe--)re=E[J],E[J]=E[pe],E[pe]=re,$&&(re=$[J],$[J]=$[pe],$[pe]=re);Y=Q}Y++}}},O=function(F,E,$){var U=F.split(""),K={hiLevel:N};return $||($=[]),A(U,$,K),function(re,pe,Q){if(Q.hiLevel!==0&&u)for(var J,q=0;q<re.length;q++)pe[q]===1&&(J=w.indexOf(re[q]))>=0&&(re[q]=w[J+1])}(U,$,K),I(2,U,E,$,K),I(1,U,E,$,K),U.join("")};return this.__bidiEngine__.doBidiReorder=function(F,E,$){if(function(K,re){if(re)for(var pe=0;pe<K.length;pe++)re[pe]=pe;l===void 0&&(l=P(K)),d===void 0&&(d=P(K))}(F,E),o||!c||d)if(o&&c&&l^d)N=l?1:0,F=R(F,E,$);else if(!o&&c&&d)N=l?1:0,F=O(F,E,$),F=R(F,E);else if(!o||l||c||d){if(o&&!c&&l^d)F=R(F,E),l?(N=0,F=O(F,E,$)):(N=1,F=O(F,E,$),F=R(F,E));else if(o&&l&&!c&&d)N=1,F=O(F,E,$),F=R(F,E);else if(!o&&!c&&l^d){var U=u;l?(N=1,F=O(F,E,$),N=0,u=!1,F=O(F,E,$),u=U):(N=0,F=O(F,E,$),F=R(F,E),N=1,u=!1,F=O(F,E,$),u=U,F=R(F,E))}}else N=0,F=O(F,E,$);else N=l?1:0,F=O(F,E,$);return F},this.__bidiEngine__.setOptions=function(F){F&&(o=F.isInputVisual,c=F.isOutputVisual,l=F.isInputRtl,d=F.isOutputRtl,u=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(es),es.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new dd(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new tee(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new zQ(this.contents),this.head=new qQ(this),this.name=new KQ(this),this.cmap=new fR(this),this.toUnicode={},this.hhea=new VQ(this),this.maxp=new YQ(this),this.hmtx=new JQ(this),this.post=new WQ(this),this.os2=new HQ(this),this.loca=new eee(this),this.glyf=new ZQ(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var yo,dd=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),zQ=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,o,l,c,d,u,h,p,f,y,x;for(x in f=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(f)/c),o=Math.floor(h/c),u=16*f-h,(a=new dd).writeInt(this.scalarType),a.writeShort(f),a.writeShort(h),a.writeShort(o),a.writeShort(u),i=16*f,d=a.pos+i,l=null,y=[],r)for(p=r[x],a.writeString(x),a.writeInt(e(p)),a.writeInt(d),a.writeInt(p.length),y=y.concat(p),x==="head"&&(l=d),d+=p.length;d%4;)y.push(0),d++;return a.write(y),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,o;for(r=mR.call(r);r.length%4;)r.push(0);for(i=new dd(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),UQ={}.hasOwnProperty,Zo=function(e,t){for(var r in t)UQ.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};yo=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var qQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new dd).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),qC=function(){function e(t,r){var n,a,i,o,l,c,d,u,h,p,f,y,x,w,v,b,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),p=f/2,t.pos+=6,i=function(){var C,P;for(P=[],c=C=0;0<=p?C<p:C>p;c=0<=p?++C:--C)P.push(t.readUInt16());return P}(),t.pos+=2,x=function(){var C,P;for(P=[],c=C=0;0<=p?C<p:C>p;c=0<=p?++C:--C)P.push(t.readUInt16());return P}(),d=function(){var C,P;for(P=[],c=C=0;0<=p?C<p:C>p;c=0<=p?++C:--C)P.push(t.readUInt16());return P}(),u=function(){var C,P;for(P=[],c=C=0;0<=p?C<p:C>p;c=0<=p?++C:--C)P.push(t.readUInt16());return P}(),a=(this.length-t.pos+this.offset)/2,l=function(){var C,P;for(P=[],c=C=0;0<=a?C<a:C>a;c=0<=a?++C:--C)P.push(t.readUInt16());return P}(),c=v=0,N=i.length;v<N;c=++v)for(w=i[c],n=b=y=x[c];y<=w?b<=w:b>=w;n=y<=w?++b:--b)u[c]===0?o=n+d[c]:(o=l[u[c]/2+(n-y)-(p-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=h}return e.encode=function(t,r){var n,a,i,o,l,c,d,u,h,p,f,y,x,w,v,b,N,C,P,D,R,A,I,O,F,E,$,U,K,re,pe,Q,J,q,Y,k,L,M,W,se,ae,ge,fe,Me,de,$e;switch(U=new dd,o=Object.keys(t).sort(function(Ye,mt){return Ye-mt}),r){case"macroman":for(x=0,w=function(){var Ye=[];for(y=0;y<256;++y)Ye.push(0);return Ye}(),b={0:0},i={},K=0,J=o.length;K<J;K++)b[fe=t[a=o[K]]]==null&&(b[fe]=++x),i[a]={old:t[a],new:b[t[a]]},w[a]=b[t[a]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(w),{charMap:i,subtable:U.data,maxGlyphID:x+1};case"unicode":for(E=[],h=[],N=0,b={},n={},v=d=null,re=0,q=o.length;re<q;re++)b[P=t[a=o[re]]]==null&&(b[P]=++N),n[a]={old:P,new:b[P]},l=b[P]-a,v!=null&&l===d||(v&&h.push(v),E.push(a),d=l),v=a;for(v&&h.push(v),h.push(65535),E.push(65535),O=2*(I=E.length),A=2*Math.pow(Math.log(I)/Math.LN2,2),p=Math.log(A/2)/Math.LN2,R=2*I-A,c=[],D=[],f=[],y=pe=0,Y=E.length;pe<Y;y=++pe){if(F=E[y],u=h[y],F===65535){c.push(0),D.push(0);break}if(F-($=n[F].new)>=32768)for(c.push(0),D.push(2*(f.length+I-y)),a=Q=F;F<=u?Q<=u:Q>=u;a=F<=u?++Q:--Q)f.push(n[a].new);else c.push($-F),D.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*I+2*f.length),U.writeUInt16(0),U.writeUInt16(O),U.writeUInt16(A),U.writeUInt16(p),U.writeUInt16(R),ae=0,k=h.length;ae<k;ae++)a=h[ae],U.writeUInt16(a);for(U.writeUInt16(0),ge=0,L=E.length;ge<L;ge++)a=E[ge],U.writeUInt16(a);for(Me=0,M=c.length;Me<M;Me++)l=c[Me],U.writeUInt16(l);for(de=0,W=D.length;de<W;de++)C=D[de],U.writeUInt16(C);for($e=0,se=f.length;$e<se;$e++)x=f[$e],U.writeUInt16(x);return{charMap:n,subtable:U.data,maxGlyphID:N+1}}},e}(),fR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new qC(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,i;return n==null&&(n="macroman"),a=qC.encode(r,n),(i=new dd).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),VQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),HQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),WQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),GQ=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},KQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,i,o,l,c,d,u,h,p,f;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=h=0,p=a.length;h<p;o=++h)i=a[o],r.pos=i.offset,u=r.readString(i.length),l=new GQ(u,i),d[f=i.nameID]==null&&(d[f]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),YQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),JQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,p,f;for(f=[],u=0,h=(p=this.metrics).length;u<h;u++)o=p[u],f.push(o.advance);return f}).call(this),a=this.widths[this.widths.length-1],d=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),mR=[].slice,ZQ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,i,o,l,c,d,u,h,p;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new dd(n.read(i))).readShort(),u=c.readShort(),p=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new QQ(c,u,p,d,h):new XQ(c,l,u,p,d,h),this.cache[r]))},t.prototype.encode=function(r,n,a){var i,o,l,c,d;for(l=[],o=[],c=0,d=n.length;c<d;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),XQ=function(){function e(t,r,n,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),QQ=function(){function e(t,r,n,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new dd(mR.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),eee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zo(t,yo),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<n.length&&n[o]==l){++o,a[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*a.length),h=0;h<a.length;++h)u[4*h+3]=255&a[h],u[4*h+2]=(65280&a[h])>>8,u[4*h+1]=(16711680&a[h])>>16,u[4*h]=(4278190080&a[h])>>24;return u},t}(),tee=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,o,l,c,d,u,h,p,f,y,x,w,v;for(a in n=fR.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},v=n.charMap)f[(c=v[a]).old]=c.new;for(y in p=n.maxGlyphID,o)y in f||(f[y]=p++);return u=function(b){var N,C;for(N in C={},b)C[b[N]]=N;return C}(f),h=Object.keys(u).sort(function(b,N){return b-N}),x=function(){var b,N,C;for(C=[],b=0,N=h.length;b<N;b++)l=h[b],C.push(u[l]);return C}(),i=this.font.glyf.encode(o,x,f),d=this.font.loca.encode(i.offsets,x),w={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},e}();es.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function pR(e,t,r,n,a){n=n||{};var i=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():i,d=l*c,u=/\r\n|\r|\n/g,h="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof e=="string"?e.split(u):e,p=h.length||1),r+=l*(2-i),n.valign==="middle"?r-=p/2*d:n.valign==="bottom"&&(r-=p*d),n.halign==="center"||n.halign==="right"){var f=l;if(n.halign==="center"&&(f*=.5),h&&p>=1){for(var y=0;y<h.length;y++)a.text(h[y],t-a.getStringUnitWidth(h[y])*f,r),r+=d;return a}t-=a.getStringUnitWidth(e)*f}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var VC={},Yh=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:VC=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var u=e.unifyColor(t.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=e.unifyColor(t.textColor),u&&(a=this.jsPDFDocument).setTextColor.apply(a,u),u=e.unifyColor(t.lineColor),u&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return VC||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),qw=function(e,t){return qw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},qw(e,t)};function xR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");qw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var gR=function(e){xR(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function see(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ree(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function qv(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return a}function vR(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var o=yR(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function yR(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function w1(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function jR(e,t){var r=w1(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function nee(e,t,r,n,a){var i={},o=1.3333333333333333,l=Mb(t,function(N){return a.getComputedStyle(N).backgroundColor});l!=null&&(i.fillColor=l);var c=Mb(t,function(N){return a.getComputedStyle(N).color});c!=null&&(i.textColor=c);var d=iee(n,r);d&&(i.cellPadding=d);var u="borderTopColor",h=o*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var f=(parseFloat(p)||0)/h;f&&(i.lineWidth=f)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var y=Mb(t,function(N){return a.getComputedStyle(N)[u]});y!=null&&(i.lineColor=y);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var w=parseInt(n.fontSize||"");isNaN(w)||(i.fontSize=w/o);var v=aee(n);v&&(i.fontStyle=v);var b=(n.fontFamily||"").toLowerCase();return e.indexOf(b)!==-1&&(i.font=b),i}function aee(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function Mb(e,t){var r=bR(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function bR(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:bR(e.parentElement,t):r}function iee(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/n}),o=w1(i,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function wR(e,t,r,n,a){var i,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],h=[],p=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:p};for(var f=0;f<l.rows.length;f++){var y=l.rows[f],x=(o=(i=y==null?void 0:y.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),w=oee(c,d,r,y,n,a);w&&(x==="thead"?u.push(w):x==="tfoot"?p.push(w):h.push(w))}return{head:u,body:h,foot:p}}function oee(e,t,r,n,a,i){for(var o=new gR(n),l=0;l<n.cells.length;l++){var c=n.cells[l],d=r.getComputedStyle(c);if(a||d.display!=="none"){var u=void 0;i&&(u=nee(e,c,t,d,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:lee(c)})}}var h=r.getComputedStyle(n);if(o.length>0&&(a||h.display!=="none"))return o}function lee(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function cee(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function vl(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i}function NR(e,t){var r=new Yh(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();cee(a,n,t);var i=vl({},a,n,t),o;typeof window<"u"&&(o=window);var l=dee(a,n,t),c=uee(a,n,t),d=hee(r,i),u=mee(r,i,o);return{id:t.tableId,content:u,hooks:c,styles:l,settings:d}}function dee(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var d=e[c],u=t[c],h=r[c];n.columnStyles=vl({},d,u,h)}else{var p=[e,t,r],f=p.map(function(y){return y[c]||{}});n[c]=vl({},f[0],f[1],f[2])}},i=0,o=Object.keys(n);i<o.length;i++){var l=o[i];a(l)}return n}function uee(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var l=o[i];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function hee(e,t){var r,n,a,i,o,l,c,d,u,h,p,f,y=w1(t.margin,40/e.scaleFactor()),x=(r=fee(e,t.startY))!==null&&r!==void 0?r:y.top,w;t.showFoot===!0?w="everyPage":t.showFoot===!1?w="never":w=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var v;t.showHead===!0?v="everyPage":t.showHead===!1?v="never":v=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var b=(i=t.useCss)!==null&&i!==void 0?i:!1,N=t.theme||(b?"plain":"striped"),C=!!t.horizontalPageBreak,P=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:b,theme:N,startY:x,margin:y,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:v,showFoot:w,tableLineWidth:(h=t.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=t.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:C,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(f=t.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function fee(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function mee(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=wR(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||pee(n,a,i);return{columns:c,head:n,body:a,foot:i}}function pee(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(n)?l=n[parseInt(i)]:l=n[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(n)?d=a.length:d=i+(c>0?"_".concat(c):"");var u={dataKey:d};a.push(u)}}),a}var Vw=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),xee=function(e){xR(t,e);function t(r,n,a,i,o,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=i,c.column=o,c.section=i.section,c}return t}(Vw),gee=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,o){for(var l=0,c=r;l<c.length;l++){var d=c[l],u=new xee(t,this,n,a,i,o),h=d(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new Vw(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new Vw(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),SR=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof gR&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var o=n.cells[i.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>a?d:a},0)},e}(),_R=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=w1(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),vee=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function yee(e,t){jee(e,t);var r=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=Hw(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=Hw(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),wee(t),Nee(t,e),bee(t)}function jee(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=jR(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,i,c,null);var h=d.padding("horizontal");d.contentWidth=qv(d.text,d.styles,e)+h;var p=qv(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=p+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||n===!0)d.contentWidth>a?(d.minWidth=a,d.wrappedWidth=a):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var f=10/r;d.minWidth=d.styles.minCellWidth||f,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function Hw(e,t,r){for(var n=t,a=e.reduce(function(f,y){return f+y.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/a,c=n*l,d=o.width+c,u=r(o),h=d<u?u:d;t-=h-o.width,o.width=h}if(t=Math.round(t*1e10)/1e10,t){var p=e.filter(function(f){return t<0?f.width>r(f):!0});p.length&&(t=Hw(p,t,r))}return t}function bee(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,r=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var u=i.cells[c.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var h=n.length-a,p=u.rowSpan>h?h:u.rowSpan;t[c.index]={cell:u,left:p,row:i}}}}}function wee(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=c.width,delete n.cells[c.index];else if(a){var d=a;delete n.cells[c.index],a=null,d.width=c.width+i}else{var d=n.cells[c.index];if(!d)continue;if(o=d.colSpan,i=0,d.colSpan>1){a=d,i+=c.width;continue}d.width=c.width+i}}}function Nee(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=HC(d.text,u,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=HC(d.text,u,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var h=d.styles.overflow(d.text,u);typeof h=="string"?d.text=[h]:d.text=h}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var p=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<p*d.rowSpan?r={height:p,count:d.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>i.height&&(i.height=p)}}r.count--}}function HC(e,t,r,n,a){return e.map(function(i){return See(i,t,r,n,a)})}function See(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=qv(e,r,n))return e;for(;t<qv(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function CR(e,t){var r=new Yh(e),n=_ee(t,r.scaleFactor()),a=new gee(t,n);return yee(r,a),r.applyStyles(r.userStyles),a}function _ee(e,t){var r=e.content,n=kee(r.columns);if(r.head.length===0){var a=WC(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=WC(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,o=e.styles;return{columns:n,head:$b("head",r.head,n,o,i,t),body:$b("body",r.body,n,o,i,t),foot:$b("foot",r.foot,n,o,i,t)}}function $b(e,t,r,n,a,i){var o={},l=t.map(function(c,d){for(var u=0,h={},p=0,f=0,y=0,x=r;y<x.length;y++){var w=x[y];if(o[w.index]==null||o[w.index].left===0)if(f===0){var v=void 0;Array.isArray(c)?v=c[w.index-p-u]:v=c[w.dataKey];var b={};typeof v=="object"&&!Array.isArray(v)&&(b=(v==null?void 0:v.styles)||{});var N=Pee(e,w,d,a,n,i,b),C=new _R(v,N,e);h[w.dataKey]=C,h[w.index]=C,f=C.colSpan-1,o[w.index]={left:C.rowSpan-1,times:f}}else f--,p++;else o[w.index].left--,f=o[w.index].times,u++}return new SR(c,d,e,h)});return l}function WC(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=Cee(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function Cee(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function kee(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new vee(a,t,r)})}function Pee(e,t,r,n,a,i,o){var l=ree(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var d=vl({},l.table,l[e],a.styles,c),u=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},h=e==="body"?u:{},p=e==="body"&&r%2===0?vl({},l.alternateRow,a.alternateRowStyles):{},f=see(i),y=vl({},f,d,p,h);return vl(y,o)}function Aee(e,t,r){var n;r===void 0&&(r={});var a=jR(e,t),i=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var f=t.columns.find(function(y){return y.dataKey===p||y.index===p});f&&!i.has(f.index)&&(i.set(f.index,!0),o.push(f.index),l.push(t.columns[f.index]),a-=f.wrappedWidth)});for(var d=!0,u=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;u<t.columns.length;){if(i.has(u)){u++;continue}var h=t.columns[u].wrappedWidth;if(d||a>=h)d=!1,o.push(u),l.push(t.columns[u]),a-=h;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function Eee(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=Aee(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function kR(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(p,f){return p+f.height},0);l+=d}var u=new Yh(e);(r.pageBreak==="always"||r.startY!=null&&l>u.pageSize().height)&&(AR(u),i.y=a.top),t.callWillDrawPageHooks(u,i);var h=vl({},i);t.startPageNumber=u.pageNumber(),r.horizontalPageBreak?Lee(u,t,h,i):(u.applyStyles(u.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(p){return $l(u,t,p,i,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(p,f){var y=f===t.body.length-1;Vv(u,t,p,y,h,i,t.columns)}),u.applyStyles(u.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(p){return $l(u,t,p,i,t.columns)})),vR(u,t,h,i),t.callEndPageHooks(u,i),t.finalY=i.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function Lee(e,t,r,n){var a=Eee(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(d,u){e.applyStyles(e.userStyles),u>0?op(e,t,r,n,d.columns,!0):GC(e,t,n,d.columns),Tee(e,t,r,n,d.columns),Bb(e,t,n,d.columns)});else for(var o=-1,l=a[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var u=l.columns;o>=0?op(e,t,r,n,u,!0):GC(e,t,n,u),d=KC(e,t,o+1,n,u),Bb(e,t,n,u)}var h=d-o;a.slice(1).forEach(function(p){e.applyStyles(e.userStyles),op(e,t,r,n,p.columns,!0),KC(e,t,o+1,n,p.columns,h),Bb(e,t,n,p.columns)}),o=d};o<t.body.length-1;)c()}function GC(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return $l(e,t,i,r,n)})}function Tee(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;Vv(e,t,i,l,r,n,a)})}function KC(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,d){var u=r+d===t.body.length-1,h=PR(e,t,u,n);c.canEntireRowFit(h,a)&&($l(e,t,c,n,a),l=r+d)}),l}function Bb(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return $l(e,t,i,r,n)})}function Ree(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function Iee(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new _R(d.raw,d.styles,d.section);u=vl(u,d),u.text=[];var h=Ree(d,t,n);d.text.length>h&&(u.text=d.text.splice(h,d.text.length));var p=n.scaleFactor(),f=n.getLineHeightFactor();d.contentHeight=d.getContentHeight(p,f),d.contentHeight>=t&&(d.contentHeight=t,u.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),u.contentHeight=u.getContentHeight(p,f),u.contentHeight>i&&(i=u.contentHeight),a[c.index]=u}}var y=new SR(e.raw,-1,e.section,a,!0);y.height=i;for(var x=0,w=r.columns;x<w.length;x++){var c=w[x],u=y.cells[c.index];u&&(u.height=y.height);var d=e.cells[c.index];d&&(d.height=e.height)}return y}function Fee(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),d=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=t.hasRowSpan(n.columns),h=t.getMaxCellHeight(n.columns)>l;return h?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function Vv(e,t,r,n,a,i,o){var l=PR(e,t,n,i);if(r.canEntireRowFit(l,o))$l(e,t,r,i,o);else if(Fee(e,r,l,t)){var c=Iee(r,l,t,e);$l(e,t,r,i,o),op(e,t,a,i,o),Vv(e,t,c,n,a,i,o)}else op(e,t,a,i,o),Vv(e,t,r,n,a,i,o)}function $l(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,o=a;i<o.length;i++){var l=o[i],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(d===!1){n.x+=l.width;continue}Dee(e,c,n);var u=c.getTextPos();pR(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function Dee(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=yR(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),Oee(e,t,r,n.lineWidth))}function Oee(e,t,r,n){var a,i,o,l;n.top&&(a=r.x,i=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,o,l)),n.bottom&&(a=r.x,i=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,o,l)),n.left&&(a=r.x,i=r.y,o=r.x,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,i,o,l)),n.right&&(a=r.x+t.width,i=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,i,o,l));function c(d,u,h,p,f){e.getDocument().setLineWidth(d),e.getDocument().line(u,h,p,f,"S")}}function PR(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function op(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return $l(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;vR(e,t,r,n),AR(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return $l(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function AR(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function Mee(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=NR(this,n),i=CR(this,a);return kR(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){pR(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Yh.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Yh.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Yh(this),i=wR(a,t,window,r,!1),o=i.head,l=i.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var zb;function ER(e,t){var r=NR(e,t),n=CR(e,r);kR(e,n)}try{if(typeof window<"u"&&window){var YC=window,JC=YC.jsPDF||((zb=YC.jspdf)===null||zb===void 0?void 0:zb.jsPDF);JC&&Mee(JC)}}catch(e){console.error("Could not apply autoTable plugin",e)}const kS=e=>{const t=new es;return t.setFontSize(20),t.setTextColor(0,0,0),t.text(e.title,14,22),e.subtitle&&(t.setFontSize(12),t.setTextColor(100,100,100),t.text(e.subtitle,14,32)),t.setFontSize(10),t.setTextColor(100,100,100),t.text(`Generated on: ${new Date().toLocaleDateString()}`,14,42),ER(t,{head:[e.headers],body:e.rows,startY:50,styles:{fontSize:10,cellPadding:5},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),t},LR=e=>{const t=new es;t.setFontSize(24),t.text("INVOICE",105,20,{align:"center"}),t.setFontSize(12),t.text(`Invoice ID: ${e.invoice_id||e.id}`,14,40),t.text(`Status: ${e.status.toUpperCase()}`,14,50),t.text(`School: ${e.school_name||`School ${e.school}`}`,14,60),t.text(`Subscription Plan: ${e.subscription_plan||"N/A"}`,14,70),t.text(`Invoice Date: ${new Date(e.invoice_date).toLocaleDateString()}`,14,80),t.text(`Due Date: ${new Date(e.due_date).toLocaleDateString()}`,14,90),e.paid_at&&t.text(`Paid Date: ${new Date(e.paid_at).toLocaleDateString()}`,14,100),t.text(`Amount Due: ${e.currency} ${e.amount_due}`,14,110),parseFloat(e.amount_paid)>0&&t.text(`Amount Paid: ${e.currency} ${e.amount_paid}`,14,120);const r=e.line_items.map(a=>[a.description,a.quantity.toString(),`${e.currency} ${a.unit_price}`,`${e.currency} ${a.total}`]);ER(t,{head:[["Description","Quantity","Unit Price","Total"]],body:r,startY:140,styles:{fontSize:10,cellPadding:5},headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"}});const n=e.line_items.reduce((a,i)=>a+i.total,0);return t.setFontSize(14),t.text(`Total Amount: ${e.currency} ${n}`,14,200),t},PS=e=>{const t=new es;return t.setFontSize(24),t.text("SUBSCRIPTION DETAILS",105,20,{align:"center"}),t.setFontSize(12),t.text(`Subscription ID: ${e.id}`,14,40),t.text(`School: ${e.school_name}`,14,50),t.text(`Plan: ${e.plan_name}`,14,60),t.text(`Status: ${e.status.toUpperCase()}`,14,70),t.text(`Billing Cycle: ${e.billing_cycle}`,14,80),t.text(`Price: ${e.price_charged}`,14,90),t.setFontSize(14),t.text("Usage Statistics",14,110),t.setFontSize(12),t.text(`Students: ${e.current_students_count}`,14,120),t.text(`Buses: ${e.current_buses_count}`,14,130),t.text(`Parents: ${e.current_parents_count}`,14,140),t},ud=(e,t)=>{e.save(t)},$ee=()=>{const e=er(),{subscriptions:t,loading:r,error:n}=Ct(q=>q.schoolSubscriptions),{schools:a}=Ct(q=>q.schools),{user:i}=Ct(q=>q.auth),{toast:o}=Ar(),[l,c]=g.useState(""),[d,u]=g.useState("all"),[h,p]=g.useState("all"),[f,y]=g.useState("all"),[x,w]=g.useState(null),[v,b]=g.useState(!1),N=g.useMemo(()=>{const q=localStorage.getItem("schoolId");if(q&&q!=="")return q;if(a.length>0&&(i!=null&&i.id)){const Y=a.find(k=>k.admin===i.id);if(Y!=null&&Y.id)return localStorage.setItem("schoolId",Y.id.toString()),Y.id.toString()}return null},[a,i==null?void 0:i.id]),P=(()=>{try{const q=localStorage.getItem("user");if(q){const Y=JSON.parse(q);return Y.role==="admin"||Y.role==="super_admin"}}catch{}return!1})();g.useEffect(()=>{(async()=>{try{await e(bl()).unwrap(),N&&y(N);const L=re("2025-07-31T23:07:35+03:00","quarterly")}catch(Y){const k=Y instanceof Error?Y.message:"Failed to load subscriptions";k.includes("Rate limited")||k.includes("throttled")?o({title:"Rate Limited",description:k,variant:"destructive"}):o({title:"Error",description:k,variant:"destructive"})}})()},[e,o,N]);const D=q=>{w(q),b(!0)},R=()=>{b(!1),w(null)},A=()=>{c(""),u("all"),p("all"),y(N||"all")},I=q=>{try{const Y=PS(q);ud(Y,`subscription-${q.id}-${new Date().toISOString().split("T")[0]}.pdf`),o({title:"Subscription Downloaded",description:"Subscription PDF has been downloaded successfully."})}catch{o({title:"Error",description:"Failed to generate subscription PDF. Please try again.",variant:"destructive"})}},F=t.filter(q=>q.school.toString()===N).filter(q=>{const Y=q.school_name.toLowerCase().includes(l.toLowerCase())||q.plan_name.toLowerCase().includes(l.toLowerCase()),k=d==="all"||q.status===d,L=h==="all"||q.billing_cycle===h,M=f==="all"||q.school.toString()===f;return Y&&k&&L&&M}),E=q=>{switch(q){case"active":return s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Active"});case"pending":return s.jsx(Pe,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return s.jsx(Pe,{className:"bg-red-100 text-red-800",children:"Cancelled"});case"expired":return s.jsx(Pe,{className:"bg-gray-100 text-gray-800",children:"Expired"});default:return s.jsx(Pe,{variant:"outline",children:q})}},$=q=>{switch(q){case"monthly":return s.jsx(Pe,{className:"bg-blue-100 text-blue-800",children:"Monthly"});case"quarterly":return s.jsx(Pe,{className:"bg-orange-100 text-orange-800",children:"Quarterly"});case"annually":return s.jsx(Pe,{className:"bg-purple-100 text-purple-800",children:"Annually"});case"yearly":return s.jsx(Pe,{className:"bg-purple-100 text-purple-800",children:"Yearly"});default:return s.jsx(Pe,{variant:"outline",children:q})}},U=q=>new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),K=q=>new Intl.NumberFormat("en-US",{style:"currency",currency:"KES"}).format(parseFloat(q)),re=(q,Y)=>{if(!q||!Y)return null;const k=new Date(q);switch(Y.toLowerCase()){case"monthly":return new Date(k.getFullYear(),k.getMonth()+1,k.getDate());case"quarterly":return new Date(k.getFullYear(),k.getMonth()+3,k.getDate());case"annually":return new Date(k.getFullYear()+1,k.getMonth(),k.getDate());case"yearly":return new Date(k.getFullYear()+1,k.getMonth(),k.getDate());default:return null}},pe=()=>{const q=new Map;return t.forEach(k=>{q.has(k.school)||q.set(k.school,k.school_name)}),Array.from(q.entries()).map(([k,L])=>({id:k.toString(),name:L}))},Q=q=>{let Y=null;if(q.end_date?Y=new Date(q.end_date):Y=re(q.start_date,q.billing_cycle),!Y)return{status:"no_expiry",days:0};const k=new Date,L=Math.ceil((Y.getTime()-k.getTime())/(1e3*60*60*24));return L<0?{status:"expired",days:Math.abs(L)}:L<=30?{status:"expiring_soon",days:L}:{status:"active",days:L}},J=q=>{const Y=Q(q);switch(Y.status){case"expired":return s.jsxs(Pe,{variant:"destructive",children:["Expired ",Y.days," days ago"]});case"expiring_soon":return s.jsxs(Pe,{className:"bg-orange-100 text-orange-800",children:["Expires in ",Y.days," days"]});case"active":return s.jsxs(Pe,{className:"bg-green-100 text-green-800",children:["Active (",Y.days," days left)"]});case"no_expiry":const k=re(q.start_date,q.billing_cycle);if(k){const L=Math.ceil((k.getTime()-new Date().getTime())/864e5);return L<0?s.jsx(Pe,{variant:"destructive",children:"Expired (calculated)"}):L<=30?s.jsxs(Pe,{className:"bg-orange-100 text-orange-800",children:["Expires in ",L," days (calculated)"]}):s.jsxs(Pe,{className:"bg-green-100 text-green-800",children:["Active (",L," days left, calculated)"]})}return s.jsx(Pe,{variant:"outline",children:"No expiry date"});default:return s.jsx(Pe,{variant:"outline",children:"Unknown"})}};return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading subscriptions..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"School Subscriptions"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor school subscription plans"})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Subscriptions"}),s.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:F.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All school subscriptions"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(Ht,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:F.filter(q=>q.status==="active").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active plans"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Expiring Soon"}),s.jsx(ar,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:F.filter(q=>Q(q).status==="expiring_soon").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Within 30 days"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(Vc,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:K(F.reduce((q,Y)=>q+parseFloat(Y.price_charged),0).toString())}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"From all subscriptions"})]})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsx(Ue,{children:"Filters"})}),s.jsxs(Te,{children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Ie,{placeholder:"Search by school or plan...",value:l,onChange:q=>c(q.target.value)})}),s.jsxs(Gt,{value:f,onValueChange:y,children:[s.jsx(zt,{className:"w-48",children:s.jsx(Kt,{placeholder:"Filter by school"})}),s.jsxs(Ut,{children:[P&&s.jsx(Ee,{value:"all",children:"All Schools"}),pe().map(q=>s.jsxs(Ee,{value:q.id,children:[q.name," (ID: ",q.id,")"]},q.id))]})]}),f!=="all"&&s.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:["Selected School ID: ",f]}),s.jsxs(Gt,{value:d,onValueChange:u,children:[s.jsx(zt,{className:"w-48",children:s.jsx(Kt,{placeholder:"Filter by status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Status"}),s.jsx(Ee,{value:"active",children:"Active"}),s.jsx(Ee,{value:"pending",children:"Pending"}),s.jsx(Ee,{value:"cancelled",children:"Cancelled"}),s.jsx(Ee,{value:"expired",children:"Expired"})]})]}),s.jsxs(Gt,{value:h,onValueChange:p,children:[s.jsx(zt,{className:"w-48",children:s.jsx(Kt,{placeholder:"Filter by billing cycle"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Cycles"}),s.jsx(Ee,{value:"monthly",children:"Monthly"}),s.jsx(Ee,{value:"quarterly",children:"Quarterly"}),s.jsx(Ee,{value:"annually",children:"Annually"}),s.jsx(Ee,{value:"yearly",children:"Yearly"})]})]}),s.jsx(ce,{variant:"outline",onClick:A,children:"Clear Filters"})]}),(l||f!=="all"||d!=="all"||h!=="all")&&s.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Active Filters:"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[l&&s.jsxs(Pe,{variant:"secondary",children:['Search: "',l,'"']}),f!=="all"&&s.jsxs(Pe,{variant:"secondary",children:["School ID: ",f,N===f&&" (Your School)"]}),d!=="all"&&s.jsxs(Pe,{variant:"secondary",children:["Status: ",d]}),h!=="all"&&s.jsxs(Pe,{variant:"secondary",children:["Billing: ",h]})]})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsxs(Ue,{children:["School Subscriptions (",F.length," of"," ",F.length,")"]}),s.jsxs(ys,{children:["All school subscriptions and their current status",l&&s.jsxs("span",{className:"block text-sm text-blue-600",children:[' Filtered by: "',l,'"']}),f!=="all"&&s.jsxs("span",{className:"block text-sm text-blue-600",children:[" School ID: ",f,N===f&&" (Your School)"]}),d!=="all"&&s.jsxs("span",{className:"block text-sm text-blue-600",children:[" Status: ",d]}),h!=="all"&&s.jsxs("span",{className:"block text-sm text-blue-600",children:[" Billing: ",h]})]})]}),s.jsx(Te,{children:n?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Nr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Subscriptions"}),s.jsx("p",{className:"text-muted-foreground",children:n})]}):F.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Cn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Subscriptions Found"}),s.jsx("p",{className:"text-muted-foreground",children:F.length===0?"No subscriptions have been created yet.":"No subscriptions match your current filters."})]}):s.jsx("div",{className:"rounded-md border",children:s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"School"}),s.jsx(ut,{children:"Plan"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Billing Cycle"}),s.jsx(ut,{children:"Price"}),s.jsx(ut,{children:"Expiry Status"}),s.jsx(ut,{children:"Usage"}),s.jsx(ut,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:F.map(q=>s.jsxs(Js,{children:[s.jsx(ct,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:q.school_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",q.school]})]})]})}),s.jsx(ct,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:q.plan_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",q.plan]})]})}),s.jsx(ct,{children:E(q.status)}),s.jsx(ct,{children:$(q.billing_cycle)}),s.jsxs(ct,{children:[s.jsx("div",{className:"font-medium",children:K(q.price_charged)}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Calculated:"," ",K(q.calculated_cost.toString())]})]}),s.jsx(ct,{children:J(q)}),s.jsx(ct,{children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ns,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-sm",children:q.current_students_count})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($n,{className:"h-3 w-3 text-green-600"}),s.jsx("span",{className:"text-sm",children:q.current_buses_count})]})]})}),s.jsx(ct,{className:"text-right",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsxs(ce,{variant:"ghost",className:"h-8 w-8 p-0",children:[s.jsx("span",{className:"sr-only",children:"Open menu"}),s.jsx(ir,{className:"h-4 w-4"})]})}),s.jsxs(An,{align:"end",children:[s.jsx(yd,{children:"Actions"}),s.jsxs(Jt,{onClick:()=>D(q),children:[s.jsx(ir,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Jt,{onClick:()=>I(q),children:[s.jsx(Un,{className:"mr-2 h-4 w-4"}),"Download PDF"]})]})]})})]},q.id))})]})})})]}),x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Subscription Details"}),s.jsx(ce,{variant:"ghost",size:"sm",onClick:R,children:""})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Subscription Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Subscription ID:"}),s.jsx("p",{className:"font-medium",children:x.id})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[E(x.status),J(x)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Plan:"}),s.jsx("p",{className:"font-medium",children:x.plan_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Billing Cycle:"}),$(x.billing_cycle)]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"School:"}),s.jsx("p",{className:"font-medium",children:x.school_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Price Charged:"}),s.jsx("p",{className:"font-medium",children:K(x.price_charged)})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Usage Statistics"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx(ns,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),s.jsx("div",{className:"text-2xl font-bold",children:x.current_students_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Students"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx($n,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),s.jsx("div",{className:"text-2xl font-bold",children:x.current_buses_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Buses"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx(ns,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),s.jsx("div",{className:"text-2xl font-bold",children:x.current_parents_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Parents"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Important Dates"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(on,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Start Date:"}),s.jsx("span",{className:"font-medium",children:U(x.start_date)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(on,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"End Date:"}),s.jsxs("span",{className:"font-medium",children:[x.end_date?U(x.end_date):re(x.start_date,x.billing_cycle)?U(re(x.start_date,x.billing_cycle).toISOString()):"Not calculated",!x.end_date&&re(x.start_date,x.billing_cycle)&&s.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(Calculated from ",x.billing_cycle," cycle)"]})]})]}),x.next_billing_date&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ar,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Next Billing:"}),s.jsx("span",{className:"font-medium",children:U(x.next_billing_date)})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsxs(ce,{variant:"outline",onClick:()=>I(x),children:[s.jsx(Un,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(ce,{variant:"outline",children:[s.jsx(jr,{className:"mr-2 h-4 w-4"}),"View School"]}),x.status==="pending"&&s.jsxs(ce,{children:[s.jsx(Ht,{className:"mr-2 h-4 w-4"}),"Activate"]}),x.status==="active"&&s.jsxs(ce,{variant:"outline",children:[s.jsx(gd,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})]})})]})},Bee=f1({message:Ac().min(10,"Message must be at least 10 characters"),notification_type:mC(["ACTION_REQUIRED","SYSTEM","INFO","WARNING","EMERGENCY"]),target_type:mC(["parents","drivers","all"]),selected_targets:cS(On()).optional()}),_g=[{value:"ACTION_REQUIRED",label:"Action Required",icon:Hc,color:"bg-orange-100 text-orange-800"},{value:"SYSTEM",label:"System",icon:gv,color:"bg-blue-100 text-blue-800"},{value:"EMERGENCY",label:"Emergency",icon:Hc,color:"bg-red-100 text-red-800"},{value:"WARNING",label:"Warning",icon:Hc,color:"bg-yellow-100 text-yellow-800"},{value:"INFO",label:"Information",icon:gv,color:"bg-blue-100 text-blue-800"}];function zee(){var Y,k;const e=er(),{notifications:t,loading:r,error:n}=Ct(L=>L.notifications),{parents:a}=Ct(L=>L.parents),{students:i}=Ct(L=>L.students),{trips:o}=Ct(L=>L.trips),{drivers:l}=Ct(L=>L.drivers),{staff:c}=Ct(L=>L.staff),{toast:d}=Ar(),h=JSON.parse(localStorage.getItem("profile")||"{}"),p=localStorage.getItem("schoolId");h.user||h.id;const[f,y]=g.useState(""),[x,w]=g.useState("all"),[v,b]=g.useState(1),[N]=g.useState(10),[C,P]=g.useState(!1),[D,R]=g.useState(null),[A,I]=g.useState(!1),O=Tv({resolver:Rv(Bee),defaultValues:{message:"",notification_type:"INFO",target_type:"all",selected_targets:[]}});g.useEffect(()=>{const L=O.watch((M,{name:W})=>{W==="target_type"&&O.setValue("selected_targets",[])});return()=>L.unsubscribe()},[O]);const F=(a==null?void 0:a.filter(L=>L.school===parseInt(p||"0")))||[];i!=null&&i.filter(L=>L.school===parseInt(p||"0")),o!=null&&o.filter(L=>L.school===parseInt(p||"0"));const E=(t==null?void 0:t.filter(L=>{var se,ae,ge,fe;const M=((se=L.message)==null?void 0:se.toLowerCase().includes(f.toLowerCase()))||((ae=L.notification_type)==null?void 0:ae.toLowerCase().includes(f.toLowerCase()))||((ge=L.school_name)==null?void 0:ge.toLowerCase().includes(f.toLowerCase())),W=x==="all"||((fe=L.notification_type)==null?void 0:fe.toLowerCase())===x.toLowerCase();return M&&W}))||[],$=Math.ceil(E.length/N),U=(v-1)*N,K=U+N,re=(E==null?void 0:E.slice(U,K))||[];if(g.useEffect(()=>{b(1)},[f,x]),g.useEffect(()=>{p&&(e($h({schoolId:parseInt(p)})),e(xa({schoolId:parseInt(p)})),e(ai({schoolId:parseInt(p)})),e(su({schoolId:parseInt(p)})),e(Mn()),e(Fh({schoolId:parseInt(p)})))},[e,p]),!t)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsx("main",{className:"flex-1 px-2 sm:px-1 py-0 w-full max-w-[98vw] mx-auto",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#f7c624]"})})})})});const pe=async L=>{try{const M=localStorage.getItem("schoolId");if(!M){d({title:"Error",description:"School ID not found",variant:"destructive"});return}const W={school:parseInt(M||"0"),message:L.message,notification_type:L.notification_type,is_read:!1,parents:[],drivers:[]};L.target_type==="all"||(L.target_type==="parents"?L.selected_targets&&L.selected_targets.length>0&&(W.parents=L.selected_targets):L.target_type==="drivers"&&L.selected_targets&&L.selected_targets.length>0&&(W.drivers=L.selected_targets));const se=await e(v0(W)).unwrap();d({title:"Success",description:"Notification created successfully"}),O.reset(),P(!1)}catch{d({title:"Error",description:"Failed to create notification",variant:"destructive"})}},Q=L=>{R(L),I(!0)},J=L=>_g.find(M=>M.value===L)||_g[2],q=L=>new Date(L).toLocaleString();return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:s.jsxs("main",{className:"flex-1 px-2 sm:px-1 py-0 w-full max-w-[98vw] mx-auto",children:[n&&n.includes("not available")&&s.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Hc,{className:"h-5 w-5 text-blue-500"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Demo Mode - Notifications API Coming Soon"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"The notifications API is not yet available on the server. You can explore the interface with demo data, and create notifications that will be saved when the backend is implemented."})]})]})}),s.jsxs(Le,{className:"bg-white shadow-lg border-0 rounded-xl",children:[s.jsxs(Be,{className:"border-b border-gray-100 flex flex-row w-full items-center justify-between py-4",children:[s.jsxs(Ue,{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(Oo,{className:"w-6 h-6 text-[#f7c624]"}),"Notifications"]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs(js,{open:C,onOpenChange:L=>{P(L),L||O.reset()},children:[s.jsx(mu,{asChild:!0,children:s.jsxs(ce,{className:"bg-[#f7c624] hover:bg-[#f7c624]/90 text-white font-semibold px-6 py-2 rounded-lg shadow disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:n&&n.includes("not available"),children:[s.jsx(ja,{className:"mr-2 h-4 w-4"}),"Create Notification"]})}),s.jsxs(ps,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsx(xs,{children:"Create New Notification"})}),s.jsx(np,{...O,children:s.jsxs("form",{onSubmit:O.handleSubmit(pe),className:"space-y-4",children:[s.jsx(dr,{control:O.control,name:"notification_type",render:({field:L})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Notification Type"}),s.jsxs(Gt,{onValueChange:L.onChange,value:L.value,children:[s.jsx(Qs,{children:s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select notification type"})})}),s.jsx(Ut,{children:_g.map(M=>s.jsx(Ee,{value:M.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(M.icon,{className:"h-4 w-4"}),M.label]})},M.value))})]}),s.jsx(Vr,{})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Is,{children:"Target Category"}),s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Select the category of users to target with this notification. You can only target one category at a time."})]}),s.jsx(dr,{control:O.control,name:"target_type",render:({field:L})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Who to send to?"}),s.jsxs(Gt,{onValueChange:L.onChange,value:L.value,children:[s.jsx(Qs,{children:s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select target category"})})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Users"}),s.jsx(Ee,{value:"parents",children:"Parents"}),s.jsx(Ee,{value:"drivers",children:"Drivers"})]})]}),s.jsx(Vr,{})]})}),O.watch("target_type")!=="all"&&s.jsx(dr,{control:O.control,name:"selected_targets",render:({field:L})=>{var M;return s.jsxs(zs,{children:[s.jsx(Is,{children:O.watch("target_type")==="parents"?"Select Parents":O.watch("target_type")==="drivers"?"Select Drivers":"Select Targets"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Gt,{onValueChange:W=>{const se=L.value||[],ae=parseInt(W),ge=se.includes(ae)?se.filter(fe=>fe!==ae):[...se,ae];L.onChange(ge)},children:[s.jsx(Qs,{children:s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select targets"})})}),s.jsxs(Ut,{children:[O.watch("target_type")==="parents"?F.map(W=>{var se,ae;return s.jsx(Ee,{value:W.id.toString(),children:W.user_full_name||`${(se=W.user_data)==null?void 0:se.first_name} ${(ae=W.user_data)==null?void 0:ae.last_name}`},W.id)}):null,O.watch("target_type")==="drivers"?(M=l==null?void 0:l.filter(W=>W.school===parseInt(p||"0")))==null?void 0:M.map(W=>s.jsxs(Ee,{value:W.id.toString(),children:[W.user_details.first_name," ",W.user_details.last_name]},W.id)):null]})]}),L.value&&L.value.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Selected Targets:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:L.value.map(W=>{var ae,ge;let se=`ID: ${W}`;if(O.watch("target_type")==="parents"){const fe=F.find(Me=>Me.id===W);se=(fe==null?void 0:fe.user_full_name)||`${(ae=fe==null?void 0:fe.user_data)==null?void 0:ae.first_name} ${(ge=fe==null?void 0:fe.user_data)==null?void 0:ge.last_name}`||`Parent ${W}`}else if(O.watch("target_type")==="drivers"){const fe=l==null?void 0:l.find(Me=>Me.id===W);se=fe?`${fe.user_details.first_name} ${fe.user_details.last_name}`:`Driver ${W}`}return s.jsxs(Pe,{variant:"secondary",className:"text-xs",children:[se,s.jsx("button",{type:"button",onClick:()=>{L.onChange(L.value.filter(fe=>fe!==W))},className:"ml-1 text-red-500 hover:text-red-700",children:""})]},W)})})]})]}),s.jsx(Vr,{})]})}})]}),s.jsx(dr,{control:O.control,name:"message",render:({field:L})=>s.jsxs(zs,{children:[s.jsx(Is,{children:"Message"}),s.jsx(Qs,{children:s.jsx(oa,{placeholder:"Enter notification message",rows:4,...L})}),s.jsx(Vr,{})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ce,{type:"submit",className:"bg-[#f7c624] hover:bg-[#f7c624]/90",children:"Create Notification"})})]})})]})]})})]}),s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ie,{placeholder:"Search notifications by description or message...",value:f,onChange:L=>y(L.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ul,{className:"h-4 w-4 text-gray-400"}),s.jsxs(Gt,{value:x,onValueChange:w,children:[s.jsx(zt,{className:"w-[180px]",children:s.jsx(Kt,{placeholder:"Filter by type"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Types"}),_g.map(L=>s.jsx(Ee,{value:L.value,children:L.label},L.value))]})]}),s.jsx(ku,{data:{headers:["Description","Type","Message","Parent","Student","Trip","Created At","Expires At"],data:E.map(L=>({description:L.description||L.route_name||"",type:"Trip",message:`Route: ${L.route_name||""} - Driver: ${L.driver_name||""} - Vehicle: ${L.vehicle_number||""}`,parent:"N/A",student:"N/A",trip:L.route_name||"Unknown Route",created_at:L.scheduled_start_time?q(L.scheduled_start_time):"",expires_at:L.scheduled_end_time?q(L.scheduled_end_time):"No expiration"})),fileName:"notifications_export",title:"Notifications Directory"},className:"border-gray-200 hover:bg-gray-50 px-3 py-2"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Description"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Details"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:r?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#f7c624]"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"Loading notifications..."})]})})}):n?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Hc,{className:"w-8 h-8 text-blue-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-600 font-medium",children:"Demo Mode Active"}),s.jsx("p",{className:"text-blue-500 text-sm",children:"Showing demo notifications. The API will be available soon."}),s.jsx("p",{className:"text-gray-500 text-xs mt-2",children:n})]})]})})}):E.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(Oo,{className:"w-8 h-8 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 font-medium",children:"No notifications found"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Create your first notification to get started"})]})]})})}):re.map((L,M)=>{const W=J(L.notification_type||"info"),se=W.icon;return s.jsxs("tr",{className:`hover:bg-gray-50 transition-colors duration-200 ${M%2===0?"bg-white":"bg-gray-50/50"}`,children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-[#f7c624] rounded-full mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.message||"Notification"}),s.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",L.id]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs(Pe,{className:W.color,children:[s.jsx(se,{className:"w-3 h-3 mr-1"}),L.notification_type||"INFO"]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"max-w-xs truncate",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:["School: ",L.school_name||"Unknown"]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.jsxs("span",{className:"mr-2",children:["Type:"," ",L.notification_type||"Unknown"]})}),L.parents&&L.parents.length>0&&s.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Parents:"," ",L.parents.map(ae=>{const ge=F.find(fe=>fe.id===ae);return ge?ge.user_full_name:`Parent ${ae}`}).join(", ")]}),L.drivers&&L.drivers.length>0&&s.jsxs("div",{className:"text-xs text-[#f7c624] mt-1",children:["Drivers:"," ",L.drivers.map(ae=>{const ge=l==null?void 0:l.find(fe=>fe.id===ae);return ge?`${ge.user_details.first_name} ${ge.user_details.last_name}`:`Driver ${ae}`}).join(", ")]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ar,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-900",children:L.created_at?q(L.created_at):"N/A"}),L.is_read&&s.jsx("div",{className:"text-xs text-[#f7c624]",children:" Read"})]})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-gray-100 rounded-full",children:s.jsx(xv,{className:"h-4 w-4 text-gray-600"})})}),s.jsx(An,{align:"end",className:"w-48",children:s.jsxs(Jt,{onClick:()=>Q(L),className:"cursor-pointer",children:[s.jsx(ir,{className:"h-4 w-4 mr-2 text-blue-600"}),s.jsx("span",{children:"View Details"})]})})]})})]},L.id)})})]})}),$>1&&s.jsx("div",{className:"flex items-center justify-between p-4 border-t border-gray-200",children:s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",U+1,"-",Math.min(K,E.length)," ","of ",E.length," notifications",f&&` matching "${f}"`]})})]})]})}),s.jsx(js,{open:A,onOpenChange:I,children:s.jsxs(ps,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsx(bs,{children:s.jsxs(xs,{className:"flex items-center gap-2",children:[s.jsx(Oo,{className:"w-5 h-5 text-[#f7c624]"}),"Notification Details"]})}),D&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const L=J(D.notification_type||"info"),M=L.icon;return s.jsxs(Pe,{className:L.color,children:[s.jsx(M,{className:"w-3 h-3 mr-1"}),D.notification_type||"INFO"]})})(),s.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",D.id]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Message"}),s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-900",children:D.message})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"School"}),s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-900",children:D.school_name||"Unknown School"})})]}),(((Y=D.parents)==null?void 0:Y.length)>0||((k=D.drivers)==null?void 0:k.length)>0)&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Targeted Recipients"}),s.jsxs("div",{className:"space-y-2",children:[D.parents&&D.parents.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-medium text-blue-600 mb-1",children:"Parents:"}),s.jsx("div",{className:"pl-3",children:D.parents.map(L=>{const M=F.find(W=>W.id===L);return s.jsxs("div",{className:"text-sm text-gray-700",children:[" ",M?M.user_full_name:`Parent ${L}`]},L)})})]}),D.drivers&&D.drivers.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-medium text-[#f7c624] mb-1",children:"Drivers:"}),s.jsx("div",{className:"pl-3",children:D.drivers.map(L=>{const M=l==null?void 0:l.find(W=>W.id===L);return s.jsxs("div",{className:"text-sm text-gray-700",children:[" ",M?`${M.user_details.first_name} ${M.user_details.last_name}`:`Driver ${L}`]},L)})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Created"}),s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-900",children:D.created_at?q(D.created_at):"N/A"})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:s.jsx("div",{className:"flex items-center gap-2",children:D.is_read?s.jsxs(s.Fragment,{children:[s.jsx(Ht,{className:"w-4 h-4 text-[#f7c624]"}),s.jsx("span",{className:"text-[#f7c624]",children:"Read"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ar,{className:"w-4 h-4 text-orange-500"}),s.jsx("span",{className:"text-orange-600",children:"Unread"})]})})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Additional Details"}),s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"School ID:"}),s.jsx("span",{className:"text-sm text-gray-900",children:D.school||"N/A"})]}),D.read_at&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Read At:"}),s.jsx("span",{className:"text-sm text-gray-900",children:q(D.read_at)})]})]})]})]})]})})]})}const Uee=()=>{const e=Sa(),[t,r]=g.useState("terms"),n=[{id:"terms",label:"Terms & Conditions",icon:kn},{id:"system",label:"System Policies",icon:wn},{id:"payment",label:"Payment & Use Terms",icon:Cn},{id:"privacy",label:"Privacy & Data",icon:Ai},{id:"updates",label:"Policy Updates",icon:kn}],a=()=>{switch(t){case"terms":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Terms & Conditions"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"1. Acceptance of Terms"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"By accessing and using the Shule Track School Administration System, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions. These terms constitute a legally binding agreement between you and Shule Track."}),s.jsx("p",{className:"text-muted-foreground",children:"If you do not agree with any part of these terms, you must not use our services."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"2. Definitions"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:'"Service"'})," refers to the Shule Track School Administration System"]}),s.jsxs("li",{children:[s.jsx("strong",{children:'"User"'})," refers to any individual accessing the system"]}),s.jsxs("li",{children:[s.jsx("strong",{children:'"School"'})," refers to the educational institution using our services"]}),s.jsxs("li",{children:[s.jsx("strong",{children:'"Data"'})," refers to all information processed through our system"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"3. Permitted Use"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"The Service is intended for legitimate educational administration purposes only. You may use the Service to:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Manage student information and records"}),s.jsx("li",{children:"Coordinate transportation and route management"}),s.jsx("li",{children:"Process payments and billing"}),s.jsx("li",{children:"Generate reports and analytics"}),s.jsx("li",{children:"Communicate with parents and staff"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"4. Prohibited Activities"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"You agree not to:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Use the Service for any unlawful or unauthorized purpose"}),s.jsx("li",{children:"Attempt to gain unauthorized access to any part of the Service"}),s.jsx("li",{children:"Share login credentials with unauthorized individuals"}),s.jsx("li",{children:"Upload malicious software or harmful content"}),s.jsx("li",{children:"Interfere with the proper functioning of the Service"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"5. Intellectual Property"}),s.jsx("p",{className:"text-muted-foreground",children:"All content, features, and functionality of the Service are owned by Shule Track and are protected by international copyright, trademark, and other intellectual property laws. You may not reproduce, distribute, or create derivative works without our express written consent."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"6. Liability and Disclaimers"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:'The Service is provided "as is" without warranties of any kind. Shule Track disclaims all warranties, express or implied, including but not limited to:'}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Warranties of merchantability and fitness for a particular purpose"}),s.jsx("li",{children:"Warranties regarding accuracy, reliability, or completeness of data"}),s.jsx("li",{children:"Warranties that the Service will be uninterrupted or error-free"}),s.jsx("li",{children:"Warranties regarding third-party content or services"})]}),s.jsx("p",{className:"text-muted-foreground mt-3",children:"In no event shall Shule Track be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, or business opportunities, arising from your use of the Service."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"7. Termination and Suspension"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Either party may terminate this agreement at any time with 30 days written notice. Shule Track reserves the right to suspend or terminate your access immediately if:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"You breach any terms of this agreement"}),s.jsx("li",{children:"You engage in fraudulent or illegal activities"}),s.jsx("li",{children:"You fail to pay fees when due"}),s.jsx("li",{children:"You pose a security risk to the Service or other users"})]}),s.jsx("p",{className:"text-muted-foreground mt-3",children:"Upon termination, your right to use the Service ceases immediately, and we may delete your data after a 90-day grace period."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"8. Governing Law and Dispute Resolution"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"This agreement shall be governed by the laws of Kenya. Any disputes arising from this agreement shall be resolved through:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"First, through good faith negotiations between the parties"}),s.jsx("li",{children:"If negotiations fail, through binding arbitration in Nairobi, Kenya"}),s.jsx("li",{children:"Arbitration shall be conducted in English and governed by Kenyan arbitration law"}),s.jsx("li",{children:"Each party shall bear their own legal costs unless otherwise determined by the arbitrator"})]})]})]})]})});case"system":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"System Policies"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Account Management"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Each user is responsible for maintaining the security and confidentiality of their account credentials. Schools are responsible for managing user access and permissions within their organization."}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Use strong passwords and enable two-factor authentication where available"}),s.jsx("li",{children:"Report suspected unauthorized access immediately"}),s.jsx("li",{children:"Regular review and update of user permissions"}),s.jsx("li",{children:"Prompt removal of access for departing staff members"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Data Backup & Recovery"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Shule Track maintains robust backup systems to protect your data:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Daily automated backups with 30-day retention"}),s.jsx("li",{children:"Geographic redundancy across multiple data centers"}),s.jsx("li",{children:"99.9% uptime guarantee with 24/7 monitoring"}),s.jsx("li",{children:"Disaster recovery procedures tested quarterly"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"System Maintenance"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Scheduled maintenance windows are announced 48 hours in advance. Emergency maintenance may occur with minimal notice to address security vulnerabilities or critical issues."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Security Measures"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"End-to-end encryption for data transmission"}),s.jsx("li",{children:"Regular security audits and penetration testing"}),s.jsx("li",{children:"GDPR and COPPA compliance measures"}),s.jsx("li",{children:"Role-based access controls"}),s.jsx("li",{children:"Audit logs for all system activities"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Acceptable Use Policy"}),s.jsx("p",{className:"text-muted-foreground",children:"The system must be used in accordance with educational best practices and applicable laws. Any misuse, including attempts to circumvent security measures or access unauthorized data, will result in immediate account suspension and may be reported to relevant authorities."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Compliance and Legal Requirements"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Shule Track is committed to maintaining compliance with applicable laws and regulations:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"FERPA Compliance:"})," Family Educational Rights and Privacy Act compliance for student data protection"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"COPPA Compliance:"})," Children's Online Privacy Protection Act compliance for users under 13"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"GDPR Compliance:"})," General Data Protection Regulation compliance for EU data subjects"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Kenyan Data Protection Act:"})," Compliance with local data protection regulations"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Educational Standards:"})," Adherence to national and international educational technology standards"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Support and Service Level Agreement"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We provide comprehensive support to ensure your success with our platform:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Uptime Guarantee:"})," 99.9% uptime with 24/7 monitoring"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Response Times:"})," Critical issues within 2 hours, general support within 24 hours"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Support Channels:"})," Email, phone, and in-app chat support"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Training Resources:"})," Comprehensive documentation, video tutorials, and webinars"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Dedicated Support:"})," Enterprise customers receive dedicated account managers"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Maintenance Windows:"})," Scheduled maintenance with advance notice"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"System Monitoring and Performance"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Our systems are continuously monitored to ensure optimal performance:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Real-time performance monitoring and alerting"}),s.jsx("li",{children:"Automated scaling based on usage patterns"}),s.jsx("li",{children:"Regular performance optimization and updates"}),s.jsx("li",{children:"Capacity planning and resource management"}),s.jsx("li",{children:"Incident response and resolution procedures"})]})]})]})]})});case"payment":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Payment & Use Terms"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Subscription Plans"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Shule Track offers flexible subscription plans to meet the needs of educational institutions of all sizes:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Basic Plan:"})," Core features for small schools (up to 200 students)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Professional Plan:"})," Advanced features for medium schools (up to 1,000 students)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Enterprise Plan:"})," Full feature set for large institutions (unlimited students)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Custom Plans:"})," Tailored solutions for specific requirements"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Billing Terms"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Subscriptions are billed monthly or annually in advance"}),s.jsx("li",{children:"Annual subscriptions receive a 15% discount"}),s.jsx("li",{children:"Payment is due within 30 days of invoice date"}),s.jsx("li",{children:"Late payments may incur a 1.5% monthly service charge"}),s.jsx("li",{children:"Failed payments may result in service suspension after 7 days"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Payment Methods"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We accept the following payment methods:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Credit cards (Visa, MasterCard, American Express)"}),s.jsx("li",{children:"Bank transfers (ACH/Wire)"}),s.jsx("li",{children:"Purchase orders for qualified institutions"}),s.jsx("li",{children:"Digital wallets (PayPal, Apple Pay, Google Pay)"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Refund Policy"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We offer a 30-day money-back guarantee for new subscriptions. Refund requests must be submitted within 30 days of initial purchase."}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Pro-rated refunds available for annual subscriptions"}),s.jsx("li",{children:"No refunds for partial months of service"}),s.jsx("li",{children:"Refunds processed within 5-10 business days"}),s.jsx("li",{children:"Custom development work is non-refundable"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Price Changes"}),s.jsx("p",{className:"text-muted-foreground",children:"Shule Track reserves the right to modify pricing with 60 days advance notice. Existing subscribers will maintain their current pricing for the remainder of their billing period."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Cancellation"}),s.jsx("p",{className:"text-muted-foreground",children:"Subscriptions may be cancelled at any time with 30 days notice. Upon cancellation, you will retain access to the service until the end of your current billing period. Data export options are available for 90 days post-cancellation."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Taxes and Fees"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"All prices are exclusive of applicable taxes. You are responsible for:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Value Added Tax (VAT) and other applicable taxes"}),s.jsx("li",{children:"Bank transfer fees and currency conversion charges"}),s.jsx("li",{children:"Late payment penalties and interest charges"}),s.jsx("li",{children:"Any additional fees imposed by payment processors"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Usage Limits and Overages"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Each subscription plan includes specific usage limits:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Student capacity limits based on your plan"}),s.jsx("li",{children:"Storage limits for documents and media"}),s.jsx("li",{children:"API call limits for integrations"}),s.jsx("li",{children:"Support ticket limits per month"})]}),s.jsx("p",{className:"text-muted-foreground mt-3",children:"Overage charges may apply if you exceed your plan limits. We will notify you before applying overage charges and provide options to upgrade your plan."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Enterprise and Custom Agreements"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"For large institutions and custom requirements, we offer:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Custom pricing based on specific needs"}),s.jsx("li",{children:"Dedicated support and account management"}),s.jsx("li",{children:"Custom integrations and development work"}),s.jsx("li",{children:"On-premise deployment options"}),s.jsx("li",{children:"Volume discounts for multiple schools or districts"})]})]})]})]})});case"privacy":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Privacy & Data Protection"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Information We Collect"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We collect information necessary to provide our educational administration services:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Student Information:"})," Names, grades, contact details, academic records"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Parent/Guardian Data:"})," Contact information, billing details, communication preferences"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Staff Information:"})," Employee records, roles, permissions, contact details"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"System Data:"})," Usage logs, performance metrics, security events"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Financial Data:"})," Payment information, billing history, transaction records"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"How We Use Your Information"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Provide and maintain our educational services"}),s.jsx("li",{children:"Process payments and manage subscriptions"}),s.jsx("li",{children:"Send important service notifications and updates"}),s.jsx("li",{children:"Improve system performance and user experience"}),s.jsx("li",{children:"Ensure security and prevent fraudulent activity"}),s.jsx("li",{children:"Comply with legal and regulatory requirements"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Student Privacy Protection"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We are committed to protecting student privacy in accordance with FERPA, COPPA, and other applicable education privacy laws:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Student data is used solely for educational purposes"}),s.jsx("li",{children:"No advertising or marketing to students"}),s.jsx("li",{children:"Parental consent for data collection where required"}),s.jsx("li",{children:"Right to access, correct, or delete student information"}),s.jsx("li",{children:"Secure data handling and storage practices"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Data Security"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"AES-256 encryption for data at rest"}),s.jsx("li",{children:"TLS 1.3 encryption for data in transit"}),s.jsx("li",{children:"Multi-factor authentication for admin accounts"}),s.jsx("li",{children:"Regular security audits and vulnerability assessments"}),s.jsx("li",{children:"Employee background checks and security training"}),s.jsx("li",{children:"Incident response procedures and breach notification"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Data Retention"}),s.jsx("p",{className:"text-muted-foreground",children:"We retain data only as long as necessary to provide services or as required by law. Student records are typically retained for 7 years after graduation or transfer. Financial records are kept for 7 years for tax and audit purposes."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Rights"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Right to access your personal information"}),s.jsx("li",{children:"Right to correct inaccurate data"}),s.jsx("li",{children:"Right to delete data (subject to legal requirements)"}),s.jsx("li",{children:"Right to data portability"}),s.jsx("li",{children:"Right to opt-out of non-essential communications"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Data Export and Migration"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We understand that data portability is important for educational institutions. We provide comprehensive data export capabilities:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Export Formats:"})," CSV, Excel, JSON, and PDF formats available"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data Categories:"})," Student records, financial data, reports, and system configurations"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Export Frequency:"})," On-demand exports or scheduled automated exports"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Migration Support:"})," Assistance with data migration to other systems"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data Validation:"})," Export validation to ensure data integrity"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Retention Period:"})," Export data available for 90 days post-cancellation"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Third-Party Services and Integrations"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Our platform may integrate with third-party services to enhance functionality. These integrations are subject to their own privacy policies:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Payment Processors:"})," Secure payment processing through certified providers"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Communication Services:"})," SMS and email services for notifications"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Analytics Services:"})," Usage analytics to improve our services"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Cloud Storage:"})," Secure cloud storage for data backup and redundancy"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Educational Tools:"})," Integration with learning management systems and educational software"]})]}),s.jsx("p",{className:"text-muted-foreground mt-3",children:"We carefully vet all third-party providers to ensure they meet our security and privacy standards. Data shared with third parties is limited to what is necessary for service functionality."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"International Data Transfers"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Your data may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Standard Contractual Clauses (SCCs) for EU data transfers"}),s.jsx("li",{children:"Adequacy decisions where applicable"}),s.jsx("li",{children:"Data processing agreements with all service providers"}),s.jsx("li",{children:"Regular audits of international data handling practices"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Breach Notification"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"In the unlikely event of a data breach, we have comprehensive response procedures:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Immediate containment and assessment of the breach"}),s.jsx("li",{children:"Notification to affected users within 72 hours"}),s.jsx("li",{children:"Cooperation with relevant authorities and regulators"}),s.jsx("li",{children:"Detailed incident reports and remediation plans"}),s.jsx("li",{children:"Credit monitoring services for affected individuals when appropriate"})]})]})]})]})});case"updates":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Policy Updates and Changes"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Policy Modification Rights"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Shule Track reserves the right to modify these Terms and Policies at any time. We will notify users of significant changes through:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Email notifications to registered users"}),s.jsx("li",{children:"In-app notifications and banners"}),s.jsx("li",{children:"Updates to our website and documentation"}),s.jsx("li",{children:"Direct communication for enterprise customers"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Change Notification Timeline"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Minor Changes:"})," 7 days advance notice for clarifications and minor updates"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Moderate Changes:"})," 30 days advance notice for policy modifications"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Major Changes:"})," 60 days advance notice for significant policy changes"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Emergency Changes:"})," Immediate implementation for security or legal compliance"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Acceptance of Changes"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Continued use of our services after policy changes constitutes acceptance of the new terms. If you do not agree with the changes, you may:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Cancel your subscription within the notice period"}),s.jsx("li",{children:"Contact us to discuss alternative arrangements"}),s.jsx("li",{children:"Request a data export before cancellation"}),s.jsx("li",{children:"Negotiate custom terms for enterprise customers"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Version Control and History"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We maintain a complete history of all policy changes:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Versioned policy documents with change tracking"}),s.jsx("li",{children:"Detailed change logs with effective dates"}),s.jsx("li",{children:"Archive of previous policy versions"}),s.jsx("li",{children:"Summary of changes for each update"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Feedback and Suggestions"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"We welcome feedback on our policies and procedures:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Submit feedback through our support channels"}),s.jsx("li",{children:"Participate in user surveys and focus groups"}),s.jsx("li",{children:"Join our user advisory board (for enterprise customers)"}),s.jsx("li",{children:"Provide input during policy review periods"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Recent Updates"}),s.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[s.jsx("strong",{children:"Last Updated:"})," ",new Date().toLocaleDateString()]}),s.jsxs("ul",{className:"text-sm space-y-1",children:[s.jsx("li",{children:" Enhanced data protection measures in compliance with new regulations"}),s.jsx("li",{children:" Updated payment terms to include new payment methods"}),s.jsx("li",{children:" Improved support response times and escalation procedures"}),s.jsx("li",{children:" Added new data export formats and migration tools"}),s.jsx("li",{children:" Clarified international data transfer procedures"})]})]})]})]})]})});default:return null}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"bg-primary text-primary-foreground",children:s.jsxs("div",{className:"container mx-auto px-6 py-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"text-primary-foreground hover:bg-primary-foreground/20",children:s.jsx(pv,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Terms and Policies"}),s.jsxs("p",{className:"text-primary-foreground/80",children:["Last updated: ",new Date().toLocaleDateString()]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(i=>{const o=i.icon;return s.jsxs(ce,{variant:t===i.id?"secondary":"ghost",className:`flex items-center gap-2 ${t===i.id?"bg-background text-foreground":"text-primary-foreground hover:bg-primary-foreground/20"}`,onClick:()=>r(i.id),children:[s.jsx(o,{className:"h-4 w-4"}),i.label]},i.id)})})]})}),s.jsxs("div",{className:"container mx-auto px-6 py-8 max-w-4xl",children:[s.jsx(Le,{children:s.jsx(Te,{className:"p-8",children:a()})}),s.jsxs(Le,{className:"mt-8",children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(Ai,{className:"h-5 w-5"}),"Contact Information"]})}),s.jsxs(Te,{children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"If you have any questions about these Terms and Policies, please contact us:"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:"General Support"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email: support@shuletrack.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone: +254 113281424"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:"General Information"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email: info@shuletrack.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone: +254 113281424"})]})]}),s.jsx(nu,{className:"my-4"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:"Mailing Address"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Shule Track Education Technology",s.jsx("br",{}),"Gesora Road, Utawala",s.jsx("br",{}),"Nairobi, Kenya"]})]})]})]})]})]})},qee=()=>{const e=Mi();return g.useEffect(()=>{},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4 text-foreground",children:"404"}),s.jsx("p",{className:"text-xl text-muted-foreground mb-4",children:"Oops! Page not found"}),s.jsx(Bc,{to:"/",className:"text-primary hover:text-primary/80 underline",children:"Return to Home"})]})})},Vee=[{label:"Dashboard",icon:JA,href:"/super-admin"},{label:"Users",icon:ns,href:"/super-admin/users"},{label:"Schools",icon:jr,href:"/super-admin/schools"},{label:"Subscriptions",icon:Cn,href:"/super-admin/subscriptions"},{label:"School Subscriptions",icon:Cn,href:"/super-admin/school-subscriptions"},{label:"Invoices",icon:kn,href:"/super-admin/invoices"},{label:"Customer Support",icon:rw,href:"/super-admin/support"},{label:"Analytics",icon:Oy,href:"/super-admin/analytics"},{label:"Settings",icon:Ai,href:"/super-admin/settings"}];function Hee(){const e=Mi(),t=r=>r==="/super-admin"?e.pathname==="/super-admin":e.pathname.startsWith(r);return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(Bc,{to:"/super-admin",children:s.jsx("div",{className:"p-6 flex items-center gap-2",children:s.jsx("img",{src:"https://res.cloudinary.com/pitz/image/upload/v1755753463/shuletrack_landscape_logo_wfussl.png",alt:"logo",className:"h-20"})})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4",children:s.jsx("nav",{className:"space-y-1",children:Vee.map(r=>{const n=t(r.href);return s.jsxs(Bc,{to:r.href,className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors ${n?"bg-[#f7c624]/90 text-white":"text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[s.jsx(r.icon,{size:20,className:n?"text-white":"text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"font-medium",children:r.label})]},r.label)})})}),s.jsx("div",{className:"p-4",children:s.jsxs(Bc,{to:"/super-admin/settings",className:`flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-700 dark:text-gray-300 w-full ${t("/super-admin/settings")?"bg-[#f7c624]/90 text-white":""}`,children:[s.jsx(Ai,{size:20,className:t("/super-admin/settings")?"text-white":"text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"font-medium",children:"Settings"})]})})]})}const Wee=()=>{Mi();const{openMobile:e,setOpenMobile:t,toggleSidebar:r}=Df(),[n,a]=g.useState(!1),i=g.useRef(null);return g.useEffect(()=>{const o=()=>{if(i.current){const c=i.current.scrollTop;a(c>0)}},l=i.current;if(l)return l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)},[]),s.jsxs("div",{className:"h-screen w-screen bg-background",children:[e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>t(!1)}),s.jsxs("div",{className:"flex h-full w-full overflow-hidden",children:[s.jsx("div",{className:`fixed md:static inset-y-0 left-0 z-50 w-64 transform transition-transform duration-200 ease-in-out ${e?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:s.jsx("div",{className:"h-full bg-card border-r",children:s.jsx(Hee,{})})}),s.jsxs("div",{className:"flex-1 flex flex-col w-full overflow-hidden",children:[s.jsx(_7,{onMenuClick:r,isScrolled:n}),s.jsx("main",{ref:i,className:"flex-1 overflow-y-auto bg-background",children:s.jsx("div",{className:"h-full w-full",children:s.jsx("div",{className:"h-full w-full",children:s.jsx(MP,{})})})})]})]})]})},Gee=()=>s.jsx(S8,{children:s.jsx(Wee,{})});class Kee{constructor(){Wx(this,"baseUrl",It.SCHOOLS)}async getAllSchools(){try{const t=await fetch(this.baseUrl,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();let n=r.data||r;return Array.isArray(n)?n.map((i,o)=>{var l,c,d,u;return!i||typeof i!="object"?null:{_id:((l=i.id)==null?void 0:l.toString())||i._id||`temp-${o}`,name:i.name||i.school_name||"Unknown School",address:i.address||i.location||"",phone:i.phone||i.contact_number||"",email:i.email||"",principal:{name:((c=i.principal)==null?void 0:c.name)||"School Administrator",phone:((d=i.principal)==null?void 0:d.phone)||i.contact_number||"",email:((u=i.principal)==null?void 0:u.email)||i.email||""},isActive:i.is_active!==void 0?i.is_active:!0,location:i.location||"",type:i.type||"primary",capacity:i.capacity||0,currentStudents:i.current_students||i.students||0,createdAt:i.created_at||i.createdAt||new Date().toISOString(),updatedAt:i.updated_at||i.updatedAt||new Date().toISOString(),subscription:i.subscription||"Basic",staff:i.staff||0,lastActive:i.last_active||i.lastActive||"Never"}}).filter(Boolean):[]}catch(t){throw t}}async getSchoolById(t){var r,n,a,i;try{const o=await fetch(`${this.baseUrl}/${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();let c=l.data||l;if(!c||typeof c!="object")throw new Error("Invalid school data received");return{_id:((r=c.id)==null?void 0:r.toString())||c._id||t,name:c.name||c.school_name||"Unknown School",address:c.address||c.location||"",phone:c.phone||c.contact_number||"",email:c.email||"",principal:{name:((n=c.principal)==null?void 0:n.name)||"School Administrator",phone:((a=c.principal)==null?void 0:a.phone)||c.contact_number||"",email:((i=c.principal)==null?void 0:i.email)||c.email||""},isActive:c.is_active!==void 0?c.is_active:!0,location:c.location||"",type:c.type||"primary",capacity:c.capacity||0,currentStudents:c.current_students||c.students||0,createdAt:c.created_at||c.createdAt||new Date().toISOString(),updatedAt:c.updated_at||c.updatedAt||new Date().toISOString(),subscription:c.subscription||"Basic",staff:c.staff||0,lastActive:c.last_active||c.lastActive||"Never"}}catch(o){throw o}}async createSchool(t){try{const r=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw r}}async updateSchool(t,r){try{const n=await fetch(`${this.baseUrl}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch(n){throw n}}async deleteSchool(t){try{const r=await fetch(`${this.baseUrl}/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`)}catch(r){throw r}}async toggleSchoolStatus(t){try{const r=await fetch(`${this.baseUrl}/${t}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw r}}async getDashboardStats(){try{const t=await fetch(`${this.baseUrl}/stats`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();return r.data||r}catch{return{totalUsers:1247,totalSchools:89,activeSubscriptions:76,revenue:45600,pendingApprovals:12,activeUsers:1189,inactiveUsers:58,premiumSchools:23}}}}const Jc=new Kee;class Yee{constructor(){Wx(this,"baseUrl",It.STAFF)}async getAllStaff(){try{const t=await fetch(this.baseUrl,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();return r.data||r}catch(t){throw t}}async addStaff(t){try{const r=await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw r}}async updateStaff(t,r){try{const n=await fetch(`${this.baseUrl}${t}/`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch(n){throw n}}async deleteStaff(t){try{const r=await fetch(`${this.baseUrl}${t}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`)}catch(r){throw r}}async getStaffById(t){try{const r=await fetch(`${this.baseUrl}${t}/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw r}}}const TR=new Yee,Jee=()=>{const e=Sa(),t=er(),{toast:r}=Ar(),{invoices:n}=Ct(p=>p.invoices),{subscriptions:a}=Ct(p=>p.schoolSubscriptions),[i,o]=g.useState({totalUsers:0,totalSchools:0,activeSubscriptions:0,revenue:0,pendingApprovals:0,activeUsers:0,inactiveUsers:0,premiumSchools:0,activeSchools:0,inactiveSchools:0}),[l,c]=g.useState(!0);g.useEffect(()=>{(async()=>{c(!0);try{await Promise.all([t(ru()),t(bl())]);const[f,y]=await Promise.all([Jc.getAllSchools(),TR.getAllStaff()]),x=n.reduce((D,R)=>D+parseFloat(R.amount_due||"0"),0),w=n.filter(D=>D.status==="paid"),v=n.filter(D=>D.status==="pending"),b=y.length,N=f.reduce((D,R)=>D+(R.currentStudents||0),0),C=b+N,P={totalSchools:f.length,activeSchools:f.filter(D=>D.isActive).length,inactiveSchools:f.filter(D=>!D.isActive).length,premiumSchools:a.filter(D=>D.status==="active").length,totalUsers:C,activeSubscriptions:a.filter(D=>D.status==="active").length,revenue:x,pendingApprovals:f.filter(D=>!D.isActive).length,activeUsers:C,inactiveUsers:0};o(P)}catch{o({totalUsers:1247,totalSchools:89,activeSubscriptions:76,revenue:45600,pendingApprovals:12,activeUsers:1189,inactiveUsers:58,premiumSchools:23,activeSchools:67,inactiveSchools:22})}finally{c(!1)}})()},[t]);const d=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p),u=()=>{try{const p=["Metric","Value","Description"],f=[["Total Users",i.totalUsers.toLocaleString(),"All registered users (staff + students)"],["Total Schools",i.totalSchools.toString(),"All registered schools"],["Active Subscriptions",i.activeSubscriptions.toString(),"Premium subscriptions"],["Total Revenue",d(i.revenue),"From all invoices"],["Pending Approvals",i.pendingApprovals.toString(),"Schools awaiting approval"],["Active Users",i.activeUsers.toLocaleString(),"Users active this month"],["Premium Schools",i.premiumSchools.toString(),"Schools with premium plans"],["Total Invoices",n.length.toString(),"All invoices"],["Paid Invoices",n.filter(x=>x.status==="paid").length.toString(),"Successfully paid"],["Pending Invoices",n.filter(x=>x.status==="pending").length.toString(),"Awaiting payment"],["School Subscriptions",a.length.toString(),"All subscriptions"]],y=kS({headers:p,rows:f,title:"Super Admin Dashboard Report",subtitle:`Generated on ${new Date().toLocaleDateString()}`});ud(y,`dashboard-report-${new Date().toISOString().split("T")[0]}.pdf`),r({title:"Dashboard Report Downloaded",description:"Dashboard report has been downloaded successfully."})}catch{r({title:"Error",description:"Failed to generate dashboard PDF. Please try again.",variant:"destructive"})}},h=({title:p,value:f,description:y,icon:x,trend:w,color:v="default"})=>s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:p}),s.jsx(x,{size:20,className:`${v==="success"?"text-green-600":v==="warning"?"text-yellow-600":v==="danger"?"text-red-600":"text-blue-600"}`})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:f}),y&&s.jsx("p",{className:"text-xs text-muted-foreground",children:y}),w&&s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsxs(Pe,{variant:w.isPositive?"default":"secondary",className:`text-xs ${w.isPositive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[w.isPositive?"+":"-",w.value,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"from last month"})]})]})]});return l?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(8)].map((p,f)=>s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})}),s.jsx(Te,{children:s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})})]},f))})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Super Admin Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Overview of all schools, users, and subscriptions"})]}),s.jsx(ce,{onClick:u,children:"Export Report"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(h,{title:"Total Users",value:i.totalUsers.toLocaleString(),description:"All registered users",icon:ns,trend:{value:12,isPositive:!0},color:"default"}),s.jsx(h,{title:"Total Schools",value:i.totalSchools,description:`${i.activeSchools} active, ${i.inactiveSchools} inactive`,icon:jr,trend:{value:8,isPositive:!0},color:"success"}),s.jsx(h,{title:"Active Subscriptions",value:i.activeSubscriptions,description:"Premium subscriptions",icon:Cn,trend:{value:5,isPositive:!0},color:"warning"}),s.jsx(h,{title:"Total Revenue",value:d(i.revenue),description:"From all invoices",icon:Vc,trend:{value:23,isPositive:!0},color:"success"})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(kn,{className:"h-5 w-5"}),"Revenue Overview"]}),s.jsx(ys,{children:"Invoice and revenue statistics from all schools"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ce,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/invoices"),children:"View All Invoices"}),s.jsx(ce,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/school-subscriptions"),children:"View Subscriptions"})]})]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Invoices"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.filter(p=>p.status==="paid").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Paid Invoices"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.filter(p=>p.status==="pending").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Invoices"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"School Subscriptions"})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Schools Overview"]}),s.jsx(ys,{children:"Real-time statistics from all registered schools"})]}),s.jsx(ce,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/schools"),children:"View All Schools"})]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.totalSchools}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Schools"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.activeSchools}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Schools"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.inactiveSchools}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Inactive Schools"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.premiumSchools}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Premium Schools"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(h,{title:"Active Users",value:i.activeUsers.toLocaleString(),description:"Users active this month",icon:Ht,color:"success"}),s.jsx(h,{title:"Pending Approvals",value:i.pendingApprovals,description:"Schools awaiting approval",icon:Nr,color:"warning"}),s.jsx(h,{title:"Premium Schools",value:i.premiumSchools,description:"Schools with premium plans",icon:Oi,color:"success"})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Quick Actions"}),s.jsx(ys,{children:"Common administrative tasks"})]}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs(ce,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/users"),children:[s.jsx(ns,{size:24}),s.jsx("span",{children:"Manage Users"})]}),s.jsxs(ce,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/schools"),children:[s.jsx(jr,{size:24}),s.jsx("span",{children:"Manage Schools"})]}),s.jsxs(ce,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/school-subscriptions"),children:[s.jsx(Cn,{size:24}),s.jsx("span",{children:"Subscriptions"})]}),s.jsxs(ce,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e("/super-admin/invoices"),children:[s.jsx(kn,{size:24}),s.jsx("span",{children:"Invoices"})]})]})})]})]})};class Zee{constructor(){Wx(this,"baseUrl",`${Bs}/all-users/`)}async getAllUsers(){try{const t=await fetch(this.baseUrl,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();return r.data||r}catch(t){throw console.error("Error fetching all users:",t),t}}async getUserById(t){try{const r=await fetch(`${this.baseUrl}${t}/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();return n.data||n}catch(r){throw console.error("Error fetching user by ID:",r),r}}async updateUser(t,r){try{const n=await fetch(`${this.baseUrl}${t}/`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.data||a}catch(n){throw console.error("Error updating user:",n),n}}async softDeleteUser(t){try{const r=await fetch(`${Bs}/delete-user/${t}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`)}catch(r){throw console.error("Error soft deleting user:",r),r}}async restoreUser(t){try{const r=await fetch(`${Bs}/restore-user/${t}/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`)}catch(r){throw console.error("Error restoring user:",r),r}}}const D0=new Zee,Xee=({user:e,isOpen:t,onClose:r})=>{if(!e)return null;const n=(l,c)=>c?s.jsx(Pe,{variant:"destructive",children:"Deleted"}):l?s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Active"}):s.jsx(Pe,{variant:"secondary",children:"Inactive"}),a=l=>{if(!l)return s.jsx(Pe,{className:"bg-gray-100 text-gray-800",children:"Unknown"});const c={staff:"bg-blue-100 text-blue-800",student:"bg-purple-100 text-purple-800",parent:"bg-green-100 text-green-800",admin:"bg-red-100 text-red-800"};return s.jsx(Pe,{className:c[l]||"bg-gray-100 text-gray-800",children:l.charAt(0).toUpperCase()+l.slice(1)})},i=l=>l?s.jsxs(Pe,{className:"bg-green-100 text-green-800",children:[s.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Verified"]}):s.jsxs(Pe,{variant:"secondary",children:[s.jsx(gd,{className:"w-3 h-3 mr-1"}),"Unverified"]}),o=l=>l?s.jsxs(Pe,{className:"bg-blue-100 text-blue-800",children:[s.jsx(wn,{className:"w-3 h-3 mr-1"}),"Enabled"]}):s.jsxs(Pe,{variant:"outline",children:[s.jsx(Nr,{className:"w-3 h-3 mr-1"}),"Disabled"]});return s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(ps,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsxs(xs,{className:"flex items-center gap-3",children:[s.jsx(ia,{className:"h-6 w-6"}),"User Details"]}),s.jsxs(bn,{children:["Complete information about ",e.first_name," ",e.last_name]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(ia,{className:"h-5 w-5"}),"Basic Information"]})}),s.jsx(Te,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),s.jsxs("p",{className:"text-lg font-semibold",children:[e.first_name," ",e.last_name]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"User Type"}),s.jsx("div",{className:"mt-1",children:a(e.user_type)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(va,{className:"h-4 w-4"}),e.email]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(Va,{className:"h-4 w-4"}),e.phone_number||"Not provided"]})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(wn,{className:"h-5 w-5"}),"Account Status"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),s.jsx("div",{className:"mt-1",children:n(e.is_active,e.is_deleted)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Verification"}),s.jsx("div",{className:"mt-1",children:i(e.account_verified)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"2FA"}),s.jsx("div",{className:"mt-1",children:o(e.two_factor_enabled)})]})]})})]}),(e.school||e.role)&&s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"School & Role Information"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.school&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"School"}),s.jsx("p",{className:"font-semibold",children:e.school.name}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(pr,{className:"h-3 w-3"}),e.school.location]})]}),e.role&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Role"}),s.jsx("p",{className:"font-semibold",children:e.role.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.role.description})]})]})})]}),(e.staff_profile||e.student_profile||e.parent_profile)&&s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsx(Ue,{children:"Profile Information"})}),s.jsxs(Te,{children:[e.staff_profile&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Employee ID:"}),s.jsx("span",{children:e.staff_profile.employee_id})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(Pe,{variant:e.staff_profile.status==="active"?"default":"secondary",children:e.staff_profile.status})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"On Duty:"}),s.jsx(Pe,{variant:e.staff_profile.is_on_duty?"default":"secondary",children:e.staff_profile.is_on_duty?"Yes":"No"})]})]}),e.student_profile&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Student ID:"}),s.jsx("span",{children:e.student_profile.student_id})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Grade:"}),s.jsx("span",{children:e.student_profile.grade})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(Pe,{variant:e.student_profile.status==="active"?"default":"secondary",children:e.student_profile.status})]})]}),e.parent_profile&&s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(Pe,{variant:e.parent_profile.status==="active"?"default":"secondary",children:e.parent_profile.status})]})})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(ar,{className:"h-5 w-5"}),"Activity Information"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date Joined"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(on,{className:"h-4 w-4"}),new Date(e.date_joined).toLocaleDateString()]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Login"}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(ar,{className:"h-4 w-4"}),e.last_login?new Date(e.last_login).toLocaleString():"Never"]})]}),e.last_login_ip&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Login IP"}),s.jsx("p",{className:"font-mono text-sm",children:e.last_login_ip})]}),e.failed_login_attempts>0&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Failed Login Attempts"}),s.jsx("p",{className:"text-red-600 font-semibold",children:e.failed_login_attempts})]})]})})]})]})]})})},Qee=({user:e,isOpen:t,onClose:r,onUserUpdated:n})=>{const{toast:a}=Ar(),[i,o]=g.useState(!1),[l,c]=g.useState({first_name:"",last_name:"",email:"",phone_number:"",account_verified:!1,two_factor_enabled:!1,is_active:!0});g.useEffect(()=>{e&&c({first_name:e.first_name,last_name:e.last_name,email:e.email,phone_number:e.phone_number,account_verified:e.account_verified,two_factor_enabled:e.two_factor_enabled,is_active:e.is_active})},[e]);const d=(p,f)=>{c(y=>({...y,[p]:f}))},u=async p=>{if(p.preventDefault(),!!e){o(!0);try{const f=await D0.updateUser(e.id,l);n(f),a({title:"User Updated",description:"User information has been updated successfully."}),r()}catch{a({title:"Error",description:"Failed to update user. Please try again.",variant:"destructive"})}finally{o(!1)}}},h=()=>{i||r()};return e?s.jsx(js,{open:t,onOpenChange:h,children:s.jsxs(ps,{className:"max-w-2xl",children:[s.jsxs(bs,{children:[s.jsx(xs,{children:"Edit User"}),s.jsxs(bn,{children:["Update information for ",e.first_name," ",e.last_name]})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"first_name",children:"First Name"}),s.jsx(Ie,{id:"first_name",value:l.first_name,onChange:p=>d("first_name",p.target.value),required:!0,disabled:i})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"last_name",children:"Last Name"}),s.jsx(Ie,{id:"last_name",value:l.last_name,onChange:p=>d("last_name",p.target.value),required:!0,disabled:i})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"email",children:"Email"}),s.jsx(Ie,{id:"email",type:"email",value:l.email,onChange:p=>d("email",p.target.value),required:!0,disabled:i})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"phone_number",children:"Phone Number"}),s.jsx(Ie,{id:"phone_number",value:l.phone_number,onChange:p=>d("phone_number",p.target.value),disabled:i})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{htmlFor:"account_verified",children:"Account Verified"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark this user's account as verified"})]}),s.jsx(Us,{id:"account_verified",checked:l.account_verified,onCheckedChange:p=>d("account_verified",p),disabled:i})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{htmlFor:"two_factor_enabled",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable 2FA for this user"})]}),s.jsx(Us,{id:"two_factor_enabled",checked:l.two_factor_enabled,onCheckedChange:p=>d("two_factor_enabled",p),disabled:i})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{htmlFor:"is_active",children:"Account Active"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable this user's account"})]}),s.jsx(Us,{id:"is_active",checked:l.is_active,onCheckedChange:p=>d("is_active",p),disabled:i})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsxs(ce,{type:"button",variant:"outline",onClick:h,disabled:i,children:[s.jsx(co,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(ce,{type:"submit",disabled:i,children:[i?s.jsx(ba,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(ih,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})}):null},ete=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[a,i]=g.useState(""),[o,l]=g.useState("all"),[c,d]=g.useState("all"),[u,h]=g.useState(null),[p,f]=g.useState(!1),[y,x]=g.useState(!1),[w,v]=g.useState(!1),[b,N]=g.useState(null),{toast:C}=Ar();g.useEffect(()=>{(async()=>{n(!0);try{const re=await D0.getAllUsers();t(re)}catch{C({title:"Error",description:"Failed to fetch users. Please try again.",variant:"destructive"})}finally{n(!1)}})()},[C]);const P=e.filter(K=>{var q;const pe=`${K.first_name||""} ${K.last_name||""}`.toLowerCase().includes(a.toLowerCase())||K.email&&K.email.toLowerCase().includes(a.toLowerCase())||((q=K.school)==null?void 0:q.name)&&K.school.name.toLowerCase().includes(a.toLowerCase()),Q=o==="all"||K.user_type===o,J=c==="all"||c==="active"&&K.is_active&&!K.is_deleted||c==="inactive"&&!K.is_active&&!K.is_deleted||c==="deleted"&&K.is_deleted;return pe&&Q&&J}),D=K=>K.is_deleted?s.jsx(Pe,{variant:"destructive",children:"Deleted"}):K.is_active?s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Active"}):s.jsx(Pe,{variant:"secondary",children:"Inactive"}),R=K=>{if(!K)return s.jsx(Pe,{className:"bg-gray-100 text-gray-800",children:"Unknown"});const re={staff:"bg-blue-100 text-blue-800",student:"bg-purple-100 text-purple-800",parent:"bg-green-100 text-green-800",admin:"bg-red-100 text-red-800"};return s.jsx(Pe,{className:re[K]||"bg-gray-100 text-gray-800",children:K.charAt(0).toUpperCase()+K.slice(1)})},A=K=>{h(K),f(!0)},I=K=>{h(K),x(!0)},O=K=>{N(K),v(!0)},F=async()=>{if(b)try{await D0.softDeleteUser(b.id),t(e.map(K=>K.id===b.id?{...K,is_deleted:!0,is_active:!1}:K)),C({title:"User Deleted",description:"User has been soft deleted successfully."})}catch{C({title:"Error",description:"Failed to delete user. Please try again.",variant:"destructive"})}finally{v(!1),N(null)}},E=async K=>{try{await D0.restoreUser(K.id),t(e.map(re=>re.id===K.id?{...re,is_deleted:!1,is_active:!0}:re)),C({title:"User Restored",description:"User has been restored successfully."})}catch{C({title:"Error",description:"Failed to restore user. Please try again.",variant:"destructive"})}},$=K=>{t(e.map(re=>re.id===K.id?K:re))},U=()=>{i(""),l("all"),d("all")};return r?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((K,re)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},re))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage all users across all schools"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{variant:"outline",children:[s.jsx(Un,{size:16,className:"mr-2"}),"Export"]}),s.jsxs(ce,{children:[s.jsx(gq,{size:16,className:"mr-2"}),"Add User"]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Filters"}),s.jsx(ys,{children:"Filter users by various criteria"})]}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Jr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ie,{placeholder:"Search users...",value:a,onChange:K=>i(K.target.value),className:"pl-10"})]}),s.jsxs(Gt,{value:o,onValueChange:l,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Filter by user type"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Types"}),s.jsx(Ee,{value:"staff",children:"Staff"}),s.jsx(Ee,{value:"student",children:"Student"}),s.jsx(Ee,{value:"parent",children:"Parent"}),s.jsx(Ee,{value:"admin",children:"Admin"})]})]}),s.jsxs(Gt,{value:c,onValueChange:d,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Filter by status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Status"}),s.jsx(Ee,{value:"active",children:"Active"}),s.jsx(Ee,{value:"inactive",children:"Inactive"}),s.jsx(Ee,{value:"deleted",children:"Deleted"})]})]}),s.jsxs(ce,{variant:"outline",className:"flex items-center gap-2",onClick:U,children:[s.jsx(Ul,{size:16}),"Clear Filters"]})]})})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsxs(Ue,{children:["Users (",P.length,")"]}),s.jsx(ys,{children:"All registered users in the system"})]}),s.jsx(Te,{children:s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"Name"}),s.jsx(ut,{children:"Email"}),s.jsx(ut,{children:"User Type"}),s.jsx(ut,{children:"School"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Last Login"}),s.jsx(ut,{children:"Created"}),s.jsx(ut,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:P.map(K=>{var re;return s.jsxs(Js,{children:[s.jsx(ct,{className:"font-medium",children:`${K.first_name||""} ${K.last_name||""}`.trim()||"Unknown User"}),s.jsx(ct,{children:K.email||"N/A"}),s.jsx(ct,{children:R(K.user_type)}),s.jsx(ct,{children:((re=K.school)==null?void 0:re.name)||"N/A"}),s.jsx(ct,{children:D(K)}),s.jsx(ct,{children:K.last_login?new Date(K.last_login).toLocaleString():"Never"}),s.jsx(ct,{children:K.date_joined?new Date(K.date_joined).toLocaleDateString():"N/A"}),s.jsx(ct,{className:"text-right",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(ho,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsx(yd,{children:"Actions"}),s.jsxs(Jt,{onClick:()=>A(K),children:[s.jsx(ir,{className:"mr-2 h-4 w-4"}),"View Details"]}),!K.is_deleted&&s.jsxs(Jt,{onClick:()=>I(K),children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Edit User"]}),s.jsx(nd,{}),K.is_deleted?s.jsxs(Jt,{className:"text-green-600",onClick:()=>E(K),children:[s.jsx(hq,{className:"mr-2 h-4 w-4"}),"Restore User"]}):s.jsxs(Jt,{className:"text-red-600",onClick:()=>O(K),children:[s.jsx(Ha,{className:"mr-2 h-4 w-4"}),"Delete User"]})]})]})})]},K.id)})})]})})]}),s.jsx(Xee,{user:u,isOpen:p,onClose:()=>{f(!1),h(null)}}),s.jsx(Qee,{user:u,isOpen:y,onClose:()=>{x(!1),h(null)},onUserUpdated:$}),s.jsx(ad,{open:w,onOpenChange:v,children:s.jsxs(Ll,{children:[s.jsxs(Tl,{children:[s.jsx(Il,{children:"Delete User"}),s.jsxs(Fl,{children:["Are you sure you want to delete ",(b==null?void 0:b.first_name)||""," ",(b==null?void 0:b.last_name)||"","? This action will soft delete the user and can be reversed later."]})]}),s.jsxs(Rl,{children:[s.jsx(Ol,{children:"Cancel"}),s.jsx(Dl,{onClick:F,className:"bg-red-600 hover:bg-red-700",children:"Delete User"})]})]})})]})},tte=()=>{const e=Sa(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[i,o]=g.useState(""),[l,c]=g.useState("all"),[d,u]=g.useState("all");g.useEffect(()=>{(async()=>{a(!0);try{const w=await Jc.getAllSchools();Array.isArray(w)&&w.length>0?r(w):r([{_id:"1",name:"Springfield High School",address:"123 Main St, Springfield, IL",phone:"+1-555-0123",email:"info@springfield.edu",principal:{name:"John Doe",phone:"+1-555-0124",email:"john.doe@springfield.edu"},isActive:!0,location:"Springfield, IL",type:"secondary",capacity:1500,currentStudents:1250,createdAt:"2023-09-15T00:00:00.000Z",updatedAt:"2024-01-15T10:30:00.000Z",subscription:"Premium",staff:85,lastActive:"2024-01-15 10:30 AM"},{_id:"2",name:"Lincoln Elementary",address:"456 Oak Ave, Lincoln, NE",phone:"+1-555-0125",email:"info@lincoln.edu",principal:{name:"Jane Smith",phone:"+1-555-0126",email:"jane.smith@lincoln.edu"},isActive:!0,location:"Lincoln, NE",type:"primary",capacity:500,currentStudents:450,createdAt:"2023-10-20T00:00:00.000Z",updatedAt:"2024-01-14T14:15:00.000Z",subscription:"Basic",staff:32,lastActive:"2024-01-14 02:15 PM"}])}catch{r([{_id:"1",name:"Springfield High School",address:"123 Main St, Springfield, IL",phone:"+1-555-0123",email:"info@springfield.edu",principal:{name:"John Doe",phone:"+1-555-0124",email:"john.doe@springfield.edu"},isActive:!0,location:"Springfield, IL",type:"secondary",capacity:1500,currentStudents:1250,createdAt:"2023-09-15T00:00:00.000Z",updatedAt:"2024-01-15T10:30:00.000Z",subscription:"Premium",staff:85,lastActive:"2024-01-15 10:30 AM"},{_id:"2",name:"Lincoln Elementary",address:"456 Oak Ave, Lincoln, NE",phone:"+1-555-0125",email:"info@lincoln.edu",principal:{name:"Jane Smith",phone:"+1-555-0126",email:"jane.smith@lincoln.edu"},isActive:!0,location:"Lincoln, NE",type:"primary",capacity:500,currentStudents:450,createdAt:"2023-10-20T00:00:00.000Z",updatedAt:"2024-01-14T14:15:00.000Z",subscription:"Basic",staff:32,lastActive:"2024-01-14 02:15 PM"}])}finally{a(!1)}})()},[]);const h=t.filter(x=>{var N;if(!x||!x.name)return!1;const w=(x.name||"").toLowerCase().includes(i.toLowerCase())||(((N=x.principal)==null?void 0:N.name)||"").toLowerCase().includes(i.toLowerCase())||(x.location||"").toLowerCase().includes(i.toLowerCase()),v=l==="all"||l==="active"&&(x.isActive||!1)||l==="inactive"&&!x.isActive||l==="pending"&&!x.isActive||l==="suspended"&&!x.isActive,b=d==="all"||(x.subscription||"Basic")===d;return w&&v&&b}),p=x=>x?s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Active"}):s.jsx(Pe,{className:"bg-red-100 text-red-800",children:"Inactive"}),f=x=>{switch(x){case"Premium":return s.jsx(Pe,{className:"bg-purple-100 text-purple-800",children:"Premium"});case"Basic":return s.jsx(Pe,{className:"bg-blue-100 text-blue-800",children:"Basic"});default:return s.jsx(Pe,{variant:"outline",children:x})}},y=async x=>{try{await Jc.toggleSchoolStatus(x);const w=await Jc.getAllSchools();r(w)}catch{}};return n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((x,w)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},w))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Schools Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage all registered schools and their subscriptions"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{variant:"outline",children:[s.jsx(Un,{size:16,className:"mr-2"}),"Export"]}),s.jsxs(ce,{children:[s.jsx(jr,{size:16,className:"mr-2"}),"Add School"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Schools"}),s.jsx(jr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last month"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Active Schools"}),s.jsx(Ht,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(x=>x.isActive).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Inactive Schools"}),s.jsx(ar,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(x=>!x.isActive).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently inactive"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Premium Schools"}),s.jsx(Pe,{className:"bg-purple-100 text-purple-800",children:"Premium"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(x=>x.subscription==="Premium").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Premium subscriptions"})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Filters"}),s.jsx(ys,{children:"Filter schools by various criteria"})]}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Jr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ie,{placeholder:"Search schools...",value:i,onChange:x=>o(x.target.value),className:"pl-10"})]}),s.jsxs(Gt,{value:l,onValueChange:c,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Filter by status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Status"}),s.jsx(Ee,{value:"active",children:"Active"}),s.jsx(Ee,{value:"inactive",children:"Inactive"}),s.jsx(Ee,{value:"pending",children:"Pending"}),s.jsx(Ee,{value:"suspended",children:"Suspended"})]})]}),s.jsxs(Gt,{value:d,onValueChange:u,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Filter by subscription"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Subscriptions"}),s.jsx(Ee,{value:"Premium",children:"Premium"}),s.jsx(Ee,{value:"Basic",children:"Basic"})]})]}),s.jsxs(ce,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Ul,{size:16}),"Clear Filters"]})]})})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsxs(Ue,{children:["Schools (",h.length,")"]}),s.jsx(ys,{children:"All registered schools in the system"})]}),s.jsx(Te,{children:h.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(jr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Schools Found"}),s.jsx("p",{className:"text-muted-foreground",children:t.length===0?"No schools are currently registered in the system.":"No schools match your current filters."})]}):s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"School Name"}),s.jsx(ut,{children:"Principal"}),s.jsx(ut,{children:"Location"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Subscription"}),s.jsx(ut,{children:"Students"}),s.jsx(ut,{children:"Staff"}),s.jsx(ut,{children:"Last Active"}),s.jsx(ut,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:h.map(x=>{var w,v,b;return s.jsxs(Js,{children:[s.jsx(ct,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:x.name||"Unknown School"}),s.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>e(`/super-admin/schools/${x._id}`),className:"h-6 w-6 p-0",children:s.jsx(ir,{className:"h-3 w-3"})})]})}),s.jsx(ct,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:((w=x.principal)==null?void 0:w.name)||"N/A"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:((v=x.principal)==null?void 0:v.email)||"N/A"})]})}),s.jsx(ct,{children:x.location||"N/A"}),s.jsx(ct,{children:p(x.isActive||!1)}),s.jsx(ct,{children:f(x.subscription||"Basic")}),s.jsx(ct,{children:(x.currentStudents||0).toLocaleString()}),s.jsx(ct,{children:((b=x.staff)==null?void 0:b.toLocaleString())||"N/A"}),s.jsx(ct,{children:x.lastActive||"Never"}),s.jsx(ct,{className:"text-right",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(ho,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsx(yd,{children:"Actions"}),s.jsxs(Jt,{onClick:()=>e(`/super-admin/schools/${x._id}`),children:[s.jsx(ir,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Jt,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Edit School"]}),s.jsx(Jt,{onClick:()=>y(x._id),children:x.isActive?s.jsxs(s.Fragment,{children:[s.jsx(gd,{className:"mr-2 h-4 w-4"}),"Deactivate School"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ht,{className:"mr-2 h-4 w-4"}),"Activate School"]})}),s.jsx(nd,{}),s.jsxs(Jt,{className:"text-red-600",children:[s.jsx(Ha,{className:"mr-2 h-4 w-4"}),"Delete School"]})]})]})})]},x._id)})})]})})]})]})},ste=()=>{var p;const{id:e}=XO(),t=Sa(),[r,n]=g.useState(null),[a,i]=g.useState(!0),[o,l]=g.useState(null);g.useEffect(()=>{(async()=>{if(e){i(!0);try{const y=await Jc.getSchoolById(e);n(y),l(null)}catch{l("Failed to load school details")}finally{i(!1)}}})()},[e]);const c=async()=>{if(r)try{await Jc.toggleSchoolStatus(r._id);const f=await Jc.getSchoolById(r._id);n(f)}catch{}},d=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),u=f=>f?s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Active"}):s.jsx(Pe,{className:"bg-red-100 text-red-800",children:"Inactive"}),h=f=>{switch(f){case"Premium":return s.jsx(Pe,{className:"bg-purple-100 text-purple-800",children:"Premium"});case"Basic":return s.jsx(Pe,{className:"bg-blue-100 text-blue-800",children:"Basic"});default:return s.jsx(Pe,{variant:"outline",children:f})}};return a?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(4)].map((f,y)=>s.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},y))})]})}):o||!r?s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center gap-4 mb-6",children:s.jsxs(ce,{variant:"outline",onClick:()=>t(-1),children:[s.jsx(pv,{className:"mr-2 h-4 w-4"}),"Back"]})}),s.jsx(Le,{children:s.jsx(Te,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Nr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"School Not Found"}),s.jsx("p",{className:"text-muted-foreground",children:o||"The requested school could not be found."})]})})})]}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(ce,{variant:"outline",onClick:()=>t(-1),children:[s.jsx(pv,{className:"mr-2 h-4 w-4"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:r.name}),s.jsx("p",{className:"text-muted-foreground",children:"School Details"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{variant:"outline",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Edit School"]}),s.jsx(ce,{variant:r.isActive?"destructive":"default",onClick:c,children:r.isActive?s.jsxs(s.Fragment,{children:[s.jsx(gd,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ht,{className:"mr-2 h-4 w-4"}),"Activate"]})})]})]}),s.jsxs("div",{className:"flex gap-4",children:[u(r.isActive),h(r.subscription||"Basic")]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"School Information"]})}),s.jsx(Te,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"School Name"}),s.jsx("p",{className:"text-lg font-semibold",children:r.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"School Type"}),s.jsx("p",{className:"text-lg capitalize",children:r.type})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),s.jsx("p",{className:"text-lg",children:r.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),s.jsx("p",{className:"text-lg",children:r.location})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),s.jsx("p",{className:"text-lg",children:r.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),s.jsx("p",{className:"text-lg",children:r.email})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(ia,{className:"h-5 w-5"}),"Principal Information"]})}),s.jsx(Te,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Principal Name"}),s.jsx("p",{className:"text-lg font-semibold",children:r.principal.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Principal Phone"}),s.jsx("p",{className:"text-lg",children:r.principal.phone})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Principal Email"}),s.jsx("p",{className:"text-lg",children:r.principal.email})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center gap-2",children:[s.jsx(Oi,{className:"h-5 w-5"}),"School Statistics"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.capacity.toLocaleString()}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Capacity"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.currentStudents.toLocaleString()}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Students"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((p=r.staff)==null?void 0:p.toLocaleString())||"N/A"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Staff Members"})]})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsx(Ue,{children:"Quick Actions"})}),s.jsxs(Te,{className:"space-y-2",children:[s.jsxs(ce,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Edit School"]}),s.jsxs(ce,{variant:"outline",className:"w-full justify-start",children:[s.jsx(ns,{className:"mr-2 h-4 w-4"}),"View Students"]}),s.jsxs(ce,{variant:"outline",className:"w-full justify-start",children:[s.jsx(ia,{className:"mr-2 h-4 w-4"}),"View Staff"]}),s.jsxs(ce,{variant:"outline",className:"w-full justify-start",children:[s.jsx(jr,{className:"mr-2 h-4 w-4"}),"Manage Routes"]})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsx(Ue,{children:"Timeline"})}),s.jsxs(Te,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"School Created"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d(r.createdAt)})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Last Updated"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d(r.updatedAt)})]})]}),r.lastActive&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Last Active"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r.lastActive})]})]})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsx(Ue,{children:"Contact Information"})}),s.jsxs(Te,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Va,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:r.phone})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(va,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:r.email})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:r.address})]})]})]})]})]})]})},Cg={async getSubscriptionPlans(){try{return(await $t.get("/subscription-plans/")).data}catch(e){throw e}},async createSubscriptionPlan(e){try{return(await $t.post("/subscription-plans/",e)).data}catch(t){throw t}},async updateSubscriptionPlan(e,t){try{return(await $t.put(`/subscription-plans/${e}/`,t)).data}catch(r){throw r}},async deleteSubscriptionPlan(e){try{await $t.delete(`/subscription-plans/${e}/`)}catch(t){throw t}},async getSubscriptionPlan(e){try{return(await $t.get(`/subscription-plans/${e}/`)).data}catch(t){throw t}}},ZC=[{value:"monthly",label:"Monthly"},{value:"annually",label:"Annually"},{value:"quarterly",label:"Quarterly"}],rte=()=>{const{toast:e}=Ar(),[t,r]=g.useState([]),[n,a]=g.useState([]),[i,o]=g.useState(!0),[l,c]=g.useState("plans"),[d,u]=g.useState(!1),[h,p]=g.useState(!1),[f,y]=g.useState(!1),[x,w]=g.useState(!1),[v,b]=g.useState(!1),[N,C]=g.useState(null),[P,D]=g.useState(null),[R,A]=g.useState(null),[I,O]=g.useState(!1),[F,E]=g.useState(!1),[$,U]=g.useState(!1),[K,re]=g.useState(null),[pe,Q]=g.useState(null),[J,q]=g.useState(null),[Y,k]=g.useState({name:"",description:"",base_price:"",price_per_student:"",price_per_bus:"",default_billing_cycle:"monthly",is_active:!0,features:{max_students:100,max_parents:100,max_buses:5,sms_notifications:!1,whatsapp_integration:!1,realtime_tracking:!1,parent_app_access:!1,basic_reports:!1,driver_management:!1,route_optimization:!1,advanced_analytics:!1,api_access:!1,geofencing:!1,speed_monitoring:!1,fuel_tracking:!1,maintenance_tracking:!1,custom_integrations:!1,priority_support:!1}});g.useEffect(()=>{L(),M()},[]);const L=async()=>{try{o(!0);const me=await Cg.getSubscriptionPlans(),xe=Array.isArray(me)?me:(me==null?void 0:me.results)||(me==null?void 0:me.data)||[];r(xe||[]),xe&&xe.length>0&&e({title:"Success",description:"Subscription plans loaded successfully!"})}catch{e({title:"Error",description:"Failed to load subscription plans. Using mock data.",variant:"destructive"}),r([{id:"1",name:"premium_school",description:"Comprehensive solution for large schools with advanced requirements. Full API access, fuel tracking, and priority support.",base_price:"10000.00",price_per_student:"12.00",price_per_bus:"500.00",features_json:{max_students:1e3,max_parents:1e3,max_buses:15,sms_notifications:!0,whatsapp_integration:!0,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!0,advanced_analytics:!0,api_access:!0,geofencing:!0,speed_monitoring:!0,fuel_tracking:!0,maintenance_tracking:!0,custom_integrations:!0,priority_support:!0},is_active:!0,default_billing_cycle:"annually"},{id:"2",name:"basic_school",description:"Essential features for small to medium schools. Basic tracking and reporting capabilities.",base_price:"5000.00",price_per_student:"8.00",price_per_bus:"300.00",features_json:{max_students:500,max_parents:500,max_buses:8,sms_notifications:!0,whatsapp_integration:!1,realtime_tracking:!0,parent_app_access:!0,basic_reports:!0,driver_management:!0,route_optimization:!1,advanced_analytics:!1,api_access:!1,geofencing:!1,speed_monitoring:!1,fuel_tracking:!1,maintenance_tracking:!1,custom_integrations:!1,priority_support:!1},is_active:!0,default_billing_cycle:"monthly"}])}finally{o(!1)}},M=async()=>{a([{id:"1",schoolName:"Springfield High School",plan:"premium_school",status:"active",amount:299.99,billingCycle:"Monthly",nextBilling:"2024-02-15",startDate:"2023-09-15",endDate:"2024-09-15",features:["Unlimited Students","Advanced Analytics","Priority Support"],paymentMethod:"Credit Card",lastPayment:"2024-01-15"},{id:"2",schoolName:"Lincoln Elementary",plan:"basic_school",status:"active",amount:99.99,billingCycle:"Monthly",nextBilling:"2024-02-20",startDate:"2023-10-20",endDate:"2024-10-20",features:["Up to 500 Students","Basic Analytics"],paymentMethod:"Credit Card",lastPayment:"2024-01-20"}]),o(!1)},W=async()=>{try{p(!0),await Cg.createSubscriptionPlan({...Y,features_json:Y.features}),u(!1),L(),e({title:"Success",description:"Subscription plan created successfully!"}),k({name:"",description:"",base_price:"",price_per_student:"",price_per_bus:"",default_billing_cycle:"monthly",is_active:!0,features:{max_students:100,max_parents:100,max_buses:5,sms_notifications:!1,whatsapp_integration:!1,realtime_tracking:!1,parent_app_access:!1,basic_reports:!1,driver_management:!1,route_optimization:!1,advanced_analytics:!1,api_access:!1,geofencing:!1,speed_monitoring:!1,fuel_tracking:!1,maintenance_tracking:!1,custom_integrations:!1,priority_support:!1}})}catch{e({title:"Error",description:"Failed to create subscription plan. Please try again.",variant:"destructive"})}finally{p(!1)}},se=me=>{C(me),y(!0)},ae=me=>{D(me),w(!0)},ge=async()=>{if(N)try{p(!0),await Cg.updateSubscriptionPlan(N.id,{name:N.name,description:N.description,base_price:N.base_price,price_per_student:N.price_per_student,price_per_bus:N.price_per_bus,features_json:N.features_json,is_active:N.is_active,default_billing_cycle:N.default_billing_cycle}),y(!1),C(null),L(),e({title:"Success",description:"Subscription plan updated successfully!"})}catch{e({title:"Error",description:"Failed to update subscription plan. Please try again.",variant:"destructive"})}finally{p(!1)}},fe=async me=>{try{b(!0),await Cg.deleteSubscriptionPlan(me),A(null),L(),e({title:"Success",description:"Subscription plan deleted successfully!"})}catch{e({title:"Error",description:"Failed to delete subscription plan. Please try again.",variant:"destructive"})}finally{b(!1)}},Me=me=>{re(me),O(!0)},de=me=>{Q(me),E(!0)},$e=async()=>{if(K)try{p(!0),a(me=>me.map(xe=>xe.id===K.id?K:xe)),O(!1),re(null),e({title:"Success",description:"School subscription updated successfully!"})}catch{e({title:"Error",description:"Failed to update school subscription. Please try again.",variant:"destructive"})}finally{p(!1)}},Ye=async me=>{try{U(!0),a(xe=>xe.filter(ee=>ee.id!==me)),q(null),e({title:"Success",description:"School subscription deleted successfully!"})}catch{e({title:"Error",description:"Failed to delete school subscription. Please try again.",variant:"destructive"})}finally{U(!1)}},mt=async me=>{try{p(!0),a(xe=>xe.map(ee=>ee.id===me?{...ee,status:"cancelled"}:ee)),e({title:"Success",description:"School subscription cancelled successfully!"})}catch{e({title:"Error",description:"Failed to cancel school subscription. Please try again.",variant:"destructive"})}finally{p(!1)}},Se=me=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(me)),oe=me=>{switch(me){case"active":return s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Active"});case"expired":return s.jsx(Pe,{className:"bg-red-100 text-red-800",children:"Expired"});case"cancelled":return s.jsx(Pe,{variant:"secondary",children:"Cancelled"});case"pending":return s.jsx(Pe,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});default:return s.jsx(Pe,{variant:"outline",children:me})}},vt=me=>{switch(me){case"premium_school":return s.jsx(Pe,{className:"bg-purple-100 text-purple-800",children:"Premium"});case"basic_school":return s.jsx(Pe,{className:"bg-blue-100 text-blue-800",children:"Basic"});default:return s.jsx(Pe,{variant:"outline",children:me})}};return i?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((me,xe)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},xe))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subscriptions Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage subscription plans and school subscriptions"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{variant:"outline",children:[s.jsx(Un,{size:16,className:"mr-2"}),"Export"]}),s.jsxs(js,{open:d,onOpenChange:u,children:[s.jsx(mu,{asChild:!0,children:s.jsxs(ce,{children:[s.jsx(ja,{size:16,className:"mr-2"}),"Create Plan"]})}),s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsx(xs,{children:"Create New Subscription Plan"}),s.jsx(bn,{children:"Define a new subscription plan with features and pricing"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"planName",children:"Plan Name"}),s.jsx(Ie,{id:"planName",value:Y.name,onChange:me=>k(xe=>({...xe,name:me.target.value})),placeholder:"e.g., premium_school"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"billingCycle",children:"Default Billing Cycle"}),s.jsxs(Gt,{value:Y.default_billing_cycle,onValueChange:me=>k(xe=>({...xe,default_billing_cycle:me})),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsx(Ut,{children:ZC.map(me=>s.jsx(Ee,{value:me.value,children:me.label},me.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"basePrice",children:"Base Price"}),s.jsx(Ie,{id:"basePrice",type:"number",value:Y.base_price,onChange:me=>k(xe=>({...xe,base_price:me.target.value})),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"pricePerStudent",children:"Price per Student"}),s.jsx(Ie,{id:"pricePerStudent",type:"number",value:Y.price_per_student,onChange:me=>k(xe=>({...xe,price_per_student:me.target.value})),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"pricePerBus",children:"Price per Bus"}),s.jsx(Ie,{id:"pricePerBus",type:"number",value:Y.price_per_bus,onChange:me=>k(xe=>({...xe,price_per_bus:me.target.value})),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"maxStudents",children:"Max Students"}),s.jsx(Ie,{id:"maxStudents",type:"number",value:Y.features.max_students,onChange:me=>k(xe=>({...xe,features:{...xe.features,max_students:parseInt(me.target.value)}}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"description",children:"Description"}),s.jsx(oa,{id:"description",value:Y.description,onChange:me=>k(xe=>({...xe,description:me.target.value})),rows:3})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(ne,{children:"Features"}),s.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg p-4",children:s.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(Y.features).map(([me,xe])=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Us,{checked:typeof xe=="boolean"?xe:!1,onCheckedChange:ee=>k(ue=>({...ue,features:{...ue.features,[me]:ee}}))}),s.jsx(ne,{className:"text-sm capitalize",children:me.replace(/_/g," ")})]},me))})})]}),s.jsxs(so,{children:[s.jsx(ce,{variant:"outline",onClick:()=>u(!1),disabled:h,children:"Cancel"}),s.jsx(ce,{onClick:W,disabled:h,children:h?"Creating...":"Create Plan"})]})]})]}),s.jsx(js,{open:f,onOpenChange:y,children:s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsx(xs,{children:"Edit Subscription Plan"}),s.jsx(bn,{children:"Update the subscription plan details and features"})]}),N&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editPlanName",children:"Plan Name"}),s.jsx(Ie,{id:"editPlanName",value:N.name,onChange:me=>C(xe=>xe?{...xe,name:me.target.value}:null),placeholder:"e.g., premium_school"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editBillingCycle",children:"Default Billing Cycle"}),s.jsxs(Gt,{value:N.default_billing_cycle,onValueChange:me=>C(xe=>xe?{...xe,default_billing_cycle:me}:null),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsx(Ut,{children:ZC.map(me=>s.jsx(Ee,{value:me.value,children:me.label},me.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editBasePrice",children:"Base Price"}),s.jsx(Ie,{id:"editBasePrice",type:"number",value:N.base_price,onChange:me=>C(xe=>xe?{...xe,base_price:me.target.value}:null),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editPricePerStudent",children:"Price per Student"}),s.jsx(Ie,{id:"editPricePerStudent",type:"number",value:N.price_per_student,onChange:me=>C(xe=>xe?{...xe,price_per_student:me.target.value}:null),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editPricePerBus",children:"Price per Bus"}),s.jsx(Ie,{id:"editPricePerBus",type:"number",value:N.price_per_bus,onChange:me=>C(xe=>xe?{...xe,price_per_bus:me.target.value}:null),placeholder:"0.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editMaxStudents",children:"Max Students"}),s.jsx(Ie,{id:"editMaxStudents",type:"number",value:N.features_json.max_students,onChange:me=>C(xe=>xe?{...xe,features_json:{...xe.features_json,max_students:parseInt(me.target.value)}}:null)})]})]}),N&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editDescription",children:"Description"}),s.jsx(oa,{id:"editDescription",value:N.description,onChange:me=>C(xe=>xe?{...xe,description:me.target.value}:null),rows:3})]}),N&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(ne,{children:"Features"}),s.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg p-4",children:s.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(N.features_json).map(([me,xe])=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Us,{checked:typeof xe=="boolean"?xe:!1,onCheckedChange:ee=>C(ue=>ue?{...ue,features_json:{...ue.features_json,[me]:ee}}:null)}),s.jsx(ne,{className:"text-sm capitalize",children:me.replace(/_/g," ")})]},me))})})]}),s.jsxs(so,{children:[s.jsx(ce,{variant:"outline",onClick:()=>{y(!1),C(null)},disabled:h,children:"Cancel"}),s.jsx(ce,{onClick:ge,disabled:h,children:h?"Updating...":"Update Plan"})]})]})}),s.jsx(js,{open:x,onOpenChange:w,children:s.jsxs(ps,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsx(xs,{children:"Subscription Plan Details"}),s.jsx(bn,{children:"Complete information about the subscription plan"})]}),P&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:P.name.replace(/_/g," ").toUpperCase()}),s.jsx("p",{className:"text-gray-600 mt-1",children:P.description})]}),s.jsx(Pe,{variant:P.is_active?"default":"secondary",children:P.is_active?"Active":"Inactive"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsxs(Ue,{className:"text-sm font-medium flex items-center",children:[s.jsx(Vc,{className:"h-4 w-4 mr-2"}),"Base Price"]})}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Se(P.base_price)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Monthly base cost"})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsxs(Ue,{className:"text-sm font-medium flex items-center",children:[s.jsx(ns,{className:"h-4 w-4 mr-2"}),"Per Student"]})}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Se(P.price_per_student)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Per student per month"})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsxs(Ue,{className:"text-sm font-medium flex items-center",children:[s.jsx($n,{className:"h-4 w-4 mr-2"}),"Per Bus"]})}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Se(P.price_per_bus)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Per bus per month"})]})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center",children:[s.jsx(on,{className:"h-4 w-4 mr-2"}),"Billing Information"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium",children:"Default Billing Cycle"}),s.jsx("p",{className:"text-lg capitalize",children:P.default_billing_cycle})]}),s.jsxs("div",{children:[s.jsx(ne,{className:"text-sm font-medium",children:"Plan Status"}),s.jsx("p",{className:"text-lg",children:P.is_active?"Active":"Inactive"})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center",children:[s.jsx(aw,{className:"h-4 w-4 mr-2"}),"Features & Limits"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Limits"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:"Max Students"}),s.jsx("span",{className:"font-semibold",children:P.features_json.max_students})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:"Max Parents"}),s.jsx("span",{className:"font-semibold",children:P.features_json.max_parents})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:"Max Buses"}),s.jsx("span",{className:"font-semibold",children:P.features_json.max_buses})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Features"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(P.features_json).map(([me,xe])=>typeof xe=="boolean"?s.jsxs("div",{className:"flex items-center space-x-2 p-2",children:[xe?s.jsx(Ht,{className:"h-4 w-4 text-green-600"}):s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm capitalize",children:me.replace(/_/g," ")})]},me):null)})]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center",children:[s.jsx(Oi,{className:"h-4 w-4 mr-2"}),"Plan Statistics"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Subscriptions"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:Se("0")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"0%"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Conversion Rate"})]})]})})]})]}),s.jsxs(so,{children:[s.jsx(ce,{variant:"outline",onClick:()=>{w(!1),D(null)},children:"Close"}),s.jsxs(ce,{onClick:()=>{w(!1),D(null),P&&se(P)},children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Plan"]})]})]})}),s.jsx(js,{open:!!R,onOpenChange:()=>A(null),children:s.jsxs(ps,{children:[s.jsxs(bs,{children:[s.jsx(xs,{children:"Delete Subscription Plan"}),s.jsx(bn,{children:"Are you sure you want to delete this subscription plan? This action cannot be undone."})]}),s.jsxs(so,{children:[s.jsx(ce,{variant:"outline",onClick:()=>A(null),disabled:v,children:"Cancel"}),s.jsx(ce,{variant:"destructive",onClick:()=>R&&fe(R),disabled:v,children:v?"Deleting...":"Delete Plan"})]})]})}),s.jsx(js,{open:I,onOpenChange:O,children:s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsx(xs,{children:"Edit School Subscription"}),s.jsx(bn,{children:"Update the school subscription details"})]}),K&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editSchoolName",children:"School Name"}),s.jsx(Ie,{id:"editSchoolName",value:K.schoolName,onChange:me=>re(xe=>xe?{...xe,schoolName:me.target.value}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editPlan",children:"Plan"}),s.jsxs(Gt,{value:K.plan,onValueChange:me=>re(xe=>xe?{...xe,plan:me}:null),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"premium_school",children:"Premium School"}),s.jsx(Ee,{value:"basic_school",children:"Basic School"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editStatus",children:"Status"}),s.jsxs(Gt,{value:K.status,onValueChange:me=>re(xe=>xe?{...xe,status:me}:null),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"active",children:"Active"}),s.jsx(Ee,{value:"expired",children:"Expired"}),s.jsx(Ee,{value:"cancelled",children:"Cancelled"}),s.jsx(Ee,{value:"pending",children:"Pending"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editAmount",children:"Amount"}),s.jsx(Ie,{id:"editAmount",type:"number",value:K.amount,onChange:me=>re(xe=>xe?{...xe,amount:parseFloat(me.target.value)}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editBillingCycle",children:"Billing Cycle"}),s.jsxs(Gt,{value:K.billingCycle,onValueChange:me=>re(xe=>xe?{...xe,billingCycle:me}:null),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"Monthly",children:"Monthly"}),s.jsx(Ee,{value:"Annually",children:"Annually"}),s.jsx(Ee,{value:"Quarterly",children:"Quarterly"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editPaymentMethod",children:"Payment Method"}),s.jsx(Ie,{id:"editPaymentMethod",value:K.paymentMethod,onChange:me=>re(xe=>xe?{...xe,paymentMethod:me.target.value}:null)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editStartDate",children:"Start Date"}),s.jsx(Ie,{id:"editStartDate",type:"date",value:K.startDate,onChange:me=>re(xe=>xe?{...xe,startDate:me.target.value}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editEndDate",children:"End Date"}),s.jsx(Ie,{id:"editEndDate",type:"date",value:K.endDate,onChange:me=>re(xe=>xe?{...xe,endDate:me.target.value}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editNextBilling",children:"Next Billing"}),s.jsx(Ie,{id:"editNextBilling",type:"date",value:K.nextBilling,onChange:me=>re(xe=>xe?{...xe,nextBilling:me.target.value}:null)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editLastPayment",children:"Last Payment"}),s.jsx(Ie,{id:"editLastPayment",type:"date",value:K.lastPayment,onChange:me=>re(xe=>xe?{...xe,lastPayment:me.target.value}:null)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"editFeatures",children:"Features"}),s.jsx(oa,{id:"editFeatures",value:K.features.join(", "),onChange:me=>re(xe=>xe?{...xe,features:me.target.value.split(", ")}:null),placeholder:"Enter features separated by commas"})]})]}),s.jsxs(so,{children:[s.jsx(ce,{variant:"outline",onClick:()=>{O(!1),re(null)},disabled:h,children:"Cancel"}),s.jsx(ce,{onClick:$e,disabled:h,children:h?"Updating...":"Update Subscription"})]})]})}),s.jsx(js,{open:F,onOpenChange:E,children:s.jsxs(ps,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsx(xs,{children:"School Subscription Details"}),s.jsx(bn,{children:"Complete information about the school subscription"})]}),pe&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:pe.schoolName}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Subscription Details"})]}),oe(pe.status)]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsxs(Ue,{className:"text-sm font-medium flex items-center",children:[s.jsx(Vc,{className:"h-4 w-4 mr-2"}),"Amount"]})}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Se(pe.amount.toString())}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[pe.billingCycle," billing"]})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsxs(Ue,{className:"text-sm font-medium flex items-center",children:[s.jsx(on,{className:"h-4 w-4 mr-2"}),"Next Billing"]})}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:new Date(pe.nextBilling).toLocaleDateString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Due date"})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{className:"pb-2",children:s.jsxs(Ue,{className:"text-sm font-medium flex items-center",children:[s.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Payment Method"]})}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:pe.paymentMethod}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last payment: ",pe.lastPayment]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center",children:[s.jsx(aw,{className:"h-4 w-4 mr-2"}),"Plan Information"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Plan:"}),vt(pe.plan)]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Billing Cycle:"}),s.jsx("span",{children:pe.billingCycle})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Status:"}),oe(pe.status)]})]})})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center",children:[s.jsx(on,{className:"h-4 w-4 mr-2"}),"Date Information"]})}),s.jsx(Te,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Start Date:"}),s.jsx("span",{children:new Date(pe.startDate).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"End Date:"}),s.jsx("span",{children:new Date(pe.endDate).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Last Payment:"}),s.jsx("span",{children:new Date(pe.lastPayment).toLocaleDateString()})]})]})})]})]}),s.jsxs(Le,{children:[s.jsx(Be,{children:s.jsxs(Ue,{className:"flex items-center",children:[s.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Features"]})}),s.jsx(Te,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:pe.features.map((me,xe)=>s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[s.jsx(Ht,{className:"h-3 w-3 text-green-600"}),s.jsx("span",{className:"text-sm",children:me})]},xe))})})]})]}),s.jsxs(so,{children:[s.jsx(ce,{variant:"outline",onClick:()=>{E(!1),Q(null)},children:"Close"}),s.jsxs(ce,{onClick:()=>{E(!1),Q(null),pe&&Me(pe)},children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Subscription"]})]})]})}),s.jsx(js,{open:!!J,onOpenChange:()=>q(null),children:s.jsxs(ps,{children:[s.jsxs(bs,{children:[s.jsx(xs,{children:"Delete School Subscription"}),s.jsx(bn,{children:"Are you sure you want to delete this school subscription? This action cannot be undone."})]}),s.jsxs(so,{children:[s.jsx(ce,{variant:"outline",onClick:()=>q(null),disabled:$,children:"Cancel"}),s.jsx(ce,{variant:"destructive",onClick:()=>J&&Ye(J),disabled:$,children:$?"Deleting...":"Delete Subscription"})]})]})})]})]}),s.jsxs("div",{className:"flex space-x-4 border-b",children:[s.jsx("button",{className:`px-4 py-2 font-medium ${l==="plans"?"border-b-2 border-purple-500 text-purple-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>c("plans"),children:"Subscription Plans"}),s.jsx("button",{className:`px-4 py-2 font-medium ${l==="schools"?"border-b-2 border-purple-500 text-purple-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>c("schools"),children:"School Subscriptions"})]}),l==="plans"?s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(!t||!Array.isArray(t)?[]:t).map(me=>s.jsxs(Le,{className:"relative",children:[s.jsxs(Be,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ue,{className:"text-lg",children:me.name.replace(/_/g," ").toUpperCase()}),s.jsx(Pe,{variant:me.is_active?"default":"secondary",children:me.is_active?"Active":"Inactive"})]}),s.jsx(ys,{children:me.description})]}),s.jsxs(Te,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Base Price:"}),s.jsx("span",{className:"font-medium",children:Se(me.base_price)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Per Student:"}),s.jsx("span",{className:"font-medium",children:Se(me.price_per_student)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Per Bus:"}),s.jsx("span",{className:"font-medium",children:Se(me.price_per_bus)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Billing Cycle:"}),s.jsx("span",{className:"font-medium capitalize",children:me.default_billing_cycle})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Features:"}),s.jsx("div",{className:"grid grid-cols-1 gap-1",children:Object.entries(me.features_json).map(([xe,ee])=>typeof ee=="boolean"&&ee?s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Ht,{className:"h-3 w-3 text-green-600"}),s.jsx("span",{className:"capitalize",children:xe.replace(/_/g," ")})]},xe):typeof ee=="number"&&ee>0?s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(ns,{className:"h-3 w-3 text-blue-600"}),s.jsxs("span",{className:"capitalize",children:[xe.replace(/_/g," "),": ",ee]})]},xe):null)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>se(me),children:[s.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsxs(ce,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(ho,{className:"h-3 w-3 mr-1"}),"More"]})}),s.jsxs(An,{align:"end",children:[s.jsxs(Jt,{onClick:()=>ae(me),children:[s.jsx(ir,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Jt,{onClick:()=>se(me),children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Edit Plan"]}),s.jsx(nd,{}),s.jsxs(Jt,{className:"text-red-600",onClick:()=>A(me.id),children:[s.jsx(Ha,{className:"mr-2 h-4 w-4"}),"Delete Plan"]})]})]})]})]})]},me.id))})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(Vc,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Se(n.reduce((me,xe)=>me+xe.amount,0).toString())}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(Ht,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.filter(me=>me.status==="active").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Monthly Revenue"}),s.jsx(Oi,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Se(n.filter(me=>me.billingCycle==="Monthly").reduce((me,xe)=>me+xe.amount,0).toString())}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This month's revenue"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Expiring Soon"}),s.jsx(Nr,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.filter(me=>{const xe=new Date(me.nextBilling),ee=new Date;return Math.ceil((xe.getTime()-ee.getTime())/(1e3*60*60*24))<=30&&me.status==="active"}).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsxs(Ue,{children:["School Subscriptions (",n.length,")"]}),s.jsx(ys,{children:"All active school subscriptions"})]}),s.jsx(Te,{children:s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"School"}),s.jsx(ut,{children:"Plan"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Amount"}),s.jsx(ut,{children:"Billing Cycle"}),s.jsx(ut,{children:"Next Billing"}),s.jsx(ut,{children:"Payment Method"}),s.jsx(ut,{children:"Last Payment"}),s.jsx(ut,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:n.map(me=>s.jsxs(Js,{children:[s.jsx(ct,{className:"font-medium",children:me.schoolName}),s.jsx(ct,{children:vt(me.plan)}),s.jsx(ct,{children:oe(me.status)}),s.jsx(ct,{children:Se(me.amount.toString())}),s.jsx(ct,{children:me.billingCycle}),s.jsx(ct,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(on,{className:"h-4 w-4 text-muted-foreground"}),me.nextBilling]})}),s.jsx(ct,{children:me.paymentMethod}),s.jsx(ct,{children:me.lastPayment}),s.jsx(ct,{className:"text-right",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(ho,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsx(yd,{children:"Actions"}),s.jsxs(Jt,{onClick:()=>de(me),children:[s.jsx(ir,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Jt,{onClick:()=>Me(me),children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Edit Subscription"]}),s.jsxs(Jt,{children:[s.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Manage Billing"]}),s.jsx(nd,{}),s.jsxs(Jt,{className:"text-orange-600",onClick:()=>mt(me.id),children:[s.jsx(Nr,{className:"mr-2 h-4 w-4"}),"Cancel Subscription"]}),s.jsxs(Jt,{className:"text-red-600",onClick:()=>q(me.id),children:[s.jsx(Ha,{className:"mr-2 h-4 w-4"}),"Delete Subscription"]})]})]})})]},me.id))})]})})]})]})]})},nte=({isOpen:e,onClose:t})=>{const r=er(),{toast:n}=Ar(),{schools:a}=Ct(u=>u.schools),{creating:i}=Ct(u=>u.schoolSubscriptions),[o,l]=g.useState({school:"",plan:"",billing_cycle:"monthly",start_date:""});g.useEffect(()=>{e&&r(jl())},[e,r]);const c=(u,h)=>{l(p=>({...p,[u]:h}))},d=async u=>{if(u.preventDefault(),!o.school||!o.plan||!o.start_date){n({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{const h={...o,school:parseInt(o.school)};await r(b0(h)).unwrap(),n({title:"Subscription Created",description:"School subscription has been created successfully."}),l({school:"",plan:"",billing_cycle:"monthly",start_date:""}),t()}catch{n({title:"Error",description:"Failed to create subscription. Please try again.",variant:"destructive"})}};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"max-w-md",children:[s.jsxs(bs,{children:[s.jsxs(xs,{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"h-5 w-5"}),"Create New Subscription"]}),s.jsx(bn,{children:"Create a new subscription for a school."})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"school",children:"School"}),s.jsxs(Gt,{value:o.school,onValueChange:u=>c("school",u),children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select a school"})}),s.jsx(Ut,{children:a.map(u=>s.jsx(Ee,{value:u.id.toString(),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),u.name]})},u.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"plan",children:"Plan"}),s.jsxs(Gt,{value:o.plan,onValueChange:u=>c("plan",u),children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select a plan"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"basic_school",children:"Basic School Plan"}),s.jsx(Ee,{value:"premium_school",children:"Premium School Plan"}),s.jsx(Ee,{value:"enterprise_school",children:"Enterprise School Plan"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"billing_cycle",children:"Billing Cycle"}),s.jsxs(Gt,{value:o.billing_cycle,onValueChange:u=>c("billing_cycle",u),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"monthly",children:"Monthly"}),s.jsx(Ee,{value:"annually",children:"Annually"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"start_date",children:"Start Date"}),s.jsx(Ie,{id:"start_date",type:"date",value:o.start_date,onChange:u=>c("start_date",u.target.value),required:!0})]}),s.jsxs(so,{children:[s.jsx(ce,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ce,{type:"submit",disabled:i,children:i?"Creating...":"Create Subscription"})]})]})]})})},ate=({subscription:e,isOpen:t,onClose:r})=>{if(!e)return null;const n=c=>{try{return c?new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(c)):"N/A"}catch{return"N/A"}},a=c=>{try{return c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}catch{return"N/A"}},i=c=>{switch(c){case"active":return s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Active"});case"pending":return s.jsx(Pe,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return s.jsx(Pe,{className:"bg-red-100 text-red-800",children:"Cancelled"});case"expired":return s.jsx(Pe,{className:"bg-gray-100 text-gray-800",children:"Expired"});default:return s.jsx(Pe,{variant:"outline",children:c})}},o=c=>{switch(c){case"monthly":return s.jsx(Pe,{className:"bg-blue-100 text-blue-800",children:"Monthly"});case"annually":return s.jsx(Pe,{className:"bg-purple-100 text-purple-800",children:"Annually"});default:return s.jsx(Pe,{variant:"outline",children:c})}},l=()=>{try{const c=PS(e);ud(c,`subscription-${e.id}-${new Date().toISOString().split("T")[0]}.pdf`)}catch{}};return s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsxs(xs,{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"h-5 w-5"}),"Subscription Details"]}),s.jsxs(bn,{children:["Detailed view of subscription ",e.id]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Subscription Information"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subscription ID:"}),s.jsx("span",{className:"font-medium",children:e.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status:"}),i(e.status)]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),s.jsx("span",{className:"font-medium",children:e.plan_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Billing Cycle:"}),o(e.billing_cycle)]})]})]})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"School Information"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"School:"}),s.jsx("span",{className:"font-medium",children:e.school_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"School ID:"}),s.jsx("span",{className:"font-medium",children:e.school})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Price Charged:"}),s.jsx("span",{className:"font-medium",children:n(e.price_charged)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Calculated Cost:"}),s.jsx("span",{className:"font-medium",children:n(e.calculated_cost.toString())})]})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Usage Statistics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx(ns,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),s.jsx("div",{className:"text-2xl font-bold",children:e.current_students_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Students"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx($n,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),s.jsx("div",{className:"text-2xl font-bold",children:e.current_buses_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Buses"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx(ns,{className:"h-8 w-8 mx-auto mb-2 text-purple-600"}),s.jsx("div",{className:"text-2xl font-bold",children:e.current_parents_count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Parents"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Important Dates"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(on,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Start Date:"}),s.jsx("span",{className:"font-medium",children:a(e.start_date)})]}),e.end_date&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(on,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"End Date:"}),s.jsx("span",{className:"font-medium",children:a(e.end_date)})]}),e.next_billing_date&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ar,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Next Billing:"}),s.jsx("span",{className:"font-medium",children:a(e.next_billing_date)})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(ce,{variant:"outline",onClick:l,children:[s.jsx(Un,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(ce,{variant:"outline",children:[s.jsx(jr,{className:"mr-2 h-4 w-4"}),"View School"]}),e.status==="pending"&&s.jsxs(ce,{children:[s.jsx(Ht,{className:"mr-2 h-4 w-4"}),"Activate"]}),e.status==="active"&&s.jsxs(ce,{variant:"outline",children:[s.jsx(gd,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})]})})},ite=()=>{const e=er(),{toast:t}=Ar(),{subscriptions:r,loading:n,error:a}=Ct(E=>E.schoolSubscriptions),[i,o]=g.useState(""),[l,c]=g.useState("all"),[d,u]=g.useState("all"),[h,p]=g.useState(!1),[f,y]=g.useState(null),[x,w]=g.useState(!1);g.useEffect(()=>{e(bl())},[e]);const v=()=>{p(!1),e(bl())},b=E=>{y(E),w(!0)},N=()=>{w(!1),y(null)},C=()=>{try{const E=["School","Plan","Status","Billing Cycle","Price","Students","Buses","Parents"],$=D.map(K=>[K.school_name,K.plan_name,K.status,K.billing_cycle,O(K.price_charged),K.current_students_count.toString(),K.current_buses_count.toString(),K.current_parents_count.toString()]),U=kS({headers:E,rows:$,title:"School Subscriptions Report",subtitle:`Total Subscriptions: ${D.length}`});ud(U,`subscriptions-report-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"PDF Downloaded",description:"Subscriptions report has been downloaded successfully."})}catch{t({title:"Error",description:"Failed to generate PDF. Please try again.",variant:"destructive"})}},P=E=>{try{const $=PS(E);ud($,`subscription-${E.id}-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"Subscription Downloaded",description:"Subscription PDF has been downloaded successfully."})}catch{t({title:"Error",description:"Failed to generate subscription PDF. Please try again.",variant:"destructive"})}},D=r.filter(E=>{const $=E.school_name.toLowerCase().includes(i.toLowerCase())||E.plan_name.toLowerCase().includes(i.toLowerCase()),U=l==="all"||E.status===l,K=d==="all"||E.billing_cycle===d;return $&&U&&K}),R=E=>{switch(E){case"active":return s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Active"});case"pending":return s.jsx(Pe,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return s.jsx(Pe,{className:"bg-red-100 text-red-800",children:"Cancelled"});case"expired":return s.jsx(Pe,{className:"bg-gray-100 text-gray-800",children:"Expired"});default:return s.jsx(Pe,{variant:"outline",children:E})}},A=E=>{switch(E){case"monthly":return s.jsx(Pe,{className:"bg-blue-100 text-blue-800",children:"Monthly"});case"annually":return s.jsx(Pe,{className:"bg-purple-100 text-purple-800",children:"Annually"});default:return s.jsx(Pe,{variant:"outline",children:E})}},I=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),O=E=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(parseFloat(E)),F=async(E,$)=>{try{await e(w0({id:E,updateData:{status:$}})).unwrap(),t({title:"Status Updated",description:"Subscription status has been updated successfully."})}catch{t({title:"Error",description:"Failed to update subscription status.",variant:"destructive"})}};return n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((E,$)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},$))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"School Subscriptions"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage school subscriptions and billing"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{variant:"outline",onClick:C,children:[s.jsx(Un,{size:16,className:"mr-2"}),"Export All"]}),s.jsxs(ce,{onClick:()=>p(!0),children:[s.jsx(jr,{size:16,className:"mr-2"}),"New Subscription"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Subscriptions"}),s.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All subscriptions"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(Ht,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.filter(E=>E.status==="active").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Pending Subscriptions"}),s.jsx(ar,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.filter(E=>E.status==="pending").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting activation"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(Vc,{className:"h-4 w-4 text-emerald-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:O(r.reduce((E,$)=>E+parseFloat($.price_charged),0).toString())}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All time revenue"})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Filters"}),s.jsx(ys,{children:"Filter subscriptions by various criteria"})]}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Jr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ie,{placeholder:"Search subscriptions...",value:i,onChange:E=>o(E.target.value),className:"pl-10"})]}),s.jsxs(Gt,{value:l,onValueChange:c,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Filter by status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Status"}),s.jsx(Ee,{value:"active",children:"Active"}),s.jsx(Ee,{value:"pending",children:"Pending"}),s.jsx(Ee,{value:"cancelled",children:"Cancelled"}),s.jsx(Ee,{value:"expired",children:"Expired"})]})]}),s.jsxs(Gt,{value:d,onValueChange:u,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Filter by billing cycle"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Cycles"}),s.jsx(Ee,{value:"monthly",children:"Monthly"}),s.jsx(Ee,{value:"annually",children:"Annually"})]})]}),s.jsxs(ce,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Ul,{size:16}),"Clear Filters"]})]})})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsxs(Ue,{children:["School Subscriptions (",D.length,")"]}),s.jsx(ys,{children:"All school subscriptions and their current status"})]}),s.jsx(Te,{children:a?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Nr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Subscriptions"}),s.jsx("p",{className:"text-muted-foreground",children:a})]}):D.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Cn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Subscriptions Found"}),s.jsx("p",{className:"text-muted-foreground",children:r.length===0?"No school subscriptions have been created yet.":"No subscriptions match your current filters."})]}):s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"School"}),s.jsx(ut,{children:"Plan"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Billing Cycle"}),s.jsx(ut,{children:"Price"}),s.jsx(ut,{children:"Usage"}),s.jsx(ut,{children:"Start Date"}),s.jsx(ut,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:D.map(E=>s.jsxs(Js,{children:[s.jsx(ct,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:E.school_name})]})}),s.jsx(ct,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:E.plan_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",E.plan]})]})}),s.jsx(ct,{children:R(E.status)}),s.jsx(ct,{children:A(E.billing_cycle)}),s.jsxs(ct,{children:[s.jsx("div",{className:"font-medium",children:O(E.price_charged)}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Calculated:"," ",O(E.calculated_cost.toString())]})]}),s.jsx(ct,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(ns,{className:"h-3 w-3"}),E.current_students_count," students"]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx($n,{className:"h-3 w-3"}),E.current_buses_count," buses"]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(ns,{className:"h-3 w-3"}),E.current_parents_count," parents"]})]})}),s.jsxs(ct,{children:[s.jsx("div",{className:"text-sm",children:I(E.start_date)}),E.next_billing_date&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Next: ",I(E.next_billing_date)]})]}),s.jsx(ct,{className:"text-right",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(ho,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsx(yd,{children:"Actions"}),s.jsxs(Jt,{onClick:()=>b(E),children:[s.jsx(ir,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Jt,{onClick:()=>P(E),children:[s.jsx(Un,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(Jt,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Edit Subscription"]}),E.status==="pending"&&s.jsxs(Jt,{onClick:()=>F(E.id,"active"),children:[s.jsx(Ht,{className:"mr-2 h-4 w-4"}),"Activate"]}),E.status==="active"&&s.jsxs(Jt,{onClick:()=>F(E.id,"cancelled"),children:[s.jsx(gd,{className:"mr-2 h-4 w-4"}),"Cancel"]}),s.jsx(nd,{}),s.jsxs(Jt,{children:[s.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Create Invoice"]})]})]})})]},E.id))})]})})]}),s.jsx(nte,{isOpen:h,onClose:v}),s.jsx(ate,{subscription:f,isOpen:x,onClose:N})]})},ote=({isOpen:e,onClose:t})=>{const r=er(),{toast:n}=Ar(),{subscriptions:a}=Ct(w=>w.schoolSubscriptions),{creating:i}=Ct(w=>w.invoices),[o,l]=g.useState({school:"",subscription:"",amount_due:"",currency:"KES",due_date:"",line_items:[]}),[c,d]=g.useState({description:"",quantity:1,unit_price:0,total:0});g.useEffect(()=>{e&&r(bl())},[e,r]);const u=(w,v)=>{l(b=>({...b,[w]:v}))},h=(w,v)=>{d(b=>{const N={...b,[w]:v};return(w==="quantity"||w==="unit_price")&&(N.total=N.quantity*N.unit_price),N})},p=()=>{c.description&&c.quantity>0&&c.unit_price>0&&(l(w=>({...w,line_items:[...w.line_items,{...c}]})),d({description:"",quantity:1,unit_price:0,total:0}))},f=w=>{l(v=>({...v,line_items:v.line_items.filter((b,N)=>N!==w)}))},y=()=>o.line_items.reduce((w,v)=>w+v.total,0),x=async w=>{if(w.preventDefault(),!o.school||!o.subscription||o.line_items.length===0){n({title:"Validation Error",description:"Please fill in all required fields and add at least one line item.",variant:"destructive"});return}try{const v={...o,school:parseInt(o.school),amount_due:y().toString()};await r(N0(v)).unwrap(),n({title:"Invoice Created",description:"Invoice has been created successfully."}),l({school:"",subscription:"",amount_due:"",currency:"KES",due_date:"",line_items:[]}),t()}catch{n({title:"Error",description:"Failed to create invoice. Please try again.",variant:"destructive"})}};return s.jsx(js,{open:e,onOpenChange:t,children:s.jsxs(ps,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsxs(xs,{className:"flex items-center gap-2",children:[s.jsx(kn,{className:"h-5 w-5"}),"Create New Invoice"]}),s.jsx(bn,{children:"Create a new invoice for a school subscription."})]}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"school",children:"School"}),s.jsxs(Gt,{value:o.school,onValueChange:w=>u("school",w),children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select a school"})}),s.jsx(Ut,{children:a.map(w=>s.jsx(Ee,{value:w.school.toString(),children:w.school_name},w.school))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"subscription",children:"Subscription"}),s.jsxs(Gt,{value:o.subscription,onValueChange:w=>u("subscription",w),children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Select a subscription"})}),s.jsx(Ut,{children:a.filter(w=>w.school.toString()===o.school).map(w=>s.jsxs(Ee,{value:w.id,children:[w.plan_name," - ",w.billing_cycle]},w.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"currency",children:"Currency"}),s.jsxs(Gt,{value:o.currency,onValueChange:w=>u("currency",w),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"KES",children:"KES (Kenyan Shilling)"}),s.jsx(Ee,{value:"USD",children:"USD (US Dollar)"}),s.jsx(Ee,{value:"EUR",children:"EUR (Euro)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"due_date",children:"Due Date"}),s.jsx(Ie,{id:"due_date",type:"date",value:o.due_date,onChange:w=>u("due_date",w.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ne,{children:"Line Items"}),s.jsxs(ce,{type:"button",variant:"outline",size:"sm",onClick:p,disabled:!c.description||c.quantity<=0||c.unit_price<=0,children:[s.jsx(ja,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"description",children:"Description"}),s.jsx(Ie,{id:"description",value:c.description,onChange:w=>h("description",w.target.value),placeholder:"Item description"})]}),s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"quantity",children:"Quantity"}),s.jsx(Ie,{id:"quantity",type:"number",min:"1",value:c.quantity,onChange:w=>h("quantity",parseInt(w.target.value))})]}),s.jsxs("div",{children:[s.jsx(ne,{htmlFor:"unit_price",children:"Unit Price"}),s.jsx(Ie,{id:"unit_price",type:"number",min:"0",step:"0.01",value:c.unit_price,onChange:w=>h("unit_price",parseFloat(w.target.value))})]}),s.jsxs("div",{children:[s.jsx(ne,{children:"Total"}),s.jsx(Ie,{value:c.total.toFixed(2),readOnly:!0,className:"bg-gray-50"})]})]}),o.line_items.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{children:"Added Items"}),s.jsx("div",{className:"space-y-2",children:o.line_items.map((w,v)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:w.description}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[w.quantity,"  ",w.unit_price.toFixed(2)," ="," ",w.total.toFixed(2)]})]}),s.jsx(ce,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(v),children:s.jsx(co,{className:"h-4 w-4"})})]},v))})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Amount"}),s.jsxs("div",{className:"text-2xl font-bold",children:[o.currency," ",y().toFixed(2)]})]})}),s.jsxs(so,{children:[s.jsx(ce,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),s.jsx(ce,{type:"submit",disabled:i||o.line_items.length===0,children:i?"Creating...":"Create Invoice"})]})]})]})})},lte=({invoice:e,isOpen:t,onClose:r})=>{var c,d;if(!e)return null;const n=(u,h)=>{try{return!u||!h?"N/A":new Intl.NumberFormat("en-KE",{style:"currency",currency:h}).format(parseFloat(u))}catch{return"N/A"}},a=u=>{try{return u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}catch{return"N/A"}},i=u=>{switch(u){case"paid":return s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Paid"});case"pending":return s.jsx(Pe,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"overdue":return s.jsx(Pe,{className:"bg-red-100 text-red-800",children:"Overdue"});case"cancelled":return s.jsx(Pe,{className:"bg-gray-100 text-gray-800",children:"Cancelled"});default:return s.jsx(Pe,{variant:"outline",children:u})}},o=((c=e.line_items)==null?void 0:c.reduce((u,h)=>u+((h==null?void 0:h.total)||0),0))||0,l=()=>{try{const u=LR(e);ud(u,`invoice-${e.id}-${new Date().toISOString().split("T")[0]}.pdf`)}catch{}};return s.jsx(js,{open:t,onOpenChange:r,children:s.jsxs(ps,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(bs,{children:[s.jsxs(xs,{className:"flex items-center gap-2",children:[s.jsx(kn,{className:"h-5 w-5"}),"Invoice Details"]}),s.jsxs(bn,{children:["Detailed view of invoice ",e.id]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Invoice Information"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Invoice ID:"}),s.jsx("span",{className:"font-medium",children:e.invoice_id||e.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[i(e.status),e.is_overdue&&s.jsx(Pe,{variant:"destructive",className:"text-xs",children:"Overdue"})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"School:"}),s.jsx("span",{className:"font-medium",children:e.school_name||`School ${e.school}`})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subscription Plan:"}),s.jsx("span",{className:"font-medium",children:e.subscription_plan||"N/A"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Invoice Date:"}),s.jsx("span",{className:"font-medium",children:a(e.invoice_date)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Due Date:"}),s.jsx("span",{className:"font-medium",children:a(e.due_date)})]}),e.paid_at&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Paid Date:"}),s.jsx("span",{className:"font-medium",children:a(e.paid_at)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Currency:"}),s.jsx("span",{className:"font-medium",children:e.currency})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Amount Due:"}),s.jsx("span",{className:"font-medium",children:n(e.amount_due,e.currency)})]}),parseFloat(e.amount_paid||"0")>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Amount Paid:"}),s.jsx("span",{className:"font-medium",children:n(e.amount_paid,e.currency)})]})]})]})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"School Information"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"School ID:"}),s.jsx("span",{className:"font-medium",children:e.school})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subscription:"}),s.jsx("span",{className:"font-medium",children:e.subscription})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Amount Due:"}),s.jsx("span",{className:"font-medium",children:n(e.amount_due,e.currency)})]})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Line Items"}),s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"Description"}),s.jsx(ut,{children:"Quantity"}),s.jsx(ut,{children:"Unit Price"}),s.jsx(ut,{className:"text-right",children:"Total"})]})}),s.jsx(Aa,{children:(d=e.line_items)==null?void 0:d.map((u,h)=>s.jsxs(Js,{children:[s.jsx(ct,{className:"font-medium",children:u.description}),s.jsx(ct,{children:u.quantity}),s.jsx(ct,{children:n(u.unit_price.toString(),e.currency)}),s.jsx(ct,{className:"text-right font-medium",children:n(u.total.toString(),e.currency)})]},h))})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Amount"}),s.jsx("div",{className:"text-2xl font-bold",children:n(o.toString(),e.currency)})]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(ce,{variant:"outline",onClick:l,children:[s.jsx(Un,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(ce,{variant:"outline",children:[s.jsx(My,{className:"mr-2 h-4 w-4"}),"Send Invoice"]}),e.status==="pending"&&s.jsxs(ce,{children:[s.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Process Payment"]})]})]})]})})},cte=()=>{const e=er(),{toast:t}=Ar(),{invoices:r,loading:n,error:a}=Ct(I=>I.invoices),[i,o]=g.useState(""),[l,c]=g.useState("all"),[d,u]=g.useState(!1),[h,p]=g.useState(null),[f,y]=g.useState(!1);g.useEffect(()=>{e(ru())},[e]),g.useEffect(()=>{r.length>0},[r]);const x=()=>{u(!1),e(ru())},w=I=>{p(I),y(!0)},v=()=>{y(!1),p(null)},b=()=>{try{const I=["Invoice ID","School","Subscription Plan","Amount Due","Amount Paid","Status","Due Date","Overdue","Line Items"],O=C.map(E=>{var $;return[E.invoice_id||E.id||"N/A",E.school_name||`School ${E.school||"N/A"}`,E.subscription_plan||"N/A",R(E.amount_due||"0",E.currency||"KES"),R(E.amount_paid||"0",E.currency||"KES"),E.status||"N/A",E.due_date?D(E.due_date):"N/A",E.is_overdue?"Yes":"No",`${(($=E.line_items)==null?void 0:$.length)||0} items`]}),F=kS({headers:I,rows:O,title:"Invoices Report",subtitle:`Total Invoices: ${C.length}`});ud(F,`invoices-report-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"PDF Downloaded",description:"Invoices report has been downloaded successfully."})}catch{t({title:"Error",description:"Failed to generate PDF. Please try again.",variant:"destructive"})}},N=I=>{try{const O=LR(I);ud(O,`invoice-${I.id}-${new Date().toISOString().split("T")[0]}.pdf`),t({title:"Invoice Downloaded",description:"Invoice PDF has been downloaded successfully."})}catch{t({title:"Error",description:"Failed to generate invoice PDF. Please try again.",variant:"destructive"})}},C=r.filter(I=>{var E,$;const O=(((E=I.id)==null?void 0:E.toLowerCase())||"").includes(i.toLowerCase())||((($=I.currency)==null?void 0:$.toLowerCase())||"").includes(i.toLowerCase()),F=l==="all"||I.status===l;return O&&F}),P=I=>{switch(I){case"paid":return s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Paid"});case"pending":return s.jsx(Pe,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"overdue":return s.jsx(Pe,{className:"bg-red-100 text-red-800",children:"Overdue"});case"cancelled":return s.jsx(Pe,{className:"bg-gray-100 text-gray-800",children:"Cancelled"});default:return s.jsx(Pe,{variant:"outline",children:I})}},D=I=>{try{return I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}catch{return"N/A"}},R=(I,O)=>{try{return!I||!O?"N/A":new Intl.NumberFormat("en-KE",{style:"currency",currency:O}).format(parseFloat(I))}catch{return"N/A"}},A=async I=>{if(!I){t({title:"Error",description:"Invoice ID is missing. Cannot process payment.",variant:"destructive"});return}try{await e(S0({id:I,updateData:{status:"paid"}})).unwrap(),t({title:"Payment Processed",description:"Invoice payment has been processed successfully."})}catch{t({title:"Error",description:"Failed to process payment.",variant:"destructive"})}};return n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((I,O)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},O))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Invoices"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage invoices and payments"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{variant:"outline",onClick:b,children:[s.jsx(Un,{size:16,className:"mr-2"}),"Export All"]}),s.jsxs(ce,{onClick:()=>u(!0),children:[s.jsx(kn,{size:16,className:"mr-2"}),"Create Invoice"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Invoices"}),s.jsx(kn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All invoices"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Paid Invoices"}),s.jsx(Ht,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.filter(I=>I.status==="paid").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully paid"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Pending Invoices"}),s.jsx(ar,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.filter(I=>I.status==="pending").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting payment"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(Vc,{className:"h-4 w-4 text-emerald-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:R(r.reduce((I,O)=>I+parseFloat(O.amount_due),0).toString(),"KES")}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All time revenue"})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Filters"}),s.jsx(ys,{children:"Filter invoices by various criteria"})]}),s.jsx(Te,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Jr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ie,{placeholder:"Search invoices...",value:i,onChange:I=>o(I.target.value),className:"pl-10"})]}),s.jsxs(Gt,{value:l,onValueChange:c,children:[s.jsx(zt,{children:s.jsx(Kt,{placeholder:"Filter by status"})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"all",children:"All Status"}),s.jsx(Ee,{value:"paid",children:"Paid"}),s.jsx(Ee,{value:"pending",children:"Pending"}),s.jsx(Ee,{value:"overdue",children:"Overdue"}),s.jsx(Ee,{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs(ce,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Ul,{size:16}),"Clear Filters"]})]})})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsxs(Ue,{children:["Invoices (",C.length,")"]}),s.jsx(ys,{children:"All invoices and their payment status"})]}),s.jsx(Te,{children:a?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Nr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Invoices"}),s.jsx("p",{className:"text-muted-foreground",children:a})]}):C.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(kn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Invoices Found"}),s.jsx("p",{className:"text-muted-foreground",children:r.length===0?"No invoices have been created yet.":"No invoices match your current filters."})]}):s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"Invoice ID"}),s.jsx(ut,{children:"School"}),s.jsx(ut,{children:"Subscription Plan"}),s.jsx(ut,{children:"Amount"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Due Date"}),s.jsx(ut,{children:"Line Items"}),s.jsx(ut,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:C.map(I=>{var F,E;const O=I.id||I.invoice_id||I.uuid;return s.jsxs(Js,{children:[s.jsxs(ct,{children:[s.jsx("div",{className:"font-medium",children:O||"N/A"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Subscription: ",I.subscription||"N/A"]})]}),s.jsx(ct,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:I.school_name||`School ${I.school}`}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",I.school]})]})}),s.jsx(ct,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:I.subscription_plan||"N/A"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",I.subscription]})]})}),s.jsxs(ct,{children:[s.jsx("div",{className:"font-medium",children:R(I.amount_due||"0",I.currency||"KES")}),parseFloat(I.amount_paid||"0")>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Paid:"," ",R(I.amount_paid||"0",I.currency||"KES")]})]}),s.jsx(ct,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[P(I.status),I.is_overdue&&s.jsx(Pe,{variant:"destructive",className:"text-xs",children:"Overdue"})]})}),s.jsx(ct,{children:s.jsx("div",{className:"text-sm",children:I.due_date?D(I.due_date):"N/A"})}),s.jsxs(ct,{children:[s.jsxs("div",{className:"text-sm",children:[((F=I.line_items)==null?void 0:F.length)||0," items"]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total:"," ",((E=I.line_items)==null?void 0:E.reduce(($,U)=>$+((U==null?void 0:U.total)||0),0))||0]})]}),s.jsx(ct,{className:"text-right",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(ho,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsx(yd,{children:"Actions"}),s.jsxs(Jt,{onClick:()=>w(I),children:[s.jsx(ir,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Jt,{onClick:()=>N(I),children:[s.jsx(Un,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),s.jsxs(Jt,{children:[s.jsx(My,{className:"mr-2 h-4 w-4"}),"Send Invoice"]}),I.status==="pending"&&O&&s.jsxs(Jt,{onClick:()=>A(O),children:[s.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Process Payment"]}),s.jsx(nd,{}),s.jsxs(Jt,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Edit Invoice"]})]})]})})]},O||I.id)})})]})})]}),s.jsx(ote,{isOpen:d,onClose:x}),s.jsx(lte,{invoice:h,isOpen:f,onClose:v})]})},dte=()=>{const e=er(),{messages:t,loading:r,error:n}=Ct(h=>h.contactMessages),[a,i]=g.useState("");g.useEffect(()=>{e(y0())},[e]);const o=h=>{e(j0(h))},l=h=>{switch(h){case"inquiry_message":return s.jsx(Pe,{className:"bg-blue-100 text-blue-800",children:"Inquiry"});case"demo_request":return s.jsx(Pe,{className:"bg-purple-100 text-purple-800",children:"Demo Request"});case"support_message":return s.jsx(Pe,{className:"bg-orange-100 text-orange-800",children:"Support"});default:return s.jsx(Pe,{variant:"outline",children:h})}},c=h=>h?s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Read"}):s.jsx(Pe,{className:"bg-red-100 text-red-800",children:"Unread"}),d=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=t.filter(h=>h.first_name.toLowerCase().includes(a.toLowerCase())||h.last_name.toLowerCase().includes(a.toLowerCase())||h.school_name.toLowerCase().includes(a.toLowerCase())||h.message.toLowerCase().includes(a.toLowerCase()));return r?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((h,p)=>s.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},p))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Customer Support"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage customer inquiries and support messages"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ce,{variant:"outline",children:[s.jsx(Va,{size:16,className:"mr-2"}),"Support Hotline"]}),s.jsxs(ce,{children:[s.jsx(rw,{size:16,className:"mr-2"}),"New Message"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Messages"}),s.jsx(rw,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"All time messages"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Contact Messages"}),s.jsx(va,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"From clients"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Unread Messages"}),s.jsx(Nr,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(h=>!h.is_read).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Need attention"})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Contact Messages"}),s.jsx(ys,{children:"Messages from potential clients and existing customers"})]}),s.jsx(Te,{children:s.jsxs("div",{className:"relative",children:[s.jsx(Jr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ie,{placeholder:"Search contact messages...",value:a,onChange:h=>i(h.target.value),className:"pl-10"})]})})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsxs(Ue,{children:["Contact Messages (",u.length,")"]}),s.jsx(ys,{children:"Messages from potential clients and existing customers"})]}),s.jsx(Te,{children:n?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Nr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Messages"}),s.jsx("p",{className:"text-muted-foreground",children:n})]}):u.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(va,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Contact Messages"}),s.jsx("p",{className:"text-muted-foreground",children:t.length===0?"No contact messages have been received yet.":"No messages match your current search."})]}):s.jsxs(ka,{children:[s.jsx(Pa,{children:s.jsxs(Js,{children:[s.jsx(ut,{children:"Contact"}),s.jsx(ut,{children:"School"}),s.jsx(ut,{children:"Message Type"}),s.jsx(ut,{children:"Status"}),s.jsx(ut,{children:"Message"}),s.jsx(ut,{children:"Date"}),s.jsx(ut,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:u.map(h=>s.jsxs(Js,{children:[s.jsx(ct,{children:s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[h.first_name," ",h.last_name]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:h.email_address})]})}),s.jsx(ct,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:h.school_name})]})}),s.jsx(ct,{children:l(h.message_type)}),s.jsx(ct,{children:c(h.is_read)}),s.jsx(ct,{children:s.jsx("div",{className:"max-w-xs",children:s.jsx("div",{className:"text-sm line-clamp-2",children:h.message})})}),s.jsx(ct,{children:s.jsx("div",{className:"text-sm",children:d(h.created_at)})}),s.jsx(ct,{className:"text-right",children:s.jsxs(Vn,{children:[s.jsx(Hn,{asChild:!0,children:s.jsx(ce,{variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(ho,{className:"h-4 w-4"})})}),s.jsxs(An,{align:"end",children:[s.jsx(yd,{children:"Actions"}),s.jsxs(Jt,{children:[s.jsx(ir,{className:"mr-2 h-4 w-4"}),"View Details"]}),s.jsxs(Jt,{children:[s.jsx(va,{className:"mr-2 h-4 w-4"}),"Reply"]}),!h.is_read&&s.jsxs(Jt,{onClick:()=>o(h.id),children:[s.jsx(Ht,{className:"mr-2 h-4 w-4"}),"Mark as Read"]}),s.jsx(nd,{}),s.jsxs(Jt,{className:"text-red-600",children:[s.jsx(gd,{className:"mr-2 h-4 w-4"}),"Delete Message"]})]})]})})]},h.id))})]})})]})]})},ute=()=>{const e=er(),{invoices:t}=Ct(f=>f.invoices),{subscriptions:r}=Ct(f=>f.schoolSubscriptions),[n,a]=g.useState(null),[i,o]=g.useState(!0),[l,c]=g.useState("30d");g.useEffect(()=>{(async()=>{o(!0);const y=setTimeout(()=>{o(!1),Fs({title:"Loading Timeout",description:"Analytics data is taking too long to load. Please refresh the page.",variant:"destructive"})},1e4);try{let x=[],w=[],v=0;try{await Promise.all([e(ru()),e(bl())])}catch{}try{if(x=await Jc.getAllSchools(),!x||x.length===0)throw new Error("No schools data received")}catch($){throw new Error(`Failed to fetch schools data: ${$.message}`)}try{if(w=await TR.getAllStaff(),!w||w.length===0)throw new Error("No staff data received")}catch($){throw new Error(`Failed to fetch staff data: ${$.message}`)}v=t.reduce(($,U)=>$+parseFloat(U.amount_due||"0"),0);const b=w.length,N=x.reduce(($,U)=>$+(U.currentStudents||0),0),C=b+N,P=x.filter($=>$.isActive).length,D=r.filter($=>$.status==="active").length,R=14.6,A=8.2,I=12.5,O=15.2,F=[{month:"Jan",revenue:v*.92,users:Math.floor(C*.92),schools:Math.floor(x.length*.92)},{month:"Feb",revenue:v*.95,users:Math.floor(C*.95),schools:Math.floor(x.length*.95)},{month:"Mar",revenue:v*.97,users:Math.floor(C*.97),schools:Math.floor(x.length*.97)},{month:"Apr",revenue:v*.98,users:Math.floor(C*.98),schools:Math.floor(x.length*.98)},{month:"May",revenue:v*.99,users:Math.floor(C*.99),schools:Math.floor(x.length*.99)},{month:"Jun",revenue:v,users:C,schools:x.length}],E=x.slice(0,5).map(($,U)=>({name:$.name,revenue:parseFloat($.subscription||"99.99"),users:$.currentStudents||0,subscription:$.subscription?"Premium":"Basic"}));if(clearTimeout(y),x.length===0&&w.length===0)throw new Error("No data available from APIs");a({revenue:{current:v,previous:v*.85,growth:R},users:{total:C,active:C,growth:A},schools:{total:x.length,active:P,growth:I},subscriptions:{total:r.length,active:D,growth:O},monthlyData:F,topSchools:E})}catch{clearTimeout(y),Fs({title:"Error",description:"Failed to fetch analytics data. Please check your connection and try again.",variant:"destructive"})}finally{o(!1)}})()},[e,t,r]);const d=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),u=f=>new Intl.NumberFormat("en-US").format(f),h=f=>f>=0?s.jsx(Oi,{className:"h-4 w-4 text-green-600"}):s.jsx(xq,{className:"h-4 w-4 text-red-600"}),p=f=>f>=0?"text-green-600":"text-red-600";return i||!n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-1/4"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((f,y)=>s.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},y))})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Comprehensive analytics and insights"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Gt,{value:l,onValueChange:c,children:[s.jsx(zt,{className:"w-32",children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"7d",children:"Last 7 days"}),s.jsx(Ee,{value:"30d",children:"Last 30 days"}),s.jsx(Ee,{value:"90d",children:"Last 90 days"}),s.jsx(Ee,{value:"1y",children:"Last year"})]})]}),s.jsxs(ce,{variant:"outline",children:[s.jsx(Un,{size:16,className:"mr-2"}),"Export Report"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(Vc,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:d(n.revenue.current)}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h(n.revenue.growth),s.jsxs("span",{className:`text-sm ${p(n.revenue.growth)}`,children:["+",n.revenue.growth,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Total Users"}),s.jsx(ns,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:u(n.users.total)}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h(n.users.growth),s.jsxs("span",{className:`text-sm ${p(n.users.growth)}`,children:["+",n.users.growth,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Active Schools"}),s.jsx(jr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.schools.active}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h(n.schools.growth),s.jsxs("span",{className:`text-sm ${p(n.schools.growth)}`,children:["+",n.schools.growth,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.subscriptions.active}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h(n.subscriptions.growth),s.jsxs("span",{className:`text-sm ${p(n.subscriptions.growth)}`,children:["+",n.subscriptions.growth,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last period"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Revenue Trend"}),s.jsx(ys,{children:"Monthly revenue over the last 6 months"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:n.monthlyData.map((f,y)=>{const x=Math.max(...n.monthlyData.map(v=>v.revenue)),w=x>0?f.revenue/x*180:20;return s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"w-8 bg-blue-500 rounded-t",style:{height:`${Math.max(w,20)}px`,maxHeight:"180px"}}),s.jsx("span",{className:"text-xs text-muted-foreground",children:f.month})]},y)})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("span",{className:"text-sm text-muted-foreground",children:"Revenue in USD"})})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"User Growth"}),s.jsx(ys,{children:"Monthly user growth over the last 6 months"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:n.monthlyData.map((f,y)=>{const x=Math.max(...n.monthlyData.map(v=>v.users)),w=x>0?f.users/x*180:20;return s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"w-8 bg-green-500 rounded-t",style:{height:`${Math.max(w,20)}px`,maxHeight:"180px"}}),s.jsx("span",{className:"text-xs text-muted-foreground",children:f.month})]},y)})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Users"})})]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Top Performing Schools"}),s.jsx(ys,{children:"Schools with highest revenue and user engagement"})]}),s.jsx(Te,{children:s.jsx("div",{className:"space-y-4",children:n.topSchools.map((f,y)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600",children:y+1})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[u(f.users)," users"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Pe,{variant:f.subscription==="Premium"?"default":"secondary",className:f.subscription==="Premium"?"bg-purple-100 text-purple-800":"",children:f.subscription}),s.jsx("span",{className:"font-medium",children:d(f.revenue)})]})]},y))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Conversion Rate"}),s.jsx(Oy,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n&&n.schools.total>0?`${Math.round(n.subscriptions.active/n.schools.total*100)}%`:"0%"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Schools with active subscriptions"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Average Revenue"}),s.jsx(WA,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n&&n.schools.total>0?d(n.revenue.current/n.schools.total):d(0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Per school per month"})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Ue,{className:"text-sm font-medium",children:"Active Sessions"}),s.jsx(YU,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n?u(n.users.active):"0"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Current active users"})]})]})]})]})},hte=()=>{const[e,t]=g.useState({siteName:"LuxCab School Admin",siteDescription:"School transportation management system",contactEmail:"admin@luxcab.com",supportPhone:"+1 (555) 123-4567",timezone:"UTC",dateFormat:"MM/DD/YYYY",language:"en"}),[r,n]=g.useState({twoFactorAuth:!0,sessionTimeout:30,passwordPolicy:"strong",loginAttempts:5,ipWhitelist:"",auditLogging:!0}),[a,i]=g.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,systemAlerts:!0,marketingEmails:!1,weeklyReports:!0}),[o,l]=g.useState({maintenanceMode:!1,debugMode:!1,autoBackup:!0,backupFrequency:"daily",maxFileSize:10,maxUsersPerSchool:1e3}),c=d=>{};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Super Admin Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Configure system-wide settings and preferences"})]}),s.jsxs(ce,{children:[s.jsx(ih,{size:16,className:"mr-2"}),"Save All Changes"]})]}),s.jsxs($T,{defaultValue:"general",className:"space-y-6",children:[s.jsxs(bS,{className:"grid w-full grid-cols-4",children:[s.jsxs(Hd,{value:"general",className:"flex items-center gap-2",children:[s.jsx(Ai,{size:16}),"General"]}),s.jsxs(Hd,{value:"security",className:"flex items-center gap-2",children:[s.jsx(wn,{size:16}),"Security"]}),s.jsxs(Hd,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(Oo,{size:16}),"Notifications"]}),s.jsxs(Hd,{value:"system",className:"flex items-center gap-2",children:[s.jsx(eq,{size:16}),"System"]})]}),s.jsx(Wd,{value:"general",className:"space-y-6",children:s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"General Settings"}),s.jsx(ys,{children:"Configure basic system information and preferences"})]}),s.jsxs(Te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"siteName",children:"Site Name"}),s.jsx(Ie,{id:"siteName",value:e.siteName,onChange:d=>t(u=>({...u,siteName:d.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"contactEmail",children:"Contact Email"}),s.jsx(Ie,{id:"contactEmail",type:"email",value:e.contactEmail,onChange:d=>t(u=>({...u,contactEmail:d.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"supportPhone",children:"Support Phone"}),s.jsx(Ie,{id:"supportPhone",value:e.supportPhone,onChange:d=>t(u=>({...u,supportPhone:d.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"timezone",children:"Timezone"}),s.jsxs(Gt,{value:e.timezone,onValueChange:d=>t(u=>({...u,timezone:d})),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"UTC",children:"UTC"}),s.jsx(Ee,{value:"EST",children:"Eastern Time"}),s.jsx(Ee,{value:"PST",children:"Pacific Time"}),s.jsx(Ee,{value:"GMT",children:"GMT"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"dateFormat",children:"Date Format"}),s.jsxs(Gt,{value:e.dateFormat,onValueChange:d=>t(u=>({...u,dateFormat:d})),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),s.jsx(Ee,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),s.jsx(Ee,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"language",children:"Language"}),s.jsxs(Gt,{value:e.language,onValueChange:d=>t(u=>({...u,language:d})),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"en",children:"English"}),s.jsx(Ee,{value:"es",children:"Spanish"}),s.jsx(Ee,{value:"fr",children:"French"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"siteDescription",children:"Site Description"}),s.jsx(oa,{id:"siteDescription",value:e.siteDescription,onChange:d=>t(u=>({...u,siteDescription:d.target.value})),rows:3})]}),s.jsxs(ce,{onClick:()=>c(),children:[s.jsx(ih,{size:16,className:"mr-2"}),"Save General Settings"]})]})]})}),s.jsx(Wd,{value:"security",className:"space-y-6",children:s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Security Settings"}),s.jsx(ys,{children:"Configure security policies and authentication settings"})]}),s.jsxs(Te,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Require 2FA for all users"})]}),s.jsx(Us,{checked:r.twoFactorAuth,onCheckedChange:d=>n(u=>({...u,twoFactorAuth:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"Audit Logging"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Log all administrative actions"})]}),s.jsx(Us,{checked:r.auditLogging,onCheckedChange:d=>n(u=>({...u,auditLogging:d}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),s.jsx(Ie,{id:"sessionTimeout",type:"number",value:r.sessionTimeout,onChange:d=>n(u=>({...u,sessionTimeout:parseInt(d.target.value)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"loginAttempts",children:"Max Login Attempts"}),s.jsx(Ie,{id:"loginAttempts",type:"number",value:r.loginAttempts,onChange:d=>n(u=>({...u,loginAttempts:parseInt(d.target.value)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"passwordPolicy",children:"Password Policy"}),s.jsxs(Gt,{value:r.passwordPolicy,onValueChange:d=>n(u=>({...u,passwordPolicy:d})),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"basic",children:"Basic"}),s.jsx(Ee,{value:"strong",children:"Strong"}),s.jsx(Ee,{value:"very-strong",children:"Very Strong"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"ipWhitelist",children:"IP Whitelist (optional)"}),s.jsx(oa,{id:"ipWhitelist",value:r.ipWhitelist,onChange:d=>n(u=>({...u,ipWhitelist:d.target.value})),placeholder:"Enter IP addresses, one per line",rows:3})]}),s.jsxs(ce,{onClick:()=>c(),children:[s.jsx(ih,{size:16,className:"mr-2"}),"Save Security Settings"]})]})]})}),s.jsx(Wd,{value:"notifications",className:"space-y-6",children:s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"Notification Settings"}),s.jsx(ys,{children:"Configure system-wide notification preferences"})]}),s.jsxs(Te,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send notifications via email"})]}),s.jsx(Us,{checked:a.emailNotifications,onCheckedChange:d=>i(u=>({...u,emailNotifications:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"SMS Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send notifications via SMS"})]}),s.jsx(Us,{checked:a.smsNotifications,onCheckedChange:d=>i(u=>({...u,smsNotifications:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"Push Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send push notifications to mobile apps"})]}),s.jsx(Us,{checked:a.pushNotifications,onCheckedChange:d=>i(u=>({...u,pushNotifications:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"System Alerts"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Show system alerts and warnings"})]}),s.jsx(Us,{checked:a.systemAlerts,onCheckedChange:d=>i(u=>({...u,systemAlerts:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"Marketing Emails"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send promotional and marketing emails"})]}),s.jsx(Us,{checked:a.marketingEmails,onCheckedChange:d=>i(u=>({...u,marketingEmails:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"Weekly Reports"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send weekly system reports"})]}),s.jsx(Us,{checked:a.weeklyReports,onCheckedChange:d=>i(u=>({...u,weeklyReports:d}))})]})]}),s.jsxs(ce,{onClick:()=>c(),children:[s.jsx(ih,{size:16,className:"mr-2"}),"Save Notification Settings"]})]})]})}),s.jsxs(Wd,{value:"system",className:"space-y-6",children:[s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"System Settings"}),s.jsx(ys,{children:"Configure system performance and maintenance settings"})]}),s.jsxs(Te,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"Maintenance Mode"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Put the system in maintenance mode"})]}),s.jsx(Us,{checked:o.maintenanceMode,onCheckedChange:d=>l(u=>({...u,maintenanceMode:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"Debug Mode"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable debug logging and features"})]}),s.jsx(Us,{checked:o.debugMode,onCheckedChange:d=>l(u=>({...u,debugMode:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ne,{children:"Auto Backup"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically backup system data"})]}),s.jsx(Us,{checked:o.autoBackup,onCheckedChange:d=>l(u=>({...u,autoBackup:d}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"backupFrequency",children:"Backup Frequency"}),s.jsxs(Gt,{value:o.backupFrequency,onValueChange:d=>l(u=>({...u,backupFrequency:d})),children:[s.jsx(zt,{children:s.jsx(Kt,{})}),s.jsxs(Ut,{children:[s.jsx(Ee,{value:"daily",children:"Daily"}),s.jsx(Ee,{value:"weekly",children:"Weekly"}),s.jsx(Ee,{value:"monthly",children:"Monthly"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"maxFileSize",children:"Max File Size (MB)"}),s.jsx(Ie,{id:"maxFileSize",type:"number",value:o.maxFileSize,onChange:d=>l(u=>({...u,maxFileSize:parseInt(d.target.value)}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ne,{htmlFor:"maxUsersPerSchool",children:"Max Users per School"}),s.jsx(Ie,{id:"maxUsersPerSchool",type:"number",value:o.maxUsersPerSchool,onChange:d=>l(u=>({...u,maxUsersPerSchool:parseInt(d.target.value)}))})]})]}),s.jsxs(ce,{onClick:()=>c(),children:[s.jsx(ih,{size:16,className:"mr-2"}),"Save System Settings"]})]})]}),s.jsxs(Le,{children:[s.jsxs(Be,{children:[s.jsx(Ue,{children:"System Status"}),s.jsx(ys,{children:"Current system health and status"})]}),s.jsx(Te,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ht,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"Database Connection"})]}),s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ht,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"API Services"})]}),s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Online"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ht,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"Email Service"})]}),s.jsx(Pe,{className:"bg-green-100 text-green-800",children:"Active"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hc,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{children:"Storage Usage"})]}),s.jsx(Pe,{className:"bg-yellow-100 text-yellow-800",children:"75% Used"})]})]})})]})]})]})]})};var N1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},S1=typeof window>"u"||"Deno"in globalThis;function Xi(){}function fte(e,t){return typeof e=="function"?e(t):e}function mte(e){return typeof e=="number"&&e>=0&&e!==1/0}function pte(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ww(e,t){return typeof e=="function"?e(t):e}function xte(e,t){return typeof e=="function"?e(t):e}function XC(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==AS(o,t.options))return!1}else if(!$p(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function QC(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Mp(t.options.mutationKey)!==Mp(i))return!1}else if(!$p(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function AS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Mp)(e)}function Mp(e){return JSON.stringify(e,(t,r)=>Gw(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function $p(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>$p(e[r],t[r])):!1}function RR(e,t){if(e===t)return e;const r=ek(e)&&ek(t);if(r||Gw(e)&&Gw(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let d=0;for(let u=0;u<o;u++){const h=r?u:i[u];(!r&&c.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,d++):(l[h]=RR(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&d++)}return a===o&&d===a?e:l}return t}function ek(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Gw(e){if(!tk(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!tk(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function tk(e){return Object.prototype.toString.call(e)==="[object Object]"}function gte(e){return new Promise(t=>{setTimeout(t,e)})}function vte(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?RR(e,t):t}function yte(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function jte(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var ES=Symbol();function IR(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ES?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Gd,jc,Jh,ak,bte=(ak=class extends N1{constructor(){super();Hs(this,Gd);Hs(this,jc);Hs(this,Jh);fs(this,Jh,t=>{if(!S1&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Qe(this,jc)||this.setEventListener(Qe(this,Jh))}onUnsubscribe(){var t;this.hasListeners()||((t=Qe(this,jc))==null||t.call(this),fs(this,jc,void 0))}setEventListener(t){var r;fs(this,Jh,t),(r=Qe(this,jc))==null||r.call(this),fs(this,jc,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Qe(this,Gd)!==t&&(fs(this,Gd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Qe(this,Gd)=="boolean"?Qe(this,Gd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Gd=new WeakMap,jc=new WeakMap,Jh=new WeakMap,ak),FR=new bte,Zh,bc,Xh,ik,wte=(ik=class extends N1{constructor(){super();Hs(this,Zh,!0);Hs(this,bc);Hs(this,Xh);fs(this,Xh,t=>{if(!S1&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Qe(this,bc)||this.setEventListener(Qe(this,Xh))}onUnsubscribe(){var t;this.hasListeners()||((t=Qe(this,bc))==null||t.call(this),fs(this,bc,void 0))}setEventListener(t){var r;fs(this,Xh,t),(r=Qe(this,bc))==null||r.call(this),fs(this,bc,t(this.setOnline.bind(this)))}setOnline(t){Qe(this,Zh)!==t&&(fs(this,Zh,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Qe(this,Zh)}},Zh=new WeakMap,bc=new WeakMap,Xh=new WeakMap,ik),Hv=new wte;function Nte(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function Ste(e){return Math.min(1e3*2**e,3e4)}function DR(e){return(e??"online")==="online"?Hv.isOnline():!0}var OR=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ub(e){return e instanceof OR}function MR(e){let t=!1,r=0,n=!1,a;const i=Nte(),o=x=>{var w;n||(p(new OR(x)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>FR.isFocused()&&(e.networkMode==="always"||Hv.isOnline())&&e.canRun(),u=()=>DR(e.networkMode)&&e.canRun(),h=x=>{var w;n||(n=!0,(w=e.onSuccess)==null||w.call(e,x),a==null||a(),i.resolve(x))},p=x=>{var w;n||(n=!0,(w=e.onError)==null||w.call(e,x),a==null||a(),i.reject(x))},f=()=>new Promise(x=>{var w;a=v=>{(n||d())&&x(v)},(w=e.onPause)==null||w.call(e)}).then(()=>{var x;a=void 0,n||(x=e.onContinue)==null||x.call(e)}),y=()=>{if(n)return;let x;const w=r===0?e.initialPromise:void 0;try{x=w??e.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(h).catch(v=>{var D;if(n)return;const b=e.retry??(S1?0:3),N=e.retryDelay??Ste,C=typeof N=="function"?N(r,v):N,P=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,v);if(t||!P){p(v);return}r++,(D=e.onFail)==null||D.call(e,r,v),gte(C).then(()=>d()?void 0:f()).then(()=>{t?p(v):y()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():f().then(y),i)}}var _te=e=>setTimeout(e,0);function Cte(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=_te;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var ga=Cte(),Kd,ok,$R=(ok=class{constructor(){Hs(this,Kd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mte(this.gcTime)&&fs(this,Kd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(S1?1/0:5*60*1e3))}clearGcTimeout(){Qe(this,Kd)&&(clearTimeout(Qe(this,Kd)),fs(this,Kd,void 0))}},Kd=new WeakMap,ok),Qh,ef,Ci,Yd,ta,Bp,Jd,Qi,hl,lk,kte=(lk=class extends $R{constructor(t){super();Hs(this,Qi);Hs(this,Qh);Hs(this,ef);Hs(this,Ci);Hs(this,Yd);Hs(this,ta);Hs(this,Bp);Hs(this,Jd);fs(this,Jd,!1),fs(this,Bp,t.defaultOptions),this.setOptions(t.options),this.observers=[],fs(this,Yd,t.client),fs(this,Ci,Qe(this,Yd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,fs(this,Qh,Ate(this.options)),this.state=t.state??Qe(this,Qh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Qe(this,ta))==null?void 0:t.promise}setOptions(t){this.options={...Qe(this,Bp),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Qe(this,Ci).remove(this)}setData(t,r){const n=vte(this.state.data,t,this.options);return Kn(this,Qi,hl).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Kn(this,Qi,hl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=Qe(this,ta))==null?void 0:n.promise;return(a=Qe(this,ta))==null||a.cancel(t),r?r.then(Xi).catch(Xi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Qe(this,Qh))}isActive(){return this.observers.some(t=>xte(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ES||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ww(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!pte(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Qe(this,ta))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Qe(this,ta))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Qe(this,Ci).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Qe(this,ta)&&(Qe(this,Jd)?Qe(this,ta).cancel({revert:!0}):Qe(this,ta).cancelRetry()),this.scheduleGc()),Qe(this,Ci).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Kn(this,Qi,hl).call(this,{type:"invalidate"})}fetch(t,r){var d,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Qe(this,ta))return Qe(this,ta).continueRetry(),Qe(this,ta).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(f=>f.options.queryFn);p&&this.setOptions(p.options)}const n=new AbortController,a=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(fs(this,Jd,!0),n.signal)})},i=()=>{const p=IR(this.options,r),y=(()=>{const x={client:Qe(this,Yd),queryKey:this.queryKey,meta:this.meta};return a(x),x})();return fs(this,Jd,!1),this.options.persister?this.options.persister(p,y,this):p(y)},l=(()=>{const p={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Qe(this,Yd),state:this.state,fetchFn:i};return a(p),p})();(d=this.options.behavior)==null||d.onFetch(l,this),fs(this,ef,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&Kn(this,Qi,hl).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=p=>{var f,y,x,w;Ub(p)&&p.silent||Kn(this,Qi,hl).call(this,{type:"error",error:p}),Ub(p)||((y=(f=Qe(this,Ci).config).onError)==null||y.call(f,p,this),(w=(x=Qe(this,Ci).config).onSettled)==null||w.call(x,this.state.data,p,this)),this.scheduleGc()};return fs(this,ta,MR({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:p=>{var f,y,x,w;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(v){c(v);return}(y=(f=Qe(this,Ci).config).onSuccess)==null||y.call(f,p,this),(w=(x=Qe(this,Ci).config).onSettled)==null||w.call(x,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,f)=>{Kn(this,Qi,hl).call(this,{type:"failed",failureCount:p,error:f})},onPause:()=>{Kn(this,Qi,hl).call(this,{type:"pause"})},onContinue:()=>{Kn(this,Qi,hl).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Qe(this,ta).start()}},Qh=new WeakMap,ef=new WeakMap,Ci=new WeakMap,Yd=new WeakMap,ta=new WeakMap,Bp=new WeakMap,Jd=new WeakMap,Qi=new WeakSet,hl=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Pte(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Ub(a)&&a.revert&&Qe(this,ef)?{...Qe(this,ef),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ga.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Qe(this,Ci).notify({query:this,type:"updated",action:t})})},lk);function Pte(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DR(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ate(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Eo,ck,Ete=(ck=class extends N1{constructor(t={}){super();Hs(this,Eo);this.config=t,fs(this,Eo,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??AS(a,r);let o=this.get(i);return o||(o=new kte({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Qe(this,Eo).has(t.queryHash)||(Qe(this,Eo).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Qe(this,Eo).get(t.queryHash);r&&(t.destroy(),r===t&&Qe(this,Eo).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ga.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Qe(this,Eo).get(t)}getAll(){return[...Qe(this,Eo).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>XC(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>XC(t,n)):r}notify(t){ga.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ga.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ga.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Eo=new WeakMap,ck),Lo,fa,Zd,To,uc,dk,Lte=(dk=class extends $R{constructor(t){super();Hs(this,To);Hs(this,Lo);Hs(this,fa);Hs(this,Zd);this.mutationId=t.mutationId,fs(this,fa,t.mutationCache),fs(this,Lo,[]),this.state=t.state||Tte(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Qe(this,Lo).includes(t)||(Qe(this,Lo).push(t),this.clearGcTimeout(),Qe(this,fa).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){fs(this,Lo,Qe(this,Lo).filter(r=>r!==t)),this.scheduleGc(),Qe(this,fa).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Qe(this,Lo).length||(this.state.status==="pending"?this.scheduleGc():Qe(this,fa).remove(this))}continue(){var t;return((t=Qe(this,Zd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,d,u,h,p,f,y,x,w,v,b,N,C,P,D,R,A;const r=()=>{Kn(this,To,uc).call(this,{type:"continue"})};fs(this,Zd,MR({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,O)=>{Kn(this,To,uc).call(this,{type:"failed",failureCount:I,error:O})},onPause:()=>{Kn(this,To,uc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Qe(this,fa).canRun(this)}));const n=this.state.status==="pending",a=!Qe(this,Zd).canStart();try{if(n)r();else{Kn(this,To,uc).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=Qe(this,fa).config).onMutate)==null?void 0:o.call(i,t,this));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));O!==this.state.context&&Kn(this,To,uc).call(this,{type:"pending",context:O,variables:t,isPaused:a})}const I=await Qe(this,Zd).start();return await((u=(d=Qe(this,fa).config).onSuccess)==null?void 0:u.call(d,I,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,I,t,this.state.context)),await((y=(f=Qe(this,fa).config).onSettled)==null?void 0:y.call(f,I,null,this.state.variables,this.state.context,this)),await((w=(x=this.options).onSettled)==null?void 0:w.call(x,I,null,t,this.state.context)),Kn(this,To,uc).call(this,{type:"success",data:I}),I}catch(I){try{throw await((b=(v=Qe(this,fa).config).onError)==null?void 0:b.call(v,I,t,this.state.context,this)),await((C=(N=this.options).onError)==null?void 0:C.call(N,I,t,this.state.context)),await((D=(P=Qe(this,fa).config).onSettled)==null?void 0:D.call(P,void 0,I,this.state.variables,this.state.context,this)),await((A=(R=this.options).onSettled)==null?void 0:A.call(R,void 0,I,t,this.state.context)),I}finally{Kn(this,To,uc).call(this,{type:"error",error:I})}}finally{Qe(this,fa).runNext(this)}}},Lo=new WeakMap,fa=new WeakMap,Zd=new WeakMap,To=new WeakSet,uc=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ga.batch(()=>{Qe(this,Lo).forEach(n=>{n.onMutationUpdate(t)}),Qe(this,fa).notify({mutation:this,type:"updated",action:t})})},dk);function Tte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pl,eo,zp,uk,Rte=(uk=class extends N1{constructor(t={}){super();Hs(this,pl);Hs(this,eo);Hs(this,zp);this.config=t,fs(this,pl,new Set),fs(this,eo,new Map),fs(this,zp,0)}build(t,r,n){const a=new Lte({mutationCache:this,mutationId:++Gx(this,zp)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){Qe(this,pl).add(t);const r=kg(t);if(typeof r=="string"){const n=Qe(this,eo).get(r);n?n.push(t):Qe(this,eo).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Qe(this,pl).delete(t)){const r=kg(t);if(typeof r=="string"){const n=Qe(this,eo).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&Qe(this,eo).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=kg(t);if(typeof r=="string"){const n=Qe(this,eo).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=kg(t);if(typeof r=="string"){const a=(n=Qe(this,eo).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ga.batch(()=>{Qe(this,pl).forEach(t=>{this.notify({type:"removed",mutation:t})}),Qe(this,pl).clear(),Qe(this,eo).clear()})}getAll(){return Array.from(Qe(this,pl))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>QC(r,n))}findAll(t={}){return this.getAll().filter(r=>QC(t,r))}notify(t){ga.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ga.batch(()=>Promise.all(t.map(r=>r.continue().catch(Xi))))}},pl=new WeakMap,eo=new WeakMap,zp=new WeakMap,uk);function kg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function sk(e){return{onFetch:(t,r)=>{var u,h,p,f,y;const n=t.options,a=(p=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const w=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},v=IR(t.options,t.fetchOptions),b=async(N,C,P)=>{if(x)return Promise.reject();if(C==null&&N.pages.length)return Promise.resolve(N);const R=(()=>{const F={client:t.client,queryKey:t.queryKey,pageParam:C,direction:P?"backward":"forward",meta:t.options.meta};return w(F),F})(),A=await v(R),{maxPages:I}=t.options,O=P?jte:yte;return{pages:O(N.pages,A,I),pageParams:O(N.pageParams,C,I)}};if(a&&i.length){const N=a==="backward",C=N?Ite:rk,P={pages:i,pageParams:o},D=C(n,P);l=await b(P,D,N)}else{const N=e??i.length;do{const C=c===0?o[0]??n.initialPageParam:rk(n,l);if(c>0&&C==null)break;l=await b(l,C),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var x,w;return(w=(x=t.options).persister)==null?void 0:w.call(x,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function rk(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Ite(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Or,wc,Nc,tf,sf,Sc,rf,nf,hk,Fte=(hk=class{constructor(e={}){Hs(this,Or);Hs(this,wc);Hs(this,Nc);Hs(this,tf);Hs(this,sf);Hs(this,Sc);Hs(this,rf);Hs(this,nf);fs(this,Or,e.queryCache||new Ete),fs(this,wc,e.mutationCache||new Rte),fs(this,Nc,e.defaultOptions||{}),fs(this,tf,new Map),fs(this,sf,new Map),fs(this,Sc,0)}mount(){Gx(this,Sc)._++,Qe(this,Sc)===1&&(fs(this,rf,FR.subscribe(async e=>{e&&(await this.resumePausedMutations(),Qe(this,Or).onFocus())})),fs(this,nf,Hv.subscribe(async e=>{e&&(await this.resumePausedMutations(),Qe(this,Or).onOnline())})))}unmount(){var e,t;Gx(this,Sc)._--,Qe(this,Sc)===0&&((e=Qe(this,rf))==null||e.call(this),fs(this,rf,void 0),(t=Qe(this,nf))==null||t.call(this),fs(this,nf,void 0))}isFetching(e){return Qe(this,Or).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Qe(this,wc).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Qe(this,Or).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Qe(this,Or).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ww(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Qe(this,Or).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=Qe(this,Or).get(n.queryHash),i=a==null?void 0:a.state.data,o=fte(t,i);if(o!==void 0)return Qe(this,Or).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return ga.batch(()=>Qe(this,Or).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Qe(this,Or).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Qe(this,Or);ga.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Qe(this,Or);return ga.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ga.batch(()=>Qe(this,Or).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Xi).catch(Xi)}invalidateQueries(e,t={}){return ga.batch(()=>(Qe(this,Or).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ga.batch(()=>Qe(this,Or).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Xi)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Xi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Qe(this,Or).build(this,t);return r.isStaleByTime(Ww(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Xi).catch(Xi)}fetchInfiniteQuery(e){return e.behavior=sk(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Xi).catch(Xi)}ensureInfiniteQueryData(e){return e.behavior=sk(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Hv.isOnline()?Qe(this,wc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Qe(this,Or)}getMutationCache(){return Qe(this,wc)}getDefaultOptions(){return Qe(this,Nc)}setDefaultOptions(e){fs(this,Nc,e)}setQueryDefaults(e,t){Qe(this,tf).set(Mp(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Qe(this,tf).values()],r={};return t.forEach(n=>{$p(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Qe(this,sf).set(Mp(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Qe(this,sf).values()],r={};return t.forEach(n=>{$p(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Qe(this,Nc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=AS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ES&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Qe(this,Nc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Qe(this,Or).clear(),Qe(this,wc).clear()}},Or=new WeakMap,wc=new WeakMap,Nc=new WeakMap,tf=new WeakMap,sf=new WeakMap,Sc=new WeakMap,rf=new WeakMap,nf=new WeakMap,hk),Dte=g.createContext(void 0),Ote=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Dte.Provider,{value:e,children:t})),LS="ToastProvider",[TS,Mte,$te]=t1("Toast"),[BR,qse]=_a("Toast",[$te]),[Bte,_1]=BR(LS),zR=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=g.useState(null),[d,u]=g.useState(0),h=g.useRef(!1),p=g.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${LS}\`. Expected non-empty \`string\`.`),s.jsx(TS.Provider,{scope:t,children:s.jsx(Bte,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>u(f=>f+1),[]),onToastRemove:g.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};zR.displayName=LS;var UR="ToastViewport",zte=["F8"],Kw="toast.viewportPause",Yw="toast.viewportResume",qR=g.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=zte,label:a="Notifications ({hotkey})",...i}=e,o=_1(UR,r),l=Mte(r),c=g.useRef(null),d=g.useRef(null),u=g.useRef(null),h=g.useRef(null),p=_s(t,h,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;g.useEffect(()=>{const w=v=>{var N;n.length!==0&&n.every(C=>v[C]||v.code===C)&&((N=h.current)==null||N.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),g.useEffect(()=>{const w=c.current,v=h.current;if(y&&w&&v){const b=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(Kw);v.dispatchEvent(D),o.isClosePausedRef.current=!0}},N=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(Yw);v.dispatchEvent(D),o.isClosePausedRef.current=!1}},C=D=>{!w.contains(D.relatedTarget)&&N()},P=()=>{w.contains(document.activeElement)||N()};return w.addEventListener("focusin",b),w.addEventListener("focusout",C),w.addEventListener("pointermove",b),w.addEventListener("pointerleave",P),window.addEventListener("blur",b),window.addEventListener("focus",N),()=>{w.removeEventListener("focusin",b),w.removeEventListener("focusout",C),w.removeEventListener("pointermove",b),w.removeEventListener("pointerleave",P),window.removeEventListener("blur",b),window.removeEventListener("focus",N)}}},[y,o.isClosePausedRef]);const x=g.useCallback(({tabbingDirection:w})=>{const b=l().map(N=>{const C=N.ref.current,P=[C,...ese(C)];return w==="forwards"?P:P.reverse()});return(w==="forwards"?b.reverse():b).flat()},[l]);return g.useEffect(()=>{const w=h.current;if(w){const v=b=>{var P,D,R;const N=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!N){const A=document.activeElement,I=b.shiftKey;if(b.target===w&&I){(P=d.current)==null||P.focus();return}const E=x({tabbingDirection:I?"backwards":"forwards"}),$=E.findIndex(U=>U===A);qb(E.slice($+1))?b.preventDefault():I?(D=d.current)==null||D.focus():(R=u.current)==null||R.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[l,x]),s.jsxs(SV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(Jw,{ref:d,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"forwards"});qb(w)}}),s.jsx(TS.Slot,{scope:r,children:s.jsx(Mt.ol,{tabIndex:-1,...i,ref:p})}),y&&s.jsx(Jw,{ref:u,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"backwards"});qb(w)}})]})});qR.displayName=UR;var VR="ToastFocusProxy",Jw=g.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=_1(VR,r);return s.jsx(Zy,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});Jw.displayName=VR;var lx="Toast",Ute="toast.swipeStart",qte="toast.swipeMove",Vte="toast.swipeCancel",Hte="toast.swipeEnd",HR=g.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=fo({prop:n,defaultProp:a??!0,onChange:i,caller:lx});return s.jsx(Ga,{present:r||l,children:s.jsx(Kte,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Wa(e.onPause),onResume:Wa(e.onResume),onSwipeStart:gt(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:gt(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:gt(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:gt(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});HR.displayName=lx;var[Wte,Gte]=BR(lx,{onClose(){}}),Kte=g.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...y}=e,x=_1(lx,r),[w,v]=g.useState(null),b=_s(t,U=>v(U)),N=g.useRef(null),C=g.useRef(null),P=a||x.duration,D=g.useRef(0),R=g.useRef(P),A=g.useRef(0),{onToastAdd:I,onToastRemove:O}=x,F=Wa(()=>{var K;(w==null?void 0:w.contains(document.activeElement))&&((K=x.viewport)==null||K.focus()),o()}),E=g.useCallback(U=>{!U||U===1/0||(window.clearTimeout(A.current),D.current=new Date().getTime(),A.current=window.setTimeout(F,U))},[F]);g.useEffect(()=>{const U=x.viewport;if(U){const K=()=>{E(R.current),d==null||d()},re=()=>{const pe=new Date().getTime()-D.current;R.current=R.current-pe,window.clearTimeout(A.current),c==null||c()};return U.addEventListener(Kw,re),U.addEventListener(Yw,K),()=>{U.removeEventListener(Kw,re),U.removeEventListener(Yw,K)}}},[x.viewport,P,c,d,E]),g.useEffect(()=>{i&&!x.isClosePausedRef.current&&E(P)},[i,P,x.isClosePausedRef,E]),g.useEffect(()=>(I(),()=>O()),[I,O]);const $=g.useMemo(()=>w?XR(w):null,[w]);return x.viewport?s.jsxs(s.Fragment,{children:[$&&s.jsx(Yte,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),s.jsx(Wte,{scope:r,onClose:F,children:pd.createPortal(s.jsx(TS.ItemSlot,{scope:r,children:s.jsx(NV,{asChild:!0,onEscapeKeyDown:gt(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||F(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Mt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...y,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:gt(e.onKeyDown,U=>{U.key==="Escape"&&(l==null||l(U.nativeEvent),U.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:gt(e.onPointerDown,U=>{U.button===0&&(N.current={x:U.clientX,y:U.clientY})}),onPointerMove:gt(e.onPointerMove,U=>{if(!N.current)return;const K=U.clientX-N.current.x,re=U.clientY-N.current.y,pe=!!C.current,Q=["left","right"].includes(x.swipeDirection),J=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,q=Q?J(0,K):0,Y=Q?0:J(0,re),k=U.pointerType==="touch"?10:2,L={x:q,y:Y},M={originalEvent:U,delta:L};pe?(C.current=L,Pg(qte,h,M,{discrete:!1})):nk(L,x.swipeDirection,k)?(C.current=L,Pg(Ute,u,M,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(K)>k||Math.abs(re)>k)&&(N.current=null)}),onPointerUp:gt(e.onPointerUp,U=>{const K=C.current,re=U.target;if(re.hasPointerCapture(U.pointerId)&&re.releasePointerCapture(U.pointerId),C.current=null,N.current=null,K){const pe=U.currentTarget,Q={originalEvent:U,delta:K};nk(K,x.swipeDirection,x.swipeThreshold)?Pg(Hte,f,Q,{discrete:!0}):Pg(Vte,p,Q,{discrete:!0}),pe.addEventListener("click",J=>J.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),Yte=e=>{const{__scopeToast:t,children:r,...n}=e,a=_1(lx,t),[i,o]=g.useState(!1),[l,c]=g.useState(!1);return Xte(()=>o(!0)),g.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(Rf,{asChild:!0,children:s.jsx(Zy,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},Jte="ToastTitle",WR=g.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Mt.div,{...n,ref:t})});WR.displayName=Jte;var Zte="ToastDescription",GR=g.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Mt.div,{...n,ref:t})});GR.displayName=Zte;var KR="ToastAction",YR=g.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(ZR,{altText:r,asChild:!0,children:s.jsx(RS,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${KR}\`. Expected non-empty \`string\`.`),null)});YR.displayName=KR;var JR="ToastClose",RS=g.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=Gte(JR,r);return s.jsx(ZR,{asChild:!0,children:s.jsx(Mt.button,{type:"button",...n,ref:t,onClick:gt(e.onClick,a.onClose)})})});RS.displayName=JR;var ZR=g.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Mt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function XR(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),Qte(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...XR(n))}}),t}function Pg(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?C5(a,i):a.dispatchEvent(i)}var nk=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function Xte(e=()=>{}){const t=Wa(e);qn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function Qte(e){return e.nodeType===e.ELEMENT_NODE}function ese(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function qb(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var tse=zR,QR=qR,eI=HR,tI=WR,sI=GR,rI=YR,nI=RS;const sse=tse,aI=g.forwardRef(({className:e,...t},r)=>s.jsx(QR,{ref:r,className:it("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));aI.displayName=QR.displayName;const rse=Nu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),iI=g.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(eI,{ref:n,className:it(rse({variant:t}),e),...r}));iI.displayName=eI.displayName;const nse=g.forwardRef(({className:e,...t},r)=>s.jsx(rI,{ref:r,className:it("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));nse.displayName=rI.displayName;const oI=g.forwardRef(({className:e,...t},r)=>s.jsx(nI,{ref:r,className:it("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(co,{className:"h-4 w-4"})}));oI.displayName=nI.displayName;const lI=g.forwardRef(({className:e,...t},r)=>s.jsx(tI,{ref:r,className:it("text-sm font-semibold",e),...t}));lI.displayName=tI.displayName;const cI=g.forwardRef(({className:e,...t},r)=>s.jsx(sI,{ref:r,className:it("text-sm opacity-90",e),...t}));cI.displayName=sI.displayName;function ase(){const{toasts:e}=Ar();return s.jsxs(sse,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(iI,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(lI,{children:r}),n&&s.jsx(cI,{children:n})]}),a,s.jsx(oI,{})]},t)}),s.jsx(aI,{})]})}const ise=g.createContext(null),Vb={didCatch:!1,error:null};class ose extends g.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Vb}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,n,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:i,reason:"imperative-api"}),this.setState(Vb)}}componentDidCatch(t,r){var n,a;(n=(a=this.props).onError)===null||n===void 0||n.call(a,t,r)}componentDidUpdate(t,r){const{didCatch:n}=this.state,{resetKeys:a}=this.props;if(n&&r.error!==null&&lse(t.resetKeys,a)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(Vb)}}render(){const{children:t,fallbackRender:r,FallbackComponent:n,fallback:a}=this.props,{didCatch:i,error:o}=this.state;let l=t;if(i){const c={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")l=r(c);else if(n)l=g.createElement(n,c);else if(a!==void 0)l=a;else throw o}return g.createElement(ise.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},l)}}function lse(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}const cse=new Fte,dse=()=>{var d;const e=er(),{token:t,isInitialized:r,user:n,hasLoggedInBefore:a}=Ct(u=>u.auth),{schools:i=[],loading:o,error:l}=Ct(u=>u.schools),c=(d=i.find(u=>u.admin===(n==null?void 0:n.id)))==null?void 0:d.id;return g.useEffect(()=>{e(_z())},[e]),g.useEffect(()=>{localStorage.setItem("schoolId",(c==null?void 0:c.toString())||"")},[c]),vs.useEffect(()=>{if(t&&r){const u=setInterval(()=>{e(Sz())},6e4);return()=>clearInterval(u)}},[t,r,e]),vs.useEffect(()=>{if(t&&r&&n){let u=0;const h=3,p=async()=>{try{await e(jl()).unwrap()}catch(f){u++;const y=typeof f=="string"?f:"Unknown error";u<h?setTimeout(()=>{p()},1e3*u):!y.includes("401")&&!y.includes("403")&&!y.includes("Unauthorized")&&!y.includes("Authentication failed")&&e(l3())}};p()}},[t,r,n,e]),vs.useEffect(()=>{!t&&l&&e(l3())},[t,l,e]),s.jsxs(mM,{children:[s.jsx(Es,{path:"/login",element:s.jsx(IH,{})}),s.jsx(Es,{path:"/home",element:s.jsx($H,{})}),s.jsx(Es,{path:"/pricing",element:s.jsx(BH,{})}),s.jsx(Es,{path:"/subscription-selection",element:s.jsx(UH,{})}),s.jsx(Es,{path:"/register",element:s.jsx(zH,{})}),s.jsx(Es,{path:"/verification",element:s.jsx(qH,{})}),s.jsx(Es,{path:"/terms-and-policies",element:s.jsx(Uee,{})}),s.jsxs(Es,{path:"/",element:t?s.jsx(CY,{}):s.jsx(w4,{to:a?"/login":"/home",replace:!0}),children:[s.jsx(Es,{index:!0,element:s.jsx(cJ,{})}),s.jsx(Es,{path:"trips",element:s.jsx(NJ,{})}),s.jsx(Es,{path:"routes",element:s.jsx(FZ,{})}),s.jsx(Es,{path:"students",element:s.jsx(SX,{})}),s.jsx(Es,{path:"staff",element:s.jsx(PX,{})}),s.jsx(Es,{path:"parents",element:s.jsx(UX,{})}),s.jsx(Es,{path:"drivers",element:s.jsx(qX,{})}),s.jsx(Es,{path:"vehicles",element:s.jsx(VX,{})}),s.jsx(Es,{path:"reports",element:s.jsx(WX,{})}),s.jsx(Es,{path:"subscription",element:s.jsx(tQ,{})}),s.jsx(Es,{path:"admin/subscription",element:s.jsx(sQ,{})}),s.jsx(Es,{path:"admin/school-subscription",element:s.jsx($ee,{})}),s.jsx(Es,{path:"notifications",element:s.jsx(zee,{})}),s.jsx(Es,{path:"settings",element:s.jsx(ZX,{})}),s.jsx(Es,{path:"profile",element:s.jsx(QX,{})})]}),s.jsxs(Es,{path:"/super-admin",element:t?s.jsx(Gee,{}):s.jsx(w4,{to:"/login",replace:!0}),children:[s.jsx(Es,{index:!0,element:s.jsx(Jee,{})}),s.jsx(Es,{path:"users",element:s.jsx(ete,{})}),s.jsx(Es,{path:"schools",element:s.jsx(tte,{})}),s.jsx(Es,{path:"schools/:id",element:s.jsx(ste,{})}),s.jsx(Es,{path:"subscriptions",element:s.jsx(rte,{})}),s.jsx(Es,{path:"school-subscriptions",element:s.jsx(ite,{})}),s.jsx(Es,{path:"invoices",element:s.jsx(cte,{})}),s.jsx(Es,{path:"support",element:s.jsx(dte,{})}),s.jsx(Es,{path:"analytics",element:s.jsx(ute,{})}),s.jsx(Es,{path:"settings",element:s.jsx(hte,{})})]}),s.jsx(Es,{path:"*",element:s.jsx(qee,{})})]})},use=()=>s.jsx(bM,{children:s.jsx(dse,{})});function hse(){return s.jsx(ose,{FallbackComponent:()=>null,children:s.jsx(jq,{children:s.jsx(bq,{children:s.jsx(Ote,{client:cse,children:s.jsxs(b8,{children:[s.jsx(use,{}),s.jsx(ase,{})]})})})})})}kP(document.getElementById("root")).render(s.jsx(hse,{}));export{k9 as _,mse as c,fk as g};
